/*



 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20130512
*/
YUI.add("panel",function(a,d){var b=a.ClassNameManager.getClassName;a.Panel=a.Base.create("panel",a.Widget,[a.WidgetPosition,a.WidgetStdMod,a.WidgetAutohide,a.WidgetButtons,a.WidgetModality,a.WidgetPositionAlign,a.WidgetPositionConstrain,a.WidgetStack],{BUTTONS:{close:{label:"Close",action:"hide",section:"header",template:'<button type="button" />',classNames:b("button","close")}}},{ATTRS:{buttons:{value:["close"]}}})},"3.17.2",{requires:"widget widget-autohide widget-buttons widget-modality widget-position widget-position-align widget-position-constrain widget-stack widget-stdmod".split(" "),
skinnable:!0});
YUI.add("squarespace-block-menu-editor",function(a){a.namespace("Squarespace.Block.Editor").Menu=a.Base.create("menu-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Menu")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Menu"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Menu=a.Base.create("block-menu-editor",a.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(b){b&&b.raw&&
(b.menus=a.Squarespace.Utils.parseMenu(b.raw));return b}},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={width:465,height:505,name:"menu-editor",buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Menu",tabTitle:"Menu",icon:"/universal/images-v6/icons/icon-menu-20-light-solid.png",scroll:!0,fields:[{type:"textarea",name:"raw",description:"<strong>Squarespace Menu Formatting.</strong>  Squarespace uses simple formatting to style your menu. See the <strong>Formatting Help</strong> tab for more help with menu formats.",
height:440}]},{tabTitle:"Design",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Menu Style","strings.description":"Choose a layout style for your menu.",name:"menuStyle",className:"thin dark",defaultValue:"simple",options:[{value:"simple",label:"Simple (Centered)"},{value:"classic",label:"Classic (Multi-column)"}]}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Currency Symbol",name:"currencySymbol","strings.description":"Choose a currency symbol to display on your menu items.",
defaultValue:"$",className:"thin dark",options:[{value:"",label:"None"},{value:"$",label:"$"},{value:"\u20ac",label:"\u20ac"},{value:"\u00a3",label:"\u00a3"},{value:"\u00a5",label:"\u00a5"}]}}]},{tabTitle:"Formatting Help",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"<strong>Menu Sections.</strong> Sections define groups of items on your menu. Section descriptions are optional. To create a section, type: <pre>Section\n-------\nOptional section description.</pre><strong>Menu Items.</strong> To add an item to your menu, type in the following format. Separate multiple menu items with 2 spaces. Options can be added to an item by using the '+' format on a new line. Both prices and descriptions are optional. <pre>Title of Menu Item\nDescription of food item.\n$10\n\nAnother of Menu Item\nA different description.\n$20\n+ Option\n+ Another Option</pre><strong>Price Variants.</strong> You can also define multiple prices for variants on your items in the following format: <pre>Wine Bottle Example\nDescription of the wine\n$9 glass / $40 bottle\n\nSalad Example\nA great, low-carb salad.\n$9 small / $15 large</pre><strong>Multiple Menus.</strong> Menu blocks can contain multiple menus at once (lunch, dinner, etc.). Menus will be turned into tabs upon rendering. To create a menu within a block, type: <pre>Lunch\n=======\nOptional menu description.</pre>"}}]}]}},
"1.0",{requires:["squarespace-block-editor-dialog","squarespace-block-menu-parser","squarespace-damask-context-globals"]});
YUI.add("squarespace-models-layout",function(a){var d={type:a.Squarespace.BlockType.HTML,value:{html:""}},b={type:a.Squarespace.BlockType.MARKDOWN},c=a.namespace("Squarespace.Models").PageLayout=a.Base.create("PageLayout",a.Model,[],{toJSON:function(){var a=c.superclass.toJSON.call(this);a.rows=this.get("rows").toJSON();return a},isEmpty:function(){function b(e){a.Lang.isArray(e.rows)&&0<e.rows.length&&a.Array.each(e.rows,b);a.Lang.isArray(e.columns)&&0<e.columns.length&&a.Array.each(e.columns,b);
a.Lang.isArray(e.blocks)&&0<e.blocks.length&&(c+=e.blocks.length)}var c=0;b(this.toJSON());return 0===c},_getDefaultRows:function(){return[{columns:[{span:this.get("columns"),blocks:[this._getDefaultBlock()]}]}]},_getDefaultBlock:function(){return a.Object.getValue(Static,["SQUARESPACE_CONTEXT","websiteSettings","markdownMode"])?b:d},hasPromotedBlock:function(b){var c=this.toJSON();b=this._getPromotedBlockInfo(c,b);return a.Lang.isObject(b)&&b.span==this.get("columns")},_getPromotedBlockInfo:function(b,
c){if(a.Lang.isArray(b.rows)&&0<b.rows.length)return this._getPromotedBlockInfo(b.rows[0],c);if(a.Lang.isArray(b.columns)&&0<b.columns.length)return this._getPromotedBlockInfo(b.columns[0],c);if(a.Lang.isArray(b.blocks)&&0<b.blocks.length){var e=b.blocks[0];return a.Lang.isValue(e.floatDir)||-1===c.indexOf(e.type)?!1:{block:e,span:b.span,parentBlocksList:b.blocks}}},getPageLayoutSansPromotedBlock:function(b){var e=a.clone(this.toJSON());b=this._getPromotedBlockInfo(e,b);a.Lang.isObject(b)&&b.span==
this.get("columns")&&b.parentBlocksList.remove(b.block);return new c(a.merge(e,{columns:this.get("columns")}))},getPageLayoutWithPromotedBlock:function(b){var e=this.toJSON();b=this._getPromotedBlockInfo(e,b);if(!a.Lang.isObject(b)||b.span!==this.get("columns"))return new c({columns:this.get("columns")});e=a.clone(b.block);return new c({rows:[{columns:[{blocks:[e],span:b.span}]}]})}},{ATTRS:{rows:{valueFn:"_getDefaultRows",setter:function(b){if(a.Lang.isArray(b))return new k({items:b});if(a.instanceOf(b,
k))return b}},columns:{value:12}}}),e=a.namespace("Squarespace.Models").EditableContentBlock=a.Base.create("EditableContentBlock",a.Model,[],{toJSON:function(){var b=e.superclass.toJSON.call(this);b.layout=this.get("layout").toJSON();a.Lang.isValue(b.updatedOn)||(b.updatedOn=new Date);b.updatedOn=b.updatedOn.getTime();return b},_setLayout:function(b){var e=this.get("layout");return a.instanceOf(e,c)?(e.setAttrs(b),e):a.instanceOf(b,c)?b:new c(b)}},{ATTRS:{layout:{valueFn:function(){return new c},
setter:"_setLayout"},updatedOn:{setter:function(b){if(a.Lang.isNumber(b))return new Date(b);if(a.Lang.isDate(b))return b;console.warn("Invalid updatedOn field set: ",b);return a.Attribute.INVALID_VALUE}}}}),g=a.namespace("Squarespace.Models").PageCollectionData=a.Base.create("Layout",a.Model,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.API_ROOT+"page-collection-data/{collectionId}",root:a.Squarespace.API_ROOT+"page-collection-data",isNew:function(){return!a.Lang.isValue(this.get("collectionId"))},
_setData:function(b){var c=this.get("data");return a.instanceOf(c,e)?(c.setAttrs(b),c):a.instanceOf(b,e)?b:new e(b)},toJSON:function(){var a=g.superclass.toJSON.call(this);delete a.collection;return a}},{ATTRS:{collectionId:{getter:function(){return this.get("collection").get("id")}},collection:{},data:{value:{},setter:"_setData"}}});a.namespace("Squarespace.Models").BlockField=a.Base.create("BlockField",a.Model,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.API_ROOT+"block-fields/{widgetName}",
root:a.Squarespace.API_ROOT+"block-fields",idAttribute:"widgetName",_setData:function(b){var c=this.get("data");return a.instanceOf(c,e)?(c.setAttrs(b),c):a.instanceOf(b,e)?b:new e(b)}},{ATTRS:{widgetName:{validator:a.Lang.isString},data:{value:{},setter:"_setData"}}});var f=a.Base.create("BlockList",a.ModelList,[],{});a.Base.create("Column",a.Model,[],{},{ATTRS:{blocks:{value:[],setter:function(b){if(a.Lang.isArray(b))return new f({items:b});if(a.instanceOf(b,f))return b}}}});var h=a.Base.create("Row",
a.Model,[],{}),k=a.Base.create("RowList",a.ModelList,[],{model:h})},"1.0",{requires:["base-build","model","model-list","squarespace-save-manager","squarespace-model-sync-rest"]});YUI.add("squarespace-block-flickr-model",function(a){a.namespace("Squarespace.ContentModel").FlickerBlock=a.Base.create("FlickerModel",a.Model,[],{},{})},"1.0",{requires:["base","model","squarespace-enum","squarespace-block-summary-gallery-model"]});
YUI.add("squarespace-block-in-browser-message-link-editor",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.InBrowserMessageLink=a.Base.create("in-browser-message-link-block-editor",a.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.get("host").set("floatable",!1);this.set("lockedLayout",!0);this._model.get("hideLink")&&this._toggleHideLink(!0);this._model.on("hideLinkChange",function(a){this._toggleHideLink(a.newVal)},this);this.afterHostEvent("widget:contentUpdate",
function(){this._model.get("hideLink")&&this._cb.setHTML('<span class="sqs-restore-in-browser-message-link-message">"Having trouble" link disabled. (Double click to re-enable)</span>')},this)},_toggleHideLink:function(a){this._bb.toggleClass("sqs-hide-link",a)},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.InBrowserMessageLink")}},{NS:"blockEditor",ATTRS:{blockName:{value:"InBrowserMessageLink"},minHSize:{value:6}}});a.namespace("Squarespace.Block.ModelEditorDialog").InBrowserMessageLink=
a.Base.create("blockInBrowserMessageLinkEditor",a.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={initialDataByReference:!0,name:"editInBrowserMessageLinkBlock",width:500,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit View on Web Settings",icon:"/universal/images-v6/icons/icon-link-16-light-solid.png",scroll:!1,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:'Configure the "Having trouble" link at the top of your email.'}},
{ctor:a.Squarespace.DialogFields.Text,config:{name:"webviewText",validator:function(b){return a.Lang.isString(b)&&0<b.length}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"hideLink",defaultValue:!1,"strings.title":"Disable Webview Link","strings.description":"Your email won't include a link to view in a browser"}}]}]}},"1.0",{requires:"base squarespace-attr-validators squarespace-block-editor-base squarespace-damask-context-globals squarespace-dialog-check squarespace-dialog-description squarespace-dialog-select squarespace-model-editor".split(" ")});
YUI.add("squarespace-block-social-summary-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");var d=a.Squarespace.Block.ModelEditorDialog.SocialSummary=a.Base.create("SocialSummaryModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.Summary,[],{initializer:function(a){this._publishEvents();this.after(["collection-synced","collection-sync-failed"],this._afterSyncAccount,this)},_publishEvents:function(){this.publish("accounts-refreshed",{emitFacade:!0,defaultFn:this._afterAccountsRefresh});
this.publish("collection-synced",{emitFacade:!0,defaultFn:this._onSyncSuccess});this.publish("collection-sync-failed",{emitFacade:!0,defaultFn:this._onSyncFail})},_refreshSocialAccounts:function(){a.Data.get({url:"/api/config/GetSocialAccounts",success:this._refreshSocialAccountsSuccess},this)},_refreshSocialAccountsSuccess:function(a){this._oauthRequestPending&&a.connectedAccounts.length>Static.SQUARESPACE_CONTEXT.connectedAccounts.length&&this._showOauthCompletePopup();this._oauthRequestPending=
!1;Static.SQUARESPACE_CONTEXT.connectedAccounts=a.connectedAccounts;this.fire("accounts-refreshed")},_afterAccountsRefresh:function(){var b=this.get("dialog");if(b&&!b.isState(a.Squarespace.DialogStates.CLOSED)&&(b=b.getField("collectionId"))){var c=this._getCollectionOptions();b.set("options",c);0<c.length?(b.set("visible",!0),b.set("data",c[0].value)):b.set("data",null)}},_showOauthCompletePopup:function(){new a.Squarespace.Widgets.Information({"strings.title":"Account Connected","strings.message":a.Lang.sub("Your {name} account has been connected",
this.get("strings"))})},_getCollectionOptions:function(){var b=[],c=Static.SQUARESPACE_CONTEXT.connectedAccounts.sort(function(a,b){return 0+(a.addedOn<b.addedOn)});if(!a.Lang.isValue(this.get("model").get("collectionId"))||""===this.get("model").get("collectionId"))b=[{value:"",label:"Choose an account"}];return a.Array.reduce(c,b,function(a,b,c,d){b.collectionId&&b.serviceId==this.get("socialAccountType")&&a.push(this._createSelectOption(b.collectionId,b.screenname));return a},this)},_onAddAccountClick:function(){this._oauthPopup()},
_oauthPopup:function(){var b=this.get("socialAccountType"),c;c="serviceProvider="+b+"&type=website&startSubscription=true";b===a.Squarespace.ExternalServiceProviders.FACEBOOK&&(c=c+"&redirArgs="+encodeURIComponent("scope="+a.Squarespace.FacebookExtendedPermissions));clientKey=a.guid();c+="&clientKey="+clientKey;this.once("oauth-completed",function(){this._accountRefreshHandle&&(this._accountRefreshHandle.detach(),this._accountRefreshHandle=null);this._refreshSocialAccounts()});this._oauthRequestPending=
!0;this._oauthWindow=window.open("/auth/ExternalAuthenticationInitiate?"+c,"AddConnectedAccount","location=0,status=0,width=1020,height=520");this.closeCheckHandle=a.later(500,this,this._closeCheck,{},!0)},_closeCheck:function(){if(this._oauthWindow.closed||window.callbackFinished)window.callbackFinished=!1,this.closeCheckHandle.cancel(),this.fire("oauth-completed")},_onSendRequested:function(b){var c=this.get("model").get("collectionId"),e=a.Array.find(Static.SQUARESPACE_CONTEXT.connectedAccounts,
function(a){return a.collectionId===c});e&&(b.preventDefault(),this._syncAccount(e))},_syncAccount:function(b){a.Data.post({url:"/api/config/PullRecentActivity",data:{accountId:b.id},failure:function(){this.fire("collection-sync-failed")},success:function(a){b.pullEnabled=!0;a.synced?this.fire("collection-synced"):this._afterSyncAccount()}},this)},_onSyncSuccess:function(b){b=a.Lang.sub("Retrieving past {itemTypePlural}.  Squarespace will pull future {itemTypePlural} from {name} automatically.",this.get("strings"));
new a.Squarespace.Widgets.Information({"strings.title":"Sync Successful","strings.message":b})},_onSyncFail:function(b){b=a.Lang.sub("Failed to retrieve past {itemTypePlural}. Squarespace will pull future {itemTypePlural} from {name} automatically.",this.get("strings"));(new a.Squarespace.Error({position:"top-right"})).show("Sync Failed",b)},_afterSyncAccount:function(){d.superclass._onSendRequested.call(this)},_getDefaultDialogConfig:function(){var b=this.get("icon"),c=this.get("strings.name"),e=
{name:"collectionId",icon:b,className:"thin dark",padding:[10,10],visible:0<this._getCollectionOptions().length,options:this._getCollectionOptions()};e.visible&&!this.get("model").get("collectionId")&&(e.data=e.options[0].value,e.defaultValue=e.options[0].value);return{closeOthers:!1,name:"block-configuration",style:"flyout",flyoutPointerDirection:"hidden",draggable:9!==a.UA.ie&&10!==a.UA.ie,loadingText:"Editing "+c+"...",width:395,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},
{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit "+c+" Block",tabTitle:"Account",icon:"/universal/images-v6/icons/icon-"+b+"-16-light.png",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"<strong>Connected Account.</strong>  Pick the account below you would like to import content from, or press Add Account to connect a new one."}},{type:"splitter",fields:[{ctor:a.Squarespace.DialogFields.Select,config:e},{ctor:a.Squarespace.DialogFields.Button,config:{alignment:"right","strings.text":"Add Account",
name:"addAccount",onClick:a.bind(this._onAddAccountClick,this)}}]},{ctor:a.Squarespace.DialogFields.Description,config:{padding:[15,0],text:"<strong>Items to Display.</strong>  Select the number of items this block should display."}},{ctor:a.Squarespace.DialogFields.Slider,required:!0,config:{name:"pageSize",range:[1,20],"strings.suffix":"Item",pluralize:!0,labelWidth:60,submitOnEnter:!0}}]}]}}},{ATTRS:{dialogConfig:{valueFn:void 0,getter:"_getDefaultDialogConfig",validator:a.Lang.isObject},strings:{value:{name:"Summary",
itemType:"Social Item",itemTypePlural:"Social Items"}},socialAccountType:{value:null}}})},"1.0",{requires:"base model squarespace-model-editor squarespace-dialog-select squarespace-dialog-button squarespace-dialog-slider squarespace-block-summary-model-editor squarespace-widgets-information".split(" ")});
YUI.add("squarespace-frontend-edit-controller-layout-base",function(a){var d=a.namespace("Squarespace.Frontend.EditController"),b=a.Squarespace.Frontend.Plugin.LayoutEngineEditor,c=d.LayoutBase=a.Base.create("Page",d.Base,[],{show:function(){c.superclass.show.call(this)},hide:function(){c.superclass.hide.call(this);this._destroyLayoutEngineEditor()},revert:function(){var b=c.superclass.revert.call(this);b.then(a.bind(function(){this._layoutEditorInstance.set("dirtyLayoutData",!1);this._renderEditor()},
this));return b},save:function(){var b=c.superclass.save.call(this);b.then(a.bind(function(){this._layoutEditorInstance.set("dirtyLayoutData",!1)},this));return b},_getPageLayout:function(){throw"_getPageLayout not implemented!";},_renderEditor:function(){this._destroyLayoutEngineEditor();this._layoutEditorInstance=this.get("rootNode").plug(b,{pageLayout:this._getPageLayout(),columns:this.get("columns")})[b.NS];this._layoutEditorInstance.after("dirtyLayoutDataChange",function(a){this.set("dirty",
a.newVal)},this)},_destroyLayoutEngineEditor:function(){this.get("rootNode").unplug(b.NS)}},{ATTRS:{model:{},columns:{validator:a.Lang.isNumber}}})},"1.0",{requires:"base squarespace-frontend-edit-controller-base squarespace-models-layout squarespace-models-content-collection squarespace-promises squarespace-attr-validators squarespace-frontend-plugin-layoutengine-editor".split(" ")});
YUI.add("squarespace-block-foursquare",function(a){a.namespace("Squarespace.Block").Foursquare=a.Base.create("block-foursquare",a.Squarespace.Block.SocialSummaryBase,[],{},{CSS_PREFIX:"sqs-block-foursquare",MODEL:a.Squarespace.ContentModel.FoursquareBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Foursquare},type:{value:a.Squarespace.BlockType.FOURSQUARE}}})},"1.0",{requires:["base","squarespace-enum","squarespace-block-social-summary","squarespace-block-foursquare-editor","squarespace-block-foursquare-model"]});
YUI.add("squarespace-dialog-layout",function(a){a.namespace("Squarespace.DialogFields");a.namespace("Squarespace.Block.Editor");var d=a.Squarespace.DialogFields.Layout=a.Base.create("Layout",a.Squarespace.DialogField2,[a.Squarespace.Mixins.Recoverable],{initializer:function(){this._didDataChange=!1;this.publish("recovery-requested",{emitFacade:!0});this.publish("recovery-keep",{emitFacade:!0});this.publish("recovery-discard",{emitFacade:!0})},destructor:function(){var b=a.Squarespace.EditControllerWebApp.getInstance();
b.destroyLayoutEditor(this.getLayoutNode());b.destroyBlockTrashInstance();for(b=a.Array.some(a.Squarespace.Block.Editor.OPEN_DIALOGS,function(a){return a.layout===this.get("contentBox")},this);b&&a.Squarespace.Block.Editor.OPEN_DIALOGS&&a.Squarespace.Block.Editor.OPEN_DIALOGS.length;)a.Squarespace.Block.Editor.OPEN_DIALOGS.shift().dialog.close()},renderUI:function(){this._recoveryBar=this.get("contentBox").appendChild('<div class="sqs-recovery-bar"><span class="text">'+this.get("strings.recoveryMessage")+
"</span></div>");var b=a.Node.create('<div class="button-holder"></div>');this.add(new a.Squarespace.Widgets.Button({strings:{text:this.get("strings.discard")},className:"sqs-button-link",render:b,onClick:a.bind(function(){this.fire("recovery-discard")},this)}));this.add(new a.Squarespace.Widgets.Button({strings:{text:this.get("strings.keep")},className:"light",render:b,onClick:a.bind(function(){this.fire("recovery-keep")},this)}));this._recoveryBar.append(b);this.get("contentBox").append('<div class="sqs-layout-wrapper"><div class="sqs-layout-scroll"><div class="sqs-layout"></div></div></div>');
this.get("contentBox").one(".sqs-layout-scroll").plug(a.Squarespace.ScrollLock);this._nodeExpander=this.get("contentBox").one(".sqs-layout-wrapper").plug(a.Squarespace.Plugins.NodeExpander).NodeExpander;a.Squarespace.Layout.Help.showIfNeeded()},bindUI:function(){this.after("dataChange",this.syncUI,this);var b=this.get("dialog"),c=a.Squarespace.EditControllerWebApp.getInstance();a.Lang.isValue(b)&&(this.after("focusedChange",function(a){this._replugImageLoader();a.newVal&&(c.alignInsertPoints(this.getLayoutNode()),
c.updateInsertMarkerConstrainNode())},this),this._bindRecoveryEvents(b),this._bindExpanderEvents(b),b.on("ready",this._onReady,this))},syncUI:function(){var b=this._getECB().get("layout"),c=a.Squarespace.EditControllerWebApp.getInstance();this.destroyLayout();this.pluginLayout();c=c.getBlockTrashInstance().get("boundingBox");this.get("boundingBox").append(c);c=this.get("id");b.detach(c+"|*");this._didDataChange=!1;this._registerEvent(b.after(c+"|change",function(){this._didDataChange=!0;this.get("dialog").setEdited()},
this))},_bindRecoveryEvents:function(){this.SQS_RECOVERY_BAR_ACTIVE="sqs-recovery-bar-active";this.after("recoveryBarActiveChange",this.syncUI,this);var a=this.get("dialog").on({"send-requested":function(){a.detach();this.destroyBufferOnSave()},close:this.destroyBufferOnRevert,cancel:this.destroyBufferOnRevert},null,this);this._registerEvent(a);this._registerEvent(this.get("contentItem").on("destroy",function(c){a.detach();this.destroyBufferOnRevert()},this));this.on("recovery-requested",this._onRecoveryRequested,
this);this.on("recovery-keep",this._onRecoveryKeep,this);this.on("recovery-discard",this._onRecoveryDiscard,this)},_onRecoveryRequested:function(a){a=this._getECB().get("layout");var c=this._recoveryBuffers[0];this.get("dialog").el.addClass(this.SQS_RECOVERY_BAR_ACTIVE);this._lastSavedLayout=a.toJSON();this._getECB().set("layout",c.editableBlock.layout);this.set("recoveryBarActive",!0)},_onRecoveryKeep:function(b){this.get("dialog").el.removeClass(this.SQS_RECOVERY_BAR_ACTIVE);this.set("recoveryBarActive",
!1);b=this._recoveryBuffers[0];this._recoveryBuffers.splice(0,1);(new a.Squarespace.Models.RecoveryBuffer(b)).destroy({remove:!0,headers:{"revert-changes":!1}});this.destroyBuffers(this._recoveryBuffers);this.initializeRecoveryBuffer()},_onRecoveryDiscard:function(a){this.get("dialog").el.removeClass(this.SQS_RECOVERY_BAR_ACTIVE);this._getECB().set("layout",this._lastSavedLayout);this.set("recoveryBarActive",!1);this.destroyBuffers(this._recoveryBuffers);this.initializeRecoveryBuffer()},_bindExpanderEvents:function(b){var c=
a.Squarespace.EditControllerWebApp.getInstance();this._nodeExpander.on("expand-start",function(a){b.el.addClass("sqs-node-expander-active");b.overlayEl.addClass("sqs-node-expander-active")},this);this._nodeExpander.on("contract-end",function(a){b.el.removeClass("sqs-node-expander-active");b.overlayEl.removeClass("sqs-node-expander-active")},this);this._nodeExpander.on(["expand-start","contract-start"],function(){c.disableInsertPoints()});this._nodeExpander.on(["contract-end","expand-end"],function(a){c.enableInsertPoints();
c.updateInsertMarkerConstrainNode()},this)},show:function(){d.superclass.show.apply(this,arguments);var b=this.getLayoutEditor();a.Lang.isValue(b)&&a.Array.each(b.getBlocks(),function(a){a.show()},this)},checkForUnsavedChanges:function(){this.createLoadingOverlay();this.loadBuffers(a.bind(function(a){this._loadingOverlay.set("visible",!1);0<a.length?(this._recoveryBuffers=a,this.fire("recovery-requested")):this.initializeRecoveryBuffer()},this))},didDataChange:function(){return this._didDataChange},
getLayoutEditor:function(){return this.getLayoutNode()[a.Squarespace.Layout.Editor.NS]||null},getLayoutNode:function(){return this.get("contentBox").one(".sqs-layout")},destroyLayout:function(){var b=this.getLayoutNode(),c=a.Squarespace.EditControllerWebApp.getInstance();b.hasPlugin(a.Squarespace.Layout.Builder)&&c.destroyLayoutEditor(b)},pluginLayout:function(){a.Squarespace.PageLayoutTools.sanitizeImportedECB(this._getECB());var b=this._getECB().get("layout"),c=this.getLayoutNode(),e=a.Squarespace.EditControllerWebApp.getInstance();
this.get("recoveryBarActive")?(e.destroyLayoutEditor(c),e.pluginLayoutBuilder(c,b)):(e.destroyLayoutBuilder(c),e.pluginLayoutEditor(c,b,this.getLayoutNode()))},createLoadingOverlay:function(){this._loadingOverlay=this.get("contentBox").plug(a.Squarespace.Plugins.LoadingOverlay,{spinnerConfig:{size:"extra-large",color:"dark"}}).loadingOverlay},_getECB:function(){a.Lang.isValue(this._ecb)||(this._ecb=new a.Squarespace.Models.EditableContentBlock);return this._ecb},_setData:function(a){this._getECB().setAttrs(a)},
_getData:function(b){if(!this.get("rendered"))return b;b=this._ecb.toJSON();b.layout=a.merge(b.layout,this.getLayoutNode().LayoutBuilder.toJSON());return b},_onReady:function(){var b=this.getLayoutNode(),c=a.Squarespace.EditControllerWebApp.getInstance();c.alignInsertPoints(b);c.setInsertMarkerLayout(b);c.updateInsertMarkerConstrainNode(this.get("dialog").zIndex+1);b=this.get("contentItem");if(a.Lang.isValue(b.get("id")))this.checkForUnsavedChanges();else b.onceAfter("save",function(a){this.initializeRecoveryBuffer()},
this)},_replugImageLoader:function(){this.get("contentBox").all("img").each(function(b){if(b.hasPlugin(a.Squarespace.Loader2.NS)){var c=b.getAttribute("src");if(!a.Lang.isValue(c)||0===c.length)b.unplug(a.Squarespace.Loader2),b.plug(a.Squarespace.Loader2)}})}},{CSS_PREFIX:"sqs-dialog-layout-wrapper",ATTRS:{data:{lazyAdd:!1,setter:"_setData",getter:"_getData"},dialog:{getter:function(b){return a.Object.isEmpty(b)?this.get("panel"):b}},contentItem:{value:null},itemClass:{value:""},panel:{value:null},
strings:{value:{recoveryMessage:"An unsaved version of this content was recovered.",keep:"Keep",discard:"Discard"}},recoveryBarActive:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},recoveryType:{value:a.Squarespace.RecoveryBufferType.CONTENT_ITEM},recoverableField:{getter:"_getECB"},recoverableFieldName:{getter:function(){return this.get("name")}},recoverableSourceId:{getter:function(){return this.get("contentItem").get("id")}},layoutNode:{getter:"getLayoutNode"}}})},"1.0",{requires:"base squarespace-attr-validators squarespace-dialog squarespace-dialog-field-2 squarespace-edit-controller-web-app squarespace-layout-help squarespace-mixins-recoverable squarespace-models-layout squarespace-plugin-node-expander squarespace-util".split(" ")});
YUI.add("squarespace-plugin-focalpoint",function(a){a.namespace("Squarespace.Plugin").FocalPoint=a.Base.create("ImageFocalPoint",a.Plugin.Base,[a.Squarespace.GismoBase],{initializer:function(){this._renderUI();this._bindUI();this._syncUI()},_renderUI:function(){this._focalPointEl=this.get("relativeYUI").Node.create('<div class="image-focal-point"></div>');this.get("parentNode").appendChild(this._focalPointEl);"static"==this.get("parentNode").getComputedStyle("position")&&console.warn("The parentNode must have a non-static position for FocalPoint to properly work.")},
_bindUI:function(){var a=!1,b=this.get("relativeYUI");this._event(this.get("host").on(["mouseenter","mousemove"],function(a){this._anim(this._focalPointEl,{opacity:1}).run();this._syncUI()},this));this._event(this.get("host").on("mouseleave",function(b){a||b.relatedTarget==this._focalPointEl||this._anim(this._focalPointEl,{opacity:0}).run()},this));this.dd=new b.DD.Drag({node:this._focalPointEl});this.dd.plug(b.Plugin.DDConstrained,{constrain2region:this._getConstrainRegion(!0)});this.dd.on("drag:start",
function(){this.dd.plug(b.Plugin.DDConstrained,{constrain2region:this._getConstrainRegion(!0)});a=!0;this._startPolling()},this);this.dd.on("drag:end",function(){a=!1;this._stopPolling();this._syncUI();this.fire("focalPointChanged",{focalPoint:this.get("focalPoint")})},this);this.tooltip=new b.Squarespace.ToolTip({target:this._focalPointEl,dialogTooltip:!0,title:"Image Focal Point",body:"An image focal point allows Squarespace to make better cropping decisions when the image is placed within a thumbnail. Drag the circle to change the focal point in the image so it displays to your preference."})},
_startPolling:function(){this._hostRegion=this.get("host").get("region");this._hostActualWidth=this.get("host").get("clientWidth");this._hostActualHeight=this.get("host").get("clientHeight");this._timer=a.later(50,this,this._evaluatedFocalPoint,this,{},!0)},_stopPolling:function(){this._evaluatedFocalPoint();this._timer.cancel()},_evaluatedFocalPoint:function(){var a=this._focalPointEl.get("region"),b=a[0]-this._hostRegion[0],c=a[1]-this._hostRegion[1],b=b+a.width/2,c=c+a.height/2,b=b-(this._hostRegion.width-
this._hostActualWidth)/2,c=c-(this._hostRegion.height-this._hostActualHeight)/2;this.set("focalPoint",{x:b/this._hostActualWidth,y:c/this._hostActualHeight},{source:"plugin-focalPoint"})},_syncUI:function(){var a=this.get("host").get("clientWidth"),b=this.get("host").get("clientHeight"),c=a*this.get("focalPoint.x"),e=b*this.get("focalPoint.y"),g=this.get("host").get("region"),c=c+g[0],e=e+g[1],c=c+(g.width-a)/2,e=e+(g.height-b)/2,c=c-this._focalPointEl.get("offsetWidth")/2,e=e-this._focalPointEl.get("offsetHeight")/
2;this._focalPointEl.setXY([c,e])},_getConstrainRegion:function(){var a=this.get("host").get("region"),b=this._focalPointEl.get("offsetWidth"),c=this._focalPointEl.get("offsetHeight"),e=this.get("host").get("offsetWidth")-this.get("host").get("clientWidth"),g=this.get("host").get("offsetHeight")-this.get("host").get("clientHeight");a.top-=b/2-g/2;a.left-=b/2-e/2;a.right+=b/2-e/2;a.bottom+=c/2-g/2;a.width-=e;a.height-=g;return a},destructor:function(){this._focalPointEl.remove();this.dd.destroy();
this.tooltip.destroy()}},{NS:"focalPoint",ATTRS:{focalPoint:{value:{x:0.5,y:0.5},setter:function(d){a.Lang.isUndefined(d)&&console.log("UNDEFINED");if(a.Lang.isString(d)){d=d.split(",");var b=parseFloat(d[0]);d=parseFloat(d[1]);return{x:!isNaN(b)&&1>=b?b:0.5,y:!isNaN(d)&&1>=d?d:0.5}}return d}},parentNode:{valueFn:function(){return this.get("host").get("parentNode")}},relativeYUI:{valueFn:function(){return a.config.win!==window.top&&a.config.doc.body!==this.get("parentNode").ancestor("body").getDOMNode()?
window.top.Y:a}}}})},"1.0",{requires:"base squarespace-gismo dd plugin event-base squarespace-ui-base".split(" ")});
YUI.add("resize-proxy",function(a,d){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.ClassNameManager.getClassName,c=c("resize","proxy");a.mix(b,{NAME:"resize-proxy",NS:"proxy",ATTRS:{proxyNode:{setter:a.one,valueFn:function(){return a.Node.create(this.PROXY_TEMPLATE)}}}});a.extend(b,a.Plugin.Base,{PROXY_TEMPLATE:'<div class="'+c+'"></div>',initializer:function(){this.afterHostEvent("resize:start",this._afterResizeStart);this.beforeHostMethod("_resize",this._beforeHostResize);
this.afterHostMethod("_resizeEnd",this._afterHostResizeEnd)},destructor:function(){this.get("proxyNode").remove(!0)},_afterHostResizeEnd:function(a){a.dragEvent.target.actXY=[];this._syncProxyUI();this.get("proxyNode").hide()},_afterResizeStart:function(){this._renderProxy()},_beforeHostResize:function(b){this.get("host")._handleResizeAlignEvent(b.dragEvent);this._syncProxyUI();return new a.Do.Prevent},_renderProxy:function(){var a=this.get("host"),b=this.get("proxyNode");b.inDoc()||a.get("wrapper").get("parentNode").append(b.hide())},
_syncProxyUI:function(){var a=this.get("host"),b=a.info,c=a.get("activeHandleNode"),d=this.get("proxyNode"),c=c.getStyle("cursor");d.show().setStyle("cursor",c);a.delegate.dd.set("dragCursor",c);d.sizeTo(b.offsetWidth,b.offsetHeight);d.setXY([b.left,b.top])}});a.namespace("Plugin");a.Plugin.ResizeProxy=b},"3.17.2",{requires:["plugin","resize-base"]});
YUI.add("squarespace-dialog-site-subscriptions",function(a){a.namespace("Squarespace.DialogFields");a.Squarespace.DialogFields.SiteSubscription=a.Base.create("siteSubscription",a.Squarespace.DialogField2,[a.WidgetParent],{initializer:function(){this._toggle=new a.Squarespace.Widgets.ToggleButton({active:this.get("data.subscribed")});this.add(this._toggle)},renderUI:function(){var d=this.get("contentBox"),b=this.get("data.websiteName");d.append(a.Node.create('<div class="website-info">'+a.substitute('<a class="name" target="_blank" href="//{identifier}.{appDomain}">{identifier}</span>',
{identifier:b,appDomain:Static.SQUARESPACE_CONTEXT.appDomain})+"</div>"));a.Squarespace.DialogFields.SiteSubscription.superclass.renderUI.apply(this,arguments)},bindUI:function(){a.Squarespace.DialogFields.SiteSubscription.superclass.bindUI.apply(this,arguments);this._toggle.after(this.get("id")+"|activeChange",this._afterToggle,this)},_afterToggle:function(){this.set("data.subscribed",this._toggle.get("active"))}},{CSS_PREFIX:"sqs-site-subscription"});a.Squarespace.DialogFields.SiteSubscriptions=
a.Base.create("siteSubscriptions",a.Squarespace.DialogFields.List,[],{initializer:function(){this.set("strings.emptyText","No Sites to Manage");this.set("strings.title","")},syncUI:function(){a.Squarespace.DialogFields.SiteSubscriptions.superclass.syncUI.apply(this,arguments);var d=this._maxNameWidth();a.Array.each(this._items,function(a){a.get("contentBox").one(".website-info").setStyle("width",d)},this)},_maxNameWidth:function(){return a.Array.reduce(this._items,0,function(a,b){var c=b.get("contentBox").one(".website-info");
return Math.max(a,c.get("offsetWidth")+parseInt(c.getStyle("marginLeft"),10)+parseInt(c.getStyle("marginRight"),10))},this)}},{ATTRS:{showAddControl:{value:!1},listItemConstructor:{value:a.Squarespace.DialogFields.SiteSubscription}},CSS_PREFIX:"sqs-site-subscriptions"})},"1.0",{requires:["squarespace-list","squarespace-dialog-field-2","squarespace-toggle"]});
YUI.add("squarespace-visual-editor",function(a){var d=/^\s{0,20}(?:(?:&nbsp;)|(?:<br\s?\/>)|(?:<p[^>]*>[\s\u200b]{0,20}(?:(?:&nbsp;)|(?:<br\s?\/?>)|)[\s\u200b]{0,20}<\/p>)|)\s{0,20}$/i;a.namespace("Squarespace");var b=a.Squarespace.Range,c=a.Squarespace.EditorBase,e=Class.create({commands:{init:function(){},bold:function(){this.el.editor.wrapFromHtml("<strong>")},italic:function(){this.el.editor.wrapFromHtml("<em>")},underline:function(){this.el.editor.wrapFromHtml("<u>")},insertimageblock:function(a){this.el.editor.wrapFromHtml('<img src="'+
a+'">')},undo:function(){this.el.editor.undo()},redo:function(){this.el.editor.redo()},removeformat:function(){this.el.editor.clear()},heading:function(a){this.el.editor.wrapFromHtml("<h"+a+">")},createLink:function(a){var b=this.el.editor.wrapFromHtml('<a href="'+(a||"#")+'"></a>');!a&&this._linkEdit&&(b._node.parentNode?this._linkEdit.openEdit(b):this._linkEdit.close(!0))},unlink:function(){this._linkEdit&&this._linkEdit.close(!0);this.saveSelection();var a=this.el.editor.get("containers");a&&a.link&&
this.el.editor.unwrap(a.link);this.restoreSelection()},removeformatblocks:function(){this.saveSelection();this.el.editor.unwrapBlocks();this.restoreSelection()},blockquote:function(){var a=this.el.editor,c=b.fromSelection({root:a._root}).get("startContainer").ancestor(a.get("blockElements"));c.get("parentNode");c.test("blockquote")?a.wrapFromHtml("<p>"):a.wrapFromHtml("<blockquote>")},align:function(a){var c=this.el.editor,e=b.fromSelection({root:c._root}).shrink().toSelection(),d=e.get("container").all(c.get("blockElementsWithHeadings"));
1<d.size()?d.each(function(b){b.replaceClass("text-align-.*","text-align-"+a)}):(e=e.get("startContainer"),c=e.ancestor(c.get("blockElementsWithHeadings")),c.replaceClass("text-align-.*","text-align-"+a))},insertunorderedlist:function(){var a=this.el.editor;b.fromSelection({root:a._root}).shrink().toSelection().get("startContainer").ancestor(a.get("blockElementsWithHeadings")).test("ul > li")?a.unwrapBlock("ul"):a.wrapFromHtml("<ul><li></li></ul>")},insertorderedlist:function(){var a=this.el.editor;
b.fromSelection({root:a._root}).shrink().toSelection().get("startContainer").ancestor(a.get("blockElementsWithHeadings")).test("ol > li")?a.unwrapBlock("ol"):a.wrapFromHtml("<ol><li></li></ol>")},indent:function(){var a=this.el.editor,c=b.fromSelection({root:a._root}).shrink().toSelection(),c=c.get("startContainer"),c=c.ancestor(a.get("blockElementsWithHeadings"));c.test("ul > li")?a.wrapFromHtml("<ul><li></li></ul>"):c.test("ol > li")?a.wrapFromHtml("<ol><li></li></ol>"):a.wrapFromHtml("<blockquote>")},
outdent:function(){var a=this.el.editor,e=b.fromSelection({root:a._root}).shrink().toSelection(),e=e.get("startContainer"),a=e.ancestor(a.get("blockElements")),e=a.get("parentNode");this.saveSelection();a.test("ul > li, ol > li")?e.get("parentNode")._node!==this.el._node?this.el.editor.unwrap(e,null):(this.el.editor.wrapFromHtml("<p>"),c.unwrap(e,null,!1,!0)):a.test("blockquote")&&a.get("parentNode")._node!==this.el._node?this.el.editor.unwrap(a):this.el.editor.wrapFromHtml("<p>");this.restoreSelection()}},
changed:!1,initialize:function(b){this.params=b;this.el=b.el;this.mode=b.mode;a.one(this.el).plug(a.Squarespace.EditorBase,b);var c=this.el.editor;c.set("keyMap",a.merge(c.get("keyMap"),{"66+CMD":function(a){a.halt();c.wrapFromHtml("<strong>")},"73+CMD":function(a){a.halt();c.wrapFromHtml("<em>")},"83+CMD":function(a){a.halt()}}));c.on("change",this._onContentChange,this);this.commands.init&&this.commands.init.apply(this);this.el.on("keyup",this._onKeyUp,this);this.el.on("keypress",this._onKeyEvent,
this);this.el.on("keydown",this._onKeyEvent,this);this.el.on("contextmenu",this._onContentChange,this);c.registerContainer({bold:"strong",italic:"em",link:"a[href]",align_left:".text-align-left",align_center:".text-align-center",align_right:".text-align-right",h1:"h1",h2:"h2",h3:"h3",blockquote:"blockquote",unorderedlist:"ul",orderedlist:"ol"});b.tabIndex&&this.el.setAttribute("tabIndex",b.tabIndex)},setHeight:function(a){this.el.setStyle("height",a+"px")},destroy:function(){this.el.unplug(a.Squarespace.EditorBase)},
getContent:function(){this.changed=!1;var a=this.el.editor.getValue();return d.test(a)?"":a},setContent:function(a){void 0===a&&(a="");return this.el.setContent(a)},setWidth:function(){},getContentHeight:function(){return parseInt(this.el.get("scrollHeight"),10)},focus:function(){return this.el.focus()},saveSelection:function(){var a=b.fromSelection({root:this.el.editor._root}).shrink().get("offsets");0===a.start&&0===a.end||(this._sel=a)},restoreSelection:function(){if(this._sel&&this.el._node){var a=
b.fromOffsets(this.el,this._sel).toSelection();this._sel=void 0;return a}},execCommand:function(a){this.commands[a]&&(this.restoreSelection(),this.commands[a].apply(this,Array.prototype.slice.call(arguments,1)),this._onContentChange())},_onContentChange:function(){this.changed=!0;this.fire("change")},_onKeyEvent:function(a){16===a.keyCode||(17===a.keyCode||18===a.keyCode||20===a.keyCode||91===a.keyCode||27===a.keyCode)||a.stopPropagation()},_onKeyUp:function(a){16===a.keyCode||(17===a.keyCode||18===
a.keyCode||20===a.keyCode||91===a.keyCode||27===a.keyCode)||a.stopPropagation();(8===a.keyCode||46===a.keyCode||48<a.keyCode)&&this._onContentChange()}});a.augment(e,a.EventTarget);a.Squarespace.VisualEditor=e},"1.0",{requires:["node","event","squarespace-editor-base"]});
YUI.add("squarespace-existing-content-link-tab-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["existing-content-link-tab.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];this.merge(d,a.helpers);return'<div class="existing-content-link-tab">\n  <div class="content-options"></div>\n</div>\n'})})();a.Handlebars.registerPartial("existing-content-link-tab.html".replace("/","."),d.templates["existing-content-link-tab.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-input-utils",function(a){a.namespace("Squarespace");a.Squarespace.InputUtils={correctNumericField:function(d){a.Lang.isNumber(Number(d.get("value")))?d.set("value",Number(d.get("value")).toFixed(2)):d.set("value","0.00")},getValueForOption:function(a,b){return"numeric"==b?Number(a.get("value")):"money"==b?100*Number(a.get("value")).toFixed(2):a.get("value")||""}}},"1.0",{requires:["event","node","base"]});
YUI.add("widget-position-constrain",function(a,d){function b(a){}var c=a.Node,e;b.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:!1}};e=b._PREVENT_OVERLAP={x:{tltr:1,blbr:1,brbl:1,trtl:1},y:{trbr:1,tlbl:1,bltl:1,brtr:1}};b.prototype={initializer:function(){this._posNode||a.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added");a.after(this._bindUIPosConstrained,this,"bindUI")},getConstrainedXY:function(a,b){b=b||this.get("constrain");
var c=this._getRegion(!0===b?null:b),e=this._posNode.get("region");return[this._constrain(a[0],"x",e,c),this._constrain(a[1],"y",e,c)]},constrain:function(a,b){var c,e;if(e=b||this.get("constrain"))c=a||this.get("xy"),e=this.getConstrainedXY(c,e),(e[0]!==c[0]||e[1]!==c[1])&&this.set("xy",e,{constrained:!0})},_setConstrain:function(a){return!0===a?a:c.one(a)},_constrain:function(a,b,c,e){if(e){this.get("preventOverlap")&&(a=this._preventOverlap(a,b,c,e));var d="x"==b;b=d?e.width:e.height;c=d?c.width:
c.height;var n=d?e.left:e.top;e=d?e.right-c:e.bottom-c;if(a<n||a>e)c<b?a<n?a=n:a>e&&(a=e):a=n}return a},_preventOverlap:function(a,b,c,d){var l=this.get("align"),n="x"===b,p,q,t,r,u;if(l&&l.points&&e[b][l.points.join("")]){if(b=this._getRegion(l.node))p=n?c.width:c.height,q=n?b.left:b.top,t=n?b.right:b.bottom,r=n?b.left-d.left:b.top-d.top,u=n?d.right-b.right:d.bottom-b.bottom;a>q?u<p&&r>p&&(a=q-p):r<p&&u>p&&(a=t)}return a},_bindUIPosConstrained:function(){this.after("constrainChange",this._afterConstrainChange);
this._enableConstraints(this.get("constrain"))},_afterConstrainChange:function(a){this._enableConstraints(a.newVal)},_enableConstraints:function(a){a?(this.constrain(),this._cxyHandle=this._cxyHandle||this.on("constrain|xyChange",this._constrainOnXYChange)):this._cxyHandle&&(this._cxyHandle.detach(),this._cxyHandle=null)},_constrainOnXYChange:function(a){a.constrained||(a.newVal=this.getConstrainedXY(a.newVal))},_getRegion:function(a){var b;a?(a=c.one(a))&&(b=a.get("region")):b=this._posNode.get("viewportRegion");
return b}};a.WidgetPositionConstrain=b},"3.17.2",{requires:["widget-position"]});
YUI.add("squarespace-basic-check",function(a){var d=function(a){return function(b){b.halt();a.call(this,b)}},b=a.namespace("Squarespace.Widgets").BasicCheck=a.Base.create("basicCheck",a.Squarespace.Widgets.DataWidget,[],{bindUI:function(){b.superclass.bindUI.call(this);this.get("boundingBox").on("click",d(this._toggleActive),this)},renderUI:function(){var b=this.get("contentBox");a.Lang.isValue(this.get("title"))&&b.append('<div class="title">'+this.get("title")+"</div>");b.append('<div class="check-element"></div>')},
syncUI:function(){b.superclass.syncUI.call(this);this.get("contentBox").one(".check-element").toggleClass("active",this.get("data"))},_toggleActive:function(){this.set("data",!this.get("data"))}},{CSS_PREFIX:"sqs-basic-check",ATTRS:{data:{value:!1,validator:a.Lang.isBoolean},name:{value:null},title:{value:null}}})},"1.0",{requires:["base","base-build","squarespace-dialog-field-2","squarespace-dialog-check-template"]});
YUI.add("highlight-base",function(a,d){var b=a.Array,c=a.Escape,e=a.Text.WordBreak,g=a.Lang.isArray,f={},h={_REGEX:"(&[^;\\s]*)?(%needles)",_REPLACER:function(a,b,c){return b&&!/\s/.test(c)?a:h._TEMPLATE.replace(/\{s\}/g,c)},_START_REGEX:"^(&[^;\\s]*)?(%needles)",_TEMPLATE:'<b class="'+a.ClassNameManager.getClassName("highlight")+'">{s}</b>',all:function(a,b,e){var d=[],q,t,r,u,s,v;e||(e=f);q=!1!==e.escapeHTML;s=e.startsWith?h._START_REGEX:h._REGEX;v=e.replacer||h._REPLACER;b=g(b)?b:[b];t=0;for(r=
b.length;t<r;++t)(u=b[t])&&d.push(c.regex(q?c.html(u):u));q&&(a=c.html(a));return!d.length?a:a.replace(RegExp(s.replace("%needles",d.join("|")),e.caseSensitive?"g":"gi"),v)},allCase:function(b,c,e){return h.all(b,c,a.merge(e||f,{caseSensitive:!0}))},start:function(b,c,e){return h.all(b,c,a.merge(e||f,{startsWith:!0}))},startCase:function(a,b){return h.start(a,b,{caseSensitive:!0})},words:function(a,d,n){var p,q,t=h._TEMPLATE;n||(n=f);p=!!n.caseSensitive;d=b.hash(g(d)?d:e.getUniqueWords(d,{ignoreCase:!p}));
q=n.mapper||function(a,b){return b.hasOwnProperty(p?a:a.toLowerCase())?t.replace(/\{s\}/g,c.html(a)):c.html(a)};a=e.getWords(a,{includePunctuation:!0,includeWhitespace:!0});return b.map(a,function(a){return q(a,d)}).join("")},wordsCase:function(a,b){return h.words(a,b,{caseSensitive:!0})}};a.Highlight=h},"3.17.2",{requires:["array-extras","classnamemanager","escape","text-wordbreak"]});
YUI.add("squarespace-layout-drag-scroll",function(a){a.namespace("Squarespace.Layout");var d=a.Squarespace.Layout.DragScroll=a.Base.create("layoutDragScroll",a.Plugin.Base,[],{initializer:function(){var a=d.NS,c=this.get("host");this._drag=c.dd;c.before(a+"|drag:start",this._prepareScroll,this);c.on(a+"|drag:drag",this._checkScroll,this);c.on(a+"|drag:end",this._stopScroll,this);c.on(a+"|drag:enter",this._lockScroll,this);c.on(a+"|drag:exit",this._unlockScroll,this);this.after("scrollLockChange",
this._pauseOrResumeScroll,this)},destructor:function(){this.get("host").detach(d.NS+"|*");this._detachEventsOnScroll()},_bindEventsOnScroll:function(){var b=this.get("scrollableNode"),c=d.NS;b.detach(c+"|*");if(a.UA.mobile&&a.UA.ios)b.after(c+"|scroll",function(){this._forceScrollNodeHeight();this._repositionLockableDropTargets()},this);else b.on(c+"|scroll",a.throttle(a.bind(function(){this.scrollAnim&&this._repositionLockableDropTargets()},this),20),this)},_detachEventsOnScroll:function(){this.get("scrollableNode").detach(d.NS+
"|*")},_prepareScroll:function(){var b=this.get("scrollNode");this.set("scrollableHeight",b.get("scrollHeight"));this.set("scrollLock",!1);this.set("scrollNodeComputedHeight",b.getComputedStyle("height"));this.set("lockableTargets",a.Array.filter(a.DD.DDM.targets,function(a){return a.get("lockScroll")}));this._onDestroy||(this._onDestroy=this.on("destroy",this._stopScroll,this))},_lockScroll:function(a){a.drop.get("lockScroll")&&this.set("scrollLock",!0)},_unlockScroll:function(a){a.drop.get("lockScroll")&&
this.set("scrollLock",!1)},_getScrollDirection:function(){var b=this.get("scrollNode"),c=b.get("scrollTop"),e=this.get("innerHeight"),d=this._drag.mouseXY[1];this._isScrollNodeBody()&&(d-=c);var c=this.get("scrollBuffer"),f=null;this.get("scrollableHeight")>e&&(0>d-c?f="up":d+c>e+b.getY()&&(f="down",a.UA.mobile&&a.UA.ios&&this._forceScrollNodeHeight()));return f},_checkScroll:function(){var a=this._getScrollDirection();a&&!this.get("scrollLock")?(this._currentDirection=a,this._startScroll(a)):(this.scrollTimer||
this.scrollAnim)&&this._stopScroll()},_startScroll:function(b){if(!this.scrollTimer&&!this.scrollAnim){var c=this.get("scrollDelay");this.scrollTo=this._getScrollTo(b);this.scrollTo!==this.get("scrollNode").get("scrollTop")&&(this.scrollTimer=a.later(c,this,this.scroll,b));this._bindEventsOnScroll()}},_stopScroll:function(){this.get("scrollNode").setStyle("height",null);this._updateMarkerLock(!1);this._detachEventsOnScroll();this.scrollTimer&&(this.scrollTimer.cancel(),delete this.scrollTimer);this.scrollAnim&&
(this.scrollAnim.get("running")?(this.scrollAnim.set("easing","easeOutStrong"),this.scrollAnim.set("duration",0.3),this.scrollAnim.detach("end"),this.scrollAnim.on("end",function(){this._removeScrollClasses();this.scrollAnim.destroy();delete this.scrollAnim},this),this.scrollAnim.stop()):(this.scrollAnim.destroy(),delete this.scrollAnim));this.reset("scrollSpeed");this.reset("scrollAcceleration");a.DD.DDM.syncActiveShims()},_getScrollTo:function(a){var c=this.get("scrollNode").get("scrollTop"),e=
this.get("scrollableHeight"),d=this.get("innerHeight"),f=0.95*this.get("scrollAcceleration"),h=this.get("scrollMaxSpeed"),h=Math.min(this.get("scrollSpeed")+f,h),c=c+("up"===a?-h:h);if("down"===a&&c>e-d)return e-d;if("up"===a&&0>c)return 0;this.set("scrollSpeed",h);this.set("scrollAcceleration",f);return c},scroll:function(b){var c=this.get("scrollNode"),e=this.get("scrollDelay")/1E3;this._lastScrollTop||(this._lastScrollTop=c.get("scrollTop"));if(!this.scrollAnim){this.scrollAnim=new a.Anim({node:c,
duration:e,easing:"easeNone",to:{scroll:a.bind(function(){return[0,this.scrollTo]},this)}});this.scrollAnim.on("end",function(){this.scrollTo=this._getScrollTo(b);this.scrollAnim&&!this.get("scrollLock")&&this.scrollTo!==c.get("scrollTop")?this.scrollAnim.run():this._removeScrollClasses();a.UA.mobile&&a.UA.ios&&this._repositionLockableDropTargets()},this);var d=this._isScrollNodeBody(),f=this._drag;this.scrollAnim.on("tween",function(){var a=f.mouseXY,b=c.get("scrollTop"),a=[a[0],a[1]+(b-this._lastScrollTop)];
f.actXY=a;d&&(f.mouseXY=a);f._alignNode(a);this._lastScrollTop=b},this)}this._updateMarkerLock(!0);this._addScrollClasses(b);this.scrollAnim.run()},_pauseOrResumeScroll:function(a){this.scrollAnim&&(a.newVal?(this.scrollAnim.pause(),this._removeScrollClasses()):this.scrollAnim.get("paused")&&(this.scrollAnim.run(),this._addScrollClasses()))},_repositionLockableDropTargets:function(){a.Array.each(this.get("lockableTargets"),function(a){a.sizeShim()},this)},_isScrollNodeBody:function(){return this.get("scrollNode").test("html, body")},
_forceScrollNodeHeight:function(){this._drag.get("dragging")&&this.get("scrollNode").setStyle("height",this.get("scrollNodeComputedHeight"))},_addScrollClasses:function(b){var c=a.one("html");b?this._currentDirection=b:b=this._currentDirection;c.addClass("scrolling scrolling-"+b)},_removeScrollClasses:function(){var b=a.one("html");b.removeClass("scrolling");b.removeClass("scrolling-down");b.removeClass("scrolling-up")},_updateMarkerLock:function(a){this.get("scrollLock")||this.get("host").get("editController").toggleInsertMarkerLock(!!a)}},
{NS:"dragScroll",ATTRS:{scrollNode:{valueFn:function(){return this.get("host").get("scrollNode")},setter:function(a){return a.hasClass("sqs-layout")&&a.ancestor(".sqs-layout-scroll")||a}},scrollableNode:{valueFn:function(){return this._isScrollNodeBody()?a.one(a.config.doc):this.get("scrollNode")}},scrollLock:{value:!1},lockableTargets:{value:[]},scrollableHeight:{setter:function(a){a=parseInt(a,10);if(!isNaN(a))return a}},scrollNodeComputedHeight:{},innerHeight:{getter:function(){var b=this.get("scrollNode");
return b.hasClass("sqs-layout-scroll")?parseInt(b.getComputedStyle("height"),10):a.config.win.innerHeight}},scrollBuffer:{value:80},scrollDelay:{value:250},scrollSpeed:{valueFn:function(){return a.UA.mobile?15:45}},scrollAcceleration:{valueFn:function(){return a.UA.mobile?10:30}},scrollMaxSpeed:{valueFn:function(){return a.UA.mobile?100:250}}}})},"1.0",{requires:["base","plugin","dd-delegate","squarespace-dd-behaviors","squarespace-layout-insert-marker"]});
YUI.add("squarespace-tiny-social-account-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["tiny-social-account.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k,l=d.helperMissing,n=this.escapeExpression;f={hash:{},data:h};a='<img class="icon" src="'+(n((k=d["icon-url"]||b["icon-url"],k?k.call(b,b.account,f):l.call(b,"icon-url",b.account,f)))+'" alt="');f={hash:{},data:h};return a+=n((k=d["service-display-name"]||
b["service-display-name"],k?k.call(b,b.account,f):l.call(b,"service-display-name",b.account,f)))+'" />\n<div class="name">'+n((k=(k=b.account,null==k||!1===k?k:k.screenname),"function"===typeof k?k.apply(b):k))+"</div>\n"})})();a.Handlebars.registerPartial("tiny-social-account.html".replace("/","."),d.templates["tiny-social-account.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-widgets-model",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.Model=a.Base.create("Model",a.Squarespace.Widgets.SSWidget,[a.WidgetChild],{bindUI:function(){d.superclass.bindUI.call(this);this._registerEvent(this.get("model").after("change",this.syncUI,this))},_getHBTemplateContext:function(){var a=d.superclass._getHBTemplateContext.call(this);a.model=a.model.toJSON();return a}},{CSS_PREFIX:"sqs-model",ATTRS:{model:{valueFn:function(){return new a.Model},
validator:a.Squarespace.AttrValidators.isInstanceOf(a.Model),writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","widget-child","squarespace-attr-validators","squarespace-ss-widget"]});
YUI.add("squarespace-dialog-multi-option",function(a){var d=a.namespace("Squarespace.DialogFields").MultiOption=a.Base.create("multiOption",a.Squarespace.DialogField2,[],{initializer:function(b){this.get("data");!this.get("data")&&!a.Lang.isUndefined(b.defaultValue)&&this.set("data",b.defaultValue);this._selectedOptionEl=null},renderUI:function(){d.superclass.renderUI.call(this);this._calculateMargins();this._renderTitle();this._renderOptions()},bindUI:function(){this.get("contentBox").delegate("click",
this._onOptionClick,".option",this);this.after("optionsChange",this._renderOptions,this);this.after("stringsChange",this._renderTitle,this)},syncUI:function(){d.superclass.syncUI.call(this);this._setupOptionWidths()},getBBInnerWidth:function(){var a=this.get("boundingBox");return a.get("offsetWidth")-(parseInt(a.getComputedStyle("paddingLeft"),10)+parseInt(a.getComputedStyle("paddingRight"),10))},selectOption:function(a){this.get("contentBox").all(".option").each(function(c){this._optionMatchesData(c,
a)&&this._selectOption(c)},this)},addOption:function(a){a=this.get("options");a.push(optionOjb);this.set("options",a)},_renderTitle:function(){var b=this.get("strings.title"),c=this.get("contentBox"),e=c.one(".title");b&&a.Lang.isNull(e)?c.append(a.Node.create('<div class="title">'+this.get("strings.title")+"</div>")):b?e.setHTML(this.get("strings.title")):!b&&!a.Lang.isNull(e)&&e.remove()},_renderOptions:function(){var b=this.get("contentBox"),c=this.get("options"),e=this._getOptionWidth();b.all(".option").remove();
a.Array.each(c,function(c){if(c.section)b.append(a.Node.create('<div class="option-label">'+c.section+"</div>"));else{var d=a.Node.create(a.Lang.sub('<div class="option" data-value="{value}"><div class="option-content"><div class="option-title">{title}</div></div></div>',c));d.setData(c);d.setStyles({width:e});var h=c.description;h&&d.one(".option-content").append(a.Node.create('<div class="option-description">'+h+"</div>"));c.icon?d.addClass("icon-"+c.icon):d.addClass("no-icon");b.append(d);this._optionMatchesData(d)&&
this._markSelected(d);c.upgradeLocked&&(d.addClass("upgrade-locked"),new a.Squarespace.ToolTip({target:".option.upgrade-locked",title:"Upgrade to Connect",body:"You must be on the Business Plan to use this feature.",dialogTooltip:!0,showTimeout:350}),d.on("click",function(){(new a.Squarespace.Widgets.Confirmation({"strings.cancel":"Not Now","strings.confirm":"Go to Upgrade","strings.title":"Do you want to upgrade?","strings.message":"Upgrading to the Business Plan will enable this feature."})).on("confirm",
c.upgradeConfirmCb)}))}},this)},_selectOptions:function(){this.get("contentBox").all(".option").each(function(a){this._optionMatchesData(a)&&this._selectOption(a)},this)},_optionMatchesData:function(b,c){a.Lang.isUndefined(c)&&(c=this.get("data"));var e=b.getData("value");if(this.get("numeric"))return c===a.Number.parse(e);a.Lang.isObject(e)&&a.Lang.isObject(c)&&console.warn("Trying to compare to objects, which is a bit out of scope.");return c===e},_onOptionClick:function(b){b.halt();b=b.target.hasClass("option")?
b.target:b.target.ancestor(".option");var c=this.get("optionClickCb");b.hasClass("upgrade-locked")||this._selectOption(b);a.Lang.isFunction(c)&&c(this.get("data"))},_markSelected:function(a){a!=this._selectedOptionEl&&(this._selectedOptionEl&&this._selectedOptionEl.removeClass("selected"),a.addClass("selected"),this._selectedOptionEl=a)},_selectOption:function(b){if(b!=this._selectedOptionEl){this._markSelected(b);b=b.getData("value");if(this.get("numeric")){var c=a.Number.parse(b);a.Lang.isNumber(c)&&
(b=c)}this.set("data",b);this.get("submitOnSelect")&&(b=this.get("dialog"),a.Lang.isValue(b)&&b.saveAndClose())}},_getOptionWidth:function(){var b=this.get("optionWidth");if(a.Lang.isValue(b))return b;b=this.get("options");b=parseInt(this.get("columns"),10)||b.length;return this.getBBInnerWidth()/b-this.get("marginOffset")},_calculateMargins:function(){var b=a.Node.create('<div class="option" style="visibility:hidden;"></div>');this.get("contentBox").append(b);var c=parseInt(b.getStyle("marginLeft"),
10),e=parseInt(b.getStyle("marginRight"),10);this.set("marginOffset",c+e);b.remove()},_setupOptionWidths:function(){var a=this.get("columns")||this.get("options").length;0<parseInt(a,10)&&this.get("boundingBox").addClass("columns-"+a);this.get("contentBox").all(".option").setStyle("width",this._getOptionWidth())}},{CSS_PREFIX:"sqs-multi-option",ATTRS:{data:{setter:function(b){return this.get("numeric")?a.Number.parse(b):b}},options:{value:null},optionClickCb:{value:null,setter:function(b){return!a.Lang.isFunction(b)?
null:b}},optionWidth:{value:null},submitOnSelect:{value:!1},columns:{value:null},marginOffset:{value:0,validator:a.Lang.isNumber},numeric:{value:!1,validator:a.Lang.isBoolean},readOnly:{value:!0}}})},"1.0",{requires:["base","datatype-number-parse","squarespace-dialog-field-2","squarespace-widgets-confirmation"]});
YUI.add("squarespace-dialog-stateflow",function(a){var d,b,c;d=function(b,c){if(!a.Lang.isObject(b)||!a.Lang.isObject(c))return b===c;var f=!0;a.Object.each(b,function(b,e){a.Lang.isObject(b)&&a.Lang.isObject(c[e])?f=f&&d(b,c[e]):b!==c[e]&&(f=!1)});return f};b=function(a){a=/\[\s*([^|\]]+?)\s*(?:\|([^]]*))?\s*\]/g.exec(a);return null!==a?String(a[1]).toLowerCase():!1};a.namespace("Squarespace.DialogFields");c=a.Squarespace.DialogFields.Stateflow=a.Base.create("stateflow",a.Squarespace.DialogField2,
[a.WidgetParent],{initializer:function(b){a.Squarespace.Utils.isDamaskEnabled()&&console.log("This dialog field is deprecated. Please use dialog-state-manager instead.");this.get("contentBox");var c=Date.now();a.Lang.isValue(b.data)||(b.data={state:b.stateOrder[0],date:b.allowNever?null:c},this.set("data",b.data));a.Lang.isNull(b.data.date)&&b.allowNever?this.set("durationOffset",-1):(c=a.Squarespace.DateUtils.calculateFullDayOffset(new Date,b.data.date),this.set("durationOffset",c));a.Lang.isValue(b.panel)&&
(this.panel=b.panel);this.set("stateType",this.getStateType())},destructor:function(){this.closeFlyout(null,function(){this.flyoutWidget&&(this.flyoutWidget.detach(),this.flyoutWidget.destroy(),delete this.flyoutWidget)},this)},renderUI:function(){c.superclass.renderUI.call(this);var a=this.get("contentBox");this.stateLabel=a.one(".field-workflow-title");this.stateDesc=a.one(".field-workflow-description")},bindUI:function(){c.superclass.bindUI.call(this);var a=this.get("id");this.stateDesc.on(a+"|click",
this.onStateChangeRequest,this);this.stateLabel.on(a+"|click",this.onStateChangeRequest,this);this.on(a+"|dataChange",this.onDataChange,this)},syncUI:function(){c.superclass.syncUI.call(this);var a=this.get("data"),b=this.get("states")[a.state];this.stateLabel.set("text",b.title);this.stateDesc.setHTML(this.getStateDesc(b.stateDesc,a.date))},onStateChangeRequest:function(a){a.target.hasClass("duration")||a.target.hasClass("date")?a.flyoutWidget="timer":a.flyoutWidget="picker";this.showFlyout(a)},
onDataChange:function(b){var c;c=b.newVal;a.Lang.isValue(c.state)&&this.set("stateType",this.getStateType(c));a.Lang.isNull(c.date)&&this.get("allowNever")?this.set("durationOffset",-1):(c=a.Squarespace.DateUtils.calculateFullDayOffset(new Date,c.date),this.set("durationOffset",c));b.closeFlyout&&this.closeFlyout()},aggregateWidgetData:function(b){var c=this.get("data");b=b.newVal;var d={},h={closeFlyout:!1};a.Lang.isDate(b)?d.date=b.getTime():a.Lang.isString(b)?(d.state=b,h.closeFlyout=!0):a.Lang.isNumber(b)?
isNaN((new Date(b)).getTime())||(d.date=b):a.Lang.isObject(b)?(a.Object.hasKey(b,"state")&&(d.state=b.state),h.closeFlyout=!0):a.Lang.isNull(b)&&(d.date=null);this.set("data",a.merge(c,d),h)},showFlyout:function(a){var b=this.get("contentBox");this.flyoutWidget&&this.flyoutWidget.destroy();var c=a.target||this.get("contentBox");flyingWidget=this.getFlyoutField(a.flyoutWidget,c);flyingWidget.after("dataChange",this.aggregateWidgetData,this);this.panel&&this.panel.setActiveFlyout({constraintClasses:".workflow-flyout, .calendar-wrapper",
field:this});flyingWidget.render(b);this.initFlyout(flyingWidget,c,a.flyoutWidget);this.flyoutWidget=flyingWidget;this.flyoutWidgetTarget=c},initFlyout:function(b,c,d){var h=this.getFlyoutPlugin(d);b=this.getFlyoutConfig(d,b);b=a.merge(b,{});c.hasPlugin(h.NS)&&c.unplug(h.NS);c.plug(h,{duration:0.2});c[h.NS].setAttrs(b);c[h.NS].show()},closeFlyout:function(b,c,d){if(a.Lang.isValue(this.flyoutWidget)&&(b=a.instanceOf(this.flyoutWidget,a.Squarespace.DialogFields.StateScheduler)?"timer":"picker",b=this.getFlyoutPlugin(b),
a.Lang.isValue(this.flyoutWidgetTarget)&&this.flyoutWidgetTarget.hasPlugin(b.NS)&&(this.flyoutWidgetTarget[b.NS].hide(),a.Lang.isFunction(c))))this.flyoutWidgetTarget[b.NS].onceAfter("flyout-hidden",c,d||this)},getFlyoutField:function(b,c){switch(b){case "timer":return new a.Squarespace.DialogFields.StateScheduler({data:this.get("data").date,type:this.get("stateType"),targetNode:c,allowNever:this.get("allowNever"),durationOffset:this.get("durationOffset")});case "picker":return new a.Squarespace.DialogFields.Statepicker({targetNode:c,
data:this.get("data"),states:this.get("states"),stateOrder:this.get("stateOrder"),stateType:this.get("stateType"),allowNever:this.get("allowNever")});default:throw"Not Implemented";}},getFlyoutConfig:function(b,c){var d={node:c.get("contentBox").one(".workflow-flyout"),animateOpacity:!0,alignment:"rc"};switch(b){case "timer":return a.merge(d,{alignment:"tc"});case "picker":return a.merge(d,{alignment:"tl",paddingOffset:{x:30,y:45}});default:return d}},getFlyoutPlugin:function(b){switch(b){case "picker":return a.Squarespace.Animations.Flyover;
case "timer":return a.Squarespace.Animations.Flyout;default:return a.Squarespace.Animations.Flyout}},getStateType:function(c){c=c||this.get("data");var d=this.get("states");return!a.Object.hasKey(d,c.state)?!1:b(d[c.state].stateDesc)||"none"},getStateDesc:function(b,c){b=b.replace("[","{").replace("]","}");return a.Lang.sub(b,{DATE:this.getDateText(c),DURATION:this.getDurationText(c)})},getDateText:function(b){var c="-";a.Lang.isValue(b)&&(c=a.Squarespace.DateUtils.dateFormat(new Date(b),{format:"%a, %b %d at %l:%M %p"}));
return a.Lang.sub('<span class="date-wrapper"><span class="date">{date}</span></span>',{date:c})},getDurationText:function(b){var c=this.get("durationOffset"),d=this.get("allowNever")&&!a.Lang.isValue(b);b=a.Squarespace.DateUtils.dateFormat(b,{format:"%l:%M %p"});return a.Lang.sub('<span class="duration-wrapper"><span class="duration">{duration}</span></span>',{duration:-1===c&&d?"never":0>c?"now":0===c?"today at "+b:1===c?"tomorrow at "+b:"in "+c+" days at "+b})},didDataChange:function(){var a=this.get("data");
return d(a,this._initialData)}},{CSS_PREFIX:"sqs-stateflow",TEMPLATE:'<div class="clear field-workflow-wrapper"><div class="field-workflow-title">&nbsp</div><div class="field-workflow-description">&nbsp</div></div>',ATTRS:{strings:{},data:{},states:{},stateOrder:{validator:a.Lang.isArray},stateType:{},durationOffset:{value:-1,validator:function(b){return a.Lang.isNumber(Number(b))},setter:function(a){return parseInt(a,10)}},allowNever:{validator:a.Lang.isBoolean}}})},"1.0",{requires:"base base-build squarespace-dialog-fields squarespace-dialog-field-2 squarespace-dialog-statepicker squarespace-node-flyout squarespace-node-flyover squarespace-panel squarespace-dialog-statepicker-scheduler squarespace-date-utils".split(" ")});
YUI.add("squarespace-dialog-content-selector",function(a){var d=a.namespace("Squarespace.DialogFields").ContentSelector=a.Base.create("contentSelector",a.Squarespace.DialogField2,[],{initializer:function(b){a.Lang.isValue(b.data)&&this.set("selectedContent",b.data);(this._collectionGroupsCreated=b=a.Lang.isValue(this.get("collectionGroups")))||(0===a.Squarespace.ContentCollectionCache.size()?a.Squarespace.ContentCollectionCache.load(a.bind(function(){this._createCollectionGroups();this.syncUI()},
this)):this._createCollectionGroups())},bindUI:function(){var a=this.get("contentBox");a.delegate("click",function(a){a.target.hasClass("dropdown-button")?a.currentTarget.ancestor(".collection-wrapper").toggleClass("open"):this._selectCollection(a)},".collection",this);a.delegate("change",this._selectCategoryOrTag,"select",this)},syncUI:function(){d.superclass.syncUI.call(this);this._collectionGroupsCreated?this._setLoadedState():this._showSpinner();this.get("contentBox").toggleClass("titles-hidden",
!this.get("showGroupTitles"))},clearSelected:function(){var a=this._selectedCollectionWrapper;if(a){a.removeClass("selected");var b=a.one(".collection-filter");b&&(b.remove(),a.one(".right-paren").remove(),a.all("select").set("value","None"))}},_showSpinner:function(){var b=a.Node.create('<div class="loading"><div class="spinner"></div><div class="text">Loading...</div></div>');this.get("contentBox").setHTML(b);(new a.Squarespace.Spinner({size:20,color:"light",render:b.one(".spinner")})).spin()},
_setLoadedState:function(){var b=this.get("contentBox"),e=this.get("collectionGroups"),d=this.get("selectedContent"),e={collectionGroups:e,emptyMessage:this.get("emptyMessage")};a.Lang.isArray(d)&&(0<d.length&&d[0].filter)&&(e.filter=d[0].filter);b.setHTML(a.Squarespace.UITemplates.render("dialog-content-selector.html",e));b.all(".collection-wrapper").each(function(a){a.hasClass("selected")&&(this._selectedCollectionWrapper=a)},this);b.all(".dropdown").each(function(a){var b=a.one(".categories"),
c=a.one(".tags");b&&c?a.addClass("content-stats"):b?a.addClass("categories"):c&&a.addClass("tags")},this)},_selectCollection:function(a){a=a.currentTarget.ancestor(".collection-wrapper");this.clearSelected();a.addClass("selected");this._selectedCollectionWrapper=a;this.set("data",{urlId:a.getAttribute("data-url-id"),filter:null,id:a.getAttribute("data-collection-id")})},_selectCategoryOrTag:function(b){var e=b.currentTarget;b=e.ancestor(".collection-wrapper");var d=e.ancestor(".categories")?"category":
"tag",e=e.get("value"),f=("tag"===d?"#":"")+e;this.clearSelected();b.one(".collection-title").insert(a.Node.create('<div class="collection-filter">('+f+'</div><div class="right-paren">)</div>'),"after");b.addClass("selected");b.addClass("has-content-stat-filter");b.removeClass("open");this._selectedCollectionWrapper=b;this.set("data",{urlId:b.getAttribute("data-url-id"),filter:"none-selected"===e?null:{type:d,name:e},id:b.getAttribute("data-collection-id")})},_getCollections:function(b){var e=a.merge({},
this.get("collectionFilter"));if(e){for(var d in e)if(a.Object.hasKey(b,d)){var f=a.Lang.isArray(e[d]);if(f&&-1===a.Array.indexOf(e[d],b[d])||!f&&b[d]!=e[d])return[];f&&(e[d]=b[d])}b=a.merge(b,e)}return a.Squarespace.ContentCollectionUtils.filterCollections(b,this.get("excludeCollectionIds"))},_createCollectionGroups:function(){var b=this._getCollections({collectionType:a.Squarespace.CollectionTypes.GENERIC,folder:!1}),e=this._getCollections({collectionType:a.Squarespace.CollectionTypes.PAGE,folder:!1}),
d=this._getCollections({collectionType:a.Squarespace.CollectionTypes.PRODUCT,folder:!1}),f=this._getCollections({collectionType:a.Squarespace.CollectionTypes.TEMPLATE_PAGE,folder:!1});collectionGroups=a.Squarespace.ContentCollectionUtils.groupCollectionsByTypeName(b);0<e.length&&collectionGroups.push({title:"Page",collections:e});0<d.length&&collectionGroups.push({title:"Product",collections:d});0<f.length&&collectionGroups.push({title:"Template Pages",collections:f});this.set("collectionGroups",
collectionGroups);this._collectionGroupsCreated=!0},_setStatOnCollectionObject:function(b,e,d,f){var h=[];a.Array.each(e,function(b){var c=b.name,e={name:c};d&&a.Lang.isArray(d)&&a.Array.each(d,function(b,d){c===a.Object.getValue(b,["filter","name"])&&(e.selected=!0)});h.push(e)},this);f[b]=h},_setSelectedOnCollectionObject:function(b,e){a.Array.each(b,function(b,c){if(e.id===b.id&&(!a.Object.hasKey(b,"urlId")||b.urlId===e.urlId))e.selected=!0;b.filter&&(e.filter=b.filter)})}},{CSS_PREFIX:"sqs-content-selector",
ASYNC_DATA:!0,ATTRS:{collectionGroups:{setter:function(b){var e=this.get("selectedContent");a.Array.each(b,function(b){b.collectionObjects=[];a.Array.each(b.collections,function(c){var d=[],k=[],l=a.Squarespace.ContentStatsCache.filter(function(a){return c.get("id")===a.get("collectionId")},this)[0];l&&(d=l.get("categoryList"),k=l.get("tagList"));l={className:a.Squarespace.ContentCollectionUtils.getIconClassNames(c),id:c.get("id"),title:c.get("navigationTitle"),urlId:c.get("urlId")};this.get("showCollectionTagsAndCategories")&&
(l.dropdown=0!==d.length||0!==k.length,this._setStatOnCollectionObject("categories",d,e,l),this._setStatOnCollectionObject("tags",k,e,l));e&&this._setSelectedOnCollectionObject(e,l);b.collectionObjects.push(l)},this)},this);this._collectionGroupsCreated=!0;return b},value:null},collectionFilter:{value:null},data:{getter:function(b){b=this.get("dataMapper");var e=this.get("selectedContent");return a.Lang.isFunction(b)?b(e):e},setter:function(a){this.set("selectedContent",a);return a}},selectedContent:{setter:function(b){return a.Lang.isArray(b)?
a.Array.map(b,d.mapToObject):a.Lang.isValue(b)?[d.mapToObject.apply(null,arguments)]:b}},dataMapper:{value:function(a){return a},validator:a.Lang.isFunction},excludeCollectionIds:{value:[]},emptyMessage:{value:"There are no collections."},showCollectionTagsAndCategories:{value:!0},showGroupTitles:{value:!0}},mapToObject:function(b,e,d){var f={};if(a.Lang.isObject(b))if(a.instanceOf(b,a.Model))f.id=b.get("id");else return b;else a.Lang.isValue(b)&&(f.id=b);a.Lang.isObject(e)&&!a.Lang.isArray(e)&&(f.filter=
e);a.Lang.isString(d)&&(f.urlId=d);return f}}),b=function(b){if(a.Lang.isArray(b)){if(1>b.length)return"";b=b[0]}var e=a.Lang.isObject(b);return e&&a.Object.hasKey(b,"id")?b.id:e&&a.instanceOf(b,a.Model)?b.get("id"):b};a.namespace("Squarespace.DialogFields").ContentIdSelector=a.Base.create("contentIdSelector",a.Squarespace.DialogFields.ContentSelector,[],{},{ATTRS:{dataMapper:{value:b}}});a.namespace("Squarespace.DialogFields").ContentIdArraySelector=a.Base.create("contentIdArraySelector",a.Squarespace.DialogFields.ContentSelector,
[],{},{ATTRS:{dataMapper:{value:function(c){return a.Lang.isArray(c)?a.Array.map(c,b):[b(c)]}}}})},"1.0",{requires:"base base-build squarespace-dialog squarespace-dialog-field-2 squarespace-dialog-content-selector-template squarespace-animations squarespace-hb-compare squarespace-content-collection-utils squarespace-models-content-stats squarespace-ui-templates".split(" ")});
YUI.add("squarespace-dialog-file-image",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.FileImage=a.Base.create("fileImage",a.Squarespace.DialogFields.FileRequiresProcessing,[],{renderUI:function(){d.superclass.renderUI.call(this);var b=this._imagePickerEl=a.Node.create('<div class="'+this.getClassName()+'-external-image-picker"></div>');this.get("contentBox").append(b)},bindUI:function(){d.superclass.bindUI.call(this);this._imagePickerEl.on("click",function(a){a.halt();
this._initializeExternalImagePicker()},this)},getAssociatedVars:function(){var a=[],c=this.get("data");c&&(a=[{name:this.get("name")+"Id",value:c.get("id")},{name:"mediaFocalPoint",value:c.get("mediaFocalPoint")}]);return a},_cleanupResidualElements:function(){d.superclass._cleanupResidualElements.call(this);var a=this._focalPoint;a&&a.get("host").unplug(a.constructor)},_renderFilePreview:function(){var b=this.get("data"),c=this.get("contentBox");c.removeClass("loaded");c.addClass("image-loading");
var b=a.Node.create('<div class="'+this.getClassName()+'-preview content-fit"><img data-load="false" data-src="'+b.get("assetUrl")+'" data-image-dimensions="'+b.get("originalSize")+'"data-image-focal-point="'+b.get("mediaFocalPoint.x")+","+b.get("mediaFocalPoint.y")+'" /></div>'),e=b.one("img[data-src]");e.plug(a.Squarespace.Animations.Scalable);e.hide();this._spinner=new a.Squarespace.Spinner({size:"extra-large",render:c,color:this.get("spinnerColor")});this._spinner.get("boundingBox").setStyles({top:"50%",
left:"50%",position:"absolute",marginLeft:"-20px",marginTop:"-20px"});this._bindPreviewImage(e);this.get("contentBox").append(b);e.plug(a.Squarespace.Loader2,{load:!0})},_plugActionOverlay:function(b){var c=this.get("data"),e=this._actionOverlay=this.get("contentBox").plug(a.Squarespace.Plugin.ActionOverlay,{buttons:this.get("disableEdit")?["remove"]:["edit","remove"],anchor:b,position:0.5<=c.get("mediaFocalPoint.y")?"top":"bottom"}).actionOverlay;e.on("button-edit",function(){e.setLoadingState("edit",
!0);a.Aviary.once("ready",function(){e.setLoadingState("edit",!1)});a.Aviary.launch(c,this.get("mode"))},this);e.on("button-remove",function(){this.set("data",null)},this)},_bindPreviewImage:function(a){a.on("error",function(){this.get("destroyed")||this._cleanupImagePreviewError(a)},this);a.once("load",function(){this.get("destroyed")||this._animateLoadedImage(a)},this)},_cleanupImagePreviewError:function(b){null===b||(null===b.getDOMNode()||!b.inDoc())||(this._spinner.destroy(),this.get("contentBox").removeClass("image-loading"),
this.set("data",null),new a.Squarespace.Widgets.Alert({"strings.title":this.LANG.TITLE_PROCESSING_FAIL,"strings.message":this.LANG.ERR_PROCESSING_FAIL}))},_animateLoadedImage:function(b){var c=this.get("contentBox");c.plug(a.Squarespace.Animations.Scalable);c.once("hidden",function(){this.get("destroyed")||(this._spinner.destroy(),c.removeClass("image-loading"),c.addClass("loaded"),c.show(!0),b.once("shown",function(){this.get("destroyed")||(this._plugActionOverlay(b),this.get("useFocalPoint")&&this._plugFocalPoint(b))},
this),b.show())},this);c.show(!0);c.hide()},_plugFocalPoint:function(b){var c=this.get("data");b=this._focalPoint=b.plug(a.Squarespace.Plugin.FocalPoint,{focalPoint:c.get("mediaFocalPoint")||{x:0.5,y:0.5},parentNode:this.get("contentBox")}).focalPoint;b.on("focalPointChange",function(a){"DialogFileImage"!=a.source&&c.set("mediaFocalPoint",{x:a.newVal.x,y:a.newVal.y})},this);b.on("focalPointChanged",function(a){this.get("autoSaveFocalPoint")&&c.save({fields:["mediaFocalPoint"]});this._actionOverlay.set("position",
0.5<c.get("mediaFocalPoint.y")?"top":"bottom")},this)},setFocalPointPluginValue:function(a){this._focalPoint&&this._focalPoint.set("focalPoint",a,{source:"DialogFileImage"})},_initializeExternalImagePicker:function(){var b=this.get("imagePickerScrapeUrl"),c=this.get("data");!b&&c&&(b=c.get("sourceUrl"));var e=new a.Squarespace.EditingDialog({name:"choose-image-picker-url",closeOthers:!1,top:250,width:468,overlay:0.5,primaryTabs:[{title:this.LANG.TITLE_DOWNLOAD_IMAGES,icon:"/universal/images-v6/configuration/icon-importing-32-light.png",
fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:this.LANG.DESC_DOWNLOAD_IMAGES}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"imagePickerScrapeUrl",submitOnEnter:!0,strings:{required:!0,placeholder:"http://"}}}]}],buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Find Images"}],initialData:{imagePickerScrapeUrl:b}});e.on("send-requested",function(){var b=e.getField("imagePickerScrapeUrl"),c=b.getValue();/^https?:\/\//.test(c)||(c=c.replace(/^(?:\/\/)?/,"http://"));
/^https?:\/\/[-A-Za-z0-9+&@#\/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#\/%=~_()|]/.test(c)&&-1<c.indexOf(".")?this.get("imagePickerDownloadFromSource")||c.match(/.*(jpg|jpeg|gif|png)$/i)?(this.saveFromUrl(c),e.cancel()):(b=new a.Squarespace.Widgets.ExternalImagePicker({scrapeUrl:c,render:!0}),b.after("selectedImageURLChange",function(a){this.saveFromUrl(a.newVal)},this),b.after("visibleChange",function(a){a.newVal&&e.cancel()},this),b.show()):(b.showError(this.LANG.ERR_INVALID_URL),e.allowEditing())},this);
e.show()}},{CSS_PREFIX:"sqs-file-image",FILE_FILTER:{description:"Images",extensions:"*.jpg;*.jpeg;*.png;*.gif;*.ico"},PROCESSING_JOB:a.Squarespace.ImageProcessingJob,PROCESSING_COPY:"Processing and resizing.",ATTRS:{contentType:{value:"image"},contentLabel:{value:"an image"},disableEdit:{value:!1},useFocalPoint:{value:!0},autoSaveFocalPoint:{value:!1},imagePickerScrapeUrl:{value:""},imagePickerDownloadFromSource:{value:!1}}})},"1.0",{requires:"base node squarespace-dialog-file-requires-processing squarespace-image-loader squarespace-animations squarespace-job-manager squarespace-aviary squarespace-ui-base squarespace-spinner squarespace-plugin-focalpoint squarespace-plugin-actionoverlay squarespace-external-image-picker squarespace-dialog squarespace-dialog-description squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-block-video-editor",function(a){var d=a.namespace("Squarespace.Block.Editor").Video=a.Base.create("video-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Video")},_updateModel:function(b){var e=this._model;a.Object.each(b,function(d,f){var h=e.get(f);a.Lang.isObject(d)&&a.Lang.isObject(h)&&(a.Object.size(d)!==a.Object.size(h)||a.Object.some(d,function(a,
b){return h[b]!==a})||delete b[f])});d.superclass._updateModel.call(this,b)}},{NS:"blockEditor",ATTRS:{blockName:{value:"Video"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Video=a.Base.create("blockOpentableEditor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").once("ready",function(){this.get("model").after("oembedChange",this._updateDescriptionField,this)},this)},_updateDescriptionField:function(b){var e=a.Object.getValue(b,["newVal","description"]);b=a.Object.getValue(b,
["prevVal","description"]);var d=this.get("dialog");b&&!a.Lang.isValue(e)?d.getField("description").setValue({html:""}):a.Lang.isValue(e)&&e!==b&&d.getField("description").setValue({html:e})},getDialogData:function(){var b=this.get("model"),e=b.toJSON();return a.merge(e,{customThumb:b.get("customThumb"),oembed:b.get("oembed")})}},{ATTRS:{dialogConfig:{valueFn:function(){return b}}}});var b={initialDataByReference:!0,name:"editVideoBlock",width:400,height:{$valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?
642:550}},buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Video",icon:"/universal/images-v6/icons/icon-video-16-light-solid.png",scroll:!1,fields:[{name:"oembed",ctor:a.Squarespace.DialogFields.Oembed,config:{filter:"video","strings.title":"Video URL","strings.description":"Paste the URL of a video (YouTube, Vimeo, etc.) to embed it.","strings.inputPlaceholder":"Enter a video URL here"}},{name:"customThumb",ctor:a.Squarespace.DialogFields.FileImage,
config:{"strings.title":"Custom Overlay",contentType:"image",transientStore:!0,contentLabel:"a thumbnail",height:183,fullHeight:!0,useFocalPoint:!0,autoSaveFocalPoint:!0}},{name:"overlay",ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Use Thumbnail"}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"layout",className:"thin dark",defaultValue:"caption-hidden",options:[{value:"caption-hidden",label:"Do Not Display Caption"},{value:"caption-below",label:"Caption Below"}]}},{ctor:a.Squarespace.DialogFields.Wysiwyg,
config:{name:"description",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:135,classNames:"major"}}]}]}},"1.0",{requires:"squarespace-damask-context-globals squarespace-dialog-check squarespace-dialog-description squarespace-dialog-file-image squarespace-dialog-oembed squarespace-dialog-select squarespace-dialog-wysiwyg squarespace-models-content-item".split(" ")});
YUI.add("squarespace-google-domains-consent-service",function(a){a.namespace("Squarespace");a.Squarespace.GoogleDomainsConsentService=new (a.Base.create("domainConsentService",a.Base,[],{initializer:function(){this._openWindows={};this._messageCallbacks={};this._messageEventHandler=window.addEventListener("message",a.bind(this._routeMessage,this))},destructor:function(){window.removeEventListener("message",this._messageEventHandler);this._endMonitor()},getConsent:function(d,b,c){return a.Squarespace.Promises.create(function(a,
g){this._messageCallbacks[d]=function(b){b.consentGranted?a({requestId:b.requestId}):g()};this._openConsentWindow(d,b,c)},this)},getConsentForNewSite:function(d,b){return a.Squarespace.Promises.create(function(a,e){this._messageCallbacks[d]=function(b){b.consentGranted?a({requestId:b.requestId}):e()};this._openSignupConsentWindow(d,b)},this)},getDomainOnlyConsent:function(d,b,c){return a.Squarespace.Promises.create(function(a,g){this._messageCallbacks[d]=function(b){b.consentGranted?a({requestId:b.requestId}):
g()};this._openDomainConsentOnlyWindow(d,b,c)},this)},getConsentForList:function(){return a.Squarespace.Promises.create(function(d,b){var c=a.guid();this._messageCallbacks[c]=function(a){a.consentGranted?d({requestId:a.requestId}):b()};this._openListConsentWindow(c)},this)},_routeMessage:function(d){var b=d.data.domain;if(a.Lang.isString(b)){var c=this._messageCallbacks[b];a.Lang.isFunction(c)&&(c.call(this,d.data),delete this._messageCallbacks[b])}},_registerOpenWindow:function(d,b){0>=a.Object.size(this._openWindows)&&
this._beginMonitor();this._openWindows[d]=b},_unregisterOpenWindow:function(d){delete this._openWindows[d];0>=a.Object.size(this._openWindows)&&this._endMonitor()},_endMonitor:function(){this._monitor&&this._monitor.cancel()},_beginMonitor:function(){this._monitor=a.later(300,this,function(){var d=[];a.Object.each(this._openWindows,function(a,c){a.closed&&(this._routeMessage({data:{domain:c,consentGranted:!1}}),d.push(c))},this);a.Array.each(d,this._unregisterOpenWindow,this)},null,!0)},_openListConsentWindow:function(d){var b=
a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/list-domains-consent-initialize?requestIdentifier={identifier}",{identifier:d,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(b,d)},_openDomainConsentOnlyWindow:function(d,b,c){b=a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/domain-consent-initialize?domain={domain}&requestId={requestId}",{requestId:b,domain:d,websiteId:c,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(b,d)},
_openConsentWindow:function(d,b,c){b=a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/consent-initialize?domain={domain}&websiteId={websiteId}&userId={userId}",{domain:d,appDomain:Static.SQUARESPACE_CONTEXT.appDomain,websiteId:c||"",userId:b});this._openConsentPopup(b,d)},_openSignupConsentWindow:function(d,b){var c=a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/signup-consent-initialize?domain={domain}&userId={userId}",{domain:d,userId:b,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});
this._openConsentPopup(c,d)},_openConsentPopup:function(a,b){var c=window.open(a,"Google Domains Consent","status=0,width=1020,height=520");this._registerOpenWindow(b,c)}}))},"1.0",{requires:["base","promise","squarespace-promises"]});
YUI.add("squarespace-block-newsletter",function(a){var d=a.Base.create("NewsletterFormModel",a.Squarespace.Models.BlockFormModel,[],{toJSON:function(){return{formId:this.get("formId"),showName:this.get("showName"),title:this.get("title"),description:this.get("description"),disclaimer:this.get("disclaimer")}},_createFormModel:function(){var b=[{type:"email",id:null,locked:!0,title:"Email Address",description:"",placeholder:"Email Address",required:!0,email:!0},{type:"name",id:null,locked:!1,title:"Name",
description:"",required:!1,name:!0}];a.Array.each(b,function(e){a.Squarespace.FormEditingUtils.resolveFieldId(e,b)},this);return new a.Squarespace.Models.Form({type:a.Squarespace.FormType.NEWSLETTER_BLOCK,name:"Newsletter Form",fields:b,submitButtonText:"Sign Up"})}},{FORM_MODEL_FIELDS:["submitButtonText","submissionMessage","submissionHTML"],ATTRS:{showName:!1,title:{value:"Subscribe"},description:{value:{engine:"wysiwyg",html:"<p>Sign up with your email address to receive news and updates.</p>",
source:"<p>Sign up with your email address to receive news and updates.</p>"}},disclaimer:{value:{engine:"wysiwyg",html:"<p>We respect your privacy.</p>",source:"<p>We respect your privacy.</p>"}},formId:{value:null},emailConnect:{value:null}}}),b=a.namespace("Squarespace.Block").Newsletter=a.Base.create("block-newsletter",a.Squarespace.Block.ModelSyncBase,[],{renderUI:function(){this.get("model").load(a.bind(this._renderBlock,this))},_renderBlock:function(){this.get("model").get("formId")&&b.superclass._renderBlock.call(this)}},
{CSS_PREFIX:"sqs-block-newsletter",MODEL:d,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Newsletter},type:{value:a.Squarespace.BlockType.NEWSLETTER}}})},"1.0",{requires:["squarespace-block-form","squarespace-block-newsletter-editor","squarespace-form-editing-utils"]});
YUI.add("squarespace-block-calendar-editor",function(a){a.namespace("Squarespace.Block.Editor").CalendarDialog=a.Base.create("calendar-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Calendar")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Calendar"},minHSize:{value:4}}});a.namespace("Squarespace.Block.ModelEditorDialog").Calendar=a.Base.create("blockCalendarEditor",a.Squarespace.ModelEditorDialog,
[],{},{ATTRS:{dialogConfig:{valueFn:function(){return d}},strings:{value:{title:"Index",description:"Select a collection below."}}}});var d={width:275,height:420,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Calendar",icon:"/universal/images-v6/icons/icon-event-16-light.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Choose a collection for this calendar to display.",padding:[0,0]}},{ctor:a.Squarespace.DialogFields.ContentIdSelector,
config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{collectionType:[a.Squarespace.CollectionTypes.PRODUCT,a.Squarespace.CollectionTypes.GENERIC],folder:!1}}}]}]}},"1.0",{requires:"base model squarespace-block-calendar-model squarespace-calendar-block-renderer squarespace-damask-context-globals squarespace-dialog-description squarespace-dialog-content-selector squarespace-models-content-collection".split(" ")});
YUI.add("squarespace-block-image-editor",function(a){var d=a.namespace("Squarespace.Block.Editor").Image=a.Base.create("image-block-editor-dialog-web",a.Squarespace.Block.Editor.ImageBase,[],{initializer:function(){this._initResize();this._initOverlay()},_initOverlay:function(){var b=this._host.contentImage;this._overlay=a.Node.create('<div class="sqs-editing-overlay"></div>');b.get("contentBox").append(this._overlay);this._editingChangeHandle=b.on("editingChange",function(a){a.newVal?this._overlay.hide():
this._overlay.show()},this)},syncUI:function(){var a=this._host.contentImage.get("model"),b=a.get("imageId"),a=a.get("processing");b&&!a?this._initResize():this._destroyResize()},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Image")},_initConfigDialog:function(){var a=d.superclass._initConfigDialog.call(this);a.set("imageContentModel",this._host.contentImage.get("model"));a.set("imageContentWidget",this._host.contentImage);return a},
destructor:function(){this._editingChangeHandle.detach();this._destroyResize();this._overlay.destroy()},_initResize:function(){function b(){var a=h.get("boundingBox").get("region");return 100*(a.height/a.width)}function e(){var a=h.get("model").get("dimensions");return 100*(a.height/a.width)}if(this._model.get("imageId")){var d=this.get("host"),f=d.get("boundingBox"),h=d.contentImage;if(!h.get("boundingBox")[a.Plugin.Resize.NS]){d.plug(a.Squarespace.WidgetResize,{resizeNode:h.get("boundingBox")});
var k=f.one(".yui3-resize-handles-wrapper");f.appendChild(k);var l=h.get("boundingBox").resize;l.on("handle-dblclick",function(){h.get("model").set("aspectRatio",e())},this);l.on("resize:start",function(b){a.Lang.isValue(this._model.get("vSize"))&&this._model.set("vSize",null);b=d.contentImage.contentEditor;this.resizeStartEditingState=b.get("editing");b.set("editing",!1);d.get("editController").disableInsertPoints()},this);l.on("resize:resize",function(a){var b=h.get("boundingBox").get("region"),
c=d.get("boundingBox").get("region");a=d.get("boundingBox").one(".yui3-resize-handle-b").get("region");var e=h.get("model").get("dimensions"),f=l.delegate.dd,k=f.mouseXY[1];this.mouseDelta||(this.mouseDelta=a.bottom-a.height/2-k);var s=b.width/e.width,b=parseInt(e.height,10)*s+(b.top+(c.bottom-b.bottom));k>b-10&&k<b+10&&(f.actXY[1]=b-a.height/2)},this);l.after("resize:resize",function(a){h.get("model").set("aspectRatio",b(),{silent:!0})});l.on("resize:end",function(a){this.mouseDelta=null;d.contentImage.contentEditor.set("editing",
this.resizeStartEditingState);this._host.get("editController").enableInsertPoints()},this);l.after("resize:end",function(){h.get("model").set("vSize",null);h.get("model").set("aspectRatio",b())})}}},_destroyResize:function(){var b=this._host.contentImage.get("boundingBox");b.resize&&this._host.unplug(a.Squarespace.WidgetResize);b.setStyles({width:null,height:null,border:null,margin:null})}},{NS:"blockEditor"}),b=a.namespace("Squarespace.Block.ModelEditorDialog").Image=a.Base.create("blockImageEditorDialog",
a.Squarespace.ModelEditorDialog,[],{_showDialog:function(){b.superclass._showDialog.call(this);var c=this.get("dialog");c.once("ready",function(b){this._syncClickThroughNodeVisibility();a.Lang.isValue(c.getField("lightbox"))&&c.getField("lightbox").after("dataChange",this._syncClickThroughNodeVisibility,this);c.getField("image").after("dataChange",function(){this._syncContentImage()},this);this._syncContentImage()},this);var e=this.get("imageContentModel");e.on("focalPointChange",function(a){var b=
c.getField("image");b&&b.setFocalPointPluginValue(a.newVal)});e.after("imageIdChange",function(b){var d=c.getField("image");if(d)if(b.newVal){var h=new a.Squarespace.Models.ContentItem({id:e.getImageContentItemField("id"),mediaProcessingState:a.Squarespace.MediaProcessingState.QUEUED});h.load(function(){d.set("data",h);d.syncUI()})}else d.set("data",null)},this)},_syncClickThroughNodeVisibility:function(){var b=this.get("dialog"),e=b.getField("clickThrough").get("contentBox");a.Lang.isValue(b.getField("lightbox"))?
b.getField("lightbox").get("data")?e.hide():e.show():e.show()},getDialogData:function(){var b=this.get("model").toJSON(),e=b.linkTo;a.Lang.isString(e)&&(b.clickThrough={url:e,newWindow:b.newwindow});b.description={html:b.description};b.image=new a.Squarespace.Models.ContentItem({id:b.imageId});b.filename=this.get("imageContentModel").getImageContentItemField("filename");return b},sanitizeDialogData:function(b){b.lightbox?(b.linkTo="",b.newwindow=!1):b.clickThrough&&b.clickThrough.url?(b.linkTo=b.clickThrough.url,
b.newwindow=b.clickThrough.newWindow):(b.linkTo="",b.newwindow=!1);a.Lang.isValue(b.image)?b.imageId=b.image.get("id"):b.imageId=null;return{linkTo:b.linkTo,newwindow:b.newwindow,lightbox:b.lightbox,layout:b.layout,stretch:b.stretch,filename:b.filename}},_syncContentImage:function(){var b=this.get("dialog").getData(),e=this.get("id"),d=null,f=b.image;a.Lang.isValue(f)&&(d=f.get("id"),f.detach(e+"|*"),f.after(e+"|mediaProcessingStateChange",function(a){this.get("imageContentModel").applyAttrsFromContentItem(f);
f.load()},this),f.after(e+"|assetUrlChange",function(b){this.get("imageContentModel").set("aspectRatio",null);this.get("imageContentModel").applyAttrsFromContentItem(f);this.get("imageContentWidget").syncUI();this.get("imageContentWidget").contentEditor.set("editing",a.Lang.isValue(this.get("imageContentWidget").imgNode))},this),f.after(e+"|mediaFocalPointChange",function(a){this.get("imageContentModel").set("focalPoint",a.newVal)},this));this.get("imageContentModel").setAttrs({imageId:d})},save:function(a,
e,d){this._syncContentImage();b.superclass.save.apply(this,arguments)},_getDialogConfig:function(){return{name:"imageBlockConfig",initialDataByReference:!0,width:400,height:{$valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?652:490}},buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Image",icon:"/universal/images-v6/icons/icon-image-16-light.png",fields:[{ctor:a.Squarespace.DialogFields.FileImage,transientStore:!0,
height:168,contentType:"image",name:"image",autoSaveFocalPoint:!0},{ctor:a.Squarespace.DialogFields.Select,config:{name:"layout",className:"thin dark",defaultValue:"caption-below",options:[{value:"caption-hidden",label:"Do Not Display Caption"},{value:"caption-below",label:"Caption Below"},{value:"caption-overlay",label:"Caption Overlay"},{value:"caption-overlay-hover",label:"Caption Overlay on Hover"}]}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"filename",strings:{title:"Filename",description:"Optional. Set the file name that will appear in image URLs.",
placeholder:"something.jpg"},className:"thin dark"}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"stretch",strings:{title:"Stretch",description:"Stretch the image to span the container."}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"lightbox",strings:{title:"Lightbox",description:"Clicking on the image will enlarge the image into a lightbox."}}},{ctor:a.Squarespace.DialogFields.CreateLink,config:{name:"clickThrough","strings.title":"Clickthrough URL",condensed:!0}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDialogConfig"},
imageContentModel:{},imageContentWidget:{}}})},"1.0",{requires:"base squarespace-block-image-editor-base squarespace-damask-context-globals squarespace-dialog-check squarespace-dialog-create-link squarespace-dialog-file-image squarespace-dialog-select squarespace-dialog-text squarespace-model-editor".split(" ")});
YUI.add("squarespace-dialog-stringset-select-editor",function(a){var d;d=a.namespace("Squarespace.DialogFields").SelectEditor=a.Base.create("selectEditor",a.Squarespace.DialogField2,[a.WidgetChild,a.Squarespace.Mixins.StringSetUtils],{initalizer:function(a){this.publish("memberCreated",{emitFacade:!0})},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("options"),c=this.get("contentBox"),e=this.get("data"),g=c.one(this._optionsSelector),f=c.one(".workflow-flyout-options"),h=this.get("maxLength"),
k=[],l=this.get("editorLabel");c.one(".workflow-flyout").setStyle("width",this.get("width")+"px");a.Array.each(b,function(a,b){var c=this._createOptionNode(a,a,"data");this.memberInSet(e,a)&&c.addClass("active");g.append(c);k.push(c)},this);this.get("canAddMembers")&&(this._createOptionWrapper=this._createOptionNode(this.get("addMemberText")),this._createOptionWrapper.removeClass(this.get("memberClass")),this._createOptionWrapper.addClass("add"),g.append(this._createOptionWrapper));this._createInput=
a.Node.create('<input class="flyout-option-add">');a.Lang.isValue(h)&&this._createInput.setAttribute("maxlength",h);this.optionWrapEl=g;a.Lang.isString(l)&&l.length&&f.prepend(a.Node.create('<div class="flyout-title">'+l+"</div>"))},bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("contentBox");this._createInput.on("blur",this._emptyCreateInput,this);this._createInput.on("keydown",this._addMemberOnEnter,this);this._createInput.on("keyup",this._haltEvent,this);this.after("optionsChange",
this._appendMembers,this);this.after("memberCreated",this._emptyCreateInput,this);a.one(this._optionsSelector).on("click",this._handleOptionElClick,this)},syncUI:function(){d.superclass.syncUI.call(this);var a=this.optionWrapEl.all("."+this.get("memberClass"));this.get("data");a.each(function(a){var b=this._memberExistsInData(a.getData("data"));a.toggleClass("active",b)},this)},_handleOptionElClick:function(a){var c=a.target;c.hasClass("flyout-option")&&(c.hasClass(this.get("memberClass"))?(a=c.getData("data"),
c=(c.hasClass("active")?"remove":"add")+"Member",this.fire(c,{newVal:a})):c.hasClass("add")&&(c.empty(),c.addClass("active"),c.append(this._createInput),this._createInput.focus(),c.scrollIntoView()))},_emptyCreateInput:function(a){this.get("blurring")||this._resetCreateInput()},_addMemberOnEnter:function(a){var c=this.cleanMember(a.target.get("value"));1>c.length||13!==a.keyCode||(this._memberExistsOnClient(c)?this.fire("addMember",{newVal:c}):this._createNewMember(c))},_haltEvent:function(a){a.halt()},
_appendMembers:function(b){var c=b.newVal,e=b.prevVal;a.one(this._optionsSelector);a.Array.each(c,function(a,b){if(!this.memberInSet(e,a)){var c=this._createOptionNode(a,a,"data");c.addClass("active");this.optionWrapEl.insertBefore(c,this._createOptionWrapper)}},this)},_toggleActiveMembersClass:function(a,c){var e=this.get("contentBox").all(this.get("memberClass"));e.each(function(d){e.get("text")===a&&d.toggleClass("active",c)})},_memberExistsInData:function(a){return this.memberInSet(this.get("data"),
a)},_memberExistsOnClient:function(a){return this.memberInSet(this.get("options"),a)},_resetCreateInput:function(b){this.set("blurring",!0);a.Lang.isUndefined(b)&&(b=this.get("addMemberText"));this._createOptionWrapper.contains(this._createInput)?this._createInput.set("value",""):this._createOptionWrapper.empty();this._createOptionWrapper.set("text",b);this._createOptionWrapper.addClass("add");this._createOptionWrapper.removeClass("active");this.set("blurring",!1)},_createNewMember:function(b){var c=
this.get("collectionId");this.get("contentBox");this._resetCreateInput("Creating...");this._createOptionWrapper.removeClass("add");this._createOptionWrapper.addClass("active");a.Data.post({url:this.get("addMemberUrl"),data:{collectionId:c,category:b},args:b,success:a.bind(this._createNewMemberSuccess,this,b),failure:function(a){console.warn("Failed to add.")}},this)},_createNewMemberSuccess:function(b,c){var e=[],e=a.Array.map(c.collectionCategories,function(a,b){return a.name});this._toggleActiveMembersClass(b,
!0);this.set("options",e);this.fire("addMember",{newVal:b});this.fire("memberCreated",b);this._createInput.set("value","");this.optionWrapEl.set("scrollTop",this.optionWrapEl.get("scrollHeight"))},_createOptionNode:function(b,c,e){b=a.Lang.sub('<div class="flyout-option">{memberName}</div>',{memberName:b});b=a.Node.create(b);a.Lang.isUndefined(c)||b.setData(e||"data",c);b.addClass(this.get("memberClass"));return b},_optionsSelector:".flyout-select-options"},{CSS_PREFIX:"sqs-stringset-select-editor",
TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-options clear"><div class="flyout-select-options dialog-style-scroll"></div></div><div class="flyout-notch"></div></div>',ATTRS:{addMemberUrl:{value:"/api/commondata/AddCategory"},options:{value:[],validator:a.Lang.isArray,getter:function(a){return a.concat([])}},blurring:{value:!1},canAddMembers:{},collectionId:{},addMemberText:{},data:{},flyoutNode:{getter:function(){return this.get("contentBox").one(".workflow-flyout")}},
memberClass:{},maxLength:{value:null},editorLabel:{},width:{value:250}}})},"1.0.0",{requires:["base","base-build","squarespace-stringset-utils-mixin","squarespace-dialog-field-2"]});
YUI.add("squarespace-google-domains-utils",function(a){a.namespace("Squarespace.GoogleDomains");var d=function(b){a.Lang.isString(b)||(b="");(new a.Squarespace.Lightbox({disableNormalClose:!0,clickAnywhereToExit:!1,content:'<div class="bigtext"><div class="title">Failed to add domain</div><div class="description">'+b+'</div><div class="buttons"></div></div>',margin:100,noHeightConstrain:!0})).show()};a.Squarespace.GoogleDomains.getGoogleDomainUrlParams=function(){var b=window.location.search;return{userId:a.QueryString.parse(b.substr(1)).userId||
null,domainName:a.QueryString.parse(b.substr(1)).domainName||null}};a.Squarespace.GoogleDomains.isGoogleDomainFlow=function(){var b=a.Squarespace.SessionStorage.getSessionData("googleDomain");if(a.Lang.isObject(b))return!0;b=a.Squarespace.GoogleDomains.getGoogleDomainUrlParams();return!a.Lang.isNull(b.userId)&&!a.Lang.isNull(b.domainName)?!0:!1};a.Squarespace.GoogleDomains.showConfirmMessage=function(b,c){var e=a.Squarespace.GoogleDomains.getGoogleDomainUrlParams(),d=e.domainName,f=e.userId,e="http://"+
window.location.hostname,h=new a.Squarespace.Lightbox({disableNormalClose:!0,clickAnywhereToExit:!1,content:'<div class="bigtext"><div class="title">Link Domain: '+encodeURI(d)+'</div><div class="description">Your site <strong>'+e+"</strong> will be available at <strong>http://www."+d+'</strong>.</div><div class="buttons"><input type="button" class="login-button" name="login" value="Link Domain"/></div></div>',noHeightConstrain:!0});h.show();h.getContentEl().on("click",function(){h.hide();c(b,f,d)})};
a.Squarespace.GoogleDomains.startConsentFlow=function(b,c,e){var g=new a.Squarespace.Spinner({color:"light",size:"large",render:a.one(".spinner-wrapper")});g.spin();a.Squarespace.Analytics.trackInternal("domain_link_google_domain_start");return a.Squarespace.GoogleDomainsConsentService.getConsent(e,c,b).then(function(b){(new a.Squarespace.Models.GoogleDomain({googleAuthRequestId:b.requestId})).save({},function(b){g.stop();a.Lang.isValue(b)?d(b.responseJSON.message):window.location="/config#module=settings&settings-subpanelName=domain-settings"})},
function(b){a.Squarespace.Analytics.trackInternal("domain_link_domain_failure",{host:"google"});g.stop();d(b)})}},"1.0",{requires:["querystring","squarespace-google-domains-consent-service","squarespace-models-google-domain","squarespace-session-storage"]});
YUI.add("button-core",function(a,d){function b(a){this.initializer(a)}var c=a.ClassNameManager.getClassName,e=a.AttributeCore;b.prototype={TEMPLATE:"<button/>",constructor:b,initializer:function(a){this._initNode(a);this._initAttributes(a);this._renderUI(a)},_initNode:function(b){this._host=b.host?a.one(b.host):a.Node.create(this.TEMPLATE)},_initAttributes:function(a){e.call(this,b.ATTRS,a)},_renderUI:function(){var a=this.getNode(),c=a.get("nodeName").toLowerCase();a.addClass(b.CLASS_NAMES.BUTTON);
"button"!==c&&"input"!==c&&a.set("role","button")},enable:function(){this.set("disabled",!1)},disable:function(){this.set("disabled",!0)},getNode:function(){this._host||(this._host=this.get("boundingBox"));return this._host},_getLabel:function(){var a=this.getNode();return b._getTextLabelFromNode(a)},_getLabelHTML:function(){var a=this.getNode();return b._getHTMLFromNode(a)},_setLabel:function(b,c,e){b=a.Escape.html(b);(!e||"internal"!==e.src)&&this.set("labelHTML",b,{src:"internal"});return b},_setLabelHTML:function(a,
c,e){c=this.getNode();var d=b._getLabelNodeFromParent(c);"input"===c.get("nodeName").toLowerCase()?d.set("value",a):d.setHTML(a);(!e||"internal"!==e.src)&&this.set("label",a,{src:"internal"});return a},_setDisabled:function(a){var c=this.getNode();c.getDOMNode().disabled=a;c.toggleClass(b.CLASS_NAMES.DISABLED,a);return a}};a.mix(b.prototype,e.prototype);b.ATTRS={label:{setter:"_setLabel",getter:"_getLabel",lazyAdd:!1},labelHTML:{setter:"_setLabelHTML",getter:"_getLabelHTML",lazyAdd:!1},disabled:{value:!1,
setter:"_setDisabled",lazyAdd:!1}};b.NAME="button";b.CLASS_NAMES={BUTTON:c("button"),DISABLED:c("button","disabled"),SELECTED:c("button","selected"),LABEL:c("button","label")};b.ARIA_STATES={PRESSED:"aria-pressed",CHECKED:"aria-checked"};b.ARIA_ROLES={BUTTON:"button",CHECKBOX:"checkbox",TOGGLE:"toggle"};b._getLabelNodeFromParent=function(a){return a.one("."+b.CLASS_NAMES.LABEL)||a};b._getTextLabelFromNode=function(a){a=b._getLabelNodeFromParent(a);var c=a.get("nodeName").toLowerCase();return a.get("input"===
c?"value":"text")};b._getHTMLFromNode=function(a){return b._getLabelNodeFromParent(a).getHTML()};b._getDisabledFromNode=function(a){return a.get("disabled")};a.ButtonCore=b},"3.17.2",{requires:["attribute-core","classnamemanager","node-base","escape"]});
YUI.add("squarespace-dialog-code",function(a){var d=a.namespace("Squarespace.DialogFields").Code=a.Base.create("codeEditor",a.Squarespace.DialogField2,[],{initializer:function(b){var e;a.Lang.isObject(b)&&(e=this.get("editorConfig"),this.set("editorConfig",a.merge(e,b)))},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("contentBox").one(".code-editor-seed"),e=this.get("editorConfig"),g=this.get("data");a.Lang.isString(g)||(g="");this._editor=CodeMirror.fromTextArea(b.getDOMNode(),
e);this._editor.setValue(g)},bindUI:function(){d.superclass.bindUI.call(this);this._editor.on("change",a.bind(this._updateData,this));this.on("visibleChange",this._refreshEditor,this)},_refreshEditor:function(b){this._editor&&a.Lang.isFunction(this._editor.refresh)&&this._editor.refresh()},_updateData:function(b){b=a.Lang.trim(this._editor.getValue());this.set("data",b)},loadValue:function(a){this.set("data",a);this._editor.setValue(a)}},{CSS_PREFIX:"sqs-code",TEMPLATE:'<textarea class="code-editor-seed"></textarea>',
ATTRS:{data:{validator:a.Lang.isString},editorConfig:{value:{mode:"htmlmixed",theme:"squarespace-light",lineNumbers:!0,indentUnit:2,tabMode:"indent",lineWrapping:!0,onChange:a.bind(this._updateData,this),autoCloseTags:!0,matchTags:!0}},visible:{value:!0}}}),b=a.namespace("Squarespace.DialogFields").HtmlCode=a.Base.create("htmlCode",a.Squarespace.DialogFields.Code,[],{isValid:function(){var b=a.Lang.trim(this.get("data"));return""===b?!0:a.Lang.isValue(b)},_getErrors:function(){return!this.isValid()?
[this.get("strings.htmlError")]:[]},loadValue:function(a){this.set("data",a);this._editor.setValue(a)},didDataChange:function(){var c=b.superclass.didDataChange.call(this);!a.Lang.isValue(this._initialData)&&""===this.get("data")&&(c=!1);return c}},{CSS_PREFIX:"sqs-html-code",ATTRS:{strings:{value:{htmlError:"Invalid HTML"}},data:{value:"",validator:a.Lang.isString}}});a.namespace("Squarespace.DialogFields").UrlMappings=a.Base.create("urlMappings",a.Squarespace.DialogFields.Code,[],{isValid:function(){return!0}},
{CSS_PREFIX:"sqs-url-mapping",ATTRS:{}});a.namespace("Squarespace.DialogFields").jsonTemplateCode=a.Base.create("urlMappings",a.Squarespace.DialogFields.Code,[],{_getErrors:function(){var b=this.get("data"),e=this.get("sampleData");try{return a.JSONTemplate.evaluateJsonTemplate(b,e),[]}catch(d){return[d.name+": "+d.message]}}},{CSS_PREFIX:"sqs-json-template-code",ATTRS:{strings:{},height:{readOnly:!0,value:{}},sampleData:{}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2","thirdparty-codemirror"]});
YUI.add("squarespace-widgets-website",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.Website=a.Base.create("Website",a.Squarespace.Widgets.Model,[],{renderUI:function(){d.superclass.renderUI.call(this)},bindUI:function(){d.superclass.bindUI.call(this);this.get("boundingBox").on("click",function(){this.set("selected",1)},this)},_getHBTemplateContext:function(){return this.get("model").toJSON()}},{CSS_PREFIX:"sqs-website",HANDLEBARS_TEMPLATE:"widgets-website.html"})},"1.0",
{requires:["base","squarespace-util","squarespace-widgets-model","squarespace-widgets-website-template"]});
YUI.add("squarespace-block-social-account-links-model-editor",function(a){var d={width:340,height:290,name:"social-account-links",buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Social Links",icon:"/universal/images-v6/icons/icon-social-18-light.png",tabTitle:"Design",name:"design",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.HTML,config:{name:"ordering-desc",content:"The social links block contains accounts that are both connected and marked as visible from the Connected Accounts area of your website manager. To change the order of these icons, drag them to new positions from the Connected Accounts area.",
className:"description"}},{ctor:a.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconStyle","strings.title":"Style",className:"thin dark",options:{$include:"iconStyleOptions"}}},{ctor:a.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconSize","strings.title":"Size",className:"thin dark",options:{$include:"iconSizeOptions"}}},{ctor:a.Squarespace.DialogFields.Select,config:{titleStyle:"top",name:"iconAlignment",className:"thin dark","strings.title":"Alignment",options:{$include:"iconAlignmentOptions"}}},
{ctor:a.Squarespace.DialogFields.Select,config:{name:"iconColor","strings.title":"Color",className:"thin dark",options:{$include:"iconColorOptions"}}}]}]};a.namespace("Squarespace.Block.ModelEditorDialog").SocialAccountLinks=a.Base.create("socialAccountLinks",a.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{value:d},dialogConfigContext:{value:{socialAccountPickerAccounts:{$valueFn:function(b){return a.Squarespace.Block.SocialAccountLinksUtils.getAccountsWithProfileUrl(b)}},iconStyleOptions:{$valueFn:function(){var b=
a.Squarespace.SocialIconStyles;return[{value:b.ROUND,label:"Round"},{value:b.SQUARE,label:"Square"},{value:b.ICON_ONLY,label:"Icon Only"}]}},iconSizeOptions:{$valueFn:function(){var b=a.Squarespace.SocialIconSizes;return[{value:b.DEFAULT,label:"Medium"},{value:b.SMALL,label:"Small"},{value:b.LARGE,label:"Large"}]}},iconAlignmentOptions:{$valueFn:function(){var b=a.Squarespace.SocialIconAlignments;return[{value:b.LEFT,label:"Left"},{value:b.CENTER,label:"Center"},{value:b.RIGHT,label:"Right"}]}},iconColorOptions:{$valueFn:function(){var b=
a.Squarespace.SocialIconColors;return[{value:b.BLACK,label:"Black"},{value:b.WHITE,label:"White"},{value:b.STANDARD,label:"Standard"}]}}}}}})},"1.0",{requires:["base","squarespace-model-editor","squarespace-dialog-social-account-picker","squarespace-dialog-select"]});
YUI.add("squarespace-block-html-editor",function(a){a.namespace("Squarespace.Block.Editor").Html=a.Base.create("block-html-editor",a.Squarespace.Block.Editor.Base,[a.Squarespace.Block.Mixin.Splitable,a.Squarespace.Block.Mixin.Coalesceable],{insertContentIntoModel:function(a){this._model.set("source",a);this._model.set("html",a)},_onBlur:function(){this._disableEditing()},getBlockLevelElements:function(){var d=this.get("selectorsForInsertPoints");return new a.NodeList(a.Array.filter(this._cb.one(".sqs-html-content").get("children").getDOMNodes(),
function(b){b=a.one(b);return b.test(d)&&b.getContent()}))},_afterEditingChange:function(a){this._bb.toggleClass("sqs-block-editing",!!a.newVal)},_isCoalesceable:function(a){return 0<a.one(".sqs-html-content").get("text").length&&a.one(".sqs-html-content").get("text")!==this._host.contentHtml.get("placeholderText")},destructor:function(){this.ckEditor&&(this.ckEditor.destroy(),this.contentEl.set("contentEditable",!1))}},{NS:"blockEditor",ATTRS:{editingEvent:{value:"focus"},minHSize:{valueFn:function(){return this.get("host").get("editMode")===
a.Squarespace.Layout.EditMode.EMAIL?2:1}}}})},"1.0",{requires:["squarespace-block-editor-base","squarespace-block-mixin-splitable","squarespace-block-mixin-coalesceable","squarespace-visual-editor","squarespace-layout-drop"]});
YUI.add("squarespace-mixins-expandable",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.Expandable=a.Base.create("Expandable",a.Base,[],{initializer:function(){this.publish("expandableOpened");this.publish("expandableClosed");this.after("expandableNodeChange",function(d){d.newVal.plug(a.Squarespace.Animations.Expandable,{duration:this.get("expandDuration")})},this)},open:function(a){var b=this.get("expandableNode");b.hasClass("expandable-hidden")&&(b.once("opened",function(){this._set("animating",
!1);this._set("isOpen",!0);this.fire("expandableOpened")},this),this._set("animating",!0),b.show(a))},close:function(a){var b=this.get("expandableNode");b.hasClass("expandable-hidden")||(b.once("closed",function(){this._set("animating",!1);this._set("isOpen",!1);this.fire("expandableClosed")},this),this._set("animating",!0),b.hide(a))}},{ATTRS:{expandableNode:{valueFn:function(){return this.get("contentBox")},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Node)},expandDuration:{value:0.2,validator:a.Squarespace.AttrValidators.isNumber,
readOnly:!0},isOpen:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:!0},animating:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:!0}}})},"1.0",{requires:["base","node","squarespace-animations","squarespace-attr-validators"]});
YUI.add("squarespace-block-menu",function(a){var d={raw:"MEALS\n=========\n\nSandwiches\n----------\n\nLE PAYSAN\nSmoked turkey, Brie & apple chutney\n$14\n\nSOHO MEDITERRANEAN SANDWICH\nHummus, grilled vegetables & halloumi cheese\n$15\n\nSTEAK SANDWICH\nSteak w/ onions, bacon & cheddar\n$18\n\n\nPasta\n------\n\nGRAMIGNA\nmacaroni, pork sausage, swiss chard, black pepper\n$20\n\nGARGANELLI\npasta quills, cream, peas, truffle butter, prosciutto\n$22\n\nSPALLINA \ndouble ravioli, squacquerone cheese, rabbit, porcini\n$24\n\n\nDRINKS\n=========\n\nWine\n----\n\nSauvignon Blanc, Kim Crawford, Imalborough\n$12.00 glass /  $45.00 bottle\n\nMeursault, Mat Rot, Burgundy, France\n$13 glass / $80 bottle",menus:a.Squarespace.Utils.parseMenu("MEALS\n=========\n\nSandwiches\n----------\n\nLE PAYSAN\nSmoked turkey, Brie & apple chutney\n$14\n\nSOHO MEDITERRANEAN SANDWICH\nHummus, grilled vegetables & halloumi cheese\n$15\n\nSTEAK SANDWICH\nSteak w/ onions, bacon & cheddar\n$18\n\n\nPasta\n------\n\nGRAMIGNA\nmacaroni, pork sausage, swiss chard, black pepper\n$20\n\nGARGANELLI\npasta quills, cream, peas, truffle butter, prosciutto\n$22\n\nSPALLINA \ndouble ravioli, squacquerone cheese, rabbit, porcini\n$24\n\n\nDRINKS\n=========\n\nWine\n----\n\nSauvignon Blanc, Kim Crawford, Imalborough\n$12.00 glass /  $45.00 bottle\n\nMeursault, Mat Rot, Burgundy, France\n$13 glass / $80 bottle"),
menuStyle:"classic",currencySymbol:"$"};a.namespace("Squarespace.Block").Menu=a.Base.create("block-menu",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-menu",ATTRS:{editor:{value:a.Squarespace.Block.Editor.Menu},defaultContentModel:{value:d},floatable:{value:!1}}})},"1.0",{requires:["squarespace-block-base-modelsync","squarespace-block-menu-parser","squarespace-block-menu-editor"]});
YUI.add("widget-autohide",function(a,d){function b(b){a.after(this._bindUIAutohide,this,c);a.after(this._syncUIAutohide,this,e);this.get(g)&&(this._bindUIAutohide(),this._syncUIAutohide())}var c="bindUI",e="syncUI",g="rendered";b.ATTRS={hideOn:{validator:a.Lang.isArray,valueFn:function(){return[{node:a.one("document"),eventName:"key",keyCode:"esc"}]}}};b.prototype={_uiHandlesAutohide:null,destructor:function(){this._detachUIHandlesAutohide()},_bindUIAutohide:function(){this.after("visibleChange",
this._afterHostVisibleChangeAutohide);this.after("hideOnChange",this._afterHideOnChange)},_syncUIAutohide:function(){this._uiSetHostVisibleAutohide(this.get("visible"))},_uiSetHostVisibleAutohide:function(b){b?a.later(1,this,"_attachUIHandlesAutohide"):this._detachUIHandlesAutohide()},_attachUIHandlesAutohide:function(){if(!this._uiHandlesAutohide){for(var b=this.get("boundingBox"),c=a.bind(this.hide,this),e=[],d=this.get("hideOn"),g=0,p=void 0,q=void 0,t=void 0;g<d.length;g++)p=d[g].node,q=d[g].eventName,
t=d[g].keyCode,!p&&!t&&q?e.push(b.on(q,c)):p&&!t&&q?e.push(p.on(q,c)):p&&(t&&q)&&e.push(p.on(q,c,t));this._uiHandlesAutohide=e}},_detachUIHandlesAutohide:function(){a.each(this._uiHandlesAutohide,function(a){a.detach()});this._uiHandlesAutohide=null},_afterHostVisibleChangeAutohide:function(a){this._uiSetHostVisibleAutohide(a.newVal)},_afterHideOnChange:function(a){this._detachUIHandlesAutohide();this.get("visible")&&this._attachUIHandlesAutohide()}};a.WidgetAutohide=b},"3.17.2",{requires:["base-build",
"event-key","event-outside","widget"]});
YUI.add("squarespace-dialog-item-push",function(a){a.namespace("Squarespace.DialogFields").ItemPush=a.Base.create("itemPushDialogField",a.Squarespace.DialogField2,[],{initializer:function(a){this._widgets=[]},destructor:function(){a.Array.each(this._widgets,function(d){a.Object.each(d,function(b,c){a.Lang.isValue(b)&&b.destroy()})})},_isPushable:function(d){return a.Squarespace.ConnectedAccountCapabilities.can(d,a.Squarespace.ConnectedAccountCapabilities.PUSH)},_addEmptyMessage:function(){var a=this.get("contentBox");
Static.IN_BACKEND?(a.append('<div class="instructions"><p>You do not have any accounts connected to your site configured for pushing content. Press the button below to connect an account.<p><p><div class="add-account"><a>Connect Account</a></div><p></div>'),a.one(".add-account").on("click",this._onAddAccountClick,this)):a.append('<div class="instructions"><p>You do not have any accounts connected to your site configured for pushing content. Go to your site management page to add an account.</p></div>')},
_onAddAccountClick:function(){var d=(new a.Squarespace.Widgets.Confirmation({showOverlay:!0,"strings.title":"Add Account","strings.message":"All unsaved changes to this item will be lost. Are you sure you want to leave?"})).on("confirm",function(){d.once("hide",function(){this.get("dialog").params.discardChangesConfirmation=!1;this._guideToConnectedAccounts()},this)},this)},_guideToConnectedAccounts:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.getHistory().replace({module:"settings",
"settings-subpanelName":"social-account-settings"});this.get("dialog").close()},show:function(){if(!this._shownOnce){this._shownOnce=!0;var d=this.get("models").filter(this._isPushable);d.length?a.Array.each(d,this._renderAccount,this):this._addEmptyMessage()}},bindUI:function(){this.get("contentBox").delegate("click",this._hidePushedMessage,".already-pushed-msg",this)},_hidePushedMessage:function(d){d=d.target.ancestor(".account",!0);var b=d.one(".sqs-toggle-button");(b=a.Widget.getByNode(b))&&b.set("active",
!0);d.removeClass("pushed")},_renderAccount:function(d){var b=this.get("contentBox").appendChild('<div class="account"></div>'),c=d.get("hash"),e=this.get("pushedServices")[c],g=this.get("pendingPushedServices")[c],f=a.Array.some(this._initialData,function(a){return a.connectedAccountId===d.get("id")&&a.pushEnabled})&&!e&&!(this.get("published")&&g),c=new a.Squarespace.Widgets.ConnectedAccount({model:d,editable:!1});c.render(b);var h=new a.Squarespace.Widgets.ToggleButton;h.after("activeChange",function(){"tumblr"!==
d.get("serviceName")&&b.toggleClass("pushing",h.get("active"))});h.render(b);this.get("published")&&g?(b.addClass("pushed").addClass("pushing"),b.one(".sqs-toggle-button").insert('<div class="pending-push-msg"><div class="title">Content Push Pending</div><div class="msg">This content is being sent to <span class="service-name">'+d.get("serviceName")+"</span>.</div></div>","after")):e&&(b.addClass("pushed").addClass("pushing"),b.one(".sqs-toggle-button").insert('<div class="already-pushed-msg"><div class="title">Content Already Pushed</div><div class="msg">This content has already been sent to <span class="service-name">'+
d.get("serviceName")+"</span>.  Click to re-send.</div></div>","after"));h.set("active",f);e=null;"tumblr"===d.get("serviceName")?b.appendChild('<div class="desc">Content will be pushed to Tumblr in its entirety. No post format is needed.</div>'):(e=b.appendChild('<div class="format" type="text" spellcheck="false"><div class="structured-input"></div></div>'),g=a.Array.find(this._initialData,function(a){return a.connectedAccountId===d.get("id")}),e=new a.Squarespace.Widgets.StructuredInput({render:e.one(".structured-input"),
value:g?g.message:d.get("defaultPushMessage"),variables:{"%a":{title:"Author",tip:"The author of this post."},"%t":{title:"Title",tip:"The title of this post."},"%u":{title:"URL",tip:"The URL to this post."}}}));this._widgets.push({account:c,toggle:h,format:e})}},{CSS_PREFIX:"sqs-dialog-item-push",ATTRS:{data:{getter:function(){return!this._shownOnce?this._initialData||[]:a.Array.map(this._widgets,function(a){var b=a.account.get("model");return{message:a.format&&a.format.get("value"),connectedAccountId:b.get("id"),
pushEnabled:a.toggle.get("active")}})}},pushedServices:{value:{}},pendingPushedServices:{value:{}},models:{valueFn:function(){return new a.Squarespace.Models.ConnectedAccounts}},published:{value:!1}}})},"1.0",{requires:"base squarespace-connected-account-widget squarespace-dialog-field-2 squarespace-toggle squarespace-structured-input squarespace-connected-account-capabilities squarespace-models-connected-accounts squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-block-search",function(a){var d=a.namespace("Squarespace.Block").Search=a.Base.create("block-search",a.Squarespace.Block.ModelSyncBase,[],{destructor:function(){this._searchPreview&&this._searchPreview.destroy()},_renderSuccess:function(b){d.superclass._renderSuccess.call(this,b);b=this.get("contentBox").one(".sqs-search-ui-text-input");a.Lang.isValue(b)&&(this._searchPreview=new a.Squarespace.Widgets.SearchPreview({render:b}))}},{CSS_PREFIX:"sqs-block-search",ATTRS:{editor:{value:a.Squarespace.Block.Editor.Search},
type:{value:a.Squarespace.BlockType.SEARCH}}})},"1.0",{requires:"base model squarespace-enum squarespace-search-preview squarespace-search-page squarespace-block-base-modelsync squarespace-block-search-editor".split(" ")});
YUI.add("squarespace-block-social-account-links-editor",function(a){a.namespace("Squarespace.Block.Editor").SocialAccountLinks=a.Base.create("socialAccountLinksEditor",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.SocialAccountLinks")}},{NS:"blockEditor"})},"1.0",{requires:["base","squarespace-block-social-account-links-model-editor","squarespace-damask-context-globals"]});
YUI.add("squarespace-dialog-create-link",function(a){var d=a.namespace("Squarespace.DialogFields").CreateLink=a.Base.create("createLink",a.Squarespace.DialogField2,[],{initializer:function(){this.get("strings.placeholderText")||this.set("strings.placeholderText","Click to add URL...");this._edited=!1},renderUI:function(){d.superclass.renderUI.call(this);a.Squarespace.ContentStatsCache.isEmpty()?a.Squarespace.ContentStatsCache.load(a.bind(function(){this._verifyLink(a.bind(this._customRender,this))},
this)):this._verifyLink(a.bind(this._customRender,this))},_customRender:function(b){var c=this.get("width");c&&this.get("contentBox").setStyles({width:c});c=this.get("contentBox");this.get("condensed")&&c.addClass("condensed");this.get("strings.title")&&c.append(a.Node.create('<div class="title">'+this.get("strings.title")+"</div>"));this.get("withLinkText")&&(this._linkTextField=new a.Squarespace.DialogFields.Text({name:"text","strings.title":"Link Text",className:"thin",render:c,data:this.get("data.text")}));
this._editingWindow=a.Node.create('<div class="editing-window"></div>');this.get("showPlaceholder")||this._editingWindow.addClass("without-placeholder");c.append(this._editingWindow);this._editingWindowTabs=this._createTabs(b);this._editingWindowTabs.render(this._editingWindow);this.get("showPlaceholder")?(b=this.get("data.url"),this._placeholder=a.Node.create('<div class="placeholder"><div class="link-icon"></div><div class="inner">'+(b?b:this.get("strings.placeholderText"))+"</div></div>"),this._set("errorFlyoutAnchor",
this._placeholder),this._clearButton=a.Node.create('<div class="clear'+(b?"":" hidden")+'"></div>'),this._placeholder.append(this._clearButton),this._editingWindow.insert(this._placeholder,"before"),this._editingWindow.addClass("hidden"),this._editingWindow.setStyle("height",0),this._editingWindow.one(".sqs-tab-view").setStyle("opacity",0)):(this._editingWindow.setStyle("height",this._getOpenWindowHeight()),"external"==this._editingWindowTabs.getActiveChildId()&&this._editingWindow.one(".external-link-tab input").focus(),
this._set("errorFlyoutAnchor",this._editingWindow));this.fire("rendered");this._customBindUI()},_customBindUI:function(){this.get("withLinkText")&&this._linkTextField.after("dataChange",function(a){var c=this.get("data")||{};c.text=a.newVal;this.set("data",c)},this);this.get("showPlaceholder")&&(this._placeholder.on("click",function(a){a.target.hasClass("clear")?this._clear():(a.halt(),this._placeholder.hasClass("open")?this._closeEditingWindow():this._openEditingWindow())},this),this.after("dataChange",
this._setPlaceholderText,this));this._editingWindowTabs.before("tab-switch-requested",function(a){if(this._editingWindowTabs.getActiveChildId()!=a.tabId&&(!this._placeholder||this._placeholder.hasClass("open")))this._editingWindow.one(".sqs-tab-view-children").setStyle("opacity",0),this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop(),a=this._editingWindow.anim({height:this._getOpenWindowHeight(a.tabId)},{duration:0.2,end:function(){this._editingWindow.one(".sqs-tab-view-children").anim({opacity:1},
{duration:0.1}).run();"external"==this._editingWindowTabs.getActiveChildId()&&this._editingWindow.one(".external-link-tab input").focus()},context:this}),a.on("tween",function(){this.fire("animating")},this),a.run()},this);this.get("required")&&this.after("dataChange",function(a){this.hideError()},this)},didDataChange:function(){return this._edited},isEmpty:function(){var a=this.get("data.url");return!a||""===a},_verifyLink:function(b){var c=this._getLinkType();if("external"==c)b();else if("files"==
c){var e=this._getSelectedFile();a.Data.get({url:"/api/commondata/GetAllAttachments",success:a.bind(function(c){var d=!1;a.Array.each(c.attachments,function(a){a.urlId==e&&(d=!0)});d?b():b(!0)},this),failure:a.bind(function(a){b()},this)},this)}else if("content"==c){var d=this._getSelectedContent();if(c=a.Array.find(a.Squarespace.ContentCollectionCache.toArray(),function(a){return a.get("urlId")==d.urlId}))if(d.filter){var f=d.filter,h=!1,c=a.Squarespace.ContentStatsCache.getByCollectionId(c.get("id"));
"category"==f.type?a.Array.each(c.getCategoriesAsStringArray(),function(a){a==f.name&&(h=!0)}):a.Array.each(c.getTagsAsStringArray(),function(a){a==f.name&&(h=!0)});h?b():b(!0)}else b();else b(!0)}},_createTabs:function(b){var c=this._getLinkType(),e=this.get("data.url"),d,f;b&&(c="external");"files"==c?d=this._getSelectedFile():"content"==c&&(f=this._getSelectedContent());var h={external:{label:"External",id:"external",ctor:a.Squarespace.Views.ExternalLinkTab,config:{onDataChange:a.bind(function(b,
c,e){var d=null;a.Lang.isValue(b)&&""!==b&&(d={url:b,newWindow:c,text:this.get("data.text")});this.set("data",d);e&&(this.get("showPlaceholder")&&this._closeEditingWindow(),this.fire("close"));this._edited=!0},this),linkUrl:"external"==c?e:null,newWindow:"external"==c?this.get("data.newWindow"):null,disableNewWindow:this.get("disableNewWindow")}},files:{label:"Files",id:"files",ctor:a.Squarespace.Views.FileManagerTab,config:{onDataChange:a.bind(function(a,b){this.set("data",{url:a?"/s/"+a:null,newWindow:!1,
text:this.get("data.text")});b||(this.get("showPlaceholder")&&this._closeEditingWindow(),this.fire("close"));this._edited=!0},this),selectedFile:"files"==c?d:null}},content:{label:"Content",id:"content",ctor:a.Squarespace.Views.ExistingContentLinkTab,config:{onDataChange:a.bind(function(a){var b="/"+a.urlId;a.filter&&(b=b+"?"+a.filter.type+"="+encodeURIComponent(a.filter.name));this.set("data",{url:b,newWindow:!1,text:this.get("data.text")});this.get("showPlaceholder")&&this._closeEditingWindow();
this.fire("close");this._edited=!0},this),selectedContent:"content"==c?f:null}}};b=this.get("renderTabs");var k=[];a.Object.each(b,function(a,b){a&&k.push(h[b])});return new a.Squarespace.Widgets.TabView({widgets:k,initialTabId:c})},_openEditingWindow:function(){this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop();this._editingWindow.anim({height:this._getOpenWindowHeight()},{duration:0.2,start:function(){this._placeholder.addClass("open");this._editingWindow.removeClass("hidden")},
end:function(){this._editingWindow.one(".sqs-tab-view").anim({opacity:1},{duration:0.1}).run();"external"==this._editingWindowTabs.getActiveChildId()&&this._editingWindow.one(".external-link-tab input").focus()},context:this}).run()},_closeEditingWindow:function(a){this._editingWindow.activeAnim&&this._editingWindow.activeAnim.stop();this._editingWindow.one(".sqs-tab-view").anim({opacity:0},{duration:0.1,start:function(){this._editingWindow.anim({height:0},{duration:0.2,end:function(){this._placeholder.removeClass("open");
this._editingWindow.addClass("hidden");a&&this._editingWindowTabs.switchTabs("external")},context:this}).run();this.get("data.url")&&this._clearButton.removeClass("hidden")},context:this}).run()},_clear:function(){this.set("data.url",null);this._clearButton.addClass("hidden");this._placeholder.hasClass("open")?this._closeEditingWindow(!0):(this._setPlaceholderText(),this._editingWindowTabs.switchTabs("external"));a.Object.each(this._editingWindowTabs.getChildWidgets(),function(a){a.reset()},this)},
_setPlaceholderText:function(){var a=this.get("data.url");if(a&&"http://"===a.substring(0,7)){var c=a.substring(7);if(0<c.length&&7>c.length||"https:/"==c)if(c==="http://".substring(0,c.length)||c==="https://".substring(0,c.length))a=c}a=a?a:this.get("strings.placeholderText");this._placeholder.one(".inner").setHTML(a)},_getLinkType:function(){var a=this.get("data.url");return a?"/"==a.charAt(0)?"/s/"==a.substring(0,3)?"files":"content":"external":"external"},_getSelectedFile:function(){var a=this.get("data.url").split("/");
return a[a.length-1]},_getSelectedContent:function(){var b=this.get("data.url").split("?");selectedContent={urlId:b[0].substring(1)};if(b=b[1])queryParams=a.QueryString.parse(b),queryParams.category?selectedContent.filter={type:"category",name:queryParams.category}:queryParams.tag&&(selectedContent.filter={type:"tag",name:queryParams.tag});return selectedContent},_getOpenWindowHeight:function(a){switch(a||this._editingWindowTabs.getActiveChildId()){case "external":return this.get("disableNewWindow")?
92:116;case "files":return this.get("condensed")?252:318;case "content":return this.get("condensed")?232:318}}},{CSS_PREFIX:"sqs-create-link",ATTRS:{condensed:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},disableNewWindow:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},renderTabs:{value:{external:!0,files:!0,content:!0}},showPlaceholder:{value:!0,validator:a.Squarespace.AttrValidators.isBoolean},withLinkText:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean}}})},
"1.0",{requires:["base","base-build","squarespace-attr-validators","squarespace-dialog","squarespace-dialog-field-2"]});
YUI.add("squarespace-oembed-resolvers",function(a){a.namespace("Squarespace");a.Squarespace.EmbedResolver=a.Base.create("embedResolver",a.Base,[],{canProcess:function(d,b){var c=RegExp(this.get("pattern"),"g");return d.match(c)&&(!a.Lang.isValue(b)||b===this.get("type"))},getProvider:function(){return this.get("serviceName").toLowerCase()},process:function(d,b,c){a.jsonp(this.get("serviceUrl")+"&url="+encodeURIComponent(d),{on:{success:a.bind(function(a,d){a=this._sanitizeResolvedData(a,d);b.onSuccess.apply(c,
arguments)},this),failure:b.onFailure,timeout:b.onTimeout},args:[d],timeout:5E3,context:c})},_sanitizeResolvedData:function(d,b){var c=this.getProvider();if("instagram"===c)"Instagram"===d.title&&(d.title=null),d["instagram-url"]=d.thumbnail_url;else if(!d.html)return null;this._camelCaseDataKeys(d);return a.merge(d,{url:b,html:this._getCleanedHTML(d,b),resolveObject:this.get("objectName"),resolvedBy:c,resolved:!0})},_camelCaseDataKeys:function(d){a.Array.each(["author_name","author_url","provider_name",
"provider_url","thumbnail_url"],function(b){var c=d[b];c&&(d[a.Squarespace.StringUtils.toCamelCase(b)]=c,delete d[b])})},_getCleanedHTML:function(d,b){var c=this.getProvider();if("instagram"===c)return a.Squarespace.UITemplates.render("instagram-oembed.html",d);if("youtube"===c){var c=(b.match(/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)||["",""])[1],e=b.split("?")[1]||"";e&&(e="?"+this._resolveYouTubeParams(e));c&&(d.html=a.Squarespace.UITemplates.render("youtube-oembed.html",
{data:d,src:"//www.youtube.com/embed/"+c+e}))}else"animoto"===c&&(d.html=d.html.replace(/\ssrc=["|'](.*)["|']/,function(a,b){var c=(b.match(/[?|&]r=(\d+p)/)||["",""])[1];return c&&0>b.search(/[?|&]start_res=/)?' src="'+b+"&start_res="+c+'"':a}));return this._augmentEmbed(d.html.trim())},_augmentEmbed:function(d){d=a.Node.create("<div>"+d+"</div>");var b="";d.all("iframe").each(this._augmentIframeEmbed,this);d.all("object").each(this._augmentObjectEmbed,this);b=d.get("innerHTML");d.destroy();return b},
_augmentIframeEmbed:function(d){var b=d.getAttribute("src"),c=b.match(/^[^\?&#]+/)[0],e=(b.match(/#[^\?&]+$/)||[""])[0],b=(b.match(/\?[^#]+/)||[""])[0].split(/[\?|&]/),b=a.Array.filter(b,function(a){return a&&0>a.search(/^wmode=/)});b.push("wmode=opaque");switch(this.getProvider()){case "vimeo":b.push("api=1");break;case "youtube":b.push("enablejsapi=1")}b=c+"?"+b.join("&")+e;d.setAttribute("src",b)},_augmentObjectEmbed:function(d){d.all("embed").each(function(a){a.setAttribute("wmode","opaque")});
d.all("param").each(function(a){"wmode"===a.getAttribute("name")&&a.remove(!0)});d.prepend(a.Node.create('<param name="wmode" value="opaque"/>'))},_resolveYouTubeParams:function(d){d=d.replace(/(^|\&)(?:v=)(?:[^#\&]*)(\&|$)/,function(a,c,e){return c&&e?"&":""});return d=d.replace(/(^|\&)(?:t=)([^#\&]*)/g,function(b,c,e){c=c||"";var d=0;e=e.match(/\d+\D/g);a.Array.each(e,function(a){var b=a.slice(-1);a=parseInt(a,10);switch(b){case "h":d+=3600*a;break;case "m":d+=60*a;break;case "s":d+=a;break;default:console.warn("[embedResolver] parameter `t` contains unknown character")}});
return!a.Lang.isNumber(d)||0===d?b:c+="start="+d})}},{ATTRS:{type:{},serviceName:{value:""},pattern:{value:""},serviceUrl:{value:""},objectName:{value:""}}});a.Squarespace.oEmbedResolvers={twitter:new a.Squarespace.EmbedResolver({serviceName:"Twitter",pattern:"^https?://twitter.com[^ ]*$",serviceUrl:"https://api.twitter.com/1/statuses/oembed.json?callback={callback}",objectName:"Tweet"}),vimeo:new a.Squarespace.EmbedResolver({serviceName:"Vimeo",pattern:"^https?://(?:www\\.)?vimeo.com/",serviceUrl:"https://vimeo.com/api/oembed.json?callback={callback}",
objectName:"Video",type:"video"}),wistia:new a.Squarespace.EmbedResolver({serviceName:"Wistia",pattern:"https?://(.+)?(wistia.com|wi.st)/(medias|embed)/.*",serviceUrl:"https://fast.wistia.com/oembed?callback={callback}",objectName:"Video",type:"video"}),animoto:new a.Squarespace.EmbedResolver({serviceName:"Animoto",pattern:"^https?://(?:www\\.)?animoto.com/play/",serviceUrl:"https://animoto.com/oembeds/create?format=json&ssl=true&callback={callback}",objectName:"Video",type:"video"}),flickr:new a.Squarespace.EmbedResolver({serviceName:"Flickr",
pattern:"^https?://[a-zA-Z\\.]*flickr.com/[^ ]*$",serviceUrl:"https://www.flickr.com/services/oembed?format=json&jsoncallback={callback}",objectName:"Picture"}),instagram:new a.Squarespace.EmbedResolver({serviceName:"Instagram",pattern:"^https?://[a-zA-Z\\.]*instagram.com/p[^ ]*$",serviceUrl:"https://api.embed.ly/1/oembed?format=json&callback={callback}",objectName:"Picture"}),youtube:new a.Squarespace.EmbedResolver({serviceName:"Youtube",pattern:"^https?://[a-zA-Z\\.]*((?:youtube.com/watch)|(?:.be/))[^ ]*$",
serviceUrl:"https://api.embed.ly/1/oembed?format=json&callback={callback}",objectName:"Video",type:"video"}),wikipedia:new a.Squarespace.EmbedResolver({serviceName:"Wikipedia",pattern:"^https?://en.wikipedia.org/wiki/[^ ]*$",serviceUrl:"https://api.embed.ly/1/oembed?format=json&callback={callback}",objectName:"Article"}),slideshare:new a.Squarespace.EmbedResolver({serviceName:"SlideShare",pattern:"^https?://www.slideshare.net[^ ]*$",serviceUrl:"https://www.slideshare.net/api/oembed/2?format=json&callback={callback}",
objectName:"Presentation"}),soundcloud:new a.Squarespace.EmbedResolver({serviceName:"Soundcloud",pattern:"^https?://soundcloud.com[^ ]*$",serviceUrl:"https://soundcloud.com/oembed?format=js&callback={callback}",objectName:"Audio"})}},"1.0",{requires:["base","squarespace-ui-templates","squarespace-flickr-oembed-template","squarespace-instagram-oembed-template","squarespace-youtube-oembed-template"]});
YUI.add("squarespace-block-summary-gallery-model",function(a){a.namespace("Squarespace.ContentModel").SummaryGalleryBlock=a.Base.create("summaryGalleryBlock",a.Squarespace.ContentModel.GalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-enum","squarespace-block-gallery-model"]});
YUI.add("squarespace-management",function(a){var d=a.Base.create("EditModeController",a.Squarespace.SSWidget,[],{initializer:function(){a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CONTENT_MANAGER)&&a.Data.get({url:"/api/template/GetTemplate",data:{templateId:Static.SQUARESPACE_CONTEXT.templateId},success:function(b){var e=Static.SQUARESPACE_CONTEXT.siteLayout=b.siteLayout;delete b.template.navigations;var d=a.namespace("Squarespace.Singletons").Template=new a.Squarespace.Models.Template(b.template);
a.Squarespace.ContentCollectionCache.load(a.bind(function(){d.set("navigations",e);this.set("contextCollection",a.Squarespace.ContentCollectionCache.getById(Static.SQUARESPACE_CONTEXT.collectionId));this.onCollectionDataLoaded()},this))},failure:function(){}},this)},renderUI:function(){this.get("boundingBox").setAttribute("id","sqs-edit-mode-controller");window.SQUARESPACE_LOGIN.isLoggedIn()&&!a.Cookie.get("damask")&&(a.one("html").addClass("squarespace-cameron"),a.one("body").addClass("squarespace-editable"),
this._renderUserBadge(),this._renderTemplatePreviewIndicators(),this._startMemberTutorial(),this.get("boundingBox").addClass("visible"))},_startMemberTutorial:function(){var b=[{title:"Edit Mode",body:"Edit mode lets you make changes to the pages, headers, and footers on your site.",position:"fixed",align:{node:".sqs-chrome-badge-buttons-content",points:[a.WidgetPositionAlign.BR,a.WidgetPositionAlign.TC],offset:[15,10]}},{title:"Style Mode",body:"Style mode lets you make changes to your site's look and feel.",
position:"fixed",align:{node:".sqs-chrome-badge-buttons-style",points:[a.WidgetPositionAlign.BR,a.WidgetPositionAlign.TC],offset:[15,10]}},{title:"Return to Manager",body:"Clicking the gear (or pressing the ESC key) lets you return to your content manager.",position:"fixed",align:{node:".sqs-chrome-badge-buttons-config",points:[a.WidgetPositionAlign.BR,a.WidgetPositionAlign.TC],offset:[15,10]}}],e=0,d,f=a.bind(function(){if(this.inEditMode())this.onceAfter("exit-edit-mode",f);else b.length<e||(d=
new a.Squarespace.Tourtip(b[e]),d.once("hidden",function(){e++;f()}))},this);if(!Static.SQUARESPACE_CONTEXT.authenticatedAccount.tutorialsCompleted||!Static.SQUARESPACE_CONTEXT.authenticatedAccount.tutorialsCompleted["frontend-welcome"])a.Data.post({url:"/api/config/MarkMemberTutorialCompleted",data:{tutorial:"frontend-welcome"}},this),f()},_renderUserBadge:function(){if(a.QueryString&&a.QueryString.parse){var b=a.QueryString.parse(document.location.search.substring(1));if(b.forcePreview&&"true"==
b.forcePreview)return}var b=this.get("memberAccount"),e=this.get("contentBox").appendChild('<div class="sqs-chrome sqs-chrome-badge"></div>'),d=e.appendChild('<div class="sqs-chrome-badge-avatar"></div>'),f=b.get("avatarAssetUrl");a.Lang.isValue(f)&&d.setStyles({backgroundImage:'url("'+f+'")'});f=b.get("externalId");a.Lang.isValue(f)&&(f=f.split("_")[0],f=f.toLowerCase(),d.append('<div class="avatar-network avatar-network-'+f+'"></div>'));d=e.appendChild('<div class="sqs-chrome-badge-about"></div>');
d.append('<div class="sqs-chrome-badge-about-name"><a href="#">'+a.Escape.html(b.get("displayName"))||a.Escape.html(b.get("email"))+"</a></div>");d.append('<div class="sqs-chrome-badge-about-logout"><a href="#">Logout</a></div>');b=e.appendChild('<div class="sqs-chrome-badge-buttons"></div>');this.canEditPage()&&b.append('<a href="#" class="sqs-chrome-badge-buttons-content">Edit Content</a>');Static.SQUARESPACE_CONTEXT.templateTweakable&&a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_SETTINGS_TEMPLATE)&&
b.append('<a href="#" class="sqs-chrome-badge-buttons-style">Edit Styles</a>');a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CONTENT_MANAGER)&&b.append('<a href="#" class="sqs-chrome-badge-buttons-config">Edit Site</a>')},canEditPage:function(){return!Static.SQUARESPACE_CONTEXT.isSystemPage&&a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CONTENT_MANAGER)},bindUI:function(){this._bindSessionLifecycle();this._bindFileDragDrop();
this._bindKeyboardShortcuts();this._bindChromeVisibility();this._bindTooltips();this._bindButtons()},_bindButtons:function(){var b=this.get("contentBox");if(window.SQUARESPACE_LOGIN.isLoggedIn()&&!a.Cookie.get("damask")){b.all(".sqs-chrome-badge-about-name a, .sqs-chrome-badge-avatar").each(function(a){a.on("click",function(a){a.halt();this._configureMemberAccount()},this)},this);b.one(".sqs-chrome-badge-about-logout").on("click",function(b){b.halt();a.Squarespace.Utils.logout()});var e=b.one(".sqs-chrome-badge-buttons-content");
if(e)e.on("click",function(a){a.halt();this._enterEditMode()},this);if(e=b.one(".sqs-chrome-badge-buttons-style"))e.on("click",function(a){a.halt();this._enterStyleMode()},this);if(b=b.one(".sqs-chrome-badge-buttons-config"))b.on("click",function(a){a.halt();this.configureSiteInConfig()},this)}},_bindTooltips:function(){var b=this.get("contentBox");new a.Squarespace.ToolTip({target:b.one(".sqs-chrome-badge-avatar"),title:"Your Account",body:"Click here to manage your Squarespace user account profile."});
new a.Squarespace.ToolTip({target:b.one(".sqs-chrome-badge-buttons-content"),title:"Edit Content",body:"Make changes to the content on your website."});new a.Squarespace.ToolTip({target:b.one(".sqs-chrome-badge-buttons-style"),title:"Change Style",body:"Change the visual style of your site.  Adjust fonts, colors, sizes and more."});new a.Squarespace.ToolTip({target:b.one(".sqs-chrome-badge-buttons-config"),title:"Manage Site",body:"Update your site content, settings and view site statistics."})},
_bindChromeVisibility:function(){var b;a.one(window).on("mouseout",function(){b=a.later(600,this,function(){this.get("boundingBox").removeClass("visible");b=null})},this);a.one(window).on("mouseenter",function(){b&&b.cancel();this.get("boundingBox").addClass("visible")},this)},_bindSessionLifecycle:function(){a.Global.on("squarespace:login",function(){this.syncUI()},this);a.Global.on("squarespace:logout",this.syncUI,this);window.SQUARESPACE_LOGIN.on("login-required",function(){this.account=null;this.reloadOnLogin=
!0;this.syncUI(!0);this.show()});window.SQUARESPACE_LOGIN.on("login",function(){this.reloadOnLogin&&document.location.reload()})},_bindFileDragDrop:function(){function a(b){b.preventDefault();b.stopPropagation();return!1}document.body.addEventListener("dragenter",a,!1);document.body.addEventListener("dragexit",a,!1);document.body.addEventListener("dragover",a,!1);document.body.addEventListener("drop",a,!1)},_bindKeyboardShortcuts:function(){a.one(window).on("keydown",function(b){b.ctrlKey&&(69==b.keyCode?
(b.halt(),a.Squarespace.TweakManager.disable(),this.onEditModeClick(b)):b.ctrlKey&&89==b.keyCode?(b.halt(),a.Squarespace.EditModeManager.disable(),a.Squarespace.TweakManager.toggle()):b.ctrlKey&&77==b.keyCode&&(b.halt(),this.onConfigureClick(b)))},this)},_configureMemberAccount:function(){(new a.Squarespace.Editor.MemberAccount({model:this.get("memberAccount")})).show()},configureSiteInConfig:function(){a.Squarespace.Utils.advancedBrowserCheck()?this.manageSite({module:"content"}):new a.Squarespace.Widgets.Information({"strings.title":"No Browser Support",
"strings.message":"You are not using a supported web browser. Squarespace's management interface currently supports the latest versions of Safari and Chrome and Firefox. Please update your browser to continue."})},manageSite:function(a){a||(a={});var b=this.get("contextCollection");!a.collectionId&&b&&(a.collectionId=b.get("id"));var b=[],d;for(d in a)b.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d]));a="/config/#"+b.join("&");window.top.location.href=a},inEditMode:function(){return a.Lang.isValue(this.activePill)},
_animateToPill:function(b){this.activePill=b;b.render(this.get("contentBox"));b.get("boundingBox").addClass("secondary-pill");this.get("contentBox").append(b.get("boundingBox"));a.later(0,this,function(){this.get("boundingBox").addClass("secondary-pill-visible");this.fire("enter-edit-mode")})},_animatePillDestruction:function(){this.get("boundingBox").removeClass("secondary-pill-visible");var b=this.activePill;a.later(300,this,function(){b.destroy();b=null;this.fire("exit-edit-mode")})},_enterEditMode:function(){this._animateToPill(new a.Squarespace.Frontend.ContentModePill({management:this,
contextCollection:this.get("contextCollection")}));this.persistMode("content")},_enterStyleMode:function(){this._animateToPill(new a.Squarespace.Frontend.StyleModePill({management:this}));this.persistMode("style")},persistMode:function(b){a.Lang.isValue(b)?a.Cookie.set("SQUARESPACE_MODE",b,{path:"/",expires:new Date((new Date).getTime()+36E5)}):a.Cookie.remove("SQUARESPACE_MODE",{path:"/"})},getPersistedMode:function(){return a.Cookie.get("damask")?null:a.Cookie.get("SQUARESPACE_MODE")},exitEditMode:function(){this._animatePillDestruction();
this.persistMode(null)},onCollectionDataLoaded:function(){var b=this.getPersistedMode();"style"==b?this._enterStyleMode():"content"==b&&this._enterEditMode();var e=this.get("contextCollection");if(e)if(b=(e.get("typeLabel")||"Page").capitalize(),Static.SQUARESPACE_CONTEXT.empty)(new a.Squarespace.Widgets.Confirmation({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,className:"alert","strings.confirm":"Add Content","strings.title":"Empty "+b,"strings.message":"You have not added any content to this collection, and so it may not render correctly. Click add content below to add content for this page."})).on("confirm",
function(){this.manageSite({module:"content"})},this);else if(!e.get("enabled"))(new a.Squarespace.Widgets.Confirmation({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,className:"alert","strings.confirm":"Make "+b+" Visible","strings.title":"Disabled "+b,"strings.message":"This page is not enabled, and is not visible to the public."})).on("confirm",function(){a.Data.post({url:"/api/commondata/ToggleCollectionEnabled",data:{collectionId:e.get("id"),enabled:!0}})},this)},_renderTemplatePreviewIndicators:function(){var b=
a.Object.getValue(Static,["SQUARESPACE_CONTEXT","previewTemplateInstallation"]);if(a.Lang.isValue(b)){var e=a.Object.getValue(b,["templateWebsiteTaxonomy","displayName"]);a.Lang.isValue(e)||(e=a.Object.getValue(b,["templateWebsite","siteTitle"]),a.Lang.isValue(e)||(e=a.Object.getValue(b,["templateWebsite","identifier"])));b=window.location.href.split("?");1<b.length&&"preview"==a.QueryString.parse(b[1]).source&&a.Squarespace.Help.showTemplatePreviewWelcome({templateName:e});this.get("boundingBox").addClass("preview-indicators");
b=this.get("contentBox").appendChild('<div id="sqs-template-preview"></div>');b.appendChild('<div class="sqs-template-preview-body"></div>').append('<div class="sqs-template-preview-body-title">Previewing '+e+"</div>");b.appendChild('<div class="sqs-template-preview-buttons"></div>').appendChild('<div class="sqs-template-preview-buttons-manage"><a href="#">Manage Templates</a></div>').one("a").on("click",function(a){a.halt();this.manageSite({module:"settings","settings-subpanelName":"template-settings"})},
this)}}},{CSS_PREFIX:"sqs-edit-mode-controller",ATTRS:{memberAccount:{valueFn:function(){return a.Squarespace.Singletons.AuthenticatedMemberAccount}}}});if(!a.Cookie.get("damask")){var b=a.namespace("Squarespace").Management=new d;a.on("domready",function(){b.render()})}},"1.0",{requires:"node cookie squarespace-common squarespace-ui-base squarespace-util squarespace-login squarespace-search event-mouseenter squarespace-tourtip squarespace-help squarespace-frontend-content-mode squarespace-frontend-style-mode squarespace-frontend-pill-draggability squarespace-widgets-confirmation squarespace-widgets-information".split(" ")});
YUI.add("squarespace-block-calendar",function(a){var d=a.namespace("Squarespace.Block").Calendar=a.Base.create("block-calendar",a.Squarespace.Block.ModelSyncBase,[],{initializer:function(a){this._calendarInstance=!1},renderUI:function(){},bindUI:function(){d.superclass.bindUI.call(this);this.after("layout-rendered",this._renderBlock,this)},destructor:function(){this._calendarInstance&&this._calendarInstance.destroy()},_renderBlock:function(){var b=this.get("model").get("collectionId"),c=a.Squarespace.ContentCollectionCache.getById(b),
e=this.get("contentBox");e.one(".sqs-state-message")&&e.one(".sqs-state-message").remove();this._calendarInstance?this._calendarInstance.set("collectionId",b):b?this._calendarInstance=a.Squarespace.Rendering.renderCalendar(e,c):this._renderCollectionMissing()},_renderCollectionMissing:function(){this.get("contentBox").setHTML('<div class="sqs-state-message">You must select a collection to display.</div>')}},{MODEL:a.Squarespace.ContentModel.CalendarBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.CalendarDialog},
type:{value:a.Squarespace.BlockType.CALENDAR}},CSS_PREFIX:"sqs-block-calendar"})},"1.0",{requires:["base","model","squarespace-calendar-block-renderer","squarespace-block-calendar-editor","squarespace-block-calendar-model"]});
YUI.add("squarespace-block-opentable",function(a){var d=a.namespace("Squarespace.Block").Opentable=a.Base.create("block-opentable",a.Squarespace.Block.ModelSyncBase,[],{_renderSuccess:function(a){d.superclass._renderSuccess.call(this,a);this.get("contentBox").all("script").each(function(a){a.replace('<div class="state-message information"><div class="title">OpenTable</div><div>This block contains embedded code and will only be rendered on the front of your site.</div></div>')})}},{CSS_PREFIX:"sqs-block-opentable",
MODEL:a.Model,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Opentable},type:{value:a.Squarespace.BlockType.OPENTABLE}}})},"1.0",{requires:["base","squarespace-block-base-modelsync","squarespace-block-opentable-editor"]});
YUI.add("squarespace-layout-insert-point-controller",function(a){a.namespace("Squarespace.Layout").InsertPointController=a.Base.create("insertPointController",a.Base,[],{initializer:function(){this._insertPointGroups=[];this._layoutNodesToAlign=[];this._resizeEmitter=new a.Squarespace.ResizeEmitter;this.after("visibleChange",this._afterVisibleChange,this);this.after("enabledChange",this._afterEnabledChange,this)},destructor:function(){this._mousemove&&this._mousemove.detach();this._resizeEmitter.destroy();
this.destroyAllInsertPoints()},registerInsertPoint:function(d,b){if(b){var c=this._findInsertPointGroup(b);a.Lang.isNull(c)&&(c=this._initNewInsertPointGroup(b));c.insertPoints.push(d);this._setInsertPointNodes();c.events.push(d.after("insertPointsChange",this._setInsertPointNodes,this))}else console.log("[IPC] No layout node found."),d.destroy()},deregisterInsertPoint:function(d,b){var c=this._findInsertPointGroup(b);a.Lang.isNull(c)||(c.insertPoints.remove(d),0===c.insertPoints.length&&this._deleteInsertPointGroup(c))},
_findInsertPointGroup:function(d){return a.Array.find(this._insertPointGroups,function(a){return a.layoutNode===d})},_initNewInsertPointGroup:function(a){var b={layoutNode:a,insertPoints:[],events:[]};a.LayoutBuilder&&b.events.push(a.LayoutBuilder.on("widget:contentUpdate",function(){this.alignInsertPoints(a)},this));a.LayoutEditor&&b.events.push(a.LayoutEditor.on("destroy",function(){this.destroyAllInsertPoints(a)},this));this._insertPointGroups.push(b);return b},_deleteInsertPointGroup:function(d){a.Array.each(d.events,
function(a){a.detach()});this._insertPointGroups.remove(d)},destroyAllInsertPoints:function(d){var b=this._insertPointGroups;1<b.length&&a.Lang.isValue(d)&&(b=a.Array.filter(b,function(a){return a.layoutNode===d}));a.Array.each(b,function(b){a.Array.each(b.insertPoints,function(a){a.destroy()});this._deleteInsertPointGroup(b)},this)},alignInsertPoints:function(d,b){a.Lang.isValue(d)&&-1===a.Array.indexOf(this._layoutNodesToAlign,d)&&this._layoutNodesToAlign.push(d);b?this._alignInsertPoints(!0):this._debounceAlignInsertPoints()},
_alignInsertPoints:function(d){if(d||this.get("enabled")){var b=this._insertPointGroups,c=this._layoutNodesToAlign;1<b.length&&c.length&&(b=a.Array.filter(b,function(b){return-1<a.Array.indexOf(c,b.layoutNode)}));a.Array.each(b,function(b){a.Array.each(b.insertPoints,function(a){a.align(d)})},this);this.set("visible",!0);this._layoutNodesToAlign=[]}},_debounceAlignInsertPoints:a.Squarespace.debounce(function(){this._alignInsertPoints()},50,!1,!0),_setInsertPointNodes:function(){this.set("insertPointNodes",
a.all(".sqs-layout-insert-point"))},hide:function(){this.set("visible",!1)},show:function(){this.set("visible",!0);this.alignInsertPoints()},_afterEnabledChange:function(a){a.newVal?this._enable():this._disable()},_afterVisibleChange:function(a){this.toggleVisible(a.newVal)},toggleVisible:function(d){a.one("html").toggleClass("sqs-hide-insert-points",!d)},toggleDisabled:a.Squarespace.debounce(function(a){this._toggleDisabled(a)},30),_toggleDisabled:function(d){d?this.disable():a.all(".sqs-block-editing:not(.sqs-block-html)").size()||
this.enable()},disable:function(){this.setAttrs({visible:!1,enabled:!1})},_disable:function(){this._mousemove&&this._mousemove.detach();this._resizeEmitter.detachAll()},enable:function(){this.set("enabled",!0)},_enable:function(){this.alignInsertPoints();this._mousemove=a.one(a.config.doc).on("mousemove",this._onMouseMove,this);this._resizeEmitter.on("resize:start",this.hide,this);this._resizeEmitter.on("resize:end",this.show,this)},_onMouseMove:function(d){var b=d.pageX,c=d.pageY;a.Lang.isValue(this.get("insertPointNodes"))&&
this.get("insertPointNodes").each(function(a){var d=a.getXY(),f=b-(d[0]+12),d=c-(d[1]+12),f=80>=Math.abs(d)&&"row"===a.getData("ipType")?1:Math.floor(1/(Math.pow(f,2)/Math.pow(80,2)+Math.pow(d,2)/Math.pow(80,2)));f!==a.lastScale&&(a.toggleClass("sqs-fullsize",1<=f),a.lastScale=f)})},openBlockMenu:function(d){var b=a.Squarespace.EditControllerWebApp.getInstance().getInsertMenu(d.editMode,d);b.hide();b.setAttrs(d);b.focus()}},{ATTRS:{enabled:{value:!1},visible:{value:!1},insertPointNodes:{}}});a.namespace("Squarespace.Singletons").InsertPointController=
new a.Squarespace.Layout.InsertPointController},"1.0",{requires:["base","node","event","squarespace-layout-insert-block-menu-web-app","squarespace-debounce"]});
YUI.add("squarespace-image-picker-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["image-picker.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];this.merge(d,a.helpers);return'<div class="header">\n  <div class="instructions"></div>\n  <div class="controls">\n    <div class="cancel"></div>\n    <div class="confirm"></div>\n  </div>\n  <div class="information">\n    <div class="error"></div>\n    <div class="sqs-spin light extra-large"></div>\n  </div>\n  <div class="images"></div>\n  <div class="pagination">\n    <span class="prev"></span>\n    <span class="next"></span>\n  </div>\n  <div class="size-visualizer">\n      <div class="ruler height"></div>\n      <div class="ruler width"></div>\n      <div class="label height"></div>\n      <div class="label width"></div>\n  </div>\n</div>'})})();a.Handlebars.registerPartial("image-picker.html".replace("/",
"."),d.templates["image-picker.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-edit-controller-web-app",function(a){var d=a.namespace("Squarespace").EditControllerWebApp=a.Base.create("editcontroller",a.Squarespace.EditControllerBase,[],{initializer:function(){this._dragSelection=new a.Squarespace.DragSelection({node:"body",enabled:!1});a.on("key",this._onDeleteKeyHandler,a.config.doc,"down:backspace,46",this)},pluginLayoutEditor:function(b,c,e,g){this.disableInsertPoints();var f=d.superclass.pluginLayoutEditor.apply(this,arguments),h=this._getNewDragRegionConfig(b);
a.Lang.isValue(h)&&(this._destroyDragSelection(),this._initializeDragSelection(h));this._maintainDragSelectionRegion(b);this.enableDragSelection();this.enableInsertPoints();return f},enableDragSelection:function(){this._dragSelection.get("enabled")||this._dragSelection.set("enabled",!0)},disableDragSelection:function(){this._dragSelection.get("enabled")&&this._dragSelection.set("enabled",!1)},_getNewDragRegionConfig:function(b){var c=a.one("body"),e=b.ancestor(".sqs-content-manager-base");b=b.ancestor(".sqs-dialog-layout-wrapper-content");
var d=[".sqs-block",".standard-dialog-wrapper"];a.Lang.isValue(e)?c=e:a.Lang.isValue(b)&&(c=b,d=[".sqs-block","textarea","input"]);return c===this._dragSelectionRegionNode?null:{dragRegionNode:c,invalidRegions:d}},_initializeDragSelection:function(a){this._dragSelectionRegionNode=a.dragRegionNode;this._dragSelection.set("invalidRegions",a.invalidRegions);this._dragSelection.set("enabled",!0);this._dragSelectionChangedEvent=this._dragSelection.on(["selection-complete","selection-dragged"],this._dragSelectionChanged,
this)},_maintainDragSelectionRegion:function(b){a.Lang.isValue(this._contentChangedEvents)||(this._contentChangedEvents=[]);this._contentChangedEvents.push(b.LayoutBuilder.after("widget:contentUpdate",a.Squarespace.debounce(function(){this._dragSelection.set("boundingRegion",this._dragSelectionRegionNode.get("region"))},20),this))},_destroyDragSelection:function(){this._dragSelection.set("enabled",!1);a.Lang.isValue(this._dragSelectionChangedEvent)&&this._dragSelectionChangedEvent.detach();a.Lang.isValue(this._contentChangedEvents)&&
a.Array.each(this._contentChangedEvents,function(a){a.detach()})},_dragSelectionChanged:function(b){a.all(".sqs-layout.sqs-editing .sqs-block").each(function(c){var e=a.Widget.getByNode(c);e.get("lockedLayout")||(c.intersect(b.region).inRegion?e.set("selected",1):e.set("selected",0))})},layoutDragStart:function(b){d.superclass.layoutDragStart.apply(this,[b]);a.Squarespace.Singletons.InsertPointController.toggleDisabled(!0)},layoutDragEnd:function(){d.superclass.layoutDragEnd.call(this);a.Squarespace.Singletons.InsertPointController.toggleDisabled(!1)},
_disableEditing:function(){this._destroyBlockMenu();this._destroyInsertPointController();this._destroyDragSelection();d.superclass._disableEditing.call(this)},destroyLayoutEditor:function(){this.disableInsertPoints();d.superclass.destroyLayoutEditor.apply(this,arguments);this._destroyDragSelection();this.enableInsertPoints()},_destroyBlockMenu:function(){a.Squarespace.Singletons.BlockMenu&&a.Squarespace.Singletons.BlockMenu.destroy()},_onDeleteKeyHandler:function(b){function c(a){return".sqs-layout.sqs-editing ."+
a+":not(.sqs-block-locked-layout)"}b.target.ancestor("input, textarea, [contenteditable=true]",!0)||(b.halt(),b=a.all(c("sqs-block-focused")+", "+c("sqs-selected")),0<b.size()&&this._showRemoveBlocksDialog(b))},_showRemoveBlocksDialog:function(b){var c=1<b.size()?"s":"",e=1<b.size()?"these blocks":"this block",d=[];(new a.Squarespace.Widgets.Confirmation({"strings.title":"Remove Block"+c,"strings.message":"Are you sure you wish to delete "+e+"?"})).on("confirm",function(){b.each(function(b){d.push(b.ancestor(".sqs-layout"));
a.Widget.getByNode(b).queueForDestruction()});d=a.Array.unique(d);a.Array.each(d,function(a){a.LayoutEditor.cleanGrid(!0)})})},_destroyInsertPointController:function(){a.Squarespace.Singletons.InsertPointController&&a.Squarespace.Singletons.InsertPointController.destroy()},enableInsertPoints:function(){a.Squarespace.Singletons.InsertPointController&&a.Squarespace.Singletons.InsertPointController.toggleDisabled(!1)},disableInsertPoints:function(){a.Squarespace.Singletons.InsertPointController&&a.Squarespace.Singletons.InsertPointController.toggleDisabled(!0);
this.hideInsertMarker()},alignInsertPoints:function(b,c){a.Squarespace.Singletons.InsertPointController&&a.Squarespace.Singletons.InsertPointController.alignInsertPoints(b,c)},destructor:function(){this._destroyDragSelection();this._dragSelection.destroy()}},{ATTRS:{defaultEditMode:{readOnly:!0,value:a.Squarespace.Layout.EditMode.WEB_APP},renderableBlockSet:{readOnly:!0,value:[{ctor:a.Squarespace.Layout.RenderableBlocksWebApp,editMode:a.Squarespace.Layout.EditMode.WEB_APP},{ctor:a.Squarespace.Layout.RenderableBlocksEmail,
editMode:a.Squarespace.Layout.EditMode.EMAIL}]},insertMenuSet:{readOnly:!0,value:[{ctor:a.Squarespace.Layout.InsertBlockMenuWebApp,editMode:a.Squarespace.Layout.EditMode.WEB_APP},{ctor:a.Squarespace.Layout.InsertBlockMenuEmail,editMode:a.Squarespace.Layout.EditMode.EMAIL}]}}});d.getInstance=function(){var b;return function(){a.Lang.isValue(b)||(b=new d);return b}}()},"1.0",{requires:"base event json-parse node parallel squarespace-edit-controller-base squarespace-layout-editor squarespace-layout-insert-point squarespace-layout-insert-block-menu-web-app squarespace-layout-insert-block-menu-email squarespace-layout-renderable-blocks-web-app squarespace-layout-renderable-blocks-email squarespace-models-content-collection squarespace-models-layout squarespace-models-template squarespace-ui-base squarespace-drag-selection squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-form-pre-submit-topic-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["form-pre-submit-topic.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];this.merge(d,a.helpers);var k;a=this.escapeExpression;return b=""+('<div class="topic-control-bar">\n  <div class="topic-drag-handle-wrapper">\n    <div class="topic-drag-handle"></div>\n  </div>\n\n  <div class="topic-title"></div>\n\n  <div class="topic-controls">\n    <div class="remove-topic">&times;</div>\n    <div class="edit-topic">'+
a((k=(k=b.strings,null==k||!1===k?k:k.editText),"function"===typeof k?k.apply(b):k))+'</div>\n  </div>\n</div>\n\n<div class="topic-children">\n\n  <div class="topic-label"></div>\n\n  <div class="topic-child-controls">\n\n    <div class="topic-child-control-wrapper">\n      <div class="topic-child-control add-sub-topics">Add Sub Topics</div>\n    </div>\n\n    <div class="topic-child-control-wrapper">\n      <div class="topic-child-control add-content">Add Content</div>\n    </div>\n\n  </div>\n\n  <div class="topic-sub-topics"></div>\n\n  <div class="topic-content"></div>\n</div>')})})();
a.Handlebars.registerPartial("form-pre-submit-topic.html".replace("/","."),d.templates["form-pre-submit-topic.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-audio-player",function(a){var d=function(){},b=a.namespace("Squarespace.Widgets").AudioPlayer=a.Base.create("audioPlayer",a.Squarespace.Widgets.SSWidget,[],{initializer:function(b){b=this.get("render");a.Lang.isBoolean(b)?b=null:a.Lang.isString(b)&&(b=a.one(b));b&&(b._audioPlayer&&b._audioPlayer.destroy(),b._audioPlayer=this,a.Object.each(b.getData(),function(a,b){a&&this.set(b,a)},this));a.use("thirdparty-soundmanager2",d)},destructor:function(){this._sound&&(this.stop(),this._sound.destruct())},
render:function(){var c=arguments;a.use("thirdparty-soundmanager2",a.bind(function(a){this._soundManager=soundManager;b.superclass.render.apply(this,c)},this))},renderUI:function(){b.superclass.renderUI.apply(this,arguments);var c=this.get("boundingBox"),e=c.one(".placeholder"),d=this.get("title"),f=this.get("author");d&&f?e.setContent(a.Node.create('<div class="wrapper"><div class="audio-author">'+f+'</div><div class="audio-title">'+d+"</div></div>")):d?e.setContent(a.Node.create('<div class="wrapper"><div class="audio-title">'+
d+"</div></div>")):e.setContent(a.Node.create('<div class="wrapper">'+this.get("strings.placeholder")+"</div>"));a.Squarespace.Utils.isBetaFeatureEnabled()&&"true"===this.get("show-download")&&(e='<div class="download"><a href="'+a.Squarespace.UrlUtils.addQueryParam(this.get("url"),"download","true")+'" target="_blank">Download</a></div>',this.get("contentBox").append(e),c.addClass("download"));c.one(".progress-inner").setStyle("width","0px");e=this._volumeNode=c.one(".volume");if(!e)throw this.name+
": No div.volume in template.";for(d=this.get("volumeLevels");0<d;d--)e.prepend('<div class="bar level-"'+d+'" data-volume-level="'+d+'"></div>');c.one(".duration").setContent(this.get("strings.durationPlaceHolder"))},bindUI:function(){var b=this.get("id");this.get("boundingBox").on(b+"|click",this._onClick,this);this.after(b+"|volumeChange",function(a){this._setVolume(a.newVal)},this);this.after(b+"|playStateChange",this._uiUpdateWrapperClass,this);this.after(b+"|readyStateChange",this._afterReadyStateChange,
this);this.after(b+"|disabledChange",function(a){a.newVal&&this.stop()},this);a.on(b+"|audioPlayer:stopAll",function(b){var c=b?b.container:null;c&&a.Lang.isString(c)&&(c=a.one(c));(!b||!b.hasOwnProperty("container")||c instanceof a.Node&&c.contains(this.get("boundingBox")))&&this.stop()},this);this.get("boundingBox").plug(a.Squarespace.NodeDestroyNotifier,{onDestroy:this.destroy,context:this})},syncUI:function(){this._uiUpdateWrapperClass();this._uiUpdateVolumeLevel();var a=this.get("boundingBox");
a.toggleClass("tiny",300>a.get("offsetWidth"))},play:function(){this._sound||this._initSoundManagerSound();this._sound&&(this._sound.paused?this._sound.resume():this._sound.play())},pause:function(){this._sound&&this._sound.pause()},stop:function(){var a=this.get("playState"),b=this.getProperty("PLAY_STATES");a===b.PLAYING&&this._sound&&this._sound.stop()},seek:function(a){100<a||0>a?console.warn(this.name+": seek() - Percentage between 0-100 required."):(this._sound||this._initSoundManagerSound(),
this.pause(),this._sound.setPosition(this.get("trueDuration")*(a/100)),this.play())},setVolume:function(a){this.set("volume",a)},_checkSoundManagerStatus:function(){var a=this._soundManager,b=this.getProperty("READY_STATES");if(a.enabled)return this._set("readyState",b.INITIALIZED),!0;a.didFlashBlock?this._set("readyState",b.FLASH_BLOCKED):this._set("readyState",b.SECURITY_ERROR);return!1},_setVolume:function(a){this._sound&&this._sound.setVolume(a);this._set("volume",a);this._uiUpdateVolumeLevel()},
_setVolumeLevel:function(a){this._setVolume(Math.round(100*(a/this.get("volumeLevels"))))},_initSoundManagerSound:function(){if(!1===this._checkSoundManagerStatus())return!1;if(!this._sound){var b=this.get("boundingBox"),e=this.get("url");b.addClass("loading");if(!e){this._showError("No URL provided.");return}0<e.indexOf(Static.SQUARESPACE_CONTEXT.appDomain)&&(e=e.replace(/^(http:\/\/|https:\/\/|\/\/)/i,window.location.protocol+"//"));this._sound=this._soundManager.createSound({id:"squarespaceTrack-"+
this.get("id"),url:e,volume:this.get("volume"),autoPlay:!1,onplay:a.bind(this._onPlay,this),onpause:a.bind(this._onPause,this),onresume:a.bind(this._onPlay,this),onstop:a.bind(this._onStop,this),onfinish:a.bind(this._onStop,this),whileplaying:a.bind(this._onWhilePlaying,this),onload:a.bind(this._onLoad,this),ondataerror:a.bind(this._onDataError,this)});return!!this._sound}return!1},_uiUpdateVolumeLevel:function(){var a=this._volumeNode.get("children"),b=this.get("volumeLevels"),d=this.get("volume"),
f=Math.round(d/100*b);a.each(function(a){parseInt(a.getAttribute("data-volume-level"),10)<=f?a.addClass("active"):a.removeClass("active")},this)},_uiUpdateWrapperClass:function(){var a=this.getProperty("READY_STATES"),b=this.getProperty("PLAY_STATES"),d=this.get("boundingBox"),f=d.getAttribute("class").split(" "),h;for(h in b)f.remove("play-state-"+b[h]);for(h in a)f.remove("ready-state-"+a[h]);d.addClass("ready-state-"+this.get("readyState"));d.setAttribute("class",f.join(" ")).addClass("play-state-"+
this.get("playState")).addClass("ready-state-"+this.get("readyState"))},_onClick:function(b){if(a.UA.ios)window.location.href=this.get("url");else if(!b.target.ancestor().hasClass("download")&&(b.halt(),b.stopImmediatePropagation(),!this.get("disabled")&&!b.target.hasClass("duration")))if(b.target.ancestor(".volume"))this._setVolumeLevel(parseInt(b.target.getAttribute("data-volume-level"),10));else if(b.target.ancestor(".placeholder",!0))this.play();else{if(b.target.ancestor(".controls",!0)){b=this.get("playState");
var e=this.getProperty("PLAY_STATES");switch(b){case e.PLAYING:this.pause();return;case e.PAUSED:case e.STOPPED:this.play();return;default:console.warn(this.name+": Wait, what? How did you get here? Case was ",b);return}}e=this.get("boundingBox").one(".progress").get("region");b.pageX>=e.left&&b.pageX<=e.right&&this.seek(100*((b.pageX-e.left)/e.width))}},_afterReadyStateChange:function(a){a=this.getProperty("READY_STATES");var b=this.get("readyState"),d=this.get("strings"),f=!1;switch(b){case a.INITIALIZED:this.enable();
break;case a.FLASH_BLOCKED:f=d.soundManagerFlashFail;break;case a.SECURITY_ERROR:f=d.soundManagerSecurityFail;this._reportAudioError(a.SECURITY_ERROR);break;case a.SOUND_LOAD_FAILED:f=d.soundManagerURLFail;this._reportAudioError(a.SOUND_LOAD_FAILED);break;case a.SOUND_LOADED:break;default:console.warn(this.name+": Invalid ready state ("+b+").")}f&&(console.warn("AUDIO ERROR: "+f),this._showError(f),this.disable());this._uiUpdateWrapperClass()},_reportAudioError:function(b){try{var e=this.get("url");
0<e.indexOf("static.squarespace.com")&&a.Squarespace.Analytics.trackInternal("system_audio_play_error",{readyState:this.get("readyState"),url:e,durationEst:this._sound.durationEstimate,html5:this._sound.isHTML5,loaded:this._sound.loaded,position:this._sound.position})}catch(d){}},_getPlaytimeString:function(){if(!this._sound)return this.get("strings.durationPlaceHolder");var a="0:00",b="0:00",a=this._getMinSecString(this.get("trueDuration"));this._sound.position&&(b=this._getMinSecString(this._sound.position));
return b+" / "+a},_getMinSecString:function(b){return a.Squarespace.DateUtils.humanizeDuration(b)},_showError:function(a){this.get("boundingBox").addClass("error");this.get("boundingBox").one(".placeholder").setContent("Error: "+a)},_onWhilePlaying:function(){if(!this.get("destroyed")){var a=this.get("boundingBox");a.one(".duration").setContent(this._getPlaytimeString());if(this._sound.loaded&&this._sound.duration){var b=this.getProperty("READY_STATES");this.get("readyState")!==b.SOUND_LOADED&&this._set("readyState",
b.SOUND_LOADED);var b=a.one(".progress-inner"),d=100*(this._sound.position/this.get("trueDuration"));a.removeClass("loading");b&&b.setStyle("width",d+"%")}}},_onPlay:function(){this._loadFailTimer&&this._loadFailTimer.cancel();this._set("playState",a.Squarespace.Widgets.AudioPlayer.PLAY_STATES.PLAYING)},_onStop:function(){this._set("playState",this.getProperty("PLAY_STATES").STOPPED)},_onPause:function(){this._set("playState",this.getProperty("PLAY_STATES").PAUSED)},_onDataError:function(){this.stop();
this._set("playState",this.getProperty("PLAY_STATES").STOPPED)},_onLoad:function(b){b||(this._loadFailTimer=a.later(1E4,this,function(){this.stop();this._set("readyState",this.getProperty("READY_STATES").SOUND_LOAD_FAILED)}))}},{CSS_PREFIX:"sqs-audio-player",PLAY_STATES:{PLAYING:"playing",PAUSED:"paused",STOPPED:"stopped"},READY_STATES:{INITIALIZED:"initialized",FLASH_BLOCKED:"flash-blocked",SECURITY_ERROR:"security-error",SOUND_LOAD_FAILED:"sound-load-failed",SOUND_LOADED:"sound-loaded"},TEMPLATE:'<div class="controls"></div><div class="placeholder"></div><div class="progress"><div class="progress-inner"><div class="scrubber"></div></div></div><div class="duration"></div><div class="volume"></div>',
ATTRS:{strings:{value:{placeholder:"Click to play...",durationPlaceHolder:"0:00 / 0:00",loadFail:"Unable to load sound at the URL",soundManagerFlashFail:"Sorry, could not load because flash is blocked.",soundManagerSecurityFail:"Sorry, there was a JavaScript security error.",soundManagerURLFail:"Unable to access audio stream."}},trueDuration:{getter:function(){var b=this.get("duration-in-ms");return a.Lang.isString(b)&&""!==b?b:this._sound.duration}},playState:{lazyAdd:!1,valueFn:function(){return this.getProperty("PLAY_STATES").STOPPED},
readOnly:!0},readyState:{lazyAdd:!1,valueFn:function(){return this.getProperty("READY_STATES").INITIALIZED},readOnly:!0},url:{value:null},volume:{validator:function(a){(0>a||100<a)&&console.warn(this.name+": Volume must be between 0 and 100, volume remains unchanged.");return!0},value:66},volumeLevels:{value:6,writeOnce:"initOnly"},stopOthersOnPlay:{value:!0},render:{value:!0}}});a.config.win.Squarespace.onInitialize(a,function(){soundManager.enabled||soundManager.reboot();a.all(".sqs-audio-embed").each(function(b){if(!a.Widget.getByNode(b.one("."+
a.Squarespace.Widgets.AudioPlayer.CSS_PREFIX)))switch(a.Object.getValue(b.getData(),"design-style")||"classic"){case "minimal":new a.Squarespace.Widgets.AudioPlayerMinimal({render:b});break;default:new a.Squarespace.Widgets.AudioPlayer({render:b})}})})},"1.0",{requires:"node event squarespace-date-utils squarespace-dombuilder squarespace-ss-widget thirdparty-soundmanager2 squarespace-album-player squarespace-url-utils squarespace-widgets-audio-player".split(" ")});
YUI.add("squarespace-block-button-editor-email",function(a){a.namespace("Squarespace.Block.Editor").ButtonEmail=a.Base.create("button-block-editor-dialog",a.Squarespace.Block.Editor.Button,[],{initializer:function(){this.get("host").set("floatable",!1)}},{NS:"blockEditor",ATTRS:{blockName:{value:"Button"},minHSize:{value:2}}})},"1.0",{requires:["squarespace-block-button-editor"]});
YUI.add("squarespace-block-social-account-links-model",function(a){a.namespace("Squarespace.ContentModel").SocialAccountLinksBlock=a.Base.create("SocialAccountLinksBlock",a.Model,[],{},{ATTRS:{iconStyle:{value:"round"},iconSize:{value:"default"},iconAlignment:{value:"left"},iconColor:{value:"black"}}})},"1.0",{requires:["base","model"]});
YUI.add("squarespace-content-item-types-audio",function(a){var d=a.namespace("Squarespace.ContentItemEditor").Audio=a.Base.create("AudioContentItemEditor",a.Squarespace.ContentItemEditor.Base,[],{_dialogOnReady:function(){d.superclass._dialogOnReady.call(this);var a=this.get("dialog").getField("audioTrack");a.on("dataChange",function(a){a.newVal&&this._bindListenersToAudioItem(a.newVal)},this);this._bindListenersToAudioItem(a.get("data"));this._bindFileUploadBehaviors("audioTrack")},_bindListenersToAudioItem:function(a){var c=
this.get("dialog");a.on("titleChange",function(a){var b=c.getField("title");b&&""===b.get("data").trim()&&b.set("data",a.newVal)},this);a.get("structuredContent").on("artistNameChange",function(a){var b=c.getField("artistName");b&&""===b.get("data").trim()?b.set("data",a.newVal):b||console.warn("Could not set artistName field, tried to set new data `"+a.newVal+"`.")},this)},getDialogData:function(){var a=d.superclass.getDialogData.call(this);a.audioTrack=this.get("model");a.artistName=a.structuredContent.artistName;
return a},sanitizeDialogData:function(b){var c=d.superclass.sanitizeDialogData.call(this,b);a.Array.each("systemDataId systemDataOrigin mediaProcessingState systemDataSourceType systemDataVariants filename".split(" "),function(a){c[a]=c.audioTrack?c.audioTrack.get(a):null});b={};c.audioTrack&&(b=c.audioTrack.get("structuredContent").toJSON());c.structuredContent=a.merge(b,{artistName:c.artistName});delete c.audioTrack;delete c.mediaProcessingState;return c}},{ATTRS:{editorConfiguration:{value:{title:"Edit {presentationName}",
width:800,height:450,overlay:0.5,tabs:[{$include:["tabs.primary.base","tabs.primary.audio"]},{$include:"tabs.options.audio"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}})},"1.0",{requires:["squarespace-content-item-types-base"]});
YUI.add("squarespace-plugin-node-overlay",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.NodeOverlay=a.Base.create("NodeOverlay",a.Plugin.Base,[],{initializer:function(){this.get("host").addClass("sqs-node-overlay-host");this.get("host").append(this._getOverlayNode());this._syncOverlayNode()},_getOverlayNode:function(){this._overlayNode||(this._overlayNode=a.Node.create(this.constructor.TEMPLATE));return this._overlayNode},_syncOverlayNode:function(){var d=this._getOverlayNode();
d.one(".title").setContent(this.get("strings.title"));d.one(".message").setContent(this.get("strings.message"));var b=d.one(".buttons");b.empty(!0);a.Array.each(this.get("buttons"),function(c){new a.Squarespace.Widgets.Button(a.merge(c,{render:b}))})},destructor:function(){this.get("host").removeClass("sqs-node-overlay-host")}},{TEMPLATE:'<div class="sqs-node-overlay"><div class="title"></div><div class="message"></div><div class="buttons"></div></div>',NS:"nodeOverlay",ATTRS:{strings:{value:{title:"Node Overlay Title",
message:"Node Overlay Message"}},buttons:{value:[{"strings.text":"Hello, World!"}]}}})},"1.0",{requires:["plugin","base"]});YUI.add("squarespace-layout-drop",function(a){a.namespace("Squarespace.Layout").Drop=a.Base.create("LayoutDrop",a.DD.Drop,[],{initializer:function(){a.DD.DDM.activeDrag&&this._activateShim()}},{ATTRS:{lockScroll:{value:!1}}})},"1.0",{requires:["base","dd-drop"]});
YUI.add("squarespace-ui-overlay",function(a){a.namespace("Squarespace").OverlayManager=Class.create({initialize:function(d){this.console=new a.Squarespace.Debugger({name:"OverlayManager",uid:!0,output:this.debug});this.base=d.base||a.one("html");this.body=this.base.one("body");this.overlays=[];this.events=[];this.events.push(a.one(window).on("resize",this.syncPositions,this));this.events.push(a.one(window).on("scroll",this.syncPositions,this));this.syncTimer=a.later(500,this,this.syncPositions,null,
!0);this._enabled=!0},destroy:function(){this.syncTimer.cancel();for(var a=0;a<this.events.length;a++)this.events[a].detach();for(a=0;a<this.overlays.length;a++)this.overlays[a].destroy();this.overlaysContainer&&this.overlaysContainer.remove();this._enabled=!1},addOverlay:function(d){0===this.overlays.length&&(this.overlaysContainer=a.Node.create('<div class="sqs-overlays-container"></div>'),this.base.append(this.overlaysContainer));d.body=this.body||a.one("body");d=new a.Squarespace.Overlay(d,this);
this.overlays.push(d);return d},removeOverlay:function(a){this.overlays.remove(a)},syncPositions:function(){if(this._enabled&&this.overlaysContainer){this.console.log("syncPositions",this,this.overlays);this.maxWidth=parseInt(this.overlaysContainer.getStyle("width"),10);this.overlays.forEach(function(b,c){a.Lang.isValue(b.node.getDOMNode())&&a.bind(b._getDimensions(),b)});this.overlays.forEach(function(b){a.Lang.isValue(b.node.getDOMNode())&&a.bind(b._setDimensions(),b)});this.overlaysContainer.setStyle("height",
parseInt(this.base.getStyle("height"),10)+1);this.overlaysContainer.setStyle("minHeight",0);var d=Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight));this.overlaysContainer.setStyle("minHeight",d)}},deselectAll:function(){this.overlays.forEach(function(a){a.deselect()},this)},hideAll:function(a){this.overlays.forEach(function(b){b.hide(a);
a&&b.deselect()},this)},unhideAll:function(a){this.overlays.forEach(function(b){b.show(a)},this)},disable:function(a){this.console.log("disable",this);for(var b=0;b<this.overlays.length;b++)this.overlays[b].disable(a);this.overlaysContainer&&this.overlaysContainer.hide();this._enabled=!1},enable:function(a){this.console.log("enable",this);this.overlaysContainer&&this.overlaysContainer.show();for(var b=0;b<this.overlays.length;b++)this.overlays[b].enable(!1);this._enabled=!0;a&&this.syncPositions()},
isEnabled:function(){return this._enabled}});a.namespace("Squarespace").Overlay=Class.extend(a.Squarespace.Gizmo,{_name:"Overlay",initialize:function(d,b){this.m=b;this.console=new a.Squarespace.Debugger({name:"Overlay",uid:!0,output:this.m.debug});this.console.log("initializing an overlay:",this);this.body=d.body;this.node=d.node;this.property=d.property?d.property:"width";this.controls=d.controls;this.size=d.size;this.hOffset=d.hOffset?d.hOffset:0;this.marginTrick=d.marginTrick?d.marginTrick:!1;
this.position={t:null,l:null,w:null,h:null};this.events=[];this._buildUI();this.enable()},enable:function(a){this.container.setStyle("display",null);this._enabled=!0;a&&this.syncPosition()},disable:function(a){this.hide(!0);a&&this.container.setStyle("display","none");this._enabled=!1},hide:function(a){a&&this.container.removeClass("sqs-overlay-show");this.container.addClass("sqs-overlay-hide")},show:function(a){this._enabled&&(a&&this.container.addClass("sqs-overlay-show"),this.container.removeClass("sqs-overlay-hide"))},
select:function(){this.container.addClass("sqs-overlay-selected")},deselect:function(){this.container.removeClass("sqs-overlay-selected")},destroy:function(){this.scrollEvent&&this.scrollEvent.detach();this.events.forEach(function(a){a.detach()},this);this.controls.forEach(function(a){a.destroy&&a.destroy()},this);this.m.removeOverlay(this);this.container.remove()},_buildUI:function(){var d=0,b=this.container=a.Node.create('<div class="sqs-overlay-container"></div>');b.setData("overlay",this);this.controls&&
this.controls.forEach(function(a){b.append(a._node)},this);d=this.node.getComputedStyle("zIndex");d=parseInt(d,10)||0;d+=2*this.node.ancestors().size();d=15E3+d;d="width"===this.property?d:d+1;b.setStyle("zIndex",d);this.m.overlaysContainer.append(b);this.syncPosition()},syncPosition:function(){this._enabled&&(this.console.log("syncPosition",this),this._getDimensions(),this._setDimensions(),this.node||this.destroy())},_getDimensions:function(){if(this._enabled){this.console.log("_getDimensions:",
this);var a,b,c,e,g,f,h=this.node;this.position.tOld=this.position.t;this.position.lOld=this.position.l;this.position.wOld=this.position.w;this.position.hOld=this.position.h;a=this.node.get("region");b=a.top;c=a.left;e=a.width-1;g=a.height-1;this._checkFixed();f=this.body;var k=f.get("region");switch(f.getStyle("position")){case "relative":c-=k.left}f=0;this.marginTrick&&(k=parseInt(h.getStyle("marginBottom"),10),f=0>k?f+Math.abs(k):f,this.node.all("> div:not(.map-block), article").each(calcOffset,
this));switch(this.property){case "element":b=a.top-parseInt(h.getStyle("paddingTop"),10);c=a.left-parseInt(h.getStyle("paddingLeft"),10);e=e+parseInt(h.getStyle("paddingLeft"),10)+parseInt(h.getStyle("paddingRight"),10);g=g+parseInt(h.getStyle("paddingTop"),10)+parseInt(h.getStyle("paddingBottom"),10);break;case "margin-top":b=a.top-parseInt(h.getStyle("marginTop"),10);e=a.right-a.left-1;g=this.size?this.size:a.top-b;break;case "margin-bottom":b=a.bottom-f-1;e=a.right-a.left-1;g=this.size?this.size:
parseInt(h.getStyle("marginBottom"),10);break;case "margin-left":e=(this.size?this.size:parseInt(h.getStyle("marginLeft"),10))-1;c=a.left-e;break;case "margin-right":c=a.right-1;e=this.size?this.size:parseInt(h.getStyle("marginRight"),10);break;case "padding-top":g=(this.size?this.size:parseInt(h.getStyle("paddingTop"),10))-1;break;case "padding-bottom":g=(this.size?this.size:parseInt(h.getStyle("paddingBottom"),10))-1;b=a.bottom-g-1;break;case "padding-left":e=(this.size?this.size:parseInt(h.getStyle("paddingLeft"),
10))-1;break;case "padding-right":e=(this.size?this.size:parseInt(h.getStyle("paddingRight"),10))-1;c=a.right-e-1;break;case "height":g=parseInt(g,10)+f;break;default:e=parseInt(e,10)}e=Math.max(0,e-1);g=Math.max(0,g-1);this.position.t=b;this.position.l=c;this.position.w=e;this.position.h=g}},_checkFixed:function(){if("fixed"===this.node.getStyle("position"))return this.fixedParent=this.node,!0;this.node.ancestors().some(function(a){if("fixed"===a.getStyle("position"))return this.fixedParent=a,!0;
this.fixedParent=void 0},this)},_setDimensions:function(){this._enabled&&!(this.position.t===this.position.tOld&&this.position.l===this.position.lOld&&this.position.w===this.position.wOld&&this.position.h===this.position.hOld)&&(this.console.log("_setDimensions:",this),0===this.position.h||0===this.position.w?this.container.setStyle("display","none"):this.container.setStyle("display",null),this.container.setStyles({top:this.position.t,left:this.position.l,width:this.position.w,height:this.position.h}))}})},
"1.1",{requires:["node","squarespace-ui-base"]});
YUI.add("squarespace-dialog-toggle",function(a){var d=a.namespace("Squarespace.DialogFields").Toggle=a.Base.create("toggleFieldDialog",a.Squarespace.DialogField2,[a.WidgetParent],{initializer:function(b){this.get("data");this._toggleButton=this.add({childType:a.Squarespace.Widgets.ToggleButton,active:this.get("data")}).item(0);this._toggleButton.plug(a.Squarespace.ToggleDrag)},bindUI:function(){d.superclass.bindUI.call(this);this._toggleButton.after("activeChange",this._syncData,this)},syncUI:function(){this._toggleButton.set("active",
this.get("data"))},_syncData:function(a){this.set("data",a.newVal)}},{CSS_PREFIX:"sqs-toggle",TEMPLATE:'<div class="toggle"> </div>',ATTRS:{active:{},data:{}}})},"1.0.0",{requires:["base","node","squarespace-toggle","squarespace-dialog-field-2"]});
YUI.add("squarespace-block-button-editor",function(a){a.namespace("Squarespace.Block.Editor").Button=a.Base.create("button-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Button")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Button"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Button=a.Base.create("block-button-editor",a.Squarespace.ModelEditorDialog,[],{getDialogData:function(){var b=
this.get("model").toJSON(),c=b.buttonLink;a.Lang.isString(c)&&(b.clickThrough={url:c,newWindow:b.newWindow});return b},sanitizeDialogData:function(a){a.clickThrough&&a.clickThrough.url?(a.buttonLink=a.clickThrough.url,a.newWindow=a.clickThrough.newWindow):(a.buttonLink="",a.newWindow=!1);return{buttonText:a.buttonText,buttonLink:a.buttonLink,newWindow:a.newWindow,buttonAlignment:a.buttonAlignment,buttonSize:a.buttonSize}}},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={name:"editButtonBlock",
width:335,height:400,discardChangesConfirmation:!1,closeOthers:!1,draggable:!0,flyoutPointerDirection:"hidden",style:"flyout",initialDataByReference:!0,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Button",icon:"/universal/images-v6/icons/icon-button-16-light.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.HTML,config:{className:"description",content:"The size and layout of your button can be configured here. Additional style options, including color and shape, are available within the Style Editor."}},
{ctor:a.Squarespace.DialogFields.Text,config:{name:"buttonText","strings.title":"Text",className:"thin dark"}},{ctor:a.Squarespace.DialogFields.CreateLink,config:{name:"clickThrough","strings.title":"Clickthrough URL",condensed:!0}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"buttonSize","strings.title":"Size",className:"thin dark",defaultValue:"medium",options:[{value:"small",label:"Small"},{value:"medium",label:"Medium"},{value:"large",label:"Large"}]}},{ctor:a.Squarespace.DialogFields.Select,
config:{name:"buttonAlignment","strings.title":"Alignment",className:"thin dark",defaultValue:"center",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]}}]}]}},"1.0",{requires:"base squarespace-block-editor-dialog squarespace-damask-context-globals squarespace-dialog-create-link squarespace-dialog-html squarespace-dialog-select squarespace-dialog-text squarespace-model-editor".split(" ")});
YUI.add("squarespace-dialog-state-option",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.StateOption=a.Base.create("StateOption",a.Squarespace.DialogField2,[],{intializer:function(){this.publish("stateSelected")},renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("contentBox"),c=this.get("data");a.one(".title").setContent(c.title);a.one(".description").setContent(c.optionDesc)},bindUI:function(){d.superclass.bindUI.call(this);this.get("boundingBox").on("click",
function(a){this.set("isSelected",!0)},this);this.after("isSelectedChange",this._syncClass,this)},_syncClass:function(a){this.get("boundingBox").toggleClass(this.getClassName("selected"),!!a.newVal);a.newVal&&this.fire("stateSelected")},didDataChange:function(){return objEqual(this.get("data"),this._initialData)}},{CSS_PREFIX:"sqs-state-option",TEMPLATE:'<div class="sqs-state-option-wrapper"><div class="title">{title}</div><div class="description">{optionDesc}</div></div>',ATTRS:{readOnly:{value:!0},
data:{value:null},isSelected:{value:!1}}})},"1.0",{requires:["base","base-build","squarespace-dialog-fields","squarespace-dialog-field-2"]});
YUI.add("text-accentfold",function(a,d){var b=a.Array,c=a.Text,e=c.Data.AccentFold,g={canFold:function(a){for(var b in e)if(e.hasOwnProperty(b)&&-1!==a.search(e[b]))return!0;return!1},compare:function(a,b,c){a=g.fold(a);b=g.fold(b);return c?!!c(a,b):a===b},filter:function(a,c){return b.filter(a,function(a){return c(g.fold(a))})},fold:function(c){if(a.Lang.isArray(c))return b.map(c,g.fold);c=c.toLowerCase();a.Object.each(e,function(a,b){c=c.replace(a,b)});return c}};c.AccentFold=g},"3.17.2",{requires:["array-extras",
"text-data-accentfold"]});
YUI.add("squarespace-content-item-types-text",function(a){a.namespace("Squarespace.ContentItemEditor");var d=a.namespace("Squarespace.ContentItemEditor").Text=a.Base.create("TextContentItemEditor",a.Squarespace.ContentItemEditor.Base,[],{_dialogOnReady:function(){d.superclass._dialogOnReady.apply(this,arguments);this.get("model").get("autoSaved")&&this._bindTitleToPostUrl()},_bindTitleToPostUrl:function(){var b=this.get("dialog"),c=b.getField("title"),e=b.getField("urlId");c&&e&&(c.on("dataChange",
function(b){var c=e.get("data").split("/");c[c.length-1]=a.Squarespace.Utils.createUrlWithSlash(b.newVal);e.set("data",c.join("/"))},this),b.once(["close","dismiss"],function(a){this.get("model").set("autoSaved",!1)},this))},getPresentationName:function(){return"Post"},_getTemplateContext:function(){var a=d.superclass._getTemplateContext.call(this);a.enableFeatured=!0;a.enablePassthrough=!0;a.enableExcerpt=!0;return a}},{ATTRS:{editorConfiguration:{value:{title:"Edit {presentationName}",width:750,
name:"text-post-editor",overlay:0.5,verticalHeight:"full",initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.text"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-content-item-types-post-editors"]});
YUI.add("squarespace-models-connected-account",function(a){a.namespace("Squarespace.Models");var d=a.Base.create("ConnectedAccount",a.Model,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.REST_API_ROOT+"social-accounts/{id}",root:a.Squarespace.REST_API_ROOT+"social-accounts",resetSubscription:function(){a.Data.post({url:"/api/config/ResetSocialAccountSubscription",data:{connectedAccountId:this.get("id")}},this)}},{ATTRS:{unauthorized:{getter:function(){return this.get("accountState")===a.Squarespace.AccountStates.UNAUTHORIZED}},
hash:{readOnly:!0,getter:function(){return this.get("serviceName").toLowerCase()+"-"+this.get("userId")}},userName:{validator:a.Lang.isString,value:null},accountState:{value:a.Squarespace.AccountStates.ACTIVE},websiteId:{value:null},profileUrl:{validator:a.Lang.isString,value:null},serviceId:{validator:a.Lang.isNumber},serviceName:{validator:a.Lang.isString},pullEnabled:{validator:a.Lang.isBoolean,value:!1},pushEnabled:{validator:a.Lang.isBoolean,value:!0},autoPushEnabled:{validator:a.Lang.isBoolean,
value:!1},iconEnabled:{validator:a.Lang.isBoolean},userId:{validator:a.Lang.isString},iconURL:{validator:a.Lang.isString},defaultPushMessage:{validator:a.Lang.isString},screenName:{validator:a.Lang.isString},collectionId:{validator:a.Lang.isString},metaData:{validator:a.Lang.isObject,value:null}}});a.Squarespace.Models.ConnectedAccount=d},"1.0",{requires:["base","model","squarespace-model-sync-rest","squarespace-util","squarespace-enum"]});
YUI.add("squarespace-text-editor",function(a){a.namespace("Squarespace");a.Squarespace.TextEditor=a.Base.create("textEditor",a.Base,[],{initializer:function(d){this.el=d.el;this.el.setStyles({width:"100%",height:"100%"});this.el.get("parentNode").setStyle("overflow","hidden");d.tabIndex&&this.el.setAttribute("tabIndex",d.tabIndex);this.editor=CodeMirror.fromTextArea(this.el._node,{lineWrapping:!0,mode:this.get("mode")});this._setOptionsForMode(this.get("mode"));a.later(300,this,function(){this.editor.setSelection({line:0,
ch:0},{line:0,ch:1});this.editor.setSelection({line:0,ch:0},{line:0,ch:0})});this.on("modeChange",this._loadMode,this);this.on("heightChange",this._setHeight,this);this.set("height",this.el.get("parentNode").getStyle("height"))},setHeight:function(a){this.set("height",a)},getContent:function(){return this.editor.getValue()},setContent:function(a){return this.editor.setValue(a||"")},getContentHeight:function(){return parseInt(this.el.get("parentNode").one(".CodeMirror-scroll").getStyle("height"),10)},
focus:function(){this.editor.refresh();return this.editor.focus()},execCommand:function(){},_clearOptions:function(){this.editor.setOption("matchBrackets",!1);this.editor.setOption("autoCloseBrackets",!1);this.editor.setOption("matchTags",!1);this.editor.setOption("autoCloseTags",!1)},_setOptionsForMode:function(a){switch(a){case "css":case "javascript":this.editor.setOption("matchBrackets",!0);this.editor.setOption("autoCloseBrackets",!0);break;case "htmlmixed":this.editor.setOption("matchTags",
!0),this.editor.setOption("autoCloseTags",!0)}},_loadMode:function(a){this._clearOptions();this.editor.setOption("mode",a.newVal);this._setOptionsForMode(a.newVal)},_setHeight:function(a){this.el.get("parentNode").one(".CodeMirror-scroll").setStyle("height",a.newVal)}},{ATTRS:{mode:{value:"htmlmixed"},height:{value:-1}}})},"1.0",{requires:["node","base","thirdparty-codemirror"]});
YUI.add("squarespace-tab-view",function(a){var d=a.namespace("Squarespace.Widgets").TabView=a.Base.create("tabView",a.Squarespace.Widgets.SSWidget,[],{initializer:function(a){this._saveChildWidgetDeclarations();this._childWidgets={};this._tabContentWrapperNodes=[];this._activeChildId=this._activeChildWidget=null;this.publish("tab-switch-requested",{defaultFn:this._switchTabsDefFn,preventable:!0,context:this,emitFacade:!0})},destructor:function(){this._tabContentWrapperNodes=this._parent=this._activeChildId=
this._activeChildWidget=this._childWidgetIndexes=this._childWidgetOrder=this._childWidgets=this._childWidgetDeclarations=null;a.Object.each(this._childWidgets,function(a){a&&a.destroy({remove:!0})},this)},renderUI:function(){d.superclass.renderUI.call(this);var a=this.getProperty("CSS_PREFIX"),c=this.get("contentBox"),e="."+a+"-self",g=c.one(e);if(g)this._set("tabBox",g);else throw this.name+": No element found matching tabBox selector ("+e+").";e=this.get("tabContentBox");e.inDoc()||c.appendChild(e);
e.addClass(a+"-children");this._selectInitialTab()},bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("id");this.get("tabBox").on(a+"|click",function(a){a.preventDefault();a.stopPropagation();(a=a.target.ancestor(function(a){return!!a.getData("tabId")},!0))&&this.switchTabs(a.getData("tabId"))},this);var c=this.get("parent")||this._parent;if(c)c.on(a+"|tab-switch-requested",function(a){this.fire("tab-switch-requested",{tabId:null,originalTabSwitchEvent:a.originalTabSwitchEvent||a})},
this)},_saveChildWidgetDeclarations:function(){this._childWidgetDeclarations={};this._childWidgetIndexes={};this._childWidgetOrder=[];this._recurseThroughDeclarations();a.Array.each(this._childWidgetOrder,function(a,c){this._childWidgetIndexes[a]=c},this)},_recurseThroughDeclarations:function(b){a.Lang.isUndefined(b)&&(b=this.get("widgets"));a.Array.each(b,function(b){if(!a.Lang.isNull(b))if(b.widgets)this._saveChildWidgetDeclarations(b.widgets);else if(b.ctor)this._childWidgetDeclarations[b.id]=
b,this._childWidgetOrder.push(b.id);else throw this.name+": No ctor or widgets array found in declaration";},this)},_selectInitialTab:function(){var a=this.get("initialTabId");if(!a){var c=null;this.get("tabBox").all("*").some(function(a){return a.getData("tabId")?(c=a,!0):!1},this);if(!c){console.warn(this.name+': No first tab found. Is "data-tabId"="some-id" set?');return}a=c.getData("tabId")}this.switchTabs(a)},refreshCurrentTab:function(){this._switchTabs(this._activeChildId)},switchTabs:function(b){if(!a.Lang.isNull(b)&&
!this._childWidgetDeclarations[b])throw this.name+": Tab id '"+b+"' does not exist";b!=this._activeChild&&this.fire("tab-switch-requested",{tabId:b})},getActiveChildId:function(){return this._activeChildId},getChildWidgets:function(){return this._childWidgets},_switchTabsDefFn:function(a){this._switchTabs(a.tabId)},_switchTabs:function(b){var c=this.get("tabBox"),e=this._activeChildId,d=this._childWidgetIndexes[e],f=this._childWidgets[e],h=this._childWidgetIndexes[b],k=this._childWidgets[b];if(!a.Lang.isNull(b)){c.all(".active").removeClass("active");
var l,n;f&&(l=this._tabContentWrapperNodes[d]);k?n=this._tabContentWrapperNodes[h]:(n=a.Node.create("<div/>"),n.addClass("tab-wrapper"),n.setAttribute("data-tabId",b),this.get("tabContentBox").insert(n,h+1),k=this._childWidgetDeclarations[b],k=new k.ctor(a.merge(k.config||{},{parent:this,container:n})),k.render(n),this._childWidgets[b]=k,this._tabContentWrapperNodes[h]=n);h=a.bind(function(){this.get("destroyOnSwitch")?(l.remove(!0),f.destroy({remove:!0}),this._childWidgets[e]=null,this._tabContentWrapperNodes[d]=
null):l.hide()},this);l&&n&&h();n.show();c.all("*").some(function(a){return a.getData("tabId")===b?(a.addClass("active"),!0):!1},this);this._activeChildId=b;this._activeChildWidget=k}},toJSON:function(){var a=this.getAttrs();return{widgets:this._convertForTemplateContext(a.widgets),id:a.id,className:a.className,strings:a.strings}},_convertForTemplateContext:function(b){var c=[];a.Array.each(b,function(b){if(!a.Lang.isNull(b))if(b.widgets)c.push({label:b.label||"",widgets:this._convertForTemplateContext(b.widgets)});
else if(b.ctor)c.push({label:b.label||"",id:b.id});else throw this.name+": No ctor or widgets array found in declaration";},this);return c},_validateWidgets:function(b){return!a.Lang.isArray(b)?(console.warn(this.name+": An array of tab item declarations is required."),!1):a.Array.some(b,function(b){return a.Lang.isUndefined(b.ctor)?a.Lang.isUndefined(b.widgets)?(console.warn(this.name+": Declaration did not include a ctor or widgets property. Was:",b),!0):!this._validateWidgetGroupDeclaration(b):
!this._validateWidgetDeclaration(b)},this)},_validateWidgetDeclaration:function(b){if(!a.Lang.isString(b.id))return console.warn(this.name+": Each widget requires an id."),!1;if(!b.ctor||!a.Lang.isFunction(b.ctor))return console.warn(this.name+": Each widget requires a 'ctor' (constructor function)"),!1},_validateWidgetGroupDeclaration:function(b){b=b.widgets;return!b?(console.warn(this.name+": Each group declaration needs a 'widgets' property"),!1):a.Array.some(b,function(a){return!this._validateWidgetDeclaration},
this)}},{CSS_PREFIX:"sqs-tab-view",HANDLEBARS_TEMPLATE:"tab-view.html",ATTRS:{strings:{value:{title:"",description:""}},tabBox:{value:null,readOnly:!0},tabContentBox:{valueFn:function(){return a.Node.create("<div/>")},writeOnce:"initOnly"},initialTabId:{value:null},destroyOnSwitch:{value:!1,validator:a.Lang.isBoolean},widgets:{value:[],validator:"_validateWidgets",initOnly:!0},switchAnimation:{value:null}}})},"1.0",{requires:["base-build","squarespace-ss-widget","squarespace-tab-view-template","squarespace-tab-view-tab-template",
"squarespace-tab-view-tab-group-template"]});YUI.add("squarespace-block-social-account-links-legacy-model",function(a){a.namespace("Squarespace.ContentModel").SocialAccountLinksLegacyBlock=a.Base.create("SocialAccountLinksLegacyBlockModel",a.Squarespace.ContentModel.SocialAccountLinksBlock,[],{},{ATTRS:{accountIds:{valueFn:function(){return a.Array.map(a.Squarespace.Block.SocialAccountLinksUtils.getAccountsWithProfileUrl(),function(a){return a.id})}}}})},"1.0",{requires:["squarespace-block-social-account-links-model"]});
YUI.add("squarespace-block-label",function(a){a.namespace("Squarespace.Block").Label=a.Base.create("blockLabel",a.Squarespace.SSWidget,[a.WidgetChild],{renderUI:function(){this.get("contentBox").setHTML(this.get("label"))}},{CSS_PREFIX:"sqs-blocklabel",NS:"blockLabel",ATTRS:{label:{value:null}}})},"1.0",{requires:["base","widget-child","squarespace-ss-widget"]});
YUI.add("squarespace-plugin-actionoverlay",function(a){a.namespace("Squarespace");a.Squarespace.ActionOverlayButtons={EDIT_IMAGE:"edit-image",IMAGE_INFO:"image-info",REMOVE_IMAGE:"remove-image"};a.namespace("Squarespace.Plugin").ActionOverlay=a.Base.create("ActionOverlay",a.Plugin.Base,[],{initializer:function(){this._buttonEls={};this.render();this.after("positionChange",function(){this.el&&this.el.set("className",this.constructor.CSS_NAMESPACE+" "+this.get("position"))});(this.get("anchor")||this.get("host")).on("mouseenter",
this._alignEl,this)},getButtonEl:function(a){return this._buttonEls[a]},setLoadingState:function(d,b){var c=this.getButtonEl(d);c?(c.empty(!0),b?(this.el.addClass("loading"),c.addClass("loading"),new a.Squarespace.Spinner({render:c})):(this.el.removeClass("loading"),c.removeClass("loading"))):console.warn("Could not set loading state, button with name: "+d+" not found.")},render:function(){this.el&&this.el.remove();for(var d=a.Node.create('<div class="'+this.constructor.CSS_NAMESPACE+" "+this.get("position")+
'"></div>'),b=0;b<this.get("buttons").length;b++){var c=this.get("buttons")[b],e=a.Node.create('<div class="button '+c+'"></div>');e.setAttribute("data-button-name",c);d.append(e);this._buttonEls[c]=e}this.clickEvt=d.on("click",function(a){a.halt();if((a=a.target.ancestor(".button",!0))&&!a.hasClass("loading")){var b=a.getAttribute("data-button-name");this.fire("button-"+b,{buttonNode:a,buttonName:b})}},this);this.el=d;this._alignEl();this.get("host").addClass(this.constructor.CSS_NAMESPACE+"-container");
this.get("host").append(d)},_alignEl:function(){if(this.get("anchor")&&"relative"!=this.get("anchor").getComputedStyle("position")){var a=this.get("anchor").get("region");this.el.setStyles({top:a.top,right:a.right-a.width})}},destructor:function(){this.get("host").removeClass(this.constructor.CSS_NAMESPACE+"-container");this.clickEvt.detach();this.el.remove()},getProperty:function(a){return this.constructor[a]}},{NS:"actionOverlay",CSS_NAMESPACE:"sqs-action-overlay",ATTRS:{buttons:{value:[]},position:{value:"top"},
anchor:{value:null}}})},"1.0",{requires:["base","node","plugin","squarespace-spinner"]});
YUI.add("squarespace-panel",function(a){a.namespace("Squarespace").Panel=a.Base.create("panel",a.Panel,[a.WidgetParent,a.WidgetChild],{initializer:function(d){this.config=d||{};d=this.get("animDuration");0<d&&this.plug(a.Plugin.WidgetAnim,{duration:d});this.before("render",this._initPointer,this);this.after(["pointerChange","typeChange","alignChange"],this._initPointer,this);this.after("render",this.afterRender,this);this.set("alignOn",[{node:a.one(a.config.doc.body),eventName:"resize"}])},afterRender:function(){this.config.position&&
this.get("boundingBox").setStyle("position",this.config.position);this.show();this.config.align&&this.config.align.offset&&this.setPanelOffset(this.config.align.offset)},_initPointer:function(){var d=this.get("align");this.get("type");if(this.get("pointer")&&!this.pointer){if(d&&d.node&&a.one(d.node)&&"inline"!==this.get("type")){var b=this.get("boundingBox"),c=a.one(d.node).get("region");this.pointer=new a.Overlay({constrain:b,align:d,zIndex:2,render:b});d=this.getAxis(this.pointer);d.horizontal?
this.pointer.set("height",c.height):d.vertical&&this.pointer.set("width",c.width);c=this.get("animDuration");0<this.get("animDuration")&&this.plug(a.Plugin.WidgetAnim,{duration:c});this.pointer.get("boundingBox").addClass(this.getClassName("pointer"));this.after("xyChange",this.pointerOffset,this);this.pointerOffset();this.pointer.show()}}else!this.get("pointer")&&this.pointer&&this.pointer.destroy()},getAxis:function(a){var b=a.get("align").points[0].toLowerCase(),c=a.get("align").points[1].toLowerCase();
a="b"===b[0];var e="r"===b[0]||"r"===b[1],g="b"===c[0],f="r"===c[0]||"r"===c[1],f="l"===c[0]||"l"===c[1]||f,c="t"===c[0]||g;return{horizontal:("l"===b[0]||"l"===b[1]||e)&&f,vertical:("t"===b[0]||a)&&c}},setPanelOffset:function(a){this.move(this.get("boundingBox").getX()+a[0],this.get("boundingBox").getY()+a[1])},pointerOffset:function(d){d=this.get("xy");var b=a.one(this.get("align.node")).get("region"),c=this.get("boundingBox"),e=this.pointer.get("boundingBox"),g=this.getAxis(this),f="";["top","left",
"right","bottom"].forEach(function(a){c.removeClass(this.getClassName(a));e.removeClass(this.getClassName("pointer",a))},this);g.horizontal?f=d[0]>b[0]?"left":"right":g.vertical&&(f=d[1]>b[1]?"top":"bottom");c.addClass(this.getClassName(f));e.addClass(this.getClassName("pointer",f));this.pointer.align();"left"===f||"right"===f?e.setStyles({left:"left"===f?0:null,right:"right"===f?0:null}):e.setStyles({top:"top"===f?0:null,bottom:"bottom"===f?0:null})},destructor:function(){this.pointer&&this.pointer.destroy()}},
{CSS_PREFIX:"sqs-panel",ATTRS:{render:{value:!0},controls:{value:[],validator:a.Lang.isArray},node:{},type:{value:["popover"],setter:function(a){a="string"===typeof a?[a]:a;var b="";a.forEach(function(a){b+=this.getClassName("type-"+a)},this);this.get("boundingBox").addClass(b);"inline"===a&&this.set("align",{node:null,points:[null,null]});return a}},align:{value:{node:null,points:["tl","tr"]},broadcast:1},animDuration:{value:0.5},buttons:{value:{}},width:{value:260},modal:{value:!1},pointer:{value:!0,
lazyAdd:!1},constrain:{value:null},preventOverlap:{value:!0},visible:{value:!1}}})},"0.2.0",{requires:"node panel overlay widget-anim widget-child widget-parent".split(" ")});
YUI.add("squarespace-widgets-data-confirmation",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.DataConfirmation=a.Base.create("dataConfirmation",a.Squarespace.Widgets.Confirmation,[a.WidgetParent],{initializer:function(){a.Array.each(this.get("fields"),function(b){a.Object.hasKey(b,"name")?this.add(b):console.warn("[DataConfirmation] Dialog field missing name. Skipping.")},this)},renderUI:function(){d.superclass.renderUI.call(this);this._childrenContainer=this.get("contentBox").one(".fields")},
syncUI:function(){this._updatePosition()},_handleResponse:function(b){this.fire(b,{data:a.Squarespace.FormUtils.getData(this._items)})}},{CSS_PREFIX:"sqs-widgets-confirmation",TEMPLATE:'<div class="title"></div><div class="message"></div><div class="fields"></div><div class="buttons"></div>',TYPE:a.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:a.Squarespace.Widgets.Confirmation.ANCHOR,ATTRS:{fields:{value:[],validator:a.Lang.isArray}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-form-utils",
"squarespace-widgets-confirmation"]});
YUI.add("squarespace-dialog-pricing-placeholder-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-pricing-placeholder.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k;f=this.escapeExpression;a=""+('<div class="field-lhs">\n  '+f((k=(k=b.strings,null==k||!1===k?k:k.title),"function"===typeof k?k.apply(b):k))+'\n</div>\n\n  <div class="placeholder">\n\n    <div class="pricing"></div>\n\n    ');if((d=
d["if"].call(b,b.hasVariants,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return'\n      <div class="variant-count"></div>\n    '},h),data:h}))||0===d)a+=d;return a+='\n\n    <div class="prompt">\n      '+f((k=(k=b.strings,null==k||!1===k?k:k.prompt),"function"===typeof k?k.apply(b):k))+"&nbsp;&rarr;\n    </div>\n  </div>\n"})})();a.Handlebars.registerPartial("dialog-pricing-placeholder.html".replace("/","."),d.templates["dialog-pricing-placeholder.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-dialog-gallery-options",function(a){a.namespace("Squarespace.DialogFields").GalleryOptions=a.Base.create("galleryOptions",a.Squarespace.DialogField2,[],{initializer:function(a){this._originalSettings={};this._widgetsByName={};this.publish("options-changed",{emitFacade:!1})},renderUI:function(){var d=this.get("options"),b=[];a.Object.each(d,function(a,e){this._originalSettings[e]=a;b.push(this._optToWidget(a,e))},this);a.Array.forEach(b,function(a){a.after("dataChange",function(b){this.fire("options-changed",
a,b.attrName)},this);this.add(a)},this);a.Squarespace.DialogFields.GalleryOptions.superclass.renderUI.call(this)},syncUI:function(){this._updateVisibleWidgets()},didDataChange:function(){var d=!1;a.Object.each(this.get("data"),function(b,c){a.Object.hasKey(this._initialData,c)&&(d=this._initialData[c]!==b)});return d},_optToWidget:function(a,b){switch(a.type){case "select":return this._selectWidget(a,b);case "boolean":return this._checkWidget(a,b);case "slider":return this._sliderWidget(a,b)}},add:function(d){this._widgetsByName[d.get("name")]=
d;a.Squarespace.DialogFields.GalleryOptions.superclass.add.call(this,d)},_getOriginalSettings:function(a){return this._originalSettings[a.get("name")]},_updateVisibleWidgets:function(){this.each(function(d){var b=this._getOriginalSettings(d);b.onlyFor?a.Array.some(b.onlyFor,this._validateSettings,this)?d.show():d.hide():d.show()},this)},_validateSettings:function(a){a=this._parseFieldCondition(a);var b=this._widgetsByName[a.name];return b.get("visible")&&String(b.get("data"))===String(a.value)},_parseFieldCondition:function(a){a=
a.split(":");return{name:a[0],value:a[1]}},_resetValuesToDefaults:function(d){var b=this._getOriginalSettings(d);a.Lang.isUndefined(b.defaultValue)||d.set("data",b.defaultValue)},_selectWidget:function(d,b){var c=a.Squarespace.DialogFields.Select.convertToOptionsArray(d.options),e=new a.Squarespace.DialogFields.Select({"strings.title":d.title,"strings.description":d.description,options:c,data:d.defaultValue,className:"thin dark",name:b,visible:"design"!==b,prefix:""});e.unplug(a.Plugin.WidgetAnim);
e.after("dataChange",function(){"design"===e.get("name")&&(this.each(function(a){"design"!==a.get("name")&&this._resetValuesToDefaults(a)},this),this._applyValuesFromSelect(e));this._updateVisibleWidgets()},this);return e},_applyValuesFromSelect:function(d){var b=this._getOriginalSettings(d);b.options&&(d=b.options[d.get("data")],a.Object.each(d.values,function(a,b){this._widgetsByName[b].set("data",a)},this))},_sliderWidget:function(d,b){return new a.Squarespace.DialogFields.Slider({name:b,"strings.description":d.description,
"strings.suffix":d.numericSuffix||"",range:[d.min,d.max],data:d.defaultValue,labelWidth:d.labelWidth,visible:!1})},_checkWidget:function(d,b){var c=new a.Squarespace.DialogFields.Check({name:b,"strings.title":d.title,"strings.description":d.description,data:d.defaultValue,visible:!1});c.after("dataChange",this._updateVisibleWidgets,this);return c}},{CSS_PREFIX:"sqs-gallery-options",ATTRS:{data:{getter:function(){return a.Array.reduce(a.Array.filter(this._items,function(a){return a.get("visible")}),
{},function(a,b){a[b.get("name")]=b.get("data");return a})},setter:function(d){a.Array.each(this._items,function(a){a.set("data",d[a.get("name")])},this)},lazyAdd:!1},options:{},currentDesign:{readOnly:!0,getter:function(){return this._widgetsByName.design.get("data")}}}})},"1.0",{requires:"base base-build squarespace-dialog-field-2 squarespace-dialog-slider squarespace-dialog-check squarespace-dialog-select".split(" ")});
YUI.add("squarespace-dialog-summary-filter",function(a){a.namespace("Squarespace.DialogFields").SummaryFilter=a.Base.create("summaryFilters",a.Squarespace.DialogField2,[],{initializer:function(d){d=d.data||this.get("data")||{};this._tagField=new a.Squarespace.DialogFields.AutoComplete({"strings.title":"Tag Filter","strings.placeholder":"Enter a tag to filter by","strings.description":"Only show items with this tag.",data:d.tag,acConfig:{source:[],resultFilters:"phraseMatch",zIndex:1E6}});this.set("tagField",
this._tagField);this._categoryField=new a.Squarespace.DialogFields.AutoComplete({"strings.title":"Category Filter","strings.placeholder":"Enter a category to filter by","strings.description":"Only show items with this category.",data:d.category,acConfig:{source:[],resultFilters:"phraseMatch",zIndex:1}});this.set("categoryField",this._categoryField);this._featuredField=new a.Squarespace.DialogFields.Check({"strings.title":"Featured Filter","strings.description":"Only show featured posts.",data:d.featured||
!1})},renderUI:function(){a.Squarespace.DialogFields.SummaryFilter.superclass.renderUI.call(this);var d=this.get("contentBox");this._categoryField.render(d);this._tagField.render(d);this._featuredField.render(d)},bindUI:function(){a.Squarespace.DialogFields.SummaryFilter.superclass.bindUI.call(this);this._tagField.after("dataChange",this._updateData,this,"tag");this._categoryField.after("dataChange",this._updateData,this,"category");this._featuredField.after("dataChange",this._updateData,this,"featured");
this.after("dataChange",this._handleRevertRequest,this)},destructor:function(){this._categoryField.destroy();this._tagField.destroy();this._featuredField.destroy()},didDataChange:function(){var a=this._initialData||{},b=this.get("data");return a.tag!==b.tag||a.featured!==b.featured||a.category!==b.category},_updateData:function(d,b){var c=d.newVal,e=this.get("data");a.Lang.isString(c)&&0===c.length&&(c=null);e[b]=c;this.set("data",e)},_handleRevertRequest:function(a){a.revert&&this._revertFields()},
_revertFields:function(){this._tagField.set("data","");this._categoryField.set("data","");this._featuredField.set("data",!1)}},{CSS_PREFIX:"sqs-summary-filter",ATTRS:{tags:{},data:{value:{}},categories:{},tagField:{readOnly:!0},categoryField:{readOnly:!0}}})},"1.0",{requires:"squarespace-dialog-auto-complete squarespace-dialog-field-2 autocomplete-sources autocomplete-filters base base-build".split(" ")});
YUI.add("squarespace-dialog-facebook-meta-data",function(a){a.namespace("Squarespace.DialogFields").FacebookMetaData=a.Base.create("fbMetaData",a.Squarespace.DialogField2,[],{initializer:function(d){var b=[{label:"This Account",value:""}],b=b.concat(this.get("pages"));this._pageSelect=new a.Squarespace.DialogFields.Select({"strings.title":"Push Target","strings.placeholder":"This Account","strings.description":"Select the page to which posts will be pushed. If no page is selected, posts will be pushed to this account's timeline.",
name:"pages",options:b,data:d.data.isPageAccount?"":d.data.selectedPageId,className:"thin dark"});this.add(this._pageSelect);this._impersonateCheckbox=new a.Squarespace.DialogFields.Check({"strings.title":"Impersonate Page","strings.description":"Post to this page's timeline as the page itself.",data:d.data.impersonatePage});this.add(this._impersonateCheckbox)},bindUI:function(){this.on("dataChange",this.syncUI,this);var a=this.get("id");this._pageSelect.after(a+"|dataChange",function(a){var c=this.get("data");
a.newVal?(this._impersonateCheckbox.set("data",!0),c.selectedPageId=a.newVal):delete c.selectedPageId;this.set("data",c)},this);this._impersonateCheckbox.after(a+"|dataChange",function(a){var c=this.get("data");c.impersonatePage=a.newVal;this.set("data",c)},this)},syncUI:function(){var a=this.get("data");a.isPageAccount||!a.selectedPageId?this._impersonateCheckbox.hide():this._impersonateCheckbox.show()},didDataChange:function(){var a=this._initialData,b=this.get("data");return a.impersonatePage!==
b.impersonatePage||a.selectedPageId!==b.selectedPageId}},{CSS_PREFIX:"sqs-facebook-metadata",ATTRS:{data:{value:{},setter:function(d){a.Array.each(d.managedPages,function(a){a.selected=d.selectedPageId&&a.id===d.selectedPageId?!0:!1})}},pages:{}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-dialog-check","squarespace-dialog-select"]});
YUI.add("autocomplete-sources",function(a,d){var b=a.AutoCompleteBase,c=a.Lang,e="_sourceSuccess",g="maxResults";a.mix(b.prototype,{_YQL_SOURCE_REGEX:/^(?:select|set|use)\s+/i,_beforeCreateObjectSource:function(b){return b instanceof a.Node&&"select"===b.get("nodeName").toLowerCase()?this._createSelectSource(b):a.JSONPRequest&&b instanceof a.JSONPRequest?this._createJSONPSource(b):this._createObjectSource(b)},_createIOSource:function(b){function c(d){var h=d.request;if(g._cache&&h in g._cache)g[e](g._cache[h],
d);else n&&n.isInProgress()&&n.abort(),n=a.io(g._getXHRUrl(b,d),{on:{success:function(b,c){var f;try{f=a.JSON.parse(c.responseText)}catch(k){a.error("JSON parse error",k)}f&&(g._cache&&(g._cache[h]=f),g[e](f,d))}}})}var d={type:"io"},g=this,n,p,q;d.sendRequest=function(b){p=b;q||(q=!0,a.use("io-base","json-parse",function(){d.sendRequest=c;c(p)}))};return d},_createJSONPSource:function(b){function c(a){var d=a.request,h=a.query;if(g._cache&&d in g._cache)g[e](g._cache[d],a);else b._config.on.success=
function(b){g._cache&&(g._cache[d]=b);g[e](b,a)},b.send(h)}var d={type:"jsonp"},g=this,n,p;d.sendRequest=function(e){n=e;p||(p=!0,a.use("jsonp",function(){b instanceof a.JSONPRequest||(b=new a.JSONPRequest(b,{format:a.bind(g._jsonpFormatter,g)}));d.sendRequest=c;c(n)}))};return d},_createSelectSource:function(a){var b=this;return{type:"select",sendRequest:function(c){var d=[];a.get("options").each(function(a){d.push({html:a.get("innerHTML"),index:a.get("index"),node:a,selected:a.get("selected"),text:a.get("text"),
value:a.get("value")})});b[e](d,c)}}},_createStringSource:function(a){return this._YQL_SOURCE_REGEX.test(a)?this._createYQLSource(a):-1!==a.indexOf("{callback}")?this._createJSONPSource(a):this._createIOSource(a)},_createYQLSource:function(b){function d(h){var l=h.query,n=k.get("yqlEnv"),p=k.get(g),v;v=c.sub(b,{maxResults:0<p?p:1E3,request:h.request,query:l});if(k._cache&&v in k._cache)k[e](k._cache[v],h);else l=function(a){k._cache&&(k._cache[v]=a);k[e](a,h)},p={proto:k.get("yqlProtocol")},q?(q._callback=
l,q._opts=p,q._params.q=v,n&&(q._params.env=n)):q=new a.YQLRequest(v,{on:{success:l},allowCache:!1},n?{env:n}:null,p),q.send()}var k=this,l={type:"yql"},n,p,q;k.get("resultListLocator")||k.set("resultListLocator",k._defaultYQLLocator);l.sendRequest=function(b){n=b;p||(p=!0,a.use("yql",function(){l.sendRequest=d;d(n)}))};return l},_defaultYQLLocator:function(b){(b=b&&b.query&&b.query.results)&&c.isObject(b)?(b=a.Object.values(b)||[],b=1===b.length?b[0]:b,c.isArray(b)||(b=[b])):b=[];return b},_getXHRUrl:function(a,
b){var e=this.get(g);b.query!==b.request&&(a+=b.request);return c.sub(a,{maxResults:0<e?e:1E3,query:encodeURIComponent(b.query)})},_jsonpFormatter:function(a,b,e){var d=this.get(g),n=this.get("requestTemplate");n&&(a+=n(e));return c.sub(a,{callback:b,maxResults:0<d?d:1E3,query:encodeURIComponent(e)})}});a.mix(b.ATTRS,{yqlEnv:{value:null},yqlProtocol:{value:"http"}});a.mix(b.SOURCE_TYPES,{io:"_createIOSource",jsonp:"_createJSONPSource",object:"_beforeCreateObjectSource",select:"_createSelectSource",
string:"_createStringSource",yql:"_createYQLSource"},!0)},"3.17.2",{optional:["io-base","json-parse","jsonp","yql"],requires:["autocomplete-base"]});
YUI.add("squarespace-dialog-pre-submit-builder",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.PreSubmitBuilder=a.Base.create("PreSubmitBuilder",a.Squarespace.DialogField2,[a.WidgetParent],{initializer:function(){this._edited=!1},destructor:function(){this._ddDelegate&&this._ddDelegate.destroy()},renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("contentBox"),c=this.get("isSubTopics")?"Add Subtopic":"Add Topic";this._topicWrapper=a.appendChild('<div class="topics-wrapper"></div>');
this._topicContainer=this._topicWrapper.appendChild('<div class="topics"></div>');this._addTopicButton=a.appendChild('<div class="add-topic"><div class="add-icon"></div><div class="add-text">'+c+"</div></div>");this._setupDragAndDrop()},bindUI:function(){d.superclass.bindUI.call(this);var a=["add","remove","*:change"];this.after("dataChange",function(c){var e=this.get("data");c.noSyncUI||(this._registerEvent(e.on(a,function(){this.fire("dataChange",{noSyncUI:!0});this._edited=!0},this)),this._registerEvent(e.after("add",
function(a){a.onReorder||this._addTopicWidget(a.model)},this)))});this._addTopicButton.on("click",this._addTopicModel,this);this.on("*:titleFieldEnter",function(a){this._editOrAddNextTopic(a.target)},this);this.on("*:editingChange",function(a){a.newVal&&this.closeChildren(a.target)},this);this.on("*:removeClicked",function(a){this._confirmAndRemoveTopic(a.target.get("topic"))},this);this.on("*:destroy",function(){this._ddDelegate.syncTargets()},this);this._ddReorder.after("reordered",function(a){this._reorderTopic(a.oldIndex,
a.newIndex)},this)},syncUI:function(){d.superclass.syncUI.call(this);this.removeAll().each(function(a){a.destroy()});var b=this._topicContainer,c=this.get("isSubTopics");this.get("data").each(function(e){this.add(new a.Squarespace.FormPreSubmitTopic({render:b,topic:e,isSubTopic:c}))},this)},didDataChange:function(){return this._edited},closeChildren:function(b){var c=a.Lang.isValue(b);this.each(function(a){a.get("editing")&&(!c||a!==b)&&a.closeEdit()})},_addTopicModel:function(){this.get("data").add(new a.Squarespace.Models.FormPreSubmitTopic({title:this.get("isSubTopics")?
"New Subtopic":"New Topic"}))},_addTopicWidget:function(b){this.add(new a.Squarespace.FormPreSubmitTopic({render:this._topicContainer,topic:b,isSubTopic:this.get("isSubTopics")})).item(0).focusAndSelect();this._ddDelegate.syncTargets()},_confirmAndRemoveTopic:function(b){(new a.Squarespace.Widgets.Confirmation({"strings.title":"Remove Topic","strings.message":"Are you sure you wish to remove this topic?"})).on("confirm",function(){b.destroy()},this)},_editOrAddNextTopic:function(a){a=a.next();this.closeChildren();
a?a.focusAndSelect():this._addTopicModel()},_setupDragAndDrop:function(){var b=this._topicWrapper,c="#"+this._topicContainer.generateID()+" > .sqs-form-pre-submit-topic:not(.yui3-dd-super-proxy-clone)",e=(this._ddDelegate=new a.DD.Delegate({container:b,nodes:c,handles:[c+" > .sqs-form-pre-submit-topic-content > .topic-control-bar > .topic-drag-handle-wrapper"],target:!0})).dd;e.set("groups",[this.get("id")]);this._ddReorder=e.plug(a.Squarespace.DDReorder,{container:b,nodes:c}).ddreorder;e.plug(a.Plugin.DDConstrained,
{constrain:b,stickY:!0});e.plug(a.Plugin.DDNodeScroll,{node:b,horizontal:!1,scrollDelay:100})},_reorderTopic:function(a,c){var e=this.get("data");e.add(e.remove(a,{silent:!0}),{index:c,silent:!0});this.add(this.remove(a),c)}},{CSS_PREFIX:"sqs-pre-submit-builder",ATTRS:{data:{valueFn:function(){return new a.Squarespace.Models.FormPreSubmitTopicList},validator:a.Squarespace.AttrValidators.isInstanceOf("Y.Squarespace.Models.FormPreSubmitTopicList")},isSubTopics:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,
writeOnce:"initOnly"}}})},"1.0",{requires:"base widget-parent squarespace-dd-behaviors squarespace-dialog-field-2 squarespace-models-form-pre-submit-topic squarespace-attr-validators squarespace-form-pre-submit-topic squarespace-ui-base squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-layout-editor",function(a){var d=a.Squarespace.Block.Utils.getValFromClass;a.namespace("Squarespace.Layout");a.Squarespace.Layout.Editor=a.Base.create("LayoutEditor",a.Plugin.Base,[],{initializer:function(a){this._host=this.get("host");this._builder=this._host.LayoutBuilder;this.setBlocksEditable(!0);this.cleanGrid();this._initDD(a);this._initColumnResize();this._initFloatResizer();this._host.addClass("sqs-editing")},destructor:function(){this._host.removeClass("sqs-editing");
this.setBlocksEditable(!1);this._host=null;this.resizers.detach();this.resizers.destroy();this.dragDelegate.destroy();this.destroyFloatResizer()},_isBlogApp:function(){return this.get("editController").isMobileApp()},_initDD:function(b){b=this._isBlogApp();var c=this.dragDelegate=new a.Squarespace.Layout.DragDelegate({container:this._host,nodes:".sqs-block",invalid:".sqs-dd-invalid, .sqs-edit-dialog-open, .sqs-helper, .sqs-block-locked-layout",invalidHandles:".sqs-dd-invalid-handle, .sqs-block-focused .sqs-dd-invalid-handle-on-focus, .sqs-selected .sqs-dd-invalid-handle-on-focus",
dragConfig:{groups:["blocks"],clickTimeThresh:b?600:200,haltDown:b?!1:null},extraSyncShims:!b,useDragScroll:!0,scrollNode:this.get("scrollNode"),editController:this.get("editController")});c.dd.removeInvalid("textarea");c.before("drag:start",this._beforeDragStart,this);c.on("drag:start",this._onDragStart,this);c.after("drag:end",this._afterDragEnd,this);this.on("lockChange",function(b){c.set("lockTarget",b.newVal);a.Array.each(a.DD.DDM.targets,function(a){this._host.contains(a.get("node"))&&(b.newVal?
(a.set("lock",!0),a._deactivateShim()):(a.set("lock",!1),a._activateShim()))},this);this.get("editController").toggleInsertMarkerLock(b.newVal)},this)},_initColumnResize:function(){this.resizers=new a.DD.Delegate({container:this._host,nodes:".sqs-helper",invalid:".no-editing .sqs-helper, .sqs-float-right .sqs-helper, .sqs-float-left .sqs-helper",dragConfig:{groups:["resizers"],move:!1}});this.resizers.on("drag:mouseDown",this._onResizerDragMousedown,this);this.resizers.on("drag:start",this._onResizerDragStart,
this);this.resizers.on("drag:drag",this._onResizerDragDrag,this);this.resizers.on("drag:end",this._onResizerDragEnd,this)},_onResizerDragMousedown:function(a){a=a.target.get("node").ancestor(".sqs-row",!0);this.calcGridStops(a)},calcGridStops:function(a){var c=parseInt(a.getStyle("width"),10),e=parseInt(a.getStyle("paddingLeft"),10),d=a.ancestor(".sqs-col"),f=this.get("columns"),d=d?this.getElSize(d):f,c=c/d;a=a.getXY()[0];this.gridStops=[];for(d=0;d<f-1;d++)this.gridStops.push(a+e+Math.round(c*(d+
1)))},_onResizerDragStart:function(b){var c=b.target.get("node");b=b.target.nodeXY[0];var e=this.get("gutterSize");a.one("html").addClass("sqs-resizing-column");this.leftColumn=c.ancestor(".sqs-col");this.rightColumn=this.leftColumn.next();this.leftOrigSize=this.getElSize(this.leftColumn);this.rightOrigSize=this.getElSize(this.rightColumn);this.origResizerPos=this.xToColumn(b+e/2);this._host.addClass("sqs-resizing");this.leftColumn.addClass("sqs-resizing sqs-resizing-left");this.rightColumn.addClass("sqs-resizing sqs-resizing-right");
this.saveOriginalSizes(c.ancestor(".sqs-row"));this.get("editController").disableInsertPoints();this.get("editController").disableDragSelection()},xToColumn:function(a){var c=(this.gridStops[1]-this.gridStops[0])/2;if(a<this.gridStops[0])return 0;if(a>this.gridStops[this.gridStops.length])return this.get("columns")-1;for(var e=0;e<this.gridStops.length;e++){var d=this.gridStops[e];if(a>d-c&&a<d+c)return e}},_onResizerDragDrag:function(a){var c,e,d,f,h,k;d=a.target.mouseXY[0];f=this.gridStops[1]-this.gridStops[0];
a=this.get("columns");h=0;for(k=this.gridStops.length;h<k;h++)if(c=this.gridStops[h],d<this.gridStops[0]-f)c=this.getMinColSize(this.leftColumn),e=this.rightOrigSize+this.leftOrigSize-c,this.setElSize(this.leftColumn,c),this.setElSize(this.rightColumn,e);else if(d>this.gridStops[this.gridStops.length-1]+f)e=this.getMinColSize(this.rightColumn),c=this.leftOrigSize+this.rightOrigSize-e,this.setElSize(this.leftColumn,c),this.setElSize(this.rightColumn,e);else if(d>c-f/2&&d<c+f/2){e=h-this.origResizerPos;
c=this.leftOrigSize+e;e=this.rightOrigSize-e;d=this.getMinColSize(this.leftColumn);f=this.getMinColSize(this.rightColumn);h=this.getMaxColSize(this.leftColumn);k=this.getMaxColSize(this.rightColumn);if(c<d||c>h||e<f||e>k)break;if(c===this.getElSize(this.leftColumn))break;c=Math.min(Math.max(1,c),a);e=Math.min(Math.max(1,e),a);this.setElSize(this.leftColumn,c);this.setElSize(this.rightColumn,e);break}},_onResizerDragEnd:function(){var b=this._host.all(".sqs-col");a.one("html").removeClass("sqs-resizing-column");
this._host.all(".sqs-col.sqs-resizing").each(function(b){var e=this.getElSize(b);b.get("children").filter(".sqs-float-left, .sqs-float-right").each(function(b){this.getElSize(b)>e+1&&(b=a.Widget.getByNode(b))&&b.get("model").set("floatDir",null)},this);b.all(".sqs-block").each(function(b){a.Widget.getByNode(b).fire("resized")})},this);this._host.removeClass("sqs-resizing");b.removeClass("sqs-resizing-left");b.removeClass("sqs-resizing-right");b.removeClass("sqs-resizing");this.cleanGrid();this.get("editController").enableInsertPoints();
this.get("editController").enableDragSelection()},getBlockNodes:function(a){var c=this._host.all(".sqs-block:not(.sqs-destroyme)");return a?c.filter(a):c},getBlocks:function(){var b=[];this.getBlockNodes().each(function(c){b.push(a.Widget.getByNode(c))},this);return b},beforeDrag:function(){this.getBlocks().forEach(function(a){a.blockEditor&&a.blockEditor.beforeLayoutDrag()},this)},afterDrag:function(){this.getBlocks().forEach(function(a){a.blockEditor&&a.blockEditor.afterLayoutDrag()},this)},setBlocksEditable:function(a){this.getBlocks().forEach(function(c){c.set("editable",
a)},this)},_beforeDragStart:function(a){this.get("editController").layoutBeforeDragStart()},_onDragStart:function(){var b=a.DD.DDM.activeDrag.get("node"),c=a.Widget.getByNode(b),e=a.all(".sqs-selected"),d=this.get("editController");c.blockEditor&&c.blockEditor.set("dropZoneLocked",!0);d.set("selection",b);e.each(function(b){b=a.Widget.getByNode(b);a.Lang.isValue(b)&&b!==c&&b.set("selected",0)});d.layoutDragStart(this.get("host"))},_afterDragEnd:function(){var b=this.dragDelegate.get("lastNode");(b=
a.Widget.getByNode(b))&&b.blockEditor&&b.blockEditor.set("dropZoneLocked",!1);this.get("editController").layoutDragEnd()},_initFloatResizer:function(){this.floatResizers=new a.DD.Delegate({container:this.get("host"),nodes:".sqs-float-right .sqs-helper, .sqs-float-left .sqs-helper",invalid:".no-editing .sqs-helper",dragConfig:{move:!1}});this.floatResizers.dd.addToGroup("floaters");this.floatResizers.on("drag:mouseDown",this._onFloatResizerDragMousedown,this);this.floatResizers.on("drag:start",this._onFloatResizerDragStart,
this);this.floatResizers.on("drag:drag",this._onFloatResizerDragDrag,this);this.floatResizers.on("drag:end",this._onFloatResizerDragEnd,this)},_onFloatResizerDragMousedown:function(a){this.get("editController").layoutBeforeDragStart()},_onFloatResizerDragStart:function(b){a.one("html").addClass("sqs-dragging-block");var c=b.target.get("node").ancestor(".sqs-col");b=a.Widget.getByNode(b.target.get("node"));this._currentWidth=b.get("model").get("hSize");this._minWidth=Math.max(b.blockEditor.get("minHSize"),
1);this._maxWidth=parseInt(d(c,"sqs-col-"),10);this._steps=parseInt(c.get("region").width/this._maxWidth,10);this.get("editController").disableInsertPoints();this.get("editController").disableDragSelection()},_onFloatResizerDragDrag:function(b){var c=a.Widget.getByNode(b.target.get("node"));b=Math.floor((b.target.mouseXY[0]-b.target.startXY[0])/this._steps);this._isFloatingRight(c)&&(b*=-1);b+=this._currentWidth;b>=this._minWidth&&b<=this._maxWidth&&(this._newHSize=b,this._removeHSizeClasses(c),c.get("boundingBox").addClass("sqs-col-"+
b))},_isFloatingRight:function(a){return"right"===a.get("model").get("floatDir")},_removeHSizeClasses:function(a){a=a.get("boundingBox");a.set("className",a.get("className").replace(/(?:\s|^)(sqs-col-\d+?)(?=\s|$)/g,""))},_onFloatResizerDragEnd:function(b){b=a.Widget.getByNode(b.target.get("node"));var c={hSize:this._newHSize};this._newHSize===this._maxWidth&&(c.floatDir=null);b.get("model").setAttrs(c);b.get("boundingBox").removeClass("yui3-dd-dragging");a.one("html").removeClass("sqs-dragging-block");
this.afterDrag();this.get("editController").enableInsertPoints();this.get("editController").enableDragSelection();this._builder.syncDOMToContent();this._newHSize=null},destroyFloatResizer:function(){this.floatResizers&&(this.floatResizers.destroy(),this.floatResizers=null)},getBlockByNode:function(b){return a.Widget.getByNode(b.ancestor(".sqs-block",!0))},_handleColumnInsertBlock:function(a,c){"left"===a.direction||"right"===a.direction?this.insertColumn(a.node,c,a.direction):"bottom"===a.direction?
a.node.append(c):"top"===a.direction&&(c.filter?a.node.prepend(c.filter(function(c){return!a.node.get("children").item("0").compareTo(c)})):a.node.prepend(c))},_unfloatBlockByNode:function(b){this._blockIsFloating(b)&&(b=a.Widget.getByNode(b))&&b.get("model").set("floatDir",null)},_handleFloatingBlockEdgeCases:function(a,c){var e=a.node.previous();e===c&&(this._blockIsFloating(e)||this._unfloatBlockByNode(e.previous()));this._blockIsFloating(e)&&(a.node=this._getTopFloatingBlock(e))},_handleBlockInsertBlock:function(a,
c){if("top"===a.direction)this._handleFloatingBlockEdgeCases(a,c),a.node.insert(c,"before");else if("bottom"===a.direction)a.node.insert(c,"after");else if("left"===a.direction||"right"===a.direction)0===a.node.siblings("*:not(.sqs-helper)").size()?this.insertColumn(a.node.ancestor(".sqs-col",!0),c,a.direction):this.splitBlock(a.node,c,a.direction)},_handleContentInsertBlock:function(b,c){var e=b.node.getData("alignNode")||b.node,d=this.getBlockByNode(e),f=d.get("boundingBox"),h=f.previous();if("bottom"===
b.direction)e.next()?d.blockEditor.split(e,c):f.insert(c,"after");else if(e.previous()?d.blockEditor.split(e.previous(),c):h&&h.test("[class*=sqs-float-]")?(h=h.previous(".sqs-block:not(.sqs-float-left):not(.sqs-float-right)")||h,h.insert(c,"after")):f.insert(c,"before"),"left"===b.direction||"right"===b.direction)e=Math.floor(this.getParentSize(f)/2),0<e&&a.Widget.getByNode(c).get("model").setAttrs({hSize:e,floatDir:b.direction})},_handleRowBlockInsert:function(a,c){"left"===a.direction?this.insertColumn(a.node.one(".sqs-col:first-child"),
c,a.direction):"right"===a.direction?this.insertColumn(a.node.one(".sqs-col:last-child"),c,a.direction):("top"===a.direction||"bottom"===a.direction)&&this.insertRow(a.node,c,a.direction)},_blockShouldFloatInContent:function(a){if("left"===a.direction||"right"===a.direction){a=a.node.getData("alignNode")||a.node;var c=this.getBlockByNode(a);a=c?c.get("boundingBox"):a;return 0<Math.floor(this.getParentSize(a)/2)}return!1},_getTopFloatingBlock:function(b){return!b||!b.previous()||this._blockIsFloating(b)&&
!this._blockIsFloating(b.previous())?a.Lang.isValue(b)?b:null:this._getTopFloatingBlock(b.previous())},_blockIsFloating:function(b){b=a.Widget.getByNode(b);return a.Lang.isValue(b)&&!(!b.get("model")||!b.get("model").get("floatDir"))},insertBlock:function(b,c){var e=!1,d=a.Widget.getByNode(b);this._builder.registerBlock(d);a.Object.getValue(c,"type")||(c.type=this.getType(c.node));if(c&&c.type&&d){var f=a.Squarespace.Block.Utils.getColumnWidth(d.get("contentBox"));"content"===c.type?(this._handleContentInsertBlock(c,
b),e=this._blockShouldFloatInContent(c)):"block"===c.type?this._handleBlockInsertBlock(c,b):"column"===c.type?this._handleColumnInsertBlock(c,b):"row"===c.type&&this._handleRowBlockInsert(c,b);e||d.get("model").setAttrs({hSize:null,floatDir:null});b.scrollIntoView();this._builder.syncDOMToContent();d.fire("dropped",{dropInfo:c,floating:!!e,oldCol:f});d.set("visible",!0)}},insertRow:function(a,c,e){var d=this._builder,f=d.get("columns");c=d.createColumn(c,f);d=d.createRow(c);a.insert(d,"top"===e?"before":
"after")},insertColumn:function(a,c,e){var d;d=a.ancestor(".sqs-row").get("children").filter(".sqs-col").size();d=this.getParentSize(a)/(d+1);0===Math.floor(d)?"left"===e?a.prepend(c):"right"===e&&a.append(c):(c=this._builder.createColumn(c,0),a.insert(c,"left"===e?"before":"after"),this.saveOriginalSizes(a.ancestor(".sqs-row")),this.resizeColumn(c,Math.round(d)))},getParentSize:function(a){a=a.ancestor(".sqs-col");return null!==a?this.getElSize(a):this._builder.get("columns")},getElSize:function(a){return d(a,
"sqs-col-")},_foldColumnsSize:function(a,c){var e=0;a.each(function(a){e+=parseInt(c.call(this,a),10)},this);return e},_getMinColumnsWidth:function(a){return this._foldColumnsSize(a,this.getMinColSize)},_getColumnsWidth:function(a){return this._foldColumnsSize(a,this.getElSize)},resizeColumn:function(b,c,e){var d=this.getParentSize(b),f=b.ancestor(".sqs-row").get("children").filter(".sqs-col").filter(function(a){return a!==b.getDOMNode()}),h=d-this._getMinColumnsWidth(f);if(!e&&(0===c||0===f.size()||
1>h))return!1;this.saveOriginalSizes(b.ancestor(".sqs-row"));for(var k=this.getElSize(b)+c,h=Math.min(h,k),k=this._getResizeInfo(f),l,n=c,p=0<c?-1:1;n!==l&&0!==n;)l=n,a.Array.each(k,function(a,b){var c=a.node,h=this.getElSize(c),k=this.getMinColSize(c),l=this._getColumnsWidth(f);if(0!==n&&h+p>=k&&d>=l+p)this.setElSize(c,h+p,e),n+=p;else for(;0!==n&&h+p<k&&0<p&&d>=l+p;)h+=p,this.setElSize(c,h,e),n+=p,l=this._getColumnsWidth(f)},this);0!==n&&console.error("Column resizing has leftovers");this.setElSize(b,
h,e)},_getResizeInfo:function(a){var c=[];a.each(function(a,b){c.push({node:a,idx:b,min:this.getMinColSize(a),size:this.getElSize(a)})},this);1<c.length&&c.sort(function(a,b){return a.size-a.min-(b.size-b.min)});return c},getMinColSize:function(b){var c=b.get("children").filter(".sqs-row");b.all("> .sqs-row > .sqs-col");c.size();var e=1;0<c&&0!==e?c.each(function(a,b){var c=a.get("children").filter(".sqs-col"),d=c.size();c.each(function(a){d+=this.getMinColSize(a)-1},this);e=Math.max(e,d)},this):
b.all(".sqs-block").each(function(b){b=a.Widget.getByNode(b);b.blockEditor&&(e=Math.max(e,this.getMinBlockSize(b)))},this);return parseInt(e,10)},getMinBlockSize:function(a){return parseInt(a.blockEditor.get("minHSize")||1,10)},getMaxColSize:function(a){var c=a.ancestor(".sqs-col"),e=c?this.getElSize(c):this.get("columns");a.siblings(".sqs-col").each(function(a){e-=this.getMinColSize(a)},this);return e},saveOriginalSizes:function(a){a.all(".sqs-col").each(function(a){this.cleanOriginalSizes(a);a.addClass("origsize-"+
this.getElSize(a))},this);a.all(".sqs-block").each(function(a){this.getElSize(a)&&(this.cleanOriginalSizes(a),a.addClass("origsize-"+this.getElSize(a)))},this)},getElOrigSize:function(a){return d(a,"origsize-")},setElSize:function(a,c,e){var d=this.getElSize(a),f=this.getElOrigSize(a)||d,h=this.getMinColSize(a);c=!e&&c<h?h:c;a.all(".sqs-block").each(function(a){var b=this.getElOrigSize(a);b&&this.setElSize(a,Math.max(1,Math.floor(c/f*b)))},this);this.updateColumnSize(a,c,d);(e=a.ancestor(".sqs-col"))?
this.getElSize(e):this._builder.get("columns");a.get("children").filter(".sqs-row").each(function(a){var b=c-f,e=b;a.get("children").filter(".sqs-col").each(function(a,c){var d=this.getElOrigSize(a)||this.getElSize(a),g=this.getMinColSize(a),h=d/f,h=0<b?Math.min(e,Math.ceil(h*b)):Math.max(e,Math.floor(h*b)),g=Math.max(g,d+h),h=g-d;e-=h;this.setElSize(a,d+h)},this)},this)},updateColumnSize:function(b,c,e){b&&c!==e&&(a.Lang.isValue(e)&&b.removeClass("sqs-col-"+e),b.addClass("sqs-col-"+c),this._builder.syncDOMToContent())},
getColSpace:function(a){return this.getElSize(a)-this.getMinColSize(a)},splitBlock:function(a,c,e){var d=this.getParentSize(a);e="left"===e?"before":"after";if(0===Math.floor(d/2))a.insert(c,e);else{var f=this._builder.createRow();a.insert(f,"before");a=this._builder.createColumn(a,d);c=this._builder.createColumn(c,0);f.append(a);a.insert(c,e);this.resizeColumn(c,Math.round(d/2))}},getClassName:function(b){return a.ClassNameManager.getClassName(b)},getType:function(a){if(a.hasClass("sqs-block")||
a.hasClass("free-block"))return"block";if(a.hasClass("sqs-col"))return"column";if(a.hasClass("sqs-row"))return"row";if(a.ancestor(this.get("editController").get("contentParentBlockSelector"),!0))return"content";if(a.hasClass("sqs-layout"))return"layout";a.hasClass("sqs-layout-insert-point")||console.log("Unknown node type")},cleanGrid:function(b){this.get("forceSingleColumn")&&this.collapseGrid();this.cleanBlocks();this.cleanColumns();this.cleanRows();a.Squarespace.ImageLoadManager.refreshAll()},
collapseGrid:function(){var a=this._host.all(".sqs-row > .sqs-col");if(!(2>a.size())){this._host.LayoutBuilder.get("columns");var c=this._host.one(".sqs-row").one("> .sqs-col");this.getElSize(c);this._host.all(".sqs-row > .sqs-col > *").each(function(a){c.appendChild(a)},this);a.each(function(a){a!==c&&a.remove()},this);this.resizeColumn(c,12,!0)}},cleanBlocks:function(){var b=this.getBlockNodes(),c=b.filter(":not(.sqs-float-left)").filter(":not(.sqs-float-right)"),e=0===b.size();this._host.toggleClass("sqs-empty",
e);this._host.toggleClass("empty",e);if(!this.get("host").hasClass("sqs-locked-layout")&&(e||0===c.size())){c=Static.SQUARESPACE_CONTEXT.websiteSettings.markdownMode?a.Squarespace.Block.Markdown:a.Squarespace.Block.Html;e=this._host.one(".sqs-row .sqs-col");if(!e)throw"No rows or columns found.";c=new c({editable:!0,render:e,visible:!0,editMode:this.get("editMode"),editController:this.get("editController")});this._builder.registerBlock(c)}b.each(function(b){var c=a.Widget.getByNode(b);if(!c)throw"block(s) hasn't been initialized, this indicates an error";
if(!c.get("destroyed")){b.hasClass("sqs-col-Infinity")&&(b.removeClass("sqs-col-Infinity"),this.cleanOriginalSizes(b));c.blockEditor&&c.blockEditor.cleanBlock();c.get("model").get("floatDir")&&!this._isBlockFloatValid(b)&&c.get("model").set("floatDir",null);var e=b.get("children").filter(".sqs-helper").item(0);c.get("model").get("floatDir")?a.Lang.isNull(e)&&this._appendResizerNodeTo(b):e&&e.remove()}},this);this.deleteQueuedBlocks()},_isBlockFloatValid:function(b){b=b.next();if(!b)return!1;var c=
a.Widget.getByNode(b);return!c?!1:(c=c.get("model"))&&c.get("floatDir")?this._isBlockFloatValid(b):b.test(this.get("editController").get("contentParentBlockSelector"))},deleteQueuedBlocks:function(){var b=this.get("host"),c=b.all(".sqs-destroyme"),e=!1;0!==c.size()&&(c.each(function(b){var c=a.Widget.getByNode(b);!e&&!b.next(".sqs-block, .sqs-row")&&(e=!0);c&&!c.get("destroyed")&&(c.destroy(),this._builder.deregisterBlock(c))},this),e&&this.get("editController").alignInsertPoints(b,!0))},_insertTextBlockAtEnd:function(b){var c=
a.Widget.getByNode(b.all(".sqs-block").pop()),e=null;c&&(e=parseInt(c.get("type"),10));e&&(e!==a.Squarespace.BlockType.HTML&&e!==a.Squarespace.BlockType.MARKDOWN)&&(c=this.get("markdownMode")?"Markdown":"Html",b=new a.Squarespace.Block[c]({editable:!0,render:b,editMode:this.get("editMode"),editController:this.get("editController")}),this._builder.registerBlock(b))},_appendResizerNodeTo:function(a){a.appendChild('<div class="sqs-helper"><div class="sqs-resizer"><div class="sqs-line"></div></div></div>')},
cleanColumns:function(){this._host.all(".sqs-row > .sqs-col").each(function(b,c){var e=0===b.all("> *:not(.sqs-helper)").size(),d=1<this._host.all(".sqs-col").size();e&&d?(this.resizeColumn(b,-1*this.getElSize(b),!0),e=b.siblings(".sqs-col"),b.remove(),e.each(function(b){b.all(".sqs-block").each(function(b){(b=a.Widget.getByNode(b))&&b.fire("resized",{source:"columnChanged"})})})):(this.cleanOriginalSizes(b),this._isBlogApp()&&this._insertTextBlockAtEnd(b),b.one("> .sqs-helper")||this._appendResizerNodeTo(b))},
this)},cleanOriginalSizes:function(b){var c=b.get("className").split(" ");a.Array.each(c,function(a){"origsize"===a.substring(0,8)&&b.removeClass(a)},this)},cleanRows:function(){this._host.all(".sqs-row").each(function(a){var c=a.get("parentNode"),e=a.get("children").filter(".sqs-col"),d=a.next()&&"row"===this.getType(a.next())?a.next():null,f=d?d.get("children").filter(".sqs-col"):null;0===a.all(".sqs-block").size()&&1<this._host.all(".sqs-row").size()?a.remove():("column"===this.getType(c)&&1===
e.size()&&(e.each(function(c){c.get("children").filter(".sqs-helper").remove();a.insert(c.get("children"),"after")},this),a.remove()),1===e.size()&&(d&&1===f.size())&&(d.one(".sqs-col").prepend(a.one(".sqs-col").get("children")),a.remove()))},this)}},{NS:"LayoutEditor",ATTRS:{scrollNode:{valueFn:function(){return a.one(a.UA.gecko||a.UA.ie?"html":"body")},lazyAdd:!1},columns:{value:12},gutterSize:{value:24},lock:{value:!1},id:{valueFn:function(){return"layout-"+a.Squarespace.Utils.getGuid()}},forceSingleColumn:{value:!1},
markdownMode:{value:!1},editController:{writeOnce:!0,validator:function(b){return a.instanceOf(b,a.Squarespace.EditControllerBase)}},editMode:{writeOnce:!0,validator:function(b){return a.Squarespace.Layout.EditMode.isValid(b)}}}})},"2.0",{requires:"base plugin dd-delegate dd-scroll event-custom-base squarespace-image-loader squarespace-ui-base squarespace-util squarespace-layout-drag squarespace-layout-builder squarespace-layout-insert-marker squarespace-block-utils squarespace-dd-behaviors squarespace-block-focus-handler squarespace-scrollintoview".split(" ")});
YUI.add("squarespace-hb-product-types",function(a){a.Handlebars.registerHelper("product-physical",function(d){return this.structuredContent.productType===a.Squarespace.ProductTypes.PHYSICAL?d.fn(this):d.inverse(this)});a.Handlebars.registerHelper("product-digital",function(d){return this.structuredContent.productType===a.Squarespace.ProductTypes.DIGITAL?d.fn(this):d.inverse(this)});a.Handlebars.registerHelper("product-service",function(d){return this.structuredContent.productType===a.Squarespace.ProductTypes.SERVICE?
d.fn(this):d.inverse(this)});a.Handlebars.registerHelper("product-variants",function(d){var b=this.structuredContent.productType;return b===a.Squarespace.ProductTypes.PHYSICAL||b===a.Squarespace.ProductTypes.SERVICE?d.fn(this):d.inverse(this)})},"1.0",{requires:["handlebars-base","squarespace-util"]});
YUI.add("squarespace-async-task-synchronizer",function(a){a.namespace("Squarespace").AsyncTaskSynchronizer=a.Base.create("asyncTaskSynchronizer",a.Base,[],{initializer:function(){this._idsToCompleted={};this.before(this.get("id")+"|completedChange",function(a){a.newVal||(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation())},this);this.after(this.get("id")+"|completedChange",function(a){var b=this.get("completionCallback"),c=this.get("callbackContext");a.newVal&&b&&(c?b.call(c):b());
this.destroy()},this)},destructor:function(){this.detach(this.get("id")+"|*");this._idsToCompleted=null},add:function(d,b,c,e){if(this.get("destroyed"))throw this.name+": This synchonizer has been used and destroyed";if(!d)throw this.name+": No eventTarget(s) provided.";1===arguments.length&&a.Lang.isArray(d)?d.forEach(function(a){this.add.apply(this,a)},this):a.Lang.isArray(d)?d.forEach(function(a){this._waitForEvent(a,b,c,e)},this):this._waitForEvent(d,b,c,e)},_allTasksCompleted:function(){return a.Array.every(a.Object.values(this._idsToCompleted),
function(a){return a})},_markCompleted:function(a){this.get("destroyed")||(this._idsToCompleted[a]=!0,this._allTasksCompleted()&&this._set("completed",!0))},_waitForEvent:function(d,b,c,e){var g=a.guid("task-"),f=!1;this._idsToCompleted[g]=!1;a.Lang.isFunction(c)&&(e&&a.bind(c,e),f=c(d,b));if(f)this._markCompleted(g);else{var h=a.bind(function(a){d.on(this.get("id")+"|"+a,function(a){this._markCompleted(g)},this)},this);a.Lang.isArray(b)?a.Array.each(b,function(a){h(a)},this):h(b)}return g}},{ATTRS:{completed:{value:!1,
readOnly:!0},completionCallback:{value:null,validator:a.Lang.isFunction},callbackContext:{value:null}}})},"1.0",{requires:["base","base-build"]});
YUI.add("squarespace-block-mixin-coalesceable",function(a){a.namespace("Squarespace.Block.Mixin").Coalesceable=a.Base.create("block-coalesceable",a.Base,[],{initializer:function(){this._host.get("editController").set("contentParentBlockSelector","."+this._host.getClassName());a.Do.after(this._attemptToCoalesce,this,"cleanBlock")},insertContentIntoModel:function(a){throw Error("Coalesceable requires insertContentIntoModel method implementation");},_attemptToCoalesce:function(d){this._host.get("isNewBlock")||
(d=this._getCoalescableSiblingGroup(),1<d.length&&a.Widget.getByNode(d[0]).blockEditor.coalesceFollowingBlocks())},_getCoalescableSiblingGroup:function(a){var b=a||this._bb;a=b.ancestor().get("children");var c=a.size(),e=a.indexOf(b),g="."+this._host.getClassName()+":not(.sqs-destroyme)",b=b.test(g)?[b]:[],f;if(0===c)return b;if(0<e)for(f=e-1;0<=f&&a.item(f).test(g)&&this._isCoalesceable(a.item(f));f--)b.unshift(a.item(f));if(e<c-1)for(f=e+1;f<c&&a.item(f).test(g)&&this._isCoalesceable(a.item(f));f++)b.push(a.item(f));
return b},_isCoalesceable:function(a){return 0<a.one(".sqs-block-content").get("text").length},coalesceFollowingBlocks:function(){var d=this._getCoalescableSiblingGroup();0===d.indexOf(this._bb)&&(d=a.Array.reduce(d,"",function(b,c){var e=a.Widget.getByNode(c);c!==this._bb&&e.queueForDestruction();return b+"\n"+e.get("model").get("html").trim()},this),this.insertContentIntoModel(d),this._host.syncUI())}})},"1.0",{requires:["base","node","widget"]});
YUI.add("squarespace-models-donate-page",function(a){a.namespace("Squarespace.Models");var d=a.Squarespace.Models.DonatePage=a.Base.create("DonatePage",a.Model,[a.Squarespace.ModelSync.REST],{root:"/api/rest/commerce/donate-pages",toJSON:function(){var b=d.superclass.toJSON.call(this);a.Lang.isObject(b.customForm)&&(b.customForm={fields:a.Array.map(b.customForm,JSON.stringify)});return b}},{ATTRS:{title:{},suggestedContributions:{},customForm:{},buttonLabel:{}}})},"1.0",{requires:["base","model",
"squarespace-model-sync-rest"]});
YUI.add("squarespace-dialog-multi-select",function(a){a.namespace("Squarespace.DialogFields").MultiSelect=a.Base.create("multiSelect",a.Squarespace.DialogField2,[],{initializer:function(a){this._childrenById={};a=this.get("id");this.on(a+"|addChild",function(a){this._registerChild(a.child)},this);this.on(a+"|removeChild",function(a){this._unregisterChild(a.child)},this)},renderUI:function(){a.Squarespace.DialogFields.MultiSelect.superclass.renderUI.call(this);this.get("contentBox").addClass("clear")},bindUI:function(){if(this.get("draggable")){this._ddDel=
new a.DD.Delegate({container:this.get("contentBox"),nodes:"> *",groups:"multi-select-"+this.get("id"),target:!0});var d=this._ddDel.dd.plug(a.Squarespace.DDReorder,{container:this.get("contentBox"),nodes:"> *"}).ddreorder;this._ddDel.dd.plug(a.Plugin.DDConstrained,{stickY:!0});d.on(this.get("id")+"|reordered",function(){this.set("data",this.get("data"))},this)}},syncUI:function(){a.Squarespace.DialogFields.MultiSelect.superclass.syncUI.call(this);this.get("draggable")&&(this._ddDel.syncTargets(),
this.get("boundingBox").addClass("draggable"))},_registerChild:function(a){a.attrAdded("active")||console.warn("Field passed to MultiSelect dialog field named: "+this.get("name")+'does not have an "active" attribute. It will not be included in the result set.');var b=a.get("id");this._childrenById[b]=a;b=-1!==(this._initialData||[]).indexOf(a.get("data"));a.set("active",b);this._bindChild(a)},_unregisterChild:function(a){a=a.get("id");delete this._childrenById[a]},_bindChild:function(a){var b=this.get("id");
a.after(b+"|activeChange",function(){var a=this.get("dialog");a&&a.fire("datachange",this);this.fire("dataChange")},this)},_getData:function(){activeChildren=[];this.get("rendered")&&this.get("contentBox").all(".sqs-dialog-field").each(function(d){(d=a.Widget.getByNode(d))&&d.get("active")&&activeChildren.push(d)});return a.Array.map(activeChildren,function(a){return a.get("data")})},_reorderDataFromDOM:function(){}},{CSS_PREFIX:"sqs-multi-select",ATTRS:{data:{value:[],getter:"_getData"},children:{value:[]},
draggable:{value:!1}}})},"1.0",{requires:["base","base-build","squarespace-dialog-field-2"]});
YUI.add("text-data-accentfold",function(a,d){a.namespace("Text.Data").AccentFold={0:/[\u2070\u2080\u24EA\uFF10]/gi,1:/[\u00B9\u2081\u2460\uFF11]/gi,2:/[\u00B2\u2082\u2461\uFF12]/gi,3:/[\u00B3\u2083\u2462\uFF13]/gi,4:/[\u2074\u2084\u2463\uFF14]/gi,5:/[\u2075\u2085\u2464\uFF15]/gi,6:/[\u2076\u2086\u2465\uFF16]/gi,7:/[\u2077\u2087\u2466\uFF17]/gi,8:/[\u2078\u2088\u2467\uFF18]/gi,9:/[\u2079\u2089\u2468\uFF19]/gi,a:/[\u00AA\u00E0-\u00E5\u0101\u0103\u0105\u01CE\u01DF\u01E1\u01FB\u0201\u0203\u0227\u1D43\u1E01\u1E9A\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u24D0\uFF41]/gi,
b:/[\u1D47\u1E03\u1E05\u1E07\u24D1\uFF42]/gi,c:/[\u00E7\u0107\u0109\u010B\u010D\u1D9C\u1E09\u24D2\uFF43]/gi,d:/[\u010F\u1D48\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u217E\u24D3\uFF44]/gi,e:/[\u00E8-\u00EB\u0113\u0115\u0117\u0119\u011B\u0205\u0207\u0229\u1D49\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u2091\u212F\u24D4\uFF45]/gi,f:/[\u1DA0\u1E1F\u24D5\uFF46]/gi,g:/[\u011D\u011F\u0121\u0123\u01E7\u01F5\u1D4D\u1E21\u210A\u24D6\uFF47]/gi,h:/[\u0125\u021F\u02B0\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E96\u210E\u24D7\uFF48]/gi,
i:/[\u00EC-\u00EF\u0129\u012B\u012D\u012F\u0133\u01D0\u0209\u020B\u1D62\u1E2D\u1E2F\u1EC9\u1ECB\u2071\u2139\u2170\u24D8\uFF49]/gi,j:/[\u0135\u01F0\u02B2\u24D9\u2C7C\uFF4A]/gi,k:/[\u0137\u01E9\u1D4F\u1E31\u1E33\u1E35\u24DA\uFF4B]/gi,l:/[\u013A\u013C\u013E\u0140\u01C9\u02E1\u1E37\u1E39\u1E3B\u1E3D\u2113\u217C\u24DB\uFF4C]/gi,m:/[\u1D50\u1E3F\u1E41\u1E43\u217F\u24DC\uFF4D]/gi,n:/[\u00F1\u0144\u0146\u0148\u01F9\u1E45\u1E47\u1E49\u1E4B\u207F\u24DD\uFF4E]/gi,o:/[\u00BA\u00F2-\u00F6\u014D\u014F\u0151\u01A1\u01D2\u01EB\u01ED\u020D\u020F\u022B\u022D\u022F\u0231\u1D52\u1E4D\u1E4F\u1E51\u1E53\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u2092\u2134\u24DE\uFF4F]/gi,
p:/[\u1D56\u1E55\u1E57\u24DF\uFF50]/gi,q:/[\u02A0\u24E0\uFF51]/gi,r:/[\u0155\u0157\u0159\u0211\u0213\u02B3\u1D63\u1E59\u1E5B\u1E5D\u1E5F\u24E1\uFF52]/gi,s:/[\u015B\u015D\u015F\u0161\u017F\u0219\u02E2\u1E61\u1E63\u1E65\u1E67\u1E69\u1E9B\u24E2\uFF53]/gi,t:/[\u0163\u0165\u021B\u1D57\u1E6B\u1E6D\u1E6F\u1E71\u1E97\u24E3\uFF54]/gi,u:/[\u00F9-\u00FC\u0169\u016B\u016D\u016F\u0171\u0173\u01B0\u01D4\u01D6\u01D8\u01DA\u01DC\u0215\u0217\u1D58\u1D64\u1E73\u1E75\u1E77\u1E79\u1E7B\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u24E4\uFF55]/gi,
v:/[\u1D5B\u1D65\u1E7D\u1E7F\u2174\u24E5\uFF56]/gi,w:/[\u0175\u02B7\u1E81\u1E83\u1E85\u1E87\u1E89\u1E98\u24E6\uFF57]/gi,x:/[\u02E3\u1E8B\u1E8D\u2093\u2179\u24E7\uFF58]/gi,y:/[\u00FD\u00FF\u0177\u0233\u02B8\u1E8F\u1E99\u1EF3\u1EF5\u1EF7\u1EF9\u24E8\uFF59]/gi,z:/[\u017A\u017C\u017E\u1DBB\u1E91\u1E93\u1E95\u24E9\uFF5A]/gi}},"3.17.2",{requires:["yui-base"]});
YUI.add("uploader-html5",function(a,d){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.Lang.sub,e=a.Uploader.Queue;a.UploaderHTML5=a.extend(b,a.Widget,{_fileInputField:null,_buttonBinding:null,queue:null,initializer:function(){this._buttonBinding=this.queue=this._fileInputField=null;this._fileList=[];this.publish("fileselect");this.publish("uploadstart");this.publish("fileuploadstart");this.publish("uploadprogress");this.publish("totaluploadprogress");this.publish("uploadcomplete");
this.publish("alluploadscomplete");this.publish("uploaderror");this.publish("dragenter");this.publish("dragover");this.publish("dragleave");this.publish("drop")},renderUI:function(){var c=this.get("contentBox"),e=this.get("selectFilesButton");e.setStyles({width:"100%",height:"100%"});c.append(e);this._fileInputField=a.Node.create(b.HTML5FILEFIELD_TEMPLATE);c.append(this._fileInputField)},bindUI:function(){this._bindSelectButton();this._setMultipleFiles();this._setFileFilters();this._bindDropArea();
this._triggerEnabled();this.after("multipleFilesChange",this._setMultipleFiles,this);this.after("fileFiltersChange",this._setFileFilters,this);this.after("enabledChange",this._triggerEnabled,this);this.after("selectFilesButtonChange",this._bindSelectButton,this);this.after("dragAndDropAreaChange",this._bindDropArea,this);this.after("tabIndexChange",function(){this.get("selectFilesButton").set("tabIndex",this.get("tabIndex"))},this);this._fileInputField.on("change",this._updateFileList,this);this._fileInputField.on("click",
function(a){a.stopPropagation()},this);this.get("selectFilesButton").set("tabIndex",this.get("tabIndex"))},_rebindFileField:function(){this._fileInputField.remove(!0);this._fileInputField=a.Node.create(b.HTML5FILEFIELD_TEMPLATE);this.get("contentBox").append(this._fileInputField);this._fileInputField.on("change",this._updateFileList,this);this._setMultipleFiles();this._setFileFilters()},_bindDropArea:function(a){a=a||{prevVal:null};var b=this.get("dragAndDropArea");null!==a.prevVal&&(a.prevVal.detach("drop",
this._ddEventHandler),a.prevVal.detach("dragenter",this._ddEventHandler),a.prevVal.detach("dragover",this._ddEventHandler),a.prevVal.detach("dragleave",this._ddEventHandler));null!==b&&(b.on("drop",this._ddEventHandler,this),b.on("dragenter",this._ddEventHandler,this),b.on("dragover",this._ddEventHandler,this),b.on("dragleave",this._ddEventHandler,this))},_bindSelectButton:function(){this._buttonBinding=this.get("selectFilesButton").on("click",this.openFileSelectDialog,this)},_ddEventHandler:function(b){b.stopPropagation();
b.preventDefault();if(-1<a.Array.indexOf(b._event.dataTransfer.types,"Files"))switch(b.type){case "dragenter":this.fire("dragenter");break;case "dragover":this.fire("dragover");break;case "dragleave":this.fire("dragleave");break;case "drop":b=b._event.dataTransfer.files;var c=[],e=this.get("fileFilterFunction");e?a.each(b,function(b){b=new a.FileHTML5(b);e(b)&&c.push(b)}):a.each(b,function(b){c.push(new a.FileHTML5(b))});0<c.length&&(b=this.get("fileList"),this.set("fileList",this.get("appendNewFiles")?
b.concat(c):c),this.fire("fileselect",{fileList:c}));this.fire("drop",{fileList:c})}},_setButtonClass:function(a,b){b?this.get("selectFilesButton").addClass(this.get("buttonClassNames")[a]):this.get("selectFilesButton").removeClass(this.get("buttonClassNames")[a])},_setMultipleFiles:function(){!0===this.get("multipleFiles")?this._fileInputField.set("multiple","multiple"):this._fileInputField.set("multiple","")},_setFileFilters:function(){0<this.get("fileFilters").length?this._fileInputField.set("accept",
this.get("fileFilters").join(",")):this._fileInputField.set("accept","")},_triggerEnabled:function(){this.get("enabled")&&null===this._buttonBinding?(this._bindSelectButton(),this._setButtonClass("disabled",!1),this.get("selectFilesButton").setAttribute("aria-disabled","false")):!this.get("enabled")&&this._buttonBinding&&(this._buttonBinding.detach(),this._buttonBinding=null,this._setButtonClass("disabled",!0),this.get("selectFilesButton").setAttribute("aria-disabled","true"))},_getFileList:function(){return this._fileList.concat()},
_setFileList:function(a){this._fileList=a.concat();return this._fileList.concat()},_updateFileList:function(b){b=b.target.getDOMNode().files;var c=[],e=this.get("fileFilterFunction");e?a.each(b,function(b){b=new a.FileHTML5(b);e(b)&&c.push(b)}):a.each(b,function(b){c.push(new a.FileHTML5(b))});0<c.length&&(b=this.get("fileList"),this.set("fileList",this.get("appendNewFiles")?b.concat(c):c),this.fire("fileselect",{fileList:c}));this._rebindFileField()},_uploadEventHandler:function(a){switch(a.type){case "file:uploadstart":this.fire("fileuploadstart",
a);break;case "file:uploadprogress":this.fire("uploadprogress",a);break;case "uploaderqueue:totaluploadprogress":this.fire("totaluploadprogress",a);break;case "file:uploadcomplete":this.fire("uploadcomplete",a);break;case "uploaderqueue:alluploadscomplete":this.queue=null;this.fire("alluploadscomplete",a);break;case "file:uploaderror":case "uploaderqueue:uploaderror":this.fire("uploaderror",a);break;case "file:uploadcancel":case "uploaderqueue:uploadcancel":this.fire("uploadcancel",a)}},openFileSelectDialog:function(){var a=
this._fileInputField.getDOMNode();a.click&&a.click()},upload:function(b,c,e){c=c||this.get("uploadURL");e=e||this.get("postVarsPerFile");var d=b.get("id");e=e.hasOwnProperty(d)?e[d]:e;b instanceof a.FileHTML5&&(b.on("uploadstart",this._uploadEventHandler,this),b.on("uploadprogress",this._uploadEventHandler,this),b.on("uploadcomplete",this._uploadEventHandler,this),b.on("uploaderror",this._uploadEventHandler,this),b.on("uploadcancel",this._uploadEventHandler,this),b.startUpload(c,e,this.get("fileFieldName")))},
uploadAll:function(a,b){this.uploadThese(this.get("fileList"),a,b)},uploadThese:function(b,c,d){this.queue?this.queue._currentState===e.UPLOADING&&(this.queue.set("perFileParameters",this.get("postVarsPerFile")),a.each(b,function(a){this.queue.addToQueueBottom(a)},this)):(c=c||this.get("uploadURL"),d=d||this.get("postVarsPerFile"),this.queue=new e({simUploads:this.get("simLimit"),errorAction:this.get("errorAction"),fileFieldName:this.get("fileFieldName"),fileList:b,uploadURL:c,perFileParameters:d,
retryCount:this.get("retryCount"),uploadHeaders:this.get("uploadHeaders"),withCredentials:this.get("withCredentials")}),this.queue.on("uploadstart",this._uploadEventHandler,this),this.queue.on("uploadprogress",this._uploadEventHandler,this),this.queue.on("totaluploadprogress",this._uploadEventHandler,this),this.queue.on("uploadcomplete",this._uploadEventHandler,this),this.queue.on("alluploadscomplete",this._uploadEventHandler,this),this.queue.on("uploadcancel",this._uploadEventHandler,this),this.queue.on("uploaderror",
this._uploadEventHandler,this),this.queue.startUpload(),this.fire("uploadstart"))}},{HTML5FILEFIELD_TEMPLATE:"<input type='file' style='visibility:hidden; width:0px; height: 0px;'>",SELECT_FILES_BUTTON:'<button type="button" class="yui3-button" role="button" aria-label="{selectButtonLabel}" tabindex="{tabIndex}">{selectButtonLabel}</button>',TYPE:"html5",NAME:"uploader",ATTRS:{appendNewFiles:{value:!0},buttonClassNames:{value:{hover:"yui3-button-hover",active:"yui3-button-active",disabled:"yui3-button-disabled",
focus:"yui3-button-selected"}},dragAndDropArea:{value:null,setter:function(b){return a.one(b)}},enabled:{value:!0},errorAction:{value:"continue",validator:function(a){return a===e.CONTINUE||a===e.STOP||a===e.RESTART_ASAP||a===e.RESTART_AFTER}},fileFilters:{value:[]},fileFilterFunction:{value:null},fileFieldName:{value:"Filedata"},fileList:{value:[],getter:"_getFileList",setter:"_setFileList"},multipleFiles:{value:!1},postVarsPerFile:{value:{}},selectButtonLabel:{value:"Select Files"},selectFilesButton:{valueFn:function(){return a.Node.create(c(a.UploaderHTML5.SELECT_FILES_BUTTON,
{selectButtonLabel:this.get("selectButtonLabel"),tabIndex:this.get("tabIndex")}))}},simLimit:{value:2,validator:function(a){return 1<=a&&5>=a}},uploadURL:{value:""},uploadHeaders:{value:{}},withCredentials:{value:!0},retryCount:{value:3}}});a.UploaderHTML5.Queue=e},"3.17.2",{requires:["widget","node-event-simulate","file-html5","uploader-queue"]});
YUI.add("squarespace-models-member-permission",function(a){a.namespace("Squarespace.Models");var d=a.Squarespace.Models.MemberPermission=a.Base.create("MemberPermission",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.REST_API_ROOT+"member-permissions",url:a.Squarespace.REST_API_ROOT+"member-permissions/{id}",toJSON:function(b){b=d.superclass.toJSON.call(this);b.memberAccount=b.memberAccount.toJSON();b.permissions=a.Object.keys(b.permissions);return b},serialize:function(){var b=this.toJSON();
delete b.memberAccount;return a.JSON.stringify(b)},isMe:function(){return this.get("memberAccountId")===a.Squarespace.Context.getInstance().get("authenticatedAccount").get("id")},isOwner:function(){return this.get("memberAccountId")===a.Squarespace.Context.getInstance().get("websiteSettings").get("ownerId")}},{ATTRS:{id:{value:null,validator:a.Lang.isString},memberAccountId:{value:null,validator:a.Lang.iString},memberAccount:{value:null,setter:function(b){return b instanceof a.Squarespace.Models.MemberAccount?
b:new a.Squarespace.Models.MemberAccount(b)}},permissions:{value:{},validator:a.Lang.isObject},subscribed:{value:null,validator:a.Lang.isBoolean},createdOn:{value:null,validator:a.Lang.isNumber},lastActiveOn:{value:null,validator:a.Lang.isNumber},lastLoginOn:{value:null,validator:a.Lang.isNumber}}});a.Squarespace.Models.MemberPermissionList=a.Base.create("MemberPermissionList",a.ModelList,[a.Squarespace.ModelSync.REST],{model:a.Squarespace.Models.MemberPermission,getActive:function(){return this.filter(function(b){return!b.get("memberAccount").get("pseudonymAccount")&&
!a.Object.isEmpty(b.get("permissions"))})},getPassive:function(){return this.filter(function(b){return!b.get("memberAccount").get("pseudonymAccount")&&a.Object.isEmpty(b.get("permissions"))})},getPseudonym:function(){return this.filter(function(a){return a.get("memberAccount").get("pseudonymAccount")})}})},"1.0",{requires:"base model json model-list squarespace-model-sync-rest squarespace-models-member-account squarespace-util squarespace-context".split(" ")});
YUI.add("squarespace-content-item-types-video",function(a){var d=a.Base.create("VideoPostEditorBehavior",a.Base,[],{initializer:function(){var b=this.get("model");if(b.get("recordType")===a.Squarespace.Enums.RecordType.VIDEO){var e=this.get("dialog"),d;e.on("ready",function(){var f=e.getField("oembed"),h=e.getField("mainImage"),k=e.getField("title");e.getField("body");var l=e.getField("sourceUrl");f.focus();f.on("dataChange",function(f){l&&l.set("data",f.newVal.url);k.set("data",f.newVal.title);d&&
d.cancel();d=a.later(1E3,this,function(){var a=f.newVal;a.thumbnailUrl&&(b.get("id")?a.thumbnailUrl&&this._applyDefaultThumbnailImage():(b.autoSave(),e.getField("mainImage").get("data").after("idChange",function(){this._applyDefaultThumbnailImage()},this)))})},this);h.after("dataChange",this._syncThumbnailRestore,this);this._syncThumbnailRestore()},this)}},_applyDefaultThumbnailImage:function(){var a=this.get("dialog"),b=a.getField("oembed").getValue().thumbnailUrl;a.getField("mainImage").saveFromUrl(b);
a.getField("overlay").set("data",!0)},_syncThumbnailRestore:function(){this._thumbnailRestoreEv&&this._thumbnailRestoreEv.detach();var a=this.get("dialog"),b=a.getField("oembed"),d=a.getField("mainImage"),a=a.getField("automaticThumbDescription");b.getValue()&&b.getValue().thumbnailUrl&&(!d.get("data")||d.get("data")&&!d.get("data").get("hasFileData"))?(a.setText('<a href="#" class="restore-thumbnail">Restore video provider\'s thumbnail.</a>'),this._thumbnailRestoreEv=a.get("boundingBox").one(".restore-thumbnail").on("click",
function(a){a&&a.halt();this._applyDefaultThumbnailImage()},this)):a.setText("")}}),b=a.namespace("Squarespace.ContentItemEditor").Video=a.Base.create("VideoContentItemEditor",a.Squarespace.ContentItemEditor.Base,[d],{getDialogData:function(){var a=b.superclass.getDialogData.call(this),e=a.structuredContent;a.oembed=e.oembed;a.overlay=e.overlay;return a},sanitizeDialogData:function(c){c=b.superclass.sanitizeDialogData.call(this,c);c.structuredContent=a.merge(c.structuredContent,{oembed:c.oembed,overlay:c.overlay});
delete c.oembed;delete c.overlay;return c}},{ATTRS:{editorConfiguration:{value:{name:"video-editor",title:"Edit {presentationName}",width:800,height:500,overlay:0.5,tabs:[{$include:["tabs.primary.base","tabs.primary.video"]},{$include:"tabs.options.video"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"},initialDataByReference:!0}}}}),d={title:"Edit {presentationName}",name:"minimal-video-editor",width:800,height:400,overlay:0.5,closeOthers:!1,style:"flyout",flyoutPointerDirection:"hidden",
tabs:[{$include:["tabs.primary.video",{icon:a.Squarespace.Rendering.getIconUrl("video",16,"light-solid")}],$update:{".body":{ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"body",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.FULL,editorHeight:147,classNames:"major",title:"Description",description:""}}}}],buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:{$valueFn:function(a){return a.id?"Remove":"Discard"}}},{$value:{type:"duplicate",title:"Duplicate"},$when:function(b){return b.recordType==
a.Squarespace.Enums.RecordType.STORE_ITEM}},{type:"saveAndClose",title:"Save"}]};a.namespace("Squarespace.ContentItemEditor").VideoMinimal=a.Base.create("VideoContentItemEditorMinimal",b,[],{},{ATTRS:{editorConfiguration:{value:d},anchorNode:{getter:function(){return null}}}})},"1.0",{requires:["squarespace-content-item-types-base"]});
YUI.add("squarespace-tourtip",function(a){a.mix(a.Node.DOM_EVENTS,{DOMNodeRemoved:!0});a.namespace("Squarespace").Tourtip=a.Base.create("tourtip",a.Widget,[],{initializer:function(d){var b={type:"tooltip",bodyContent:this._getContent(),zIndex:5E4};config=a.merge(b,d);if(config["align.node"]&&!a.one(config["align.node"])||config.align&&config.align.node&&!a.one(config.align.node))console.warn("The node specified as a target for the tooltip is missing: "+(config["align.node"]||config.align.node));else{this.alignNode=
a.one(config["align.node"]||(config.align?config.align.node:null));this.panel=new a.Squarespace.Panel(config);this.after("titleChange",this._setContent,this,this._getContent);this.after("bodyChange",this._setContent,this,this._getContent);this.after("iconChange",this._setContent,this,this._getContent);if(this.alignNode)this.alignNode.on("DOMNodeRemoved",this.hide,this);this.panel.on("click",this.hide,this);!a.Lang.isUndefined(config.hideIn)&&0<config.hideIn&&a.later(config.hideIn,this,this.hide)}},
hide:function(d){this.hidden||(d&&d.preventDefault(),this.hidden=!0,this.panel&&(d=new a.Anim({node:this.panel.get("boundingBox"),to:{opacity:0},duration:0.15}),d.on("end",function(){this.destroyer();this.fire("hidden")},this),d.run()))},_getContent:function(){var d=this.get("title"),b=this.get("body"),c=this.get("icon"),c=a.Node.create('<div class="'+this.getClassName()+" "+this.getClassName(c)+'"></div>');d&&c.append('<div class="'+this.getClassName("title")+'">'+d+"</div>");d=a.Node.create('<div class="'+
this.getClassName("body")+'"></div>');d.setContent(b);c.append(d);return c},_setContent:function(a){this.panel.set("bodyContent",a)},destroyer:function(){this.panel.destroy()}},{CSS_PREFIX:"sqs-tourtip",NAME:"tip",ATTRS:{icon:{value:"open",validator:function(a){return"info"===a||"question"===a||"okay"===a||"alert"===a||"open"===a}},title:{},body:{},direction:{value:"below"}}})},"0.1.0",{requires:["node","squarespace-panel"]});
YUI.add("squarespace-block-product-editor",function(a){a.namespace("Squarespace.Block.Editor").Product=a.Base.create("product-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Product")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Product"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Product=a.Base.create("blockProductEditor",a.Squarespace.ModelEditorDialog,[],{},
{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={width:420,height:370,name:"editProductBlock",buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],primaryTabs:[{title:"Edit Product",icon:"/universal/images-v6/icons/icon-products-18-light-solid.png",scroll:!1,fields:[{ctor:a.Squarespace.DialogFields.ProductChooser,name:"productId",mode:"squarespace",maxResults:15},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showImage","strings.title":"Show Image",
"strings.description":"Show a thumbnail image of this product."}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showTitle","strings.title":"Show Title","strings.description":"Show the name of this product"}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showPrice","strings.title":"Show Price","strings.description":"Display the current price of this product."}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showExcerpt","strings.title":"Show Description","strings.description":"Show the brief description of this product."}},
{ctor:a.Squarespace.DialogFields.Check,config:{name:"showBuyButton","strings.title":"Show Add To Cart Button","strings.description":"Show a button that lets customers add this to their cart."}}]}]}},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-product-chooser","squarespace-model-editor"]});
YUI.add("squarespace-edit-controller-base",function(a){var d=d||function(){};a.namespace("Squarespace.Layout").EditMode=a.Squarespace.enumFactory({WEB_APP:1,MOBILE_APP:2,EMAIL:3});a.namespace("Squarespace").EditControllerBase=a.Base.create("editcontroller",a.Base,[],{initializer:function(){this._scrollNodes=[];this.changedLayouts=[];this.after("editingChange",this._syncEditing,this);this.after("dropInfoChange",this._afterDropInfoChange,this);this.addBrowserClassnames()},addBrowserClassnames:function(){a.UA.gecko&&
16>a.UA.gecko&&a.one("html").addClass("ua-gecko-old")},_syncEditing:function(a){a.silent||(a.newVal?this._enableEditing():this._disableEditing())},_afterDropInfoChange:function(a){a.newVal?this.alignInsertMarker(a.newVal):this.hideInsertMarker()},getLayoutNodes:function(){return a.all(".sqs-layout")},pluginLayoutBuilder:function(b,c,e){var d=a.Squarespace.Layout.Builder.NS;b.hasPlugin(d)||(a.Lang.isValue(e)||(e=this.get("defaultEditMode")),b.plug(a.Squarespace.Layout.Builder,{editController:this,
layout:c,editMode:e}));return b[d]},destroyLayoutBuilder:function(b){b.unplug(a.Squarespace.Layout.Builder.NS)},pluginLayoutEditor:function(b,c,e,d){this.get("editing")||this.set("editing",!0,{silent:!0});a.Lang.isValue(d)||(d=this.get("defaultEditMode"));b.hasPlugin(a.Squarespace.Layout.Builder.NS)||this.pluginLayoutBuilder(b,c,d);b=b.plug(a.Squarespace.Layout.Editor,{editMode:d,editController:this,scrollNode:e||this.get("scrollNode"),forceSingleColumn:this.get("forceSingleColumn"),markdownMode:this.get("markdownMode"),
columns:a.Squarespace.Block.Utils.getValFromClass(b,"sqs-grid-")})[a.Squarespace.Layout.Editor.NS];this.getBlockTrashInstance();return b},getBlockTrashInstance:function(){this._blockTrashInstance||(this._blockTrashInstance=new a.Squarespace.Layout.BlockTrash(a.merge(this.get("passableConfig"),{editController:this})));return this._blockTrashInstance},destroyBlockTrashInstance:function(){this._blockTrashInstance&&(this._blockTrashInstance.destroy(),this._blockTrashInstance=null)},destroyLayoutEditor:function(b){this.destroyLayoutBuilder(b);
b.unplug(a.Squarespace.Layout.Editor.NS)},layoutBeforeDragStart:function(){this.getLayoutNodes().each(function(b){a.Lang.isObject(b.LayoutEditor)&&b.LayoutEditor.beforeDrag()},this)},layoutDragStart:function(b){a.one("html").addClass("sqs-dragging-block");this.changedLayouts=[];var c=a.DD.DDM.activeDrag;c&&(c=c.get("node").ancestor(".sqs-layout"))&&this.changedLayouts.push(c);this.setInsertMarkerLayout(b)},processEdgeInfo:function(b){b=b.newVal;var c=this.get("dropBlockInfo"),e=b.node,d=c.ancestors,
f=c.parentLayout,h=e.getData("isAdjacentToBlockEdge"),k=b.direction,l=b.region;e.hasClass("sqs-content-overlay")&&(e=e.getData("alignNode"));var n=this.getType(e),p="content"===n?e.ancestor(".sqs-block"):e;if(!c.blockNode||c.blockNode!==p)d=p.ancestors(".sqs-block, .sqs-col, .sqs-row, .sqs-layout",!0,".sqs-layout"),f=d.shift(),this.set("dropBlockInfo",{blockNode:p,parentLayout:f,ancestors:d});c=a.DD.DDM.activeDrag.get("dragWidget").get("floatable")&&"content"===n&&this._isHorizontalDirection(k);if(!c&&
(this.get("forceSingleColumn")||1===f.LayoutEditor.get("columns")))k=b.quad.y;this._isTraversableDirection(k,h)&&(e=this._getTraversedDropNode(e,k,b),n=this.getType(e),c&&(c="content"===n));"content"===n?!c&&this._isHorizontalDirection(k)&&(e=e.ancestor(this.get("contentParentBlockSelector")),n=this.getType(e)):"block"===n&&(this._isHorizontalDirection(k)&&this._isOnlyBlockInColumn(e))&&(e=e.ancestor(".sqs-col"),n=this.getType(e));e!==b.node&&(l=e.get("region"));this.set("dropInfo",{node:e,direction:k,
shouldFloat:c,type:n,region:l})},_isTraversableDirection:function(a,c){var e=!0;c&&void 0!==c[a]&&(e=c[a]);return e},_getTraversableDepth:function(a,c,e){for(var d=e.size(),f=0;a&&this._canTraverseToParent(a,c);)f++,a=e.item(--d);return f},_canTraverseToParent:function(a,c){var e=a.hasClass("sqs-col"),d=!this.get("forceSingleColumn");return e&&this._isVerticalDirection(c)||d&&this._canTraverseHorizontallyFromColumn(c,a)||!e&&d&&this._isHorizontalDirection(c)||this._canTraverseVerticallyFromBlockOrRow(c,
a)},_getTraversedDropNode:function(a,c,e){var d=this.get("dropBlockInfo.ancestors");d.item(d.size()-1)===a&&d.pop();this.get("forceSingleColumn")&&(d=d.filter(".sqs-block"));var f=this._getTraversableDepth(a,c,d);if(f){c=d.size();var f=c-f,h=Math.min(e.region.width,e.region.height)/4;e=Math.floor(c*e.distance/h);e=Math.max(f,Math.min(c,e));a=d.item(e)||a}return a},_isHorizontalDirection:function(a){return"left"===a||"right"===a},_isVerticalDirection:function(a){return"top"===a||"bottom"===a},_canTraverseHorizontallyFromColumn:function(a,
c){return"left"===a&&!c.previous(".sqs-col")||"right"===a&&!c.next(".sqs-col")},_canTraverseVerticallyFromBlockOrRow:function(a,c){return"top"===a&&!c.previous(".sqs-block, .sqs-row")||"bottom"===a&&!c.next(".sqs-block, .sqs-row")},_isOnlyBlockInColumn:function(a){return 0===a.siblings(".sqs-block:not(.sqs-float), .sqs-row").size()},getType:function(a){if(!a)return"unknown";if(a.hasClass("sqs-block")||a.hasClass("free-block"))return"block";if(a.hasClass("sqs-col"))return"column";if(a.hasClass("sqs-row"))return"row";
if(a.ancestor(this.get("contentParentBlockSelector")))return"content"},layoutDragEnd:function(){a.one("html").removeClass("sqs-dragging-block");this.insertBlockToLayout();this.getLayoutNodes().each(function(b){b.hasPlugin(a.Squarespace.Layout.Editor.NS)&&b.LayoutEditor.afterDrag();b.hasPlugin(a.Squarespace.Layout.Builder.NS)&&b.LayoutBuilder.fire("widget:contentUpdate")},this);this.changedLayouts.length&&this.cleanGrids()},insertBlockToLayout:function(){var b=this.get("dropInfo"),c=this.get("selection");
if(a.Lang.isValue(b)&&a.Lang.isValue(b.node)&&c){var e=this._getBlockNodeListFromSelection(c,b);if(e.size()){var d=b.node.ancestor(".sqs-layout");e.each(function(a){d.LayoutEditor.insertBlock(a,b)});a.Array.some(this.changedLayouts,function(a){return a===d})||this.changedLayouts.push(d);a.Widget.getByNode(c).show();this.cleanGrids();this.setAttrs({dropInfo:null,dropBlockInfo:{},selection:null})}}},_getBlockNodeListFromSelection:function(b,c){return b&&(a.Squarespace.Block.Utils.isBlock(b)&&!b.hasClass("sqs-destroyme")||
!a.Lang.isValue(c))?new a.NodeList(b):new a.NodeList},cleanGrids:function(b){b?a.Lang.isArray(b)||(b=[b]):(b=this.changedLayouts||[],this.changedLayouts=[]);b.forEach(function(a){a.LayoutEditor.cleanGrid()},this)},_enableEditing:function(){a.one("html").addClass("sqs-page-editing")},_disableEditing:function(){a.one("html").removeClass("sqs-page-editing");a.detach("editCtrl|*");this.getLayoutNodes().each(function(b){if(b.hasPlugin(a.Squarespace.Layout.Editor.NS)){var c=b.LayoutEditor.dragDelegate;
c.detach("editCtrl|*");c.dd.detach("editCtrl|*");b.unplug(a.Squarespace.Layout.Editor)}},this)},enableInsertPoints:d,disableInsertPoints:d,alignInsertPoints:d,isMobileApp:function(){return!1},getRenderableBlocks:function(b){b=b.enumName;a.Lang.isValue(this._renderableBlockMap)||this._initRenderableBlocksMap();var c=this._renderableBlockMap[b];if(!a.Lang.isValue(c)){c=this._renderableBlockCtorMap[b];if(!a.Lang.isValue(c))return null;c=this._renderableBlockMap[b]=new c(this.get("childCtorOptions"))}return c},
getInsertMenu:function(b,c){a.Lang.isValue(this._insertMenuMap)||this._initInsertMenuCtorMap();return a.Lang.isValue(c)?this._upsertInsertMenu(b,c):this._insertMenuMap[b.enumName]},_upsertInsertMenu:function(b,c){var e=this._insertMenuMap[b.enumName];if(a.Lang.isValue(e))e.setAttrs(c);else{e=this._insertMenuCtorMap[b.enumName];if(!a.Lang.isValue(e))return null;e=this._insertMenuMap[b.enumName]=new e(a.merge(this.get("childCtorOptions"),c))}return e},_initRenderableBlocksMap:function(){this._renderableBlockCtorMap=
{};this._renderableBlockMap={};a.Array.each(this.get("renderableBlockSet"),function(b){a.Lang.isValue(b.ctor)&&(this._renderableBlockCtorMap[b.editMode.enumName]=b.ctor)},this)},_initInsertMenuCtorMap:function(){this._insertMenuCtorMap={};this._insertMenuMap={};a.Array.each(this.get("insertMenuSet"),function(b){a.Lang.isValue(b.ctor)&&(this._insertMenuCtorMap[b.editMode.enumName]=b.ctor)},this)},_createInsertMarkerInstance:function(b){this._insertMarkerInstance=new a.Squarespace.Layout.InsertMarker(a.merge(this.get("childCtorOptions"),
{render:b}));b.plug(a.Squarespace.NodeDestroyNotifier,{onDestroy:this._destroyInsertMarkerInstance,context:this})},setInsertMarkerLayout:function(a){var c=this._insertMarkerInstance;!c||c&&c.get("destroyed")?this._createInsertMarkerInstance(a):a!==c.get("render")&&(this._destroyInsertMarkerInstance(),this._createInsertMarkerInstance(a))},_destroyInsertMarkerInstance:function(){this._insertMarkerInstance&&(this._insertMarkerInstance.destroy(),delete this._insertMarkerInstance)},alignInsertMarker:function(b){var c=
this._insertMarkerInstance;a.Lang.isObject(b)&&c&&!c.get("locked")&&(c.set("info",b),c.show())},hideInsertMarker:function(){this._insertMarkerInstance&&this._insertMarkerInstance.hide()},toggleInsertMarkerLock:function(a){this._insertMarkerInstance&&this._insertMarkerInstance.set("locked",a)},updateInsertMarkerConstrainNode:function(b){var c=this._insertMarkerInstance;c&&(a.Lang.isValue(b)&&c.set("constrainZIndex",b),c.positionConstrainNode())},destructor:function(){a.one(a.config.doc).detach("editCtrl|*");
this.set("editing",!1);this.destroyLayoutEditor();this._destroyInsertMarkerInstance()}},{ATTRS:{contentParentBlockSelector:{getter:function(b){return!a.Lang.isValue(b)?"":b},setter:function(a,c){var e=this.get(c);return 0===e.length?a:-1<e.indexOf(a)?e:e+", "+a}},editing:{value:!1},scrollNode:{valueFn:function(){return a.one(a.UA.gecko||a.UA.ie?"html":"body")},lazyAdd:!1},dropInfo:{value:{node:null,direction:"",distance:0,quad:null,region:null}},dropBlockInfo:{value:{blockNode:null,ancestors:null,
parentLayout:null}},selection:{},markdownMode:{value:!1},childCtorOptions:{value:{}},forceSingleColumn:{value:!1}}})},"1.0",{requires:"base event json-parse node parallel squarespace-block-utils squarespace-enum-factory squarespace-layout-editor squarespace-models-content-collection squarespace-models-layout squarespace-models-template squarespace-layout-trash squarespace-ui-base".split(" ")});
YUI.add("squarespace-layout-insert-block-menu-web-app",function(a){a.namespace("Squarespace.Layout").InsertBlockMenuWebApp=a.Base.create("layoutInsertBlockMenu",a.Squarespace.Layout.InsertBlockMenuWebBase,[],{_getInsertableBlockItems:function(){var d=[],d=d.concat([a.Squarespace.BlockType.FORM,a.Squarespace.BlockType.NEWSLETTER,a.Squarespace.BlockType.MAP,a.Squarespace.BlockType.CODE,a.Squarespace.BlockType.MENU,a.Squarespace.BlockType.CALENDAR,a.Squarespace.BlockType.OPENTABLE]);a.Squarespace.Utils.isBetaFeatureEnabled()&&
d.push(a.Squarespace.BlockType.TOURDATES);return[{label:"Basic",items:[a.Squarespace.BlockType.HTML,a.Squarespace.BlockType.MARKDOWN,a.Squarespace.BlockType.QUOTE,a.Squarespace.BlockType.IMAGE,a.Squarespace.BlockType.GALLERY,a.Squarespace.BlockType.VIDEO,a.Squarespace.BlockType.AUDIO,a.Squarespace.BlockType.EMBED]},{label:"Commerce",items:[a.Squarespace.BlockType.PRODUCT,a.Squarespace.BlockType.AMAZON,a.Squarespace.BlockType.DONATION]},{label:"More",items:d},{label:"Layout",items:[a.Squarespace.BlockType.SPACER,
a.Squarespace.BlockType.HORIZONTAL_RULE]},{label:"Content",items:[a.Squarespace.BlockType.SEARCH,a.Squarespace.BlockType.COLLECTION_LINK,a.Squarespace.BlockType.BUTTON,a.Squarespace.BlockType.SUMMARY_V2,a.Squarespace.BlockType.TAGCLOUD,a.Squarespace.BlockType.POSTS_BY_TAG,a.Squarespace.BlockType.POSTS_BY_AUTHOR,a.Squarespace.BlockType.POSTS_BY_CATEGORY,a.Squarespace.BlockType.POSTS_BY_MONTH]},{label:"Social",items:[a.Squarespace.BlockType.TWITTER,a.Squarespace.BlockType.FOURSQUARE,a.Squarespace.BlockType.SOCIAL_ACCOUNT_LINKS_V2,
a.Squarespace.BlockType.RSS,a.Squarespace.BlockType.FIVEHUNDREDPIX,a.Squarespace.BlockType.INSTAGRAM,a.Squarespace.BlockType.FLICKR,a.Squarespace.BlockType.SOUNDCLOUD]}]}},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{editMode:{readOnly:!0,value:a.Squarespace.Layout.EditMode.WEB_APP}}})},"1.0",{requires:["base","squarespace-enum","squarespace-layout-insert-block-menu-web-base","squarespace-layout-renderable-blocks-web-app"]});
YUI.add("squarespace-plugin-money-formatter",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.MoneyFormatter=a.Base.create("moneyFormatter",a.Squarespace.Plugin.NumericFormatter,[],{_transformToData:function(d){return Number(a.Squarespace.Utils.convertToCents(d))}},{NS:"moneyFormatterPlugin",ATTRS:{prefixUnit:{valueFn:function(){return a.Squarespace.Commerce.currencySymbol()}},displayFormatter:{value:a.Squarespace.Commerce.moneyFormat}}})},"1.0",{requires:["plugin","squarespace-util",
"squarespace-commerce-utils","squarespace-plugin-numeric-formatter"]});
YUI.add("squarespace-frontend-edit-controller-page-configuration",function(a){var d=a.namespace("Squarespace.Frontend.EditController"),b=a.Squarespace.Frontend.OverlayEditorControl,c=a.Squarespace.Plugin.NodeOverlay;d.PageConfiguration=a.Base.create("PageConfiguration",d.Base,[],{show:function(){this._isDemoCollection()?a.Squarespace.Utils.isDamaskEnabled()&&this._plugExampleContentOverlay():this._plugPageConfiguration()},hide:function(){var a=this.get("rootNode");a.unplug(b);a.unplug(c)},_plugPageConfiguration:function(){a.Squarespace.ContentCollectionCache.getCollectionById(this._getCollectionId(),
a.bind(function(c){c.getTemplateConfiguration().get("collectionType")==a.Squarespace.CollectionTypes.GENERIC?this.get("rootNode").plug(b,{action:function(){this._navigateToBackend(c.get("urlId"))},context:this,label:"Manage "+c.getTemplateConfiguration().get("title")}):this.get("rootNode").plug(b,{action:this._onConfigureClick,context:this,label:"Page Settings"})},this))},_navigateToBackend:function(a){this.fire("navigate",{path:"/pages/"+a})},_plugExampleContentOverlay:function(){this.get("rootNode").plug(c,
{strings:{title:"Example Content",message:"Use the controls below to either remove this page or make it your own."},buttons:[{onClick:function(){a.Squarespace.ContentCollectionCache.getCollectionById(this._getCollectionId(),function(b){b.cloneToNewCollection().then(a.bind(function(){this.fire("collection:example:cloned",{collection:b})},this))})},context:this,"strings.text":"Make a Page Like This"},{onClick:function(){a.Squarespace.NavigationUIUtils.deleteCollection(collection);this.fire("collection:example:removed",
{collection:collection})},context:this,"strings.text":"Remove Example Page"}]})},_onConfigureClick:function(){a.Squarespace.ContentCollectionCache.getCollectionById(this._getCollectionId(),function(b){b.on("save",function(){a.config.win.location.reload()});b=new a.Squarespace.Editor.Collection({model:b});b.plug(a.Squarespace.ModelEditorPlugins.LoadBeforeShowing);b.show()})},_getCollectionId:function(){var b=this.get("rootNode");return b.hasAttribute("data-collection-id")?b.getAttribute("data-collection-id"):
a.config.win.Static.SQUARESPACE_CONTEXT.collectionId},_isDemoCollection:function(){return a.Squarespace.ContentCollectionUtils.isDemoCollectionId(this._getCollectionId())}})},"1.0",{requires:["base","squarespace-frontend-edit-controller-base","squarespace-plugin-node-overlay"]});
YUI.add("squarespace-block-code-editor",function(a){a.namespace("Squarespace.Block.Editor").Code=a.Base.create("code-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.afterHostMethod("_setWidgetContent",this._afterSetContent,this)},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Code")},_afterSetContent:function(){this._cb.all('img,frame,iframe,object,video,audio,embed,svg,input[type="image"],map').each(function(a){this._handles.push(a.on("load",
this._fireContentUpdate,this))},this)},_fireContentUpdate:function(){this._host.fire("widget:contentUpdate")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Code"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Code=a.Base.create("block-code-editor",a.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(b){if(b.wysiwyg&&b.wysiwyg.wysiwyg){var c=b.text||"";b=b.wysiwyg;b.text=c;delete b.id;return b}!b.wysiwyg.isSource&&("htmlmixed"===b.wysiwyg.mode||"html"===b.wysiwyg.mode)?(b.html=b.wysiwyg.source,
b.wysiwyg.source=""):a.Lang.isUndefined(b.wysiwyg.rendered)||(b.html=b.wysiwyg.rendered);delete b.wysiwyg.rendered;return b},getDialogData:function(){var a=this.get("model").toJSON();return{text:a.source,wysiwyg:a}}},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={width:575,height:318,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Code",icon:"/universal/images-v6/icons/icon-code-16-light.png",fields:[{type:"wysiwyg",
height:250,width:525,countHeight:!0,name:"wysiwyg",title:"HACK THE PLANET",titleStyle:"inline",engine:"code",menuConfig:"code"}]}]}},"1.0",{requires:["squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-wysiwyg"]});
YUI.add("squarespace-block-donation-editor",function(a){a.namespace("Squarespace.Block.Editor").Donation=a.Base.create("donation-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Donation")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Donation"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Donation=a.Base.create("blockDonationEditor",a.Squarespace.ModelEditorDialog,
[],{initializer:function(){this.plug(a.Squarespace.ModelEditorPlugins.LoadBeforeShowing)}},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={name:"editDonationBlock",width:440,height:440,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],primaryTabs:[{title:"Edit Donation",tabTitle:"Description",icon:"/universal/images-v6/icons/icon-donation-18-light-solid.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.HTML,config:{className:"description",
content:'<div class="description-label">Donations</div>This donation button will take visitors to a page where they can make a contribution to your cause. You can view and manage donations in the Commerce section of your site manager.'}},{ctor:a.Squarespace.DialogFields.Text,name:"title",config:{className:"thin","strings.title":"Title","strings.placeholder":'e.g. "The Squarespace Education Fund"',"strings.description":"The title of the cause or program appears on the Donate page as well as in the in the Thank You email to donors."}},
{ctor:a.Squarespace.DialogFields.TextArea,name:"description",config:{"strings.title":"Short Description","strings.placeholder":"e.g. 100% of every donation goes directly to programming. We deeply appreciate your support!","strings.description":"This text appears on the Donate page beneath the title and can be used to give context to donors."}},{ctor:a.Squarespace.DialogFields.Text,name:"buttonLabel",config:{className:"thin",defaultValue:"Donate","strings.title":"Custom Button Label","strings.placeholder":'The label on the button, e.g. "Donate"',
"strings.description":"You can customize the call to action of the button."}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Button Alignment",name:"buttonAlignment",defaultValue:"left",className:"thin dark",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]}}]},{tabTitle:"Amounts",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.LabelledValueTable,name:"suggestedContributions",config:{"strings.title":"Suggested Contribution Amounts",
"strings.description":"Squarespace recommends the below suggested amounts. You have the option to label these amounts: e.g. \u201cGold Sponsor\u201d or \u201cFeeds 10 cats\u201d. Donors will also be able to enter their own amount.","strings.valueLabel":"Amount","strings.labelLabel":"Label (optional)","strings.emptyMessage":"No suggested contributions. Visitors can enter any amount.",valueKey:"amountCents",labelKey:"label",valueInputPlugin:a.Squarespace.Plugin.MoneyFormatter}}]},{tabTitle:"Additional",
scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.HTML,config:{name:"formBuilderTitle",className:"description",content:'<div class="description-label">Additional Information</div> Prompt your donors to submit additional information as they make a contribution. (e.g. you can provide the option to make a donation in honor of someone or choose a gift as a thank you for their donation)'}},{ctor:a.Squarespace.DialogFields.FormBuilder,config:{name:"customForm"}}]}]}},"1.0",{requires:"base squarespace-block-editor-dialog squarespace-damask-context-globals squarespace-dialog-html squarespace-dialog-text squarespace-dialog-text-area squarespace-dialog-labelled-value-table squarespace-dialog-form-builder".split(" ")});
YUI.add("squarespace-member-select-dialog",function(a){a.namespace("Squarespace").MemberSelectDialog=a.Base.create("MemberSelectDialog",a.Base,[],{initializer:function(d){var b={style:"flyout",name:"changeAuthor",closeOthers:!1,overlay:0.5,width:400,top:100,discardChangesConfirmation:!1,buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:this.get("saveButtonText")}],tabs:[{title:this.get("title"),icon:this.get("icon"),fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:this.get("description")}},
{ctor:a.Squarespace.DialogFields.Select,config:{"strings.placeholder":this.get("selectPlaceholder"),name:"member",className:"thin"}}]}]};this._dialog=new a.Squarespace.EditingDialog(a.merge(b,d));this._dialog.on("send-requested",this._onSendRequested,this)},show:function(){this._dialog.show();this._dialog.showSaveOverlay();this._loadMemberData()},_onSendRequested:function(){var d=this._dialog.getField("member"),b=d.get("data");!a.Lang.isString(b)||0>=b.length?(d.showError(this.get("didntSelectError")),
this.allowEditing()):(this.get("memberPermissionsList").some(function(a){a.get("memberAccountId")===b&&(this.set("selectedMemberPermission",a),this.set("selectedMember",a.get("memberAccount")))},this),this.get("showConfirmation")?this._showConfirmation():this._fireMemberChosen())},_showConfirmation:function(){var d=new a.Squarespace.Widgets.Confirmation({"strings.title":this.get("confirmationText.title"),"strings.message":this.get("confirmationText.body")});d.on("confirm",this._fireMemberChosen,this);
d.on("cancel",this.allowEditing,this)},_loadMemberData:function(){this._dialog.updateTitle(a.Squarespace.DialogStates.LOADING);if(a.Lang.isValue(this.get("memberPermissionsList")))this._processMemberData(),this._dialog.hideSaveOverlay();else var d=(new a.Squarespace.Models.MemberPermissionList).load(a.bind(function(){this.set("memberPermissionsList",d);this._processMemberData();this._dialog.hideSaveOverlay()},this))},_processMemberData:function(){var d=this.get("memberPermissionsList").filter(this.get("filter"));
0===d.length?(new a.Squarespace.Widgets.Alert({"strings.title":this.get("noOptionsErrorText.title"),"strings.message":this.get("noOptionsErrorText.body")}),this.close()):(d=a.Array.map(d,function(b){var c=b.get("memberAccount"),e=c.get("email"),e=b.get("memberAccount").get("pseudonymAccount")?"":e?"("+e+")":"( - )";return{value:b.get("memberAccountId"),label:a.Lang.sub("{displayName} {displayEmail}",{displayName:a.Escape.html(c.get("displayName")),displayEmail:e})}}),this._dialog.getField("member").set("options",
d))},close:function(){this._dialog.close()},allowEditing:function(){this._dialog.allowEditing()},_fireMemberChosen:function(){this.fire("member-chosen",{memberAccount:this.get("selectedMember"),memberPermission:this.get("selectedMemberPermission")})}},{ATTRS:{title:{validator:a.Lang.isString,writeOnce:"initOnly"},description:{validator:a.Lang.isString,writeOnce:"initOnly"},didntSelectError:{validator:a.Lang.isString,value:"You must make a selection."},saveButtonText:{validator:a.Lang.isString,writeOnce:"initOnly",
value:"Select"},noOptionsErrorText:{validator:function(d){return a.Array.every(a.Object.values(d),a.Lang.isString)},value:{title:"Error",body:"There are no members from which to choose."}},icon:{validator:a.Lang.isString,writeOnce:"initOnly"},selectPlaceholder:{validator:a.Lang.isString,writeOnce:"initOnly",value:"Choose a Member"},confirmationText:{validator:function(d){return a.Array.every(a.Object.values(d),a.Lang.isString)},value:{title:"Are you sure?",body:""}},showConfirmation:{value:!0},memberPermissionsList:{value:null},
selectedMember:{},selectedMemberPermission:{},filter:{validator:a.Lang.isFunction,value:function(){return!0}}}})},"1.0",{requires:"base squarespace-dialog squarespace-dialog-description squarespace-dialog-select squarespace-models-member-permission squarespace-ui-base squarespace-widgets-alert squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-tumblr-connected-account-editor",function(a){a.namespace("Squarespace").TumblrAccountEditor=a.Base.create("tumblrAccountEditor",a.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(d){d.metaData.primaryBlog=d.primaryBlog;a.Array.each(d.metaData.blogs,function(a){a.primary=d.primaryBlog===a.name});return d},getDialogData:function(){var d=a.Squarespace.TumblrAccountEditor.superclass.getDialogData.call(this);d.primaryBlog=d.metaData.primaryBlog;return d}})},"1.0",{requires:["base",
"squarespace-model-editor"]});
YUI.add("squarespace-frontend-plugin-layoutengine-editor",function(a){a.namespace("Squarespace.Frontend.Plugin").LayoutEngineEditor=a.Base.create("LayoutEngineEditor",a.Plugin.Base,[],{initializer:function(){var d=this.get("host");d.empty(!0);d.getAttribute("data-type");d.getAttribute("data-updated-on");var b=a.Squarespace.EditControllerWebApp.getInstance(),c=this.get("pageLayout"),e=d.ancestor(function(b){return"fixed"===b.getComputedStyle("position")||!a.UA.gecko&&!a.UA.ie&&"BODY"===b.get("nodeName")||
"HTML"===b.get("nodeName")},!0);b.pluginLayoutEditor(d,c,e);b.alignInsertPoints(d);c.on("change",function(a){this.set("dirtyLayoutData",!0)},this);a.Squarespace.Utils.isDamaskEnabled()&&d.addClass("sqs-layoutengine-editor-active")},destructor:function(){var d=this.get("host");a.Squarespace.EditControllerWebApp.getInstance().destroyLayoutEditor(d);d.all(".sqs-block-content[tabindex]").each(function(a){a.removeAttribute("tabindex")});d.removeClass("sqs-layoutengine-editor-active")}},{NS:"layoutEngineEditor",
ATTRS:{pageLayout:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.PageLayout)},dirtyLayoutData:{value:!1,validator:a.Lang.isBoolean},columns:{validator:a.Lang.isNumber}}})},"1.0",{requires:"plugin base-build squarespace-models-layout promise squarespace-edit-controller-web-app squarespace-layout-renderable-blocks-web-app".split(" ")});
YUI.add("squarespace-block-image-editor-email",function(a){var d=a.namespace("Squarespace.Block.Editor").ImageEmail=a.Base.create("image-block-editor-dialog-email",a.Squarespace.Block.Editor.ImageBase,[],{initializer:function(){this.get("host").set("floatable",!1)},_initConfigDialog:function(){var a=d.superclass._initConfigDialog.call(this);a.set("imageContentModel",this._host.contentImage.get("model"));a.set("imageContentWidget",this._host.contentImage);return a},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.ImageEmail")}},
{NS:"blockEditor",ATTRS:{blockName:{value:"Image"},minHSize:{value:2}}});a.namespace("Squarespace.Block.ModelEditorDialog").ImageEmail=a.Base.create("blockImageEditorDialog",a.Squarespace.Block.ModelEditorDialog.Image,[],{_getDialogConfig:function(){return{name:"imageBlockConfig",initialDataByReference:!0,width:600,height:610,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Image",icon:"/universal/images-v6/icons/icon-image-16-light.png",
fields:[{type:"splitter",countHeight:!0,fields:[{ctor:a.Squarespace.DialogFields.FileImage,width:0.33,transientStore:!0,height:168,contentType:"image",name:"image",autoSaveFocalPoint:!0},{type:"stack",width:0.67,fields:[{ctor:a.Squarespace.DialogFields.Text,config:{name:"filename",strings:{title:"Filename",description:"Optional. Set the file name that will appear in image URLs.",placeholder:"something.jpg"},className:"thin dark"}},{ctor:a.Squarespace.DialogFields.CreateLink,config:{name:"clickThrough",
"strings.title":"Clickthrough URL",condensed:!0}}]}]}]}]}}})},"1.0",{requires:"base squarespace-block-image-editor-base squarespace-damask-context-globals squarespace-dialog-check squarespace-dialog-create-link squarespace-dialog-file-image squarespace-dialog-select squarespace-dialog-text squarespace-model-editor".split(" ")});
YUI.add("squarespace-block-logo",function(a){a.namespace("Squarespace.Block").Logo=a.Base.create("block-logo",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-logo",ATTRS:{type:{readOnly:!0,valueFn:function(){return a.Squarespace.BlockType.LOGO}},emailEditor:{readOnly:!0,valueFn:function(){return a.Squarespace.Block.Editor.Logo}}}})},"1.0",{requires:["base","model","squarespace-block-base-modelsync","squarespace-block-logo-editor","squarespace-enum"]});
YUI.add("squarespace-frontend-edit-controller-blog-post",function(a){var d=a.namespace("Squarespace.Frontend.EditController"),b=a.Squarespace.Frontend.Plugin.LayoutEngineEditor,c=a.Squarespace.Plugin.OnelineNodeEditor,e=a.Squarespace.Frontend.OverlayEditorControl,g=a.Squarespace.Models;d.BlogPost=a.Base.create("BlogPost",d.Base,[],{show:function(){var b=this.get("rootNode").getAttribute("data-item-id");b&&(b=new g.ContentItem({id:b}),this.set("model",b),this._layoutEditorInstances=[],a.Squarespace.Utils.isBetaFeatureEnabled("damaskBlogPostFrontendEditing")&&
b.load(a.bind(function(){this._initializeTitleEditor();this._initializeLayoutNodes();this._initializeMainImageEditor()},this)),this._bindContentItemEditorButton())},hide:function(){this._destroyLayoutEngineEditors();this._destroyTitleEditor();this.get("rootNode").unplug(e);this.contentImage&&this.contentImage.destroy()},_bindContentItemEditorButton:function(){this.get("rootNode").plug(e,{action:function(){this.fire("showContentItemEditor",{itemId:this.get("rootNode").getAttribute("data-item-id")})},
label:"Edit Post",context:this})},isTitleEditable:function(){return a.Lang.isValue(this._titleEditor)},isBodyEditable:function(){return 0<this._layoutEditorInstances.length},_getPageLayout:function(){this._pageLayout||(this._pageLayout=new g.PageLayout(this.get("model").get("body.layout")));return this._pageLayout},_isNodeVisible:function(a){if("none"==a.getComputedStyle("display"))return!1;a=a.get("region");return 0<=a.left&&0<=a.top||0<=a.bottom&&0<=a.right||0<=a.left&&0<=a.bottom||0<=a.right&&
0<=a.top},_initializeTitleEditor:function(){function a(b){var c=b.get("childNodes");if(c.isEmpty())return null;for(var e=c.size(),d=0;d<e;d++){var g=c.item(d);if(3==g.get("nodeType")&&0<g.get("textContent").trim().length)return b;if(g=a(g))return g}}this._destroyTitleEditor();var b=this.get("rootNode").all('[data-content-field="title"]');if(!b.isEmpty())for(var c=0;c<b.size();c++){var e=b.item(c);if((e=a(e))&&this._isNodeVisible(e)){this._renderTitleEditor(e);break}}},_destroyTitleEditor:function(){this._titleEditor&&
(this._titleEditor.get("host").unplug(c.NS),this._titleEditor=null)},_renderTitleEditor:function(a){this._titleEditor=a.plug(c,{data:this.get("model").get("title")})[c.NS];this._titleEditor.after("dirtyChange",function(){this._syncDirtyState()},this)},_syncDirtyState:function(){var b=!1;a.Array.each(this._layoutEditorInstances,function(a){a.get("dirtyLayoutData")&&(b=!0)});this._titleEditor&&this._titleEditor.get("dirty")&&(b=!0);this.set("dirty",b)},revert:function(){var b=d.BlogPost.superclass.revert.call(this);
b.then(a.bind(function(){this._pageLayout=null;this._initializeTitleEditor();this._initializeLayoutNodes()},this));return b},save:function(){var b=this.get("model");this._titleEditor&&b.set("title",this._titleEditor.get("data"));if(this._promotedBlockPageLayout){var c=this._getPageLayout().toJSON(),e=this._promotedBlockPageLayout.get("rows").toJSON(),g=this._bodyPageLayout.get("rows").toJSON();c.rows=e.concat(g);b.set("body",{layout:c,raw:!1})}else b.set("body",{layout:this._getPageLayout().toJSON(),
raw:!1});b=d.BlogPost.superclass.save.call(this);b.then(a.bind(function(){a.Array.each(this._layoutEditorInstances,function(a){a.set("dirtyLayoutData",!1)});this._titleEditor&&this._titleEditor.set("dirty",!1)},this));return b},_initializeLayoutNodes:function(){var a=this.get("rootNode").one('.sqs-layout[data-type="item"]'),b=this.get("rootNode").one('.sqs-layout[data-type="promoted-block"]'),c=this._getPageLayout();this._destroyLayoutEngineEditors();if(a&&!b)this._bodyPageLayout=c,this._renderEditor(a,
c,12);else if(a&&b){var e=c.getPageLayoutWithPromotedBlock(this._getPromotedBlockTypes());this._bodyPageLayout=c=c.getPageLayoutSansPromotedBlock(this._getPromotedBlockTypes());this._promotedBlockPageLayout=e;this._renderEditor(a,c,12);this._renderEditor(b,e,12)}},_renderEditor:function(a,c,e){a=a.plug(b,{pageLayout:c,columns:e})[b.NS];a.after("dirtyLayoutDataChange",function(a){this._syncDirtyState()},this);this._layoutEditorInstances.push(a)},_destroyLayoutEngineEditors:function(c){a.Array.each(this._layoutEditorInstances,
function(a){a.get("host").unplug(b.NS)});this._layoutEditorInstances=[]},_usePromotedBlock:function(){var b=a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Singletons.TemplateInstallationListCache").getActiveInstallation(),c=this._getPromotedBlockTypes();return!b.get("disablePromotedBlocks")&&0<c.length},_getPromotedBlockTypes:function(){var b=a.Squarespace.ContentCollectionCache.getById(this.get("model").get("collectionId")).getTemplateConfiguration().get("promotedBlocks");return!a.Lang.isArray(b)?
[]:a.Array.map(b,function(b){var c=a.Squarespace.BlockType[b.toUpperCase()];a.Lang.isValue(c)||console.warn("Could not find a block type for string `"+b+"`");return c})},_initializeMainImageEditor:function(){var b=this.get("rootNode").one('[data-content-field="mainImage"]');if(b){var c=b.one("img");this.contentImage=new a.Squarespace.Content.Image({editable:!0,render:b,model:{imageId:this.get("rootNode").getAttribute("data-item-id"),aspectRatio:100*(b.get("offsetHeight")/b.get("offsetWidth"))}});
b.get("parentNode").get("children").each(function(a){a!=b&&a.setStyle("pointerEvents","none")});this.contentImage.on("image-loaded",function(){this.contentImage.contentEditor.set("editing",!0);this.contentImage.contentEditor.on("editingChange",function(a){a.halt()});c.setStyle("display","none");b.get("parentNode").addClass("sqs-disable-drag-selection")},this)}}})},"1.0",{requires:"squarespace-content-item-types-editor squarespace-damask-context-globals squarespace-frontend-edit-controller-base squarespace-frontend-plugin-oneline-node-editor squarespace-models-content-item squarespace-models-layout".split(" ")});
YUI.add("squarespace-model-editor-panel",function(a){a.Squarespace.ModelEditorPanel=a.Base.create("modelEditorPanel",a.Squarespace.Widgets.SSWidget,[a.Squarespace.Mixins.SaveChanges],{initializer:function(){this.on("modelChange",function(a){a.prevVal&&a.prevVal.detachAll(this.get("id")+"|*")},this);var a=this.get("panel");a&&a.addTarget(this)},renderUI:function(){a.Squarespace.ModelEditorPanel.superclass.renderUI.call(this);this._syncRenderedFields()},bindUI:function(){a.Squarespace.ModelEditorPanel.superclass.bindUI.call(this);
this.get("model");var d=this.get("panel");this.after("visibleChange",this._toggleVisibility,this);this.after("*:action-button-click",this._handleActionButtonClick,this);d.after("dataChange",function(a){null!==a.prevVal&&this.markAsDirty()},this)},_toggleVisibility:function(a){a.newVal?this._showPanel():this._hidePanel()},_handleActionButtonClick:function(d){a.Lang.isValue(d)&&a.Lang.isString(d.action)&&this._routeAction(d.action)},_routeAction:function(d){switch(d){case "askBeforeSavingChangesAndClose":this._askBeforeSavingChangesAndClose();
break;case "saveAndClose":this._saveAndClose();break;case "save":this.saving||this.requestSave().then(a.bind(this._saveResponseHandler,this),a.bind(this._errorResponseHandler,this));break;case "cancel":this.ensureSavedChanges().then(a.bind(this._closePanel,this),a.bind(this._cancelClose,this));break;case "remove":this.requestDelete().then(a.bind(this._closePanel,this),a.bind(this._cancelClose,this));break;default:console.log("[Model Editor Panel] No action given.")}},_saveAndClose:function(){this.saving||
this.requestSave().then(a.bind(this._saveResponseHandler,this),a.bind(this._errorResponseHandler,this)).then(a.bind(this._closePanel,this))},_askBeforeSavingChangesAndClose:function(){this.hasUnsavedChanges()?a.Squarespace.Fluent.Confirm({"strings.title":"Review Changes","strings.message":"You have made changes. Do you want to save or discard them?","strings.confirm":"Save","strings.reject":"Discard",style:a.Squarespace.Fluent.TYPE.CONFIRM_OR_REJECT,showOverlay:!0}).then(a.bind(this._saveAndClose,
this),a.bind(function(a){a.cancel||this._closePanel()},this)):this._saveAndClose()},_cancelClose:function(){console.log("Clean up any shenanigans.")},_lockSaving:function(){this.saving=!0},_unlockSaving:function(){this.saving=!1},_deleteItem:function(){return a.Squarespace.Promises.create(function(d,b){this.get("model").destroy({remove:!0},function(c){a.Lang.isValue(c)?b(c):d()})},this)},_closePanel:function(){this._hidePanel(a.bind(function(){this._destroyPanel();this.destroy()},this))},validateFields:function(){var d=
this.get("panel").checkErrors();return a.Object.isEmpty(d)?null:d.errorSet},sanitizeFieldData:function(a){return a},_errorResponseHandler:function(d){var b=d.options;d=d.err;var c=this.get("panel"),e=this.get("model");a.Object.isEmpty(d.errors)?"4"===String(d.code).charAt(0)&&d.message?new a.Squarespace.Widgets.Alert({"strings.title":"Error Saving","strings.message":d.message}):(new a.Squarespace.SystemError("Something Went Wrong",d,"json")).show():c.showErrors(d.errors);e.setAttrs(b.initialData)},
_saveResponseHandler:function(d){d=d.options;d=a.Lang.isObject(d)?d:{haltClose:!1};a.Lang.isFunction(d.successFn)&&d.successFn();d.haltClose||this.closePanel()},closePanel:function(){this._closePanel()},requestSave:function(d,b){this._lockSaving();return a.Squarespace.Promises.create(function(c,e){var g=d||{},f=this.get("panel"),h=this.get("model"),k=f.checkErrors();a.Object.isEmpty(k)?(h.getAttrs(),h.setAttrs(this.sanitizeFieldData(f.getData())),h.save(g,a.bind(function(d,g){d&&g instanceof XMLHttpRequest&&
(d=a.merge(d,JSON.parse(g.response)));var h={response:g,options:b};a.Object.isEmpty(d)?c(h):(h.err=d,e(h));this._unlockSaving()},this))):e({err:k})},this)},syncUI:function(){a.Squarespace.ModelEditorPanel.superclass.syncUI.call(this)},show:function(){this.set("visible",!0)},hide:function(){this.set("visible",!1)},_renderFields:function(){this._syncRenderedFields()},_showPanel:function(){this.get("panel").show()},_hidePanel:function(a){var b=this.get("panel");b.once("visibleChange",a,this);b.hide()},
_syncRenderedFields:function(){var d=this.get("editorConfiguration"),b=this.get("makeContext"),c=this.get("panel"),d=a.clone(d,!0),b=a.Squarespace.ObjectBuilder.make(d,b,this.getTemplateContext());b._initialData=this.getFieldData();c.setAttrs({panelConfig:b,model:this.get("model")});c.render(this.get("targetNode"))},getFieldData:function(){return this.get("model").toJSON()},getTemplateContext:function(){return this.get("model").toJSON()},_destroyPanel:function(){var d=this.get("panel");a.Lang.isValue(d)&&
d.destroy()},destructor:function(){this._destroyPanel()}},{ATTRS:{editorConfiguration:{value:{}},fields:{value:[],validator:a.Squarespace.AttrValidators.isArray},model:{value:null,validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Model)},makeContext:{value:{}},panel:{valueFn:function(){return new a.Squarespace.Widgets.TabbedPanel}},targetNode:{valueFn:function(){return this.get("contentBox")},validator:a.Squarespace.AttrValidators.isNode},visible:{value:!1}},CSS_PREFIX:"sqs-model-editor-panel"})},
"1.0",{requires:"plugin squarespace-attr-validators squarespace-dialog squarespace-mixin-save-changes squarespace-object-builder squarespace-settings-tabbed-panel squarespace-ss-widget squarespace-ui-base squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-frontend-edit-controller-base",function(a){a.namespace("Squarespace.Frontend.EditController").Base=a.Base.create("Base",a.Base,[],{initializer:function(){this.after("visibleChange",function(a){a.newVal?this.show():this.hide()},this);this.publish("navigate",{prefix:"FrontendEditController"})},show:function(){},hide:function(){},revert:function(){var d=a.Squarespace.Promises.create(function(a,c){this.get("model").load(function(e){e?c():a()})},this);d.then(a.bind(function(){this.set("dirty",
!1)},this));return d},save:function(){var d=a.Squarespace.Promises.create(function(a,c){this.get("model").save(function(e){e?c():a()})},this);d.then(a.bind(function(){this.set("dirty",!1)},this));return d}},{ATTRS:{rootNode:{},model:{},dirty:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},visible:{value:!1}}})},"1.0",{requires:["base"]});
YUI.add("squarespace-layout-drag",function(a){var d=a.Node.create("<div>Temp Node</div>");a.namespace("Squarespace.Layout").DragDelegate=a.Base.create("LayoutDragDelegate",a.DD.Delegate,[],{initializer:function(){this.get("useDragProxy")&&this.dd.plug(a.Squarespace.Plugin.DDSuperProxy,this.get("dragProxyConfig"));this.on("drag:mouseDown",this._dragMouseDown,this);this.before("drag:start",this._beforeDragStart,this);this.after("drag:start",this._afterDragStart,this);this.on("drag:over",this._dragOver,
this);this.on("drag:end",this._dragEnd,this);this._handles.push(a.DD.DDM.on("ddm:end",this._ddmEnd,this));if(this.get("useDragScroll")){var b=a.Squarespace.Layout.DragScroll;this.plug(b);this.on("dragScrollLockChange",function(a){this[b.NS].set("scrollLock",a.newVal)},this)}a.UA.mobile&&(this.dd.set("lock",!0),this.get("preventScrollOnTouch")&&this._preventScrollOnTouch());this.after("edgeInfoChange",this.get("editController").processEdgeInfo,this.get("editController"))},destructor:function(){this._scrollEvent&&
this._scrollEvent.detach();this.dd.unplug();this.unplug()},_preventScrollOnTouch:function(){this.on("drag:mouseDown",function(a){a.ev.preventDefault()},this);this.get("container").on("touchmove",function(a){this.dd.get("lock")||a.preventDefault()},this)},_preventDragStartOnScroll:function(){var b=a.Squarespace.Layout.DragScroll.NS,b=this.hasPlugin(b)?this[b].get("scrollableNode"):a.one(a.config.doc);this._scrollEvent&&this._scrollEvent.detach();this._scrollEvent=b.on(["scroll","overScroll"],function(){this._scrollEvent.detach();
this._dragTimer&&this._dragTimer.cancel()},this)},_dragMouseUp:function(){this.detach(this._eventPrefix+"|drag:mouseup");this._dragTimer&&this._dragTimer.cancel()},_dragMouseDown:function(){if(a.UA.mobile){var b=this.dd,c=this._eventPrefix;this._dragTimer&&this._dragTimer.cancel();a.UA.ios||this._preventDragStartOnScroll();b.set("lock",!0);this._dragTimer=a.later(b.get("clickTimeThresh"),this,function(){b.set("lock",!1)});this.detach(c+"|drag:mouseup");this.on(c+"|drag:mouseup",this._dragMouseUp,
this)}},_beforeDragStart:function(){a.DD.DDM.syncActiveShims();this.get("blockFocusHandler").preventBlockFocus();this.get("blockFocusHandler").blurAllBlocks();var b=a.DD.DDM.activeDrag.get("node"),c=a.Widget.getByNode(b);this.dd.setAttrs({dragWidget:c,dragNodeRegion:b.get("region")})},_afterDragStart:function(){this.get("extraSyncShims")&&a.later(250,this,function(){a.DD.DDM.syncActiveShims()})},_dragOver:function(a){a.drop.get("lock")||(a=this.getNearestEdge())&&this.set("edgeInfo",a)},_dragEnd:function(){var b=
a.DD.DDM.activeDrag.get("node");a.Object.getValue(b,"_node")&&b.setStyles({position:null,top:null,left:null});this.dd.setAttrs({dragWidget:null,dragNodeRegion:null})},_ddmEnd:function(){this._dragTimer&&this._dragTimer.cancel()},getNearestEdge:function(){var b=null,c=a.DD.DDM.activeDrop.get("node");if(!c.ancestor(".sqs-block:not(.sqs-destroyme)",!0,".sqs-layout"))return b;var e=c.get("region"),d=e.left,f=e.top,h=e.width+parseInt(c.getComputedStyle("marginLeft"),10)+parseInt(c.getComputedStyle("marginRight"),
10),k=e.height+parseInt(c.getComputedStyle("marginTop"),10)+parseInt(c.getComputedStyle("marginBottom"),10),l=a.DD.DDM.activeDrag.mouseXY,n={x:l[0]<d+h/2?"left":"right",y:l[1]<f+k/2?"top":"bottom"},d="left"===n.x?l[0]-d:d+h-l[0],f="top"===n.y?l[1]-f:f+k-l[1],k=Math.min(h,k),h=100*(d/h),l=100*(f/k),k=h<l?n.x:n.y,d=h<l?d:f;isNaN(d)||(b={node:c,direction:k,distance:d,quad:n,region:e});return b},_afterDragEnd:function(){a.DD.DDM._noShim=this._shimState;var b=this.dd.get("node");this.set("lastNode",b);
b&&a.Lang.isValue(b._node)&&b.removeClass(a.DD.DDM.CSS_PREFIX+"-dragging");this.dd._unprep();this.dd.set("node",d)},_delMouseDown:function(b){var c=b.currentTarget,e=this.dd,d=c,f=this.get("dragConfig"),h=this.get("nodes"),k=this.get("invalidHandles");if(c.test(h)&&!c.test(this.get("invalid"))&&(!k||!b.target.ancestor(k,!0,h)))this._shimState=a.DD.DDM._noShim,a.DD.DDM._noShim=!0,this.set("currentNode",c),e.set("node",c),f&&f.dragNode?d=f.dragNode:e.proxy&&(d=a.DD.DDM._proxy),e.set("dragNode",d),e._prep(),
e.fire("drag:mouseDown",{ev:b})}},{ATTRS:{container:{valueFn:function(){return a.one(a.config.doc.body)},lazyAdd:!1},nodes:{value:".sqs-block"},groups:{value:null,lazyAdd:!1},invalid:{value:".sqs-dd-invalid",validator:a.Lang.isString},invalidHandles:{value:"",validator:a.Lang.isString},scrollNode:{value:{},lazyAdd:!1,validator:a.Squarespace.AttrValidators.isInstanceOf(a.Node)},editController:{value:null},edgeInfo:{value:{node:null,direction:"",distance:0,quad:null,region:null}},extraSyncShims:{value:!1,
validator:a.Squarespace.AttrValidators.isBoolean},preventScrollOnTouch:{value:!1},useDragProxy:{value:!1},dragProxyConfig:{value:{}},useDragScroll:{value:!0},dragScrollLock:{value:!1},blockFocusHandler:{valueFn:function(){return a.Squarespace.Singletons.BlockFocusHandler}}}})},"1.0",{requires:"base dd-delegate dd-drag squarespace-dd-superproxy anim squarespace-ui-base squarespace-util squarespace-dd-behaviors squarespace-layout-drag-scroll squarespace-scrollintoview squarespace-attr-validators".split(" ")});
YUI.add("squarespace-editor-collection-settings",function(a){var d=a.namespace("Squarespace").CollectionEditorSettings={};d.fields={};d.fields.navigationTitle={ctor:a.Squarespace.DialogFields.Text,config:{required:!0,submitOnEnter:!0,name:"navigationTitle","strings.title":"Navigation Title","strings.description":"The name for this page, as it appears in navigations.",className:"large"}};d.fields.title={ctor:a.Squarespace.DialogFields.Text,config:{required:!0,submitOnEnter:!0,name:"title","strings.title":"Page Title",
"strings.description":"The name of this page, as it appears in the top of the browser window."}};d.fields.pageLayout={ctor:a.Squarespace.DialogFields.Select,config:{name:"regionName",required:!0,className:"thin dark",options:{$valueFn:function(){var b=[],e=a.Squarespace.Singletons.Template.get("layouts"),d;for(d in e)b.push({label:e[d].name,value:d});return b}},"strings.title":"Page Layout","strings.description":"Page the overall layout for this page."}};d.fields.pageSize={ctor:a.Squarespace.DialogFields.Slider,
required:!0,config:{name:"pageSize",range:[1,20],"strings.suffix":"Post","strings.title":"Posts Per Page","strings.description":"Pick the number of posts that display per page.",pluralize:!0,labelWidth:70,submitOnEnter:!0}};d.fields.description={ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"description",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:187,title:"Description",description:"<strong>Optional.</strong>  A description that will be displayed in search engine listings if this page is indexed by a search engine.",
classNames:"major"}};a.Squarespace.Utils.isDamaskEnabled()?d.fields.urlId={ctor:a.Squarespace.DialogFields.Url,config:{name:"urlId",prefix:"/",filter:"url-slug-with-slash","strings.title":"URL","strings.description":"The unique location slug for this page."}}:d.fields.urlId={type:"text",name:"urlId",prefix:"/",title:"URL",description:"The unique location slug for this page.",fieldStyle:"normal",titleStyle:"top",filter:"url-slug-with-slash",style:"thin",icon:"link"};d.fields.password={ctor:a.Squarespace.DialogFields.Text,
config:{required:!1,password:!0,name:"password","strings.title":"Password","strings.description":"A password required to access this page. Note that certain contributor permissions (Administrator, Content Editor) automatically bypass this password."}};d.fields.mainImage={ctor:a.Squarespace.DialogFields.FileImage,required:!1,height:250,width:250,square:!0,name:"mainImage",autoSaveFocalPoint:!0,contentLabel:"thumbnail image",strings:{title:"Thumbnail Image"},description:"The image to be used to represent this page if it is placed within an index",
fieldStyle:"normal",titleStyle:"top"};d.fields.postByEmailAddress={ctor:a.Squarespace.DialogFields.PostByEmailAddress,config:{name:"postByEmailAddress","strings.title":"Post By Email Address","strings.description":"Emails sent to this address will be posted to the collection. If you need a new email address, press the refresh button on the right of this field.",collection:{$dontRecurse:!0,$valueFn:function(a){return a}},readOnly:!0}};d.fields.bookmarklet={ctor:a.Squarespace.DialogFields.Description,
config:{title:"Quickpost Bookmarklet",padding:[10,0],text:{$valueFn:function(b){return'<div>Drag this link to your browser\'s bookmarks bar to quickly post to this collection:</div> <a class="bookmarklet" href="'+a.Squarespace.Utils.getBookmarkletUrl(b)+'">Post to Squarespace</a>'}},$escape:!0}};d.fields.tags={ctor:a.Squarespace.DialogFields.ContentStatManager,config:{name:"tagcloud",className:{$valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?"light":"dark"}},title:"Tags",maxLength:a.Squarespace.MaxTagLength,
collectionId:{$valueFn:function(a){return a.get("id")}},mode:"tag"}};d.fields.categories={ctor:a.Squarespace.DialogFields.ContentStatManager,config:{name:"tagcloud",className:{$valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?"light":"dark"}},title:"Categories",maxLength:a.Squarespace.MaxCategoryLength,collectionId:{$valueFn:function(a){return a.get("id")}},mode:"category"}};var b=[];b.push({value:a.Squarespace.EventView.LIST,label:"List"});b.push({value:a.Squarespace.EventView.CALENDAR,
label:"Calendar"});d.fields.eventView={ctor:a.Squarespace.DialogFields.Select,config:{name:"eventView","strings.title":"Default Event View",titleStyle:"top",className:"thin dark",defaultValue:a.Squarespace.EventView.LIST,options:b}};d.fields.enabled={ctor:a.Squarespace.DialogFields.Check,config:{name:"enabled",strings:{title:"Enabled",description:"If this page is not enabled, it will not be accessible to non-admin users. It is useful to disable a page while it is being worked on."}}};d.fields.homepage=
{ctor:a.Squarespace.DialogFields.Button,config:{name:"setAsHomepage",strings:{text:"Set as Homepage"}}};d.fields.duplicate={ctor:a.Squarespace.DialogFields.Button,config:{name:"duplicate",strings:{text:"Duplicate Page",description:"Duplicating a Page allows you to quickly generate Pages on your site with the same layout and Content Blocks as the original Page."}}};d.groups={};d.groups.tagsAndCategories=[{ctor:a.Squarespace.DialogFields.Description,config:{title:"Manage Tags/Categories",text:"You can use these controls to bulk edit the tags and categories that apply to this collection."}},
{$include:"fields.tags"},{$include:"fields.categories"}];d.groups.categories=[{ctor:a.Squarespace.DialogFields.Description,config:{title:"Manage Categories",text:"You can use these controls to bulk edit the categories that apply to this collection."}},{$include:"fields.categories"}];d.groups.codeInjection=[{ctor:a.Squarespace.DialogFields.Description,config:{title:"Page Header Code Injection",text:"Enter the code that will be injected onto the header for this page.",padding:[15,0]}},{ctor:a.Squarespace.DialogFields.HtmlCode,
config:{name:"headerInjectCode"}},{$value:{ctor:a.Squarespace.DialogFields.Description,config:{title:"Post Blog Item Code Injection",text:"Enter the code that will be injected onto the page immediately after each blog content block (but before the blog post's footer block, if any).  You can use the <strong>{permalink}</strong> variable to access the permalink for each item.",$escape:!0,padding:[15,0]}},$when:function(b){return a.Squarespace.ContentCollectionUtils.hasSupportForInjectableCodePerItem(b)}},
{$value:{ctor:a.Squarespace.DialogFields.HtmlCode,config:{name:"postItemInjectCode"}},$when:function(b){return a.Squarespace.ContentCollectionUtils.hasSupportForInjectableCodePerItem(b)}}];d.groups.pageControls=[{ctor:a.Squarespace.DialogFields.Description,config:{title:"Page Controls",text:{$valueFn:function(b){return b.get("type")==a.Squarespace.CollectionTypes.PAGE?"Use the controls below to either duplicate this page, or mark it as your homepage.":"Use the controls below to mark this page as your homepage."}},
$escape:!0,padding:[15,0]}},{$include:"fields.homepage"},{$include:"fields.duplicate",$when:function(b){return b.get("type")==a.Squarespace.CollectionTypes.PAGE}}];d.tabs={};d.tabs.primary={title:{$valueFn:function(b){return(b=a.Squarespace.Singletons.Template.get("collectionConfigs."+b.get("typeName")))?"Configure "+b.get("title"):"Configure Page"}},tabTitle:"Basic",icon:"/universal/images-v6/content/icon-settings-32-light.png",fields:[{$include:"fields.navigationTitle"},{$include:"fields.title"},
{$include:"fields.enabled",$when:function(){return a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE)}},{$include:"fields.eventView",$when:function(b){var e=a.Squarespace.Singletons.Template.get("collectionConfigs."+b.get("typeName"));return e?b.get("ordering")==a.Squarespace.CollectionOrdering.CALENDAR&&!e.get("forceEventView"):b.get("ordering")==a.Squarespace.CollectionOrdering.CALENDAR}},{$include:"fields.pageLayout",$when:function(){return 1<a.Object.keys(a.Squarespace.Singletons.Template.get("layouts")).length}},
{$include:"fields.pageSize",$when:function(b){return!a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE)?!1:a.Squarespace.ContentCollectionUtils.isAdjustablePageSizeCollection(b)}},{$include:"fields.description"},{$include:"fields.urlId"},{$include:"fields.password"},{$include:"fields.mainImage"},{$include:"fields.postByEmailAddress",$when:function(b){return a.Squarespace.ContentCollectionUtils.isPostableByEmailAddress(b)}},{$include:"fields.bookmarklet",
$when:function(b){return a.Squarespace.ContentCollectionUtils.isSupportedByBookmarklet(b)}},{$include:"groups.pageControls",$concat:!0,$when:function(){return a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE)}}]};d.tabs.advanced={tabTitle:"Advanced",fields:[{$include:"groups.tagsAndCategories",$concat:!0,$when:function(b){return b.get("ordering")!=a.Squarespace.CollectionOrdering.CUSTOM&&b.get("type")==a.Squarespace.CollectionTypes.GENERIC||b.get("type")==
a.Squarespace.CollectionTypes.PRODUCT}},{$include:"groups.codeInjection",$concat:!0,$when:function(){return a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE)}}]};d.tabs.syndication={tabTitle:"Syndication",name:"syndication",fields:[{ctor:a.Squarespace.DialogFields.Text,config:{name:"rssFeedReplacementUrl",maxLength:300,"strings.title":"RSS Feed Replacement URL","strings.description":"An alternative feed (eg. Feedburner) that will be served for this collection."}},
{ctor:a.Squarespace.DialogFields.Check,config:{name:"iTunesEnabled","strings.title":"Enable iTunes RSS Tags","strings.description":"This will allow you to specify iTunes specific RSS tags."}},{ctor:a.Squarespace.DialogFields.Description,config:{name:"iTunesDescription",title:"iTunes / Podcasting Setup",text:"Squarespace includes full support for podcasting and syndicating your shows to iTunes.  Fill in the tags below to augment your RSS feed with the information required to be listed in the iTunes directory.  After you have filled out the fields below, adding a Audio block to any of your posts will automatically attach it as a podcast.",
padding:[15,0]}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesAuthor",maxLength:100,"strings.title":"iTunes Author","strings.description":"The author of this podcast."}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesSubtitle",maxLength:300,"strings.title":"iTunes Subtitle","strings.description":"A brief description of your show."}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesSummary",maxLength:4E3,"strings.title":"iTunes Summary","strings.description":"When the 'i' information icon is clicked, more detailed information about your show in iTunes."}},
{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesKeywords",maxLength:100,"strings.title":"iTunes Search Keywords","strings.description":"A comma delimited list of keywords describing your podcast.  Not visible in the iTunes interface, but assists when your show is searched for."}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesCategories",maxLength:100,"strings.title":"iTunes Category","strings.description":"Shown in the category column and in iTunes Store Browse."}},{type:"splitter",
fields:[{ctor:a.Squarespace.DialogFields.Text,config:{width:0.5,name:"iTunesOwner",maxLength:100,"strings.title":"iTunes Owner","strings.description":"The owner of this podcast. Not visible in the iTunes interface."}},{ctor:a.Squarespace.DialogFields.Text,config:{width:0.5,name:"iTunesOwnerEmail",maxLength:100,"strings.title":"iTunes Owner Email","strings.description":"The owner email for this podcast.  Not visible in the iTunes interface."}}]},{ctor:a.Squarespace.DialogFields.FileImage,config:{contentType:"image",
source:"item",noFocalPoint:!0,name:"iTunesImage",transientStore:!0,height:250,square:!0,contentLabel:"cover art image",strings:{title:"iTunes Cover Art Image",description:""}}},{ctor:a.Squarespace.DialogFields.Description,config:{name:"iTunesImageDescription",text:"Add an iTunes cover art image. iTunes prefers square .jpg images that are at least 1400x1400 pixels formatted as a .jpg file.",width:224}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"iTunesExplicit","strings.title":"Explicit Content",
"strings.description":"Your show contains explicit content."}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesNewFeedUrl",maxLength:4E3,"strings.title":"Changing Your Feed URL","strings.description":"This will add the &ltitunes:new-feed-url&gt tag to your feed, and will cause iTunes to update to this URL."}}]};d.buttons=[{type:"cancel",title:"Cancel"},{type:"remove",title:"Delete",$when:function(b){return!a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE)?
!1:b.get("type")!=a.Squarespace.CollectionTypes.TEMPLATE_PAGE}},{type:"saveAndClose",title:"Save"}]},"1.0",{requires:"oop squarespace-dialog-content-stat-manager squarespace-dialog-description squarespace-dialog-code squarespace-dialog-select squarespace-dialog-wysiwyg squarespace-dialog-file-image squarespace-dialog-text squarespace-dialog-post-by-email squarespace-dialog-slider".split(" ")});
YUI.add("squarespace-settings-tabbed-panel",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.TabbedPanel=a.Base.create("settingsTabbedPanel",a.Squarespace.Widgets.DataWidget,[a.WidgetParent],{initializer:function(b){this._headerTray=this._initHeaderTray();this._buttonTray=this._initButtonTray();this._renderedPanels={};this._initialData=b.initialData?a.clone(b.initialData,!0):{}},renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("contentBox");this._headerTray.setAttrs({"strings.title":this.get("panelConfig.title")||
this.get("strings.title"),buttons:this._getTabConfigurationForTabbedHeaderTray()});this._buttonTray.setAttrs({buttons:this._getButtonConfigurationForButtonTray()});this._headerTray.render(a);this._buttonTray.render(a);a.prepend(this._headerTray.get("boundingBox"));a.append('<div class="panel-description">');this._syncPanelConfig()},bindUI:function(){d.superclass.bindUI.call(this);this.after("tabsChange",function(a){this._headerTray.set("buttons",this._getTabConfigurationForTabbedHeaderTray());this._headerTray.set("strings.title",
this.get("panelConfig.title"))},this);this.after("buttonsChange",function(a){this._buttonTray.set("buttons",this._getButtonConfigurationForButtonTray())},this);this.after("panelConfigChange",this._syncPanelConfig,this);this.after("panelTab:dataChange",this._updateData,this)},syncUI:function(){d.superclass.syncUI.call(this);this._buttonTray.set("loading",this.isLoading());var b=this.get("contentBox").one(".panel-description"),c=this.get("strings.description");a.Lang.isValue(b)&&a.Lang.isValue(c)&&
b.setContent(this.get("strings.description"))},destructor:function(){this._headerTray&&this._headerTray.destroy();this._buttonTray&&this._buttonTray.destroy();a.Array.invoke(this._renderedPanels,"destroy")},_updateData:function(a){this.set("data",this.getData())},getData:function(){return a.merge(this._initialData,this._getAggregatedData())},_getAggregatedData:function(){var b=a.Object.keys(this._renderedPanels);return a.Array.reduce(b,{},function(b,e){var d=this._renderedPanels[e].getData();return a.merge(b,
d)},this)},showErrors:function(b){a.Lang.isValue(b)||(b=this.checkErrors());console.log("[Show Errors]",b)},_initHeaderTray:function(){return this.add(new a.Squarespace.Widgets.TabbedHeaderTray({loading:this.get("dataState")===this.getProperty("DATA_STATES").LOADING,"strings.title":this.get("strings.title"),buttons:this._getTabConfigurationForTabbedHeaderTray()})).item(0)},_initButtonTray:function(){this.publish("action-button-click",{emitFacade:!0});return this.add(new a.Squarespace.Widgets.HeaderTray({buttons:this._getButtonConfigurationForButtonTray(),
className:"sqs-footer-tray sqs-button-tray"})).item(0)},_getButtonConfigurationForButtonTray:function(){var b=a.clone(this.get("panelConfig.buttons"));a.Array.each(b,function(b){b.label||(b.label=b.title||b.type);!a.Lang.isValue(b.action)&&a.Lang.isString(b.type)&&(b.action=a.bind(this._handleActionButtonClick,this,b.type));b.context=b.context||this},this);return b},_handleActionButtonClick:function(a){a||console.warn("[handleButtonClick] Missing button type");this.fire("action-button-click",{action:a})},
_getTabConfigurationForTabbedHeaderTray:function(){var b=a.clone(this.get("panelConfig.tabs"))||[];return a.Array.map(b,function(b,e){a.Lang.isString(b.name)?b.name=b.name.toLowerCase():b.name="tab"+e;return{name:b.name,label:b.tabTitle||this.get("strings.defaultTab"),context:this,action:a.bind(this._activateTab,this,b.name)}},this)},getField:function(b){var c=null;a.Object.some(this._renderedPanels,function(e){e=e.getField(b);var d=a.Lang.isValue(e);d&&(c=e);return d},this);return c},_activateTab:function(b){this._renderedPanels[b].get("visible")||
a.Object.each(this._renderedPanels,function(a,e){a.toggleView(b===e)},this)},_syncPanelConfig:function(){this._destroyTabs();this._renderTabs();this.set("buttons",this._getButtonConfigurationForButtonTray());this.set("tabs",this._getTabConfigurationForTabbedHeaderTray());this.get("contentBox").append(this._buttonTray.get("boundingBox"))},_destroyTabs:function(){a.Array.invoke(this._renderedPanels,"destroy")},_renderTabs:function(){var b=this.get("panelConfig"),c=b.tabs,e=a.merge(this.get("model").toJSON(),
b._initialData||{});a.Array.each(c,function(a,b){this._renderTab(a,b,e)},this);this._renderedPanels[b.tabs[0].name].show()},_renderTab:function(b,c,e){c=b.name||"tab-"+c;this._renderedPanels[c]=new a.Squarespace.Widgets.PanelTab({fields:b.fields,data:e,visible:!1,"strings.title":b.tabTitle,tabName:c,render:this.get("contentBox")});this._renderedPanels[c].addTarget(this)},checkErrors:function(){var b={};a.Object.each(this._renderedPanels,function(c){b=a.merge(b,c._checkErrors())},this);return b},_getSanitizedPanelData:function(){return a.merge(this.get("data"),
a.Squarespace.FormUtils.getData(this._renderedPanels))}},{ASYNC_DATA:!1,CSS_PREFIX:"sqs-settings-tabbed-panel",ATTRS:{buttons:{value:[]},data:{value:null},tabs:{value:[]},panelConfig:{value:{},setter:function(b){a.Array.each(b.tabs,function(b,e){a.Lang.isString(b.name)?b.name=b.name.toLowerCase():b.name="tab-"+e},this)}},siteContext:{value:{}},strings:{value:{title:"Default Panel",defaultTab:"Item"}}}})},"1.0",{requires:"base-build squarespace-dialog squarespace-form-utils squarespace-mixin-save-changes squarespace-settings-tabbed-panel-tab squarespace-ss-widget squarespace-tray widget-anim".split(" ")});
YUI.add("squarespace-block-email-footer",function(a){a.namespace("Squarespace.Block").EmailFooter=a.Base.create("block-email-footer",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-email-footer",ATTRS:{type:{value:a.Squarespace.BlockType.EMAIL_FOOTER},emailEditor:{value:a.Squarespace.Block.Editor.EmailFooter}}})},"1.0",{requires:["base","model","squarespace-block-base-modelsync","squarespace-block-email-footer-editor","squarespace-enum"]});
YUI.add("squarespace-block-button",function(a){a.namespace("Squarespace.Block").Button=a.Base.create("block-button",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-button",ATTRS:{editor:{value:a.Squarespace.Block.Editor.Button},emailEditor:{valueFn:function(){return a.Squarespace.Block.Editor.ButtonEmail}},type:{value:a.Squarespace.BlockType.BUTTON},defaultContentModel:{value:{buttonText:"Learn More",buttonLink:"",newWindow:!1,buttonAlignment:"center",buttonSize:"medium"}}}})},"1.0",
{requires:["squarespace-block-base-modelsync","squarespace-block-button-editor","squarespace-enum"]});
YUI.add("uploader-flash",function(a,d){function b(b,c,e){var d=this._id=a.guid("yuiswf");b=l.one(b);e=e||{};var g=((e.version||t)+"").split("."),g=f.isFlashVersionAtLeast(parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)),v=f.isFlashVersionAtLeast(8,0,0)&&!g&&e.useExpressInstall,E=v?r:c;c="<object ";var S="yId="+a.id+"&YUISwfId="+d+"&YUIBridgeCallback="+u+"&allowedDomain="+document.location.hostname;a.SWF._instances[d]=this;if(b&&(g||v)&&E){c+='id="'+d+'" ';c=k.ie?c+('classid="'+p+'" '):c+('type="'+
q+'" data="'+n.html(E)+'" ');c+='width="100%" height="100%">';k.ie&&(c+='<param name="movie" value="'+n.html(E)+'"/>');for(var I in e.fixedAttributes)s.hasOwnProperty(I)&&(c+='<param name="'+n.html(I)+'" value="'+n.html(e.fixedAttributes[I])+'"/>');for(var A in e.flashVars)I=e.flashVars[A],h.isString(I)&&(S+="&"+n.html(A)+"="+n.html(encodeURIComponent(I)));S&&(c+='<param name="flashVars" value="'+S+'"/>');b.set("innerHTML",c+"</object>");this._swf=l.one("#"+d)}else this.publish("wrongflashversion",
{fireOnce:!0}),this.fire("wrongflashversion",{type:"wrongflashversion"})}function c(){c.superclass.constructor.apply(this,arguments)}var e=a.Lang.sub,g=a.Uploader.Queue,f=a.SWFDetect,h=a.Lang,k=a.UA,l=a.Node,n=a.Escape,p="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",q="application/x-shockwave-flash",t="10.0.22",r="http://fpdownload.macromedia.com/pub/flashplayer/update/current/swf/autoUpdater.swf?"+Math.random(),u="SWF.eventHandler",s={align:"",allowFullScreen:"",allowNetworking:"",allowScriptAccess:"",
base:"",bgcolor:"",loop:"",menu:"",name:"",play:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};b._instances=b._instances||{};b.eventHandler=function(a,c){b._instances[a]._eventHandler(c)};b.prototype={_eventHandler:function(a){"swfReady"===a.type?(this.publish("swfReady",{fireOnce:!0}),this.fire("swfReady",a)):"log"!==a.type&&this.fire(a.type,a)},callSWF:function(a,b){b||(b=[]);return this._swf._node[a]?this._swf._node[a].apply(this._swf._node,b):null},toString:function(){return"SWF "+this._id}};
a.augment(b,a.EventTarget);a.SWF=b;var v=function(a){v.superclass.constructor.apply(this,arguments)};a.extend(v,a.Base,{initializer:function(b){this.get("id")||this._set("id",a.guid("file"))},_swfEventHandler:function(a){if(a.id===this.get("id"))switch(a.type){case "uploadstart":this.fire("uploadstart",{uploader:this.get("uploader")});break;case "uploadprogress":this.fire("uploadprogress",{originEvent:a,bytesLoaded:a.bytesLoaded,bytesTotal:a.bytesTotal,percentLoaded:Math.min(100,Math.round(1E4*a.bytesLoaded/
a.bytesTotal)/100)});this._set("bytesUploaded",a.bytesLoaded);break;case "uploadcomplete":this.fire("uploadfinished",{originEvent:a});break;case "uploadcompletedata":this.fire("uploadcomplete",{originEvent:a,data:a.data});break;case "uploadcancel":this.fire("uploadcancel",{originEvent:a});break;case "uploaderror":this.fire("uploaderror",{originEvent:a,status:a.status,statusText:a.message,source:a.source})}},startUpload:function(a,b,c){if(this.get("uploader")){var e=this.get("uploader");c=c||"Filedata";
var d=this.get("id");b=b||null;this._set("bytesUploaded",0);e.on("uploadstart",this._swfEventHandler,this);e.on("uploadprogress",this._swfEventHandler,this);e.on("uploadcomplete",this._swfEventHandler,this);e.on("uploadcompletedata",this._swfEventHandler,this);e.on("uploaderror",this._swfEventHandler,this);e.callSWF("upload",[d,a,b,c])}},cancelUpload:function(){this.get("uploader")&&(this.get("uploader").callSWF("cancel",[this.get("id")]),this.fire("uploadcancel"))}},{NAME:"file",TYPE:"flash",ATTRS:{id:{writeOnce:"initOnly",
value:null},size:{writeOnce:"initOnly",value:0},name:{writeOnce:"initOnly",value:null},dateCreated:{writeOnce:"initOnly",value:null},dateModified:{writeOnce:"initOnly",value:null},bytesUploaded:{readOnly:!0,value:0},type:{writeOnce:"initOnly",value:null},uploader:{writeOnce:"initOnly",value:null}}});a.FileFlash=v;a.UploaderFlash=a.extend(c,a.Widget,{_buttonState:"up",_buttonFocus:!1,_swfContainerId:null,_swfReference:null,queue:null,_tabElementBindings:null,initializer:function(){this._swfContainerId=
a.guid("uploader");this.queue=this._swfReference=null;this._buttonState="up";this._tabElementBindings=this._buttonFocus=null;this._fileList=[];this.publish("fileselect");this.publish("uploadstart");this.publish("fileuploadstart");this.publish("uploadprogress");this.publish("totaluploadprogress");this.publish("uploadcomplete");this.publish("alluploadscomplete");this.publish("uploaderror");this.publish("mouseenter");this.publish("mouseleave");this.publish("mousedown");this.publish("mouseup");this.publish("click")},
renderUI:function(){var b=this.get("boundingBox"),d=this.get("contentBox"),g=this.get("selectFilesButton"),h=a.Node.create(e(c.FLASH_CONTAINER,{swfContainerId:this._swfContainerId}));b.setStyle("position","relative");g.setStyles({width:"100%",height:"100%"});d.append(g);d.append(h);this._swfReference=new a.SWF(h,this.get("swfURL"),{version:"10.0.45",fixedAttributes:{wmode:"transparent",allowScriptAccess:"always",allowNetworking:"all",scale:"noscale"}})},bindUI:function(){this._swfReference.on("swfReady",
function(){this._setMultipleFiles();this._setFileFilters();this._triggerEnabled();this._attachTabElements();this.after("multipleFilesChange",this._setMultipleFiles,this);this.after("fileFiltersChange",this._setFileFilters,this);this.after("enabledChange",this._triggerEnabled,this);this.after("tabElementsChange",this._attachTabElements)},this);this._swfReference.on("fileselect",this._updateFileList,this);this._swfReference.on("mouseenter",function(){this.fire("mouseenter");this._setButtonClass("hover",
!0);"down"===this._buttonState&&this._setButtonClass("active",!0)},this);this._swfReference.on("mouseleave",function(){this.fire("mouseleave");this._setButtonClass("hover",!1);this._setButtonClass("active",!1)},this);this._swfReference.on("mousedown",function(){this.fire("mousedown");this._buttonState="down";this._setButtonClass("active",!0)},this);this._swfReference.on("mouseup",function(){this.fire("mouseup");this._buttonState="up";this._setButtonClass("active",!1)},this);this._swfReference.on("click",
function(){this.fire("click");this._buttonFocus=!0;this._setButtonClass("focus",!0);a.one("body").focus();this._swfReference._swf.focus()},this)},_attachTabElements:function(){if(null!==this.get("tabElements")&&null!==this.get("tabElements").from&&null!==this.get("tabElements").to){null!==this._tabElementBindings?(this._tabElementBindings.from.detach(),this._tabElementBindings.to.detach(),this._tabElementBindings.tabback.detach(),this._tabElementBindings.tabforward.detach(),this._tabElementBindings.focus.detach(),
this._tabElementBindings.blur.detach()):this._tabElementBindings={};var b=a.one(this.get("tabElements").from),c=a.one(this.get("tabElements").to);this._tabElementBindings.from=b.on("keydown",function(a){9===a.keyCode&&!a.shiftKey&&(a.preventDefault(),this._swfReference._swf.setAttribute("tabindex",0),this._swfReference._swf.setAttribute("role","button"),this._swfReference._swf.setAttribute("aria-label",this.get("selectButtonLabel")),this._swfReference._swf.focus())},this);this._tabElementBindings.to=
c.on("keydown",function(a){9===a.keyCode&&a.shiftKey&&(a.preventDefault(),this._swfReference._swf.setAttribute("tabindex",0),this._swfReference._swf.setAttribute("role","button"),this._swfReference._swf.setAttribute("aria-label",this.get("selectButtonLabel")),this._swfReference._swf.focus())},this);this._tabElementBindings.tabback=this._swfReference.on("tabback",function(){this._swfReference._swf.blur();setTimeout(function(){b.focus()},30)},this);this._tabElementBindings.tabforward=this._swfReference.on("tabforward",
function(){this._swfReference._swf.blur();setTimeout(function(){c.focus()},30)},this);this._tabElementBindings.focus=this._swfReference._swf.on("focus",function(){this._buttonFocus=!0;this._setButtonClass("focus",!0)},this);this._tabElementBindings.blur=this._swfReference._swf.on("blur",function(){this._buttonFocus=!1;this._setButtonClass("focus",!1)},this)}else null!==this._tabElementBindings&&(this._tabElementBindings.from.detach(),this._tabElementBindings.to.detach(),this._tabElementBindings.tabback.detach(),
this._tabElementBindings.tabforward.detach(),this._tabElementBindings.focus.detach(),this._tabElementBindings.blur.detach())},_setButtonClass:function(a,b){b?this.get("selectFilesButton").addClass(this.get("buttonClassNames")[a]):this.get("selectFilesButton").removeClass(this.get("buttonClassNames")[a])},_setFileFilters:function(){this._swfReference&&0<this.get("fileFilters").length&&this._swfReference.callSWF("setFileFilters",[this.get("fileFilters")])},_setMultipleFiles:function(){this._swfReference&&
this._swfReference.callSWF("setAllowMultipleFiles",[this.get("multipleFiles")])},_triggerEnabled:function(){this.get("enabled")?(this._swfReference.callSWF("enable"),this._swfReference._swf.setAttribute("aria-disabled","false"),this._setButtonClass("disabled",!1)):(this._swfReference.callSWF("disable"),this._swfReference._swf.setAttribute("aria-disabled","true"),this._setButtonClass("disabled",!0))},_getFileList:function(){return this._fileList.concat()},_setFileList:function(a){this._fileList=a.concat();
return this._fileList.concat()},_updateFileList:function(b){a.one("body").focus();this._swfReference._swf.focus();b=b.fileList;var c=[],e=[],d=this._swfReference,g=this.get("fileFilterFunction");a.each(b,function(a){var b={};b.id=a.fileId;b.name=a.fileReference.name;b.size=a.fileReference.size;b.type=a.fileReference.type;b.dateCreated=a.fileReference.creationDate;b.dateModified=a.fileReference.modificationDate;b.uploader=d;c.push(b)});g?a.each(c,function(b){b=new a.FileFlash(b);g(b)&&e.push(b)}):
a.each(c,function(b){e.push(new a.FileFlash(b))});0<e.length&&(b=this.get("fileList"),this.set("fileList",this.get("appendNewFiles")?b.concat(e):e),this.fire("fileselect",{fileList:e}))},_uploadEventHandler:function(a){switch(a.type){case "file:uploadstart":this.fire("fileuploadstart",a);break;case "file:uploadprogress":this.fire("uploadprogress",a);break;case "uploaderqueue:totaluploadprogress":this.fire("totaluploadprogress",a);break;case "file:uploadcomplete":this.fire("uploadcomplete",a);break;
case "uploaderqueue:alluploadscomplete":this.queue=null;this.fire("alluploadscomplete",a);break;case "file:uploaderror":case "uploaderqueue:uploaderror":this.fire("uploaderror",a);break;case "file:uploadcancel":case "uploaderqueue:uploadcancel":this.fire("uploadcancel",a)}},upload:function(b,c,e){c=c||this.get("uploadURL");e=e||this.get("postVarsPerFile");var d=b.get("id");e=e.hasOwnProperty(d)?e[d]:e;b instanceof a.FileFlash&&(b.on("uploadstart",this._uploadEventHandler,this),b.on("uploadprogress",
this._uploadEventHandler,this),b.on("uploadcomplete",this._uploadEventHandler,this),b.on("uploaderror",this._uploadEventHandler,this),b.on("uploadcancel",this._uploadEventHandler,this),b.startUpload(c,e,this.get("fileFieldName")))},uploadAll:function(a,b){this.uploadThese(this.get("fileList"),a,b)},uploadThese:function(a,b,c){this.queue||(b=b||this.get("uploadURL"),c=c||this.get("postVarsPerFile"),this.queue=new g({simUploads:this.get("simLimit"),errorAction:this.get("errorAction"),fileFieldName:this.get("fileFieldName"),
fileList:a,uploadURL:b,perFileParameters:c,retryCount:this.get("retryCount")}),this.queue.on("uploadstart",this._uploadEventHandler,this),this.queue.on("uploadprogress",this._uploadEventHandler,this),this.queue.on("totaluploadprogress",this._uploadEventHandler,this),this.queue.on("uploadcomplete",this._uploadEventHandler,this),this.queue.on("alluploadscomplete",this._uploadEventHandler,this),this.queue.on("alluploadscancelled",function(){this.queue=null},this),this.queue.on("uploaderror",this._uploadEventHandler,
this),this.queue.startUpload(),this.fire("uploadstart"))}},{FLASH_CONTAINER:'<div id="{swfContainerId}" style="position:absolute; top:0px; left: 0px; margin: 0; padding: 0; border: 0; width:100%; height:100%"></div>',SELECT_FILES_BUTTON:"<button type='button' class='yui3-button' tabindex='-1'>{selectButtonLabel}</button>",TYPE:"flash",NAME:"uploader",ATTRS:{appendNewFiles:{value:!0},buttonClassNames:{value:{hover:"yui3-button-hover",active:"yui3-button-active",disabled:"yui3-button-disabled",focus:"yui3-button-selected"}},
enabled:{value:!0},errorAction:{value:"continue",validator:function(a){return a===g.CONTINUE||a===g.STOP||a===g.RESTART_ASAP||a===g.RESTART_AFTER}},fileFilters:{value:[]},fileFilterFunction:{value:null},fileFieldName:{value:"Filedata"},fileList:{value:[],getter:"_getFileList",setter:"_setFileList"},multipleFiles:{value:!1},postVarsPerFile:{value:{}},selectButtonLabel:{value:"Select Files"},selectFilesButton:{valueFn:function(){return a.Node.create(e(a.UploaderFlash.SELECT_FILES_BUTTON,{selectButtonLabel:this.get("selectButtonLabel")}))}},
simLimit:{value:2,validator:function(a){return 2<=a&&5>=a}},swfURL:{valueFn:function(){return 0<a.UA.ie?"flashuploader.swf?t="+a.guid("uploader"):"flashuploader.swf"}},tabElements:{value:null},uploadURL:{value:""},retryCount:{value:3}}});a.UploaderFlash.Queue=g},"3.17.2",{requires:"swfdetect escape widget base cssbutton node event-custom uploader-queue".split(" ")});
YUI.add("squarespace-form-field-configs",function(a){a.Squarespace.FormFieldConfigs={TEXT:{type:"text",id:null,locked:!1,title:"Text",description:"",placeholder:"",required:!1,text:!0},TEXT_AREA:{type:"textarea",id:null,locked:!1,title:"Text Area",description:"",placeholder:"",required:!1,textarea:!0},EMAIL:{type:"email",id:null,locked:!1,title:"Email",description:"",placeholder:"",required:!1,email:!0},CURRENCY:{type:"currency",id:null,locked:!1,title:"Currency",description:"",currencySymbol:"$",
required:!1,currency:!0},NUMBER:{type:"number",id:null,locked:!1,title:"Number",description:"",placeholder:"",required:!1,number:!0},WEBSITE:{type:"website",id:null,locked:!1,title:"Website",description:"",placeholder:"",required:!1,website:!0},PASSWORD:{type:"password",id:null,locked:!1,title:"Password",description:"",required:!1,password:!0},TWITTER:{type:"twitter",id:null,locked:!1,title:"Twitter",description:"",required:!1,twitter:!0},DATE:{type:"date",id:null,locked:!1,title:"Date",description:"",
required:!1,date:!0},TIME:{type:"time",id:null,locked:!1,title:"Time",description:"",required:!1,time:!0},NAME:{type:"name",id:null,locked:!1,title:"Name",description:"",required:!1,name:!0},ADDRESS:{type:"address",id:null,locked:!1,title:"Address",description:"",required:!1,address:!0},PHONE:{type:"phone",id:null,locked:!1,title:"Phone",description:"",showCountryCode:!1,required:!1,phone:!0},SECTION:{type:"section",id:null,locked:!1,title:"Section",description:"",underline:!0,section:!0},RADIO:{type:"radio",
id:null,locked:!1,title:"Radio",description:"",options:["Option One","Option Two"],required:!1,radio:!0},CHECKBOX:{type:"checkbox",id:null,locked:!1,title:"Checkbox",description:"",options:["Option One","Option Two"],required:!1,checkbox:!0},SELECT:{type:"select",id:null,locked:!1,title:"Select",description:"",options:["Option One","Option Two"],required:!1,select:!0},LIKERT:{type:"likert",id:null,locked:!1,title:"Survey",description:"",options:["Option One","Option Two"],required:!1,likert:!0},HIDDEN:{type:"hidden",
id:null,locked:!1,title:"Hidden",description:"",required:!1,hidden:!0}}},"1.0",{requires:[]});
YUI.add("squarespace-content-item-types-product-digital",function(a){var d=a.namespace("Squarespace.ContentItemEditor").ProductDigital=a.Base.create("ProductDigitalContentItemEditor",a.Squarespace.ContentItemEditor.Product,[],{initializer:function(){var b=this.get("dialog");b.on("ready",function(){b.getField("digitalPricing");var c=b.getField("pricingPlaceholder"),e=this.get("model");b.getField("digitalGoods").on("dataChange",function(b){null===b.newVal&&e.clearChildGroup("digitalGoods",a.bind(function(){e.set("digitalGoods",
null)},this))},this);var d=function(){c.set("data",a.merge(c.get("data"),{priceCents:b.getField("priceCents").getValue(),salePriceCents:b.getField("salePriceCents").getValue(),onSale:b.getField("onSale").getValue()}))};b.getField("priceCents").after("dataChange",d);b.getField("salePriceCents").after("dataChange",d);b.getField("onSale").after("dataChange",d)},this)},validateFields:function(){var b=this.get("dialog"),c=b.getField("digitalGoods").get("data"),e=b.getField("priceCents").get("data"),b=
b.getField("salePriceCents").get("data");return!a.Lang.isValue(c)||a.Lang.isValue(c)&&!a.Lang.isValue(c.get("id"))?{digitalGoods:"You must upload a file for this digital product."}:e<b?{salePriceCents:"Sale price must be less than standard price"}:null},getDialogData:function(){var b=d.superclass.getDialogData.call(this),c=b.structuredContent,e=this.get("model"),g=e.get("digitalGoods");g&&0<g.length?(1<g.length&&console.warn("Multiple digital goods stored."),e=new a.Squarespace.Models.ContentItem(g[0])):
e=new a.Squarespace.Models.ContentItem({collectionId:e.get("collectionId"),parentId:e.get("id"),recordType:a.Squarespace.RecordType.DIGITALGOOD});return a.merge(b,{priceCents:c.priceCents,salePriceCents:c.salePriceCents,onSale:c.onSale,pricingPlaceholder:{productType:a.Squarespace.ProductTypes.DIGITAL,priceCents:c.priceCents,salePriceCents:c.salePriceCents,onSale:c.onSale},digitalGoods:e})},sanitizeDialogData:function(b){b=d.superclass.sanitizeDialogData.call(this,b);b.structuredContent=a.merge(b.structuredContent,
{productType:a.Squarespace.ProductTypes.DIGITAL,priceCents:b.priceCents,salePriceCents:b.salePriceCents,onSale:b.onSale});return b},getPresentationName:function(){return"Digital Product"}},{ATTRS:{editorConfiguration:{value:{name:"editProduct",title:"Edit {presentationName}",width:850,height:{$valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?550:420}},overlay:0.5,closeOthers:!1,initialDataByReference:!0,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productDigitalPricingPlaceholder"}}},
{$include:"tabs.product.upload"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.product.workflow"},{$include:"tabs.options.product"},{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}})},"1.0",{requires:["base","squarespace-content-item-types-product","squarespace-util"]});
YUI.add("squarespace-dialog-content-item-grid",function(a){a.namespace("Squarespace");var d=a.Squarespace.DialogFields.ContentItemGrid=a.Base.create("contentItemGridField",a.Squarespace.DialogField2,[a.WidgetParent],{initializer:function(a){this._initializeDataAndGrid();this.after("dataChange",this._initializeDataAndGrid,this);this._edited=!1},destructor:function(){var a=this._contentItemGrid;a&&a.destroy()},renderUI:function(){d.superclass.renderUI.call(this);var b=this._loadingEl=a.Node.create('<div class="loading-state"></div>');
(this._loadingSpinner=new a.Squarespace.Spinner({size:50,color:"dark",render:b})).spin();this.get("contentBox").append(b)},bindUI:function(){d.superclass.bindUI.call(this);this.after("dataLoadedChange",this.syncUI,this);this.on("dataChange",function(a){this._contentItemGrid.set("model",a.newVal)},this);this.on("uploadPreflightChange",function(a){this._contentItemGrid.set("uploadPreflight",a.newVal)})},syncUI:function(){d.superclass.syncUI.call(this);this.get("dataLoaded")?this._setLoadedState():this._setLoadingState()},
didDataChange:function(){return this._edited},show:function(){d.superclass.show.call(this);this.syncUI()},enableDragSelection:function(){var a=this._contentItemGrid;a&&a.enableDragSelection()},disableDragSelection:function(){var a=this._contentItemGrid;a&&a.disableDragSelection()},_initializeDataAndGrid:function(){this.set("dataLoaded",!1);var b=this.get("data"),c={},e=this.get("pageSize");a.Lang.isValue(e)&&(c.limit=e);b.isNew()?(this._buildContentItemGrid(),this.set("dataLoaded",!0)):b instanceof
a.Squarespace.Models.ContentItem?(this.get("acceptTypes")||this.set("acceptTypes",["image"]),this._buildContentItemGrid(),this.set("dataLoaded",!0)):b.items.load(c,a.bind(function(c){c&&new a.Squarespace.Widgets.Alert({"strings.title":"Missing Content","strings.message":"We could not locate this content."});this.get("acceptTypes")||this.set("acceptTypes",b.getTemplateConfiguration().get("acceptTypes"));this._buildContentItemGrid();this.set("dataLoaded",!0)},this))},_buildContentItemGrid:function(){var b=
this._contentItemGrid;b&&b.destroy();this._contentItemGrid=new a.Squarespace.ContentItemGrid({model:this.get("data"),collectionConfiguration:this.get("collectionConfiguration")||new a.Model({acceptTypes:this.get("acceptTypes")}),itemEditorOptions:{variant:a.Squarespace.ContentItemEditorVariants.MINIMAL,parentDialog:this.get("dialog"),anchorToImageWidget:!0,defaultWorkflowState:a.Squarespace.WorkflowStates.PUBLISHED},selectorAnchorNode:this.get("selectorAnchorNode"),imageSize:105,minMargin:10,showActionTray:!1,
showEmptyState:!1,dragRegion:this.get("contentBox"),uploadPreflight:this.get("uploadPreflight"),contentItemImageOptions:this.get("contentItemImageOptions"),showAddIcon:this.get("showAddIcon"),loadByViewport:!1})},_setLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this.get("boundingBox").removeClass("content-loading");var a=this._contentItemGrid;a.get("rendered")?a.syncUI():a.render(this.get("contentBox"))},_setLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();
this._loadingTimer=a.later(500,this,function(){this._loadingEl.setStyle("marginTop",this.get("contentBox").get("offsetHeight")/2-this._loadingSpinner.get("size")/2);this.get("boundingBox").addClass("content-loading")})}},{CSS_PREFIX:"sqs-content-item-grid-field",ASYNC_DATA:!0,ATTRS:{data:{getter:function(b){return!(b instanceof a.Squarespace.Models.ContentCollection||b instanceof a.Squarespace.Models.ContentItem)?(b="Transient Gallery "+a.Squarespace.Utils.getGuid(),new a.Squarespace.Models.ContentCollection({typeName:"transient-gallery",
type:a.Squarespace.CollectionTypes.GALLERY_BLOCK,ordering:a.Squarespace.CollectionOrdering.USER,title:b,navigationTitle:b,enabled:!0,urlId:a.Squarespace.Utils.getGuid()})):b},validator:function(b){return b instanceof a.Squarespace.Models.ContentCollection||b instanceof a.Squarespace.Models.ContentItem}},dataLoaded:{value:!1},acceptTypes:{},collectionConfiguration:{},contentItemImageOptions:{value:{showActionOverlay:!0,actionOverlayButtons:[a.Squarespace.ActionOverlayButtons.EDIT_IMAGE,a.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]}},
selectorAnchorNode:{valueFn:function(){return this.get("contentBox")}},cloneInitialData:{value:!1},uploadPreflight:{},showAddIcon:{value:!1},pageSize:{value:null}}})},"1.0",{requires:"base widget-parent squarespace-util squarespace-dialog-field-2 squarespace-content-item-grid squarespace-models-content-collection squarespace-models-content-item squarespace-plugin-actionoverlay squarespace-spinner squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-dialog-file-audio",function(a){a.namespace("Squarespace.DialogFields");a.Squarespace.DialogFields.FileAudio=a.Base.create("fileAudio",a.Squarespace.DialogFields.FileRequiresProcessing,[],{},{CSS_PREFIX:"sqs-file-audio-processing",FILE_FILTER:{description:"Audio",extensions:"*.mp3;*.mp4;*.ogg;*.m4a"},PROCESSING_JOB:a.Squarespace.AudioProcessingJob,PROCESSING_COPY:"Processing and identifying",ATTRS:{contentType:{value:"audio"},contentLabel:{value:"an audio file"}}})},"1.0",{requires:["base",
"squarespace-dialog-file-requires-processing","squarespace-job-manager"]});
YUI.add("highlight-accentfold",function(a,d){var b=a.Text.AccentFold,c=a.Escape,e={},g=a.mix(a.Highlight,{allFold:function(d,h,k){var l=g._TEMPLATE,n=[],p=0,q,t;k=a.merge({escapeHTML:!1,replacer:function(a,b,c,e){if(b&&!/\s/.test(c))return a;a=c.length;n.push([d.substring(p,e),d.substr(e,a)]);p=e+a}},k||e);g.all(b.fold(d),b.fold(h),k);p<d.length&&n.push([d.substr(p)]);k=0;for(q=n.length;k<q;++k){h=c.html(n[k][0]);if(t=n[k][1])h+=l.replace(/\{s\}/g,c.html(t));n[k]=h}return n.join("")},startFold:function(a,
b){return g.allFold(a,b,{startsWith:!0})},wordsFold:function(a,e){var d=g._TEMPLATE;return g.words(a,b.fold(e),{mapper:function(a,e){return e.hasOwnProperty(b.fold(a))?d.replace(/\{s\}/g,c.html(a)):c.html(a)}})}})},"3.17.2",{requires:["highlight-base","text-accentfold"]});
YUI.add("gallery-dimensions",function(a){var d=null,b="marginLeft borderLeftWidth paddingLeft paddingRight borderRightWidth marginRight".split(" "),c="marginTop borderTopWidth paddingTop paddingBottom borderBottomWidth marginBottom".split(" ");a.Node.emToPx=function(b){d||(d=a.config.doc.createElement("div"),d.style.position="absolute",d.style.top="-10000px",d.style.left="-10000px",d.style.visibility="hidden",d.style.width="10em",d.style.height="10em",a.config.doc.body.appendChild(d));return(b||1)*
(d.offsetWidth/10)};a.Node.prototype.totalWidth=function(){return this._node.offsetWidth+this.parseDimensionStyle("marginLeft")+this.parseDimensionStyle("marginRight")};a.Node.prototype.totalHeight=function(){return this._node.offsetHeight+this.parseDimensionStyle("marginTop")+this.parseDimensionStyle("marginBottom")};a.Node.prototype.insideWidth=function(){return this._node.clientWidth-this.parseDimensionStyle("paddingLeft")-this.parseDimensionStyle("paddingRight")};a.Node.prototype.insideHeight=
function(){return this._node.clientHeight-this.parseDimensionStyle("paddingTop")-this.parseDimensionStyle("paddingBottom")};a.Node.prototype.horizMarginBorderPadding=function(){return a.Array.reduce(b,0,function(a,b){return a+this.parseDimensionStyle(b)},this)};a.Node.prototype.vertMarginBorderPadding=function(){return a.Array.reduce(c,0,function(a,b){return a+this.parseDimensionStyle(b)},this)};a.Node.prototype.parseDimensionStyle=function(b){b=this.getComputedStyle(b);if(!b||!/^[0-9]/.test(b))return 0;
var c=parseFloat(b,10);/em$/.test(b)&&(c*=a.Node.emToPx(1));return Math.round(c)}},"@VERSION@",{requires:["node-style","array-extras"]});
YUI.add("squarespace-block-map-editor",function(a){a.namespace("Squarespace.Block.Editor").Map=a.Base.create("block-map-editor",a.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.after("editingChange",this._onMapEditingChange,this);this.afterHostEvent("markerChange",this._sendMarkerEvent,this)},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Map")},_sendMarkerEvent:function(){a.one(this.get("mapNode")).fire("marker-created")},
_onMapEditingChange:function(a){a.newVal?this._startEditing():this._stopEditing()},afterLayoutDrag:function(){this._host.fire("resized")},_startEditing:function(){var b=this.get("mapNode");if(!this.get("map")||!b.startEditing)a.one(b).once("maps-loaded",function(){b.startEditing()},this);else b.startEditing()},_stopEditing:function(){var a=this.get("mapNode");a.stopEditing&&a.stopEditing()}},{NS:"blockEditor",ATTRS:{resizable:{value:!0},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},
dialogEditorAnchorNode:{valueFn:function(){return a.one(this.get("host").get("mapNode"))}},map:{getter:function(a){return this.get("mapNode").__map}},mapNode:{valueFn:function(){return this.get("host").get("mapNode")}}}});a.namespace("Squarespace.Block.ModelEditorDialog").Map=a.Base.create("block-map-model-editor",a.Squarespace.ModelEditorDialog,[],{sanitizeDialogData:function(a){delete a.aspectRatio;this.get("model").get("aspectRatio")&&delete a.vSize;return a}},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});
var d={width:275,name:"map-block-editor-dialog",buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Map",icon:"/universal/images-v6/icons/icon-map-16-light.png",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Enter an address for this map and press the <strong>return key</strong> to drop a pin. You can also drag the viewport of the map by <strong>clicking and dragging</strong> while in editing mode.",padding:[0,
10]}},{ctor:a.Squarespace.DialogFields.Map,config:{anchorMap:!0,height:150,countHeight:!0,name:"location",title:"Location",titleStyle:"inline"}}]}]}},"1.0",{requires:"squarespace-block-editor-dialog squarespace-damask-context-globals squarespace-dialog-description squarespace-dialog-map squarespace-model-editor squarespace-util".split(" ")});
YUI.add("squarespace-layout-insert-marker",function(a){var d=a.Squarespace.Block.Utils.convertToValueInPixel,b=a.namespace("Squarespace.Layout").InsertMarker=a.Base.create("insert-marker",a.Overlay,[],{renderUI:function(){this.get("lowerPerformance")||(this.constrainNode=this._createConstrainNode(),this.positionConstrainNode())},bindUI:function(){this.after("infoChange",this._syncInfoToMarker,this);this.after("lockedChange",this._onLockedChange,this);this.on("floatChange",function(a){var b=this.getClassName("float");
this.get("boundingBox").toggleClass(b,!!a.newVal)},this);a.DD.DDM.on("insertMarker|ddm:end",this.hide,this);this.get("boundingBox").plug(a.Squarespace.NodeDestroyNotifier,{onDestroy:function(){this.destroy()},context:this})},_onLockedChange:function(a){a.newVal?this.hide():this.show()},positionConstrainNode:function(){if(this.constrainNode){var b=this.get("boundingBox").get("parentNode").ancestor(".sqs-layout",!0)||a.one(".sqs-layout.sqs-editing");if(b){var b=(b.ancestor(".sqs-layout-wrapper")||b.ancestor(".sqs-content-manager")||
a.one(a.config.doc.body)).get("region"),e=b.top;this.constrainNode.setStyles({left:Math.max(b.left,0),right:Math.max(a.config.win.innerWidth-b.right,0),top:Math.max(e,0),bottom:Math.max(a.config.win.innerHeight-b.bottom,0),height:"auto",zIndex:this.get("constrainZIndex")})}}},_createConstrainNode:function(){var c=a.Node.create('<div class="'+b.CSS_PREFIX+'-constrain"></div>');a.one("body").append(c);return c},_syncInfoToMarker:function(){var b=this.get("info");if(!b||!b.node)console.warn("There is no marker info nor info node.");
else if(!this.get("locked")){var e=b.node,d=b.type,f=b.direction,h=b.region,k=a.WidgetPositionAlign,l=!1,n={node:e,points:[]};switch(f){case "top":n.points=[k.LC,k.TL];l=!0;break;case "bottom":n.points=[k.LC,k.BL];l=!0;break;case "left":n.points=[k.TC,k.TL];break;case "right":n.points=[k.TC,k.TR]}b.shouldFloat?(e=a.DD.DDM.activeDrag.get("dragNodeRegion"),h=h.width/2,b=e&&0!==e.height?h*(e.height/e.width):0.5625*h,n.points[0]="left"===f?k.TL:k.TR,this.set("float",!0)):(l?(b=this.get("lineThickness"),
h="content"===d?e.ancestor(".sqs-block").get("clientWidth"):h.width):(b="column"===d?h.height:h.bottom-h.top,h=this.get("lineThickness")),this.set("float",!1));this.setAttrs({width:h,height:b,align:n})}},destructor:function(){this.constrainNode&&this.constrainNode.remove();a.DD.DDM.detach("insertMarker|*")},_getRegion:function(b){var e;b?(b=a.Node.one(b))&&(e=b.get("region")):(e=this._posNode.get("viewportRegion"),e.height=a.config.win.innerHeight,e.bottom=e.height+a.config.win.pageYOffset);return e},
_getCollapsedVerticalMargin:function(a,b,g){var f=0;switch(g){case "top":f=Math.max(d(b.getStyle("marginBottom")),d(a.getStyle("marginTop")));break;case "bottom":f=Math.max(d(a.getStyle("marginBottom")),d(b.getStyle("marginTop")))}return f},move:function(){var b=arguments,b=a.Lang.isArray(b[0])?b[0]:[b[0],b[1]];if(!a.one("html").hasClass("scrolling")){var e=this.get("info"),g=e.node;if("content"===e.type){var f=g.ancestor(".sqs-block"),h,k=0;h=0;f&&(k="right"===e.direction?d(f.getStyle("paddingRight")):
-1*d(f.getStyle("paddingLeft")));"top"===e.direction||this.get("float")?(h=g.previous(),h=null===h&&f?-1*d(f.getStyle("paddingTop")):h?-1*this._getCollapsedVerticalMargin(g,h,e.direction)/2:-1*d(g.getStyle("marginTop"))/2):"bottom"===e.direction&&(h=g.next(),h=null===h&&f?d(f.getStyle("paddingBottom")):h?this._getCollapsedVerticalMargin(g,h,e.direction)/2:d(g.getStyle("marginBottom"))/2);b=[b[0]+k,b[1]+h]}this.set("xy",b)}}},{CSS_PREFIX:"sqs-layout-insert-marker",ATTRS:{zIndex:{value:8900},constrainZIndex:{valueFn:function(){this.get("zIndex")},
validator:function(b){return a.Lang.isString(b)||a.Lang.isNumber(b)}},info:{value:{node:null,type:"",direction:"",region:null,shouldFloat:!1},lazyAdd:!1},locked:{value:!1},lineThickness:{valueFn:function(){return a.UA.mobile?2:3}},lowerPerformance:{value:!1}}})},"1.0",{requires:["node","event","overlay","squarespace-ss-widget","squarespace-block-utils"]});
YUI.add("squarespace-block-audio-editor",function(a){a.namespace("Squarespace.Block.Editor").Audio=a.Base.create("audio-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Audio")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Audio"}}});var d=a.namespace("Squarespace.Block.ModelEditorDialog").Audio=a.Base.create("blockAudioEditor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){var b=
this.get("dialog");b.on("ready",function(){b.getField("file-location").setAttrs({optionClickCb:function(a){b.getField("file-location-frame").switchFrames(a)}});var e=b.getField("designStyle");a.Lang.isValue(e)&&(e.after("dataChange",function(a){this._toggleColorTheme(a.newVal)},this),this._toggleColorTheme(e.get("data")));this._externalFileFields=a.Array.map(["audioAssetExternalUrl","audioAssetLength","audioAssetMimeType"],function(a){return b.getField(a)});e=b.getField("file-location-frame");"external"!==
e.get("data")&&a.Array.each(this._externalFileFields,function(a){a.disable()});e.after("dataChange",function(b){var c="external"===b.newVal?"enable":"disable";a.Array.each(this._externalFileFields,function(a){a[c]()})},this)},this)},_toggleColorTheme:function(a){"minimal"===a?this.get("dialog").getField("colorTheme").show():this.get("dialog").getField("colorTheme").hide()},getDialogData:function(){var b=d.superclass.getDialogData.call(this),e="embedded",g=b.audioAssetExternalUrl;a.Lang.isString(g)&&
0<g.length&&(e="external");b["file-location"]=e;b["file-location-frame"]=e;a.Lang.isString(b.audioAssetId)&&0<b.audioAssetId.length&&(b.audioAsset=new a.Squarespace.Models.ContentItem({id:b.audioAssetId}));return b},sanitizeDialogData:function(a){delete a["file-location"];delete a["file-location-frame"];a.audioAsset?(a.audioAssetId=a.audioAsset.get("id"),delete a.audioAsset):a.audioAssetId="";return a}},{ATTRS:{dialogConfig:{valueFn:function(){return b}}}}),b={initialDataByReference:!0,name:"audio-block-configuration",
width:420,height:550,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],title:"Audio",tabs:[{tabTitle:"Embed",icon:"/universal/images-v6/icons/icon-audio-16-light-solid.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Text,config:{name:"title",maxLength:100,className:"thin",strings:{title:"Track Title",description:"The title of this media to display on the player."}}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesAuthor",maxLength:100,
className:"thin",strings:{title:"Track Author",description:"The author of this media."}}},{ctor:a.Squarespace.DialogFields.MultiOption,config:{name:"file-location",className:"round icon20",ignoreChanges:!0,titleStyle:"top",options:[{icon:"importing",title:"Upload File",value:"embedded"},{icon:"gallery",title:"External File",value:"external"}]}},{ctor:a.Squarespace.DialogFields.MultiFrame,config:{name:"file-location-frame",width:352,height:170,frames:[{name:"embedded",fields:[{ctor:a.Squarespace.DialogFields.FileAudio,
config:{width:352,height:200,max:200,transientStore:!0,recordType:a.Squarespace.RecordType.AUDIO,contentLabel:"an audio track",maxSize:160,assetConstrainMethod:"contain",contentType:"audio",name:"audioAsset"}}]},{name:"external",fields:[{ctor:a.Squarespace.DialogFields.Text,config:{name:"audioAssetExternalUrl",width:352,maxlength:100,className:"thin",strings:{title:"URL",placeholder:"http://...",description:"The URL to your podcast file."}}},{ctor:a.Squarespace.DialogFields.Text,config:{width:199.2,
name:"audioAssetLength",className:"thin",maxlength:100,strings:{title:"Size (Bytes)",description:"The size (in bytes) of this audio file."}}},{ctor:a.Squarespace.DialogFields.Text,config:{width:132.8,name:"audioAssetMimeType",className:"thin",maxlength:100,strings:{title:"Mime Type",description:"The mime type of this audio file."}}}]}]}}]},{tabTitle:"Podcasting",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Squarespace provides support for iTunes podcasting attributes, which will be inserted automatically into your RSS feed when this is present.",
padding:[0,10]}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesSubtitle",maxLength:300,strings:{title:"iTunes Subtitle",description:"A brief description of this episode."},className:"thin"}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesSummary",maxLength:4E3,strings:{title:"iTunes Summary",description:"More detailed information about this episode shown when the 'i' information icon is clicked."},className:"thin"}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesKeywords",
maxLength:100,strings:{title:"iTunes Search Keywords",description:"A comma delimited list of keywords describing this episode.  Not visible in the iTunes interface, but assists when this episode is searched for."},className:"thin"}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"iTunesDuration",maxLength:20,strings:{title:"iTunes Episode Duration (hh:mm:ss)",description:"The duration of this episode."},className:"thin"}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"iTunesExplicit",strings:{title:"Explicit Content",
description:"This episode contains explicit content."}}}]},{tabTitle:"Design",scroll:!0,$when:a.Squarespace.Utils.isBetaFeatureEnabled,fields:[{ctor:a.Squarespace.DialogFields.Check,$when:a.Squarespace.Utils.isBetaFeatureEnabled,config:{name:"showDownload",strings:{title:"Show Download Link",description:"Allow the user to download a copy of this track."}}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"designStyle",className:"thin dark",options:[{value:"classic",label:"Classic"},{value:"minimal",
label:"Minimal"}],strings:{title:"Player Style"}}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"colorTheme",defaultValue:"light",className:"thin dark",options:[{value:"light",label:"Light"},{value:"dark",label:"Dark"}],strings:{title:"Player Color"}}}]}]}},"1.0",{requires:"base squarespace-audio-player squarespace-block-editor-dialog squarespace-damask-context-globals squarespace-dialog-check squarespace-dialog-description squarespace-dialog-file squarespace-dialog-file-audio squarespace-dialog-multi-option squarespace-dialog-multi-frame squarespace-dialog-text squarespace-models-content-item".split(" ")});
YUI.add("squarespace-dialog-content-stat-manager-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-content-stat-manager.html"]=a(function(a,b,d,f,h){function k(a,b){var c,e;c='\n      <li class="field-tag-list-item tag-cloud-item" tag="';(e=d.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===l?e.apply(a):e);c+=n(e)+'" title="';(e=d.count)?e=e.call(a,{hash:{},data:b}):(e=a.count,e=typeof e===l?e.apply(a):e);c+=n(e)+'">\n        <span class="field-tag-name tag">';
(e=d.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===l?e.apply(a):e);return c+=n(e)+"</span>\n      </li>\n    "}this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var l="function",n=this.escapeExpression,p=this;a='  <div class="field-tag-title-box">\n    <div class="field-tag-title-text">';(f=d.title)?f=f.call(b,{hash:{},data:h}):(f=b.title,f=typeof f===l?f.apply(b):f);a+=n(f)+'</div>\n    <div class="field-tag-header">\n      <div class="field-tag-filter-box field-tag-inline">\n        <input class="field-input field-tag-inline field-tag-filter-input" type="text" spellcheck="false" placeholder="Filter">\n      </div>\n      <div class="field-tag-sort-box field-tag-inline">\n        <div class="field-tag-sort-text field-tag-inline"></div>\n        <div class="field-tag-sort-select field-tag-inline" style="position:relative">\n          <div class="field-tag-sort-inner">Weight</div>\n          <select class="select field-tag-inline">\n            <option value="A-Z">A-Z</option>\n            <option value="Activity">Activity</option>\n            <option value="Weight" selected="true">Weight</option>\n          </select>\n        </div>\n      </div>\n    </div>\n  </div>\n  \x3c!-- tag cloud --\x3e\n  ';
if((f=d["if"].call(b,b.data,{hash:{},inverse:p.program(4,function(a,b){var c,e;c='\n  <div class="field-tag-no-items field-tag-cloud">\n    This collection does not contain any ';(e=d.modePlural)?e=e.call(a,{hash:{},data:b}):(e=a.modePlural,e=typeof e===l?e.apply(a):e);return c+=n(e)+".\n  </div>\n  "},h),fn:p.program(1,function(a,b){var c,e;c="\n  <div class=\"field-tag-cloud\">\n    <ul class='field-tag-list'>\n    ";if((e=d.each.call(a,a.data,{hash:{},inverse:p.noop,fn:p.program(2,k,b),data:b}))||
0===e)c+=e;return c+"\n    </ul>\n  </div>\n  "},h),data:h}))||0===f)a+=f;a+='\n  \x3c!-- footer --\x3e\n  <div class="tag-cloud-footer-wrapper">\n    <div class="field-tag-footer">\n      <input type="text" ';if((f=d["if"].call(b,b.maxLength,{hash:{},inverse:p.noop,fn:p.program(6,function(a,b){var c,e;c='maxlength="';(e=d.maxLength)?e=e.call(a,{hash:{},data:b}):(e=a.maxLength,e=typeof e===l?e.apply(a):e);return c+=n(e)+'"'},h),data:h}))||0===f)a+=f;return a+' spellcheck="false" placeholder="New Name" class="field-input field-tag-input field-tag-inline">\n      <div class="button-block field-tag-inline button-rename">\n        <input class="button-title" type="button" value="Rename">\n      </div>\n      <div class="button-block field-tag-inline button-remove-sel" style="float:right">\n        <input type="button" value="Remove Selected">\n      </div>\n    </div>\n  </div>\n'})})();
a.Handlebars.registerPartial("dialog-content-stat-manager.html".replace("/","."),d.templates["dialog-content-stat-manager.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-dialog-labelled-value-table-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-labelled-value-table.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k=this.escapeExpression;return(a=d["with"].call(b,b.strings,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;c='\n\n  <div class="field-lhs top">\n    ';(e=d.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,
e="function"===typeof e?e.apply(a):e);c+=k(e)+'\n  </div>\n  <div class="field-rhs">\n    <div class="field-description-wrapper">\n      <div class="field-description">\n        ';(e=d.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e="function"===typeof e?e.apply(a):e);c+=k(e)+"\n      </div>\n    </div>\n\n    <table>\n      <thead>\n        <tr>\n          <th>\n            ";(e=d.valueLabel)?e=e.call(a,{hash:{},data:b}):(e=a.valueLabel,e="function"===typeof e?e.apply(a):e);c+=k(e)+
"\n          </th>\n          <th>\n            ";(e=d.labelLabel)?e=e.call(a,{hash:{},data:b}):(e=a.labelLabel,e="function"===typeof e?e.apply(a):e);c+=k(e)+'\n          </th>\n        </tr>\n      </thead>\n      <tbody class="table-body">\n        <tr class="empty-message"><td colspan="2">';(e=d.emptyMessage)?e=e.call(a,{hash:{},data:b}):(e=a.emptyMessage,e="function"===typeof e?e.apply(a):e);return c+=k(e)+'</td></tr>\n      </tbody> \n    </table>\n\n    <div class="add-row">\n      <img src="/universal/images-v6/standard/icon_add_11_light.png" />\n    </div>\n\n  </div>\n'},
h),data:h}))||0===a?a:""})})();a.Handlebars.registerPartial("dialog-labelled-value-table.html".replace("/","."),d.templates["dialog-labelled-value-table.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-block-tagcloud",function(a){a.namespace("Squarespace.Block").Tagcloud=a.Base.create("block-tagcloud",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-tagcloud",ATTRS:{editor:{value:a.Squarespace.Block.Editor.Tagcloud},type:{value:a.Squarespace.BlockType.TAGCLOUD},defaultContentModel:{value:{linkTitle:"",linkTarget:"",newWindow:!1}}}})},"1.0",{requires:["squarespace-enum","squarespace-block-base-modelsync","squarespace-block-tagcloud-editor"]});
YUI.add("squarespace-block-embed-editor",function(a){a.namespace("Squarespace.Block.Editor").Embed=a.Base.create("embed-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Embed")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Embed"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Embed=a.Base.create("blockEmbedEditor",a.Squarespace.ModelEditorDialog,[],{getDialogData:function(){return{embed:this.get("model").toJSON()}},
sanitizeDialogData:function(a){return a.embed}},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={width:470,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Embed",icon:"/universal/images-v6/icons/icon-embed-16-light.png",scroll:!1,fields:[{ctor:a.Squarespace.DialogFields.Oembed,name:"embed",config:{"strings.description":"<strong>Paste the URL</strong> of an item (Tweet, SoundCloud song, etc) you'd like to embed, and Squarespace will attempt to locate content at this URL and format it for your site."}}]}]}},
"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-oembed","squarespace-model-editor"]});
YUI.add("squarespace-settings-tabbed-panel-tab",function(a){a.namespace("Squarespace.Widgets");var d=function(b){return a.Lang.isNumber(b)?b:a.Lang.isString(b)?Number(b.replace("px",""))||0:0},b=a.Squarespace.Widgets.PanelTab=a.Base.create("panelTab",a.Squarespace.Widgets.DataWidget,[a.WidgetParent],{initializer:function(a){this.publish("ready")},destructor:function(){this._destroyFlyouts();a.Array.each(this._renderedFields,function(a){a.destroy()},this)},bindUI:function(){b.superclass.bindUI.call(this);
this.onceAfter("visibleChange",this._sizeVerticalSpan,this);this.on("*:dataChange",a.Squarespace.debounce(a.bind(function(a){a.target!==this&&this._updateData()},this),50),this)},renderUI:function(){b.superclass.renderUI.call(this);this._renderFields()},syncUI:function(){b.superclass.syncUI.call(this)},setEdited:function(){this._updateData()},_updateData:function(a){this.set("data",this.getData())},_renderFields:function(){var b=this.get("fields");a.Array.each(b,this._initField,this)},_sizeVerticalSpan:function(){var b=
this.get("fields");if(b=a.Array.find(b,function(a){return a.verticalSpan},this)){var b=this.getField(b.name),e=this.get("boundingBox").get("offsetHeight");if(b){this.each(function(a){a=a.get("boundingBox");e-=d(a.getStyle("marginTop").replace("px",""));e-=a.get("offsetHeight")||0},this);var g=b.get("boundingBox"),g=g.get("offsetHeight")-d(g.getStyle("marginTop"))-d(g.getStyle("marginBottom"));b.set("height",e+g)}}this.fire("ready")},mapDfOneToDfFun:function(b){var e=b.split("-").map(function(a){return a.capitalize()}).join(""),
e=a.Object.getValue(a.Squarespace.DialogFields,e);if(a.Lang.isValue(e))return e;console.log("Could not map old type: ["+b+"] to DF2");return null},_initField:function(b){var e,d=this.get("data"),f=b.name||b.config.name,h=a.clone(b),k=a.clone(b.config);a.Lang.isValue(b.ctor)?e=b.ctor:a.Lang.isString(b.type)&&(e=this.mapDfOneToDfFun(b.type),k=h);a.Lang.isValue(e)?(delete h.ctor,delete h.config,b=a.merge(h,k),b.panel=this,b.childType=e,a.Lang.isValue(d[f])&&(b.data=d[f]),this.add(b)):console.warn("[_initField] Could not find a constructor")},
_destroyFlyouts:function(){a.Lang.isValue(this._activeFlyoutHandler)&&this._activeFlyoutHandler.detach();a.Lang.isValue(this._activeFlyout)&&(this._activeFlyout.closeFlyout(),this._activeFlyout=null)},setActiveFlyout:function(b){this._destroyFlyouts();a.Lang.isValue(b.field)&&a.later(0,this,function(){this._activeFlyout=b.field;this._activeFlyoutHandler=this.get("boundingBox").once("click",function(a){a.target.ancestor(b.constraintClasses,!0)||this._destroyFlyouts()},this)})},toggleView:function(a){a?
this.show():this.hide()},_toggleChildView:function(a){this.each(function(b){a?b.show():b.hide()},this)},show:function(){this.set("visible",!0);this._toggleChildView(!0)},hide:function(){this._destroyFlyouts();this.set("visible",!1);this._toggleChildView(!1)},_checkErrors:function(){var b=this._items,e=a.Squarespace.FormUtils.validate(b);0<a.Object.keys(e).length&&a.Squarespace.FormUtils.showErrors(b,e);return e},getField:function(a){var b;this.some(function(d,f){b=d;return a===d.get("name")},this);
return b||null},getData:function(){var b={};this.each(function(e,d){var f=e.get("name");a.Lang.isString(f)&&(b[f]=e.get("data"))},this);return b},getErrors:function(){var a={};this.each(function(b,d){b.get("required")&&b.isEmpty()&&(a[b.getName()]="This is a required field")},this);return a}},{CSS_PREFIX:"sqs-settings-panel-tab",ATTRS:{fields:{value:[],setter:function(b){function e(b){a.Object.hasKey(b,"fields")&&("splitter"===b.type||"stack"===b.type)?e(b.fields):a.Lang.isArray(b)?a.Array.each(b,
e,this):d.push(b)}var d=[];e(b);return d}},data:{value:null},visible:{value:!1},"strings.title":{value:"Item"},tabName:{value:null}}})},"1.0",{requires:"base-build squarespace-debounce squarespace-dialog squarespace-form-utils squarespace-mixin-save-changes squarespace-ss-widget squarespace-tray widget-anim".split(" ")});
YUI.add("squarespace-block-social-account-links-legacy-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog").LegacySocialAccountLinks=a.Base.create("SocialAccountLinksLegacyModelEditor",a.Squarespace.Block.ModelEditorDialog.SocialAccountLinks,[],{initializer:function(){var d=this.get("dialogConfig"),b=d.tabs[0];b.fields=a.Array.filter(b.fields,function(a){return"ordering-desc"!==a.config.name});d.tabs.unshift({tabTitle:"Links",title:"Edit Social Links",icon:"/universal/images-v6/icons/icon-social-18-light.png",
scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.SocialAccountPicker,name:"accountIds",config:{accounts:{$include:"socialAccountPickerAccounts"}}}]})}})},"1.0",{requires:["base","squarespace-dialog-social-account-picker","squarespace-block-social-account-links-model-editor"]});
YUI.add("squarespace-content-item-grid",function(a){a.namespace("Squarespace");var d=a.Squarespace.ContentItemGrid=a.Base.create("ContentItemGrid",a.Squarespace.Widgets.SSWidget,[a.WidgetParent,a.WidgetChild,a.Squarespace.Mixins.ContentCollectionBulkActionable,a.Squarespace.Mixins.AddContentItemHandlerMixin],{initializer:function(){if(!this.get("model"))throw'ContentItemGrid: Missing attribute "model".';this.publish("itemSaved",{emitFacade:!0,bubbles:!0})},destructor:function(){this.get("model").items.detach(this.get("id")+
"|*");this._ddDelegate.destroy();this._ddReorder.destroy();this._ddGrouping.destroy();this._dragSelection.destroy();this._resizeEmitter&&this._resizeEmitter.destroy();this._uploader&&this._uploader.destroy()},renderUI:function(){d.superclass.renderUI.call(this);if(this.get("loadByViewport")){var b=this.get("contentBox").ancestor(function(a){return a.getComputedStyle("overflowY").match(/scroll|auto/)});if(!b||b.test("html,body"))b=a.one(a.config.win);this._scrollEl=b}},bindUI:function(){d.superclass.bindUI.call(this);
var b=this.get("contentBox"),c=this.get("id"),e=this.get("model").items;this._setupDragBehaviors();this.on("*:aviary-start",function(){this.set("dragSelectionEnabled",!1);this.set("keyBindingsEnabled",!1);this.deselectAll()},this);this.on("*:aviary-finish",function(){this.set("dragSelectionEnabled",!0);this.set("keyBindingsEnabled",!0)},this);this.on("*:remove",function(b){this.removeItems(new a.ArrayList(b.target))},this);this._resizeEmitter=new a.Squarespace.ResizeEmitter;this._resizeEmitter.on("resize",
this._refreshStylesheet,this);this.after(["minMarginChange","imageSizeChange"],function(){this._refreshStylesheet();this._refreshImages()},this);this._ddDelegate.dd.on("drag:mouseDown",function(b){var c=a.Widget.getByNode(b.ev.target);null!==c&&(c.get("contentBox").one("img")&&!b.ev.target.ancestor(".inside",!0))&&b.halt()});this._ddReorder.on("reordered",this._onSingleReorder,this);this._ddGrouping.on("group-reordered",this._onGroupReorder,this);this.on("dragSelectionEnabledChange",function(a){this._dragSelection.set("enabled",
a.newVal)},this);this._dragSelection.on([this.get("id")+"|selection-complete",this.get("id")+"|selection-dragged"],function(a){this._updateSelectedWidgets(a.region)},this);a.on(c+"|keydown",this._onKeydown,a.config.doc,this);if(this.get("showActionTray"))this.on("selectionChange",function(a){a.stopImmediatePropagation();this.updateActionTray()},this);this.get("showAddIcon")&&this.get("boundingBox").delegate("click",this.handleAddContentRequest,".add-item",this);b.delegate("click",function(a){this._uploader||
this.handleAddContentRequest()},".empty-state",this);this.after(["addChild","removeChild"],function(){this._checkEmptyState();this._refreshStylesheet()},this);this._registerEvent(e.after(c+"|add",function(a){!a.onReorder&&!a.onUpload&&(this._addItemWidget(a.model),this.get("loadByViewport")&&this._loadItemImagesInViewport())},this));this._registerEvent(e.after(c+"|remove",function(a){a.onReorder||this._removeItemWidget(a.model)},this));this.get("loadByViewport")&&(this._scrollEl.on("scroll",this._loadItemImagesInViewport,
this),this._resizeEmitter.on("resize:end",this._loadItemImagesInViewport,this))},syncUI:function(){d.superclass.syncUI.call(this);var b=this.get("contentBox");this._clearElements();this._widgetMap={};var c=this.get("model"),e=c.items;this._stylesheet||(this._stylesheet=a.Node.create('<style type="text/css"></style>'));this.get("boundingBox").appendChild(this._stylesheet);(c=c.get("typeName"))&&b.addClass("collection-type-"+c);var c=this.get("collectionConfiguration").get("acceptTypes"),g=!1,f=a.Squarespace.Singletons.Template.get("customTypes"),
h=a.Object.keys(f);a.Array.each(c,function(a){var b=-1!==h.indexOf(a)&&"image"==f[a].get("base");if("image"==a||b)g=!0});g&&(this._uploader=this._createUploader(),this._uploader.render(b));e.each(function(a,b){this._addItemWidget(a)},this);this._ddDelegate.syncTargets();this._checkEmptyState();this._refreshStylesheet();this.get("showAddIcon")&&(this._addIconEl||(this._addIconEl=a.Node.create('<button class="add-item" tabindex="-1"></button>')),this.get("boundingBox").append(this._addIconEl));this.get("loadByViewport")&&
this._loadItemImagesInViewport()},removeItems:function(b){var c=this.get("model"),e=a.bind(function(){var a=[];b.each(function(b){b.get("item").get("id")&&(a.push(b.get("item")),b.remove())},this);0<a.length&&c.items.removeItems(a)},this);if(b.size()===c.items.size())e();else{for(var d=b.item(0).get("boundingBox"),f=[];a.Widget.getByNode(d);){if(!a.instanceOf(a.Widget.getByNode(d),a.Squarespace.Widgets.ActionTray)){var h=d.plug(a.Squarespace.PositionAnimator).positionAnimator;h.hold();f.push(h)}d=
d.next()}e();a.Array.each(f,function(a){a.release()})}},enableDragSelection:function(){var a=this._dragSelection;a&&a.set("enabled",!0)},disableDragSelection:function(){var a=this._dragSelection;a&&a.set("enabled",!1)},_createNewContentItemAndShowEditor:function(b,c){var e=this.get("itemEditorOptions");if(b.recordType==a.Squarespace.RecordType.IMAGE&&e.variant==a.Squarespace.ContentItemEditorVariants.MINIMAL&&a.Lang.isValue(this._uploader))this._uploader.openFileSelectDialog(),c();else{var d=this.get("model"),
f=new a.Squarespace.Models.ContentItem(a.merge(b,{displayIndex:d.get("nextDisplayIndex")}));a.instanceOf(this.get("model"),a.Squarespace.Models.ContentCollection)?f.set("collectionId",d.get("id")):(f.set("collectionId",d.get("collectionId")),f.set("parentId",d.get("id")));var h=new (a.Squarespace.ContentItemEditorFactory.getEditor(f,this.get("itemEditorOptions")))({model:f}),k=f.on("save",function(b){this.fire("itemSaved");a.Object.getValue(b,["options","headers","X-AutoSave"])||d.items.add(f)},this);
h.on("visibleChange",function(a){a.newVal||k.detach()});(e=this.get("itemEditorOptions.defaultWorkflowState"))&&f.set("workflowState",e);h.on("visibleChange",function(a){a.newVal?(this.set("dragSelectionEnabled",!1),this.set("keyBindingsEnabled",!1)):(this.set("dragSelectionEnabled",!0),this.set("keyBindingsEnabled",!0))},this);a.instanceOf(this.get("model"),a.Squarespace.Models.ContentCollection)&&d.isNew()?(this._registerEvent(d.on("save",function(){f.set("collectionId",d.get("id"));c();h.show()})),
d.save()):(c(),h.show())}},_addItemWidget:function(b){var c=new a.Squarespace.ContentItemImage(a.merge(this.get("contentItemImageOptions"),{item:b,parentModel:this.get("model"),itemEditorOptions:this.get("itemEditorOptions"),preventLoad:this.get("loadByViewport")}));a.Do.before(function(){this.set("dragSelectionEnabled",!1);this.set("keyBindingsEnabled",!1);this.deselectAll()},c,"editItem",this);a.Do.after(function(){a.Do.currentRetVal.on("visibleChange",function(a){a.newVal||(this.set("dragSelectionEnabled",
!0),this.set("keyBindingsEnabled",!0))},this)},c,"editItem",this);this._widgetMap[b.get("clientId")]=c;this.add(c);return c},_removeItemWidget:function(a){a=a.get("clientId");var c=this._widgetMap[a];c&&(c.remove(),delete this._widgetMap[a])},_loadItemImagesInViewport:function(){var a=this._scrollEl,c=a.get("scrollTop"),e=c+a.get("region").height,d=[];this.each(function(a){var b=a.get("boundingBox").get("region"),k=b.top,b=b.bottom;if(k>=c&&k<=e||b>=c&&b<=e)d.push(a),a.set("preventLoad",!1)},this)},
_updateSelectedWidgets:function(b){this.each(function(c){if(a.instanceOf(c,a.Squarespace.ContentItemImage)){var e=c.get("contentBox").one("img");e?c.set("selected",e.intersect(b).inRegion?1:0):c.set("selected",c.get("contentBox").intersect(b).inRegion?1:0)}})},_insertChildBeforeUploader:function(a){this._uploader&&a.after("render",function(){this._uploader.get("boundingBox").insert(a.get("boundingBox"),"before")},this)},_createUploader:function(){var b=new a.Squarespace.Uploader({dragAndDropArea:this.get("boundingBox"),
multipleFiles:!0,autoUpload:!0,fileFilters:[{description:"Images",extensions:"*.jpg;*.jpeg;*.png;*.gif"}],processFile:a.bind(this._uploadImageProcessor,this),addPlaceholder:a.bind(this._addImagePlaceholder,this),fileComplete:a.bind(this._imageUploadComplete,this),createJob:a.bind(this._createImageProcessingJob,this),selectButtonLabel:this.get("strings.uploadText"),preflight:this.get("uploadPreflight")});this.on("uploadPreflightChange",function(a){b.get("destroyed")||b.set("preflight",a.newVal)});
b.after(this.get("id")+"|uploaderror",function(c){c=c.fileData||b.fileDataFromFile(c.file);c.placeholder.setContent(b.makeDefaultErrorBlock(c));a.Widget.getByNode(c.placeholder).get("item").set("mediaProcessingState",a.Squarespace.MediaProcessingState.ERROR)});return b},_checkEmptyState:function(){this.isEmpty()?(this.set("dragSelectionEnabled",!1),this._renderEmptyState()):(this.set("dragSelectionEnabled",!0),this._removeEmptyState())},_renderEmptyState:function(){var b=this.get("contentBox");b.addClass("empty");
if(this.get("showEmptyState")){b.addClass("show-empty-state");var c=this.get("strings.emptyTitle"),e=this.get("strings.emptyDesc");this._uploader?this._uploader.set("selectButtonLabel",'<div class="title">'+c+'</div><div class="desc">'+e+"</div>"):(this._emptyStateEl||(this._emptyStateEl=a.Node.create('<div class="empty-state"><div class="icon"></div><div class="text"><div class="title">'+c+'</div><div class="desc">'+e+"</div></div></div>")),b.append(this._emptyStateEl))}},_removeEmptyState:function(){var a=
this.get("contentBox");this.get("showEmptyState")&&(a.removeClass("show-empty-state"),this._uploader?this._uploader.set("selectButtonLabel",this.get("strings.uploadText")):this._emptyStateEl&&this._emptyStateEl.inDoc()&&this._emptyStateEl.remove());this.get("contentBox").removeClass("empty")},_refreshStylesheet:function(){this.size();var b=this.get("boundingBox"),c=b.get("offsetWidth"),e="";if(this.isEmpty())e+=" #"+b.get("id")+".sqs-content-item-grid .sqs-uploader { min-width: 100%; width: 100%; height: 100%; }",
e+=" #"+b.get("id")+".sqs-content-item-grid .sqs-uploader-content { width: 100%; height: 100%; margin: 0 auto; padding: 0; } ";else var d=this.get("imageSize"),f=this.get("minMargin"),c=Math.floor(c/(d+2*f)),h="."+a.Squarespace.ContentItemImage.CSS_PREFIX,e=e+(" #"+b.get("id")+".sqs-content-item-grid "+h+", .sqs-content-item-grid .sqs-uploader { min-width: "+d+"px; width: "+100/c+"%; }"),e=e+(" #"+b.get("id")+".sqs-content-item-grid .sqs-uploader { height: "+(d+2*f)+"px; }"),e=e+(" #"+b.get("id")+
".sqs-content-item-grid "+h+"-content { width: "+d+"px; height: "+d+"px; margin: 0 auto; padding: "+f+"px 0; }"),e=e+(" #"+b.get("id")+".sqs-content-item-grid "+h+"-content .inside { width: "+d+"px; height: "+d+"px; }"),e=e+(" #"+b.get("id")+" "+h+":nth-child("+c+"n) { margin-right: 0; }"),e=e+(" #"+b.get("id")+".sqs-content-item-grid .sqs-uploader-content { width: "+d+"px; height: "+d+"px; margin: 0 auto; padding: "+f+"px 0; } ");this._stylesheet.set("innerHTML",e)},_refreshImages:function(){this.get("contentBox").all("img[data-src]").each(function(a){a.refresh()})},
_clearElements:function(){this._addIconEl&&this._addIconEl.inDoc()&&this._addIconEl.remove();this._stylesheet&&this._stylesheet.remove();this._uploader&&this._uploader.destroy();this._removeEmptyState();this.removeAll()},_setupDragBehaviors:function(){var b="."+a.Squarespace.ContentItemImage.CSS_PREFIX+":not(.yui3-dd-super-proxy-clone)",c=(this._ddDelegate=new a.DD.Delegate({container:this.get("contentBox"),nodes:b,target:!0})).dd;this._ddReorder=c.plug(a.Squarespace.DDReorder,{container:this.get("contentBox"),
nodes:b,multiSelectNodes:b+".selected"}).ddreorder;this._ddGrouping=c.plug(a.Squarespace.DDDragGrouping,{container:this.get("contentBox"),nodes:b,multiSelectNodes:b+".selected"}).dragGrouping;b={horizontal:!1,scrollDelay:100};if(this.get("windowScrollOnDrag"))c.plug(a.Plugin.DDWinScroll,b);else{var e=this.get("scrollNode")||this.get("contentBox");c.plug(a.Plugin.DDNodeScroll,a.merge(b,{node:e}))}c=this.get("dragRegion")||this.get("boundingBox");this._dragSelection=new a.Squarespace.DragSelection({node:"body",
boundingRegion:c,activationRegion:c,enabled:this.get("dragSelectionEnabled")})},_onKeydown:function(a){this.get("keyBindingsEnabled")&&(46==a.keyCode||8==a.keyCode)&&this.removeSelected()},_getDraggingNodes:function(){var b="."+a.Squarespace.ContentItemImage.CSS_PREFIX+".selected,.proxy-animating-back,.yui3-dd-dragging",c=":not(."+this._ddReorder.get("cloneClass")+")";return this.get("contentBox").all(b).filter(c)},_onSingleReorder:function(b){1===this._getDraggingNodes().size()&&this.get("model").items.reorderItems([a.Widget.getByNode(b.node).get("item")],
b.newIndex)},_onGroupReorder:function(b){var c=this._getDraggingNodes();if(1<c.size()){var e=this.get("contentBox").get("children"),c=c.getDOMNodes().sort(function(a,b){return e.indexOf(a)>e.indexOf(b)?1:-1}),c=a.Array.map(c,function(b){return a.Widget.getByNode(b).get("item")},this);this.get("model").items.reorderItems(c,b.newIndex)}},_afterAddChild:function(b){a.WidgetParent.prototype._afterAddChild.call(this,b);this._insertChildBeforeUploader(b.child);this._ddDelegate.syncTargets()},_uploadImageProcessor:function(b){var c=
this.get("model"),e=this._uploader.fileDataFromFile(b.file);e&&!b.item&&(b.item=e.item);var e={contentType:"image",process:"true",index:b.item?b.item.get("displayIndex"):c.get("nextDisplayIndex")},d=c.get("id");(c=c.get("collectionId"))?(e.collectionId=c,e.parentItemId=d):e.collectionId=d;b.postData=e;b.invalid&&(b=b.invalid[0],new a.Squarespace.Widgets.Alert({"strings.title":b.title,"strings.message":b.message}))},_addImagePlaceholder:function(b){var c=new a.Squarespace.Models.ContentItem({mediaProcessingState:a.Squarespace.MediaProcessingState.QUEUED,
displayIndex:b.postData.index,recordType:a.Squarespace.RecordType.IMAGE});this.get("model").items.add(c,{onUpload:!0});b.item=c;b=this._addItemWidget(c);this.get("loadByViewport")&&this._loadItemImagesInViewport();return b.get("contentBox").one(".inside")},_imageUploadComplete:function(b,c){b.item.setAttrs(c.media[0]);0===b.index&&this._registerEvent(b.item.after(this.get("id")+"|mediaProcessingStateChange",function(b){b.newVal==a.Squarespace.MediaProcessingState.READY&&this.get("model").load()},
this))},_createImageProcessingJob:function(b,c){if(!c.job)return console.warn("No job created. Image processing on the frontend should hang."),null;b.item.setAttrs(c.media[0]);var e=new a.Squarespace.ImageProcessingJob(a.merge(c.job,{started:!0}));e.set("collection",this.get("model"));return e}},{CSS_PREFIX:"sqs-content-item-grid",ASYNC_DATA:!0,ATTRS:{defaultChildType:{value:a.Squarespace.ContentItemImage},model:{validator:function(b){return a.instanceOf(b,a.Squarespace.Models.ContentCollection)||
a.instanceOf(b,a.Squarespace.Models.ContentItem)}},collection:{getter:function(){return this.get("model")}},collectionConfiguration:{setter:function(b){return!a.instanceOf(b,a.Model)?new a.Model(b):b}},contentItemImageOptions:{value:{}},imageSize:{value:100},minMargin:{value:20},strings:{value:{uploadText:"Click here or drag and drop to upload images.",emptyTitle:"Add Items",emptyDesc:"This collection is empty. Click here to add your first item."}},multiple:{value:!0},showAddIcon:{value:!1},showEmptyState:{value:!0},
dragRegion:{},windowScrollOnDrag:{value:!1},scrollNode:{value:null},keyBindingsEnabled:{value:!0},dragSelectionEnabled:{value:!0},uploadPreflight:{},loadByViewport:{value:!0}}})},"1.0",{requires:"widget-parent widget-child event-key dd-delegate squarespace-ss-widget squarespace-content-item-image squarespace-uploader squarespace-image-loader squarespace-job-manager squarespace-async-task-synchronizer squarespace-dd-behaviors squarespace-drag-selection squarespace-models-content-collection squarespace-models-content-item squarespace-dialog-flow squarespace-dialog-content-selector squarespace-content-collection-bulk-actionable squarespace-content-item-types-selector squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-dialog-labelled-value-table",function(a){a.namespace("Squarespace");var d=a.Squarespace.DialogFields.LabelledValueTable=a.Base.create("LabelledValueTable",a.Squarespace.DialogField2,[],{initializer:function(){a.Lang.isValue(this.get("data"))||this.set("data",this.get("defaultData"))},renderUI:function(){d.superclass.renderUI.call(this);this.get("contentBox");this._populateTable(this.get("data"))},bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("contentBox");this.on("rowsChanged",
this._updateDataFromTable,this);a.delegate("change",this._updateDataFromTable,"input",this);a.delegate("click",this._insertNewRow,".add-row",this);a.delegate("click",this._removeRow,".remove",this)},_populateTable:function(b){a.Array.each(b,this._addRow,this)},syncUI:function(){d.superclass.syncUI.call(this);var b=this.get("contentBox");a.Lang.isValue(this.get("data"))&&b.toggleClass("empty",0===this.get("data").length)},_updateDataFromTable:function(){this.set("data",this._extractRowValuesFromTable())},
_removeRow:function(a){a.currentTarget.ancestor(".row").remove();a.stopPropagation();this.fire("rowsChanged")},_insertNewRow:function(){var a=this.get("contentBox"),c={};c[this.get("valueKey")]=2500;this._addRow(c);a.one(".add-row").scrollIntoView();this.fire("rowsChanged")},_addRow:function(b){var c=this.get("contentBox");b=a.Node.create(a.Handlebars.render(this.getProperty("ROW_TEMPLATE"),{value:b[this.get("valueKey")],label:b[this.get("labelKey")]}));a.Lang.isValue(this.get("valueInputPlugin"))&&
b.one('input[name="value"]').plug(this.get("valueInputPlugin"));c.one("tbody").append(b)},_extractRowValuesFromTable:function(){var b=[];this.get("contentBox").one("tbody").all(".row").each(function(c){var e={},d=this.get("valueInputPlugin");a.Lang.isValue(d)?(d=d.NS,e[this.get("valueKey")]=c.one('input[name="value"]')[d].get("data")):e[this.get("valueKey")]=c.one('input[name="value"]').get("value");e[this.get("labelKey")]=c.one('input[name="label"]').get("value");b.push(e)},this);return b}},{CSS_PREFIX:"sqs-labelled-value-table",
HANDLEBARS_TEMPLATE:"dialog-labelled-value-table.html",ROW_TEMPLATE:'<tr class="row"><td class="left"><input type="text" class="value" name="value" value="{{value}}" /></td><td class="right"><input type="text" class="label" name="label" value="{{label}}" /></td><td class="remove"><div class="remove-row"></div></td></tr>',ATTRS:{strings:{value:{title:"",description:"",emptyMessage:"Empty",valueLabel:"My Value",labelLabel:"My Label"}},valueKey:{value:"value"},labelKey:{value:"label"},valueInputPlugin:{value:null},
defaultData:{value:[]}}})},"1.0",{requires:"base json handlebars squarespace-animations squarespace-input-utils squarespace-dialog-field-2 squarespace-dialog-labelled-value-table-template".split(" ")});
YUI.add("squarespace-block-image-editor-base",function(a){var d=d||function(){},b=a.namespace("Squarespace.Block.Editor").ImageBase=a.Base.create("image-block-editor-dialog-base",a.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this._host.contentImage.get("model").after(["imageIdChange","processingChange"],this.syncUI,this);this.onHostEvent("focusedChange",function(a){this._host.get("editController").alignInsertPoints()},this)},_syncResizable:d,destructor:function(){this.drop&&this.drop.destroy();
this._host.get("model").detach("blockEditor|*");this._host.contentImage.detach("blockEditor|*");this._host.contentCaption.detach("blockEditor|*")},_bindDialogEvents:function(){b.superclass._bindDialogEvents.call(this);this.configDialog.get("dialog").on("dismiss",function(a){this._getContentItemEditor().set("editing",!1)},this)},_getContentItemEditor:function(){return this._host.contentImage.contentEditor}},{ATTRS:{blockName:{value:"Image"},editing:{value:!1},editingOverlay:{valueFn:function(){return null}},
editingTrueOnNewBlock:{value:!1},editingEvent:{value:["dblclick","contextmenu"]}}})},"1.0",{requires:["base","squarespace-model-editor","squarespace-block-editor-base","squarespace-block-editor-dialog"]});
YUI.add("squarespace-form-editing-utils",function(a){a.namespace("Squarespace");a.Squarespace.FormEditingUtils={resolveFieldTitle:function(d,b){var c=0;a.Array.each(b,function(a){a.type===d.type&&c++},this);0<c&&(d.title=d.title+" "+c)},resolveFieldId:function(d,b){d.id||(a.Lang.isValue(d.title)||a.Squarespace.FormEditingUtils.resolveFieldTitle(d,b),d.id=a.guid(a.Squarespace.Utils.createUrl(d.type)+"-"))}}},"1.0",{requires:["squarespace-util","squarespace-dialog-description","squarespace-dialog-text",
"squarespace-dialog-code","squarespace-dialog-wysiwyg"]});
YUI.add("squarespace-tweak",function(a){a.namespace("Squarespace");a.Squarespace.TweakTypeString={};a.Squarespace.TweakTypeString[a.Squarespace.TweakTypes.COLOR]="color";a.Squarespace.TweakTypeString[a.Squarespace.TweakTypes.HUE]="hue";a.Squarespace.TweakTypeString[a.Squarespace.TweakTypes.FONT]="font";a.Squarespace.TweakTypeString[a.Squarespace.TweakTypes.IMAGE]="image";a.Squarespace.TweakTypeString[a.Squarespace.TweakTypes.VALUE]="value";a.Squarespace.TweakTypeString[a.Squarespace.TweakTypes.MARGIN]=
"margin";a.Squarespace.TweakTypeString[a.Squarespace.TweakTypes.PADDING]="padding";a.Squarespace.TweakTypeString[a.Squarespace.TweakTypes.DROPDOWN]="dropdown";a.Squarespace.TweakTypeString[a.Squarespace.TweakTypes.CHECKBOX]="checkbox";a.Squarespace.TweakTypeString[a.Squarespace.TweakTypes.COLORPALETTE]="colorpalette";a.Squarespace.TweakManager=Singleton.create({ready:function(){},initialize:function(b){b=b||{};a.Lang.isValue(b.collection)||a.Lang.isValue(a.Squarespace.Management)&&a.Squarespace.Management.get("contextCollection");
b=a.Squarespace.Damask.ContextGlobals.getWindow();this.frontSiteYUI=b.get("Y");this.Static=b.get("Static");this.Window=b.getDOMNode();this._inIframe=this.frontSiteYUI!==a;this._userHasChangePerms=a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE);a.Data.get({url:"/api/template/GetTemplateTweakSettings?t="+(new Date).getTime(),success:function(a){this.init(a)}},this)},init:function(b){var c;this.console=new a.Squarespace.Debugger({name:"TweakManager",
output:!1});this.data=b;this.webfonts={};this.typekitFonts={};this.websafeFonts=[];this.css=b.css;this.targetWindow=b.targetWindow?top.frames[b.targetWindow]:this.Window;this.targetWindow.onload=a.bind(function(){this.targetWindow.loaded=!0},this);this.events=[];this.tweakZones=[];this.Static.SQUARESPACE_CONTEXT.googleFonts={};for(c=0;c<b.availableFonts.length;c++){var e=b.availableFonts[c].familyName;b.availableFonts[c].foundry=b.availableFonts[c].foundry.toLowerCase();this.Static.SQUARESPACE_CONTEXT.googleFonts[e]=
b.availableFonts[c];var g=a.Squarespace.Utils.slugify(e),g=a.Object.getValue(d,g);a.Lang.isValue(g)&&(e=this.Static.SQUARESPACE_CONTEXT.googleFonts[e],e.curated=!0,e.type=g.type)}b=[];this.Static.SQUARESPACE_CONTEXT.typekitFonts={};this.Static.SQUARESPACE_CONTEXT.typekitkitFonts={};this.Static.SQUARESPACE_CONTEXT.website.typekitId?a.jsonp("https://typekit.com/api/v1/json/kits/"+this.Static.SQUARESPACE_CONTEXT.website.typekitId+"/published",{context:this,on:{failure:function(){console.log("load-failure")},
success:function(b){if(b&&b.kit&&b.kit.families)for(var c=0;c<b.kit.families.length;c++)this.Static.SQUARESPACE_CONTEXT.typekitkitFonts[b.kit.families[c].css_names[0]]={familyName:b.kit.families[c].css_names[0],normalName:b.kit.families[c].name,foundry:"Typekit",variationNames:a.Squarespace.TweakManager.getTypekitVariationNames(b.kit.families[c].variations),variations:b.kit.families[c].variations,id:b.kit.families[c].id}},timeout:function(){console.log("load-timeout")}},timeout:3E4}):(b=a.Squarespace.Tweak.TypekitDefaults,
this.parseTypekitFonts(b));this.tweakRules=new a.Squarespace.TweakRules({paths:["/universal/styles-v6/"]});this.buildDialogFields();this.initDialog();this.initOverlays();this._handleEditMode();this._initialized=!0;this.getCurrentPreset();this.Static.SQUARESPACE_CONTEXT.website.typekitId||this.addTypekitPreviewScript();this.checkAllConditions()},getTypekitVariationNames:function(a){for(var c=[],e=0;e<a.length;e++){switch(a[e][1]){case "1":c[e]="Thin";break;case "2":c[e]="Extra Light";break;case "3":c[e]=
"Light";break;case "4":c[e]="Regular";break;case "5":c[e]="Medium";break;case "6":c[e]="Semibold";break;case "7":c[e]="Bold";break;case "8":c[e]="Extra Bold";break;case "9":c[e]="Black";break;default:c[e]=a[e][1]+"00"}switch(a[e][0]){case "n":c[e]+="";break;case "i":c[e]+=" Italic";break;default:c[e]+=" "+a[e][0]}}return c},parseTypekitFonts:function(b){var c;for(i=0;i<b.length;i++){c=a.Squarespace.Utils.slugify(b[i]["Family Name"]);this.Static.SQUARESPACE_CONTEXT.typekitFonts[c]?(this.Static.SQUARESPACE_CONTEXT.typekitFonts[c].variationNames.push(b[i]["Variation Name"]),
this.Static.SQUARESPACE_CONTEXT.typekitFonts[c].variations.push(b[i].FVD)):this.Static.SQUARESPACE_CONTEXT.typekitFonts[c]={familyName:a.Squarespace.Utils.slugify(b[i]["Family Name"]),fontID:b[i]["Family ID"],normalName:b[i]["Family Name"],foundry:"typekit",variationNames:[b[i]["Variation Name"]],variations:[b[i].FVD],id:b[i]["Family ID"]};var e=a.Object.getValue(d,c);a.Lang.isValue(e)&&(c=this.Static.SQUARESPACE_CONTEXT.typekitFonts[c],c.curated=!0,c.type=e.type)}},showTweakPanel:function(){this.dialog.temporaryShow()},
hideTweakPanel:function(){this.dialog.temporaryHide();this.tweakIsTemporaryHidden=!0;this._tweakVisible=this.showingTweak=!1;this.dialog.params.customHideAnim(this.dialog.el,function(){})},globalEventList:"tweak tweak:close tweak:discard tweak:aftershow tweak:save tweak:afterclose tweak:beforeopen tweak:beforereset tweak:reset tweak:presetcreated tweak:change tweak:afterpreset".split(" "),enable:function(b){this._enabled||(b&&b.halt&&b.halt(),this._enabled=!0,this._initialized?(this.overlayManager.enable(),
this.tweakIsTemporaryHidden?(this.showTweakPanel(),this.showAll()):this.initialize()):this.initialize(b),a.one("body").addClass("sqs-style-mode"),a.Squarespace.FrontendModeManager&&a.Squarespace.FrontendModeManager.setMode("style"))},cancel:function(){this.disable()},toggle:function(){this._enabled?this.disable():this.enable()},saveAndClose:function(){this.dialog.saveAndClose();this._close()},save:function(){this.dialog.save()},close:function(){this.dialog.close();this._close()},_close:function(){this._enabled=
!1;this.overlayManager.destroy();this._initialized=!1;a.Lang.isValue(a.Squarespace.Management)&&a.Squarespace.Management.exitEditMode();a.Global.fire("tweak:close")},discard:function(){this.Static.SQUARESPACE_CONTEXT.tweakJSON=this.initialData;this.dialog.fire("tweak-discard");this.correctTweakableBodyClasses();this.dialog._setEdited(!1);try{a.Global.fire("tweak:discard")}catch(b){console.error("Error in a listener to the event: tweak:discard",b.toString())}},discardAndClose:function(){this.dialog.cancel();
this.discard();this._close()},disable:function(b,c){this._enabled&&(c=c||{},b&&b.halt&&b.halt(),this._userHasChangePerms?this.dialog.canClose(a.bind(this.saveAndClose,this),a.bind(this.discardAndClose,this))&&(c.doNotCancel||this.dialog.cancel(),this._close()):(this.hideTweakPanel(),this._close()))},getServerGoogleFontCode:function(){a.Data.get({url:"/api/template/GoogleWebfontsProxy",success:function(b){function c(a){return"regular"==a?"400":"italic"==a?"400italic":a}var e,g,f={};b=b.items;for(e=
0;e<b.length;e++)if(-1!=b[e].subsets.indexOf("latin")){g=b[e].family.replace(/ /g,"+");if(0<b[e].variants.length){g+=":"+c(b[e].variants[0]);for(var h=1;h<b[e].variants.length;h++)g+=","+c(b[e].variants[h])}f[b[e].family]={familyName:b[e].family,foundry:"google",includeName:g,normalName:b[e].family,userFont:!0};g=a.Squarespace.Utils.slugify(b[e].family);g=a.Object.getValue(d,g);a.Lang.isValue(g)&&(h=f[b[e].family],h.curated=!0,h.type=g.type)}g="";for(e=0;e<b.length;e++)-1!=b[e].subsets.indexOf("latin")&&
(g+='    installUserFont("Google", "'+f[b[e].family].familyName+'", "'+f[b[e].family].familyName+'", "'+f[b[e].family].includeName+'");\n');console.log(g)}},this)},initDialog:function(){(this.dialog=new a.Squarespace.EditingDialog).ignoreBodyClicks=!0;var b=[];for(i=1;i<this.dialogFields.length;i++)b.push({tabTitle:this.dialogFields[i].title,icon:this.dialogFields[i].icon,scroll:!0,fields:[this.dialogFields[i]]});this.dialogFields.splice(0,0,{ctor:a.Squarespace.DialogFields.Description,config:{text:"Click on an element on your page to the right to adjust fonts, colors, sizes, and other options.",
padding:[0,20]}});var b=[{type:"reset",title:"Reset to Defaults"},{type:"customCss",title:"Custom CSS"}],c={type:"showAll",title:"Show All",onclick:a.bind(this.showAll,a.Squarespace.TweakManager)},b=this._userHasChangePerms?b:[],e=this._inIframe?260:219,b={name:"tweak-settings",style:"minimal"+(this._userHasChangePerms?"":" visitor"),closeOthers:!1,disableTips:!1,draggable:!1,savingText:"Style",buttonAlign:"right",left:0,top:this._inIframe?66:0,height:"100%",noTabAnim:!0,width:e,alwaysShowTabs:!0,
disableSaveOverlay:!0,dontSetWidthOnFields:!0,Static:this.Static,showAnim:"custom",customShowAnim:a.bind(function(b,c){var d=0,k=function(){d++;if(2===++d){try{a.Global.fire("tweak:aftershow"),a.Squarespace.Utils.isInIframe()&&window.top.postMessage({type:"preview",action:"tweak:aftershow"},"*")}catch(b){console.error("Error in a listener to the event: tweak:aftershow",b.toString())}c()}};a.one("html").setStyles({marginLeft:0});var l=new a.Anim({node:this.frontSiteYUI.one("html"),to:{marginLeft:e+
"px"},duration:0.6,easing:a.Easing.easeOutStrong});l.on("end",k,this);this._inIframe||l.run();b.show().setStyles({width:0,opacity:1,overflow:"hidden"});l=new a.Anim({node:b,to:{width:e+"px"},duration:0.6,easing:a.Easing.easeOutStrong});l.on("end",k,this);l.run();this.fire("ready")},this),hideAnim:"custom",customHideAnim:a.bind(function(b,c){var e=0,d=function(){e++;if(2===++e){b.hide();a.one("body").removeClass("sqs-style-mode");c();try{a.Global.fire("tweak:afterclose"),a.Squarespace.Utils.isInIframe()&&
window.top.postMessage({type:"preview",action:"tweak:afterclose"},"*")}catch(d){console.error("Error in a listener to the event: tweak:afterclose",d.toString())}}},l=new a.Anim({node:a.one("html"),to:{marginLeft:0},duration:0.6,easing:a.Easing.easeOutStrong});l.on("end",d,this);this._inIframe||l.run();l=new a.Anim({node:b,duration:0.6,easing:a.Easing.easeOutStrong,to:{width:0}});l.on("end",d,this);this._inIframe?(this.dialog.el.addClass("closing"),a.later(300,this,d)):l.run()},this),headerButton:c,
buttons:b,primaryTabs:[{title:"Style",scroll:!0,fields:this.dialogFields}]};if(a.Cookie.get("damask"))this.dialog.on("shown",function(){this.dialog.el.removeClass("standard-dialog-wrapper")},this);this.dialog.once("shown",function(){this.dialog.el.setStyle("zIndex",this._inIframe?190:20010)},this);this.initTweakRules();this.dialog.onResize=function(){};this.dialog.on("shown",function(){try{a.Global.fire("tweak:beforeopen")}catch(b){console.error("Error in a listener to the event: tweak:beforeopen",
b.toString())}this.dialog.preventCSSUpdate=!1;a.Cookie.get("damask")||this.dialog.el.plug(a.Squarespace.ScrollLock);this.dialog.setDetectCustomPresetEvt=a.bind(function(){return this.dialog.on("datachange",function(a,b){this.fields.presets&&(!this.isResetting&&!this.isLoadingPreset)&&this.fields.presets.fields.presets.setPresetToCustom()},this.dialog)},this);this.dialog.detectCustomPresetEvt=this.dialog.setDetectCustomPresetEvt()},this);this.dialog.on(["cancel","close"],function(){this.dialog.doNotRemoveCss||
this.removeInjectedCss();this.destroy();try{a.Global.fire("tweak:close")}catch(b){console.error("Error in a listener to the event: tweak:close",b.toString())}this.frontSiteYUI.one("body").setStyle("overflow",null);a.Squarespace.FrontendModeManager&&a.Squarespace.FrontendModeManager.clearMode();this._tweakVisible=!1;this.disable(null,{doNotCancel:!0})},this);this.dialog.on("button-reset",function(){(new a.Squarespace.Fluent.Confirm({"strings.title":"Reset Styles","strings.message":"WARNING: This will reset ALL style changes you have ever made and revert styles back to template default. YOU WILL NOT BE ABLE TO UNDO THIS ACTION. Are you sure you want to reset styles?"})).then(a.bind(function(){try{a.Global.fire("tweak:beforereset")}catch(b){console.error("Error in a listener to the event: tweak:beforereset",
b.toString())}this._resetTweaks()},this))},this);this.dialog.on("datachange",this.updateTweakCss,this);this.dialog.on("user-close",function(){for(var b=0;b<a.Squarespace.EscManager.closeTargets.length;b++)"fontfamily"==a.Squarespace.EscManager.closeTargets[b].type&&a.Squarespace.EscManager.closeTargets[b].close()},this);this.dialog.on("button-customCss",function(){a.Squarespace.Utils.isSquarespaceAdmin()?this.showCustomCssDialog():(new a.Squarespace.Fluent.Confirm({"strings.title":"Warning: Adding custom CSS to your site can break your design.",
"strings.message":"Please use caution when using this feature. Our support team will be limited in their ability to help you with design related issues if you have custom CSS."})).then(a.bind(function(){this.showCustomCssDialog()},this))},this);this.dialog.on("send-requested",function(){this.dialog.allowEditing();this._saveVisualStyle();this.dialog.closeOnSend&&(this.dialog.doNotRemoveCss=!0,this.dialog.saved=!0,this.dialog.closeOnSend=!1,this.dialog.close())},this);this.dialog.setParams(b);this.dialog.tweakManager=
this;b=this.data.settings?a.merge(this.initialData,this.data.settings):this.initialData;this.dialog.setInitialData(b);this.dialog.preventCSSUpdate=!0;this.dialog.show();this._tweakVisible=!0},showAll:function(){for(var a in this.fieldsForOverlays)this.fieldsForOverlays[a].show({noAnim:!0,forOverlay:!0});for(var c in this.dialog.fields)this.dialog.fields[c].show({noAnim:!0,forOverlay:!0});this.dialog.el.removeClass("showheaderbutton");this.overlayManager.hideAll({noAnim:!0,forOverlay:!0});this.checkAllConditions()},
_resetStylesheet:function(b){a.io("/site.css?t="+(new Date).getTime(),{on:{success:function(a,b){this.removeAllInjectedCss();var d=this.frontSiteYUI.Node(this.Window.document.head);d.all("link").each(function(a,b){0<a.get("href").indexOf("/site.css")&&0>=a.get("href").indexOf("universal")&&a.remove()},this);var f=d.one("#_siteCss");f&&f.remove();d.append('<style id="_siteCss" type="text/css">'+b.responseText+"</style>")}},context:this})},_resetTweaks:function(){this.dialog.preventCSSUpdate=!0;this.dialog.isResetting=
!0;a.Data.post({url:"/api/template/ResetTemplateTweakSettings",success:function(b){this._resetStylesheet();new a.Squarespace.Widgets.Information({"strings.title":"Template Style Reset","strings.message":"Your template's visual settings have been restored to the defaults."});b.userTweaks||(this.createDefaultInitialData(),b.userTweaks=this.initialData);this._completeTweakReset(b.userTweaks)}},this)},_completeTweakReset:function(b){var c=this.dialog.getInitialData(),e;for(e in c)if(!b[e]&&this.tweakDefinitionsByName[e])if(this.tweakDefinitionsByName[e].defaultValue)b[e]=
this.tweakDefinitionsByName[e].defaultValue;else switch(this.tweakDefinitionsByName[e].type){case "dropdown":b[e]=this.tweakDefinitionsByName[e].options[0];break;case "checkbox":b[e]="false";break;default:b[e]=null}this.Static.SQUARESPACE_CONTEXT.tweakJSON=b;this.dialog.setInitialData(b);this.dialog.fire("tweak-reset");this.dialog._setEdited(!1);this.correctTweakableBodyClasses();this.dialog.preventCSSUpdate=!1;this.dialog.isResetting=!1;try{a.Global.fire("tweak:reset")}catch(d){console.error("Error in a listener to the event: tweak:reset",
d.toString())}},forceReset:function(){a.Data.post({url:"/api/template/ResetTemplateTweakSettings"})},preFormatData:function(b){for(var c in b)if("object"==typeof b[c])b[c]=this.mixinObjToCss(b[c],c);else if("string"==typeof b[c]&&"NaN"==b[c].substring(0,3))if(void 0!==a.Squarespace.TweakManager.tweakDefinitionsByName[c])b[c]=a.Squarespace.TweakManager.tweakDefinitionsByName[c].defaultValue;else for(var e=c.split("-"),d="",f="",f=0;f<e.length;f++)d+=(0===f?"":"-")+e[f],void 0!==a.Squarespace.TweakManager.tweakDefinitionsByName[d]&&
(e.splice(0,f+1),f=e.join("-"),b[c]=this.parseMixin(a.Squarespace.TweakManager.tweakDefinitionsByName[d].defaultValue)[f],f=e.length);return b},_saveVisualStyle:function(b){b=b||{};this.initialData=this.Static.SQUARESPACE_CONTEXT.tweakJSON;this.webfonts={};this.typekitFonts={};a.Data.post({url:"/api/template/SetTemplateTweakSettings",data:{tweakJson:a.JSON.stringify(this.preFormatData(this.removeExtraVars(this.dialog.getData()))),webfontsJson:a.JSON.stringify(this.getWebtfontsList("google")),typekitfontsJson:a.JSON.stringify(this.getWebtfontsList("typekit"))},
success:function(){b.dontShowSaveConfirmation||new a.Squarespace.Widgets.Information({"strings.title":"Style Saved","strings.message":"Your settings have been saved."});this.fire("saved");this._resetStylesheet();this.createPresetAfterSave&&a.Data.post({url:"/api/template/SavePreset",data:{title:this.createPresetAfterSave},success:function(){new a.Squarespace.Widgets.Information({"strings.title":"Preset Saved: "+this.createPresetAfterSave,"strings.message":"Your style has been saved and a preset has been created."});
console.log("Created preset: "+this.createPresetAfterSave);delete this.createPresetAfterSave;try{a.Global.fire("tweak:presetcreated")}catch(b){console.error("Error in a listener to the event: tweak:presetcreated",b.toString())}}},this)}},this);try{a.Global.fire("tweak:save")}catch(c){console.error("Error in a listener to the event: tweak:save",c.toString())}},createPreset:function(a){this.createPresetAfterSave=!a?"Default":a;console.log("Creating preset: "+this.createPresetAfterSave);this._saveVisualStyle({dontShowSaveConfirmation:!0})},
correctTweakableBodyClasses:function(){var b=this.frontSiteYUI.one(this.targetWindow.document).one("body"),c=this.removeExtraVars(this.dialog.getData()),e,d,f,h,k,l;for(k=0;k<this.data.tweakDefinitions.length;k++)switch(e=this.data.tweakDefinitions[k],d=c[e.variableName],e.type){case "checkbox":b["true"===d?"addClass":"removeClass"](e.variableName);break;case "dropdown":for(l=0;l<e.options.length;l++)d=d||e.options[0],f=e.options[l],h=e.variableName+"-"+a.Squarespace.Utils.slugify(f),b[d==f?"addClass":
"removeClass"](h)}},destroy:function(){},getCurrentPreset:function(){var b,c,e,d,f;if(a.Squarespace.TweakManager.data.presets&&0!==a.Squarespace.TweakManager.data.presets.length){for(var h=0;h<a.Squarespace.TweakManager.data.presets.length;h++){b=a.Squarespace.TweakManager.data.presets[h];d=!0;for(var k in b.templateTweaks){for(var l in this.dialog.fields){c=this.dialog.fields[l];for(var n in c.fields){e=c.fields[n];if(e.config.name==k)if(-1!=e.value.search("{")){e=this.parseMixin(e.value,{noArray:!0});
f=this.parseMixin(b.templateTweaks[k],{noArray:!0});for(var p in e)e[p]instanceof Array||(d=d&&e[p]==f[p])}else d=d&&e.value==b.templateTweaks[k];else if(f=e.getType(),"font"==f||"image"==f){e=e.getAssociatedVars();for(f=0;f<e.length&&e[f].name!=k;f++);}if(!d)break}}if(!d)break}if(d)break}d?(a.Squarespace.TweakManager.dialog.fields.presets.fields.presets.dropdown.select.set("selectedIndex",h),a.Squarespace.TweakManager.dialog.fields.presets.fields.presets.dropdown.html.one(".current").set("text",
b.title)):a.Squarespace.TweakManager.dialog.fields.presets.fields.presets.setPresetToCustom()}},initTweakRules:function(){this.tweakRules.ready||this.tweakRules.processLess(this.css+"\n"+this.dataToCss(this.initialData))},parseMixin:function(a,c){function e(a){return a&&a.trim?a.trim():a}c=c||{};a=a.replace("{","").replace("}","");for(var d={},f=a.split(";"),h=0;h<f.length;h++){var k=f[h].replace("http://","@@@").replace("https://","#@#").split(":");2==k.length&&(d[e(k[0])]=e(k[1].replace("@@@","http://").replace("#@#",
"https://")),void 0===d[e(k[0])+"-array"]&&(d[e(k[0])+"-array"]=[]),!c.noArray&&void 0!==("array"==d[e(k[0])+"-array"]).push&&d[e(k[0])+"-array"].push(e(k[1].replace("@@@","http://").replace("#@#","https://"))))}return d},addTypekitPreviewScript:function(){var a=document.createElement("script");a.src="https://use.typekit.net/previewkits/pk-v1.js";this.frontSiteYUI.one("body").append(a)},addWebfont:function(a,c,e){var d,f;switch(a){case "google":case "google-deprecated":a=this.webfonts;for(d=0;d<e.length;d++)f=
e[d],a[c]?-1===a[c].indexOf(f)&&a[c].push(f):a[c]=[f];break;case "typekit":a=this.typekitFonts;for(d=0;d<e.length;d++)f=e[d],a[c]?-1===a[c].variants.indexOf(f)&&a[c].variants.push(f):a[c]={variants:[f],id:this.Static.SQUARESPACE_CONTEXT.typekitFonts[c].fontID};break;case "websafe":-1===this.websafeFonts.indexOf(c)&&this.websafeFonts.push(c)}},getWebtfontsList:function(a){var c=[],e,d,f;switch(a){case "google":a=this.webfonts;for(d in a){e="";for(f=0;f<a[d].length;f++)e+=(0<f?",":"")+a[d][f];c.push(d+
":"+e)}break;case "typekit":a=this.typekitFonts;for(d in a){e="";for(f=0;f<a[d].length;f++)e+=(0<f?",":"")+a[d][f];c.push({id:a[d].id,cssName:d,variants:a[d].variants})}break;case "websafe":c=this.websafeFonts;break;default:return}return c},createDefaultInitialData:function(){this.initialData={};for(var b=0;b<this.data.tweakDefinitions.length;b++){var c=this.data.tweakDefinitions[b];this.tweakDefinitionsByName[c.variableName]=c;if(c.defaultValue)this.initialData[c.variableName]=c.defaultValue;else if("dropdown"==
a.Squarespace.TweakTypeString[c.type]||"dropdown"==c.type)this.initialData[c.variableName]=c.options[0]}},buildDialogFields:function(){this.fields=this.data.tweakDefinitions;this.tweakDefinitionsByName={};var b=[],c=[],e=[],d=[],f=[],h=[];this.dialogFields=[];this.createDefaultInitialData();this.initialData=a.merge(this.initialData,this.data.userTweaks);var k={presets:"presets",colorpalette:"colorpalette",font:"fonts",color:"colors",image:"colors",hue:"colors",value:"values",margin:"values",padding:"values",
checkbox:"options",dropdown:"options"};this.data.presets&&0<this.data.presets.length&&(b.push({type:"presets",name:"presets",title:"Presets",value:this.data.presets}),this.dialogFields.push({type:"group",name:"presets",title:"Presets",fields:b,icon:"",noTabTitle:!0}));for(var b={},l=0;l<this.fields.length;l++)this.fields[l]=this.createField(this.fields[l]),this.fields[l].category?"fonts"===this.fields[l].category?d.push(this.fields[l]):"colors"===this.fields[l].category?e.push(this.fields[l]):"values"===
this.fields[l].category?f.push(this.fields[l]):"options"===this.fields[l].category?h.push(this.fields[l]):"colorpalette"===this.fields[l].category?c.push(this.fields[l]):(b[this.fields[l].category]||(b[this.fields[l].category]=[]),b[this.fields[l].category].push(this.fields[l])):"fonts"===k[this.fields[l].type]?d.push(this.fields[l]):"colors"===k[this.fields[l].type]?e.push(this.fields[l]):"values"===k[this.fields[l].type]?f.push(this.fields[l]):"options"===k[this.fields[l].type]?h.push(this.fields[l]):
"colorpalette"===k[this.fields[l].type]&&c.push(this.fields[l]);a.Squarespace.Utils.isBetaFeatureEnabled()&&c.length&&this.dialogFields.push({type:"group",name:"palette",title:"Color Palette",fields:c,icon:"/universal/images-v6/icons/icon-color-and-background-16-light.png"});e.length&&this.dialogFields.push({type:"group",name:"colors",title:"Colors",fields:e,icon:"/universal/images-v6/icons/icon-color-and-background-16-light.png"});d.length&&this.dialogFields.push({type:"group",name:"fonts",title:"Typography",
fields:d,icon:"/universal/images-v6/icons/icon-typography-16-light.png"});f.length&&this.dialogFields.push({type:"group",name:"values",title:"Sizes & Values",fields:f,icon:"/universal/images-v6/icons/icon-sizes-and-values-16-light.png"});h.length&&this.dialogFields.push({type:"group",name:"options",title:"Options",fields:h,icon:"/universal/images-v6/icons/icon-options-16-light.png"});for(var n in b)this.dialogFields.push({type:"group",name:a.Squarespace.Utils.slugify(n),title:n,fields:b[n],icon:"/universal/images-v6/icons/icon-options-16-light.png"})},
dataToCss:function(a){var c="",e;for(e in a){var d=this.tweakDefinitionsByName[e];d&&(c+=this.tweakToLess(e,a[e],d)+"\n")}return c},mixinObjToCss:function(a,c){var e,d;for(d in a)"string"==typeof a[d]&&("NaN"==a[d].substring(0,3)&&(e=this.parseMixin(this.tweakDefinitionsByName[c].defaultValue),a[d]=e[d]),a[d]=a[d].replace(/,/g,"**"));return JSON.stringify(a).split("").reverse().join("").replace(/"(?!\\)/g,"").split("").reverse().join("").replace(/\\/g,"").replace(/,/g,";").replace(/\*\*/g,",")},tweakToLess:function(a,
c,e){if(e){if("dropdown"==e.type||"checkbox"==e.type)return"";if("font"==e.type||"image"==e.type)return"."+a+" "+this.mixinObjToCss(c,a)}return"@"+a+":"+c+";"},showCustomCssDialog:function(){if("undefined"==typeof this.editor||null===this.editor||this.editor.closed){this.editor=this.Window.open("/config/editor","customcss","width=700,height=600,scrollbars=no,menubar=no,status=no,titlebar=no,toolbar=no");if(a.UA.ie){var b=this.frontSiteYUI.one("body");window.insertCSS=function(a){var e=document.createElement("style");
e.type="text/css";e.className="SquarespaceInjectedCustomCss";e.styleSheet?e.styleSheet.cssText=a:e.appendChild(document.createTextNode(a));b.append(e)}}this._setSiteCssEditorContent()}else this.editor.focus()},_setSiteCssEditorContent:function(){a.io("/site.css?nocustom=true&t="+(new Date).getTime(),{on:{success:a.bind(function(a,c){var e=this.frontSiteYUI.Node(this.Window.document.head);e.all("link").each(function(a,b){0<a.get("href").indexOf("/site.css")&&0>=a.get("href").indexOf("universal")&&
a.remove()},this);var d=e.one("#_siteCss");d&&d.remove();e.append('<style id="_siteCss" type="text/css">'+c.responseText+"</style>")},this)}})},updateTweakCss:function(b){if(!this.dialog.isResetting){this.frontSiteYUI.Squarespace.TWEAK_SETTINGS=a.Squarespace.TWEAK_SETTINGS||{};var c=this.removeExtraVars(this.dialog.getData()),e,d=b.getName(),c=c[d];if(a.Lang.isValue(c))this.onChange(d,c);var f=b.getType();if("fontfamily"==f){c=b.getValue();c=c.split(",")[0];c=c.replace("'","").replace('"',"").replace("'",
"").replace('"',"");if(null===c||"undefined"==typeof c||0>=c.length){console.error("No valid FontName: '"+c+"' , can't change font");return}!b.isWebsafeFont(c)&&b.isGoogleFont(c)&&((e=this.Static.SQUARESPACE_CONTEXT.googleFonts[c])||console.error("Unable to locate definition for font: "+c),SquarespaceFonts.load({googleFamilies:[e.includeName]}),this.frontSiteYUI.Squarespace.TWEAK_SETTINGS.googleFonts||(this.frontSiteYUI.Squarespace.TWEAK_SETTINGS.googleFonts=[]),this.frontSiteYUI.Squarespace.TWEAK_SETTINGS.googleFonts.push(e.includeName))}if("font"==
f&&(c=b.config.value["font-family"])){c=c.split(",")[0];c=c.replace("'","").replace('"',"").replace("'","").replace('"',"");if(null===c||"undefined"==typeof c||0>=c.length){console.error("No valid FontName: '"+c+"' , can't change font");return}b.isGoogleFont&&((e=this.Static.SQUARESPACE_CONTEXT.googleFonts[c])||console.error("Unable to locate definition for font: "+c),SquarespaceFonts.load({googleFamilies:[e.includeName]}),this.frontSiteYUI.Squarespace.TWEAK_SETTINGS.googleFonts||(this.frontSiteYUI.Squarespace.TWEAK_SETTINGS.googleFonts=
[]),this.frontSiteYUI.Squarespace.TWEAK_SETTINGS.googleFonts.push(e.includeName))}try{a.Global.fire("tweak",b)}catch(h){window.trackClientError&&window.trackClientError({url:document.location.href,message:"Error in template when modifying a tweak (event = tweak) for "+d,file:"tweak.js",line:"Unknown",error:h}),console.error("Error in a listener to the event: tweak",h.toString(),"for "+d)}try{a.Global.fire("tweak:change",b)}catch(k){window.trackClientError&&window.trackClientError({url:document.location.href,
message:"Error in template when modifying a tweak (event = tweak:change)",file:"tweak.js",line:"Unknown",error:k}),console.error("Error in a listener to the event: tweak:change",k.toString())}}},downloadCustomCss:function(b){b=b||{};this.dialog.customCss=null;a.Data.get({url:"/api/template/GetTemplateCustomCss",data:{},success:function(a){a&&a.css&&(this.dialog.customCss=a.css,b.success(a))}},this)},injectCustomCssTo:function(b){var c=this;b.all("style").each(function(a){a.hasClass("SquarespaceInjectedCustomCss")&&
(c.dialog.customCss=a.getContent(),a.remove())});void 0===this.dialog.customCss?this.downloadCustomCss({success:function(c){c&&c.css&&(c=a.Node.create('<style type="text/css" class="SquarespaceInjectedCustomCss">'+c.css+"</style>"),b.append(c))}}):null!==this.dialog.customCss&&(container=a.Node.create('<style type="text/css" class="SquarespaceInjectedCustomCss">'+this.dialog.customCss+"</style>"),b.append(container))},removeInjectedCss:function(a){a=a||this.frontSiteYUI.one(this.targetWindow.document).one("body");
a.all("style").each(function(a){a.hasClass("SquarespaceInjectedCss")&&a.remove()})},removeInjectedCustomCss:function(a){var c=this;a=a||this.frontSiteYUI.one(this.targetWindow.document).one("body");a.all("style").each(function(a){a.hasClass("SquarespaceInjectedCustomCss")&&(c.dialog.customCss=a.getContent(),a.remove())})},removeAllInjectedCss:function(a){a=a||this.frontSiteYUI.one(this.targetWindow.document).one("body");this.removeInjectedCss(a);this.removeInjectedCustomCss(a)},onChange:function(b,
c){var e,d,f,h=!1;if(!this.dialog.preventCSSUpdate){d=this.frontSiteYUI.one(this.targetWindow.document).one("body");if("presets"===b){e=this.removeExtraVars(this.dialog.getData());css=this.css+this.dataToCss(e);delete this.tweakRules;this.tweakRules=new a.Squarespace.TweakRules({paths:["/universal/styles-v6/"]});this.Static&&this.Static.SQUARESPACE_CONTEXT&&(this.Static.SQUARESPACE_CONTEXT.tweakJSON=e);this.removeAllInjectedCss(d);try{(new less.Parser({paths:["/universal/styles-v6/"]})).parse(css||
"",function(a,b){f=b.toCSS({compress:!0});f=f.replace(/%SQUARESPACE_CDN%/g,"../..")})}catch(k){console.error("LESS Compile Error: ",k)}e=a.Node.create('<style type="text/css" class="SquarespaceInjectedCss">'+f+"</style>");d.append(e)}else{this.Static&&this.Static.SQUARESPACE_CONTEXT&&(this.Static.SQUARESPACE_CONTEXT.tweakJSON[b]=c);var l=this.tweakToLess(b,c,this.tweakDefinitionsByName[b]);if(l){this.initTweakRules();this.tweakRules.processLess(l);d.all("#style_for_tweak_"+b).each(function(a){a.remove()});
for(h=0;h<this.data.tweakDefinitions.length;h++)this.data.tweakDefinitions[h].variableName==b&&(e=this.data.tweakDefinitions[h].type);f=this.tweakRules.getCssForVariable(("font"==e||"image"==e?".":"@")+b);e=a.Node.create('<style id="style_for_tweak_'+b+'" type="text/css" class="SquarespaceInjectedCss">'+f+"</style>");d.append(e);h=!0}}this.injectCustomCssTo(d);h||this.correctTweakableBodyClasses();if("presets"==b)try{a.Global.fire("tweak:afterpreset")}catch(n){console.error("Error in a listener to the event: tweak:afterpreset",
n.toString())}}},removeExtraVars:function(a){for(var c in a)"@"==c[0]&&delete a[c];return a},createField:function(b){b.type=a.Squarespace.TweakTypeString[b.type];b.name=b.variableName;b.Y=this.frontSiteYUI;return b},getGoogleFontsCode:function(){a.Data.get({url:"/api/template/GoogleWebfontsProxy",success:function(a){function c(a){return"regular"==a?"400":"italic"==a?"400italic":a}var e,d,f={},h=a.items;for(a=0;a<h.length;a++)if(-1!=h[a].subsets.indexOf("latin")){e=h[a].family.replace(/ /g,"+");if(0<
h[a].variants.length){e+=":"+c(h[a].variants[0]);for(d=1;d<h[a].variants.length;d++)e+=","+c(h[a].variants[d])}f[h[a].family]={familyName:h[a].family,foundry:"google",includeName:e,normalName:h[a].family,userFont:!0}}e="";for(a=0;a<h.length;a++)-1!=h[a].subsets.indexOf("latin")&&(e+='    installUserFont("Google", "'+f[h[a].family].familyName+'", "'+f[h[a].family].familyName+'", "'+f[h[a].family].includeName+'");\n');console.log(e)}},this)},_handleEditMode:function(){this._inIframe&&this.events.push(this.frontSiteYUI.Squarespace.Frontend.ContentModeController.on("visibleChange",
function(a){a.newVal?this.overlayManager.disable():this.overlayManager.enable()},this))},initOverlays:function(){var b,c,e,d,f=this.dialog.fields;this.overlayManager=new a.Squarespace.OverlayManager({base:this.frontSiteYUI.one("html")});this.overlayManager.disable();this.fieldsForOverlays={};for(var h in f)for(var k in f[h].fields){var l=f[h].fields[k];this.fieldsForOverlays[l.config.title]=l}a.each(this.fieldsForOverlays,function(h){b=h.config;c=b.target?b.target.split(","):["html"];for(var f=0;f<
c.length;f++)f+1<c.length&&c[f].replace(/\(/g,"").length!=c[f].replace(/\)/g,"").length&&(c[f]+=","+c.splice(f+1,1),f-=1);a.each(c,function(c){c=a.Lang.trim(c);d="body"===c?["element"]:["default"];e=b.properties?b.properties:d;e="string"===typeof e?[e]:e;a.each(e,function(a,b){("padding"===a||"margin"===a)&&e.splice(b,1,a+"-top",a+"-bottom",a+"-left",a+"-right")},this);a.each(e,function(a){this.getZone(a,c,h)},this)},this)},this);this.tweakZones.forEach(function(a){a.nodes.each(function(b){this.tweakZones.forEach(function(b){b.target===
a.target&&a!==b&&-1!==a.siblings.indexOf(b)&&(a.siblings.push(b),b.parent=a)},this)},this)},this);this.overlayManager.hideAll();this.overlayManager.enable(!1);this.events.push(a.Global.on("tweak:aftershow",this.overlayManager.syncPositions,this.overlayManager));this.events.push(a.Global.on("tweak:change",function(){a.bind(this.overlayManager.syncPositions(),this.overlayManager);this.imageLoaderTimer&&this.imageLoaderTimer.cancel();this.imageLoaderTimer=a.later(50,this,a.Squarespace.ImageLoadManager.refreshAll);
this.checkAllConditions()},this));this.dialog.bodyEl.on("hover",this.overlayManager.hideAll,this.overlayManager,!0);f=a.one("#sqs-site-frame");if(a.Lang.isValue(f))f.on("mouseleave",this.overlayManager.hideAll,this.overlayManager,!0);this.checkAllConditions()},getZone:function(a,c,e){var d=!1;this.tweakZones.forEach(function(f){if((f.property===a||"default"===a&&"width"===f.property)&&f.target===c)f.fields.push(e),e.overlays=f.overlays,d=!0,f.overlays.forEach(function(a){a.dd||this.initOverlayDragDrop(a,
e)},this)},this);if(!1===d)if(zone=this.buildZone(c,a,e))e.overlays=e.overlays||[],e.overlays.push(zone.overlays[0]),this.tweakZones.push(zone);else return;return zone},buildZone:function(b,c,e){var d={target:b,nodes:this.frontSiteYUI.all(b),property:"default"===c?"width":c,overlays:[],fields:[e],children:[],siblings:[],condition:null,parent:null,depth:0,allowDD:!0,hide:function(a){this.shown&&(this.shown=!1,a=a||{},this.overlays.forEach(function(b){b.hide(a.force)},this))},show:function(b){this.shown||
(b=b||{},a.Squarespace.TweakManager.overlayManager.hideAll(!0),a.Squarespace.TweakManager.tweakZones.forEach(function(a){a.shown=!1}),this.shown=!0,this.overlays.forEach(function(a){a.show(b.force)},this),this.siblings.forEach(function(a){a.shown||(a.shown=!0,a.overlays.forEach(function(a){a.show(b.force)},this))},this))},select:function(){this.overlays.forEach(function(a){a.select()},this);this.siblings.forEach(function(a){a.overlays.forEach(function(a){a.select()},this)},this)},showParent:function(){this.parent&&
this.parent.show()},disableField:function(a){var b=this.fields.length;this.fields.forEach(function(c){b=a===c?--b:b},this);0===b&&this.disable(!0);this.valueField===a&&this.disableDD()},enableField:function(a){this.enable();this.valueField===a&&this.enableDD()},disable:function(a){this.overlays.forEach(function(b){b.disable(a)},this)},enable:function(){this.overlays.forEach(function(a){a.enable()},this)},enableDD:function(){this.allowDD=!0;this.valueField.overlays.forEach(function(a){a.zone===this&&
a.container.removeClass("sqs-overlay-disable-dd")},this)},disableDD:function(){this.allowDD=!1;this.valueField.overlays.forEach(function(a){a.zone===this&&a.container.addClass("sqs-overlay-disable-dd")},this)}};if(1>d.nodes.size())return!1;if(50<d.nodes.size())return console.warn("An overlay is not displayed because it targets too many elements"),!1;d.nodes.each(function(f){var h=a.Node.create('<div class="sqs-handle-resize-container"><div class="sqs-handle-resize-line"></div><div class="sqs-handle-resize"></div></div>'),
k;k="padding-top"===c||"margin-top"===c||"top"===c||"bottom"===c||"margin-bottom"===c||"height"===c?"bottom":"padding-bottom"===c?"top":"padding-right"===c?"left":"right";var h={node:f,property:"default"===c?"width":c,title:e.title,controls:[h],hOffset:220,size:"value"===e.type?parseInt(e.value,10):void 0},l=this.overlayManager.addOverlay(h);l.target=b;"html"===d.target&&l.container.setStyles({opacity:0});l.align=k;l.zone=d;k="sqs-control-align-"+k+" sqs-overlay-property-"+c.split("-")[0];k=k+" sqs-overlay-for-"+
d.target.split(".").join("").split("#").join("").split(" ").join("-");l.container.addClass(k);l.container.on("hover",function(a){l.zone.show(!0)},l);this.initOverlayClick(l);this.initOverlayDragDrop(l,e);d.overlays.push(l);f.setData("zone",d)},this);return d},initOverlayClick:function(b){b.click||(Array.prototype.unique=function(){for(var a=this.concat(),b=0;b<a.length;++b)for(var d=b+1;d<a.length;++d)a[b]===a[d]&&a.splice(d--,1);return a},b.click=b.container.on("click",function(c){function e(b){var c;
if("width"!==b.property)for(c=0;c<b.zone.siblings.length;c++)if("width"==b.zone.siblings[c].property)return e(b.zone.siblings[c].overlays[0]);var d=b.zone.fields;for(c=0;c<b.zone.siblings.length;c++)d=d.concat(b.zone.siblings[c].fields).unique();if("width"==b.property){var g=function(b){if(a.Lang.isValue(b._node)){var c=[];b.get("children").each(function(){c=c.concat(g(this)).unique()});b._data&&b._data.zone&&(c=c.concat(b._data.zone.fields).unique());return c}},d=d.concat(g(b.node)).unique(),h=b.node.get("parentNode"),
f=!0;for(b=b.position;h&&f;){if(h._data&&h._data.zone)if(parentPos=h._data.zone.overlays[0].position,b.h!==parentPos.h||b.l!==parentPos.l||b.t!==parentPos.t||b.w!==parentPos.w)f=!1;else{d=d.concat(h._data.zone.fields).unique();for(c=0;c<h._data.zone.siblings.length;c++)d=d.concat(h._data.zone.siblings[c].fields).unique()}h=h.get("parentNode")}}return d}var d=0,f;for(f in this.fieldsForOverlays)this.fieldsForOverlays[f].hide({noAnim:!0,forOverlay:!0}),d++;for(var h in this.dialog.fields)this.dialog.fields[h].hide({noAnim:!0,
forOverlay:!0});c=e(c.currentTarget._data.overlay);f=0;h=!1;for(var k=0;k<c.length;k++)h=h||c[k].hidden,c[k].show({noAnim:!0}),c[k].hidden||f++,h&&c[k].group.show({noAnim:!0});this.dialog.fields.presets&&(this.dialog.fields.presets.show({noAnim:!0,forOverlay:!0}),this.dialog.fields.presets.fields.presets.show({noAnim:!0,forOverlay:!0}),f++);f<d&&this.dialog.el.addClass("showheaderbutton");this.overlayManager.deselectAll();b.zone.select()},this))},checkAllConditions:function(){this.console.log("checkAllConditions");
var b=this.dialog.el.get("scrollTop"),c;for(c in this.dialog.fields)this.dialog.fields[c].hide({noAnim:!0,forOverlay:!0});a.each(this.fieldsForOverlays,function(a){a.checkConditions()},this);this.dialog.el.set("scrollTop",b)},initOverlayDragDrop:function(a,c){if(!a.valueField&&"value"===c.config.type&&c.config.properties&&"default"!==c.config.properties[0]){this.initOverlayRuler();a.zone.valueField=c;a.container.addClass("sqs-overlay-resize-"+("left"===a.align||"right"===a.align?"horizontal":"vertical"));
var e=a.dd=new this.frontSiteYUI.DD.Drag({node:a.container,move:!1});e.on("drag:mouseDown",this._overlayDragMouseDown,this);e.on("drag:start",this._overlayDragStart,this);e.on("drag:drag",this._overlayDragDrag,this);e.on("drag:end",this._overlayDragEnd,this);this.events.push(e)}},initOverlayRuler:function(){if(!this.ruler){var b=this.ruler=a.Node.create('<div class="sqs-overlay-ruler"><div class="sqs-overlay-ruler-left"></div><div class="sqs-overlay-ruler-right"></div><div class="sqs-overlay-ruler-line"></div><div class="sqs-overlay-ruler-label"></div></div>');
b.label=this.ruler.one(".sqs-overlay-ruler-label");b.hide();this.frontSiteYUI.one("body").append(b)}},_overlayDragMouseDown:function(a){this.activeOverlay=a.target.get("node").getAncestorData("overlay",!0)},_overlayDragStart:function(a){if(this.activeOverlay.zone.allowDD){var c=this.activeOverlay,e=c.zone.property,d=c.align,f=a.target.mouseXY;a=a.target.startXY;this.ddOffset="left"===d||"right"===d?f[0]-a[0]:f[1]-a[1];this.activeTargetCentered=!1;"height"!==c.zone.property&&c.zone.nodes.item(0).ancestors().each(function(a){"auto"===
a.getStyle("margin-left")&&"auto"===a.getStyle("margin-left")&&(this.activeTargetCentered=!0)},this);this.startValue=c.zone.valueField.config.value;"horizontal"===(this.dragDirection="width"===e||"margin-left"===e||"margin-right"===e||"padding-left"===e||"padding-right"===e?"horizontal":"vertical")?this.ruler.addClass("sqs-overlay-ruler-horizontal").setStyle("top",f[1]).show():this.ruler.addClass("sqs-overlay-ruler-vertical").setStyle("left",f[0]).show()}else a.halt()},_overlayDragDrag:function(b){if(this.activeOverlay.zone.allowDD){var c,
e=this.activeOverlay,d=e.align;c=b.target.mouseXY;var f=b.target.startXY;b=e.zone.valueField;c="left"===d||"right"===d?c[0]-f[0]:c[1]-f[1];c-=c%b.config.step;c="left"===d?-1*c:c;c=this.activeTargetCentered?0.5*c:c;d=a.Squarespace.UnitManipulator.split(this.startValue);c=parseInt(d[1],10)+parseInt(c,10);c=0>c?0:c;void 0!==b.config.max&&(c=Math.min(c,b.config.max));void 0!==b.config.min&&(c=Math.max(c,b.config.min));e.value=c;b.setValue(c+d[2]);this.ruler.label.setContent(b.config.value);this.tweakZones.forEach(function(a){a.valueField&&
a.overlays.forEach(function(b){b.size=parseInt(a.valueField.config.value,10)},this)},this);e.syncPosition();e=e.container.get("region");"horizontal"===this.dragDirection?this.ruler.setStyles({left:e.left,width:e.width}).show():this.ruler.setStyles({top:e.top,height:e.height}).show()}else a.DD.DDM.activeDrag.stopDrag(),b.halt()},_overlayDragEnd:function(a){this.ruler.removeClass("sqs-overlay-ruler-vertical").removeClass("sqs-overlay-ruler-horizontal").setStyles({height:null,width:null,top:null,left:null}).hide();
this.activeOverlay.zone.show();delete this.activeOverlay}});a.augment(a.Squarespace.TweakManager,a.EventTarget);a.Squarespace.UnitManipulator={split:function(a,c){if(!(void 0===a||null===a||""===a))return a=(""===a||"-"==a?"0"+(!c?"":c):a).toString(),a.match(/^(-?\ ?[0-9]*\.?[0-9]*)(.*)/)},offsetString:function(a,c,e,d){a=this.split(a);""===a[2]&&void 0!==e&&(a[2]=e);"em"==a[2]||"rem"==a[2]&&!d?(d=0.1,c-=c%d):1<d?c-=c%d:1>d&&(c*=d);a[1]=1>d?Math.round(10*(parseFloat(a[1])+parseFloat(c)))/10:Math.round(parseFloat(a[1])+
parseFloat(c));a[0]=a[1]+a[2];return a},offsetInt:function(a,c){return this.offsetString(a,c)[0]}};var d={"Garamond Premier Pro Display":{type:"Display"},"Refrigerator Deluxe":{type:"Display"},"Alfa Slab One":{type:"Display"},"Amatic SC":{type:"Display"},"Black Ops One":{type:"Display"},"Cinzel Decorative":{type:"Display"},Flamenco:{type:"Display"},Graduate:{type:"Display"},Gruppo:{type:"Display"},"Julius Sans One":{type:"Display"},Lancelot:{type:"Display"},"Nixie One":{type:"Display"},"Permanent Marker":{type:"Display"},
"Playfair Display":{type:"Display"},"Playfair Display SC":{type:"Display"},Rye:{type:"Display"},Spirax:{type:"Display"},Ultra:{type:"Display"},"Vast Shadow":{type:"Display"},"Botanika Mono Web":{type:"Mono"},Motor:{type:"Mono"},"Droid Sans Mono":{type:"Mono"},Inconsolata:{type:"Mono"},"PT Mono":{type:"Mono"},"Source Code Pro":{type:"Mono"},"Ubuntu Mono":{type:"Mono"},"Adelle Sans":{type:"Sans Serif"},"Aktiv Grotesk Std":{type:"Sans Serif"},"AlternateGothic No. 3 D":{type:"Sans Serif"},"Atrament Web":{type:"Sans Serif"},
"Bebas Neue":{type:"Sans Serif"},"Brandon Grotesque":{type:"Sans Serif"},"Bree Web":{type:"Sans Serif"},Brevia:{type:"Sans Serif"},"Calluna Sans":{type:"Sans Serif"},"CamingoDos Web":{type:"Sans Serif"},"DIN Condensed Web":{type:"Sans Serif"},Effra:{type:"Sans Serif"},"FF Basic Gothic Web Pro":{type:"Sans Serif"},"FF Good Headline Pro Condensed":{type:"Sans Serif"},"FF Meta Web Pro":{type:"Sans Serif"},"FF Tisa Sans Pro":{type:"Sans Serif"},"Franklin Gothic URW":{type:"Sans Serif"},"Freight Sans Pro":{type:"Sans Serif"},
"Futura PT":{type:"Sans Serif"},"Hypatia Sans Pro":{type:"Sans Serif"},InterFace:{type:"Sans Serif"},"Katarine Web":{type:"Sans Serif"},"Nudista Web":{type:"Sans Serif"},"Omnes Pro":{type:"Sans Serif"},"Pragmatica Web":{type:"Sans Serif"},"Proxima Nova":{type:"Sans Serif"},"Purista Web":{type:"Sans Serif"},Ratio:{type:"Sans Serif"},"Rooney Sans Web":{type:"Sans Serif"},Scheme:{type:"Sans Serif"},Abel:{type:"Sans Serif"},"Alegreya Sans":{type:"Sans Serif"},Asap:{type:"Sans Serif"},Cabin:{type:"Sans Serif"},
Dosis:{type:"Sans Serif"},"Droid Sans":{type:"Sans Serif"},"Exo 2":{type:"Sans Serif"},"Josefin Sans":{type:"Sans Serif"},Lato:{type:"Sans Serif"},Montserrat:{type:"Sans Serif"},"Open Sans":{type:"Sans Serif"},Oswald:{type:"Sans Serif"},"PT Sans":{type:"Sans Serif"},Raleway:{type:"Sans Serif"},Roboto:{type:"Sans Serif"},"Roboto Condensed":{type:"Sans Serif"},"Source Sans Pro":{type:"Sans Serif"},"Titillium Web":{type:"Sans Serif"},Ubuntu:{type:"Sans Serif"},"Varela Round":{type:"Sans Serif"},"Corner Store":{type:"Script"},
"Lust Script":{type:"Script"},Pauline:{type:"Script"},"Lily Script One":{type:"Script"},"Lobster Two":{type:"Script"},"Oleo Script":{type:"Script"},Playball:{type:"Script"},Sail:{type:"Script"},"Adobe Caslon Pro":{type:"Serif"},"Adobe Garamond Pro":{type:"Serif"},"Ambroise STD":{type:"Serif"},"Arno Pro":{type:"Serif"},Calluna:{type:"Serif"},"FF Meta Serif Web Pro":{type:"Serif"},"FF Tisa Web Pro":{type:"Serif"},Livory:{type:"Serif"},"LTC Bodoni 175":{type:"Serif"},"Minion Pro":{type:"Serif"},"Rooney Web":{type:"Serif"},
"Skolar Web":{type:"Serif"},"Alegreya SC":{type:"Serif"},Alice:{type:"Serif"},"Crimson Text":{type:"Serif"},"Droid Serif":{type:"Serif"},"IM Fell English":{type:"Serif"},"Libre Baskerville":{type:"Serif"},Lora:{type:"Serif"},Merriweather:{type:"Serif"},"Noto Serif":{type:"Serif"},"Old Standard TT":{type:"Serif"},"PT Serif":{type:"Serif"},"Sorts Mill Goudy":{type:"Serif"},Volkhov:{type:"Serif"},"Abril Text":{type:"Slab Serif"},Adelle:{type:"Slab Serif"},"Hellenic Wide":{type:"Slab Serif"},Jubilat:{type:"Slab Serif"},
"Kulturista Web":{type:"Slab Serif"},Lexia:{type:"Slab Serif"},"Arbutus Slab":{type:"Slab Serif"},Arvo:{type:"Slab Serif"},Bitter:{type:"Slab Serif"},Glegoo:{type:"Slab Serif"},"Josefin Slab":{type:"Slab Serif"},"Roboto Slab":{type:"Slab Serif"},Sanchez:{type:"Slab Serif"}};a.Object.each(d,function(b,c){d[a.Squarespace.Utils.slugify(c)]=b;delete d[c]})},"2.0",{requires:"node json jsonp jsonp-url anim event squarespace-util squarespace-damask-context-globals squarespace-dombuilder squarespace-ui-base squarespace-ui-overlay squarespace-dialog squarespace-common squarespace-uploader squarespace-tweak-rules squarespace-tweak-fields squarespace-dialog-description squarespace-tweak-typekit-defaults squarespace-fluent-confirmation squarespace-widgets-information thirdparty-less".split(" ")});
YUI.add("squarespace-dialog-map",function(a){var d=function(a){a.stopPropagation()};a.namespace("Squarespace.DialogFields");var b=a.Squarespace.DialogFields.Map=a.Base.create("dialogMap",a.Squarespace.DialogField2,[],{initializer:function(a){a.panel&&(this.panel=a.panel);this.get("googleMapsLoaded")||this._setupGoogleMaps()},destructor:function(){a.Squarespace.GoogleMap.detach("load-success",this._setGoogleMapsLoadedTrue)},renderUI:function(){b.superclass.renderUI.call(this);this.get("anchorMap")?
this._mapDisplay=this.panel.getAnchorEl():(this._initMapEl(),this.show());this._renderGoogleAutoComplete()},bindUI:function(){b.superclass.bindUI.call(this);var c=this.get("contentBox");c.one(".map-address-fields").all(".field-input").each(function(a){a.on("keyup",this._updateDataBasedOn,this);a.on("focus",this._updateDataAfterBlur,this)},this);c.on("click",d);this._mapDisplay.on("click",d);c=this.get("dialog")||this.get("panel");a.Lang.isValue(c)&&(this._rerenderHandler=c.after("tab-focused",function(a){this.get("googleMapsLoaded")&&
this.map&&this._drawMap()},this));this._bindGoogleAutoComplete()},_renderGoogleAutoComplete:function(){var b=a.Squarespace.Damask.ContextGlobals.fromTop("Y"),e=this.get("boundingBox");this._autocomplete=new b.Squarespace.Widgets.GooglePlacesAutocomplete({inputNode:e.one("input.map-address-line1"),className:"sqs-dialog-map-google-autocomplete"});b=e.ancestor(".standard-dialog-wrapper")||a.one("body");this._autocomplete.render(b);this._autocomplete.get("boundingBox").setStyle("zIndex",a.Squarespace.DIALOG_ZINDEX_BASE+
10)},_bindGoogleAutoComplete:function(){this._lockedForAutocomplete=!1;this._autocomplete.on("listMouseDown",function(){this._lockedForAutocomplete=!0;a.later(1E3,this,function(){this._lockedForAutocomplete=!1},this)},this);this._autocomplete.on("keyboardContinue",function(){this._lockedForAutocomplete=!0},this);this._autocomplete.on("select",function(){this._lockedForAutocomplete=!0},this);this._autocomplete.on("placeDetails",this._populateFieldsFromAutocomplete,this)},_initMapEl:function(){this._mapDisplay=
a.Node.create('<div class="field-map sqs-disable-drag-selection"><div class="field-map-inner">Use the field above to select a location.</div></div>');this.get("contentBox").one(".field-wrapper").append(this._mapDisplay);this.get("height")&&this._mapDisplay.setStyle("height",this.get("height"))},_updateDataAfterBlur:function(a){if(a.target)a.target.once("blur",this._updateDataBasedOn,this)},_populateFieldsFromAutocomplete:function(a){var b=this.get("contentBox");b.one(".map-address-line1").set("value",
a.place.address);b.one(".map-address-line2").set("value",a.place.fullLocality);b.one(".map-address-country").set("value",a.place.country);this._lockedForAutocomplete=!1;b.one(".map-address-title").focus();a={addressTitle:b.one(".map-address-title").get("value"),addressLine1:a.place.address,addressLine2:a.place.fullLocality,addressCountry:a.place.country,markerLat:this.map.center.lat(),markerLng:this.map.center.lng()};this.didDataChange(a)&&(this.set("data",a,{silent:!0}),this.geocodeAndUpdateAddress())},
_updateDataBasedOn:function(b){if(!this._lockedForAutocomplete&&("blur"===b.type||b.keyCode&&13===b.keyCode)){var e=this.get("contentBox"),e={addressTitle:e.one(".map-address-title").get("value"),addressLine1:e.one(".map-address-line1").get("value"),addressLine2:e.one(".map-address-line2").get("value"),addressCountry:e.one(".map-address-country").get("value")};b.keyCode&&(e.markerLat=this.map.center.lat(),e.markerLng=this.map.center.lng());this.didDataChange(e)&&(this.set("data",a.merge(this.get("data"),
e),{silent:!0}),this.geocodeAndUpdateAddress())}},_clearLatLngData:function(b){b=a.Lang.isValue(b)?b:this.get("data");delete b.markerLat;delete b.markerLng;delete b.mapLat;delete b.mapLng;return b},_geocodeAndUpdateAddress:function(b,e){this._geocoder.geocode({address:b},a.bind(function(b,c){if(c===google.maps.GeocoderStatus.OK){var d=b[0].geometry.location,k=d.lat(),l=d.lng(),n={mapLat:k,mapLng:l};n.markerLat=k;n.markerLng=l;this._updateMap({markerLatLng:a.Lang.isValue(n.markerLat)?d:null,mapCenterLatLng:d,
mapOnlyUpdate:!0});this.set("data",a.merge(e,n))}else this.showMessageForGeocoderStatus(c);a.Lang.isValue(this.panel)&&this.panel.fire("geocode",this)},this))},geocodeAndUpdateAddress:function(){if(this.get("googleMapsLoaded")){var b=this.get("data"),e=this.getSearchableAddress(b);a.Lang.isValue(e)&&this._geocodeAndUpdateAddress(e,b)}},_setupGoogleMaps:function(){var b=a.Squarespace.GoogleMap;b.on("load-success",this._setGoogleMapsLoadedTrue,this);b.load()},_setGoogleMapsLoadedTrue:function(a){this.set("googleMapsLoaded",
!0)},show:function(){this.set("visible",!0);this._showMap()},_showMap:function(){if(this.map)this._refreshMapAndCenter();else if(this.get("anchorMap")&&!this._mapDisplay._node.__map)this._mapDisplay.on("maps-loaded",this._drawMap,this);else if(this.get("googleMapsLoaded"))this._drawMap();else this.onceAfter("googleMapsLoadedChange",this._drawMap,this)},_refreshMapAndCenter:function(){this._mapDisplay.setStyle("display","block");a.Lang.isValue(google)&&(a.Lang.isValue(this.map)&&a.Lang.isValue(this.marker))&&
(google.maps.event.trigger(this.map,"resize"),this.map.setCenter(this.marker.getPosition()))},_drawMap:function(b){if(!this.get("destroyed")){b=google.maps;if(this.get("anchorMap"))this.map=this._mapDisplay._node.__map,this._geocoder=this._mapDisplay._node.__geocoder,this.marker=this._mapDisplay._node.__marker;else{var e=a.merge(this.get("defaultLocation"),this.get("data"));this._geocoder=new b.Geocoder;this.map=new b.Map(this._mapDisplay.getDOMNode(),{zoom:e.mapZoom,center:new b.LatLng(e.mapLat,
e.mapLng),mapTypeId:b.MapTypeId.ROADMAP,scrollwheel:this.get("scrollwheelEnabled")});a.Squarespace.Rendering.createGrayscaleMap(this.map);a.Lang.isValue(e.markerLat)&&(this.marker=this._mapDisplay._node.__marker=new b.Marker({map:this.map,animation:b.Animation.DROP,draggable:!0,position:new b.LatLng(e.markerLat,e.markerLng),icon:{url:"/universal/images-v6/icons/icon-map-marker-2x.png",size:new b.Size(52,68),scaledSize:new b.Size(26,34),anchor:new b.Point(13,34)}}))}b.event.addListener(this.map,"idle",
a.bind(this._updateDataFromGoogleMaps,this));b.event.addListener(this.map,"dblclick",a.bind(this._updateMarker,this));this.bindMarkerDragEvent();this._mapDisplay.on("marker-created",this.bindMarkerDragEvent,this);this._setInitialState()}},_updateMarker:function(b){a.Lang.isValue(b.latLng)&&this._updateMap({markerLatLng:b.latLng})},_updateDataFromGoogleMaps:function(){var b;b=this.map;var e=this.marker,d={};a.Lang.isNumber(b.center.lat())&&a.Lang.isNumber(b.center.lng())&&(d.mapLat=b.center.lat(),
d.mapLng=b.center.lng(),d.mapZoom=b.getZoom());e&&e.visible&&(d.markerLat=e.getPosition().lat(),d.markerLng=e.getPosition().lng());this.didDataChange(d)&&(b=a.merge(this.get("data"),d),this.set("data",b))},_updateMap:function(b){!this._mapDisplay.ancestor(".sqs-block",!0)&&(this.map&&a.Lang.isValue(google))&&(a.Lang.isValue(b.markerLatLng)&&this._setMarkerPosition(b.markerLatLng,b.mapOnlyUpdate),!a.Lang.isUndefined(b.mapCenterLatLng)&&!this.isContainedInMap(this.map,b.markerLatLng)&&this._setMapPosition(b.mapCenterLatLng,
b.zoom))},_setMapPosition:function(b,e){a.Lang.isValue(b)&&this.map.setCenter(b);a.Lang.isValue(e)&&this.map.setZoom(e)},_setMarkerPosition:function(a,b){this.marker?this.marker.setPosition(a):this.marker=this._mapDisplay._node.__marker=new google.maps.Marker({map:this.map,animation:google.maps.Animation.DROP,draggable:!0,position:a});this.bindMarkerDragEvent();b||this._onMarkerChange()},bindMarkerDragEvent:function(){this.marker||(this.marker=this._mapDisplay.getDOMNode().__marker);this.marker&&
(a.Lang.isUndefined(this.markerDragListener)||google.maps.event.removeListener(this.markerDragListener),this.markerDragListener=google.maps.event.addListener(this.marker,"dragend",a.bind(this._onMarkerChange,this)))},isContainedInMap:function(b,e){if(a.Lang.isValue(b)&&a.Lang.isValue(e)){var d=b.getBounds();if(a.Lang.isValue(d))return d.contains(e)}return!1},_onMarkerChange:function(){this._geocoder.geocode({location:this.marker.getPosition()},a.bind(function(a,b){b===google.maps.GeocoderStatus.OK?
this.updateFormFields(a[0].address_components):this.showMessageForGeocoderStatus(b)},this))},_setInitialState:function(){var b=this.get("data"),e=this.get("contentBox");if(a.Lang.isObject(b))if(b.addressTitle&&e.one(".map-address-title").set("value",b.addressTitle),b.addressLine1&&e.one(".map-address-line1").set("value",b.addressLine1),b.addressLine2&&e.one(".map-address-line2").set("value",b.addressLine2),b.addressCountry&&e.one(".map-address-country").set("value",b.addressCountry),b.forceLoc)this.geocodeAndUpdateAddress();
else if(this.map&&!a.Lang.isUndefined(google)){var d,f;b.markerLat&&b.markerLng&&(d=new google.maps.LatLng(b.markerLat,b.markerLng));b.mapLat&&b.mapLng&&(f=new google.maps.LatLng(b.mapLat,b.mapLng));this._updateMap({markerLatLng:d,mapCenterLatLng:f,zoom:b.mapZoom,mapOnlyUpdate:!0})}},updateFormFields:function(b){var e=this.get("contentBox"),d=this.get("data")||{},f=e.one(".map-address-line1"),h=e.one(".map-address-line2"),e=e.one(".map-address-country"),k,l,n,p,q,t,r=[],u=[];a.Object.each(b,function(a){-1!==
a.types.indexOf("locality")?l=a.short_name:-1!==a.types.indexOf("administrative_area_level_1")?n=a.short_name:-1!==a.types.indexOf("country")?k=a.long_name:-1!==a.types.indexOf("route")?q=a.short_name:-1!==a.types.indexOf("street_number")?p=a.short_name:-1!==a.types.indexOf("postal_code")&&(t=a.short_name)},this);p&&r.push(p);q&&r.push(q);l&&u.push(l);n&&u.push(n);t&&u.push(t);f&&(f.set("value",r.join(" ")),d.addressLine1=f.get("value"));h&&(h.set("value",u.join(", ")),d.addressLine2=h.get("value"));
e&&(e.set("value",k),d.addressCountry=e.get("value"));a.Lang.isValue(this.marker)&&(b=this.marker.getPosition().lng(),f=this.marker.getPosition().lat(),d=a.merge(d,{markerLat:f,markerLng:b,mapLat:f,mapLng:b}));this.set("data",d)},showMessageForGeocoderStatus:function(b){b!==google.maps.GeocoderStatus.OK&&(b===google.maps.GeocoderStatus.OVER_QUERY_LIMIT?new a.Squarespace.Widgets.Alert({"strings.title":"Too Many Queries","strings.message":"You have exceeded Google Maps' maximum query rate. Please wait a moment before resuming."}):
b!==google.maps.GeocoderStatus.ZERO_RESULTS&&new a.Squarespace.Widgets.Alert({"strings.title":"Lookup Failed","strings.message":"Address lookup was not successful: "+status}))},getSearchableAddress:function(a){var b=[];""!==a.addressLine1&&b.push(a.addressLine1);""!==a.addressLine2&&b.push(a.addressLine2);""!==a.addressTitle&&!b.length&&b.unshift(a.addressTitle);""!==a.addressCountry&&b.push(a.addressCountry);return b.join(", ")},_roundedEqual:function(b,e){return a.Lang.isNumber(b)&&a.Lang.isNumber(e)&&
Number(b).toFixed(6)===Number(e).toFixed(6)},didDataChange:function(b){var e=(b?this.get("data"):this._initialData)||{};b=b||this.get("data");var d=this.get("defaultLocation");return!a.Lang.isObject(b)?!1:a.Object.some(b,function(b,c){var k=e[c];if(b===e[c]||this._roundedEqual(b,k))return!1;var l=!a.Object.hasKey(d,c),k=a.Lang.isValue(k),n=this._roundedEqual(b,d[c]);return l||!(n&&k)},this)}},{CSS_PREFIX:"sqs-maps",HANDLEBARS_TEMPLATE:"dialog-map.html",ATTRS:{anchorMap:{},scrollwheelEnabled:{value:!0},
data:{setter:a.Squarespace.debounce(function(a){return a},100,null,!0)},defaultLocation:{valueFn:function(){var b={mapLat:40.7207559,mapLng:-74.0007613,mapZoom:12};if(Static.SQUARESPACE_CONTEXT){var e=Static.SQUARESPACE_CONTEXT.website;e&&e.location&&(b=a.merge(b,e.location))}return b}},googleMapsLoaded:{getter:function(b){return b||!!a.Squarespace.GoogleMap.loaded}},strings:{value:{placeholderAddressTitle:"Title",placeholderAddress1:"Address",placeholderAddress2:"City, State, Zip",placeholderAddressCountry:"Country"}}}})},
"1.0",{requires:"base node squarespace-damask-context-globals squarespace-debounce squarespace-dialog squarespace-dialog-field-2 squarespace-dialog-map-template squarespace-util squarespace-widgets-google-places-autocomplete squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-scrollintoview",function(a){a.Node.prototype.scrollIntoView=function(){var d=a.Node.getDOMNode(this.get("offsetParent"));if(!d)return this;for(var b={top:this.get("offsetTop"),bottom:this.get("offsetTop")+this.get("offsetHeight"),left:this.get("offsetLeft"),right:this.get("offsetLeft")+this.get("offsetWidth"),move:function(a,b){this.top+=b;this.bottom+=b;this.left+=a;this.right+=a}};;){for(;;){var c=null===d.offsetParent,e=a.one(d),g=a.Node.getDOMNode(e)===a.config.doc.body,f=
g?a.DOM.winWidth():d.clientWidth,g=g?a.DOM.winHeight():d.clientHeight;if(d.scrollWidth-e.horizMarginBorderPadding()>f||d.scrollHeight-e.vertMarginBorderPadding()>g)break;else if(c)return this;b.move(d.offsetLeft-d.scrollLeft,d.offsetTop-d.scrollTop);d=d.offsetParent||d.parentNode}var h=c?a.config.doc.documentElement.scrollLeft||a.config.doc.body.scrollLeft:d.scrollLeft,f=g=c?a.config.doc.documentElement.scrollTop||a.config.doc.body.scrollTop:d.scrollTop,k=g+(c?a.DOM.winHeight():d.clientHeight),g=
h,h=h+(c?a.DOM.winWidth():d.clientWidth),l=0;"hidden"!=e.getStyle("overflowY")&&(b.top<f?l=b.top-f:b.bottom>k&&(l=Math.min(b.bottom-k,b.top-f)));f=0;"hidden"!=e.getStyle("overflowX")&&(b.left<g?f=b.left-g:b.right>h&&(f=Math.min(b.right-h,b.left-g)));if(c){(f||l)&&window.scrollBy(f,l);break}else d.scrollLeft+=f,d.scrollTop+=l,b.move(d.offsetLeft-d.scrollLeft,d.offsetTop-d.scrollTop),d=d.offsetParent}return this}},"1.0",{requires:["gallery-dimensions","dom-screen"]});
YUI.add("squarespace-aviary",function(a){var d=a.Base.create("Aviary",a.Base,[],{launch:function(b,c){if(!b||!a.instanceOf(b,a.Squarespace.Models.ContentItem))throw"Aviary must have a valid item in order to launch.";this._item=b;this._mode=c;a.one("#injection_site")||a.one("body").append(a.Node.create('<div id="injection_site"></div>'));a.Lang.isValue(this._editor)?this._startEditing():this._createEditorSingleton(b);var e=a.one("#avpw_holder");e&&e.setStyle("visibility","hidden")},_getAviaryFileFormatForItem:function(b){var c=
b.get("filename");return a.Lang.isValue(c)?c.match(/.*(jpeg|jpg)/i)?"jpg":"png":b.get("contentType").match(/.*(jpeg|jpg)/i)?"jpg":"png"},_startEditing:function(){var b=this._getItemUrl(),c=this._item.getAssetUrlForFormat("original"),b=a.Node.create('<img id="temp-aviary-img" src="'+b+'" />').hide();a.one("body").append(b);a.Data.get({url:"/api/rest/aviary/signature",success:a.bind(function(a){var b=this._getAviaryFileFormatForItem(this._item);this._editor.launch({image:"temp-aviary-img",hiresUrl:c,
timestamp:a.timestamp,salt:a.salt,encryptionMethod:a.encryptionMethod,signature:a.signature,fileFormat:b,apiKey:a.apiKey})},this)})},_getItemUrl:function(){return a.Lang.sub("//{identifier}.{appDomain}/{context}/{id}?format=original&t={datetime}",{identifier:Static.SQUARESPACE_CONTEXT.website.identifier,appDomain:Static.SQUARESPACE_CONTEXT.appDomain,context:this._mode==a.Squarespace.UploadModes.GLOBAL?"global":"item",id:this._item.get("id"),datetime:(new Date).getTime()})},_createEditorSingleton:function(){this._editor=
new Aviary.Feather({apiKey:"1f973cd5d",apiVersion:3,tools:"orientation,crop,resize,text,enhance,brightness,contrast,effects,saturation,sharpness,draw,redeye,whiten,blemish,frames",appendTo:"",minimumStyling:!0,maxSize:2500,onLoad:a.bind(function(){this._startEditing()},this),onReady:a.bind(function(){window.scrollTo(0,0);var b=a.one("#avpw_holder");b.hasClass("sqs-prevent-block-focus-change")||b.addClass("sqs-prevent-block-focus-change");b.on("click",function(a){a.stopPropagation()});b.setStyle("visibility",
"visible");this.fire("ready");a.Squarespace.EscManager.addTarget(this._editor)},this),onClose:a.bind(function(){a.one("#avpw_holder").setStyle("visibility","hidden");var b=a.one("#temp-aviary-img");b&&b.remove(!0);this.fire("close");a.Squarespace.EscManager.removeTarget(this._editor)},this),onSaveButtonClicked:a.bind(function(){a.Squarespace.Utils.isProductionEnvironment()&&this._editor.saveHiRes();return!0},this),onSaveHiRes:a.bind(function(a,c){this._save(c);this._editor.close()},this),onSave:a.bind(function(a,
c){this._save(c);this._editor.close()},this)})},_save:function(b){var c=this._item;a.Data.post({url:"/api/commondata/Save"+(this._mode===a.Squarespace.UploadModes.GLOBAL?"GlobalMedia":"Media"),data:{replaceItemId:c.get("id"),process:!0,contentType:c.get("contentType"),recordType:c.get("recordType"),fileUrl:b},success:function(b){b=new a.Squarespace.ImageProcessingJob(a.merge(b.job,{started:!0}));b.once("complete",function(){c.load();this.fire("save")},this);b.once("failure",function(){c.set("mediaProcessingState",
a.Squarespace.MediaProcessingState.ERROR)},this);c.set("mediaProcessingState",a.Squarespace.MediaProcessingState.QUEUED);Static.JOB_MANAGER.addJob(b)}},this)}});a.Aviary=new d},"1.0",{requires:"base node event thirdparty-aviary squarespace-jobs squarespace-enum squarespace-util squarespace-models-content-item".split(" ")});
YUI.add("squarespace-dialog-datetime-picker",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.DateTimePicker=a.Base.create("dataTimePicker",a.Squarespace.DialogField2,[],{initializer:function(b){this._picker=new a.Squarespace.DialogFields.StateScheduler({data:this.get("data"),type:"date",direction:this.get("direction"),maximumDate:this.get("maximumDate"),targetNode:this.get("contentBox"),allowNever:!1,visible:!1})},destructor:function(){this._picker&&this._picker.destroy()},
renderUI:function(){d.superclass.renderUI.call(this);this._picker.render(this.get("contentBox").ancestor("body")||a.one("body"))},bindUI:function(){d.superclass.bindUI.call(this);this._bindCalendarToggleEvents();this._picker.after("dataChange",this._updateData,this);this.after("dataChange",this._updatePickerData,this);this.on("dataChange",function(a){this.get("validator").call(this,a.newVal)?this.hideError():(a.halt(),this.showError(this.get("strings.errorMessage")))},this)},_bindCalendarToggleEvents:function(){this.get("contentBox").delegate("click",
this._handleActiveAreaClick,".sqs-datetime-picker-date",this);this._registerEvent(this._picker.get("contentBox").on("clickoutside",function(a){a.target!==this.get("contentBox").one(".sqs-datetime-picker-date")&&this._hidePicker()},this))},isValid:function(){return 0===this.get("errors").length},_updateData:function(a){this.set("data",a.newVal)},_updatePickerData:function(a){this._picker.set("data",a.newVal)},syncUI:function(){d.superclass.syncUI.call(this);this._updateTitle(this.get("data"));this._updateDescription(this.get("data"))},
_handleActiveAreaClick:function(a){this._showPicker(a.currentTarget)},_showPicker:function(a){this._picker.set("visible",!0);this._picker.set("data",this.get("data"));var c=this._picker.get("boundingBox"),e=this.get("direction"),d=a.get("region"),f=d["1"],d=d["0"]-(c.one(".workflow-flyout").get("offsetWidth")-d.width)/2;"down"===e?(f+=a.get("offsetHeight"),f-=parseInt(c.getStyle("marginTop"),10)):f-=c.get("offsetHeight");c.setStyles({top:f,left:d,position:"absolute"})},_hidePicker:function(){this._picker.get("visible")&&
this.isValid()&&(this._picker.set("visible",!1),this.hideError())},_updateDescription:function(a){var c=this.get("contentBox");a=this._getDescriptionText(new Date(a));c.one(".sqs-datetime-picker-description").empty().append(a)},_updateTitle:function(a){var c=this.get("contentBox");a=this._getTitleText(new Date(a));c.one(".sqs-datetime-picker-title").empty().append(a)},_getDateEl:function(b){return'<span class="sqs-datetime-picker-date">'+a.Lang.trim(a.Squarespace.DateUtils.dateFormat(b,{format:this.get("dateFormat")}))+
"</span>"},_getDescriptionText:function(b){b=this._getDateEl(b);b=this.get("strings.description").replace("[DATE]",b);return a.Node.create('<span class="sqs-datetime-picker-date-wrapper">'+b+"</span>")},_getTitleText:function(b){b=this._getDateEl(b);b=this.get("strings.title").replace("[DATE]",b);return a.Node.create('<span class="sqs-datetime-picker-title-content">'+b+"</span>")}},{CSS_PREFIX:"sqs-datetime-picker",TEMPLATE:'<div class="sqs-datetime-picker-title"></div><div class="sqs-datetime-picker-description"></div>',
ATTRS:{data:{},dateFormat:{value:"%a, %b %d %Y at %I:%M%p"},direction:{value:"down",getter:function(a){var c=["down","up"];return-1===c.indexOf(a)?c[0]:a}},maximumDate:{},timePickerEnabled:{value:!0},strings:{value:{description:"[DATE]",title:"",errorMessage:""}},validator:{value:function(){return!0},validator:a.Lang.isFunction}}})},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-ss-widget"]});
YUI.add("autocomplete-highlighters",function(a,d){var b=a.Array,c=a.Highlight,e=a.mix(a.namespace("AutoCompleteHighlighters"),{charMatch:function(a,e,d){var k=b.unique((d?a:a.toLowerCase()).split(""));return b.map(e,function(a){return c.all(a.text,k,{caseSensitive:d})})},charMatchCase:function(a,b){return e.charMatch(a,b,!0)},phraseMatch:function(a,e,d){return b.map(e,function(b){return c.all(b.text,[a],{caseSensitive:d})})},phraseMatchCase:function(a,b){return e.phraseMatch(a,b,!0)},startsWith:function(a,
e,d){return b.map(e,function(b){return c.all(b.text,[a],{caseSensitive:d,startsWith:!0})})},startsWithCase:function(a,b){return e.startsWith(a,b,!0)},subWordMatch:function(e,d,h){var k=a.Text.WordBreak.getUniqueWords(e,{ignoreCase:!h});return b.map(d,function(a){return c.all(a.text,k,{caseSensitive:h})})},subWordMatchCase:function(a,b){return e.subWordMatch(a,b,!0)},wordMatch:function(a,e,d){return b.map(e,function(b){return c.words(b.text,a,{caseSensitive:d})})},wordMatchCase:function(a,b){return e.wordMatch(a,
b,!0)}})},"3.17.2",{requires:["array-extras","highlight-base"]});
YUI.add("squarespace-block-html",function(a){a.namespace("Squarespace.Block").Html=a.Base.create("block-html",a.Squarespace.Block.ParentBase,[],{initializer:function(d){this.contentHtml=this.add({childType:a.Squarespace.Content.Html,model:d.model,editable:d.editable}).item(0);this.set("model",this.contentHtml.get("model"))},renderUI:function(){this.contentHtml.render(this.get("contentBox"))},syncUI:function(){this.contentHtml.syncUI()},appendHTML:function(a){a=this.get("model").get("html").trim()+
a.trim();this.contentHtml.setContent(a)},isEmpty:function(){return!this.get("model").get("html")},toJSON:function(){return{type:this.get("type"),id:this.get("id"),value:this.contentHtml.toJSON()}}},{CSS_PREFIX:"sqs-block-html",MODEL:a.Squarespace.ContentModel.Html,ATTRS:{classNames:{value:"html-block"},type:{value:2},model:{getter:function(){return this.contentHtml.get("model")}},editor:{valueFn:function(){return a.Squarespace.Block.Editor.Html}},mobileEditor:{valueFn:function(){return a.Squarespace.Block.Editor.Html}},
emailEditor:{valueFn:function(){return a.Squarespace.Block.Editor.Html}},floatable:{value:!1}}})},"1.0",{requires:["squarespace-ss-widget","squarespace-block-base","squarespace-block-html-editor","squarespace-block-content-html","widget-parent"]});
YUI.add("squarespace-form-builder-field-editor",function(a){var d={description:{ctor:a.Squarespace.DialogFields.TextArea,config:{name:"description","strings.description":"A description / instructions for this field.","strings.placeholder":"Description"}},required:{ctor:a.Squarespace.DialogFields.Check,config:{name:"required","strings.title":"Required"}},placeholder:{ctor:a.Squarespace.DialogFields.Text,config:{name:"placeholder",className:"thin","strings.placeholder":"Placeholder text"}},currencySymbol:{ctor:a.Squarespace.DialogFields.Text,
config:{name:"currencySymbol",className:"thin","strings.placeholder":"Currency symbol",maxLength:1}},showCountryCode:{ctor:a.Squarespace.DialogFields.Check,config:{name:"showCountryCode","strings.title":"Show Country Code"}},options:{ctor:a.Squarespace.DialogFields.TextArea,config:{name:"options","strings.placeholder":"Options","strings.description":"Enter options one per line."}},underline:{ctor:a.Squarespace.DialogFields.Check,config:{name:"underline","strings.title":"Underline"}},key:{ctor:a.Squarespace.DialogFields.Text,
config:{name:"key",className:"thin",disabled:!0,"strings.placeholder":"Key","strings.description":'<strong>This is a hidden field.</strong> Hidden fields can be used to collect variables from the URL in your form submissions. To fill in this field, include the variable from the box above in the query string for this page. <a target="_blank" href="'+a.Squarespace.HelpLinks.HIDDEN_FORM_FIELD+'">Read more here.</a>'}},value:{ctor:a.Squarespace.DialogFields.Text,config:{name:"value",className:"thin",
"strings.placeholder":"Default Value","strings.description":"If no value is passed through the query string, the default value above will be used."}}},b={text:["description","placeholder","required"],textarea:["description","placeholder","required"],email:["description","placeholder","required"],currency:["description","currencySymbol","required"],number:["description","placeholder","required"],website:["description","placeholder","required"],password:["description","required"],twitter:["description",
"required"],date:["description","required"],time:["description","required"],name:["description","required"],address:["description","required"],phone:["description","showCountryCode","required"],section:["description","underline"],radio:["description","options","required"],checkbox:["description","options","required"],select:["description","options","required"],likert:["description","options","required"],hidden:["key","value"]};a.namespace("Squarespace.Widgets");var c=a.Squarespace.Widgets.FormBuilderFieldEditor=
a.Base.create("FormBuilderFieldEditor",a.Squarespace.Widgets.SSWidget,[a.WidgetParent],{renderUI:function(){c.superclass.renderUI.call(this);var e=this.get("field");a.Array.each(b[e.type],function(b){var c=d[b],h=e[b];a.Lang.isValue(h)&&("options"===b&&(h=h.join("\n")),c.config.data=h);this.add(new c.ctor(c.config))},this)},bindUI:function(){c.superclass.bindUI.call(this);var b=this.get("field");this.each(function(c){var d=c.get("name");c.after("dataChange",function(c){c=c.newVal;"options"===d&&(c=
c.split("\n"),c=a.Array.map(c,function(a){return a.trim()}));b[d]=c;this.fire("change",{fieldName:d,data:c})},this)},this)}},{CSS_PREFIX:"sqs-form-builder-field-editor",ATTRS:{field:{value:null}}})},"1.0",{requires:"base node widget-parent squarespace-ss-widget squarespace-dialog-text squarespace-dialog-text-area squarespace-dialog-check squarespace-help".split(" ")});
YUI.add("squarespace-gallery-option-synchronizer",function(a){a.namespace("Squarespace").GalleryOptionSynchronizer=a.Base.create("galleryOptionSynchronizer",a.Base,[],{sync:function(d,b){var c=this.get("block"),e=b.details[0].get("name"),g=d.get("currentDesign"),f=["content-method-frame","autoplay"];switch(g){case "grid":-1!==["thumbnails-per-row","padding"].indexOf(e)&&(this.renderGridCSS(d.get("data")),this.refreshGallery(),f=f.concat(["thumbnails-per-row","padding"]));break;case "slideshow":-1!==
["thumbnail-strip-margin","thumbnail-strip-height"].indexOf(e)&&(this.renderSlideshowCSS(d.get("data")),f=f.concat(["thumbnail-strip-margin","thumbnail-strip-height"]))}var h=c.resizeVertically;c.resizeVertically="slider"===g;g=c.resizeVertically!==h;c.value=a.merge(c.value,d.get("data"));-1===f.indexOf(e)&&c.render();(-1!==["design","autoplay","thumbnails"].indexOf(e)||g)&&c.updateBlockSizing()},unsetVSize:function(){var a=this.get("block"),b=a.getBoundingEl();b.get("className").split(" ").filter(function(a){return a.startsWith("vsize-")}).forEach(function(a){b.removeClass(a)});
a.getBoundingEl().removeClass("sized");delete a.value.vSize},renderGridCSS:function(d){var b=this.get("block"),c=b.getBoundingEl().one(".sqs-gallery-container");if(c){var e=c.get("className").split(" "),g;a.Array.forEach(e,function(a){a.startsWith("sqs-gallery-thumbnails-per-row-")&&(g=a)});g&&c.removeClass(g);c.addClass("sqs-gallery-thumbnails-per-row-"+d["thumbnails-per-row"]);c="#block"+b.id+" .sqs-gallery-block-grid { margin-right: -{padding}px; } #block-"+b.id+" .sqs-gallery-block-grid .sqs-gallery-design-grid-slide .margin-wrapper { margin-right: {padding}px; margin-bottom: {padding}px; };";
(b=b.getBoundingEl().one("#design-grid-css"))&&b.setContent(a.substitute(c,d))}},renderSlideshowCSS:function(a){var b=this.get("block"),c=b.getBoundingEl();c&&(c.one(".sqs-gallery-thumbnails").setStyles({marginTop:a["thumbnail-strip-margin"],height:a["thumbnail-strip-height"]}),b.getBoundingEl().one(".sqs-gallery-thumbnails").getData("gallery")["gallery-design"].syncUI())},refreshGallery:function(){a.Squarespace.GalleryManager.initializeBlock(this.get("block").contentEl)}},{ATTRS:{block:{}}})},"1.0",
{requires:["base","base-build"]});
YUI.add("squarespace-stringset-utils-mixin",function(a){a.namespace("Squarespace.Mixins").StringSetUtils=a.Base.create("stringSetUtils",a.Base,[],{memberInSet:function(d,b,c){c&&(d=a.Array.map(d,function(a){return a.toLowerCase()}),b=b.toLowerCase());return-1!==a.Array.indexOf(d,b)},cleanMember:function(d){return a.Lang.trim(d.replace(RegExp("[,<>]","g"),""))},filterMember:function(d,b,c){return a.Array.filter(d,function(a){return c?a.toLowerCase()!==b.toLowerCase():a!==b})},diffStringSets:function(d,
b,c){var e=d,g=b;e.length<g.length&&(g=d,e=b);return a.Array.filter(e,function(a){return!this.memberInSet(g,a,c)},this)}},{})},"1.0",{requires:["base","squarespace-util"]});
YUI.add("squarespace-content-item-types-text-panel",function(a){a.namespace("Squarespace.ContentItemEditor");var d=a.Squarespace.ContentItemEditor.TextPanel=a.Base.create("textPostEditorPanel",a.Squarespace.ContentItemEditor.BasePanel,[],{_getTemplateContext:function(){var b=d.superclass._getTemplateContext.call(this);b.enableFeatured=!0;b.enablePassthrough=!0;b.enableExcerpt=!0;a.Array.each(this.get("hideFields"),function(a){b["disable"+a.capitalize()]=!0});return b}},{ATTRS:{"strings.presentationName":{value:"Post"},
editorConfiguration:{value:{title:"Edit {presentationName}",width:750,name:"text-post-editor",overlay:0.5,verticalHeight:"full",initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.text"],$when:function(a){return!(a.disableTitle&&a.disableLayout)}},{$include:"tabs.options.default",$when:function(a){return!(a.disableTitle&&a.disableLayout)}},{$include:["tabs.options.default","tabs.panel.primary","tabs.primary.text"],$when:function(a){return a.disableTitle&&a.disableLayout}},
{$include:"tabs.location"},{$include:"tabs.social"}],buttons:[{type:"askBeforeSavingChangesAndClose",title:"Done"}]}},hideFields:{value:[]}}})},"1.0",{requires:["squarespace-content-item-types-base","squarespace-content-item-types-base-panel","squarespace-content-item-types-post-editors"]});
YUI.add("squarespace-models-template",function(a){var d=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"]),b=a.namespace("Squarespace.Utils").AcceptTypesHelpers={getDefaultPageAcceptTypes:function(b){b=b||{};var c=["subscription","gallery-block","template-page"],e=a.Squarespace.Singletons.Template.get("collectionConfigs");return a.Array.filter(a.Object.keys(e),function(a){return b.removeFolders&&e[a].get("folder")?!1:-1==c.indexOf(a)}).concat(["link"])}},c=a.Base.create("TemplateNavigation",
a.Model,[],{toJSON:function(){return this.constructor.superclass.toJSON.call(this)},_setItemList:function(b){a.Lang.isObject(b)&&(b=this.constructor.ATTRS.itemList.valueFn.call(this));var c=new a.Squarespace.Models.NavigationItemList;c.setTemplateNavigation(this);a.Array.forEach(b,function(b){var e=a.clone(b.children,!0);delete b.children;c.add(b).set("children",e||[])},this);return c},setTemplateNavigationList:function(a){this._templateNavigationList=a},getTemplateNavigationList:function(){return this._templateNavigationList}},
{ATTRS:{index:{validator:a.Lang.isBoolean},name:{},title:{},itemList:{lazyAdd:!1,value:[],valueFn:function(){var b=this.get("name"),c=a.Array.find(Static.SQUARESPACE_CONTEXT.siteLayout,function(a){if(a.identifier==b)return a});return c?c.links:[]},setter:"_setItemList"},acceptTypes:{valueFn:b.getDefaultPageAcceptTypes},emptyMessage:{valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?"This navigation does not contain any pages. Add one above, or drop one here.":"This navigation does not contain any pages. Drag one here or click Add Page below."}}}}),
e=a.Base.create("TemplateNavigationList",a.ModelList,[],{model:c,initializer:function(){this._hiddenNavigation=this.add({index:!1,name:a.Squarespace.Constants.hiddenNavigationName,title:"Not Linked",emptyMessage:"There are no unlinked pages. All of your pages are reachable through your navigation."});this.each(function(a){this._bootstrapReference(a)},this);this.on("add",function(a){this._bootstrapReference(a.model)},this)},_bootstrapReference:function(a){a.setTemplateNavigationList(this)},setTemplate:function(a){this._template=
a},getTemplate:function(){var a=this._template;if(!a)throw"No Template found for TemplateNavigationList. Possible errors with wrapping data.";return a},getHiddenNavigation:function(){return this._hiddenNavigation},_getNavigationItemForCollectionIdFromList:function(b,c){for(var e=b.toArray(),d=0;d<e.length;d++){if(e[d].get("collectionId")==c)return e[d];var g=e[d].get("children");if(g&&!g.isEmpty()&&(g=this._getNavigationItemForCollectionIdFromList(g,c),a.Lang.isValue(g)))return g}},getNavigationItemForCollectionId:function(b){for(var c=
this.toArray(),e=0;e<c.length;e++){var d=this._getNavigationItemForCollectionIdFromList(c[e].get("itemList"),b);if(a.Lang.isValue(d))return d}}}),g=a.namespace("Squarespace.Models").CollectionConfiguration=a.Base.create("CollectionConfiguration",a.Model,[],{initializer:function(b){a.Lang.isBoolean(b.index)&&b.index?this.set("folderBehavior",a.Squarespace.FolderBehavior.INDEX):a.Lang.isBoolean(b.folder)&&b.folder&&this.set("folderBehavior",a.Squarespace.FolderBehavior.NONE)}},{ATTRS:{collectionType:{value:a.Squarespace.CollectionTypes.GENERIC},
acceptTypes:{getter:function(a){this.get("folder")&&!a.length&&(a=b.getDefaultPageAcceptTypes({removeFolders:!0}));return a}},folder:{value:!1},folderBehavior:{},supported:{value:!0}}}),f=a.Base.create("TemplatePageConfiguration",a.Model,[],{},{ATTRS:{icon:{value:"template-page"},collectionType:{value:a.Squarespace.CollectionTypes.TEMPLATE_PAGE},supported:{value:!0}}}),h=a.Base.create("CustomTypeConfiguration",a.Model,[],{},{});a.namespace("Squarespace.Models").Template=a.Base.create("Template",a.Model,
[],{sync:function(a,b,c){switch(a){case "read":this._read(b,c)}},_read:function(b,c){a.Data.get({url:"/api/template/GetTemplate",data:{templateId:this.get("id")},success:function(a){Static.SQUARESPACE_CONTEXT.siteLayout=a.siteLayout;Static.SQUARESPACE_CONTEXT.demoCollections=a.demoCollections;this.set("homepageCollectionId",a.installation.homepageCollectionId);c(null,a.template)}},this)},_setNavigations:function(b){if(a.Lang.isArray(b))b=new e({items:b});else if(!a.instanceOf(b,e))throw"Can't set navigation that isn't an instanceOf TemplateNavigationList or a plain array.";
b.setTemplate(this);return b},_setCollectionConfigs:function(b){if(!a.Lang.isObject(b))throw"CollectionConfigs needs to be an object.";a.Lang.isValue(b.products)&&delete b.products;b=a.merge(this.constructor.DEFAULT_COLLECTION_CONFIGURATIONS,b);var c={},e;for(e in b)c[e]=new g(b[e]);return c},_setPageConfigs:function(b){if(!a.Lang.isObject(b))throw"PageConfigs needs to be an object.";var c={},e;for(e in b)c[e]=new f(b[e]);return c},_setCustomTypes:function(b){if(!a.Lang.isObject(b))throw"CustomTypes needs to be an object.";
for(var c={},e=0;e<b.length;e++)c[b[e].name]=new h(b[e]);return c},saveHomepageCollectionId:function(b){a.Data.post({url:"/api/template/SetHomepageCollection",data:{collectionId:this.get("homepageCollectionId")},success:function(a){b&&b(null,a)},failure:function(a){b&&b(a,null)}})},refreshNavigationList:function(){a.Data.get({url:"/api/commondata/GetSiteLayout",success:function(b){var c={};this.get("navigations").each(function(a){c[a.get("name")]=a});a.Array.forEach(b.layout,function(b){var e=c[b.identifier];
if(e){var d={};e.get("itemList").each(function(a){var b=a.get("collectionId");b?d[b]=a:d[a.get("externalLink.url")]=a});a.Array.forEach(b.links,function(b){(!a.Lang.isValue(b.collectionId)||!a.Object.hasKey(d,b.collectionId))&&(!a.Object.getValue(b,["externalLink","url"])||!a.Object.hasKey(d,b.externalLink.url))&&e.get("itemList").add(b)},this)}else a.Squarespace.Logger.log("Missing Navigation",{message:'Could not locate "'+b.identifier+'" in Y.Squarespace.Singletons.Template',action:"refreshNavigationList",
fileName:"models/template.js"})},this)}},this)},isTemplateOwner:function(){return this.get("ownerWebsiteId")==d}},{ATTRS:{navigations:{setter:"_setNavigations",lazyAdd:!1},collectionConfigs:{setter:"_setCollectionConfigs",value:{}},pageConfigs:{setter:"_setPageConfigs",value:{}},customTypes:{setter:"_setCustomTypes",value:{}},homepageCollectionId:{}},DEFAULT_COLLECTION_CONFIGURATIONS:{page:{collectionType:a.Squarespace.CollectionTypes.PAGE,typeName:"page",title:"Page",ordering:a.Squarespace.CollectionOrdering.CUSTOM,
icon:"page",addText:"Add Block"},"gallery-block":{collectionType:a.Squarespace.CollectionTypes.GALLERY_BLOCK,typeName:"gallery-block",title:"Gallery Block",ordering:a.Squarespace.CollectionOrdering.USER,acceptTypes:["image","video"]},products:{collectionType:a.Squarespace.CollectionTypes.PRODUCT,typeName:"products",title:"Products",pageSize:20,ordering:a.Squarespace.CollectionOrdering.USER,acceptTypes:["store_item"],view:a.Squarespace.CollectionView.PRODUCT_TABLE,icon:"products",addText:"Add Product"},
"template-page":{collectionType:a.Squarespace.CollectionTypes.TEMPLATE_PAGE,title:"Template Page",icon:"projects"},"splash-page":{collectionType:a.Squarespace.CollectionTypes.SPLASH_PAGE,typeName:"splash-page",title:"Splash Page",ordering:a.Squarespace.CollectionOrdering.CUSTOM,icon:"splash-page"},subscription:{collectionType:a.Squarespace.CollectionTypes.SUBSCRIPTION,typeName:"subscription",title:"Subscription",ordering:a.Squarespace.CollectionOrdering.CHRONOLOGICAL}}});Static&&(Static.SQUARESPACE_CONTEXT&&
Static.SQUARESPACE_CONTEXT.template)&&(c=a.merge(Static.SQUARESPACE_CONTEXT.template,{homepageCollectionId:Static.SQUARESPACE_CONTEXT.homepageCollectionId}),delete c.navigations,a.namespace("Squarespace.Singletons"),(a.Squarespace.Singletons.Template=new a.Squarespace.Models.Template(c)).set("navigations",Static.SQUARESPACE_CONTEXT.template.navigations))},"1.0",{requires:["base","model","squarespace-models-navigation"]});
YUI.add("squarespace-dialog-file",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.File=a.Base.create("file",a.Squarespace.DialogField2,[],{initializer:function(){this.LANG=d.LANG;a.Squarespace.Uploader&&(this.uploader=this._createUploader());this.set("width",this.get("height"));this._plugTitleAndBindResizing();this.after("dataChange",function(){this.refreshItemPostData();this._bindDataEvents()},this);this._initializeAndLoadData()},renderUI:function(){d.superclass.renderUI.call(this);
if(this.uploader){var b=this.get("contentBox");this._progressBarWidget=b.plug(a.Squarespace.Plugin.Progress,{showBar:!1,showSpinner:!1}).progress;"none"!==a.Uploader.TYPE&&("flash"===a.Uploader.TYPE?a.later(300,this,function(){this.uploader.render(b)}):this.uploader.render(b))}},bindUI:function(){d.superclass.bindUI.call(this);var a=this.uploader;a&&(this._registerEvent(a.on("uploadstart",this._uploadStart,this)),this._registerEvent(a.on("upload-complete",this._directUploadComplete,this)),this._registerEvent(a.on("upload-failure",
this._directUploadFailure,this)))},syncUI:function(){d.superclass.syncUI.call(this);this._dataLoaded?this._renderDataLoadedState():this._renderDataLoadingState()},didDataChange:function(){var a=this._initialData,c=this.get("data");if(!a&&!c||a&&0===Object.keys(a).length&&null===c)return!1;if(!a||!c)return!0;var e=a.mediaFocalPoint,d=c.get("mediaFocalPoint");return a.id!==c.get("id")?!0:!e&&!d?!1:!e||!d?!0:e.x&&d.x!==e.x||e.y&&d.y!==e.y},show:function(){this.syncUI();this.set("visible",!0)},refreshItemPostData:function(){var b=
this.get("data");if(b)switch(this.get("mode")){case a.Squarespace.UploadModes.ITEM:this._itemPostData={collectionId:b.get("collectionId"),recordType:b.get("recordType")};if(b=b.get("id"))this._itemPostData.replaceItemId=b;break;case a.Squarespace.UploadModes.CHILD:this._itemPostData={collectionId:b.get("collectionId"),recordType:b.get("recordType"),parentItemId:b.get("parentId")};break;default:this._itemPostData={}}},saveFromUrl:function(b,c){if(this.uploader){this.set("data",null);this.get("boundingBox").addClass("has-preview");
this._progressBarWidget.setAttrs({showSpinner:!0});var e=a.merge(this._getFilePostData(),{fileUrl:b});c&&(e.replaceItemId=c);if(e.replaceItemId)a.Data.post({url:"/api/commondata/"+(this.get("mode")===a.Squarespace.UploadModes.GLOBAL?"SaveGlobalMedia":"SaveMedia"),data:e,success:function(b){this._progressBarWidget.setAttrs({showSpinner:!1});if(b&&b.job){this._progressBarWidget.set("showSpinner",!0);var c={placeholder:this.get("contentBox")},e=this.uploader.get("createJob")(c,b);e&&(e.get("id")||e.set("id",
b.job.id),b=this.uploader,e.once("complete",a.bind(b._onJobHandler,b,"Complete",c)),e.once("failure",a.bind(b._onJobHandler,b,"Failure",c)),e.once("complete",function(b){var c=new a.Squarespace.Models.ContentItem({id:b.target.get("data.contentItemId")});c.load(a.bind(function(b,e){a.Lang.isValue(b)||this.set("data",c)},this))},this),Static.JOB_MANAGER.addJob(e))}(c=this.get("data"))&&!c.get("mediaProcessingState")&&c.set("mediaProcessingState",a.Squarespace.MediaProcessingState.QUEUED)}},this);else{var d=
e.collectionId;if(a.Lang.isValue(d)){var f=new a.Squarespace.Models.ContentItem({collectionId:d,recordType:e.recordType});f.save(a.bind(function(){this.saveFromUrl(b,f.get("id"))},this))}else this.uploader.preflightTransient(this.get("mode")===a.Squarespace.UploadModes.GLOBAL,a.bind(function(a){this.saveFromUrl(b,a.id)},this))}}},_createUploader:function(){var b={uploadURL:"/api/commondata/"+(this.get("mode")===a.Squarespace.UploadModes.GLOBAL?"SaveGlobalMedia":"SaveMedia"),multipleFiles:!1,appendNewFiles:!1,
isTransient:this.get("mode")===a.Squarespace.UploadModes.TRANSIENT||this.get("mode")===a.Squarespace.UploadModes.GLOBAL,isGlobal:this.get("mode")===a.Squarespace.UploadModes.GLOBAL,autoUpload:!0,selectButtonLabel:a.substitute("flash"===a.Uploader.TYPE?this.LANG.HINT_FILE_UPLOAD_CLICK_ONLY:this.LANG.HINT_FILE_UPLOAD,{type:this.get("contentLabel")}),dragAndDropArea:this.get("contentBox"),maxSize:this.get("maxSize"),processFile:a.bind(this._processFile,this),addPlaceholder:a.bind(this._addPlaceholder,
this),preflight:this.get("preflight")};"audio"===this.get("contentType")&&(b.fileFilters=[{description:"Audio",extensions:"*.mp3;*.mp4;*.ogg;*.m4a"}]);var c=a.Squarespace.Uploader;a.Squarespace.Utils.isInDamaskFrame()&&(c=a.config.win.top.Y.Squarespace.Uploader);return new c(b)},_plugTitleAndBindResizing:function(){var b=this.get("contentBox"),c=this.get("strings.title");c&&(this.plug(a.Squarespace.Plugin.DialogFieldLabel,{forNode:b,strings:{text:c}}),this.after("render",function(){if(this.get("height")){var a=
this.get("boundingBox").get("offsetHeight"),c=b.get("clientHeight");b.setStyle("height",c-(a-c))}},this));this.after("render",function(){this.get("square")&&(b.setStyles({width:this.get("width"),height:this.get("width")}),this.get("boundingBox").setStyle("height",null))},this)},_initializeAndLoadData:function(){var b=this.get("data");this.refreshItemPostData();this._bindDataEvents();b?(this._initialData={id:b.get("id"),mediaFocalPoint:b.get("mediaFocalPoint")},!b.isNew()&&this.get("mode")!==a.Squarespace.UploadModes.GLOBAL?
b.load(a.bind(function(c){c&&new a.Squarespace.Widgets.Alert({"strings.title":"Missing Item","strings.message":"We could not locate the item."});this._initialData.mediaFocalPoint=b.get("mediaFocalPoint");this._dataLoaded=!0;this.get("rendered")&&this.syncUI()},this)):this._dataLoaded=!0):(this._initialData={},this._dataLoaded=!0)},_bindDataEvents:function(){var b=this.get("data");b&&this.get("mode")===a.Squarespace.UploadModes.ITEM&&this._registerEvent(b.after("idChange",function(a){this._itemPostData.replaceItemId=
a.newVal},this))},_cleanupResidualElements:function(){this.get("contentBox").all("."+d.CSS_PREFIX+"-preview").remove();var a=this._actionOverlay;a&&a.get("host").unplug(a.constructor);(a=this._spinner)&&a.destroy()},_renderDataLoadedState:function(){this._cleanupResidualElements();var a=this.get("boundingBox"),c=this.get("data");this.get("contentBox").removeClass("data-loading");c&&c.get("hasFileData")?(a.addClass("has-file"),this._renderFilePreview()):(a.removeClass("has-preview"),a.removeClass("has-file"),
this._progressBarWidget.setAttrs({showSpinner:!1,showBar:!1}))},_renderDataLoadingState:function(){this._cleanupResidualElements();var b=this.get("boundingBox"),c=this.get("contentBox");b.removeClass("has-preview");b.addClass("has-file");c.addClass("data-loading");this._spinner=new a.Squarespace.Spinner({size:"extra-large",render:c,color:this.get("spinnerColor")});this._spinner.get("boundingBox").setStyles({top:"50%",left:"50%",position:"absolute",marginLeft:"-20px",marginTop:"-20px"})},_renderFilePreview:function(){var b=
a.Node.create('<div class="'+d.CSS_PREFIX+'-preview"></div>'),c=this.get("data"),e=c.get("filename"),c=c.get("dataSize");b.append('<span class="file-meta file-meta-icon file-meta-icon-'+this.get("contentType")+'"></span>');e&&b.append('<span class="file-meta file-meta-name">'+e+"</div>");c&&b.append('<span class="file-meta file-meta-size">'+a.Squarespace.Utils.humanizeBinarySize(c)+"</span>");this.get("contentBox").append(b);this._plugActionOverlay()},_plugActionOverlay:function(){this._actionOverlay=
this.get("contentBox").plug(a.Squarespace.Plugin.ActionOverlay,{buttons:["remove"]}).actionOverlay;this._actionOverlay.on("button-remove",function(){this.set("data",null)},this)},_processFile:function(b){if(b.invalid){var c=b.invalid[0];b=c.title;c=c.message;this.get("strings.invalidDrop")&&(b=this.get("strings.invalidDrop.title"),c=this.get("strings.invalidDrop.message"));new a.Squarespace.Widgets.Alert({"strings.title":b,"strings.message":c})}else b.postData=this._getFilePostData()},_getFilePostData:function(){var b=
this.get("contentType"),b={process:-1!==["image","audio"].indexOf(b.slice(0,5))?"true":"false",contentType:b,isWordpressXmlFile:this.get("isWordpressXmlFile")};this.get("recordType")&&(b.recordType=this.get("recordType"));switch(this.get("mode")){case a.Squarespace.UploadModes.CHILD:this._itemPostData&&(b=a.merge(b,this._itemPostData,{childType:this.get("childType")}),a.Lang.isUndefined(b.parentItemId)&&console.warn("Parent Item ID is null."));break;case a.Squarespace.UploadModes.ITEM:this._itemPostData&&
(b=a.merge(b,this._itemPostData))}return b},_addPlaceholder:function(a){return this.get("contentBox")},_uploadStart:function(a){this._cleanupResidualElements();this.get("boundingBox").addClass("has-preview");this.get("contentBox").all('<div class="'+d.CSS_PREFIX+'-file-preview"></div>').remove();a.target.get("fileList")[0].get("file")},_directUploadComplete:function(b){this.get("contentBox").all('<div class="'+d.CSS_PREFIX+'-file-preview"></div>').remove();b.media?this.set("data",new a.Squarespace.Models.ContentItem(b.media[0])):
(this.get("boundingBox").removeClass("has-preview"),new a.Squarespace.Widgets.Alert({"strings.title":"Bad File","strings.message":"Unable to determine proper type information from uploaded file."}))},_directUploadFailure:function(a){this.set("data",null)}},{LANG:{TITLE_CLEAR_ASSET:"Clear Asset",CONFIRM_FILE_REMOVAL:"Are you sure you want to remove this uploaded file?",ERR_FILE_UPLOAD:"Upload failed, please retry",ERR_SINGLE_FILE_TITLE:"Single File Only",ERR_SINGLE_FILE:"This field only accepts a single file.",
HINT_FILE_UPLOAD:"Click here or drag and drop to add {type}.",HINT_FILE_UPLOAD_CLICK_ONLY:"Click here to add {type}.",MSG_FILE_UPLOAD_OK:"File Uploaded Successfully",INVALID_IMAGE_TITLE:"Invalid Image",INVALID_IMAGE:"The image does not have enough information to render.",ERR_INVALID_URL:"That doesn't appear to be a valid URL.",TITLE_DOWNLOAD_IMAGES:"Download Images from Page",TITLE_PROCESSING_FAIL:"Image Processing Failed",ERR_PROCESSING_FAIL:"We were unable to process your image.  Please try again.",
DESC_DOWNLOAD_IMAGES:"Paste the URL of a webpage with images and Squarespace will allow you to select one."},CSS_PREFIX:"sqs-file",ATTRS:{cloneInitialData:{value:!1},data:{value:null,setter:function(b){return b?b instanceof a.Squarespace.Models.ContentItem?b:a.Lang.isObject(b)?(console.warn("DialodFields.File data attribute was JSON. Should have been ContentItem model."),new a.Squarespace.Models.ContentItem(b)):a.Attribute.INVALID_VALUE:null}},strings:{value:{title:""}},contentType:{value:"file"},
contentLabel:{value:"a file"},mode:{value:a.Squarespace.UploadModes.TRANSIENT},square:{value:!1},spinnerColor:{value:"light"},recordType:{value:null},childType:{value:null},maxSize:{value:20},preflight:{value:null},isWordpressXmlFile:{value:!1}}})},"1.0",{requires:"base node json attribute squarespace-util squarespace-enum squarespace-dialog-field-2 squarespace-uploader squarespace-plugin-actionoverlay squarespace-plugin-progress squarespace-models-content-item squarespace-ui-base squarespace-dialog-label squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-content-item-utils",function(a){var d=[a.Squarespace.MediaProcessingState.QUEUED,a.Squarespace.MediaProcessingState.PROCESSING],b=[a.Squarespace.MediaProcessingState.ERROR,a.Squarespace.MediaProcessingState.DOWNLOAD_ERROR,a.Squarespace.MediaProcessingState.ERROR_TOO_LARGE,a.Squarespace.MediaProcessingState.ERROR_FILE_NOT_FOUND,a.Squarespace.MediaProcessingState.ERROR_UNSUPPORTED_IMAGE_TYPE];a.namespace("Squarespace").ContentItemUtils={getWorkflowStateIdentifier:function(b){return b==
a.Squarespace.WorkflowStates.PUBLISHED?"published":b==a.Squarespace.WorkflowStates.SCHEDULED?"scheduled":b==a.Squarespace.WorkflowStates.NEEDS_REVIEW?"needsreview":"draft"},getWorkflowStateCopy:function(b){return b==a.Squarespace.WorkflowStates.PUBLISHED?"Published":b==a.Squarespace.WorkflowStates.SCHEDULED?"Scheduled":b==a.Squarespace.WorkflowStates.NEEDS_REVIEW?"Needs Review":"Draft"},getCommentStateIdentifier:function(b){return b==a.Squarespace.CommentStates.DISABLED?"disable":"allow"},isErrorProcessingState:function(a){a=
a.get("mediaProcessingState");return-1!==b.indexOf(a)},isProcessingState:function(a){a=a.get("mediaProcessingState");return-1!==d.indexOf(a)}}});
YUI.add("squarespace-block-content-html-editor-base",function(a){a.namespace("Squarespace.Content").HtmlEditorBase=a.Base.create("contentHtmlEditor",a.Plugin.Base,[],{initializer:function(){this._host=this.get("host");this._bb=this._host.get("boundingBox");this._cb=this._host.get("contentBox");this.block=this._host.get("parent");this.initEngine();this._host.after("focusedChange",function(a){a.newVal?this._afterFocus(a):this._afterBlur(a)},this);this.once("initializedChange",this.syncEditorUI,this);
this._bb.addClass("sqs-editing")},syncEditorUI:function(){},_getVisualEditorData:function(){throw"_getVisualEditorData() not implemented.";},initEngine:function(){switch(this._host.get("model").get("engine")){case "text":case "textNoBreak":this.initTextEngine();break;case "wysiwyg":case "visual":this.initVisualEngine()}},initTextEngine:function(){var d=this._host.get("model").get("engine"),b=this._host.get("placeholderText"),c=this._host.get("model").get("html");this._bb.addClass("sqs-html-engine-"+
d.toLowerCase());this.titleEditable=a.Node.create('<textarea class="sqs-textarea-editor" placeholder="'+b+'" autocapitalize="on">'+c+"</textarea>");this._bb.appendChild(this.titleEditable);var e=this.textarea=this._bb.one("textarea"),g=this._host.get("referenceNode")||this._cb;"font text-align text-rendering letter-spacing text-transform color".split(" ").forEach(function(a){var b=g.getComputedStyle(a);e.setStyle(a,b);g!=this._cb&&this._cb.setStyle(a,b)},this);if("textNoBreak"===d)e.on("keydown",
function(a){13===a.keyCode&&a.preventDefault()},this);e.on("valuechange",function(b){b=a.Escape.html(b.target.get("value"));-1!==b.indexOf("\n")&&(b=b.replace(/\n/g," "),e.set("value",b));this._host.get("model").set("html",b);this._host.syncUI()},this)},initVisualEngine:function(){throw"initVisualEngine() not implemented!";},_giveEditorFocus:function(){},_afterFocus:function(a){this._giveEditorFocus()},_afterBlur:function(a){this.visualEditor?this.visualEditor.didDataChange()&&this._save():this._save();
this._fireContentUpdate()},_save:function(){var d=this._host.get("model"),b,c;this.visualEditor?c=b=this._getVisualEditorData():this.textarea&&(b=c=this.textarea.get("value"));a.Lang.isValue(b)&&d.setAttrs({source:c,html:b});this.block&&this.block.get("isNewBlock")&&this.block.set("isNewBlock",!1)},_fireContentUpdate:function(){this.get("host").get("parent").fire("widget:contentUpdate")},getMobileAppMenuConfig:function(){return null},_destroyVisualEditor:function(){throw"_destroyVisualEditor not implemented.";
},destructor:function(){this._bb.removeClass("sqs-editing");this._destroyVisualEditor();this._debounceSaveOnKeyUp&&this._debounceSaveOnKeyUp.cancel&&this._debounceSaveOnKeyUp.cancel();this.titleEditable&&this.titleEditable.remove()}},{NS:"contentEditor",ATTRS:{tabIndex:{value:0}}})},"2.0",{requires:["node","base","plugin","squarespace-visual-editor","squarespace-debounce"]});
YUI.add("squarespace-block-fivehundredpix-model",function(a){a.namespace("Squarespace.ContentModel").FivehundredpixBlock=a.Base.create("fiveHundredPixModel",a.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-enum","squarespace-block-summary-gallery-model"]});
YUI.add("squarespace-dialog-oauth-service-connect-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-oauth-service-connect.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];this.merge(d,a.helpers);var k;a=this.escapeExpression;return b=""+('<div class="sqs-content-inner">\n\n  <div class="text">\n    <div class="title">'+a((k=(k=b.strings,null==k||!1===k?k:k.title),"function"===typeof k?k.apply(b):k))+'</div>\n    <div class="message"></div>\n  </div>\n\n  <div class="fields"></div>\n\n  <div class="icon"></div>\n\n</div>\n')})})();
a.Handlebars.registerPartial("dialog-oauth-service-connect.html".replace("/","."),d.templates["dialog-oauth-service-connect.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-dialog-hidden",function(a){var d=function(){};a.namespace("Squarespace.DialogFields").Hidden=a.Base.create("hidden",a.Squarespace.DialogField2,[],{initializer:function(){this.unplug(a.Plugin.WidgetAnim)},focus:null,enable:null,disable:null,blur:null,renderUI:d,bindUI:d,syncUI:d},{CSS_PREFIX:"sqs-hidden",ATTRS:{visible:{value:!1},focusable:{value:!1}}});a.Squarespace.DialogFields.HiddenField=a.Squarespace.DialogFields.Hidden},"1.0",{requires:["base","base-build","squarespace-dialog-field-2"]});
YUI.add("squarespace-dialog-state-scheduler",function(a){var d=a.namespace("Squarespace.DialogFields").StateScheduler2=a.Base.create("stateScheduler",a.Squarespace.DialogField2,[a.WidgetChild,a.WidgetParent],{initializer:function(b){this.get("contentBox");b=a.Lang.isValue(b.data)?new Date(b.data):new Date;var c=a.Lang.trim(a.Squarespace.DateUtils.dateFormat(b,{format:"%M"})),e=a.Lang.trim(a.Squarespace.DateUtils.dateFormat(b,{format:"%p"})),d=a.Lang.trim(a.Squarespace.DateUtils.dateFormat(b,{format:"%l"}));
this._widgets=[];this._widgets[0]=new a.Squarespace.DialogFields.InsetCalendar({name:"calendar",data:b});this._widgets[1]=new a.Squarespace.DialogFields.InsetTimer({name:"timer",data:{minutes:Number(c),ampm:e,hours:Number(d)}});this._widgets[2]=new a.Squarespace.DialogFields.Slider({name:"slider",range:["duration"===this.get("type")&&this.get("allowNever")?-1:0,90],data:this.get("durationOffset"),labelWidth:0,length:260,visible:"duration"===this.get("type"),thumbUrl:"/universal/images-v6/dialog/slider-thumb-dark.png"})},
destructor:function(){a.Array.each(this._widgets,function(a,c){a.detach();a.destroy()})},renderUI:function(){d.superclass.renderUI.call(this);this.get("data");var b=this.get("type"),c=this.get("contentBox");c.one(".title").set("text",this.get("strings.title"));this._widgets[0].render(c.one(".sqs-state-scheduler-components"));this._widgets[1].render(c.one(".sqs-state-scheduler-components"));"duration"===b&&(this._durationEl=a.Node.create('<div class="duration-wrapper"></div>'),this._durationEl.append(a.Node.create('<div class="duration-display"><span class="duration"></span></div><div class="slider-container-wrapper"></div>')),
c.one(".sqs-state-scheduler-options").append(this._durationEl),this._widgets[2].render(c.one(".slider-container-wrapper")),this._widgets[2].show())},syncUI:function(){d.superclass.syncUI.call(this);this._widgets[2].get("visible")&&this._durationEl.one(".duration").set("text",this.getShortDurationText())},bindUI:function(){d.superclass.bindUI.call(this);this._widgets[0].after("dataChange",this._mergeDateTimeComponents,this);this._widgets[1].after("dataChange",this._mergeDateTimeComponents,this);this._widgets[2].after("dataChange",
this._updateTimeOffset,this);this.get("contentBox").delegate("click",this.destroy,".close",this)},_mergeDateTimeComponents:function(b){b=this._widgets[0].get("data");var c=a.merge(this._widgets[1].get("data"),{});if(a.Lang.isNull(b))this.get("allowNever")?(this.set("durationOffset",-1),this.set("data",null)):this.set("data",Date.now());else{var e=c.ampm,d=c.hours;12===d&&(d=0);"PM"===e&&(d+=12);c=c.minutes;b=a.Squarespace.DateUtils.createWebsiteDate(b.getFullYear(),b.getMonth(),b.getDate(),d,c);this.set("durationOffset",
a.Squarespace.DateUtils.calculateFullDayOffset(new Date,b));this.set("data",b)}},_updateTimeOffset:function(a){if(-1===a.newVal&&this.get("allowNever"))this._widgets[0].set("data",null),this._widgets[1].disable();else{this._widgets[1].enable();var c=new Date;c.addDays(a.newVal);this._widgets[0].setAttrs({day:c.getDate(),month:c.getMonth(),year:c.getFullYear(),data:c})}},getShortDurationText:function(){var b=this.get("data"),b=this.get("allowNever")&&a.Lang.isNull(b),c=this.get("durationOffset");return-1===
c&&b?"Never":0===c?"Today":1==c?"Tomorrow":-1==c?"Yesterday":-1>c?Math.abs(c)+" Days ago":Math.abs(c)+" Days"}},{CSS_PREFIX:"sqs-state-scheduler",TEMPLATE:'<div class="sqs-state-scheduler"><div class="close">x</div><div class="sqs-state-scheduler-options"><div class="title clear"></div><div class="sqs-state-scheduler-components clear"></div></div></div>',ATTRS:{allowNever:{value:!1},data:{setter:function(b){return a.Lang.isDate(b)?b.getTime():b}},day:{value:1,setter:function(a){return parseInt(a,
10)}},durationOffset:{value:0},strings:{value:{title:"Select a Date &amp; Time"}},type:{value:"date",validator:function(a){validTypes=["duration","date"];return-1!==validTypes.indexOf(a)}}}})},"1.0",{requires:"base base-build slider squarespace-dialog-fields squarespace-dialog-field-2 squarespace-dialog-slider squarespace-dialog-statepicker-inset-timer squarespace-dialog-statepicker-inset-calendar squarespace-timezone-tools squarespace-date-utils".split(" ")});
YUI.add("squarespace-content-item-types-quote",function(a){a.namespace("Squarespace.ContentItemEditor").Quote=a.Base.create("QuoteContentItemEditor",a.Squarespace.ContentItemEditor.Base,[],{},{ATTRS:{editorConfiguration:{value:{title:"Edit {presentationName}",width:800,height:450,overlay:0.5,tabs:[{$include:["tabs.primary.base","tabs.primary.quote"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}})},"1.0",{requires:["squarespace-content-item-types-base"]});
YUI.add("squarespace-block-gallery-model",function(a){var d=a.namespace("Squarespace.ContentModel").GalleryBlock=a.Base.create("GalleryBlockModel",a.Model,[],{toJSON:function(){var a=d.superclass.toJSON.call(this);delete a.transientGallery;return a}},{ATTRS:{design:{value:"slideshow"},aspectRatio:{},autoplay:{},"autoplay-duration":{},controls:{},"auto-crop":{},"square-thumbs":{},thumbnails:{},"thumbnail-strip-height":{},"thumbnail-strip-margin":{},"show-meta":{},"meta-position":{},"show-meta-on-hover":{},
"active-alignment":{},"thumbnails-per-row":{},padding:{},lightbox:{},"max-width":{},collectionId:{},existingGalleryId:{},vSize:{},transientGallery:{setter:function(b){var c=this.get("transientGallery");a.Lang.isValue(c)&&a.Lang.isFunction(c.destroy)&&c.destroy();return!a.instanceOf(b,a.Squarespace.Models.ContentCollection)?new a.Squarespace.Models.ContentCollection(b):b},value:{}},transientGalleryId:{getter:function(b){return!a.Lang.isValue(b)&&a.Lang.isValue(this.get("transientGallery"))?this.get("transientGallery").get("id"):
b}}}})},"1.0",{requires:["base","model"]});
YUI.add("squarespace-mixin-save-changes",function(a){a.namespace("Squarespace.Mixins").SaveChanges=a.Base.create("saveChanges",a.Base,[],{ensureSavedChanges:function(){return!this.hasUnsavedChanges()?a.when():a.Squarespace.Promises.create(function(d,b){a.Squarespace.Fluent.Confirm({"strings.title":"Review Changes","strings.message":"You have made changes. Do you want to save or discard them?","strings.confirm":"Save","strings.reject":"Discard",style:a.Squarespace.Fluent.TYPE.CONFIRM_OR_REJECT,showOverlay:!0}).then(a.bind(function(){this._initSaveChanges().then(d,
b)},this),function(a){a.cancel?b():d()})},this)},requestDelete:function(){return a.Squarespace.Fluent.Confirm({"strings.title":"Delete Post","strings.message":"Are you sure you wish to remove this item?","strings.confirm":"Delete Post",showOverlay:!0}).then(a.bind(this._deleteItem,this))},revertChanges:function(){return a.Squarespace.Fluent.Confirm({"strings.title":"Revert Changes","strings.message":"This will revert the document back to the last saved version. Any changes will be lost. Do you want to proceed?",
"strings.confirm":"Revert Changes",showOverlay:!0}).then(a.bind(this._revertChanges,this)).then(a.bind(this.markAsClean,this))},_initSaveChanges:function(){return this._saveChanges().then(a.bind(this.markAsClean,this))},markAsClean:function(){this.set("dirty",!1)},markAsDirty:function(){this.set("dirty",!0)},hasUnsavedChanges:function(){return this.get("dirty")},_deleteItem:function(){throw'Y.Squarespace.ContentManagerWidgets.HasTray: No "_saveChanges" method implemented.';},_saveChanges:function(){this._throwClassError('No "_saveChanges" method implemented.')},
_revertChanges:function(){this._throwClassError("No _revertChanges method implemented")},_throwClassError:function(a){throw["Class",this.constructor.NAME,"-",a].join(" ");}},{ATTRS:{dirty:{value:!1,validator:a.Lang.isBoolean}}})},"1.0",{requires:["base","squarespace-promises","squarespace-fluent-confirmation"]});
YUI.add("squarespace-frontend-pill-draggability",function(a){a.namespace("Squarespace.Frontend").PillDraggability=a.Base.create("PillDraggability",a.Plugin.Base,[],{initializer:function(){var d=new a.DD.Drag({node:this.get("host")});d.plug(a.Plugin.DDConstrained,{stickX:!0});d.on("drag:mouseDown",function(b){a.one("body").hasClass("sqs-edit-mode")||b.halt()});d.on("drag:end",function(a){var c=a.target.get("dragNode");a=c.get("offsetLeft");var e=c.one(".sqsp-chrome-badge").get("offsetWidth");c.hasClass("left-aligned")||
(a-=e);var d=!1;a<window.innerWidth/2?(a=c.hasClass("left-aligned")?10:10+e,d=!0):a=c.hasClass("left-aligned")?window.innerWidth-10-e:window.innerWidth-10;c.anim({left:a},{end:function(){c.setStyles({left:null,right:null,bottom:null,top:null});d?c.addClass("left-aligned"):c.removeClass("left-aligned")}}).run()});d.on("drag:start",function(){this.get("host").setStyles({right:"auto",bottom:10})})}},{NS:"pillDraggability"})},"1.0",{requires:["plugin","base"]});
YUI.add("squarespace-dialog-social-account-picker",function(a){var d=a.namespace("Squarespace.DialogFields").SocialAccountPicker=a.Base.create("socialAccountPicker",a.Squarespace.DialogField2,[],{initializer:function(b){this._multiSelect=new a.Squarespace.DialogFields.MultiSelect({children:this._toToggles(b.accounts),data:b.data,draggable:!0});this.add(this._multiSelect);this._authenticator=new a.Squarespace.SocialAuthenticator},_toToggles:function(b){return a.Array.map(b,function(b){return new a.Squarespace.DialogFields.SocialAccountToggle({account:b})})},
_getData:function(){var a=[];this._multiSelect&&(a=this._multiSelect.get("data"));return a},renderUI:function(){d.superclass.renderUI.call(this);this.get("contentBox").append(a.Node.create('<header><button type="button" class="add-account-button"><span>Add Account</span></button></header>'))},bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("contentBox").one(".add-account-button"),c=this.get("id");a.on(c+"|click",this._addNewAccount,this);this._multiSelect.on(c+"|dataChange",function(){var a=
this.get("dialog");a&&a.fire("datachange",this)},this)},_addNewAccount:function(){this._authenticator.once("account-added",function(){a.Data.get({url:"/api/config/GetSocialAccounts",success:function(b){var c=this.get("data");this._multiSelect.removeAll();Static.SQUARESPACE_CONTEXT.connectedAccounts=b.connectedAccounts;b=this._toToggles(a.Array.filter(b.connectedAccounts,function(a){return!!a.profileUrl}));a.Array.each(b,function(a){this._multiSelect.add(a);a.set("active",-1!==c.indexOf(a.get("account.id")))},
this);this._multiSelect._ddDel.syncTargets()}},this)},this);this._authenticator.addAccount()}},{CSS_PREFIX:"sqs-social-account-picker",ATTRS:{accounts:{},data:{getter:"_getData"}}})},"1.0",{requires:"base base-build squarespace-dialog-field-2 squarespace-dialog-social-account-toggle squarespace-dialog-multi-select squarespace-social-authenticator".split(" ")});
YUI.add("file-html5",function(a,d){var b=a.bind,c=a.config.win,e=function(a){var b=null,b=e.isValidFile(a)?a:e.isValidFile(a.file)?a.file:!1;e.superclass.constructor.apply(this,arguments);if(b&&e.canUpload()){this.get("file")||this._set("file",b);this.get("name")||this._set("name",b.name||b.fileName);if(this.get("size")!=(b.size||b.fileSize))this._set("size",b.size||b.fileSize);this.get("type")||this._set("type",b.type);b.hasOwnProperty("lastModifiedDate")&&!this.get("dateModified")&&this._set("dateModified",
b.lastModifiedDate)}};a.extend(e,a.Base,{initializer:function(b){this.get("id")||this._set("id",a.guid("file"))},_uploadEventHandler:function(a){var b=this.get("xhr");switch(a.type){case "progress":this.fire("uploadprogress",{originEvent:a,bytesLoaded:a.loaded,bytesTotal:this.get("size"),percentLoaded:Math.min(100,Math.round(1E4*a.loaded/this.get("size"))/100)});this._set("bytesUploaded",a.loaded);break;case "load":if(200<=b.status&&299>=b.status){this.fire("uploadcomplete",{originEvent:a,data:a.target.responseText});
a=b.upload;var c=this.get("boundEventHandler");a.removeEventListener("progress",c);a.removeEventListener("error",c);a.removeEventListener("abort",c);b.removeEventListener("load",c);b.removeEventListener("error",c);b.removeEventListener("readystatechange",c);this._set("xhr",null)}else this.fire("uploaderror",{originEvent:a,data:b.responseText,status:b.status,statusText:b.statusText,source:"http"});break;case "error":this.fire("uploaderror",{originEvent:a,data:b.responseText,status:b.status,statusText:b.statusText,
source:"io"});break;case "abort":this.fire("uploadcancel",{originEvent:a});break;case "readystatechange":this.fire("readystatechange",{readyState:a.target.readyState,originEvent:a})}},startUpload:function(c,e,d){this._set("bytesUploaded",0);this._set("xhr",new XMLHttpRequest);this._set("boundEventHandler",b(this._uploadEventHandler,this));var k=new FormData;d=d||"Filedata";var l=this.get("xhr"),n=this.get("xhr").upload,p=this.get("boundEventHandler");a.each(e,function(a,b){k.append(b,a)});k.append(d,
this.get("file"));l.addEventListener("loadstart",p,!1);n.addEventListener("progress",p,!1);l.addEventListener("load",p,!1);l.addEventListener("error",p,!1);n.addEventListener("error",p,!1);n.addEventListener("abort",p,!1);l.addEventListener("abort",p,!1);l.addEventListener("loadend",p,!1);l.addEventListener("readystatechange",p,!1);l.open("POST",c,!0);l.withCredentials=this.get("xhrWithCredentials");a.each(this.get("xhrHeaders"),function(a,b){l.setRequestHeader(b,a)});l.send(k);this.fire("uploadstart",
{xhr:l})},cancelUpload:function(){var a=this.get("xhr");a&&a.abort()}},{NAME:"file",TYPE:"html5",ATTRS:{id:{writeOnce:"initOnly",value:null},size:{writeOnce:"initOnly",value:0},name:{writeOnce:"initOnly",value:null},dateCreated:{writeOnce:"initOnly",value:null},dateModified:{writeOnce:"initOnly",value:null},bytesUploaded:{readOnly:!0,value:0},type:{writeOnce:"initOnly",value:null},file:{writeOnce:"initOnly",value:null},xhr:{readOnly:!0,value:null},xhrHeaders:{value:{}},xhrWithCredentials:{value:!0},
boundEventHandler:{readOnly:!0,value:null}},isValidFile:function(a){return c&&c.File&&a instanceof File},canUpload:function(){return c&&c.FormData&&c.XMLHttpRequest}});a.FileHTML5=e},"3.17.2",{requires:["base"]});
YUI.add("squarespace-tweak-fields",function(a){a.namespace("Squarespace").TweakDialogField=Class.extend(a.Squarespace.DialogField,{initialize:function(b,c,e,d){this._super(b,c,e);this.Y=b.Y||a;this.dialog.on("tweak-reset",this.baseReset,this);this.dialog.on("tweak-discard",this.baseDiscard,this);this.dialog.on("datachange",function(a){a===this&&this.html.addClass("changed")},this);this.dialog.on("send-requested",function(){a.Lang.isValue(this.html.getDOMNode())&&this.html.removeClass("changed")},
this);this.dialog.once("ready",function(){this.resetButton=a.Node.create('<div class="sqs-reset-button-container"><div class="sqs-reset-button"></div></div>');this.resetButton.on("click",this.baseReset,this);this.html.append(this.resetButton);this.html.on("mouseover",function(){this.overlays&&this.overlays.forEach(function(a){a.show()},this)},this);this.html.on("mouseout",function(){this.overlays&&this.overlays.forEach(function(a){a.hide()},this)},this)},this);this.hidden=!1},baseReset:function(a){a&&
a.halt&&a.halt();this.reset();this.html.removeClass("changed");this.dialog.editedSinceLastSave=!1;for(var c in this.dialog.fields)"presets"!==c&&(this.dialog.editedSinceLastSave=this.dialog.editedSinceLastSave||this.dialog.fields[c].didDataChange())},baseDiscard:function(a){a&&a.halt&&a.halt();if(this.html.hasClass("changed")){this.reset();this.html.removeClass("changed");this.dialog.editedSinceLastSave=!1;for(var c in this.dialog.fields)"presets"!==c&&(this.dialog.editedSinceLastSave=this.dialog.editedSinceLastSave||
this.dialog.fields[c].didDataChange())}},reset:function(){},checkConditions:function(){if(this.config.showOnlyWhenPresent)0<this.Y.all(this.config.showOnlyWhenPresent).size()?(this.enable(!0),this.group.show({noAnim:!0}),this.overlays&&this.overlays.forEach(function(a){a.zone.enableField(this)},this)):(this.disable(),this.overlays&&this.overlays.forEach(function(a){a.zone.disableField(this)},this));else if(this.config.condition){var b=0,c=0;a.each(this.config.condition,function(e,d){if(a.Squarespace.TweakManager.fieldsForOverlays[d]){b++;
var g=a.Squarespace.TweakManager.fieldsForOverlays[d].getValue();e.forEach(function(a){c=a===g?++c:c},this)}else console.warn("The tweak's condition '"+d+"'' could not be found.")},this);b===c?(this.enable(!0),this.group.show({noAnim:!0}),this.overlays&&this.overlays.forEach(function(a){a.zone.enableField(this)},this)):(this.disable(),this.overlays&&this.overlays.forEach(function(a){a.zone.disableField(this)},this))}else{var e=!0,d;for(d in this.group.fields)e=e&&this.group.fields[d].hidden;e||this.group.show({noAnim:!0})}},
disable:function(a){this.disabled=!0;this.hide(a)},enable:function(a){this.disabled=!1;this.html.hasClass("hiddenForOverlay")||this.show(a)},hide:function(b){b=b||{};var c=b.noAnim;b=b.forOverlay;this.hidden||(this.hidden=!0,this.html.removeClass("shown"),this.html.addClass("hidden"),b&&this.html.addClass("hiddenForOverlay"),c?this.html.setStyles({opacity:0,height:0}):(c=this._anim({node:this.html,to:{opacity:0,height:0},duration:0.2,easing:a.Easing.easeOutStrong}),c.on("end",function(){this.html.setStyle("height",
0)},this),c.run()))},show:function(b,c){this.hidden&&!this.disabled&&(this.html.addClass("shown"),this.html.removeClass("hidden"),this.html.removeClass("hiddenForOverlay"),this.hidden=!1,b?this.html.setStyles({opacity:1,height:this.height&&0!==this.height?this.height:"auto"}):this._anim({node:this.html,to:{opacity:1,height:this.height&&0!==this.height?this.height:"auto"},duration:0.2,easing:a.Easing.easeOutStrong}).run())},destroy:function(){if(Array.isArray(this.events)&&0<this.events.length)for(var a=
0;a<this.events.length;a++)this.events[a].detach()}});a.Squarespace.DialogFieldGenerators.presets=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.options=[];this.presets={};this.customPresets=void 0!==c.presets?void 0!==c.presets.custom?c.presets.custom:null:null;null!==this.customPresets&&(this.customPresets.type="template");var d;for(d=0;d<b.value.length;d++)this.options.push(b.value[d].title),this.presets[b.value[d].title]=b.value[d].templateTweaks,
this.presets[b.value[d].title].type="template";if(c.presetsList)for(d=0;d<c.presetsList.length;d++)this.options.push(c.presetsList[d].title),this.presets[c.presetsList[d].title]=c.presetsList[d].templateTweaks,this.presets[c.presetsList[d].title].type="custom";void 0!==c.presets&&("Custom"==c.presets||void 0!==c.presets.custom&&null!==c.presets.custom)&&this.options.unshift("Custom");this.dialog.on("ready",function(){var a=this.panel.fields;this.fieldIndex=[];for(var b in a)if("group"===a[b].type)for(var c in a[b].fields)this.fieldIndex.push(a[b].fields[c])},
this);this.dropdown=new a.Squarespace.DialogFieldGenerators.dropdown({name:"presets",title:"Presets",eventName:"loadpreset",options:this.options},c,e);void 0!==c.presets&&this.dropdown.setValue(void 0!==c.presets.current?c.presets.current:c.presets);this.dropdown.reset=this.reset;this.html=this.dropdown.html;this.panel.on("loadpreset",this.loadPreset,this)},reset:function(){this.options&&("Custom"===this.options[0]&&(this.options.shift(),this.dropdown.select.one(":first-child").remove()),this.dropdown.setValue(this.options[0]))},
findFieldByTitle:function(a){for(var c=0;c<this.fieldIndex.length;c++)if(this.fieldIndex[c].config.title===a)return this.fieldIndex[c]},findFieldByName:function(a){for(var c=0;c<this.fieldIndex.length;c++)if(this.fieldIndex[c].config.name===a)return this.fieldIndex[c]},getValue:function(){return{current:this.dropdown.getValue(),custom:this.customPresets}},getPresetSettings:function(){var a=this.dialog.getData(),c=this.dialog;generatePreset=function(){var e=[],d;for(d in a)if("presets"!=d){var f;a:{f=
c.tweakManager.dialogFields;for(var h=0;h<f.length;h++)if(f[h].fields)for(var k=0;k<f[h].fields.length;k++)if(f[h].fields[k].name==d){f=f[h].fields[k];break a}f=null}if("object"==typeof a[d]){var h="",l;for(l in a[d])h+=l+":"+a[d][l]+";";h=h.substring(0,h.length-1);f&&e.push({title:f.title,value:h})}else f&&e.push({title:f.title,value:a[d]})}e.type="user";return e};return generatePreset()},setPresetToCustom:function(){var b=!1;for(i=0;i<this.options.length;i++)"Custom"==this.options[i]&&(b=!0,this.dropdown.select.set("selectedIndex",
i));b||(this.options.unshift("Custom"),b=a.DB.OPTION({html:"Custom"}),b.setAttribute("selected","selected"),this.dropdown.select.prepend(b));this.dropdown.html.one(".current").set("text","Custom");this.dropdown.config.value="Custom";this.customPresets=this.getPresetSettings()},loadPreset:function(){var b,c=this.dropdown.getValue(),c=this.presets[c],e;a.Squarespace.TweakManager.overlayManager.disable();c?this.customPresets=this.customPresets||this.getPresetSettings():c=this.customPresets;this.dialog.detectCustomPresetEvt.detach();
this.dialog.preventCSSUpdate=!0;this.dialog.isLoadingPreset=!0;var d;if("template"==c.type)for(b in c){d="string"==typeof c[b]?"{"==c[b][0]?c[b].split(":"):[c[b]]:[c[b]];e={};if(1<d.length){d=c[b].replace("{","").replace("}","").split(";");for(var f=0;f<d.length;f++){var h=d[f].split(":");if(!(2>h.length)){if(2<h.length){for(var k=h[1],l=2;l<h.length;l++)k+=":"+h[l];h.splice(1,h.length-1,k)}k=h[0].trim();h=h[1].trim();e[k]=h;void 0===e[k+"-array"]&&(e[k+"-array"]=[]);e[k+"-array"].push(h)}}}else e=
a.Lang.trim(c[b]);(d=this.findFieldByName(b))&&d.setValue(e)}else for(b=0;b<c.length;b++)(d=this.findFieldByTitle(c[b].title))&&d.setValue(c[b].value);this.dialog.preventCSSUpdate=!1;this.dialog.fire("datachange",this);this.dialog.isLoadingPreset=!1;this.dialog.detectCustomPresetEvt=this.dialog.setDetectCustomPresetEvt();a.Squarespace.TweakManager.overlayManager.enable()},getType:function(){return"presets"}});a.Squarespace.DialogFieldGenerators.colorpalette=Class.extend(a.Squarespace.TweakDialogField,
{initialize:function(b,c,e){this._super(b,c,e);this.html=this.html=a.DB.DIV("field-wrapper colorpalette-field-wrapper tweak-field",a.DB.DIV("field-wrapper-inner clear",a.DB.DIV("paletteitem paletteitem1"),a.DB.DIV("paletteitem paletteitem2"),a.DB.DIV("paletteitem paletteitem3"),a.DB.DIV("paletteitem paletteitem4"),a.DB.DIV("paletteitem paletteitem5")));this.colors=a.Squarespace.Colors;this.events=[];this.config.value=this.config.palette;this.updatePreview();this.events.push(this.dialog.on("ready",
this.setupDialog,this))},updatePreview:function(){for(var a=0;a<this.config.value.length;a++)this.html.one(".paletteitem"+(a+1)).setStyle("backgroundColor",this.config.value[a])},setupDialog:function(){this.d=new a.Squarespace.EditingDialog({loadingText:"Loading Asset...",loadingState:!1,style:"flyout squarespace-tweak-child-dialog",colorScheme:"dropdown colorpicker palettepicker",flyoutPointerDirection:"top",parentDialog:this.dialog,forcePosition:"fixed",width:200,height:330,closeOthers:!1,overlay:!0,
doNotDisableBodyScroll:!0,dontSetWidthOnFields:!0,primaryTabs:[{fields:[{type:"palettesupercolorwheel",name:"wheel"},{type:"paletteinput",name:"hex",label:"#"},{type:"paletteset",name:"palette"},{type:"palettebuttons",name:"palettebuttons"}]}],initialData:{wheel:"#FFFFFF",hex:this.colors.toHex("#FFFFFF"),palette:this.config.value}});this.events.push(this.d.on("ready",this.setpalette,this));this.events.push(this.d.on("datachange",this.change,this));this.events.push(this.d.on("slap",this.slap,this));
this.events.push(this.d.on("shiftslap",function(){this.slap(!0)},this));this.events.push(this.d.on("savepalette",this.savepalette,this));this.events.push(this.d.on("rotate",this.rotate,this));this.events.push(a.Squarespace.TweakManager.dialog.el.on("scroll",function(){this.d.close()},this));this.events.push(this.html.on("click",function(b){b.halt();this.d.isVisible()?this.d.close():(b=this.html.getY()-(a.one("body").get("scrollTop")||a.one("html").get("scrollTop"))+30,this.d.params.parentDialog=this.dialog,
b+330-20>window.innerHeight?this.d.show({anchor:this.html,top:b-330-31-10,flyoutPointerDirection:"bottom"}):this.d.show({anchor:this.html,top:b,flyoutPointerDirection:"top"}))},this))},loadPalette:function(b,c){a.Data.get({url:"/api/external/ColourLoversProxy?hex="+this.getClosestColors(b).join(",").replace(/#/gi,""),success:a.bind(function(a){if(a&&a.length){this.palettes=a;for(a=0;a<this.palettes.length;a++)this.palettes[a].colors=("#"+this.palettes[a].colors.join(",#")).replace(/##/gi,"#").split(","),
this.palettes[a].base=b,this.sortByLightness(this.palettes[a].colors);c(this.getNextPalette())}else c(null)},this)})},getNextPalette:function(){var a;this.palettes.length&&(a=this.palettes.shift(),this.palettes.push(a));return a&&a.colors?a.colors:null},getClosestColors:function(a){var c=[];c.push(a);return c},lightenColor:function(b,c){var e=c*a.Squarespace.Colors.getL(b);return a.Squarespace.Colors.toHex("hsl("+a.Squarespace.Colors.getH(b)+","+a.Squarespace.Colors.getS(b)+","+e+")")},getMonochromePalette:function(b){b=
a.Color.getAnalogous(a.Squarespace.Colors.toHsl(b));for(var c=0;c<b.length;c++)b[c]=a.Squarespace.Colors.toHex(b[c]);return[{colors:b}]},sortByLightness:function(b){b.sort(function(b,e){return a.Squarespace.Colors.getL(e)-a.Squarespace.Colors.getL(b)});return b},rotate:function(){this.d.fields.palette.setValue(this.getNextPalette())},slap:function(b){var c=a.Squarespace.TweakManager.tweakDefinitionsByName,e=this.palettes[this.palettes.length-1],d,f,h;b&&e.colors.reverse();for(d in c)f=c[d],f.palette&&
"color"===f.type&&(h="base"==f.palette[0]?e.base:e.colors[f.palette[0].replace("color","")],f.palette[1]&&(h=this.lightenColor(h,f.palette[1])),a.Squarespace.TweakManager.dialog.fields.colors.fields[f.variableName].setValue(h));b&&e.colors.reverse();this.savepalette()},savepalette:function(){this.config.value=this.d.fields.palette.getValue();this.config.value&&(this.updatePreview(),a.Global.fire("slap:change"))},setpalette:function(a){a=a||this.config.value;this.d.fields.palette.setValue(a)},change:function(a){var c=
a.config.name;a=this.colors.toHex(a.getValue());var e=this;switch(c){case "wheel":case "hex":this.loadPalette(a,function(a){a?e.setpalette(a):e.d.fields.palette.setValue(a)})}this.d.fields.wheel.setValue(a);this.d.fields.hex.setValue(a)},close:function(){this.d.isVisible()&&this.d.close()},reset:function(){},getValue:function(){},getPalette:function(){return this.config.value},getType:function(){return"colorpalette"}});a.Squarespace.DialogFieldGenerators.group=Class.extend(a.Squarespace.TweakDialogField,
{initialize:function(b,c,e){this._super(b,c,e);if(!(void 0===this.config.fields||0===this.config.fields.length||void 0===this.config.title||""===this.config.title)){this.html=a.DB.DIV("field-wrapper "+this.config.name+"-group-field-wrapper group-field-wrapper "+name,a.DB.DIV("field-title ",{html:this.config.title}),a.DB.DIV("field-wrapper-inner clear "+(this.config.slider?" slider ":" noslider "),{style:"position: relative;"}));this.config.description&&this.html.one(".field-title").append(a.DB.DIV("field-description-wrapper clear",
a.DB.DIV("field-description",{html:this.config.description})));this.fields={};this.fieldCount=0;this.events=[];for(b=0;b<this.config.fields.length;b++)this.fieldCount++,e=this.config.fields[b],this.fields[e.name]=new a.Squarespace.DialogFieldGenerators[e.type](a.merge(e,"value"===e.type?{titleStyle:"left"}:{}),c,this.dialog),this.html.one(".field-wrapper-inner").append(this.fields[e.name].html),this.fields[e.name].group=this,this._subscribe(this.fields[e.name],"hidden",this.checkSize)}},getField:function(a){return this.fields[a]},
checkSize:function(){var a=0,c;for(c in this.fields)this.fields[c].hidden&&a++;a==this.fieldCount?this.html.setStyle("display","none"):this.html.setStyle("display","block")},resize:function(){for(var a in this.fields)this.fields[a].resize()},toggle:function(a){a.halt();a=this.html.one(".field-wrapper-inner");0===parseInt(a.getComputedStyle("height"),10)?(this.html.removeClass("closed"),a.setStyle("height",this.config.height)):(this.html.addClass("closed"),a.setStyle("height",0))},didDataChange:function(){for(var a in this.fields)if(this.fields[a].didDataChange())return!0;
return!1}});a.Squarespace.DialogFieldGenerators.image=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.config.value=c[this.config.name]?a.Squarespace.TweakManager.parseMixin(a.clone(c[this.config.name]),{noArray:!0}):{};this.config.label=this.config.label||this.config.title;b=a.Squarespace.TweakManager.parseMixin(a.clone(this.config.defaultValue));for(var d in b)this.config.value[d]||(this.config.value[d]=b[d]);this.config.deprecatedValue={};for(d in this.config.value)b[d]||
(this.config.deprecatedValue[d]=this.config.value[d],delete this.config.value[d]);this.config.value["background-image"]=this.config.value["background-image"]?this.config.value["background-image"]:void 0;this.config.value["background-position"]=this.config.value["background-position"]?this.config.value["background-position"]:void 0;this.config.value["background-size"]=this.config.value["background-size"]?this.config.value["background-size"]:void 0;this.config.value["background-attachment"]=this.config.value["background-attachment"]?
this.config.value["background-attachment"]:void 0;this.config.value["background-repeat"]=this.config.value["background-repeat"]?this.config.value["background-repeat"]:void 0;this.html=a.DB.DIV("field-wrapper color-field-wrapper tweak-field",a.DB.DIV("field-wrapper-inner clear",this.config.label?a.DB.DIV("field-title",{html:this.config.label}):null,a.DB.DIV("picker")),this.config.description?a.DB.DIV("field-description-wrapper",a.DB.DIV("field-description",{html:this.config.description})):null);this.html.one(".picker").setStyles({backgroundImage:"none"!=
this.config.value["background-image"]?this.config.value["background-image"]:"url(/universal/images-v6/tweak/backgroundimage.png)",backgroundPosition:"50% 50%",backgroundSize:"cover"});a.on("click",this.showDialog,this.html,this,{anchorEl:this.html})},showDialog:function(b){b.halt();var c=this.config.name+"-backgroundimage",e=this.config.name+"-backgroundposition",d=this.config.name+"-backgroundsize",f=this.config.name+"-backgroundattachment",h=this.config.name+"-backgroundrepeat",k={};k[c]=this.config.value["background-image"];
k[e]=this.config.value["background-position"];k[d]=this.config.value["background-size"];k[f]=this.config.value["background-attachment"];k[h]=this.config.value["background-repeat"];b=[];var l={};void 0!==k[c]&&(b.push({type:"backgroundimage",name:this.config.name+"-backgroundimage"}),l[this.config.name+"-backgroundimage"]=this.config.value["background-image"]);void 0!==k[e]&&(b.push({type:"dropdown",name:this.config.name+"-backgroundposition",title:"Position",options:"top left;top center;top right;center left;center center;center right;bottom left;bottom center;bottom right".split(";")}),
l[this.config.name+"-backgroundposition"]=this.config.value["background-position"]);void 0!==k[d]&&(b.push({type:"dropdown",name:this.config.name+"-backgroundsize",title:"Size",options:["auto","cover","contain"]}),l[this.config.name+"-backgroundsize"]=this.config.value["background-size"]);void 0!==k[h]&&(b.push({type:"dropdown",name:this.config.name+"-backgroundrepeat",title:"Repeat",options:["no-repeat","repeat","repeat-x","repeat-y"]}),l[this.config.name+"-backgroundrepeat"]=this.config.value["background-repeat"]);
void 0!==k[f]&&(b.push({type:"checkbox",name:this.config.name+"-backgroundattachment",titleStyle:"left",title:"Fix position",active:"fixed"==this.config.value["background-attachment"]}),l[this.config.name+"-backgroundattachment"]="fixed"==this.config.value["background-attachment"]);c=31*b.length+210-31;this.d||(this.d=new a.Squarespace.EditingDialog({loadingText:"Loading Asset...",loadingState:!1,style:"flyout squarespace-tweak-child-dialog background-image-dialog"+(a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE)?
"":" disabled"),colorScheme:"dropdown",forcePosition:"fixed",flyoutPointerDirection:"top",width:200,overlay:!0,doNotDisableBodyScroll:!0,dontSetWidthOnFields:!0,height:c,closeOthers:!1,primaryTabs:[{fields:b}],initialData:l,parentDialog:this.dialog}),this.d.on("datachange",this.onChange,this));this.events=[];this.events.push(a.Squarespace.TweakManager.dialog.el.on("scroll",function(){this.d.close()},this));this.d.isVisible()?(this.d.setInitialData(l),this.d.close()):(b=this.html.getY()-(a.one("body").get("scrollTop")||
a.one("html").get("scrollTop"))+30,this.d.params.parentDialog=this.dialog,b+c-20>window.innerHeight?this.d.show({anchor:this.html,top:b-c-31-10,flyoutPointerDirection:"bottom"}):this.d.show({anchor:this.html,top:b,flyoutPointerDirection:"top"}),this.d.fields[this.config.name+"-backgroundimage"]&&this.d.fields[this.config.name+"-backgroundimage"].showUploadCanvas(),this.setDialogValues())},setDialogValues:function(){var a=this.d.fields;a[this.config.name+"-backgroundimage"]&&a[this.config.name+"-backgroundimage"].setValue(this.config.value["background-image"]);
a[this.config.name+"-backgroundposition"]&&a[this.config.name+"-backgroundposition"].setValue(this.config.value["background-position"]);a[this.config.name+"-backgroundsize"]&&a[this.config.name+"-backgroundsize"].setValue(this.config.value["background-size"]);a[this.config.name+"-backgroundattachment"]&&a[this.config.name+"-backgroundattachment"].setValue("fixed"==this.config.value["background-attachment"]);a[this.config.name+"-backgroundrepeat"]&&a[this.config.name+"-backgroundrepeat"].setValue(this.config.value["background-repeat"])},
onChange:function(b){var c=b.config.name.split("-"),e=c[c.length-1];switch(e){case "backgroundimage":e="background-image";break;case "backgroundposition":e="background-position";break;case "backgroundsize":e="background-size";break;case "backgroundattachment":e="background-attachment";break;case "backgroundrepeat":e="background-repeat"}this.config.value[e]=b.getValue();"background-attachment"==e&&(this.config.value[e]=this.config.value[e]&&"false"!=this.config.value[e]?"fixed":"scroll");this.html.one(".picker").setStyles({backgroundImage:"none"!=
this.config.value["background-image"]?this.config.value["background-image"]:"url(/universal/images-v6/tweak/backgroundimage.png)",backgroundPosition:"50% 50%",backgroundSize:"cover"});this.dialog.fire("datachange",this);var d=this.config.name;this.dialog.fire("datachange",{getName:function(){return d+"-"+e},getType:function(){return"associatedVar"}});a.Cookie.get("damask")||(this.dialog.edited=!1)},setValue:function(b){for(var c in b)"background-attachment"==c&&(this.config.value[c]="fixed"==b[c]?
!0:!1),this.config.value[c]=b[c];this.dialog.fire("datachange",this);a.Cookie.get("damask")||(this.dialog.edited=!1)},reset:function(){this.initialData=this.dialog.getInitialData();this.config.value=this.initialData[this.config.name]?a.Squarespace.TweakManager.parseMixin(a.clone(this.initialData[this.config.name]),{noArray:!0}):{};this.config.deprecatedValue={};var b,c,e,d,f;this.d&&this.d.fields&&(b=this.d.fields[this.config.name+"-backgroundimage"],c=this.d.fields[this.config.name+"-backgroundposition"],
e=this.d.fields[this.config.name+"-backgroundsize"],d=this.d.fields[this.config.name+"-backgroundattachment"],f=this.d.fields[this.config.name+"-backgroundrepeat"]);b&&b.reset();c&&c.reset();e&&e.reset();d&&d.reset();f&&f.reset();this.html.one(".picker").setStyles({backgroundImage:"none"!=this.config.value["background-image"]?this.config.value["background-image"]:"url(/universal/images-v6/tweak/backgroundimage.png)",backgroundPosition:"50% 50%",backgroundSize:"cover"});this.dialog.fire("datachange",
this)},getValue:function(){var a={};void 0!==this.config.value["background-image"]&&(a["background-image"]=this.config.value["background-image"]);void 0!==this.config.value["background-position"]&&(a["background-position"]=this.config.value["background-position"]);void 0!==this.config.value["background-size"]&&(a["background-size"]=this.config.value["background-size"]);void 0!==this.config.value["background-attachment"]&&(a["background-attachment"]="fixed"===this.config.value["background-attachment"]?
"fixed":"scroll");void 0!==this.config.value["background-repeat"]&&(a["background-repeat"]=this.config.value["background-repeat"]);for(var c in this.config.deprecatedValue)switch(c){case "background-image":case "background-position":case "background-size":case "background-attachment":case "background-repeat":a[c]=this.config.deprecatedValue[c]}return a},getAssociatedVars:function(){var a=[];void 0!==this.config.value["background-image"]&&a.push({name:this.config.name+"-background-image",value:this.config.value["background-image"]});
void 0!==this.config.value["background-position"]&&a.push({name:this.config.name+"-background-position",value:this.config.value["background-position"]});void 0!==this.config.value["background-size"]&&a.push({name:this.config.name+"-background-size",value:this.config.value["background-size"]});void 0!==this.config.value["background-attachment"]&&a.push({name:this.config.name+"-background-attachment",value:"fixed"===this.config.value["background-attachment"]?"fixed":"scroll"});void 0!==this.config.value["background-repeat"]&&
a.push({name:this.config.name+"-background-repeat",value:this.config.value["background-repeat"]});return a},getType:function(){return"image"},didDataChange:function(){var b=a.Squarespace.TweakManager.parseMixin(this.initialData[this.getName()]);return this.config.value["background-image"]!==b["background-image"]||this.config.value["background-position"]!==b["background-position"]||this.config.value["background-size"]!==b["background-size"]||this.config.value["background-attachment"]!==b["background-attachment"]||
this.config.value["background-repeat"]!==b["background-repeat"]?!0:!1}});a.Squarespace.DialogFieldGenerators.backgroundimage=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.config.value=this.config.value||(this.initialData[this.config.name]?this.initialData[this.config.name]:"");this.html=a.DB.DIV("field-wrapper tweak-field backgroundimage-field-wrapper clear",a.DB.DIV("asset-upload-panel",a.DB.DIV("asset-upload-canvas")))},showUploadCanvas:function(){a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE)&&
(this.uploader=new a.Squarespace.Uploader({dragAndDropArea:this.html.one(".asset-upload-canvas"),process:!1,autoUpload:!0,selectButtonLabel:"Click here or drag and drop to add a background image.",processFile:a.bind(function(b){b.postData={contentType:"tweak-asset",recordType:a.Squarespace.RecordType.TWEAKASSET}},this),addPlaceholder:a.bind(function(a){return this.renderPlaceholder(a.file).one(".item")},this),fileComplete:a.bind(function(a,c){this.renderItem(c.media[0],a.placeholder.get("parentNode"))},
this),fileFilters:[{description:"Images",extensions:"*.jpg;*.jpeg;*.png;*.gif;*.ico",acceptTypes:"image/png, image/gif, image/jpeg"}]}),this.uploader.render(this.html.one(".asset-upload-canvas")),"none"===this.config.value&&this.uploader.get("selectFilesButton").setStyle("visibility","visible"))},renderPlaceholder:function(b,c){var e=a.DB.DIV("pseudo-item",a.DB.DIV("item").plug(a.Squarespace.Plugin.Progress,{showBar:!1,showSpinner:!1,spinnerColor:"dark"})),d=this.uploader.get("boundingBox").get("parentNode");
d.get("parentNode").all(".item").remove();d.addClass("uploading-image");d.append(e);this._subscribe(e,"click",function(b){if(b.target.ancestor(".failed .button",!0)){var c=b.target.ancestor(".failed",!0),e=b.target.ancestor(".pseudo-item",!0);c.getData("errorType")==a.Squarespace.MediaProcessingErrors.UPLOAD&&e.transition({opacity:0,transform:"scale(0.94)",duration:0.4},a.bind(function(){e.remove();this.emptyStateCheck()},this))}},this);e.transition({opacity:1,transform:"scale(1)",duration:0.6});
return e},renderItem:function(b,c){var e=this.uploader.get("boundingBox");this.uploader.get("selectFilesButton").setStyle("visibility","hidden");e.get("parentNode").all(".item").remove();var d=a.DB.DIV("main-image",{"data-img-src":b.assetUrl});d.setStyle("backgroundImage",'url("'+b.assetUrl+'")');var f="/universal/images-v6/icons/icon-trash-20-light.png";a.Cookie.get("damask")&&(f="/universal/images-v6/icons/icon-trash-20-dark.png");d=a.DB.DIV("item",a.DB.DIV("item-inner",a.DB.DIV("asset-remove",
a.DB.IMG("remove-x",{src:f})),d));this.config.value='url("'+b.assetUrl+'")';this.dialog.fire("datachange",this);d.one(".asset-remove").on("click",a.bind(function(a){a.currentTarget.hide();a.currentTarget.get("parentNode").get("parentNode").remove();this.uploader.get("selectFilesButton").setStyle("visibility","visible");this.config.value="none";this.dialog.fire("datachange",this);a.stopPropagation()},this));c&&c.remove();e=e.get("parentNode");e.removeClass("uploading-image");e.insert(d,"after");return d},
setValue:function(a){this.config.value=a;"none"!=this.config.value&&this.renderItem({assetUrl:this.config.value.replace('url("',"").replace("url('","").replace("url(","").replace('")',"").replace("')","").replace(")","")})},reset:function(){this.initialData=this.dialog.getInitialData();this.config.value=this.initialData[this.config.name];this.renderItem();this.dialog.fire("datachange",this);this.dialog.edited=!1},getValue:function(){var a=this.config.value,a=a.split(",")[0];a.replace("'","").replace('"',
"").replace("'","").replace('"',"");return this.config.value},getType:function(){return"backgroundimage"}});var d={Georgia:{familyName:"Georgia, serif",foundry:"websafe",normalName:"Georgia",curated:!0},"Palatino Linotype":{familyName:'"Palatino Linotype", "Book Antiqua", Palatino, serif',foundry:"websafe",normalName:"Palatino Linotype",curated:!0},"Times New Roman":{familyName:'"Times New Roman", Times, serif',foundry:"websafe",normalName:"Times New Roman",curated:!0},Arial:{familyName:"Arial, Helvetica, sans-serif",
foundry:"websafe",normalName:"Arial",curated:!0},"Helvetica Neue":{familyName:"'Helvetica Neue', Arial, sans-serif",foundry:"websafe",normalName:"Helvetica Neue",curated:!0},"Lucida Sans Unicode":{familyName:'"Lucida Sans Unicode", "Lucida Grande", sans-serif',foundry:"websafe",normalName:"Lucida Sans Unicode",curated:!0},"Trebuchet MS":{familyName:'"Trebuchet MS", Helvetica, Arial, sans-serif',foundry:"websafe",normalName:"Trebuchet MS",curated:!0},Verdana:{familyName:"Verdana, Geneva, sans-serif",
foundry:"websafe",normalName:"Verdana",curated:!0},"Courier New":{familyName:'"Courier New", Courier, monospace',foundry:"websafe",normalName:"Courier New",curated:!0},"Lucida Console":{familyName:'"Lucida Console", Monaco, monospace',foundry:"websafe",normalName:"Lucida Console",curated:!0}};a.Squarespace.DialogFieldGenerators.font=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.win=a.Squarespace.TweakManager.frontSiteYUI.config.win;this.config.value=
c[this.config.name]?a.Squarespace.TweakManager.parseMixin(a.clone(c[this.config.name]),{noArray:!0}):{};this.config.label=this.config.label||this.config.title;b=a.Squarespace.TweakManager.parseMixin(a.clone(this.config.defaultValue));for(var d in b)this.config.value[d]||(this.config.value[d]=b[d]);this.config.deprecatedValue={};for(d in this.config.value)b[d]||(this.config.deprecatedValue[d]=this.config.value[d],delete this.config.value[d]);this.config.value["font-family"]=this.config.value["font-family"]?
this.config.value["font-family"]:void 0;this.config.value["font-size"]=this.config.value["font-size"]?this.config.value["font-size"]:void 0;this.config.value["line-height"]=this.config.value["line-height"]?this.config.value["line-height"]:void 0;this.config.value["font-weight"]=this.config.value["font-weight"]?this.config.value["font-weight"]:void 0;this.config.value["font-style"]=this.config.value["font-style"]?this.config.value["font-style"]:void 0;this.config.value["text-transform"]=this.config.value["text-transform"]?
this.config.value["text-transform"]:void 0;this.config.value["text-decoration"]=this.config.value["text-decoration"]?this.config.value["text-decoration"]:void 0;this.config.value["letter-spacing"]=this.config.value["letter-spacing"]?this.config.value["letter-spacing"]:void 0;this.config.value["text-align"]=this.config.value["text-align"]?this.config.value["text-align"]:void 0;this.html=a.DB.DIV("field-wrapper tweak-field font-field-wrapper clear",a.DB.DIV("field-wrapper-inner clear",{style:"position: relative;"},
this.config.label?a.DB.DIV("field-title",{html:this.config.label}):null));var f=this;this.isGoogleFont=function(){var a=f.config.value["font-family"];if(!a)return!1;a=a.split(",")[0].replace(/"/g,"").replace(/'/g,"");return f.win.Static.SQUARESPACE_CONTEXT.googleFonts&&"undefined"!=typeof f.win.Static.SQUARESPACE_CONTEXT.googleFonts[a]?!0:!1}();this.isTypekitFont=function(){var a=f.config.value["font-family"];if(!a)return!1;a=a.split(",")[0].replace(/"/g,"").replace(/'/g,"");return f.win.Static.SQUARESPACE_CONTEXT.typekitFonts&&
"undefined"!=typeof f.win.Static.SQUARESPACE_CONTEXT.typekitFonts[a]?!0:!1}();this.isTypekitkitFont=function(){var a=f.config.value["font-family"];if(!a)return!1;a=a.split(",")[0].replace(/"/g,"").replace(/'/g,"");return f.win.Static.SQUARESPACE_CONTEXT.typekitkitFonts&&"undefined"!=typeof f.win.Static.SQUARESPACE_CONTEXT.typekitkitFonts[a]?!0:!1}();a.on("click",this.showDialog,this.html,this,{anchorEl:this.html})},showDialog:function(b){b.halt();var c=this.config.name+"-family",e=this.config.name+
"-fontsize",d=this.config.name+"-lineheight",f=this.config.name+"-weight",h=this.config.name+"-style",k=this.config.name+"-texttransform",l=this.config.name+"-textdecoration",n=this.config.name+"-letterspacing",p=this.config.name+"-textalign",q={},t={},r={},u={},s={},v={},w={},y={},z={};b=[];var D={},K=a.Squarespace.TweakManager.parseMixin(this.config.defaultValue);q[c]=this.config.value["font-family"];t[e]=this.config.value["font-size"];r[d]=this.config.value["line-height"];u[f]=this.config.value["font-weight"];
s[h]=this.config.value["font-style"];v[k]=this.config.value["text-transform"];w[l]=this.config.value["text-decoration"];y[n]=this.config.value["letter-spacing"];z[p]=this.config.value["text-align"];void 0!==q[c]&&(b.push({type:"fontfamily",name:this.config.name+"-family",developerFonts:void 0!==this.config.value["font-family-array"]?this.config.value["font-family-array"]:[this.config.value["font-family"]]}),D[this.config.name+"-family"]=this.config.value["font-family"]);void 0!==u[f]&&(f=this.config.value["font-weight"],
f="bold"===f||!0===f,b.push({type:"checkbox",name:this.config.name+"-weight",titleStyle:"left",title:"Bold",active:f}),D[this.config.name+"-weight"]=f);void 0!==s[h]&&(h=this.config.value["font-style"],h="italic"===h||!0===h,b.push({type:"checkbox",name:this.config.name+"-style",titleStyle:"left",title:"Italic",active:h}),D[this.config.name+"-style"]=h);void 0!==q[c]&&b.push({type:"dropdown",name:this.config.name+"-webfontstyle",title:"Style",options:["N/A"]});void 0!==t[e]&&(c=a.Squarespace.UnitManipulator.split(this.config.value["font-size"]),
c||(this.config.value["font-size"]=K["font-size"],c=a.Squarespace.UnitManipulator.split(this.config.value["font-size"])),c&&(""===c[2]&&(c[2]="px",this.config.value["font-size"]+="px"),this.config.fontSize=this.config.fontSize||{},b.push({type:"value",name:this.config.name+"-fontsize",titleStyle:"left",title:"Font Size",factor:7,min:this.config.fontSize.min||("px"===c[2]?8:0.5),max:this.config.fontSize.max||("px"===c[2]?72:4),defaultValue:K["font-size"]}),D[this.config.name+"-fontsize"]=this.config.value["font-size"]));
void 0!==r[d]&&(c=a.Squarespace.UnitManipulator.split(this.config.value["line-height"]),c||(this.config.value["line-height"]=K["line-height"],c=a.Squarespace.UnitManipulator.split(this.config.value["line-height"])),c&&(""===c[2]&&(c[2]="px",this.config.value["line-height"]+="px"),this.config.lineHeight=this.config.lineHeight||{},d=this.config.lineHeight.max||("px"===a.Squarespace.UnitManipulator.split(this.config.value["line-height"])[2]?100:4),r=this.config.lineHeight.min||("px"===a.Squarespace.UnitManipulator.split(this.config.value["line-height"])[2]?
8:0.85),b.push({type:"value",name:this.config.name+"-lineheight",titleStyle:"left",title:"Line Height",factor:7,min:r,max:d,defaultValue:K["line-height"]}),D[this.config.name+"-lineheight"]=this.config.value["line-height"]));void 0!==v[k]&&(b.push({type:"dropdown",name:this.config.name+"-texttransform",title:"Text Transform",options:["none","capitalize","uppercase","lowercase"]}),D[this.config.name+"-texttransform"]=this.config.value["text-transform"]);void 0!==w[l]&&(b.push({type:"dropdown",name:this.config.name+
"-textdecoration",title:"Text Decoration",options:["none","underline","overline","line-through"]}),D[this.config.name+"-textdecoration"]=this.config.value["text-decoration"]);void 0!==y[n]&&(c=a.Squarespace.UnitManipulator.split(this.config.value["letter-spacing"]),c||(this.config.value["letter-spacing"]=K["letter-spacing"],c=a.Squarespace.UnitManipulator.split(this.config.value["letter-spacing"])),c&&(""===c[2]&&(c[2]="px",this.config.value["letter-spacing"]+="px"),this.config.letterSpacing=this.config.letterSpacing||
{},b.push({type:"value",name:this.config.name+"-letterspacing",titleStyle:"left",title:"Letter Spacing",factor:7,min:this.config.letterSpacing.min||-5,max:this.config.letterSpacing.max||20,defaultValue:K["letter-spacing"]}),D[this.config.name+"-letterspacing"]=this.config.value["letter-spacing"]));void 0!==z[p]&&(b.push({type:"dropdown",name:this.config.name+"-textalign",title:"Text Align",options:["left","center","right","justify"]}),D[this.config.name+"-textalign"]=this.config.value["text-align"]);
k=31*b.length-31;a.Cookie.get("damask")&&(k+=61);this.d||(this.d=new a.Squarespace.EditingDialog({loadingText:"Loading Asset...",loadingState:!1,style:"flyout squarespace-tweak-child-dialog",colorScheme:"dropdown",forcePosition:"fixed",flyoutPointerDirection:"top",overlay:!0,doNotDisableBodyScroll:!0,dontSetWidthOnFields:!0,width:200,height:k,closeOthers:!1,primaryTabs:[{fields:b}],initialData:D,parentDialog:this.dialog}),this.d.on("datachange",this.onChange,this),this.d.on("show",function(){a.Lang.isValue(a.Squarespace.TweakManager.overlayManager)&&
a.Squarespace.TweakManager.overlayManager.disable()},this),this.d.on("close",function(){a.Lang.isValue(a.Squarespace.TweakManager.overlayManager)&&a.Squarespace.TweakManager.overlayManager.enable()},this));this.events=[];this.events.push(a.Squarespace.TweakManager.dialog.el.on("scroll",function(){this.d.close()},this));this.d.isVisible()?this.d.close():(b=this.html.getY()-(a.one("body").get("scrollTop")||a.one("html").get("scrollTop"))+30,this.d.params.parentDialog=this.dialog,b+k-20>window.innerHeight?
this.d.show({anchor:this.html,top:b-k-31-10,flyoutPointerDirection:"bottom"}):this.d.show({anchor:this.html,top:b,flyoutPointerDirection:"top"}),this.initializing=!0,this.setDialogValues(),this.initializing=!1)},setDialogValues:function(){var a=this.d.fields;a[this.config.name+"-family"]&&(a[this.config.name+"-family"].setValue(this.config.value["font-family"]),!this.isGoogleFont&&(!this.isTypekitFont&&!this.isTypekitkitFont)&&(a[this.config.name+"-weight"]&&a[this.config.name+"-weight"].setValue("bold"==
this.config.value["font-weight"]||!0===this.config.value["font-weight"]?!0:!1),a[this.config.name+"-style"]&&a[this.config.name+"-style"].setValue("italic"==this.config.value["font-style"]||!0===this.config.value["font-style"]?!0:!1)));a[this.config.name+"-fontsize"]&&a[this.config.name+"-fontsize"].setValue(this.config.value["font-size"]);a[this.config.name+"-lineheight"]&&a[this.config.name+"-lineheight"].setValue(this.config.value["line-height"]);a[this.config.name+"-texttransform"]&&a[this.config.name+
"-texttransform"].setValue(this.config.value["text-transform"]);a[this.config.name+"-textdecoration"]&&a[this.config.name+"-textdecoration"].setValue(this.config.value["text-decoration"]);a[this.config.name+"-letterspacing"]&&a[this.config.name+"-letterspacing"].setValue(this.config.value["letter-spacing"]);a[this.config.name+"-textalign"]&&a[this.config.name+"-textalign"].setValue(this.config.value["text-align"])},reset:function(){this.initialData=this.dialog.getInitialData();this.config.value=this.initialData[this.config.name]?
a.Squarespace.TweakManager.parseMixin(a.clone(this.initialData[this.config.name]),{noArray:!0}):{};this.config.deprecatedValue={};this.d&&this.d.fields&&(this.family=this.d.fields[this.config.name+"-family"],this.size=this.d.fields[this.config.name+"-fontsize"],this.height=this.d.fields[this.config.name+"-lineheight"],this.weight=this.d.fields[this.config.name+"-weight"],this.style=this.d.fields[this.config.name+"-style"],this.texttransform=this.d.fields[this.config.name+"-texttransform"],this.textdecoration=
this.d.fields[this.config.name+"-textdecoration"],this.letterspacing=this.d.fields[this.config.name+"-letterspacing"],this.textalign=this.d.fields[this.config.name+"-textalign"]);this.family&&this.family.reset();this.size&&this.size.reset();this.height&&"auto"!==this.height&&this.height.reset();this.weight&&this.weight.reset();this.style&&this.style.reset();this.texttransform&&this.texttransform.reset();this.textdecoration&&this.textdecoration.reset();this.letterspacing&&this.letterspacing.reset();
this.textalign&&this.textalign.reset();this.dialog.fire("datachange",this)},fold:function(a){this.html.toggleClass("closed");this.html.hasClass("closed")?this.dialog.fire("close"):this.dialog.fire("open")},updateStack:function(b){this.config.family=a.one(b.target).get("value");b=this.config.family.split(",")[0].replace("'","").replace('"',"").replace("'","").replace('"',"");this.html.one(".family span").set("text",b)},updateFieldFamily:function(){this.html.one(".field-title").setStyle("fontFamily",
this.config.value["font-family"])},hideWeightAndStyleFields:function(a){var c=this.d.fields[this.config.name+"-style"],e=this.d.fields[this.config.name+"-weight"];c&&c.hide(!0);e&&e.hide(!0);a&&1<a.length?(c=this.d.fields[this.config.name+"-webfontstyle"],c.show(!0),c.setOptions(a),c=this.config.value["font-weight"],c=!1===c?"400":c,c=!0===c?"700":c,e=this.config.value["font-style"],this.isGoogleFont?(c=a.indexOf(c+("normal"!=e?" "+e:"")),webfontstyle=a[-1==c?0:c]):(this.isTypekitFont?(c=parseInt(c,
10)/100,e="italic"==e?"i":"n",font=this.config.value["font-family"].replace(/"/g,""),fontfield=this.d.fields[this.config.name+"-family"].config.typekitFonts[font]):(c=parseInt(c,10)/100,e="italic"==e?"i":"n",font=this.config.value["font-family"].replace(/"/g,""),fontfield=this.d.fields[this.config.name+"-family"].config.typekitkitFonts[font]),c=fontfield.variations.indexOf(e+c),webfontstyle=fontfield.variationNames[-1==c?0:c]),this.d.fields[this.config.name+"-webfontstyle"].setValue(webfontstyle)):
(this.d.fields[this.config.name+"-webfontstyle"].hide(!0),a&&0<a.length&&(this.isGoogleFont?webfontstyle=a[0]:(this.isTypekitkitFont?(font=this.config.value["font-family"].replace(/"/g,""),fontfield=this.d.fields[this.config.name+"-family"].config.typekitkitFonts[font]):(font=this.config.value["font-family"].replace(/"/g,""),fontfield=this.d.fields[this.config.name+"-family"].config.typekitFonts[font]),webfontstyle=fontfield.variationNames[0])),this.setWebfontstyle(webfontstyle,!0),webfontstyle=null)},
showWeightAndStyleFields:function(){var a=this.config.value["font-weight"],a="boolean"===typeof a?a:a=700<=parseInt(a,10),c=this.config.value["font-style"],c="boolean"===typeof c?c:c="italic"==c;this.config.value.webfontstyle=void 0;this.d.fields[this.config.name+"-webfontstyle"].hide(!0);var e=this.d.fields[this.config.name+"-style"];e&&(e.show(!0),e.setValue(c));if(c=this.d.fields[this.config.name+"-weight"])c.show(!0),c.setValue(a)},setWebfontstyle:function(a,c){var e=this.config.value["font-family"].replace(/"/g,
""),d=this.d.fields[this.config.name+"-family"],f,h;d.getStyles(e).length>(c?0:1)?(d.isGoogleFont(e)&&(3<a.length?(values=a.split(" "),this.webfontstyle={"font-weight":values[0],"font-style":values[1]}):this.webfontstyle={"font-weight":a,"font-style":"normal"}),d.isTypekitFont(e)&&(f=d.config.typekitFonts[e],h=f.variationNames.indexOf(a),this.webfontstyle={"font-weight":f.variations[h][1]+"00","font-style":"i"==f.variations[h][0]?"italic":"normal"}),d.isTypekitkitFont(e)&&(f=d.config.typekitkitFonts[e],
h=f.variationNames.indexOf(a),this.webfontstyle={"font-weight":f.variations[h][1]+"00","font-style":"i"==f.variations[h][0]?"italic":"normal"})):this.webfontstyle={"font-weight":"normal","font-style":"normal"}},onChange:function(b){var c=b.config.name.split("-"),e=c[c.length-1],d=b.getValue(),f;switch(e){case "family":e="font-family";break;case "fontsize":e="font-size";break;case "lineheight":e="line-height";break;case "weight":e="font-weight";break;case "style":e="font-style";break;case "texttransform":e=
"text-transform";break;case "textdecoration":e="text-decoration";break;case "letterspacing":e="letter-spacing";break;case "textalign":e="text-align"}this.config.value[e]=d;switch(e){case "font-family":this.isGoogleFont=b.isGoogleFont(d);this.isTypekitFont=b.isTypekitFont(d);this.isTypekitkitFont=b.isTypekitkitFont(d);!this.isGoogleFont&&!this.isTypekitFont&&!this.isTypekitkitFont?this.showWeightAndStyleFields():this.hideWeightAndStyleFields(b.getStyles(d));break;case "webfontstyle":this.d&&this.d.fields[this.config.name+
"-family"]&&(this.setWebfontstyle(d),this.config.value["font-weight"]=this.webfontstyle["font-weight"],this.config.value["font-style"]=this.webfontstyle["font-style"]);break;case "font-weight":case "font-style":this.config.value[e]="true"==d?!0:"false"==d?!1:d}this.initializing||(this.dialog.fire("datachange",this),f=this.config.name,this.dialog.fire("datachange",{getName:function(){return f+"-"+e},getType:function(){return"associatedVar"},getValue:function(){return d}}));a.Cookie.get("damask")||
(this.dialog.edited=!1)},setValue:function(b){"string"==typeof b&&(b=a.Squarespace.TweakManager.parseMixin(b));this.config.value=b;this.getValue()},getValue:function(){var b={},c,e;void 0!==this.config.value["font-family"]&&(b["font-family"]=this.config.value["font-family"]);void 0!==this.config.value["font-size"]&&(b["font-size"]=this.config.value["font-size"]);void 0!==this.config.value["line-height"]&&(b["line-height"]=this.config.value["line-height"]);void 0!==this.config.value["text-transform"]&&
(b["text-transform"]=this.config.value["text-transform"]);void 0!==this.config.value["text-decoration"]&&(b["text-decoration"]=this.config.value["text-decoration"]);void 0!==this.config.value["letter-spacing"]&&(b["letter-spacing"]=this.config.value["letter-spacing"]);void 0!==this.config.value["text-align"]&&(b["text-align"]=this.config.value["text-align"]);for(c in this.config.deprecatedValue)switch(c){case "font-family":case "font-size":case "line-height":case "text-transform":case "text-decoration":case "letter-spacing":case "text-align":b[c]=
this.config.deprecatedValue[c]}(this.isGoogleFont||this.isTypekitFont||this.isTypekitkitFont)&&this.webfontstyle?(b["font-weight"]=this.webfontstyle["font-weight"]||"normal",b["font-style"]=this.webfontstyle["font-style"]||"normal"):"boolean"!==typeof this.config.value["font-weight"]&&"boolean"!==typeof this.config.value["font-style"]?(b["font-weight"]=this.config.value["font-weight"],b["font-style"]=this.config.value["font-style"]):(void 0!==this.config.value["font-weight"]&&(b["font-weight"]=this.config.value["font-weight"]&&
"normal"!=this.config.value["font-weight"]?"bold":"normal"),void 0!==this.config.value["font-style"]&&(b["font-style"]=this.config.value["font-style"]&&"normal"!=this.config.value["font-style"]?"italic":"normal"));if(b["font-family"])for(var g=b["font-family"].split(","),f,h,k=function(){},l=0;l<g.length;l++){f=g[l].trim().replace(/"/g,"").replace(/'/g,"");h=this.win.Static.SQUARESPACE_CONTEXT.typekitFonts[f];notFound=!0;h&&(c=b["font-style"][0]+b["font-weight"][0],-1==h.variations.indexOf(c)&&(c=
h.variations[0]),this.config.loadAllVariants&&(e=[],e.push(c),"n"==c[0]&&-1!==h.variations.indexOf("i"+c[1])&&e.push("i"+c[1]),"n7"!==c&&"i7"!==c&&("n"==c[0]&&-1!==h.variations.indexOf("n7")&&e.push("n7"),-1!==h.variations.indexOf("i7")&&e.push("i7"))),a.Squarespace.TweakManager.addWebfont("typekit",h.familyName,this.config.loadAllVariants?e:[c]),SquarespaceFonts.loadTypekit(f,k,window),a.Cookie.get("damask")&&this.win.SquarespaceFonts.loadTypekit(f,k,window),notFound=!1);if(h=this.win.Static.SQUARESPACE_CONTEXT.googleFonts[f])this.config.loadAllVariants?
(e=[],e.push(b["font-weight"]+("normal"==b["font-style"]?"":b["font-style"])),"normal"==b["font-style"]&&e.push(b["font-weight"]+"italic"),"700"!==b["font-weight"]&&(e.push("700"+b["font-style"]),"normal"==b["font-style"]&&e.push("700italic"))):e=h.variations?h.includeName.split(":")[1]:[b["font-weight"]+("normal"==b["font-style"]?"":b["font-style"])],a.Squarespace.TweakManager.addWebfont("google",h.includeName.split(":")[0],e),SquarespaceFonts.load({googleFamilies:[h.includeName]},k,window),a.Cookie.get("damask")&&
this.win.SquarespaceFonts.load({googleFamilies:[h.includeName]},k,window),notFound=!1;notFound&&a.Object.hasKey(d,f)&&a.Squarespace.TweakManager.addWebfont("websafe",f)}return b},getAssociatedVars:function(){var a=[];void 0!==this.config.value["font-family"]&&a.push({name:this.config.name+"-font-family",value:this.config.value["font-family"]});void 0!==this.config.value["font-size"]&&a.push({name:this.config.name+"-font-size",value:this.config.value["font-size"]});void 0!==this.config.value["line-height"]&&
a.push({name:this.config.name+"-line-height",value:this.config.value["line-height"]});void 0!==this.config.value["text-transform"]&&a.push({name:this.config.name+"-text-transform",value:this.config.value["text-transform"]});void 0!==this.config.value["text-decoration"]&&a.push({name:this.config.name+"-text-decoration",value:this.config.value["text-decoration"]});void 0!==this.config.value["letter-spacing"]&&a.push({name:this.config.name+"-letter-spacing",value:this.config.value["letter-spacing"]});
void 0!==this.config.value["text-align"]&&a.push({name:this.config.name+"-text-align",value:this.config.value["text-align"]});this.isGoogleFont||this.isTypekitFont?(a.push({name:this.config.name+"-font-weight",value:this.webfontstyle?this.webfontstyle["font-weight"]:"normal"}),a.push({name:this.config.name+"-font-style",value:this.webfontstyle?this.webfontstyle["font-style"]:"normal"})):(void 0!==this.config.value["font-weight"]&&a.push({name:this.config.name+"-font-weight",value:this.config.value["font-weight"]&&
"normal"!=this.config.value["font-weight"]?"bold":"normal"}),void 0!==this.config.value["font-style"]&&a.push({name:this.config.name+"-font-style",value:this.config.value["font-style"]&&"normal"!=this.config.value["font-style"]?"italic":"normal"}));return a},getType:function(){return"font"},didDataChange:function(){var b=a.Squarespace.TweakManager.parseMixin(this.initialData[this.getName()]);return this.config.value["font-family"]!==b["font-family"]||this.config.value["font-size"]!==b["font-size"]||
this.config.value["line-height"]!==b["line-height"]||this.config.value["font-weight"]!==b["font-weight"]||this.config.value["font-style"]!==b["font-style"]||this.config.value["text-transform"]!==b["text-transform"]||this.config.value["text-decoration"]!==b["text-decoration"]||this.config.value["letter-spacing"]!==b["letter-spacing"]||this.config.value["text-align"]!==b["text-align"]?!0:!1}});a.Squarespace.DialogFieldGenerators.fontfamily=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,
c,e){this._super(b,c,e);this.Y=a.Squarespace.TweakManager.frontSiteYUI;this.win=this.Y.config.win;this.config.templateFonts=this.config.developerFonts?this.parseValues(this.config.developerFonts):{};this.config.googleFonts=this.win.Static.SQUARESPACE_CONTEXT.googleFonts;this.config.typekitFonts=this.win.Static.SQUARESPACE_CONTEXT.typekitFonts;this.config.typekitkitFonts=this.win.Static.SQUARESPACE_CONTEXT.typekitkitFonts;this.config.websafeFonts=d;this._getCurrentFonts();var g=a.merge(this.config.googleFonts,
this.config.typekitFonts,this.config.websafeFonts,this.config.typekitkitFonts,this.config.templateFonts),f={"Sans Serif":0,Serif:1,"Slab Serif":2,Display:3,Script:4,Mono:5,More:6},h=[[],[],[],[],[],[],[]],k=[];a.Object.each(g,function(b,c){a.Lang.isValue(b.type)||(b.type="More");var e=a.Object.getValue(f,b.type);a.Lang.isValue(e)&&h[e].push(b.normalName+"|"+c)},this);a.Array.each(this._currentFonts,function(b){b=a.Object.getValue(g,b);a.Lang.isValue(b)&&(b=a.clone(b),b.type="This Website",b.curated=
!0,k.push(b))});this.fonts=[k];a.Array.each(h,function(a){var b=0,c=a.length;for(a.sort();b<c;b+=1){var e=a,d=b,g=a[b].split("|");e[d]=g[1]}this.fonts.push(a)},this);this.config.value="";this.initialData[this.config.name]&&(this.config.value=a.clone(this.initialData[this.config.name],!0));this.listInner=a.DB.DIV("font-family-list-inner");this.list=a.DB.DIV("font-family-list",this.listInner);this.listContainer=a.DB.DIV("font-family-list-container",this.list,a.DB.DIV("powered-by",a.DB.DIV("typekit"),
a.DB.DIV("google")));this.options=[];this.config.label=this.config.label||this.config.title;this.listContainer.append(a.DB.INPUT("fontssearch",{type:"search",results:"5",autosave:"some_unique_value",placeholder:"Search Fonts"}));var l;for(b=0;b<this.fonts.length;b+=1){e="";var n=0;c=a.DB.DIV();for(var p=!1,q,t=0;t<this.fonts[b].length;t+=1){var r=this.fonts[b][t];if(a.Lang.isString(r))r=g[r];else if(!a.Lang.isObject(r))continue;if("google-deprecated"!=r.foundry){n++;if(""===e||e!==r.type)e=r.type;
q=r.familyName.toLowerCase().replace(/ /g,"-");q="typekit"!=r.foundry?a.DB.DIV("option "+r.foundry.toLowerCase()+"font "+q.replace(/\W/g,""),a.DB.DIV("preview",{html:r.normalName}).setStyle("fontFamily",r.familyName)).setAttribute("fontname",q):a.DB.DIV("option typekitfont "+q.replace(/\W/g,""),{html:r.normalName}).setAttribute("fontname",r.normalName);this.options.push(q);q.setData("info",r);c.append(q);r.curated&&q.addClass("curated");if((this.config.value==r.familyName||this.config.value.replace(/"/g,
"")==r.familyName)&&!1===p)l=r.familyName.split(",")[0],l=l.replace(/'/g,""),this.win.Static.SQUARESPACE_CONTEXT.typekitFonts[l.replace(/"/g,"")]&&(l=this.win.Static.SQUARESPACE_CONTEXT.typekitFonts[l.replace(/"/g,"")].normalName),this.win.Static.SQUARESPACE_CONTEXT.typekitkitFonts[l.replace(/"/g,"")]&&(l=this.win.Static.SQUARESPACE_CONTEXT.typekitkitFonts[l.replace(/"/g,"")].normalName),this.win.Static.SQUARESPACE_CONTEXT.googleFonts[l]&&(l=this.win.Static.SQUARESPACE_CONTEXT.googleFonts[l].normalName),
q.addClass("selected"),p=!0}}0!==n&&(n=e.toLowerCase().replace(/\W/g,"")+"-fonts",e=a.DB.DIV(n+"-title font-list-title",{html:e}),this.listInner.append(a.DB.DIV(n+" font-list",e,c)))}this.html=a.DB.DIV("field-wrapper tweak-field fontfamily-field-wrapper clear "+this.config.size,a.DB.DIV("field-wrapper-inner clear",this.config.label?a.DB.DIV("field-title",{html:this.config.label}):null,a.DB.DIV("current",{html:l})),this.config.description?a.DB.DIV("field-description-wrapper",a.DB.DIV("field-description",
{html:this.config.description})):null);this.html.one(".current").setStyle("fontFamily",this.config.value);this.overlay=a.DB.DIV("dialog-screen-overlay");this.events=[];this.events.push(a.on("click",this.openList,this.html,this));this.list.all(".option").each(function(b){this.events.push(a.on("click",this.onClick,b,this,!0))},this);this.events.push(this.dialog.on("hide",this.onHide,this));this.events.push(this.dialog.on("drag",this.onHide,this));a.Cookie.get("damask")&&this.events.push(this.dialog.bodyEl.on("clickoutside",
this.close,this))},_getCurrentFonts:function(){this._currentFonts=[];a.Squarespace.TweakManager.dialog.getData();var b=a.Squarespace.TweakManager.getWebtfontsList("google"),c=a.Squarespace.TweakManager.getWebtfontsList("typekit"),e=a.Squarespace.TweakManager.getWebtfontsList("websafe");a.Array.each(b,function(a){this._currentFonts.push(a.split(":")[0].replace(/\+/g," "))},this);a.Array.each(c,function(a){this._currentFonts.push(a.cssName)},this);this._currentFonts=this._currentFonts.concat(e)},isGoogleFont:function(a){a=
a.split(",")[0].replace(/"/g,"").replace(/'/g,"");return"undefined"!=typeof this.config.googleFonts[a]?!0:!1},isTypekitFont:function(a){a=a.split(",")[0].replace(/"/g,"").replace(/'/g,"");return"undefined"!=typeof this.config.typekitFonts[a]?!0:!1},isTypekitkitFont:function(a){a=a.split(",")[0].replace(/"/g,"").replace(/'/g,"");return"undefined"!=typeof this.config.typekitkitFonts[a]?!0:!1},isWebsafeFont:function(a){var c=0,e=this.config.websafeFonts;for(c in e)if(e.hasOwnProperty(c)&&a==e[c].normalName)return!0;
return!1},getStyles:function(a){var c=[],e;a=a.split(",")[0].replace(/"/g,"").replace(/'/g,"");if(this.isGoogleFont(a)&&(e=this.config.googleFonts[a].includeName))if(e=e.split(":"),1<e.length){c=e[1].split(",");for(e=0;e<c.length;e++)3<c[e].length&&(c[e]=c[e].substring(0,3)+" "+c[e].substring(3))}this.isTypekitFont(a)&&(c=this.config.typekitFonts[a].variationNames);this.isTypekitkitFont(a)&&(c=this.config.typekitkitFonts[a].variationNames);return c},parseValues:function(a){for(var c={},e=0;e<a.length;e++){var d=
a[e].split(",")[0].split('"').join("").split("'").join("");c[d]={familyName:a[e],foundry:"Template",normalName:d}}return c},openList:function(b){function c(){e.fontloadertimer&&window.clearTimeout(e.fontloadertimer);e.fontloadertimer=window.setTimeout(function(){e.dynamiclyLoadGoogleFonts();e.dynamiclyLoadTypekitFonts()},200)}b.halt();a.Lang.isValue(a.Squarespace.TweakManager.overlayManager)&&a.Squarespace.TweakManager.overlayManager.disable();this.listContainer.setStyles({zIndex:a.Squarespace.DIALOG_ZINDEX_BASE+
10});this.list.plug(a.Squarespace.ScrollLock);this.listInner.setStyle("top",0);a.one("body").append(this.listContainer);this.overlay.setStyles({zIndex:a.Squarespace.DIALOG_ZINDEX_BASE+9,opacity:1});a.one("body").append(this.overlay);this.searchClickEvent=a.one(".fontssearch").on("click",this.onSearchClick,this);this.searchEvent=a.one(".fontssearch").on("keyup",this.onSearch,this);var e=this;this.mousewheelEvent=this.list.getDOMNode().addEventListener("mousewheel",c);this.scrollEvent=this.list.getDOMNode().addEventListener("scroll",
c);this.keyEvent=a.on("keydown",this.onKeydown,window,this);a.all(".fontssearch").set("value","");this.adjustList(!0);this.dynamiclyLoadGoogleFonts();this.dynamiclyLoadTypekitFonts();a.Squarespace.EscManager.addTarget(this)},adjustList:function(b){this.distanceFromWindowFrame=5;a.one(window).get("innerHeight");parseInt(this.listInner.getComputedStyle("height"),10);b=this.html.getXY()[1];this.html.getXY();b+=this.offset;this.list.setStyles({top:b<this.distanceFromWindowFrame?this.distanceFromWindowFrame:
b})},mousewheel:function(a){a.halt();this.scrollList(10*a.wheelDelta)},scrollList:function(a){parseInt(this.list.getComputedStyle("height"),10);var c=parseInt(this.listInner.getComputedStyle("height"),10),e=window.innerHeight,d=parseInt(this.list.getStyle("top"),10)+this.offset+a,f=parseInt(this.listInner.getStyle("top"),10),h=c+f;0<d?this.html.getXY()[1]>d&&this.list.setStyle("top",d):(this.list.setStyle("top",0),1>a&&h<=e-this.distanceFromWindowFrame?this.listInner.setStyle("top",-(c-e)-this.distanceFromWindowFrame):
1<a&&f>=this.distanceFromWindowFrame?this.listInner.setStyle("top",this.distanceFromWindowFrame):this.listInner.setStyle("top",f+a))},overOutHandler:function(b){"mouseover"===b.type&&b.currentTarget.hasClass("upbutton")?this.scrollTimer=a.later(250,this,this.scrollList,120,!0):"mouseover"===b.type&&b.currentTarget.hasClass("downbutton")&&(this.scrollTimer=a.later(250,this,this.scrollList,-120,!0));"mouseout"===b.type&&this.scrollTimer.cancel()},close:function(){a.Lang.isValue(a.Squarespace.TweakManager.overlayManager)&&
a.Squarespace.TweakManager.overlayManager.enable();this.overlay&&this.overlay.remove();this.listContainer&&this.listContainer.remove();this.mousewheelEvent&&this.mousewheelEvent.detach();this.scrollEvent&&this.scrollEvent.detach();this.keyEvent&&this.keyEvent.detach();this.resizeEvent&&this.resizeEvent.detach();this.searchClickEvent&&this.searchClickEvent.detach();this.searchEvent&&this.searchEvent.detach()},onHide:function(){this.close()},onClick:function(b){b.halt();this.select(a.one(b.target))},
onSearchClick:function(a){a.halt()},onSearch:function(a){var c=this.list.all(".option");""!==a.target.get("value")?c.each(function(c){c.removeClass("matched");c.removeClass("unmatched");var d=a.target.get("value").toLowerCase();-1<c.get("textContent").toLowerCase().indexOf(d)?c.addClass("matched"):c.addClass("unmatched")}):(c.removeClass("matched"),c.removeClass("unmatched"));this.list.all(".font-list").each(function(a){var b=a.all(".option");b.size()===b.filter(".unmatched").size()?a.addClass("hidden"):
a.removeClass("hidden")});this.dynamiclyLoadGoogleFonts();this.dynamiclyLoadTypekitFonts()},_updateCurrent:function(a){var c=this.html.one(".current");c.setContent(a.normalName);c.setStyle("font-family",this.getValue());this.isTypekitFont(a.familyName)?c.setStyles({"background-image":"url(/universal/images-v6/fontpreviews/typekit/font_"+a.fontID+".png)","background-repeat":"no-repeat","background-position":"-20px -4px",color:"transparent"}):c.setStyles({"background-image":null,"background-repeat":null,
"background-position":null,color:null})},select:function(b){var c;b.hasClass("option")?c=b:b.ancestor().hasClass("option")&&(c=b.ancestor());if(c){this.list.all(".selected").removeClass("selected");c.addClass("selected");b=c.getData("info");this.config.value=b.familyName;this._updateCurrent(b);c.getXY()[1]+parseInt(c.getComputedStyle("height"),10)>window.innerHeight+this.listContainer.getXY()[1]-300?c.scrollIntoView():c.getXY()[1]<this.list.getXY()[1]&&c.scrollIntoView(!0);var e=this;c=function(){e.dialog.fire("datachange",
e);a.Cookie.get("damask")||(e.dialog.edited=!1)};this.isTypekitFont(b.familyName)?(SquarespaceFonts.loadTypekit(b.familyName,c,window),a.Cookie.get("damask")&&this.win.SquarespaceFonts.loadTypekit(b.familyName,c,window)):c()}},onKeydown:function(a){for(var c,e=0;e<this.options.length;e++)this.options[e].hasClass("selected")&&(c=e);(40===a.charCode||38===a.charCode||13===a.charCode)&&a.halt();if(40===a.charCode&&c+1<this.options.length){e=1;for(a=this.options[c+e];"none"===a.getStyle("display");)if(c+
e<this.options.length-1)e+=1,a=this.options[c+e];else{a=this.options[c];break}this.select(a)}else if(38===a.charCode&&0<=c-1){e=1;for(a=this.options[c-e];"none"===a.getStyle("display");)if(0<c-e)e+=1,a=this.options[c-e];else{a=this.options[c];break}this.select(a)}else 13===a.charCode&&this.close(a)},dynamiclyLoadGoogleFonts:function(){this.fontloadertimer=null;for(var b=[],c=this.list.all(".option.googlefont")._nodes,e=0,d=20,f;d&&e<c.length;)f=a.one(c[e]),f.getXY()[1]+parseInt(f.getComputedStyle("height"),
10)<window.innerHeight+this.listContainer.getXY()[1]-300&&f.getXY()[1]>this.list.getXY()[1]&&b.push(f.getData("info").includeName),f.getXY()[1]+parseInt(f.getComputedStyle("height"),10)>window.innerHeight+this.listContainer.getXY()[1]-300&&(b.push(f.getData("info").includeName),d--),e++;0<b.length&&(SquarespaceFonts.load({googleFamilies:b},function(){},window),a.Cookie.get("damask")&&this.win.SquarespaceFonts.load({googleFamilies:b},function(){},window))},dynamiclyLoadTypekitFonts:function(){this.fontloadertimer=
null;for(var b=this.list.all(".option.typekitfont")._nodes,c=0,e=20,d;e&&c<b.length;)d=a.one(b[c]),d.getXY()[1]+parseInt(d.getComputedStyle("height"),10)<window.innerHeight+this.listContainer.getXY()[1]-300&&d.getXY()[1]>this.list.getXY()[1]&&(d.hasClass("loaded")||d.setStyles({backgroundImage:"url(/universal/images-v6/fontpreviews/typekit/font_"+d.getData("info").fontID+".png)"}).addClass("loaded")),d.getXY()[1]+parseInt(d.getComputedStyle("height"),10)>window.innerHeight+this.listContainer.getXY()[1]-
300&&(d.hasClass("loaded")||d.setStyles({backgroundImage:"url(/universal/images-v6/fontpreviews/typekit/font_"+d.getData("info").fontID+".png)"}).addClass("loaded"),e--),c++},setValue:function(b){this.config.value=b.split(",")[0].replace(/"/g,"").replace(/'/g,"");for(var c=0;c<this.options.length;c++)if(this.options[c].getData().info.normalName==this.config.value||this.options[c].getData().info.familyName==this.config.value||a.Squarespace.Utils.slugify(this.options[c].getData().info.normalName)==
this.config.value){this.select(this.options[c]);return}c=a.DB.DIV("option "+this.config.value,a.DB.DIV("preview",{html:this.config.value}).setStyle("fontFamily",b));this.options.push(c);c.setData("info",{familyName:b,normalName:this.config.value});this.listInner.prepend(a.DB.DIV("Custom-fonts",a.DB.DIV("title",{html:"Custom Fonts"}),[c]));this.events.push(a.on("click",this.onClick,c,this,!0));this.select(c)},reset:function(){this.initialData=this.dialog.getInitialData();this.config.value=a.clone(this.initialData[this.config.name],
!0);var b=this.options[0].getData("info");b.familyName==this.config.value&&(this.html.one(".current").setContent(b.normalName).setStyle("fontFamily",b.familyName),this.dialog.fire("datachange",this),this.dialog.edited=!1)},getValue:function(){var a=this.config.value;vals=a.split(",");for(a=0;a<vals.length;a++)vals[a]=vals[a].trim().replace("'","").replace('"',"").replace("'","").replace('"',""),vals[a]='"'+vals[a]+'"';return a=vals.join(",")},getType:function(){return"fontfamily"}});a.Squarespace.DialogFieldGenerators.input=
Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.input=a.DB.INPUT();this.colors=a.Squarespace.Colors;this.config.value=1!=c.alp?"rgb("+c.red+","+c.gre+","+c.blu+","+c.alp+")":c.hex;this.html=a.DB.DIV("field-wrapper tweak-field input-field-wrapper clear "+this.config.size,a.DB.DIV("field-wrapper-inner clear",this.config.label?a.DB.DIV("field-title",{html:this.config.label}):null,this.input));this.input.on("keyup",this.updateValue,this);this.reset()},updateValue:function(b){b=
b.currentTarget.get("value").replace(/ /g,"");a.Squarespace.Colors.getType(b)&&b!=this.config.value&&(this.input.set("value",b),this.config.value=b,this.dialog.fire("datachange",this))},setValue:function(a){this.input.get("value")!==a&&(this.config.value=a,this.input.set("value",this.config.value))},getValue:function(){return this.config.value},getType:function(){return"input"},reset:function(){this.initialData=this.dialog.getInitialData();this.config.value=this.initialData[this.config.name]}});a.Squarespace.DialogFieldGenerators.paletteinput=
Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.input=a.DB.INPUT();this.colors=a.Squarespace.Colors;this.config.value=c.hex;this.html=a.DB.DIV("field-wrapper tweak-field input-field-wrapper clear "+this.config.size,a.DB.DIV("field-wrapper-inner clear",this.config.label?a.DB.DIV("field-title",{html:this.config.label}):null,this.input));this.input.on("keyup",this.updateValue,this);this.setValue(this.config.value)},updateValue:function(a){a=a.currentTarget.get("value");
!(7>a.length)&&a!=this.config.value&&(this.config.value=a,this.dialog.fire("datachange",this))},setValue:function(a){this.input.get("value")!==a&&(this.config.value=a,this.input.set("value",this.config.value))},getValue:function(){return this.config.value},getType:function(){return"paletteinput"},reset:function(){this.initialData=this.dialog.getInitialData();this.config.value=this.initialData[this.config.name]}});a.Squarespace.DialogFieldGenerators.paletteset=Class.extend(a.Squarespace.TweakDialogField,
{initialize:function(b,c,e){this._super(b,c,e);this.config.value=this.config.value||c[this.getName()];this.html=a.DB.DIV("field-wrapper tweak-field paletteset-field-wrapper clear ",a.DB.DIV("field-wrapper-inner clear",a.DB.DIV("paletteitem paletteitem1"),a.DB.DIV("paletteitem paletteitem2"),a.DB.DIV("paletteitem paletteitem3"),a.DB.DIV("paletteitem paletteitem4"),a.DB.DIV("paletteitem paletteitem5"),a.DB.DIV("palettesetbutton rotate"),a.DB.DIV("nopalettemsg hidden","No palettes. Select again.")));
a.on("click",this.rotate,this.html.one(".rotate"),this)},rotate:function(){this.dialog.fire("rotate")},setValue:function(a){if(a){this.html.one(".nopalettemsg").addClass("hidden");this.config.value=a;for(a=0;a<this.config.value.length;a++)this.html.one(".paletteitem"+(a+1)).setStyle("backgroundColor",this.config.value[a])}else this.config.value=a,this.html.one(".nopalettemsg").removeClass("hidden")},getValue:function(){return this.config.value},getType:function(){return"paletteset"},reset:function(){}});
a.Squarespace.DialogFieldGenerators.palettesetview=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.config.value=c[this.getName()];this.html=a.DB.DIV("field-wrapper tweak-field paletteset-field-wrapper clear ",a.DB.DIV("field-wrapper-inner clear",a.DB.DIV("paletteitem paletteitem1"),a.DB.DIV("paletteitem paletteitem2"),a.DB.DIV("paletteitem paletteitem3"),a.DB.DIV("paletteitem paletteitem4"),a.DB.DIV("paletteitem paletteitem5")));a.on("click",this.setColor,
this.html.all(".paletteitem"),this)},setColor:function(a){this.selected=a.target.getStyle("backgroundColor");this.dialog.fire("paletteitemclick")},getSelected:function(){return this.selected},setValue:function(a){this.config.value=a;for(a=0;a<this.config.value.length;a++)this.html.one(".paletteitem"+(a+1)).setStyle("backgroundColor",this.config.value[a])},getValue:function(){return this.config.value},getType:function(){return"paletteset"},reset:function(){}});a.Squarespace.DialogFieldGenerators.palettebuttons=
Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.html=a.DB.DIV("field-wrapper tweak-field palettebuttons-field-wrapper clear ",a.DB.DIV("palettebutton button-block",a.DB.INPUT("slap",{type:"button",value:"Slap!"})),a.DB.DIV("palettebutton button-block",a.DB.INPUT("save",{type:"button",value:"Save"})));a.on("click",this.slap,this.html.one(".slap"),this);a.on("click",this.savepalette,this.html.one(".save"),this)},slap:function(a){a.shiftKey?this.dialog.fire("shiftslap"):
this.dialog.fire("slap")},savepalette:function(){this.dialog.fire("savepalette")},getType:function(){return"palettebuttons"}});a.Squarespace.DialogFieldGenerators.color=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.colors=a.Squarespace.Colors;this.config.label=this.config.label||this.config.title;this.html=a.DB.DIV("field-wrapper color-field-wrapper tweak-field",a.DB.DIV("field-wrapper-inner clear",this.config.label?a.DB.DIV("field-title",{html:this.config.label}):
null,a.DB.DIV("picker")),this.config.description?a.DB.DIV("field-description-wrapper",a.DB.DIV("field-description",{html:this.config.description})):null);this.html.addClass("titleStyle-"+this.config.titleStyle+" size-"+(this.config.size?this.config.size:"default"));this.events=[];this.events.push(this.dialog.on("ready",this.setupDialog,this));this.events.push(this.dialog.on("colorChange",this.userUpdateColor,this));this.initialData=this.dialog.getInitialData();this.config.value=this.initialData[this.config.name]?
this.initialData[this.config.name]:"rgb(255,255,255)";"string"!=typeof this.config.value&&(this.config.value="rgb(255,255,255)");this.updateColor()},setupDialog:function(){this.autocorrect();var b=this.config.value,c,e,d;if(a.Squarespace.TweakManager.dialog.fields.palette){c=344;for(e in a.Squarespace.TweakManager.dialog.fields.palette.fields)d=a.Squarespace.TweakManager.dialog.fields.palette.fields[e].getPalette();e=[{fields:[{type:"supercolorwheel",name:"wheel"},{type:"value",name:"alp",label:"A",
factor:3,min:0,max:1,step:0.1,disabled:!0},{type:"input",name:"hex",label:"#"},{type:"palettesetview",name:"palette"},{type:"checkbox",name:"transparent",title:"Transparent"}]}];b={wheel:this.c,alp:this.colors.getA(b),hex:this.colors.toHex(b),palette:d,transparent:"0"==this.colors.getA(b)?!0:!1}}else c=313,e=[{fields:[{type:"supercolorwheel",name:"wheel"},{type:"value",name:"alp",label:"A",factor:3,min:0,max:1,step:0.1,disabled:!0},{type:"input",name:"hex",label:"#"},{type:"checkbox",name:"transparent",
title:"Transparent"}]}],b={wheel:this.c,alp:this.colors.getA(b),hex:this.colors.toHex(b),transparent:"0"==this.colors.getA(b)?!0:!1};this.d=new a.Squarespace.EditingDialog({loadingText:"Loading Asset...",loadingState:!1,style:"flyout squarespace-tweak-child-dialog",colorScheme:"dropdown colorpicker",flyoutPointerDirection:"top",parentDialog:this.dialog,forcePosition:"fixed",width:200,height:c,closeOthers:!1,overlay:!0,doNotDisableBodyScroll:!0,dontSetWidthOnFields:!0,primaryTabs:e,initialData:b});
try{a.Global.on("slap:change",this.updatePalette,this)}catch(f){console.error("Error in a listener to the event: slap:change",f.toString())}this.events.push(this.d.on("ready",this.adjustSliders,this));this.events.push(this.d.on("datachange",this.change,this));this.events.push(this.d.on("paletteitemclick",this.paletteitemclick,this));this.events.push(a.Squarespace.TweakManager.dialog.el.on("scroll",function(){this.d.close()},this));this.events.push(this.html.on("click",function(b){b.halt();this.d.isVisible()?
this.d.close():(b=this.html.getY()-(a.one("body").get("scrollTop")||a.one("html").get("scrollTop"))+30,this.d.params.parentDialog=this.dialog,b+c-20>window.innerHeight?this.d.show({anchor:this.html,top:b-c-31-10,flyoutPointerDirection:"bottom"}):this.d.show({anchor:this.html,top:b,flyoutPointerDirection:"top"}))},this))},paletteitemclick:function(){this.setValue(this.d.fields.palette.getSelected());this.adjustSliders()},updatePalette:function(){if(this.d.fields.palette){for(var b in a.Squarespace.TweakManager.dialog.fields.palette.fields)paletteValue=
a.Squarespace.TweakManager.dialog.fields.palette.fields[b].getPalette();this.d.fields.palette.setValue(paletteValue)}},close:function(){this.d.isVisible()&&this.d.close()},reset:function(){this.initialData=this.dialog.getInitialData();this.config.value=this.initialData[this.config.name]?this.initialData[this.config.name]:"rgb(255,255,255)";this.autocorrect();this.updateColor();this.dialog.fire("datachange",this)},setValue:function(a){this.config.value=a;this.autocorrect();this.updateColor();this.dialog.fire("datachange",
this)},autocorrect:function(b){this.config.value="transparent"==this.config.value?"rgba(0,0,0,0)":a.Lang.trim(this.config.value);this.config.value.replace(/NaN/g,"1");switch(a.Squarespace.Colors.getType(this.config.value)){case !1:a.Squarespace.Colors.getType("#"+this.config.value)?this.config.value="#"+this.config.value:b||(console.warn("Invalid color detected for "+this.config.name+". Reset to #000000"),this.config.value="#000000");break;case "rgb":this.config.value=this.config.value.replace("rgba",
"rgb");break;case "hsl":this.config.value=this.config.value.replace("hsla","hsl")}},getValue:function(){return this.colors.toRgba(this.config.value)},getType:function(){return"color"},change:function(a){var c=a.config.name,e=a.getValue(),d=this.config.value;switch(c){case "wheel":this.config.value=e;break;case "alp":this.config.value="rgba("+this.colors.getR(d)+","+this.colors.getG(d)+","+this.colors.getB(d)+","+e+")";break;case "hex":this.config.value=e;break;case "transparent":this.config.value=
"rgba("+this.colors.getR(d)+","+this.colors.getG(d)+","+this.colors.getB(d)+","+(!0===e||"true"===e?"0":"1")+")"}this.autocorrect(!0);this.adjustSliders(a);this.updateColor();this.dialog.fire("datachange",this)},adjustSliders:function(a){var c=this.d.fields,e=this.config.value;(!a||"wheel"!=a.config.name)&&c.wheel.setValue(this.config.value);try{c.alp.setValue(this.colors.getA(e)),c.transparent.setValue("0"==this.colors.getA(e)?!0:!1)}catch(d){}if(!a||a&&a.config.name&&"hex"!==a.config.name)c.hex&&
c.hex.setValue(1!=this.colors.getA(e)?e:this.colors.toHex(e));this.updatePalette()},userUpdateColor:function(b,c){this.updateColor(b,c);this.dialog.fire("datachange",this);a.Cookie.get("damask")||(this.dialog.edited=!1)},updateColor:function(a,c){var e=this.html.one(".picker");if(!(void 0!==a&&a.config.name!=this.config.name)){void 0!==c&&(this.config.value=c);this.colors.getType(this.config.value)||(this.config.value=this.initialData[this.config.name]);var d;try{this.colors.getH(this.config.value),
this.colors.getS(this.config.value),d=this.colors.getL(this.config.value)}catch(f){console.warn("Invalid color code detected for "+this.config.name+". Setting it to #000000"),this.config.value="#000000",this.colors.getH(this.config.value),this.colors.getS(this.config.value),d=this.colors.getL(this.config.value)}d=Math.round(5*((100-d)/100))/100;e.setStyles({backgroundColor:this.colors.toRgba(this.config.value),borderColor:"rgba(255,255,255,"+d+")"})}}});a.Squarespace.DialogFieldGenerators.colorwheel=
Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.config.value=c[this.config.name];this.config.label=this.config.label||this.config.title;this.htmlw=this.htmlh=183;this.r=this.htmlw/2;this.colors=a.Squarespace.Colors;this.wheel=a.DB.DIV("wheel",a.DB.DIV("loupe"),a.DB.DIV("wheeldesat"),a.DB.DIV("wheelsat"),a.DB.DIV("marker"));this.html=a.DB.DIV("field-wrapper tweak-field colorwheel-field-wrapper titleStyle-"+this.config.titleStyle,this.config.label?a.DB.DIV("field-title ",
{html:this.config.label}):null,a.DB.DIV("field-wrapper-inner clear "+(this.config.slider?" hasslider ":" noslider ")+(!this.config.label?" nolabel":" label"),{style:"position: relative;"},this.wheel),this.config.description?a.DB.DIV("field-description-wrapper",a.DB.DIV("field-description",{html:this.config.description})):null);a.on("click",this.onClick,this.html,this);this.wheel.on("sscolorpicker|mousedown",this.onMouseDown,this);a.one(window).on("sscolorpicker|mouseup",this.onMouseUp,this);a.one(window).on("sscolorpicker|mousemove",
this.onMouseMove,this);this.updateWheel()},getValue:function(){return this.config.value},getType:function(){return"colorwheel"},setValue:function(a){this.config.value=a;this.updateWheel()},reset:function(){this.initialData=this.dialog.getInitialData();this.config.value=this.initialData[this.config.name]},onMouseDown:function(a){a.halt();this.wheeltracking=!0;this.onClick(a)},onMouseMove:function(a){if(this.wheeltracking)this.onClick(a)},onMouseUp:function(a){a.halt();this.wheeltracking=!1;this.satStart=
void 0},onClick:function(b){b.halt();var c=b.pageX-this.wheel.getXY()[0];b=b.pageY-this.wheel.getXY()[1];var e=this.wheelToHsl(c,b),d=this.htmlw/2-7,f=this.htmlw/2+7;c>d&&(c<f&&b>d&&b<f)&&(e.l=100);this.config.value="hsl("+e.h+","+e.s+"%,"+e.l+"%)";this.dialog.fire("datachange",this);a.Cookie.get("damask")||(this.dialog.edited=!1);this.update()},update:function(){var a=this.config.color;this.html.one(".loupe").setStyle("backgroundColor",a);void 0!==this.satStart||this.colors.getS(a);this.updateWheel();
this.config.color=this.colors.toRgba(this.config.color)},updateWheel:function(){var a=this.config.value,c=this.colors.getH(a),e=this.colors.getS(a),d=this.fixL(this.colors.getL(a)),a=180-c-90,d=d*this.r/100/Math.sin(this.degToRad(90)),c=d*Math.sin(this.degToRad(c)),a=d*Math.sin(this.degToRad(a)),a=Math.abs(this.r-a),c=Math.abs(this.r-c);this.setWheel(a,c);this.wheel.one(".wheelsat").setStyle("opacity",e/100)},wheelToHsl:function(a,c){var e=this.htmlw,d,f=Math.max(Math.min(Math.abs(this.r-a),e),0),
h=Math.abs(this.r-c),e=a===this.r?Math.abs(c<this.r?this.r-c:c-this.r):Math.sqrt(f*f+h*h),f=a===this.r?90:this.solveAngle(f,e,h),f=Math.round(10*f)/10;a<this.r&&c<this.r?d=f:a>=this.r&&c<this.r?d=90-f+90:a>=this.r&&c>=this.r?d=f+180:a<this.r&&c>=this.r&&(d=90-f+270);return{h:Math.round(d),s:parseInt(this.colors.getS(this.config.value),10),l:Math.round(100-(e>this.r?this.r:e)*(100/this.r))}},setWheel:function(a,c){this.wheel.one(".marker").setStyles({left:a,top:c})},fixL:function(a){return Math.abs(100-
parseInt(a,10))},solveAngle:function(a,c,e){return 180*(Math.acos((a*a+c*c-e*e)/(2*a*c))/Math.PI)},solveSide:function(a,c,e){return Math.sqrt(a*a+c*c-2*a*c*Math.cos(this.degToRad(e)))},degToRad:function(a){return a/180*Math.PI},radToDeg:function(a){return 180*(a/Math.PI)}});a.Squarespace.DialogFieldGenerators.supercolorwheel=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.config.value=c[this.config.name];this.colors=a.Squarespace.Colors;this.config.label=
this.config.label||this.config.title;var d=a.DB.DIV("field-wrapper-inner clear "+(this.config.slider?" hasslider ":" noslider ")+(!this.config.label?" nolabel":" label"),{style:"position: relative;"});this.html=a.DB.DIV("field-wrapper tweak-field supercolorwheel colorwheel-field-wrapper titleStyle-"+this.config.titleStyle,d);this.dialog.once("ready",function(){var b=parseInt(this.dialog.el.getComputedStyle("width"),10)-30;d.setStyle("height",b);this.ct=new ColorTriangle(this.colors.to(this.config.value,
"hex"),{size:b,padding:0});this.ct.inject(d);this.ct.addEventListener("dragstart",a.Squarespace.TweakManager.overlayManager.disable,a.Squarespace.TweakManager.overlayManager);this.ct.addEventListener("drag",function(){var a,b,c;"triangle"===this.ct.down?(b=this.ct.getHSL(),a=this.colors.getH(this.config.value),c=Math.round(100*b[1]),b=Math.round(100*b[2]),a="hsl("+a+","+c+"%,"+b+"%)"):"wheel"===this.ct.down&&(a=this.ct.getCSS());this.config.value="hsla("+a.split(")")[0].split("(")[1]+","+this.colors.getA(this.config.value)+
")";this.dontSet=!0;this.dialog.fire("datachange",this)},this);this.ct.addEventListener("dragend",function(){this.dialog.fire("datachange",this)},this);this.ct.addEventListener("dragend",a.Squarespace.TweakManager.overlayManager.enable,a.Squarespace.TweakManager.overlayManager)},this)},getValue:function(){return this.config.value},getType:function(){return"colorwheel"},setValue:function(a){this.config.value=a;var c=this.colors.getType(a);this.ct&&(!1!==c&&"transparent"!=c&&"none"!=c&&"hsv"!=c&&"hsva"!=
c&&!0!==this.dontSet)&&this.ct.setHEX(this.colors.toHex(a));this.dontSet=!1},destroy:function(){this.ct&&this.ct.dispose()},reset:function(){this.initialData=this.dialog.getInitialData();this.config.value=this.initialData[this.config.name]}});a.Squarespace.DialogFieldGenerators.palettesupercolorwheel=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.config.value=c[this.config.name];this.colors=a.Squarespace.Colors;this.config.label=this.config.label||
this.config.title;var d=a.DB.DIV("field-wrapper-inner clear "+(this.config.slider?" hasslider ":" noslider ")+(!this.config.label?" nolabel":" label"),{style:"position: relative;"});this.html=a.DB.DIV("field-wrapper tweak-field supercolorwheel colorwheel-field-wrapper titleStyle-"+this.config.titleStyle,d);this.dialog.once("ready",function(){var b=parseInt(this.dialog.el.getComputedStyle("width"),10)-30;d.setStyle("height",b);this.ct=new ColorTriangle(this.colors.to(this.config.value,"hex"),{size:b,
padding:0});this.ct.inject(d);this.ct.addEventListener("dragstart",a.Squarespace.TweakManager.overlayManager.disable,a.Squarespace.TweakManager.overlayManager);this.ct.addEventListener("drag",function(){var a,b,c;"triangle"===this.ct.down?(b=this.ct.getHSL(),a=this.colors.getH(this.config.value),c=Math.round(100*b[1]),b=Math.round(100*b[2]),a="hsl("+a+","+c+"%,"+b+"%)"):"wheel"===this.ct.down&&(a=this.ct.getCSS());this.config.value="hsla("+a.split(")")[0].split("(")[1]+","+this.colors.getA(this.config.value)+
")";this.dontSet=!0},this);this.ct.addEventListener("dragend",function(){this.dialog.fire("datachange",this)},this);this.ct.addEventListener("dragend",a.Squarespace.TweakManager.overlayManager.enable,a.Squarespace.TweakManager.overlayManager)},this)},getValue:function(){return this.config.value},getType:function(){return"palettesupercolorwheel"},setValue:function(a){this.config.value=a;var c=this.colors.getType(a);this.ct&&(!1!==c&&"transparent"!=c&&"none"!=c&&"hsv"!=c&&"hsva"!=c&&!0!==this.dontSet)&&
this.ct.setHEX(this.colors.toHex(a));this.dontSet=!1},destroy:function(){this.ct&&this.ct.dispose()},reset:function(){this.initialData=this.dialog.getInitialData();this.config.value=this.initialData[this.config.name]}});a.Squarespace.DialogFieldGenerators.value=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this.initializing=!0;this._super(b,c,e);this.config.factor=void 0!==this.config.factor?this.config.factor:4;this.config.step=this.config.step?parseFloat(this.config.step):
1;this.config.min=void 0!==this.config.min?parseFloat(this.config.min):void 0;this.config.max=void 0!==this.config.max?parseFloat(this.config.max):void 0;this.config.slider=void 0!==this.config.min&&void 0!==this.config.max?!0:!1;this.config.label=this.config.label||this.config.title;this.label=a.DB.LABEL(this.config.name+" field-title",{html:this.config.label});this.input=this.config.disabled?a.DB.INPUT("input-for-"+this.config.name,{spellcheck:"false",disabled:"true"}):a.DB.INPUT({spellcheck:"false"});
this.dragger=a.DB.DIV("dragger");this.dds=[];this.events=[];b=new a.DD.Drag({node:this.dragger});b.on("drag:start",this.onDragStart,this);b.on("drag:drag",this.onDragDrag,this);b.on("drag:end",this.onDragEnd,this);this.dds.push(b);a.on("click",this.focus,this.dragger,this);a.on("blur",this.blur,this.input,this);this.config.slider?(this.handle=a.DB.DIV("handle"),this.slider=a.DB.DIV("track track-for-"+this.config.name,this.handle),b=new a.DD.Drag({node:this.handle}),b.plug(a.Plugin.DDConstrained,{constrain2node:this.slider}),
b.on("drag:start",this.onSliderDragStart,this),b.on("drag:drag",this.onSliderDragDrag,this),b.on("drag:end",this.onSliderDragEnd,this),this.dds.push(b)):this.slider="";a.on("keydown",this.onKeydown,this.input,this);a.on("keyup",this.onKeyup,this.input,this);this.html=a.DB.DIV("field-wrapper tweak-field value-field-wrapper titleStyle-"+this.config.titleStyle,a.DB.DIV("field-wrapper-inner clear "+(this.config.slider?" hasslider ":" noslider ")+(!this.config.label?" nolabel":" label"),{style:"position: relative;"},
this.label,this.slider,this.input,this.dragger),this.config.description?a.DB.DIV("field-description-wrapper",a.DB.DIV("field-description",{html:this.config.description})):null);(void 0===this.config.label||""===this.config.label)&&this.html.addClass("notitle");void 0!==this.config.name&&this.html.addClass(this.config.name);this.reset();this.initializing=!1},destroy:function(){this.dds.forEach(function(a){a.destroy()},this);this.slider&&this.slider.detachAll();this.tweakZones&&this.tweakZones.forEach(function(a){a.dd.detach();
a.destroy()},this)},sliderMouseMove:function(a){"undefined"==typeof this.sliderWidth&&(this.sliderWidth=parseInt(this.slider.getComputedStyle("width"),10));"undefined"==typeof this.handleWidth&&(this.handleWidth=parseInt(this.handle.getComputedStyle("width"),10));if(this.sliding){var c=this.sliderWidth;a=a.pageX-this.slider.getXY()[0];a=0>a?0:a;this.setSliderPos(a>c?c:a,this.handleWidth/2)}},reset:function(){this.initialData=this.dialog.getInitialData();var b=this.initialData[this.config.name]?this.initialData[this.config.name]:
"-";""===b&&(b="-");if(void 0===this.config.unit){var c=a.Squarespace.UnitManipulator.split(b);this.config.unit=null!==c&&""!==c[2]?c[2]:""}this.setValue(b)},change:function(){this.initializing||(this.dialog.fire("datachange",this),a.Cookie.get("damask")||(this.dialog.edited=!1))},focus:function(a){a&&(a.halt(),this.dragger.setStyle("display","none"),this.input.focus())},sanityCheck:function(){var b=a.Squarespace.UnitManipulator.split(this.config.value);if(b)if(b[1]=parseFloat(b[1]),isNaN(b[1]))this.config.value===
this.dialog.getInitialData()[this.config.name]&&this.config.defaultValue?(console.warn("The value for "+this.config.name+": "+this.config.value+" is invalid. RESET HARD"),this.dialog.getInitialData()[this.config.name]=this.config.defaultValue,this.setValue(this.config.defaultValue)):(console.warn("The value for "+this.config.name+": "+this.config.value+" is invalid. RESET"),this.reset());else if(""===b[2])this.config.value!==this.config.value+this.config.unit&&(this.config.value===this.dialog.getInitialData()[this.config.name]&&
this.config.defaultValue?(console.warn("The value for "+this.config.name+": "+this.config.value+" is invalid. RESET HARD"),this.dialog.getInitialData()[this.config.name]=this.config.defaultValue,this.config.unit=a.Squarespace.UnitManipulator.split(this.config.defaultValue)[2],this.setValue(this.config.defaultValue)):(console.warn("The value for "+this.config.name+": "+this.config.value+" is invalid. RESET"),this.reset()));else{if("px"!==b[2]&&"em"!==b[2]&&"rem"!==b[2]&&"pt"!==b[2]&&"%"!==b[2])if("px"!==
this.config.unit&&"em"!==this.config.unit&&"rem"!==this.config.unit&&"pt"!==this.config.unit&&"%"!==this.config.unit){var c=a.Squarespace.UnitManipulator.split(this.config.defaultValue);b?"px"!==c[2]&&"em"!==c[2]&&"rem"!==c[2]&&"pt"!==c[2]&&"%"!==c[2]?""===c[2]&&""!==b[2]&&this.setValue(b[1]):(console.warn("Invalid unit for "+this.config.name+". REVERTING UNIT"),this.config.unit=c[2],this.setValue(b[1]+this.config.unit)):console.error("Invalid default value for "+this.config.name)}else console.warn("Invalid unit for "+
this.config.name+". REVERTING UNIT"),this.setValue(b[1]+this.config.unit);else this.config.unit=b[2];this.config.value!==b[1]+this.config.unit&&(console.warn("The value for "+this.config.name+": "+this.config.value+" is invalid. FIXING"),this.setValue(b[1]+this.config.unit))}else console.warn("The value for "+this.config.name+": "+this.config.value+" is invalid. RESET"),this.reset()},blur:function(a){a.halt();this.sanityCheck();this.input.blur();this.dragger.setStyle("display","")},onKeydown:function(b){this.beforeInputChangeValue=
this.input.get("value");var c=this.input.get("value");38===b.button?(b.halt(),c=a.Squarespace.UnitManipulator.offsetString(c,"em"==this.config.unit||"rem"==this.config.unit?0.1:1,this.config.unit,this.config.step),this.setValue(c[0])):40===b.button&&(b.halt(),c=a.Squarespace.UnitManipulator.offsetString(c,"em"==this.config.unit[2]||"rem"==this.config.unit?-0.1:-1,this.config.unit,this.config.step),this.setValue(c[0]))},onKeyup:function(a){var c=this.input.get("value");38===a.button?a.halt():40===
a.button?a.halt():this.beforeInputChangeValue!=c&&(this.config.value=c,this.setSliderValue(c));this.change()},onDragStart:function(b){a.Squarespace.TweakManager.overlayManager.disable();this.startval=this.input.get("value");this.slider&&this.html.addClass("sliding")},onDragDrag:function(b){b=Math.round(-1*b.info.offset[1]/this.config.factor);var c=a.Squarespace.UnitManipulator.offsetString(this.startval,b,this.config.unit,this.config.step);b=c[1];c=this.config.unit=c[2];b=this.step(b);void 0!==this.config.max&&
(b=Math.min(b,this.config.max));void 0!==this.config.min&&(b=Math.max(b,this.config.min));b+=c;this.setValue(b);this.setSliderValue(b);this.change()},onDragEnd:function(b){this.dragger.setStyles({top:"",left:""});this.html.removeClass("sliding");a.Squarespace.TweakManager.overlayManager.enable()},onSliderDragStart:function(b){a.Squarespace.TweakManager.overlayManager.disable();this.sliderstartpos=parseInt(this.handle.getComputedStyle("left"),10);this.startval=this.input.get("value");this.html.addClass("sliding");
b.halt()},onSliderDragDrag:function(a){"undefined"===typeof this.sliderWidth&&(this.sliderWidth=parseInt(this.slider.getComputedStyle("width"),10));"undefined"==typeof this.handleWidth&&(this.handleWidth=parseInt(this.handle.getComputedStyle("width"),10));var c=a.pageX,e=this.slider.getXY()[0],c=Math.max(Math.min(c-e,this.sliderWidth-this.handleWidth),0);this.setSliderPos(c);this.sliderpos=c;a.halt()},onSliderDragEnd:function(b){a.Squarespace.TweakManager.overlayManager.enable();this.setSliderPos(this.sliderpos);
this.html.removeClass("sliding")},setSliderPos:function(b,c){"undefined"==typeof this.sliderWidth&&(this.sliderWidth=parseInt(this.slider.getComputedStyle("width"),10));"undefined"==typeof this.handleWidth&&(this.handleWidth=parseInt(this.handle.getComputedStyle("width"),10));var e=a.Squarespace.UnitManipulator.offsetString(this.config.min,(c?b-c:b)*((this.config.max-this.config.min)/(this.sliderWidth-this.handleWidth)),this.config.unit,1>this.config.step?0.99:this.config.step),d=e[1],e=e[2];void 0!==
this.config.max&&(d=Math.min(d,this.config.max));void 0!==this.config.min&&(d=Math.max(d,this.config.min));this.setValue(d+e);this.change()},setSliderValue:function(a){if(!(void 0===this.config.min||void 0===this.config.max)){var c=(parseInt(this.slider.getComputedStyle("width"),10)-parseInt(this.handle.getComputedStyle("width"),10))/(this.config.max-this.config.min);a=(Math.max(Math.min(parseFloat(a),this.config.max),this.config.min)-this.config.min)*c;this.handle.setStyle("left",a)}},resize:function(){this.setSliderValue(this.getValue())},
step:function(a){if("em"===this.config.unit||"rem"===this.config.unit)a*=10;a-=a%this.config.step*("em"===this.config.unit||"rem"===this.config.unit?10:1);a=Math.round(10*a)/10;if("em"===this.config.unit||"rem"===this.config.unit)a/=10;return a},getValue:function(){return this.html.one("input").get("value")},setValue:function(a){var c=this.config.value!=a;this.config.value=a;this.sanityCheck();this.setSliderValue(this.config.value);this.html.one("input").set("value",this.config.value);c&&this.change()},
getType:function(){return"value"}});a.Squarespace.DialogFieldGenerators.dropdown=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,c,e){this._super(b,c,e);this.config.label=this.config.label||this.config.title;this.select=a.DB.SELECT();this.select.on("change",this.onChange,this);this.config.value=void 0!==this.initialData[this.config.name]?this.initialData[this.config.name]:this.config.options[0];this.classNames=[];b=a.Lang.trim(this.config.title.toLowerCase().split(" ").join("-"));
this.classNamePrefix=void 0!==b||""!==b?b+"-":"";for(b=0;b<this.config.options.length;b++)this.classNames[b]=this.classNamePrefix+a.Lang.trim(this.config.options[b]).toLowerCase().split(" ").join("-"),c=a.DB.OPTION({html:this.config.options[b]}),this.config.options[b]===this.config.value&&c.setAttribute("selected","selected"),this.select.append(c);this.html=a.DB.DIV("field-wrapper tweak-field dropdown-field-wrapper dropdown clear "+this.config.size,a.DB.DIV("field-wrapper-inner clear",this.select,
a.DB.DIV("field-title current",{html:("dropdown"==this.config.type?this.config.label+": ":"")+this.config.value})))},onChange:function(a){this.setValue(a.target.get("value"))},getPossibleClassNames:function(){return this.classNames.join(" ").toLowerCase()},getClassName:function(){return this.classNamePrefix+this.config.value.toLowerCase().split(" ").join("-")},getInitialClassName:function(){return this.classNamePrefix+this.initialData[this.config.name].toLowerCase().split(" ").join("-")},setValue:function(b){var c=
null,e;for(e=0;e<this.config.options.length;++e)if(this.config.options[e]==b){c=b;break}this.config.value=null===c?this.config.options[0]:c;b=this.html.one("select");c=b.all("option");for(e=0;e<c.size();e++)if(c.item(e).get("text")==this.config.value){b.set("selectedIndex",e);break}this.html.one(".current").set("text",("dropdown"==this.config.type?this.config.label+": ":"")+this.config.value);this.dialog.fire(this.config.eventName||"datachange",this);a.Cookie.get("damask")||(this.dialog.edited=!1)},
setOptions:function(b){this.config.options=b;this.select.all("option").remove();for(b=0;b<this.config.options.length;b++){var c=a.DB.OPTION({html:this.config.options[b]});this.select.append(c)}},getValue:function(){return this.config.value},getType:function(){return"dropdown"},reset:function(){this.initialData=this.dialog.getInitialData();this.setValue(this.initialData[this.config.name])}});a.Squarespace.DialogFieldGenerators.checkbox=Class.extend(a.Squarespace.TweakDialogField,{initialize:function(b,
c,e){this._super(b,c,e);this.config.label=this.config.label||this.config.title;this.active="true"===c[this.config.name]||!0===c[this.config.name]?!0:!1;this.html=a.DB.DIV("field-wrapper tweak-field checkbox-field-wrapper clear thin "+(this.active?"active":""),a.DB.DIV("field-wrapper-inner",a.DB.DIV("checkbox-element"),this.config.label?a.DB.DIV("field-title",{html:this.config.label}):null));a.on("click",this.onClick,this.html,this)},reset:function(){this.initialData=this.dialog.getInitialData();a.Lang.isBoolean(this.initialData[this.config.name])&&
(this.initialData[this.config.name]+="");if(this.initialData[this.config.name]!==this.active+"")this.onClick()},onClick:function(b){this.active=!this.active;this.value=""+this.active;this.active?this.html.addClass("active"):this.html.removeClass("active");this.dialog.fire("datachange",this);a.Cookie.get("damask")||(this.dialog.edited=!1)},getClassName:function(){return this.active?this.config.className||a.Squarespace.Utils.slugify(this.config.title):""},getInitialClassName:function(){return this.initialData[this.config.name]?
this.config.className||a.Squarespace.Utils.slugify(this.config.title):""},getPossibleClassNames:function(){return this.config.className||a.Squarespace.Utils.slugify(this.config.title)},setValue:function(b){if(void 0!==b){var c=!0;!0===b||"true"===b?this.active?c=!1:(this.active=!0,this.html.addClass("active")):!this.active||"false"===b?c=!1:(this.active=!1,this.html.removeClass("active"));c&&this.dialog.fire("datachange",this);a.Cookie.get("damask")||(this.dialog.edited=!1)}},getValue:function(){return this.active?
"true":"false"},getType:function(){return"checkbox"}});a.augment(a.Squarespace.TweakDialogField,a.EventTarget)},"2.0",{requires:"node json anim event event-outside squarespace-util squarespace-dombuilder squarespace-ui-base squarespace-ui-overlay squarespace-dialog squarespace-common squarespace-uploader squarespace-tweak squarespace-colors thirdparty-colortriangle".split(" ")});
YUI.add("squarespace-block-video",function(a){var d=a.Base.create("VideoBlockModel",a.Model,[],{toJSON:function(){var b={layout:this.get("layout"),overlay:this.get("overlay"),description:this.get("description"),hSize:this.get("hSize"),vSize:this.get("vSize"),floatDir:this.get("floatDir")},e=this.get("customThumb");a.Lang.isValue(e)&&(b.customThumb=e.get("id"));var d=this.get("oembed"),f=a.Lang.isObject(d);a.Array.forEach("html url width height providerName thumbnailUrl resolvedBy".split(" "),function(a){b[a]=
f?d[a]:this.get(a)},this);return b}},{ATTRS:{customThumb:{setter:function(b){if(a.Lang.isString(b))return new a.Squarespace.Models.ContentItem({id:b});if(a.instanceOf(b,a.Squarespace.Models.ContentItem))return b}},oembed:{},layout:{value:"caption-hidden"},overlay:{value:!1},description:{value:{}}}}),b=a.namespace("Squarespace.Block").Video=a.Base.create("block-video",a.Squarespace.Block.ModelSyncBase,[],{bindUI:function(){b.superclass.bindUI.call(this);var a=this.get("model"),e=a.get("customThumb");
e&&this._bindImageListeners(e);a.on("customThumbChange",function(a){a.prevVal&&a.prevVal.detach(this.get("id")+"|*");a.newVal&&this._bindImageListeners(a.newVal)},this)},syncUI:function(){this.get("contentBox").all(".intrinsic").addClass("sqs-intrinsic")},_renderSuccess:function(c){c.html?(this.get("editController").isMobileApp()&&(c.html=c.html.replace(/("|'|&quot;)?\/\//g,function(a,b){return b?b+"http://":a})),b.superclass._renderSuccess.call(this,c),a.config.win.location.protocol.startsWith("https")&&
(c=this.get("contentBox").one("object embed"))&&c.setAttribute("src",c.getAttribute("src").replace("http://","https://")),this._pluginVideoLoader()):(this._renderError(),console.warn("Error rendering video block:",c))},_pluginVideoLoader:function(){var b=this.get("contentBox").one(".sqs-video-wrapper");b&&!b.hasPlugin(a.Squarespace.VideoLoader.NS)&&b.plug(a.Squarespace.VideoLoader)},refreshVideo:function(){var a=this.get("contentBox").one(".sqs-video-wrapper");a&&a.videoloader.refreshVideo()},_bindImageListeners:function(a){var b=
this.get("id");a.after(b+"|mediaProcessingStateChange",this._renderBlock,this);a.after(b+"|mediaFocalPointChange",function(a){var b=this.get("contentBox").one(".sqs-video-overlay img");if(b){var c=b.loader;b.setAttribute("data-image-focal-point",a.newVal.x+","+a.newVal.y);c.fire("refresh")}},this)}},{CSS_PREFIX:"sqs-block-video",MODEL:d,ATTRS:{editor:{valueFn:function(){return a.Squarespace.Block.Editor.Video}},mobileEditor:{valueFn:function(){return a.Squarespace.Block.Editor.VideoMobile}},type:{value:a.Squarespace.BlockType.VIDEO}}})},
"1.0",{requires:["squarespace-block-base-modelsync","squarespace-video-loader"]});
YUI.add("squarespace-block-editor-dialog",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.OPEN_DIALOGS=[];var d=a.Squarespace.Block.Editor.Dialog=a.Base.create("block-editor-dialog",a.Squarespace.Block.Editor.Base,[],{initializer:function(){this.configDialog=this._initConfigDialog();this._bindDialogEvents()},destructor:function(){this.configDialog.destroy()},_afterEditingChange:function(a){a.newVal&&this.configDialog&&this.configDialog.set("visible",!0);d.superclass._afterEditingChange.apply(this,
arguments);this._host.hasPlugin("insertPoint")&&this._host.insertPoint.toggleInsertPointsDisabled(a.newVal)},_plugInsertPoint:function(){d.superclass._plugInsertPoint.call(this);this._host.insertPoint.toggleInsertPointsDisabled(this.get("editing"))},_getModelEditor:function(){console.error("No Model Editor configured for: "+this.get("blockName"))},_initConfigDialog:function(){var b=this._getModelEditor();if(!a.Lang.isValue(b))return null;var b=new b({id:"editorDialog",model:this._model,anchorNode:this.get("dialogEditorAnchorNode"),
zIndex:9E3}),c=b.get("dialogConfig");if(this.get("lockedLayout")&&a.Lang.isArray(c.buttons)){var e=a.Array.filter(c.buttons,function(b){return!a.Lang.isValue(b)||"remove"!==b.type},this);c.buttons=e}b.set("dialogConfig",a.merge({closeOthers:!1,name:"block-configuration",style:"flyout",flyoutPointerDirection:"hidden",draggable:9!==a.UA.ie&&10!==a.UA.ie},c));return b},_bindDialogEvents:function(){if(!a.Lang.isNull(this.configDialog)){var b=this.configDialog.get("dialog");b.on("shown",function(){for(this._bb.addClass("sqs-edit-dialog-open");a.Squarespace.Block.Editor.OPEN_DIALOGS.length;)a.Squarespace.Block.Editor.OPEN_DIALOGS.shift().dialog.close();
a.Squarespace.Block.Editor.OPEN_DIALOGS.push({dialog:b,layout:this.get("host").get("boundingBox").ancestor(".sqs-layout")})},this);b.on("dismiss",this._onModelEditorDismiss,this);this.configDialog.on("nonSavingClose",function(){this.get("revertResizingOnCancel")&&(this._model.get("vSize")!==b.getData().vSize&&this._model.set("vSize",b.getData().vSize,{silent:!0}),this._model.get("aspectRatio")!==b.getData().aspectRatio&&this._model.set("aspectRatio",b.getData().aspectRatio))},this);b.on("render-anchor",
function(a){this._updateModel(this.configDialog.sanitizeDialogData(a))},this);b.on("remove-requested",function(){(new a.Squarespace.Widgets.Confirmation({"strings.title":"Remove Block","strings.message":"Are you sure you wish to remove this block?",className:"sqs-prevent-block-focus-change question",render:b.el&&b.el.ancestor("body")||!0})).on("confirm",function(){b.close(b,!0);this.fire("remove")},this)},this)}},_onModelEditorDismiss:function(b){var c=this.configDialog.get("dialog");this._disableEditing();
this._bb.removeClass("sqs-edit-dialog-open");a.Squarespace.Block.Editor.OPEN_DIALOGS=a.Array.filter(a.Squarespace.Block.Editor.OPEN_DIALOGS,function(a,b){return a.dialog!==c},this)}},{NS:"blockEditor",ATTRS:{blockName:{valueFn:function(){return a.Squarespace.StringUtils.toUpperCamelCase(this.get("host").get("blockTypeName"))}},editing:{value:!1},editingEvent:{value:["dblclick","contextmenu"]},editingOverlay:{valueFn:function(){return a.Node.create('<div class="sqs-editing-overlay"></div>')}},dialogEditorAnchorNode:{valueFn:function(){return this.get("host").get("contentBox")}},
revertResizingOnCancel:{value:!0},defaultEditingMode:{value:!0}}})},"1.0",{requires:"base plugin squarespace-util squarespace-block-editor-base squarespace-dialog-fields-generators squarespace-model-editor squarespace-string-utils squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-editor-form-product",function(a){a.namespace("Squarespace");a.Squarespace.ProductFormModelEditor=a.Base.create("productFormModelEditor",a.Squarespace.FormModelEditor,[],{initializer:function(){this.get("dialog").on("remove-requested",this._confirmAndRemove,this)},_confirmAndRemove:function(){var d=this.get("model"),b=d.isNew();(new a.Squarespace.Widgets.Confirmation({"strings.title":b?"Discard Form":"Delete Form","strings.message":b?"Are you sure you wish to discard this form?":
'Are you sure you wish to delete this form? Any products that are currently using this form in their Workflow settings will be set to "No Form Required".'})).on("confirm",function(){d.destroy({remove:!0});this.destroy()},this)}},{ATTRS:{dialogConfigStrings:{value:{title:"Edit Product Checkout Form",loadingText:"Editing Product Checkout Form..."}}}})},"1.0",{requires:["base","squarespace-editor-form","squarespace-ui-base","squarespace-widgets-confirmation"]});
YUI.add("squarespace-block-markdown-editor-email",function(a){a.namespace("Squarespace.Block.Editor").MarkdownEmail=a.Base.create("markdown-block-editor-dialog",a.Squarespace.Block.Editor.Markdown,[],{initializer:function(){this.get("host").set("floatable",!1)},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.MarkdownEmail")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Markdown"},minHSize:{value:2}}});var d=a.namespace("Squarespace.Block.ModelEditorDialog").MarkdownEmail=
a.Base.create("block-markdown-editor",a.Squarespace.Block.ModelEditorDialog.Markdown,[],{sanitizeDialogData:function(){var b=d.superclass.sanitizeDialogData.apply(this,arguments),c=a.Squarespace.Layout.EmailUtils.prepHtmlForEmail(b.html);b.html=c;return b}},{})},"1.0",{requires:["base","squarespace-block-markdown-editor","squarespace-damask-context-globals","squarespace-layout-email-utils"]});
YUI.add("squarespace-dialog-file-manager",function(a){var d=a.namespace("Squarespace.DialogFields").FileManager=a.Base.create("fileManager",a.Squarespace.DialogField2,[],{initializer:function(){this._fetchUrl="/api/commondata/SearchAttachments";this._editUrl="/api/commondata/RenameAttachment";this._removeUrl="/api/commondata/RemoveAttachment";this._searchField=new a.Squarespace.DialogFields.Text({"strings.placeholder":"search"});this._deletePrompt=this._committing=this._activeEditingEl=!1},renderUI:function(){d.superclass.renderUI.call(this);
var b=this.get("contentBox"),c=a.Node.create('<div class="search"></div>'),e=a.Node.create('<div class="attachments"></div>');b.append(c);b.append(e);this._searchField.render(c);this._searchInput=this._searchField.get("contentBox").one("input");this.updateFullList();e.plug(a.Squarespace.Plugin.InfiniteScroll,{fetchUrl:this._fetchUrl,pageSize:this.get("pageSize"),queryFn:a.bind(function(){return{q:this._searchInput.get("value")}},this),render:a.bind(function(b){a.Array.each(b.attachments,a.bind(function(a){this._selectedFileAppended&&
a.urlId==this.get("data")||this._appendAttachment(a)},this),this)},this)})},bindUI:function(){var a=this.get("contentBox"),c=a.one(".attachments");this._searchInput.on("valuechange",function(a){""===a.currentTarget.get("value")?this.updateFullList():this._searchAttachments(a)},this);this._searchInput.on("click",this._cancelAttachmentEdit,this);c.delegate("mouseenter",function(a){!this._activeEditingEl&&!this._deletePrompt&&(c.all(".attachment").removeClass("active"),a.currentTarget.addClass("active"))},
".attachment",this);c.delegate("mouseleave",function(a){!this._activeEditingEl&&!this._deletePrompt&&a.currentTarget.removeClass("active")},".attachment",this);c.delegate("click",function(a){!this._activeEditingEl&&(!a.target.hasClass("edit")&&!a.target.ancestor(".edit")&&!a.target.hasClass("remove")&&!a.target.ancestor(".remove"))&&this._selectAttachment(a.currentTarget)},".attachment",this);c.delegate("click",this._enterAttachmentEditMode,".attachment .edit",this);c.delegate("key",this._commitAttachmentEdit,
"press:13","input",this);a.on("click",this._cancelAttachmentEdit,this);c.delegate("click",function(a){this._activeEditingEl&&this._cancelAttachmentEdit();this._promptDeleteAttachment(a)},".attachment .remove",this)},updateFullList:function(b){callRender=a.bind(function(a){this._renderAttachments(a);b&&b()},this);a.Data.get({url:this._fetchUrl,data:{pageSize:this.get("pageSize"),page:1},success:a.bind(function(b){this.destroyed||(this.get("data")?-1==this._selectedFileIndex(b)?a.Data.get({url:this._fetchUrl,
data:{q:this.get("data"),pageSize:1,page:1},success:a.bind(function(a){a=a.attachments[0];a.selected=!0;b.attachments.unshift(a);this._selectedFileAppended=!0;callRender(b)},this),failure:a.bind(function(){callRender(b)},this)},this):callRender(b):callRender(b))},this)})},_selectAttachment:function(a,c){var e=a.getAncestorData("file");this._selectedAttachment&&this._selectedAttachment.removeClass("selected");a.addClass("selected");this._selectedAttachment=a;this.set("data",e.urlId,{silent:c})},_searchAttachments:function(){var b=
this._searchInput.get("value");a.Data.get({url:this._fetchUrl,data:{q:b,pageSize:this.get("pageSize"),page:1},success:a.bind(this._renderAttachments,this)})},_renderAttachments:function(b){var c=this.get("contentBox").one(".attachments");c.all(".remove").detach("click");c.empty();c=this._selectedFileIndex(b);-1!=c&&0!==c&&(c=b.attachments.splice(c,1)[0],b.attachments.unshift(c));0<b.attachments.length?a.Array.each(b.attachments,a.bind(function(a){this._appendAttachment(a)},this),this):this._showEmptyAttachments(""!==
this._searchInput.get("value"))},_appendAttachment:function(b){var c=this.get("contentBox").one(".attachments"),e=a.Node.create(a.Handlebars.render(this.get("rowTemplate"),b));b.urlId==this.get("data")&&(e.addClass("selected"),this._selectedAttachment=e);e.setData("file",b);c.append(e)},_showEmptyAttachments:function(b){var c=this.get("contentBox").one(".attachments");b=b?this.get("emptySearchTemplate"):this.get("emptyFilesTemplate");b=a.Node.create(a.Handlebars.render(b));c.append(b)},_enterAttachmentEditMode:function(b){this._activeEditingEl&&
this._cancelAttachmentEdit(b);var c=b.currentTarget.siblings(".filename").item(0);this._activeEditingEl=c;var e=c.get("text"),d=a.Node.create('<input class="editing" type="text" value="'+e+'" />');c.setData("originalFilename",e);c.setContent(d);d.select();b.currentTarget.hide();b.stopPropagation()},_cancelAttachmentEdit:function(a){if(!this._committing&&this._activeEditingEl){var c=this._activeEditingEl,e=c.getData("originalFilename");c.setContent(e);c.siblings(".edit").item(0).show();this._activeEditingEl=
!1;a&&a.halt()}},_commitAttachmentEdit:function(b){this._committing=!0;var c=b.currentTarget.getAncestorData("file"),e=b.currentTarget.get("value");b=b.currentTarget.ancestor(".filename");var d=!1;c.urlId==this.get("data")&&(d=!0);b.setContent(e);b.siblings(".edit").item(0).show();this._activeEditingEl=!1;a.Data.post({url:this._editUrl,data:{itemId:c.id,name:e},success:function(a){d&&this.set("data",a.urlId,{silent:!0});this.updateFullList();this._committing=!1},failure:function(b){b.errors&&b.errors.name&&
new a.Squarespace.Widgets.Alert({"strings.title":"File Name Error","strings.message":b.errors.name});this.updateFullList();this._committing=!1}},this)},_promptDeleteAttachment:function(b){b.halt();this._deletePrompt=!0;var c=new a.Squarespace.Widgets.Confirmation({"strings.confirm":"Delete","strings.title":"Delete File","strings.message":"Are you sure you want to delete this file?"});c.on("hide",function(){this._deletePrompt=!1},this);var e=b.currentTarget.getAncestorData("file");c.on("confirm",function(){this._deleteAttachment(e)},
this)},_deleteAttachment:function(b){a.Data.post({url:this._removeUrl,data:{itemId:b.id},success:a.bind(function(a){b.urlId==this.get("data")&&this.set("data",null);""===this._searchInput.get("value")?this.updateFullList():this._searchAttachments()},this)},this)},_selectedFileIndex:function(a){a=a.attachments;for(var c=0;c<a.length;c++)if(a[c].urlId==this.get("data"))return c;return-1}},{CSS_PREFIX:"sqs-file-manager",ASYNC_DATA:!0,ATTRS:{emptyFilesTemplate:{value:'<div class="empty-files"><div class="icon"></div><div class="text">You have not uploaded any files yet</div></div>'},
emptySearchTemplate:{value:'<div class="empty-search"><div class="text">No results found...</div></div>'},pageSize:{value:6},rowTemplate:{value:'<div class="attachment {{#if selected}}selected{{/if}}"><div class="filename">{{filename}}</div><div class="edit"><img src="/universal/images-v6/icons/icon-edit-12-dark.png" /></div><div class="remove"><img src="/universal/images-v6/icons/icon-close-9-dark.png" /></div></div>'}}})},"1.0",{requires:"base base-build squarespace-dialog squarespace-dialog-field-2 squarespace-plugin-infinite-scroll squarespace-widgets-alert squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-models-domain",function(a){var d=a.Base.create("domain",a.Model,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.REST_API_ROOT+"domains/{id}",root:a.Squarespace.REST_API_ROOT+"domains",getUnlockKey:function(){return new a.Promise(a.bind(function(b,c){a.Data.get({url:this.getURL("update")+"/unlock-key",success:function(a){b(a.key)},failure:c},this)},this))}},{ATTRS:{websiteId:{validator:a.Lang.isString},applicationSupplied:{value:!1,validator:a.Lang.isBoolean},dnsActive:{value:!1,
validator:a.Lang.isBoolean},googleDnsActive:{value:!1,validator:a.Lang.isBoolean},managed:{value:!1,validator:a.Lang.isBoolean},revokable:{value:!1,validator:a.Lang.isBoolean},withinPropagationWindow:{value:!1,validator:a.Lang.isBoolean},id:{validator:a.Lang.isString},name:{validator:a.Lang.isString}}});a.namespace("Squarespace.Models").Domain=d},"1.0",{requires:["base","model","promise","squarespace-model-sync-rest","squarespace-util"]});
YUI.add("squarespace-tray",function(a){var d=a.namespace("Squarespace.Widgets").Tray=a.Base.create("tray",a.Squarespace.Widgets.SSWidget,[],{bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("id");this.after(a+"|stringsChange",this._afterStringsChange);this.after(a+"|buttonsChange",this._afterButtonsChange)},syncUI:function(){d.superclass.syncUI.call(this);this._uiUpdateText();this._uiSetButtons(this.get("buttons"))},_afterButtonsChange:function(a){this._uiSetButtons(a.newVal,a.animate)},
_afterStringsChange:function(a){this._uiUpdateText()},_uiUpdateText:function(){var b=this.get("contentBox");b.one(".title").setContent(a.Escape.html(this.get("strings.title")));b.one(".title").setAttribute("title",a.Escape.html(this.get("strings.title")));b.one(".subtitle").setContent(a.Escape.html(this.get("strings.subtitle")))},_uiSetButtons:function(b,c){var e=this.get("contentBox").one(this.getProperty("CONTROLS_CONTAINER"));if(!e)throw"No CONTROLS_CONTAINER in the template to put buttons in.";
c&&(e.plug(a.Squarespace.Plugins.SizeAnimator),e.sizeAnimator.hold());e.empty();a.Array.each(b,function(b,c,d){var g=this._createButtonWidget(b);g.on(this.get("id")+"|click",function(c){b.allowMouseEvents||(c.halt(),c.stopImmediatePropagation());this.fire("button-click",{button:g,buttonConfig:b,originalClickEvent:c});b.action&&(c.button=g,c.buttonConfig=b,a.bind(b.action,b.context)(c))},this);g.get("boundingBox").addClass("label-"+a.Squarespace.Utils.slugify(b.label));g.get("boundingBox").addClass("no-frame");
b.container?(c=this.get("contentBox").one(b.container),g.render(c)):g.render(e)},this);c&&e.sizeAnimator.release()},_createButtonWidget:function(b){return new a.Squarespace.Widgets.Button({"strings.text":b.label,className:b.className})}},{CSS_PREFIX:"sqs-tray",CONTROLS_CONTAINER:".buttons",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div>',ATTRS:{strings:{value:{title:"",subtitle:""}},
buttons:{value:[],validator:function(a,b){for(var c=1;c<a.length;c++)if(!a[c].label)return console.warn("No label provided",a),!1;return!0}}}}),b=a.namespace("Squarespace.Widgets").HeaderTray=a.Base.create("headerTray",a.Squarespace.Widgets.Tray,[a.WidgetParent,a.WidgetChild],{renderUI:function(){b.superclass.renderUI.call(this);this.get("loading")?this._startSpinner():this._stopSpinner()},bindUI:function(){b.superclass.bindUI.call(this);this._uiBindShadow();var a=this.get("id");this.after(a+"|shadowChange",
this._uiBindShadow);this.after(a+"|shadowOpacityChange",this._syncShadowUI);this.after(a+"|loadingChange",function(a){a.newVal?this.get("rendered")?this._startSpinner():console.warn(this.name+": Cannot start spinner before widget is rendered."):this._stopSpinner()},this)},_syncShadowUI:function(){this.get("contentBox").one(".shadow").setStyles({opacity:Math.min(this.get("shadowOpacity"),this.get("shadowMaxOpacity"))})},_startSpinner:function(){this._uiUpdateText();var b=this.get("contentBox").one(".spinner-wrapper");
this._spinnerTimer&&this._spinnerTimer.cancel();this._spinner=new a.Squarespace.Spinner({render:b,color:"dark"})},_stopSpinner:function(){this._spinnerTimer&&(this._spinnerTimer.cancel(),this._spinnerTimer=null);this._spinner&&(this._spinner.destroy(),this._spinner=null)},_uiBindShadow:function(){this._shadowScrollEvent&&this._shadowScrollEvent.detach();this.get("shadow")&&(this._shadowScrollEvent=a.one(window).on(this.get("id")+"|scroll",function(){this.set("shadowOpacity",this._calculateOpacity())},
this))},_calculateOpacity:function(){var b=this.get("shadowScrollTop"),c=a.one(window).get("scrollTop");return c<b?c/b:1},_createButtonWidget:function(b){return new a.Squarespace.Widgets.Button({"strings.text":b.label,href:b.href,name:b.name,className:b.className,active:b.active})}},{CSS_PREFIX:"sqs-header-tray",TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div><div class="footer"></div><div class="shadow"></div>',
ATTRS:{shadow:{value:!0,validator:a.Lang.isBoolean},shadowOpacity:{value:0,validator:a.Lang.isNumber},shadowMaxOpacity:{value:0.4,validator:a.Lang.isNumber},shadowScrollTop:{value:100,validator:a.Lang.isNumber},loading:{value:!1,validator:a.Lang.isBoolean}}}),c=a.namespace("Squarespace.Widgets").LibraryManagerHeaderTray=a.Base.create("libraryManagerHeaderTray",a.Squarespace.Widgets.HeaderTray,[],{_uiSetButtons:function(){c.superclass._uiSetButtons.apply(this,arguments);var a=this.get("contentBox"),
b=a.one(".buttons").get("offsetWidth");a.one(".header .title").setStyle("marginRight",b)}},{CSS_PREFIX:"sqs-library-manager-header-tray",TEMPLATE:'<div class="header"><div class="title"></div><div class="filters"></div><div class="pagination"></div><div class="subtitle"></div></div><div class="body"><div class="buttons"></div></div><div class="shadow"></div>'}),e=a.namespace("Squarespace.Widgets").TabbedHeaderTray=a.Base.create("tabbedHeaderTray",a.Squarespace.Widgets.HeaderTray,[],{initializer:function(){this.publish("tab-switch-requested",
{emitFacade:!0,defaultFn:this._updateActiveButtonClass,context:this,preventable:!0});this.after(this.get("id")+"|button-click",function(a){null!==a.button.ancestor(this.getProperty("CONTROLS_CONTAINER"))&&this.fire("tab-switch-requested",{button:a.button})},this)},_createButtonWidget:function(b){return new a.Squarespace.Widgets.TabButton({"strings.text":b.label,href:b.href,name:b.name,className:b.className,active:b.active})},_uiSetButtons:function(){e.superclass._uiSetButtons.apply(this,arguments);
var a=this.get("defaultTab"),b=this.get("boundingBox").one(this.getProperty("CONTROLS_CONTAINER")).get("children");0!==b.size()&&(a?b.each(function(b){b.hasClass("name-"+a)&&b.addClass("active")},this):b.item(0).addClass("active"))},_updateActiveButtonClass:function(a){this.get("boundingBox").one(this.getProperty("CONTROLS_CONTAINER")).get("children").each(function(b,c,e){b.toggleClass("active",a.button.get("boundingBox")===b)},this)}},{CSS_PREFIX:"sqs-tabbed-header-tray",CONTROLS_CONTAINER:".tabs",
TEMPLATE:'<div class="header"><div class="title"></div><div class="spinner-wrapper"></div><div class="subtitle"></div></div><div class="body"><div class="tabs"></div><div class="buttons"></div></div><div class="footer"></div><div class="shadow"></div>',ATTRS:{defaultTab:{}}});a.namespace("Squarespace.Widgets").ActionTray=a.Base.create("actionTray",a.Squarespace.Widgets.Tray,[],{destructor:function(){this._displayTimer&&this._displayTimer.cancel();this._displayAnim&&this._displayAnim.stop(!0).destroy()},
renderUI:function(){a.Squarespace.Widgets.ActionTray.superclass.renderUI.call(this);this.get("boundingBox").one(".action-tray").setStyle("top","100px")},bindUI:function(){var a=this.get("id");this.get("contentBox").on(a+"|click",function(a){a.halt()});this.on(a+"|visibleChange",this._onVisibleChange);this.after([a+"|buttonsChange",a+"|countChange",a+"|showThresholdChange",a+"|stringsChange"],this._afterUIAttributeChange)},syncUI:function(){this._uiSetCount(this.get("count"));this._uiSetButtons(this.get("buttons"));
this._uiSetTitle(this.get("strings.title"));this._uiSetSubtitle(this.get("strings.subtitle"))},_onVisibleChange:function(b){if(!b.silent){b.preventDefault();var c=b.newVal,e=b.prevVal,d=this.get("boundingBox"),l=this.get("animationDuration"),n=d.one(".action-tray");if(this.get("enabled")||!c){this._displayTimer&&(this._displayTimer.cancel(),delete this._displayTimer);var p=a.bind(function(){this._displayAnim&&(c===e&&this._displayAnim.stop(),delete this._displayAnim)},this);this._displayTimer=c?a.later(1E3*
this.get("showDelay"),this,function(){this._displayTimer=null;p();d.setStyle("display","block");this._displayAnim=new a.Anim({node:n,duration:l,easing:this.get("easingIn"),to:{top:"0",opacity:1}});this._anims.add(this._displayAnim);this._displayAnim.onceAfter(this.get("id")+"|end",function(){this._displayAnim=null;this.set("visible",!0,{silent:!0})},this);this._displayAnim.run()}):a.later(1E3*this.get("hideDelay"),this,function(){n.inDoc()?(this._displayTimer=null,p(),d.setStyle("display",null),this._displayAnim=
new a.Anim({node:n,duration:l,easing:this.get("easingOut"),to:{top:"100px",opacity:0}}),this._anims.add(this._displayAnim),this._displayAnim.onceAfter(this.get("id")+"|end",function(){this._displayAnim=null;d.setStyle("display","none");this.set("visible",!1,{silent:!0})},this),this._displayAnim.run()):console.warn("Trying to animate tray that is not in the dom.")})}}},_afterUIAttributeChange:function(a){switch(a.attrName){case "showThreshold":case "count":this._uiSetCount();break;case "buttons":this._uiSetButtons(this.get("buttons"));
break;case "strings":"strings.subtitle"===a.subAttrName?this._uiSetSubtitle(this.get("strings.subtitle")):"strings.title"===a.subAttrName?this._uiSetTitle(this.get("strings.title")):this._uiSetCount(this.get("count"));break;default:console.warn("How did you get here? That's not possible!")}},_uiSetCount:function(){var b=this.get("count");0!==b&&this.get("contentBox").one(".description .top").setContent(a.substitute(this.get("strings.title"),{count:b,label:1===b?"Item":"Items"}));this.set("visible",
b>=this.get("showThreshold"))},_uiSetSubtitle:function(a){this.get("contentBox").one(".bottom").setContent(a)},_uiSetTitle:function(a){this.get("contentBox").one(".top").setContent(a)},_setEnabled:function(a){a||this.hide();return a},hide:function(){this.set("visible",!1)},show:function(){this.set("visible",!0)},enable:function(){this.set("enabled",!0)},disable:function(){this.set("enabled",!1)}},{CSS_PREFIX:"sqs-action-tray",TEMPLATE:'<div class="action-tray"><div class="description"><div class="top"></div><div class="bottom"></div></div><div class="buttons"></div></div>',
ATTRS:{strings:{value:{title:"{count} {label} Selected",subtitle:"This action will be applied to all selected items above."}},enabled:{value:!0,setter:"_setEnabled",lazyAdd:!1},buttons:{value:[],validator:function(a,b){for(var c=1;c<a.length;c++){var e=a[c];if(!e.action)return console.warn("No action (callback function) provided",a),!1;if(!e.label)return console.warn("No label provided",a),!1}return!0}},count:{value:0},showThreshold:{value:1},showDelay:{value:0.3},hideDelay:{value:0.1},animationDuration:{value:0.25},
easingIn:{value:a.Easing.easeOutStrong},easingOut:{value:a.Easing.easeOutStrong}}})},"1.0",{requires:["squarespace-dialog-tab","squarespace-dialog-button","squarespace-ss-widget","squarespace-dombuilder","squarespace-plugin-sizeanimator"]});
YUI.add("squarespace-dialog-service-connect",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.ServiceConnect=a.Base.create("serviceConnect",a.Squarespace.DialogField2,[],{initializer:function(){if(this.constructor===d)throw"DialogFields.ServiceConnect: This is an abstract class and is not meant to be used on its own.";this._edited=!1},renderUI:function(){d.superclass.renderUI.call(this)},bindUI:function(){d.superclass.bindUI.call(this);this.get("contentBox");this.onceAfter("dataChange",
function(){this._edited=!0},this);this.after(["disabledChange","connectionInProgressChange"],this.syncUI,this)},syncUI:function(){d.superclass.syncUI.call(this);this.get("connectionInProgress")?this._setInProgressState():this.get("data.connected")?this._setConnectedState():this._setDisconnectedState()},didDataChange:function(){return this._edited},_setInProgressState:function(){this.get("contentBox").removeClass("connected").removeClass("not-connected").addClass("in-progress")},_setConnectedState:function(){this.get("contentBox").removeClass("in-progress").removeClass("not-connected").addClass("connected")},
_setDisconnectedState:function(){this.get("contentBox").removeClass("in-progress").removeClass("connected").addClass("not-connected")},_connect:function(){throw"DialogFields.ServiceConnect: _connect must be implemented by the extending class.";},_disconnect:function(){throw"DialogFields.ServiceConnect: _disconnect must be implemented by the extending class.";}},{CSS_PREFIX:"sqs-service-connect",ATTRS:{data:{value:{connected:!1}},connectionInProgress:{value:!1}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]});
YUI.add("squarespace-block-posts-by-model",function(a){a.namespace("Squarespace.ContentModel").PostsByBlock=a.Base.create("PostsByBlockModel",a.Model,[],{},{ATTRS:{}});a.namespace("Squarespace.ContentModel").PostsByTag=a.Base.create("PostsByTagModel",a.Squarespace.ContentModel.PostsByBlock,[],{},{});a.namespace("Squarespace.ContentModel").PostsByCategory=a.Base.create("PostsByCategoryModel",a.Squarespace.ContentModel.PostsByBlock,[],{},{});a.namespace("Squarespace.ContentModel").PostsByAuthor=a.Base.create("PostsByAuthorModel",
a.Squarespace.ContentModel.PostsByBlock,[],{},{});a.namespace("Squarespace.ContentModel").PostsByMonth=a.Base.create("PostsByMonthModel",a.Squarespace.ContentModel.PostsByBlock,[],{},{})},"1.0",{requires:["base","model"]});
YUI.add("squarespace-block-logo-editor",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.Logo=a.Base.create("logo-block-editor",a.Squarespace.Block.Editor.Dialog,[],{initializer:function(){this.get("host").set("floatable",!1);this.set("lockedLayout",!0);this.afterHostEvent("widget:contentUpdate",function(){var b=this.get("host").get("contentBox").one("img");a.Lang.isValue(b)?(this._model.set("hasLogo",!0),b.setStyle("height","60px")):this._model.set("hasLogo",!1)},this)},
_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Logo")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Logo"},minHSize:{value:6}}});a.namespace("Squarespace.Block.ModelEditorDialog").Logo=a.Base.create("blockLogoEditor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){this._syncCheckboxes();a.getField("useNameAsLogo").after("dataChange",this._syncCheckboxes,this)},this)},_syncCheckboxes:function(){var a=
this.get("dialog"),c=a.getField("useNameAsLogo"),a=a.getField("displayTagline").get("contentBox");this.get("model").get("hasLogo")?(c.get("contentBox").show(),a.toggleClass("shown",!!c.get("data"))):(c.set("data",!0),c.get("contentBox").hide(),a.toggleClass("shown",!0))}},{ATTRS:{dialogConfig:{valueFn:function(){return d}},hasLogo:{value:!1,validator:a.Squarespace.AttrValidators.Boolean}}});var d={initialDataByReference:!0,name:"editLogoBlock",width:300,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",
title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Logo Settings",icon:"/universal/images-v6/icons/icon-logo-16-light-solid.png",scroll:!1,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Change your logo in Settings."}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"align",defaultValue:"left",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"useNameAsLogo",
defaultValue:!1,"strings.title":"Hide Logo","strings.description":"Your company name will be displayed instead of your logo."}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"displayTagline",defaultValue:!0,"strings.title":"Display Tagline","strings.description":"Display your site's tagline beneath the company name."}}]}]}},"1.0",{requires:["base","squarespace-block-editor-base","squarespace-damask-context-globals"]});
YUI.add("squarespace-dialog-label",function(a){a.namespace("Squarespace.Plugin").DialogFieldLabel=a.Base.create("dialogFieldLabel",a.Plugin.Base,[],{initializer:function(a){this.afterHostMethod("renderUI",this._render,this);this.afterHostMethod("syncUI",this.syncLabel,this)},destructor:function(){a.detach(this.get("id")+"|*");var d=this.get("host"),b=d.get("boundingBox");d.get("rendered")&&(b&&b._node)&&d.get("boundingBox").removeClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+"-plugged")},
_render:function(){this.renderLabel();this.bindLabel();this.syncLabel();this.get("host").get("boundingBox").addClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+"-plugged")},renderLabel:function(){this._labelNode=a.Node.create("<label></label>");this._labelNode.addClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX);var d=this._labelNode;this.get("inField");var b=this.get("renderNode");this.get("strings.text");var c=this.get("className"),e=this.get("forNode"),g=this.get("host").get("contentBox");
c&&d.addClass(c);b?(a.Lang.isString(b)&&(b=g.one(b)),b.appendChild(d)):e?(a.Lang.isString(e)&&(e=g.one(e)),(b=e.getAttribute("id"))&&d.setAttribute("for",b),e.insert(d,"before")):(g.one("input")||g.one("select")||g.one("textarea")||g.one("button")).insert(d,"before")},bindLabel:function(){var a=this.get("id");this.on(a+"|classNameChange",function(a){this._labelNode.removeClass(a.prevVal);this._labelNode.addClass(a.newVal)},this)},syncLabel:function(){this._labelNode.setContent(this.get("strings.text"))}},
{NS:"label",CSS_PREFIX:"sqs-dialog-field-label",ATTRS:{strings:{value:{text:""}},renderNode:{value:null},className:{value:null},forNode:{value:null}}});a.namespace("Squarespace.DialogFields").DialogFieldLabel=function(d){a.Do.before(function(){this.plug(a.Squarespace.Plugin.DialogFieldLabel,a.merge({renderNode:d.labelRenderNode||null,forNode:d.labelForNode||null,className:d.labelClassName||null,"strings.text":this.get("strings.label")},d.labelConfig||{},this.getProperty("LABEL_CONFIG")||{}))},this,
"renderUI",this)};a.Squarespace.DialogFields.DialogFieldLabel.NAME="dialogFieldLabel"},"1.0",{requires:["base","node","plugin","squarespace-dialog-field-2"]});
YUI.add("squarespace-mixins-google-places-autocomplete",function(a){a.namespace("Squarespace.Mixins");var d={POSTAL_CODE:"postal_code",COUNTRY:"country",LOCALITY:"locality",ROUTE:"route",STREET_NUMBER:"street_number",ADMIN_LEVEL_1:"administrative_area_level_1",SUBLOCALITY:"sublocality",POSTAL_TOWN:"postal_town",NEIGHBORHOOD:"neighborhood"},b=a.Object.values(d),c=a.Squarespace.Localities.COUNTRY_OPTIONS,e=["geocode"];a.Squarespace.Mixins.GooglePlacesAutocomplete=a.Base.create("GooglePlacesAutocomplete",
a.Base,[],{initializer:function(){this.publish("placeDetails");a.Do.after(this._afterRenderUI,this,"renderUI",this);a.Do.after(this._afterBindUI,this,"bindUI",this);this.after("render",this._enableBrowserAutoComplete,this);this.setAttrs({source:a.bind(this._accessAutocompleteService,this),enableCache:!1,resultTextLocator:"description",resultFilters:this._filterResults,resultFormatter:this._formatResults,minQueryLength:3});a.Squarespace.GoogleMap.loaded||a.Squarespace.GoogleMap.load()},_afterRenderUI:function(){var a=
this.get("contentBox");a.addClass("sqs-google-places-autocomplete-mixin");a.one(".sqs-scroll-ac-scroll-container").append('<div class="google-required-elements"><div class="google-attributions"></div><div class="powered-by-google"></div></div>')},_afterBindUI:function(){this.before("select",this._getDetailsForPrediction,this);this.on("placeDetails",this._fillWithAddressLine1,this);this._inputNode.on("focus",function(){this._inputNode.setAttribute("autocomplete","off");this._inputIsFocused=!0},this);
this._inputNode.on("blur",function(){this._inputNode.setAttribute("autocomplete","on");this._inputIsFocused=!1},this)},_enableBrowserAutoComplete:function(){this._inputNode.setAttribute("autocomplete","on")},_getDetailsForPrediction:function(a){a.halt();var b=a.result.raw;this._accessPlaceDetailsService(b,function(a,c){if(c===google.maps.places.PlacesServiceStatus.OK){var e=this._extractPlaceComponents(a),e=this._buildLocationPayload(e,b);this.fire("placeDetails",{place:e})}else console.warn("Error communicating with Google Places API")})},
_extractPlaceComponents:function(e){return a.Array.reduce(e.address_components,{},function(e,h){var g=a.Array.find(h.types,function(c){return-1!==a.Array.indexOf(b,c)});e[g]=g?g===d.ADMIN_LEVEL_1?h.short_name:g===d.COUNTRY?c[h.short_name].title:h.long_name:"";return e})},_buildLocationPayload:function(b,c){var e=a.Object.getValue(b,"street_number")||"",k=a.Object.getValue(b,"route")||"",l=a.Object.getValue(b,"country")||"",n=a.Object.getValue(b,"locality")||"",p=a.Object.getValue(b,"sublocality")||
"",q=a.Object.getValue(b,"neighborhood")||"",p=[a.Object.getValue(b,"postal_town")||"",n,p,q],n=a.Array.find(p,function(b){return a.Array.find(c.terms,function(a){return a.value===b})})||n,p=a.Object.getValue(b,d.ADMIN_LEVEL_1)||"",q=a.Object.getValue(b,d.POSTAL_CODE)||"",t=a.Array.filter([n,p,q],function(a){return!!a}).join(", ").trim();return{address:(e+" "+k).trim(),country:l,city:n,state:p,zip:q,fullLocality:t}},_accessAutocompleteService:function(b,c){if(!this._autocompleteService)if(a.Squarespace.GoogleMap.loaded)this._autocompleteService=
new google.maps.places.AutocompleteService;else{console.warn("Google Places API has not loaded yet");c();return}this._autocompleteService.getPlacePredictions({input:b,types:e},a.bind(function(){this._inputIsFocused&&c.apply(this,arguments)},this))},_accessPlaceDetailsService:function(b,c){if(!this._placeDetailsService)if(a.Squarespace.GoogleMap.loaded){var e=this.get("contentBox").one(".google-attributions");this._placeDetailsService=new google.maps.places.PlacesService(e)}else{console.warn("Google Places API has not loaded yet");
c();return}this._placeDetailsService.getDetails(b,a.bind(c,this))},_formatResults:function(b,c){return a.Array.map(c,function(b){var c=b.raw.terms,e=b.raw.matched_substrings,d=-1!==a.Array.indexOf(b.raw.types,"street_address"),g=c[0].offset+c[0].value.length,c=c[1].offset+c[1].value.length,f=d?c:g;return a.Array.map(b.text.split(""),function(a,c){var d=["google-ac-character"];this._indexWithinMatchedSubstring(c,e)&&d.push("google-ac-matched-character");d='<span class="'+d.join(" ").trim()+'">'+a+
"</span>";return 0===c?'<div class="google-ac-address">'+d:c===f?d+"</div>":c===f+1?'<div class="google-ac-trailing">'+d:c===b.text.length?d+"</div>":d},this).join("")},this)},_indexWithinMatchedSubstring:function(b,c){return a.Array.some(c,function(a){return b>=a.offset&&b<a.offset+a.length})},_filterResults:function(b,c){return a.Array.filter(c,function(a){return this._predictionHasRouteComponent(a.raw)&&this._predictionContainsCountryInList(a.raw)},this)},_predictionContainsCountryInList:function(b){var c=
this.get("countriesAllowed");return!a.Lang.isArray(c)?!0:a.Array.find(c,function(a){return-1!==b.description.indexOf(a)})},_predictionHasRouteComponent:function(b){return-1!==a.Array.indexOf(b.types,d.ROUTE)}},{ATTRS:{countriesAllowed:{validator:a.Squarespace.AttrValidators.isNullOrArray}}})},"1.0",{requires:"autocomplete-highlighters base event-custom squarespace-attr-validators squarespace-localities squarespace-google-places-autocomplete-css squarespace-util".split(" ")});
YUI.add("squarespace-block-calendar-model",function(a){a.namespace("Squarespace.ContentModel").CalendarBlock=a.Base.create("CalendarBlockModel",a.Model,[],{},{ATTRS:{collectionId:{value:null}}})},"1.0",{requires:["base","model"]});
YUI.add("squarespace-flyout-link-edit",function(a){a.namespace("Squarespace.Flyout");a.Squarespace.Flyout.LinkEdit=a.Base.create("LinkEdit",a.Squarespace.Widgets.DataWidget,[],{initializer:function(){this.renderUI();this.bindUI()},destructor:function(a){this._promptPanel.destroy(a);this._editPanel.destroy(a)},renderUI:function(){this._promptPanel=new a.Squarespace.Panel({constrain:!0,zIndex:(2*a.Squarespace.DIALOG_ZINDEX_BASE||3E4)+105,animDuration:0,"align.points":this.get("alignment"),pointer:!1,
type:"link-edit"});this._editPanel=new a.Squarespace.Panel({constrain:!0,zIndex:(2*a.Squarespace.DIALOG_ZINDEX_BASE||3E4)+105,animDuration:this.get("panelAnimDuration"),"align.points":this.get("alignment"),pointer:!1,type:"link-edit"});this._promptPanel.set("visible",!1);this._editPanel.set("visible",!1);this._promptPanel.get("boundingBox").addClass("sqs-prevent-block-focus-change");this._editPanel.get("boundingBox").addClass("sqs-prevent-block-focus-change")},bindUI:function(){var d=this._promptPanel.get("contentBox");
d.delegate("click",this._openEditFromPrompt,".edit",this);d.delegate("click",this.unlink,".unlink",this);this.after("open",function(){var b=a.one("body"),c=this.get("anchorNode").ancestor("body");this.panelClickEvents&&0<this.panelClickEvents.length&&this._detachPanelClickEvents();this.panelClickEvents=[];c!==b&&(this.panelClickEvents.push(c.on(this.get("id")+"|click",this._onPanelClick,this)),this.panelClickEvents.push(c.on(this.get("id")+"|scroll",this._onPanelClick,this)));this.panelClickEvents.push(b.on(this.get("id")+
"|mouseup",this._onPanelClick,this))},this)},_detachPanelClickEvents:function(){for(var a;a=this.panelClickEvents.pop();)a.detach()},_onPanelClick:function(a){a=a.target;var b=this.get("anchorNode"),c=function(a){return a.compareTo(b)};!a.test(".sqs-panel-type-link-edit")&&(!a.ancestor(".sqs-panel-type-link-edit")&&!a.ancestor(c,!0)&&!a.test(".field-wysiwyg-tool-link")&&!a.ancestor(".field-wysiwyg-tool-link")&&!a.ancestor(".flyout-link-prompt")&&!a.ancestor(".cke"))&&this.close(!0)},openPrompt:function(d,
b,c,e,g){g=g||this.get("offset");this.set("anchorNode",d);this.set("linkUrl",b||d.getAttribute("href"));this.set("linkId",c||"");g&&this.set("offset",g);this.set("newWindow",a.Lang.isUndefined(e)?"_blank"==d.getAttribute("target"):e);d=this.get("linkUrl");b="#"==d?"No link URL":d;this.get("anchorNode").get("region").bottom+328>a.one(window).get("region").bottom&&(this.set("alignment",["bl","tl"]),this._topAlign=!0);this._promptPanel.get("bodyContent")?(c=this._promptPanel.get("boundingBox").one(".prompt-url"),
c.set("text",b),c.setAttribute("href",d)):this._promptPanel.set("bodyContent",a.Node.create('<div class="flyout-link-prompt"><a class="prompt-url text" href="'+d+'" target="_blank">'+b+'</a><div class="separator"> - </div><div class="edit text">Edit</div><div class="separator">|</div><div class="unlink text">Remove</div></div>'));this._promptPanel.set("align",{node:this.get("anchorNode"),points:this.get("alignment")});this._promptPanel.set("visible",!0);g&&this._promptPanel.setPanelOffset(g);this.bindPromptUI();
a.Squarespace.EscManager.addTarget(this);this.set("open",!0);this.fire("open")},openEdit:function(d,b,c,e,g){g=g||this.get("offset");this._promptPanel.get("visible")&&this._closePrompt();this.set("anchorNode",d);this.set("linkUrl",b||d.getAttribute("href"));this.set("linkId",c||"");g&&this.set("offset",g);this.set("newWindow",a.Lang.isUndefined(e)?"_blank"==d.getAttribute("target"):e);this.get("anchorNode").get("region").bottom+328>a.one(window).get("region").bottom&&(this.set("alignment",["bl","tl"]),
this._topAlign=!0);d=a.Node.create('<div class="flyout-link-edit-content"></div>');this._editPanel.set("bodyContent",d);this._editPanel.set("align",{node:this.get("anchorNode"),points:this.get("alignment")});this._editPanel.set("visible",!0);g&&this._editPanel.setPanelOffset(g);this._createLinkField=new a.Squarespace.DialogFields.CreateLink({data:{url:this.get("linkUrl"),newWindow:this.get("newWindow")},showPlaceholder:!1,disableNewWindow:this.get("disableNewWindow")});this._createLinkField.on("rendered",
function(){this._editPanel.align();g&&this._editPanel.setPanelOffset(g)},this);this._createLinkField.render(d);this.bindEditUI();this.get("open")||(a.Squarespace.EscManager.addTarget(this),this.set("open",!0),this.fire("open"))},_openEditFromPrompt:function(a){this.openEdit(this.get("anchorNode"),this.get("linkUrl"),this.get("linkId"),this.get("newWindow"))},close:function(d){this.get("open")&&(this._promptPanel.get("visible")?this._closePrompt():this._closeEdit(),this._detachPanelClickEvents(),this.set("alignment",
["tl","bl"]),this._topAlign=!1,this.set("open",!1),this.set("offset",null),a.one("body").detach(this.get("id")+"|click"),d&&a.Squarespace.EscManager.removeTarget(this))},bindPromptUI:function(){var a=this.get("anchorNode").ancestor(".field-wysiwyg");if(a)a.on("scroll",function(){this._promptPanel.align()},this)},bindEditUI:function(){var a=this.get("anchorNode").ancestor(".field-wysiwyg");if(a)a.on("scroll",function(){this._editPanel.align()},this);this._createLinkField.after("dataChange",function(a){a=
a.newVal;this.set("linkUrl",a.url||"#");this.set("newWindow",a.newWindow);this.updateLink()},this);if(this._topAlign)this._createLinkField.on("animating",function(){this._editPanel.align()},this);this._createLinkField.on("close",function(){this.close(!0)},this)},updateLink:function(){this.set("data",{anchorNode:this.get("anchorNode"),linkId:this.get("linkId"),linkUrl:this.get("linkUrl"),newWindow:this.get("newWindow")})},unlink:function(){this.close(!0);this.fire("unlink",{anchorNode:this.get("anchorNode"),
linkId:this.get("linkId")})},_closePrompt:function(){var a=this.get("offset");this._promptPanel.set("visible",!1);this.set("open",!1);a&&this._promptPanel.setPanelOffset(a)},_closeEdit:function(){var a=this.get("offset");this._editPanel.set("visible",!1);a&&this._editPanel.setPanelOffset(a);this.fire("close")}},{NS:"linkedit",ATTRS:{alignment:{value:["tl","bl"]},anchorNode:{value:null},disableNewWindow:{value:!1},linkId:{value:""},linkUrl:{value:"#"},newWindow:{value:!0},open:{value:!1},panelAnimDuration:{value:0.1}}})},
"0.1",{requires:"base base-build plugin overlay squarespace-panel squarespace-dialog-create-link squarespace-tab-view squarespace-external-link-tab squarespace-file-manager-tab squarespace-existing-content-link-tab".split(" ")});
YUI.add("squarespace-block-opentable-editor",function(a){a.namespace("Squarespace.Block.Editor").Opentable=a.Base.create("opentable-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Opentable")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Opentable"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Opentable=a.Base.create("blockOpentableEditor",a.Squarespace.ModelEditorDialog,
[],{},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={width:375,height:120,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Configure OpenTable",icon:"/universal/images-v6/icons/icon-opentable-20-light-solid.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Text,config:{name:"restaurantId",maxLength:10,className:"thin",submitOnEnter:!0,strings:{title:"OpenTable Restaurant ID",description:"Your OpenTable restaurant ID.  You can locate your restaurant ID on the OpenTable website."}}}]}]}},
"1.0",{requires:["base","squarespace-damask-context-globals","squarespace-dialog-text","squarespace-model-editor"]});YUI.add("squarespace-block-twitter-model",function(a){a.namespace("Squarespace.ContentModel").TwitterBlock=a.Base.create("TwitterBlockModel",a.Model,[],{},{ATTRS:{}})},"1.0",{requires:["base","model"]});
YUI.add("squarespace-block-in-browser-message-link",function(a){a.namespace("Squarespace.Block").InBrowserMessageLink=a.Base.create("block-in-browser-message-link",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-in-browser-message-link",ATTRS:{type:{readOnly:!0,valueFn:function(){return a.Squarespace.BlockType.IN_BROWSER_MESSAGE_LINK}},emailEditor:{readOnly:!0,valueFn:function(){return a.Squarespace.Block.Editor.InBrowserMessageLink}}}})},"1.0",{requires:["base","model","squarespace-block-base-modelsync",
"squarespace-block-in-browser-message-link-editor","squarespace-enum"]});
YUI.add("squarespace-form-preview",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.FormPreview=a.Base.create("formPreview",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this._getTemplateSchema(function(a){this._template=a;this.syncUI()},this)},bindUI:function(){d.superclass.bindUI.call(this);this.get("form").on("change",this.syncUI,this);this.after(["useLightboxChange","lightboxHandleTextChange","buttonAlignmentChange"],this.syncUI,this)},syncUI:function(){d.superclass.syncUI.call(this);
if(this._template){var b=this.get("form"),c=this.get("useLightbox"),b={showTitle:c,useLightbox:c,lightboxHandleText:this.get("lightboxHandleText")||"Open Form",buttonAlignment:this.get("buttonAlignment"),formFields:b.get("fields"),formSubmitButtonText:b.get("submitButtonText"),formSubmissionMessage:b.get("submissionMessage"),hideSubmitButton:this.get("hideSubmitButton")};this.get("contentBox").setHTML(a.JSONTemplate.evaluateJsonTemplate(this._template.html,b))}},_getTemplateSchema:function(b,c){a.Data.get({url:"/api/template/GetTemplateSchema",
data:{componentType:"widget",type:a.Squarespace.BlockType.FORM},success:function(a){b.call(c||this,a)}},this)}},{CSS_PREFIX:"sqs-preview-form",ATTRS:{form:{value:null,validator:function(b){return a.instanceOf(b,a.Squarespace.Models.Form)}},useLightbox:{value:!1},lightboxHandleText:{value:"Open Form"},hideSubmitButton:{value:!1}}})},"1.0",{requires:"base node json squarespace-enum squarespace-ss-widget squarespace-models-form squarespace-json-template".split(" ")});
YUI.add("squarespace-block-summary-v2",function(a){var d=a.namespace("Squarespace.Block").SummaryV2=a.Base.create("block-summary-v2",a.Squarespace.Block.ModelSyncBase,[],{syncUI:function(){d.superclass.syncUI.call(this);this._plugImageLoader()},bindUI:function(){this.get("model").after("change",this._renderBlock,this);this.after("resized",this._renderBlock,this)},_renderBlock:function(a){this.get("boundingBox").setData("block",this.get("model").getAttrs());this._shouldGetWidgetRendering(a)?d.superclass._renderBlock.call(this):
this._updateWhitelistedAttrs(a)},_renderSuccess:function(a){this.set("widgetContent",a.html);this._setWidgetContent()},_setWidgetContent:function(){var b=a.Node.create(this.get("widgetContent")),c=this.get("contentBox");c.setHTML(b);a.Squarespace.GalleryManager.initializeBlock(c)},_shouldGetWidgetRendering:function(b){return!a.Lang.isValue(b)||!a.Object.hasKey(b,"changed")?!0:!a.Squarespace.Block.Utils.checkWhitelist(this.get("modelWhiteList"),b.changed)},_updateWhitelistedAttrs:function(a){var c=
this.get("model"),e=this.get("contentBox");a.changed.headerText?e.one(".summary-heading").setHTML(c.get("headerText")):a.changed.textSize?this._updateClassThatStartsWith("summary-block-setting-text-size-",c.get("textSize"),e.get("children")):a.changed.textAlignment?this._updateClassThatStartsWith("summary-block-setting-text-align-",c.get("textAlignment"),e.get("children")):a.changed.listImageAlignment&&this._updateClassThatStartsWith("summary-block-setting-design-list-thumbnail-",c.get("listImageAlignment"),
e.get("children"))},_updateClassThatStartsWith:function(b,c,e){var d=e.getAttribute("class")[0].split(" ");a.Array.forEach(d,function(a){a=a.trim();a.startsWith(b)&&e.hasClass(a)&&e.replaceClass(a,b+c)},this)},_getDefaultContent:function(){return{collectionId:"",design:"autogrid",headerText:"Featured",textSize:"medium",pageSize:10,imageAspectRatio:1.5,columnWidth:270,gutter:60,listImageSize:30,listImageAlignment:"left",slidesPerRow:3,textAlignment:"left",showTitle:!0,showThumbnail:!0,showExcerpt:!0,
showReadMoreLink:!1,showPrice:!0,showPastOrUpcomingEvents:"upcoming",metadataPosition:"below-content",primaryMetadata:null,secondaryMetadata:null,filter:{},autoCrop:!0,lightbox:!1,mixedContent:!0}}},{CSS_PREFIX:"sqs-block-summary-v2",MODEL:a.Squarespace.ContentModel.SummaryV2Block,ATTRS:{modelWhiteList:{setter:function(b){return a.Lang.isArray(b)?b:a.Lang.isString(b)?[b]:[]},value:["headerText","textSize","listImageAlignment","textAlignment"]},defaultContentModel:{valueFn:"_getDefaultContent"},editor:{value:a.Squarespace.Block.Editor.SummaryV2},
type:{value:a.Squarespace.BlockType.SUMMARY_V2},widgetContent:{value:""},floatable:{value:!0}}})},"1.0",{requires:"base model squarespace-block-base-modelsync squarespace-block-summary-v2-editor squarespace-block-utils squarespace-enum squarespace-gallery-ng squarespace-image-loader squarespace-models-content-collection squarespace-video-loader".split(" ")});
YUI.add("widget-stack",function(a,d){function b(a){}var c=a.Lang,e=a.UA,g=a.Node,f=a.Widget;b.ATTRS={shim:{value:6==e.ie},zIndex:{value:0,setter:"_setZIndex"}};b.HTML_PARSER={zIndex:function(a){return this._parseZIndex(a)}};b.SHIM_CLASS_NAME=f.getClassName("shim");b.STACKED_CLASS_NAME=f.getClassName("stacked");b.SHIM_TEMPLATE='<iframe class="'+b.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>';b.prototype={initializer:function(){this._stackNode=
this.get("boundingBox");this._stackHandles={};a.after(this._renderUIStack,this,"renderUI");a.after(this._syncUIStack,this,"syncUI");a.after(this._bindUIStack,this,"bindUI")},_syncUIStack:function(){this._uiSetShim(this.get("shim"));this._uiSetZIndex(this.get("zIndex"))},_bindUIStack:function(){this.after("shimChange",this._afterShimChange);this.after("zIndexChange",this._afterZIndexChange)},_renderUIStack:function(){this._stackNode.addClass(b.STACKED_CLASS_NAME)},_parseZIndex:function(a){a=!a.inDoc()||
"static"===a.getStyle("position")?"auto":a.getComputedStyle("zIndex");return"auto"===a?null:a},_setZIndex:function(a){c.isString(a)&&(a=parseInt(a,10));c.isNumber(a)||(a=0);return a},_afterShimChange:function(a){this._uiSetShim(a.newVal)},_afterZIndexChange:function(a){this._uiSetZIndex(a.newVal)},_uiSetZIndex:function(a){this._stackNode.setStyle("zIndex",a)},_uiSetShim:function(a){a?(this.get("visible")?this._renderShim():this._renderShimDeferred(),6==e.ie&&this._addShimResizeHandlers()):this._destroyShim()},
_renderShimDeferred:function(){this._stackHandles.shimdeferred=this._stackHandles.shimdeferred||[];this._stackHandles.shimdeferred.push(this.on("visibleChange",function(a){a.newVal&&this._renderShim()}))},_addShimResizeHandlers:function(){this._stackHandles.shimresize=this._stackHandles.shimresize||[];var a=this.sizeShim,b=this._stackHandles.shimresize;b.push(this.after("visibleChange",a));b.push(this.after("widthChange",a));b.push(this.after("heightChange",a));b.push(this.after("contentUpdate",a))},
_detachStackHandles:function(a){a=this._stackHandles[a];var b;if(a&&0<a.length)for(;b=a.pop();)b.detach()},_renderShim:function(){var a=this._shimNode,b=this._stackNode;a||(a=this._shimNode=this._getShimTemplate(),b.insertBefore(a,b.get("firstChild")),this._detachStackHandles("shimdeferred"),this.sizeShim())},_destroyShim:function(){this._shimNode&&(this._shimNode.get("parentNode").removeChild(this._shimNode),this._shimNode=null,this._detachStackHandles("shimdeferred"),this._detachStackHandles("shimresize"))},
sizeShim:function(){var a=this._shimNode,b=this._stackNode;a&&(6===e.ie&&this.get("visible"))&&(a.setStyle("width",b.get("offsetWidth")+"px"),a.setStyle("height",b.get("offsetHeight")+"px"))},_getShimTemplate:function(){return g.create(b.SHIM_TEMPLATE,this._stackNode.get("ownerDocument"))}};a.WidgetStack=b},"3.17.2",{requires:["base-build","widget"],skinnable:!0});
YUI.add("squarespace-block-content-html",function(a){a.namespace("Squarespace.Content").Html=a.Base.create("html",a.Squarespace.SSWidget,[a.WidgetChild,a.Squarespace.Content.ContentBase],{initializer:function(a){(!a||!a.model)&&this.set("model",{});this.get("boundingBox").addClass("sqs-dd-invalid-handle")},syncUI:function(){var d=this.get("model").get("html");this.get("boundingBox").toggleClass("sqs-empty",a.Lang.isValue(d));var b=this.get("parent");(!b||!b.get("editController").isMobileApp())&&this.get("editable")&&
-1<["visual","wysiwyg"].indexOf(this.get("model").get("engine"))?this.contentEditor.visualEditor.setEditorData(d):this.get("contentBox").set("innerHTML",d);this.hasPlugin("contentEditor")&&this.contentEditor.syncEditorUI();b&&b.fire("widget:contentUpdate")},updateContentFromDOM:function(){var a=this.get("contentBox").getHTML();this.get("model").set("html",a||"")},setContent:function(a){this.get("model").set("html",a||"");this.syncUI()}},{CSS_PREFIX:"sqs-html",ATTRS:{model:{lazyAdd:!1,writeOnce:!0,
setter:function(d){if(a.instanceOf(d,a.Squarespace.ContentModel.Html))return d;if(a.Lang.isObject(d))return new a.Squarespace.ContentModel.Html(d)}},placeholderText:{value:"Write here..."},editor:{getter:function(){var d=this.get("parent");return d&&d.get("editController").isMobileApp()?a.Squarespace.Content.HtmlEditorMobile:d&&d.get("editMode")===a.Squarespace.Layout.EditMode.EMAIL?a.Squarespace.Content.HtmlEditorEmail:a.Squarespace.Content.HtmlEditor}},tabIndex:{value:null},type:{value:"full"},
referenceNode:{}}});a.namespace("Squarespace.ContentModel").Html=a.Base.create("HtmlContentModel",a.Model,[],{},{ATTRS:{engine:{value:"wysiwyg"},source:{value:""},html:{value:""}}})},"1.0",{requires:["model","squarespace-ss-widget","squarespace-block-content-base","widget-child"]});
YUI.add("squarespace-uploader",function(a){if(a.Squarespace.Utils.isInDamaskFrame())a.Squarespace.Uploader=window.top.Y.Squarespace.Uploader;else{a.namespace("Squarespace");var d={ERR_FILE_UPLOAD:"Upload failed, please retry",ERR_FILE_PROCESSING:"Error processing file, please retry.",INVALID_SIZE_TITLE:"File Size Limit Exceeded",INVALID_SIZE:"The file <strong>{name}</strong> is too large. The maximum allowed file size is <strong>{size}MB</strong>.",INVALID_TYPE_TITLE:"Only {typeDescription} Allowed",
INVALID_TYPE:"The file <strong>{name}</strong> does not appear to be a supported {type} file.",HINT_FILE_UPLOAD:"Click here or drag and drop to add a file",HINT_FILE_UPLOAD_CLICK_ONLY:"Click here to add a file"};"none"===a.Uploader.TYPE?console.error("non-functional uploader"):a.Squarespace.Uploader=a.Base.create("uploader",a.Uploader,[a.WidgetChild],{initializer:function(b){this.set("swfURL","/combo/yui/?3.10.1/uploader/assets/flashuploader.swf");this.set("buttonClassNames",{hover:"",active:"",focus:""});
this.after(["dragenter","dragleave","drop"],this._ddHandler,this);this._files={};this.get("fileFilters")||this.addAttr("fileFilters",{value:null});this.after("uploadprogress",this._onUploadFileProgress,this);this.after("uploadcomplete",this._onUploadFileComplete,this);this.on("uploaderror",this._onUploadFileFailure,this);this.on("fileListChange",this._fileListChange,this);this.after("fileFiltersChange",this._fileFiltersChange,this);a.Data.DEBUG&&(this.on("fileuploadstart",function(b){console.log("[UPLOAD] SEND:  "+
this.get("uploadURL")+" (POST) : ",a.clone(b.target._files[b.file.get("id")].postData))},this),this.on("uploadcomplete",function(b){console.log("[UPLOAD] RECV:  "+this.get("uploadURL")+" (POST) : ",a.clone(b.target._files[b.file.get("id")].postData))},this));b.fileFilters&&this.set("fileFilters",b.fileFilters)},destructor:function(){var a=this.get("dragAndDropArea");a&&a.removeClass("drop-active");this._jobOnceCompleteEvt&&this._jobOnceCompleteEvt.detach();this._jobOnceFailureEvt&&this._jobOnceFailureEvt.detach()},
cleanupFile:function(a){if(a){var c=a.get("id");this.set("fileList",this.get("fileList").filter(function(a){return a.get("id")!==c}),{source:"cleanupFile"});delete this._files[c]}},bindUI:function(){a.Squarespace.Uploader.superclass.bindUI.call(this);this.on("selectButtonLabelChange",function(a){this.get("selectFilesButton").one(".text").setContent(a.newVal)},this)},_onUploadFileProgress:function(a){var c=a.file&&a.file.get("id");if(c=(c=this._files[c])&&c.placeholder&&c.placeholder.progress)c.set("showBar",
!0),c.set("showSpinner",!1),c.set("progress",a.percentLoaded)},_onUploadFileComplete:function(b){var c=b.file&&b.file.get("id"),c=this._files[c]||{},e=c.placeholder&&c.placeholder.progress,d=b.data;if("string"===typeof d)try{d=a.JSON.parse(d)}catch(f){this._onUploadFileFailure(b)}if(d.error)this._onServerRejectFile(b,d);else if(e?(e.set("progress",100),e.set("showBar",!1)):console.warn("No progress plugin was found on the placeholder. (_onUploadFileComplete)"),this.get("fileComplete")&&this.get("fileComplete")(c,
d),this.get("createJob")){if(d&&d.job&&(e&&e.set("showSpinner",!0),b=c.job=this.get("createJob")(c,d)))b.get("id")||b.set("id",c.id),this._jobOnceCompleteEvt=b.once("complete",a.bind(this._onJobHandler,this,"Complete",c)),this._jobOnceFailureEvt=b.once("failure",a.bind(this._onJobHandler,this,"Failure",c)),Static.JOB_MANAGER.addJob(b)}else e&&c.placeholder.progress.setAttrs({showBar:!1,showSpinner:!1}),this.cleanupFile(b.file),this.fire("upload-complete",a.JSON.parse(b.data))},_onServerRejectFile:function(b,
c){new a.Squarespace.Widgets.Alert({"strings.title":"Upload error","strings.message":c.error});this.fire("upload-failure");this.cleanupFile(b.file)},_onUploadFileFailure:function(b){var c=this.fileDataFromFile(b.file);c.error={type:a.Squarespace.MediaProcessingErrors.UPLOAD,message:d.ERR_FILE_UPLOAD};b.fileData=c;this.cleanupFile(b.file);this.abort()},_onJobHandler:function(b,c,e){var g="job"+b,f=c.placeholder&&c.placeholder.progress;f&&f.set("showSpinner",!1);if(c.id&&!this._files[c.id])return console.log("file upload aborted");
"failure"==b.toLowerCase()&&(c.error={type:a.Squarespace.MediaProcessingErrors.PROCESSING,message:d.ERR_FILE_PROCESSING});this.get(g)&&this.get(g)(c,e.target);this.cleanupFile(c.file);this.fire(g,{job:e.target,fileData:c})},_ddHandler:function(a){var c=this.get("dragAndDropArea");c&&("dragenter"===a.type?c.addClass("drop-active"):c.removeClass("drop-active"))},uploadAll:function(){var b=this.get("fileList");b&&0===b.length||(this.get("isTransient")&&!this.get("transientItemId")?this.preflightTransient(this.get("isGlobal"),
function(){a.each(this._files,function(a){var b=a.postData,d=this.get("transientItemId");b&&("undefined"!==typeof b.replaceItemId&&!b.replaceItemId)&&(a.postData.replaceItemId=d)},this);this.uploadAll()},this):(b=this.get("preflight"))?b(a.bind(function(){a.each(this.get("fileList"),function(a,b){this._processFile(this.fileDataFromFile(a))},this);a.Squarespace.Uploader.superclass.uploadAll.call(this)},this)):a.Squarespace.Uploader.superclass.uploadAll.call(this))},abort:function(){this.set("fileList",
[])},fileDataFromFile:function(a){if(a)return this._files[a.get("id")]},preflightTransient:function(b,c,e){a.Data.post({url:"/api/commondata/"+(b?"SaveTransientGlobalItem":"SaveTransientItem"),data:this.transientItemId,success:a.bind(function(a){this.set("transientItemId",a.id);this.set("transientItemUrl",a.urlId);c.call(e||this,a)},this)})},validateFile:function(b){b=b.get?this.fileDataFromFile(b):b;var c=b.file,e=[];c.get("size")>1048576*this.get("maxSize")&&e.push({title:d.INVALID_SIZE_TITLE,message:a.substitute(d.INVALID_SIZE,
{name:c.get("name"),size:this.get("maxSize")})});if(this._extensionCheck&&!this._extensionCheck.test(c.get("name"))){var g=this.get("fileFilters").map(function(a){return a.description}),g=1<g.length?g.slice(0,-1).join(",")+" or "+g[g.length-1]:g[0],g={typeDescription:g,name:c.get("name"),type:g.toLowerCase().replace(/s\b/g,"")};e.push({title:a.substitute(d.INVALID_TYPE_TITLE,g),message:a.substitute(d.INVALID_TYPE,g)})}g=this.get("validateFileFn");a.Lang.isFunction(g)&&(c=g(c,b),a.Lang.isObject(c)&&
e.push(c));e.length&&(b.invalid=e);return!e.length},makeDefaultErrorBlock:function(b){var c=(b=b.file?b:this.fileDataFromFile(b))&&b.error;return!c?"":err=a.Node.create('<div class="failed"><div class="message">'+c.message+'</div><div class="filename">'+b.file.get("name")+'</div><div class="button"><div class="button-title">Dismiss</div></div></div>')},_fileFiltersChange:function(b){var c=[];b.newVal&&(a.each(b.newVal,function(a){a=a.extensions.split(";").map(function(a){return"(?:"+a.slice(2)+"$)"});
c=c.concat(a)},this),this._extensionCheck=RegExp(c.join("|"),"i"))},_setFileFilters:function(){if(this._fileInputField)if(0<this.get("fileFilters").length){for(var a=[],c=this.get("fileFilters"),e=0;e<c.length;e++)a+=c[e].acceptTypes;this._fileInputField.set("accept",a)}else this._fileInputField.set("accept","")},_fileListChange:function(b){if("cleanupFile"!=b.source){var c={},e=!1;!this.get("multipleFiles")&&1<b.newVal.length&&(b.newVal=[b.newVal[0]]);var d=[];a.each(b.newVal,function(a,b){var f=
a.get("id");if(this._files[f])d.push(a);else{var n=this._processFile({id:f,file:a,index:b});n.invalid?(console.log("invalid",a.get("name")),d.push(a)):(c[f]=n,e=!0,!c[f].placeholder&&this.get("addPlaceholder")&&(c[f].placeholder=this.get("addPlaceholder")(c[f])),console.log("processing "+a.get("name")),delete this._files[f])}},this);if(d.length)for(var f=0;f<d.length;f++)b.newVal.remove(d[f]);this.get("removePlaceholder")&&a.each(this._files,function(a,b){this.queue&&this.queue.cancelUpload(a.file);
a.job&&Static.JOB_MANAGER.removeJobById(a.job.id);this.get("removePlaceholder")(a)},this);this._files=c;e&&this.get("autoUpload")&&a.later(0,this,this.uploadAll)}},_processFile:function(b){this.validateFile(b);var c=this.get("processFile");c&&c(b);b.postData=a.merge(b.postData||{},{fileName:b.file.get("name"),fileSize:b.file.get("size")});c=this.get("postVarsPerFile");c[b.id]=b.postData;this.set("postVarsPerFile",c);return b},_makeDefaultSelectFilesButton:function(){return a.Node.create('<button class="upload-indicator image" tabindex="0"><div class="icon">&nbsp;</div><div class="text">'+
this.get("selectButtonLabel")+"</div></button>")}},{CSS_PREFIX:"sqs-uploader",ATTRS:{processFile:{},addPlaceholder:{},removePlaceholder:{},preflight:{},createJob:{},fileComplete:{},jobComplete:{},jobFailure:{},autoUpload:{value:!1},isTransient:{value:!1},isGlobal:{value:!1},transientItemId:{value:""},transientItemUrl:{value:""},maxSize:{value:20},uploadURL:{valueFn:function(){return"/api/commondata/"+(this.get("isGlobal")?"SaveGlobalMedia":"SaveMedia")},setter:function(b){return a.Data.addCrumb(b)}},
selectButtonLabel:{value:"flash"==a.Uploader.TYPE?d.HINT_FILE_UPLOAD_CLICK_ONLY_HINT:d.HINT_FILE_UPLOAD},selectFilesButton:{valueFn:"_makeDefaultSelectFilesButton",setter:function(a){return!a?this._makeDefaultSelectFilesButton():a}},validateFileFn:{}}})}},"1.0",{requires:["base","node","widget-child","uploader","squarespace-widgets-alert"]});
YUI.add("squarespace-dialog-statepicker-inset-calendar",function(a){var d=a.namespace("Squarespace.DialogFields").InsetCalendar=a.Base.create("insetCalendar",a.Squarespace.DialogField2,[a.WidgetChild],{initializer:function(b){var c;c=a.Lang.isDate(b.data)?b.data:a.Lang.isNumber(b.data)?new Date(b.data):new Date;a.Lang.isValue(b.day)||this.set("day",c.getDate());a.Lang.isValue(b.month)||this.set("month",c.getMonth());a.Lang.isValue(b.year)||this.set("year",c.getFullYear())},renderUI:function(){d.superclass.renderUI.call(this);
var a=this.get("contentBox");this._nextMonth=a.one(".next");this._prevMonth=a.one(".prev")},bindUI:function(){d.superclass.bindUI.call(this);this._nextMonth.on("click",this.showNextMonth,this);this._prevMonth.on("click",this.showPrevMonth,this);a.delegate("click",this.handleDayClick,this.get("contentBox"),"td",this);this.after(["dayChange","monthChange"],this.setDate,this)},syncUI:function(){d.superclass.syncUI.call(this);var a=this.get("data")||new Date;this.renderCalendar(a,this.get("type"))},setDate:function(b){if(!b.silent){var c=
this.get("day"),e=this.get("year"),d=this.get("month"),f=new Date;"day"===b.attrName?c=b.newVal:"month"===b.attrName&&(d=b.newVal,a.Lang.isValue(b.prevVal)&&(e=this.updateYear(b.newVal,b.prevVal)));f.set({year:e,month:d,day:c,hours:0,minutes:0,seconds:0,milliseconds:0});this.set("data",new Date(f))}},handleDayClick:function(b){b.halt();var c=parseInt(a.Lang.trim(b.target.get("text")),10);b=b.target;"duration"===this.get("type")&&this.get("allowNever")&&(b.hasClass("fade")||b.hasClass("selected"))||
(b.hasClass("today")||b.hasClass("active"))&&this.set("day",parseInt(c,10))},showNextMonth:function(a){this.updateMonth(1)},showPrevMonth:function(a){this.updateMonth(-1)},renderCalendar:function(b,c){var e=this.get("contentBox"),d;d=this.get("data");var f=a.Squarespace.DateUtils.shiftForWebsiteTimezoneDisplay(b),h=new Date(f.getTime()),k=new Date(f.getTime()),l=b.getDaysInMonth(),n=a.Squarespace.DateUtils.shiftForWebsiteTimezoneDisplay(new Date),p=new Date(f.getTime()),q,t=1,r=0,u=0,s="",v=a.Squarespace.DateUtils.dateFormat(b,
{format:"%B %Y"});k.moveToFirstDayOfMonth();k=k.getDay();p.addMonths(-1);for(var p=p.getDaysInMonth(),w=function(a,b){return'<td class="'+a+'">'+b+"</td>"},r=0;6>r;r++){s+='<tr class="body-row">';if(t>l+k)for(u=0;7>u;++u)s+=w("fade","&nbsp");else for(u=0;7>u;++u)displayVal=t-k,t<=k?s+=w("fade",p+displayVal):t<=l+k?(h.set({day:displayVal}),q="active",d&&f.getDate()===displayVal?q="active selected":n.getFullYear()===f.getFullYear()&&n.getMonth()===f.getMonth()&&n.getDate()===displayVal?q="today"+("duration"===
c?" active":""):h.getTime()<n.getTime()&&"duration"===c&&(q="fade"),s+=w(q,displayVal)):s+=w("fade",displayVal-l),t+=1;s+="</tr>"}d=e.one("table > tbody");d.empty();d.append(a.Node.create(s));e.one(".month").set("text",v)},updateYear:function(a,c){var e=c-a,d=this.get("year");1!==Math.abs(e)&&(1<e?d++:-1>e&&d--,this.set("year",d));return d},updateMonth:function(b){var c=this.get("data")||new Date;b=Number(b);a.Lang.isNumber(b)||(b=0);c.addMonths(b);this.set("day",c.getDate(),{silent:!0});this.setAttrs({month:c.getMonth()});
this.renderCalendar(c,this.get("type"))}},{CSS_PREFIX:"calendar-wrapper",TEMPLATE:'<div class="header"><div class="prev back">&nbsp;</div><span class="month">&nbsp;</span><div class="next">&nbsp;</div></div><table cellpadding="0" cellspacing="0"><thead><tr><td>Su</td><td>Mo</td><td>Tu</td><td>We</td><td>Th</td><td>Fr</td><td>Sa</td></tr></thead><tbody></tbody></table>',ATTRS:{day:{value:1,setter:function(a){return parseInt(a,10)}},month:{},year:{},data:{setter:function(b){return!a.Lang.isValue(b)?
null:a.Lang.isNumber(b)?new Date(b):!a.Lang.isDate(b)?new Date:b}}}})},"1.0",{requires:"base base-build squarespace-dialog-fields squarespace-dialog-field-2 squarespace-node-flyout squarespace-date-utils".split(" ")});
YUI.add("widget-modality",function(a,d){function b(a){}var c=a.Lang.isBoolean,e=a.ClassNameManager.getClassName,g=function(){var b=a.config.doc,c=null,e;if(b.createElement&&(e=b.createElement("div"))&&e.style)if(e.style.position="fixed",e.style.top="10px",(b=b.body)&&b.appendChild&&b.removeChild)b.appendChild(e),c=10===e.offsetTop,b.removeChild(e);return c}(),f={modal:e("widget","modal"),mask:e("widget","mask")};b.ATTRS={maskNode:{getter:"_getMaskNode",readOnly:!0},modal:{value:!1,validator:c},focusOn:{valueFn:function(){return[{eventName:"clickoutside"},
{eventName:"focusoutside"}]},validator:a.Lang.isArray}};b.CLASSES=f;b._MASK=null;b._GET_MASK=function(){var c=b._MASK,e=a.one("win");if(c&&null!==c.getDOMNode()&&c.inDoc())return c;c=a.Node.create("<div></div>").addClass(f.mask);b._MASK=c;g?c.setStyles({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",display:"block"}):c.setStyles({position:"absolute",width:e.get("winWidth")+"px",height:e.get("winHeight")+"px",top:"0",left:"0",display:"block"});return c};b.STACK=[];b.prototype={initializer:function(){a.after(this._renderUIModal,
this,"renderUI");a.after(this._syncUIModal,this,"syncUI");a.after(this._bindUIModal,this,"bindUI")},destructor:function(){this._uiSetHostVisibleModal(!1)},_uiHandlesModal:null,_renderUIModal:function(){var a=this.get("boundingBox");this._repositionMask(this);a.addClass(f.modal)},_bindUIModal:function(){this.after("visibleChange",this._afterHostVisibleChangeModal);this.after("zIndexChange",this._afterHostZIndexChangeModal);this.after("focusOnChange",this._afterFocusOnChange);if(!g||a.UA.ios&&5>a.UA.ios||
a.UA.android&&3>a.UA.android)a.one("win").on("scroll",this._resyncMask,this)},_syncUIModal:function(){this._uiSetHostVisibleModal(this.get("visible"))},_focus:function(){var a=this.get("boundingBox"),b=a.get("tabIndex");a.set("tabIndex",0<=b?b:0);this.focus()},_blur:function(){this.blur()},_getMaskNode:function(){return b._GET_MASK()},_uiSetHostVisibleModal:function(c){var e=b.STACK,d=this.get("maskNode"),g=this.get("modal");c?(a.Array.each(e,function(a){a._detachUIHandlesModal();a._blur()}),e.unshift(this),
this._repositionMask(this),this._uiSetHostZIndexModal(this.get("zIndex")),g&&(d.show(),a.later(1,this,"_attachUIHandlesModal"),this._focus())):(c=a.Array.indexOf(e,this),0<=c&&e.splice(c,1),this._detachUIHandlesModal(),this._blur(),e.length?(e=e[0],this._repositionMask(e),e._uiSetHostZIndexModal(e.get("zIndex")),e.get("modal")&&(a.later(1,e,"_attachUIHandlesModal"),e._focus())):"block"===d.getStyle("display")&&d.hide())},_uiSetHostZIndexModal:function(a){this.get("modal")&&this.get("maskNode").setStyle("zIndex",
a||0)},_attachUIHandlesModal:function(){var c,e,d;if(!(this._uiHandlesModal||b.STACK[0]!==this)){var f=this.get("boundingBox"),p=this.get("maskNode"),q=this.get("focusOn"),t=a.bind(this._focus,this),r=[],u,s;u=0;for(s=q.length;u<s;u++)d=e=c=void 0,c=q[u].node,e=q[u].eventName,d=q[u].keyCode,!c&&!d&&e?r.push(f.on(e,t)):c&&!d&&e?r.push(c.on(e,t)):c&&d&&e?r.push(c.on(e,t,d)):a.Log('focusOn ATTR Error: The event with name "'+e+'" could not be attached.');g||r.push(a.one("win").on("scroll",a.bind(function(){p.setStyle("top",
p.get("docScrollY"))},this)));this._uiHandlesModal=r}},_detachUIHandlesModal:function(){a.each(this._uiHandlesModal,function(a){a.detach()});this._uiHandlesModal=null},_afterHostVisibleChangeModal:function(a){this._uiSetHostVisibleModal(a.newVal)},_afterHostZIndexChangeModal:function(a){this._uiSetHostZIndexModal(a.newVal)},isNested:function(){return 1<b.STACK.length?!0:!1},_repositionMask:function(b){var c=this.get("modal"),e=b.get("modal"),d=this.get("maskNode");if(c&&!e)d.remove(),this.fire("maskHide");
else if(!c&&e||c&&e)d.remove(),this.fire("maskHide"),b=b.get("boundingBox"),b=b.get("parentNode")||a.one("body"),b.insert(d,b.get("firstChild")),this.fire("maskShow")},_resyncMask:function(a){var b=a.currentTarget;a=b.get("docScrollX");var c=b.get("docScrollY"),e=b.get("innerWidth")||b.get("winWidth"),b=b.get("innerHeight")||b.get("winHeight");this.get("maskNode").setStyles({top:c+"px",left:a+"px",width:e+"px",height:b+"px"})},_afterFocusOnChange:function(){this._detachUIHandlesModal();this.get("visible")&&
this._attachUIHandlesModal()}};a.WidgetModality=b},"3.17.2",{requires:["base-build","event-outside","widget"],skinnable:!0});
YUI.add("squarespace-dialog-flow",function(a){a.namespace("Squarespace");a.Squarespace.DialogFlow=a.Base.create("dialogFlow",a.Base,[],{initializer:function(a){this.set("options",a.options);this.set("title",a.title);this.set("fieldName",a.fieldName)},showPrescreen:function(d){var b=this.get("fieldName");a.Lang.isUndefined(d)&&(d={});var c=this._prescreen=new a.Squarespace.EditingDialog({name:this.get("fieldName"),overlay:0.5,width:this.get("width"),style:"flyout",initialData:d,closeOthers:!1,buttons:[{type:"cancel",
title:"Cancel"}],discardChangesConfirmation:!1,primaryTabs:[{title:this.get("title"),icon:this.get("icon")||"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{title:this.get("subtitle"),text:this.get("description")}},{ctor:a.Squarespace.DialogFields.MultiOption,config:{name:b,options:this.get("options"),optionClickCb:this.get("optionClickCb"),columns:this.get("optionColumns")}}]}]});c.on("ready",function(){c.getField(b).after("dataChange",
function(a){c.close();this.proceed(d,a.newVal)},this)},this);c.show()},close:function(){this._prescreen.close()},proceed:function(d,b){d[this.get("fieldName")]=b;var c=this.get("nextDialogGenerator");if(c)if(c=c(d),c instanceof a.Squarespace.DialogFlow)c.showPrescreen(d);else if(c.constructor instanceof a.Squarespace.EditingDialog.constructor)c.show();else{if(void 0===c)throw"nextDialog not specified";throw"Unsupported Dialog";}else this.fire("proceed",{valueChoice:b})}},{NS:"dialogFlow",ATTRS:{description:{value:""},
fieldName:{value:""},nextDialogGenerator:{value:null},options:{value:[]},optionClickCb:{value:null},optionColumns:{value:1},subtitle:{value:""},title:{value:""},width:{value:550}}})},"1.0",{requires:["base","squarespace-dialog","squarespace-dialog-description","squarespace-dialog-multi-option"]});
YUI.add("squarespace-dialog-form-builder",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.FormBuilder=a.Base.create("formBuilder",a.Squarespace.DialogField2,[a.WidgetParent],{initializer:function(){this._fieldSelector=this._createFieldSelector();this._edited=!1},destructor:function(){this._fieldSelector.destroy();this._ddDelegate&&this._ddDelegate.destroy()},renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("contentBox");this._childrenContainer=
this._fieldContainer=a.appendChild('<div class="field-container"></div>');this._addFieldButton=a.appendChild('<div class="add-field-button"><div class="title"><div class="type-icon add"></div><span class="title-text">Add Field</span></div></div>');this._setupDragAndDrop()},bindUI:function(){d.superclass.bindUI.call(this);this._fieldSelector.on("datachange",function(b){b=b.getValue();var c=this._validateFieldSelection(b);c?new a.Squarespace.Widgets.Alert({"strings.title":c.title,"strings.message":c.description}):
(this._fieldSelector.close(),this.addField(a.clone(b),!0))},this);this.on("change",function(){this.fire("dataChange",{noSyncUI:!0});this._edited=!0},this);this._addFieldButton.on("click",function(a){a.halt();this._openFieldSelector()},this);this.on("*:editingChange",function(a){a.newVal&&this.closeChildren(a.target)},this);this.on("*:removeClicked",function(a){this._confirmFieldRemoval(a.target)},this);this.on("*:fieldChange",function(a){this.fire("change")},this);this.on("*:destroy",function(){this._ddDelegate.syncTargets()},
this);this._ddReorder.on("reordered",function(a){this._reorderField(a.oldIndex,a.newIndex)},this)},syncUI:function(){d.superclass.syncUI.call(this);this.removeAll().each(function(a){a.destroy()});var b=this.get("data");a.Array.each(b,function(c){a.Squarespace.FormEditingUtils.resolveFieldId(c,b);this._renderFieldWidget(c)},this)},didDataChange:function(){return this._edited},closeChildren:function(b){var c=a.Lang.isValue(b);this.each(function(a){a.get("editing")&&(!c||a!==b)&&a.closeEdit()})},addField:function(b,
c){var e=this.get("data");a.Squarespace.FormEditingUtils.resolveFieldTitle(b,e);a.Squarespace.FormEditingUtils.resolveFieldId(b,e);this._renderFieldWidget(b,c);e.push(b);this.fire("change")},removeField:function(b){var c=b.get("field").id;this._removeFieldWidget(b);b=this.get("data");var e;a.Array.each(b,function(a,b){a.id===c&&(e=b)},this);b.splice(e,1);this.fire("change")},lockField:function(a){this.each(function(c){c.get("field").id===a.id&&c.lock()},this)},unlockField:function(a){this.each(function(c){c.get("field").id===
a.id&&c.unlock()},this)},getFieldWidget:function(a){var c;this.each(function(e){e.get("field").id===a.id&&(c=e)},this);return c},_setupDragAndDrop:function(){this._ddDelegate=new a.DD.Delegate({container:this._fieldContainer,nodes:".sqs-form-builder-field:not(.yui3-dd-super-proxy-clone)",handles:[".sqs-form-builder-field:not(.yui3-dd-super-proxy-clone) .field-drag-handle-wrapper"],target:!0});var b=this._ddDelegate.dd;this._ddReorder=b.plug(a.Squarespace.DDReorder,{container:this._fieldContainer,
nodes:".sqs-form-builder-field:not(.yui3-dd-super-proxy-clone)"}).ddreorder;b.plug(a.Plugin.DDConstrained,{constrain:this._fieldContainer,stickY:!0});b.plug(a.Plugin.DDNodeScroll,{node:this._fieldContainer,horizontal:!1,scrollDelay:100})},_reorderField:function(a,c){var e=this.get("data"),d=e.splice(a,1)[0];e.splice(c,0,d);this.add(this.remove(a),c);this.fire("change")},_renderFieldWidget:function(b,c){var e=this.add(new a.Squarespace.Widgets.FormBuilderField({field:b})).item(0);c&&(e.once("editingChange",
function(){var a=this.get("boundingBox"),b=a.get("scrollTop"),c=e.get("boundingBox").getY(),b=b+c-a.getY();a.set("scrollTop",b)},this),e.openEdit(),e.focusAndSelect());this._ddDelegate.syncTargets()},_removeFieldWidget:function(b){var c=b.get("boundingBox"),e=[];this.get("contentBox").all(".add-field-button, .sqs-form-builder-field").each(function(b){b!==c&&(b.plug(a.Squarespace.PositionAnimator),b=b.positionAnimator,b.hold(),e.push(b))});b.blur();this.remove(b);b.destroy(!0);a.Array.each(e,function(a){a.release()})},
_openFieldSelector:function(){this.get("dialog").addChildDialog(this._fieldSelector);this._fieldSelector.show({anchor:this._addFieldButton})},_confirmFieldRemoval:function(b){(new a.Squarespace.Widgets.Confirmation({"strings.title":"Remove","strings.message":"Are you sure you wish to remove this field?"})).on("confirm",function(){this.removeField(b)},this)},_validateFieldSelection:function(a){a="email"===a.type;var c=this.get("allowMultipleEmailFields"),e=this._hasEmailField();if(a&&!c&&e)return{title:"Email Field Not Added",
description:"Only one email field can be added to a Mailchimp-connected form."}},_hasEmailField:function(){var b=!1;a.Array.each(this.get("data"),function(a){"email"===a.type&&(b=!0)});return b},_createFieldSelector:function(){var b=this._getFieldOptions(),c=Math.min(b.length,5);return new a.Squarespace.EditingDialog({closeOthers:!1,loadingText:"Loading...",closingText:"Creating...",style:"flyout",flyoutPointerDirection:"centered",width:100*c,overlay:0.5,primaryTabs:[{title:"Add Form Field",icon:"/universal/images-v6/icons/icon-plus-16-light.png",
fields:[{ctor:a.Squarespace.DialogFields.MultiOption,config:{name:"fieldOptions",titleStyle:"top",className:"button round square",defaultValue:null,iconDropPx:20,buttonStyle:!0,columns:c,alwaysShowTitles:!0,options:b}}]}]})},_getFieldOptions:function(){var b=a.Squarespace.FormFieldConfigs;return[{icon:"text",title:"Text",value:b.TEXT},{icon:"textarea",title:"Text Area",value:b.TEXT_AREA},{icon:"select",title:"Select",value:b.SELECT},{icon:"checkbox",title:"Checkbox",value:b.CHECKBOX},{icon:"radio",
title:"Radio",value:b.RADIO},{icon:"likert",title:"Survey",value:b.LIKERT},{icon:"name",title:"Name",value:b.NAME},{icon:"password",title:"Password",value:b.PASSWORD},{icon:"address",title:"Address",value:b.ADDRESS},{icon:"twitter",title:"Twitter",value:b.TWITTER},{icon:"email",title:"Email",value:b.EMAIL},{icon:"website",title:"Website",value:b.WEBSITE},{icon:"date",title:"Date",value:b.DATE},{icon:"time",title:"Time",value:b.TIME},{icon:"phone",title:"Phone",value:b.PHONE},{icon:"number",title:"Number",
value:b.NUMBER},{icon:"currency",title:"Currency",value:b.CURRENCY},{icon:"sectionbreak",title:"Line",value:b.SECTION},{icon:"hidden",title:"Hidden",value:b.HIDDEN}]}},{CSS_PREFIX:"sqs-form-builder",ATTRS:{data:{value:[],validator:a.Squarespace.AttrValidators.isArray},allowMultipleEmailFields:{value:!0,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:"base node widget-parent squarespace-util squarespace-ui-base squarespace-dd-behaviors squarespace-dialog squarespace-dialog-field-2 squarespace-dialog-multi-option squarespace-form-builder-field squarespace-form-field-configs squarespace-attr-validators squarespace-form-editing-utils squarespace-widgets-alert squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-dd-behaviors",function(a){function d(b,c,e){for(var d=b.get("parentNode").get("children"),g=d.indexOf(b),p=d.indexOf(c),q=Math.min(g,p),g=Math.max(g,p),p=function(){a.DD.DDM.syncActiveShims(!0)},t=q;t<=g;t++)d.item(t).plug(a.Squarespace.PositionAnimator,{releasedFn:p}),d.item(t).positionAnimator.hold();b.insert(c,e);for(b=q;b<=g;b++)d.item(b).hasClass("dd-drag-group")||d.item(b).positionAnimator.release(!0)}function b(b,c,e){c.each(function(a){a.setStyles({position:null,top:null,
left:null})});c=c._nodes;d(b,a.one(c[0]),e);for(b=1;b<c.length;b++)d(a.one(c[b-1]),a.one(c[b]),e)}a.namespace("Squarespace");a.mix(a.DD.DDM,{_pg_size:function(){if(this.activeDrag){var b=a.one(document.documentElement),c=Math.max(b.get("scrollHeight"),b.get("docHeight")),b=Math.max(b.get("scrollWidth"),b.get("docWidth"));this._pg.setStyles({position:"fixed",height:c+"px",width:b+"px"})}},_move:function(a){this.activeDrag&&!1===this.activeDrag.get("lock")&&(this.activeDrag._move.call(this.activeDrag,
a),this._dropMove())}},!0);var c=a.clone(a.DD.Drop.prototype._createShim);a.DD.Drop.prototype._createShim=function(){null!==this.get("node")._node&&a.Env&&c.call(this)};var e=a.clone(a.DD.Drag.prototype._unprep);a.mix(a.DD.Drag.prototype,{_prep:function(){this._dragThreshMet=!1;var b=this.get("node");b.addClass(a.DD.DDM.CSS_PREFIX+"-draggable");if(!this.get("dragDelegate"))b.on(a.DD.Drag.START_EVENT,a.bind(this._handleMouseDownEvent,this));b.on("mouseup",a.bind(this._handleMouseUp,this));b.on("dragstart",
a.bind(this._fixDragStart,this))},_unprep:function(){null!==this.get("node")._node&&e.call(this)},start:function(){var b=a.DD.DDM;if(!this.get("lock")&&!this.get("dragging")){var c=this.get("node"),e;this._startTime=(new Date).getTime();b._start();c.addClass(b.CSS_PREFIX+"-dragging");this.fire("drag:start",{pageX:this.nodeXY[0],pageY:this.nodeXY[1],startTime:this._startTime});c=this.get("dragNode");this.proxy&&(this.get("node").removeClass(b.CSS_PREFIX+"-dragging"),c.addClass(b.CSS_PREFIX+"-dragging"));
e=this.nodeXY;b=c.get("offsetWidth");c=c.get("offsetHeight");this.get("startCentered")&&this._setStartPosition([e[0]+b/2,e[1]+c/2]);this.region={0:e[0],1:e[1],area:0,top:e[1],right:e[0]+b,bottom:e[1]+c,left:e[0]};this.set("dragging",!0)}return this},_defMouseDownFn:function(b){b=b.ev;this._dragThreshMet=!1;this._ev_md=b;if(this.get("primaryButtonOnly")&&1<b.button)return!1;if(this.validClick(b)&&(this._fixIEMouseDown(b),0!==a.DD.Drag.START_EVENT.indexOf("gesture")&&(this.get("haltDown")?b.halt():
b.preventDefault()),this._setStartPosition([b.pageX,b.pageY]),a.DD.DDM.activeDrag=this,this.get("clickTimeThresh")||!this.get("clickPixelThresh")))this._clickTimeout=a.later(this.get("clickTimeThresh"),this,this._timeoutCheck);this.fire("drag:afterMouseDown",{ev:b})}},!0);var g=a.clone(a.DD.Delegate.prototype.initializer);a.mix(a.DD.Delegate.prototype,{initializer:function(){var b=this.get("container");!(b instanceof a.Node)&&a.Lang.isFunction(b.getDOMNode)&&this.set("container",a.Node(b.getDOMNode()));
g.apply(this,arguments);this.get("clickTimeThresh")&&this.dd.set("clickTimeThresh",this.get("clickTimeThresh"));this.get("clickPixelThresh")&&this.dd.set("clickPixelThresh",this.get("clickPixelThresh"));this.dd.set("dragDelegate",this)}},!0);a.Squarespace.DDBaseBehavior=a.Base.create("DDBaseBehavior",a.Plugin.Base,[],{initializer:function(){var a=this.get("host");a.on("drag:start",this.start,this);a.on("drag:drag",this.drag,this);a.on("drag:end",this.end,this);a.on("drag:enter",this.enter,this)},
start:function(){},drag:function(){},end:function(){},enter:function(){}});a.Squarespace.DDDragGrouping=a.Base.create("DDDragGrouping",a.Squarespace.DDBaseBehavior,[],{initializer:function(){this.get("host").plug(a.Squarespace.Plugin.DDSuperProxy,{movingClass:this.get("movingClass")})},start:function(a){var b=this._getNodesSelected();1<=b.size()&&(this._nodesSelectedCache=b,this._initialGrouping(a.target.get("dragNode")))},_initialGrouping:function(b){b.get("region");this._nodesSelectedCache.each(function(b,
c){b.addClass("dd-drag-group");a.DD.DDM.syncActiveShims(!0)},this);b.appendChild('<div class="sqs-multidrag-count">'+(this._nodesSelectedCache.size()+1)+"</div>")},end:function(c){if(this._nodesSelectedCache){this._nodesSelectedCache.each(function(a){a.removeClass("dd-drag-group")});b(c.target.get("node"),this._nodesSelectedCache,"after");this._nodesSelectedCache=null;var e=a.one(this.get("container")).all(this.get("nodes")).indexOf(c.target.get("node"));this._startIndex!==e&&this.fire("group-reordered",
{node:c.target.get("node"),oldIndex:this._startIndex,newIndex:e})}},_getNodesSelected:function(){return this.get("container").all(this.get("multiSelectNodes")).filter(":not(.yui3-dd-dragging)").filter(":not(."+this.get("cloneClass")+")")}},{NS:"dragGrouping",ATTRS:{container:{},nodes:{},multiSelectNodes:{},movingClass:{value:"yui3-dd-super-proxy-moving"},cloneClass:{value:"yui3-dd-super-proxy-clone"}}});a.Squarespace.DDReorder=a.Base.create("DDReorder",a.Squarespace.DDBaseBehavior,[],{initializer:function(){this.get("host").plug(a.Squarespace.Plugin.DDSuperProxy,
{movingClass:this.get("movingClass"),cloneClass:this.get("cloneClass")})},start:function(b){this._startIndex=a.one(this.get("container")).all(this.get("nodes")).indexOf(b.target.get("node"))},enter:function(b){var c=b.drag.get("node");b=b.drop.get("node");var e=this.get("container");!b.hasClass("selected")&&(e.contains(c)&&e.contains(b))&&(e=a.one(e).all(this.get("nodes")),e=e.indexOf(c)>e.indexOf(b)?"before":"after",d(b,c,e))},end:function(b){var c=a.one(this.get("container")).all(this.get("nodes")).indexOf(b.target.get("node"));
this._startIndex!==c&&this.fire("reordered",{node:b.target.get("node"),oldIndex:this._startIndex,newIndex:c});delete this._nodes;delete this._startIndex}},{NS:"ddreorder",ATTRS:{container:{},nodes:{},movingClass:{value:"yui3-dd-super-proxy-moving"},cloneClass:{value:"yui3-dd-super-proxy-clone"},multiSelectNodes:{}}})},"1.0",{requires:["oop","dd","dd-scroll","plugin","squarespace-dd-superproxy"]});
YUI.add("squarespace-plugin-numeric-formatter",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.NumericFormatter=a.Base.create("numericFormatter",a.Plugin.Base,[],{initializer:function(){a.Lang.isNumber(Number(this.get("host").get("value")))?this.set("data",Number(this.get("host").get("value"))):this.set("data",0);this.set("displayString",this._format(this.get("data")));this._bindUI();this._syncUI()},_format:function(a){return this.get("displayFormatter")(a)},_syncUI:function(){var d=
this.get("data"),b=this.get("displayString");this.get("hasFocus")?this.get("host").set("value",0<d?b:""):(b="",a.Lang.isNull(this.get("prefixUnit"))||(b+=this.get("prefixUnit")),b+=this._format(d),a.Lang.isNull(this.get("postfixUnit"))||(b+=" "+this.get("postfixUnit")),this.get("host").set("value",b))},_bindUI:function(){var a=this.get("host");this.on("displayStringChange",this._syncUI,this);a.on("valuechange",this._onValueChange,this);a.on("keydown",this._onKeyDown,this);a.on("focus",this._onFocus,
this);a.on("blur",this._onBlur,this)},_onFocus:function(){this.set("hasFocus",!0);this._syncUI();setTimeout(a.bind(function(){this.get("host").select()},this),0)},_onBlur:function(){this.set("hasFocus",!1);this.set("displayString",this._format(this.get("data")))},_onKeyDown:function(a){var b;b=this.get("host").get("value");-1<[9,13,8,46,37,39].indexOf(a.keyCode)||(b=96<=a.keyCode&&105>=a.keyCode?String.fromCharCode(a.keyCode-48):190===a.keyCode||110===a.keyCode?-1<b.indexOf(".")?"x":".":String.fromCharCode(a.keyCode),
isFinite(Number(b))||"."===b||(a.stopPropagation(),a.preventDefault()))},_onValueChange:function(){var a=this.get("host").get("value"),a=this._transformToData(a);this.set("data",a)},_displayFormatter:function(a){return a},_transformToData:function(d){var b;a.Lang.isUndefined(this.get("prefixUnit"))||(b=String(d).replace(RegExp(this.get("prefixUnit"))));a.Lang.isUndefined(this.get("postfixUnit"))||(b=String(d).replace(RegExp(this.get("postfixUnit"))));return Number(b)}},{NS:"numericFormatterPlugin",
ATTRS:{hasFocus:{value:!1},data:{value:null},displayString:{value:null},prefixUnit:{value:null},postfixUnit:{value:null},displayFormatter:{value:function(a){return a}}}})},"1.0",{requires:["plugin","squarespace-util"]});
YUI.add("squarespace-block-link-editor",function(a){a.namespace("Squarespace.Block.Editor").Link=a.Base.create("link-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Link")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Link"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Link=a.Base.create("block-link-editor",a.Squarespace.ModelEditorDialog,[],{_sanitizeURL:function(a){return null===
a.match(/^[(?!\/\/)(http:\/\/|https:\/\/|\/|mailto:)].*/i)?"http://"+a:a},sanitizeDialogData:function(a){a.linkTarget&&4<a.linkTarget.length&&(a.linkTarget=this._sanitizeURL(a.linkTarget));return a}},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={width:335,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit External Link",icon:"/universal/images-v6/icons/icon-link-16-light-solid.png",scroll:!0,fields:[{type:"description",
text:"Below, enter the title and the URL of the link you would like to add."},{type:"text",name:"linkTitle",submitOnEnter:!0,title:"Link Title",titleStyle:"inline",style:"title"},{type:"text",name:"linkTarget",submitOnEnter:!0,title:"http://...",titleStyle:"inline",style:"normal"},{type:"check",name:"newWindow",title:"Open in New Window",description:"When clicked, open this link in a new window."}]}]}},"1.0",{requires:["squarespace-block-editor-dialog","squarespace-damask-context-globals"]});
YUI.add("squarespace-block-flickr",function(a){a.namespace("Squarespace.Block").Flickr=a.Base.create("block-flickr",a.Squarespace.Block.SummaryGallery,[],{},{CSS_PREFIX:"sqs-block-flickr",MODEL:a.Squarespace.ContentModel.FlickrBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Flickr},type:{value:a.Squarespace.BlockType.FLICKR}}})},"1.0",{requires:["base","squarespace-enum","squarespace-block-summary-gallery","squarespace-block-flickr-editor","squarespace-block-flickr-model"]});
YUI.add("squarespace-plugin-sizeanimator",function(a){a.namespace("Squarespace.Plugins").SizeAnimator=a.Base.create("SizeAnimator",a.Plugin.Base,[],{hold:function(){var a=this.get("host");this._width=a.get("offsetWidth");this._height=a.get("offsetHeight")},release:function(){var d=this.get("host"),b=a.Node.create("<div></div>"),c=d.get("offsetWidth"),e=d.get("offsetHeight");c==this._width&&this._height==e||(d.get("children").each(function(a){b.append(a)}),b.setStyles({width:c,height:e}),d.appendChild(b),
d.addClass("sqs-sizeanimator-animating"),d.anim({width:c,height:e},{from:{width:this._width,height:this._height},end:function(){d.removeClass("sqs-sizeanimator-animating");d.setStyles({width:null,height:null});b._node&&(b.get("children").each(function(a){d.append(a)}),b.remove())}}).run())}},{NS:"sizeAnimator",ATTRS:{}})},"1.0",{requires:["base","plugin"]});
YUI.add("squarespace-dialog-promises",function(a){var d=a.namespace("Squarespace.Promises");d.submitDialog=function(b,c,e){var d=e||this;return new a.Promise(function(e,h){var k=new a.Squarespace.EditingDialog(b);k.on("send-requested",function(){var a=c.call(d,k.getData());window.action=a;a.then(function(a){k.close();e(a)},function(a){a.errors&&k.showErrors(a.errors)})});k.on(["cancel-click","canccel"],function(){h(null)});k.show()})};d.getDialogData=function(b){return d.create(function(c,e){var d=
new a.Squarespace.EditingDialog(b);d.on("send-requested",function(){var a=d.getData();d.close();c(a)});d.on(["cancel-click","cancel"],function(){e(null)});d.show()},this)}},"1.0",{requires:["promise","squarespace-dialog","squarespace-promises"]});
YUI.add("squarespace-models-recovery-buffer",function(a){a.namespace("Squarespace.Models");var d=a.Squarespace.Models.RecoveryBuffer=a.Base.create("RecoveryBuffer",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.API_ROOT+"recovery-buffers",parse:function(a){a=d.superclass.parse.call(this,a);delete a.editableBlock;return a}},{ATTRS:{id:{value:null},type:{value:a.Squarespace.RecoveryBufferType.PAGE_COLLECTION_DATA,validator:a.Squarespace.AttrValidators.isValueIn(a.Squarespace.RecoveryBufferType),
writeOnce:"initOnly"},sourceId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},fieldName:{value:"",validator:a.Squarespace.AttrValidators.isString,writeOnce:"initOnly"},editableBlock:{value:null,validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Models.EditableContentBlock)},contentToDelete:{value:{},validator:a.Squarespace.AttrValidators.isNonArrayObject}}})},"1.0",{requires:"base model squarespace-attr-validators squarespace-enum squarespace-model-sync-rest squarespace-models-layout".split(" ")});
YUI.add("squarespace-developer-registrar",function(a){var d={style:"flyout",name:"developer-marketing-details",closeOthers:!1,overlay:0.5,width:420,buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Developer Account Registration",icon:"/universal/images-v6/dialog/login-icon.png",fields:[{ctor:a.Squarespace.DialogFields.Text,config:{submitOnEnter:!0,required:!0,name:"businessName","strings.title":"Business Name","strings.placeholder":"Web Design, Inc."}},{ctor:a.Squarespace.DialogFields.Text,
config:{submitOnEnter:!0,required:!0,name:"businessEmailAddress","strings.title":"Business Email Address","strings.placeholder":"support@yourbusiness.com"}},{ctor:a.Squarespace.DialogFields.Text,config:{submitOnEnter:!0,required:!0,name:"phoneNumber","strings.title":"Business Phone Number","strings.placeholder":"(555) 312-7393"}},{ctor:a.Squarespace.DialogFields.Text,config:{submitOnEnter:!0,required:!0,name:"streetAddress","strings.title":"Business Mailing Address","strings.placeholder":"Street Address"}},
{ctor:a.Squarespace.DialogFields.Text,config:{submitOnEnter:!0,required:!0,name:"cityStateZip","strings.placeholder":"City, State, Zip"}},{ctor:a.Squarespace.DialogFields.Select,config:{required:!0,name:"countryCode",data:"US",options:a.Squarespace.Localities.getNewCountryOptions(),"strings.title":"Country",submitOnEnter:!0}},{ctor:a.Squarespace.DialogFields.Text,config:{submitOnEnter:!0,required:!0,name:"businessWebsiteUrl","strings.title":"Business Website URL","strings.placeholder":"http://www.yourbusiness.com/"}}]}]},
b=a.Base.create("developerRegistrar",a.Base,[],{register:function(b){return this._getMarketingDetailsFromUser(b).then(a.bind(this._saveRegistration,this))},_getMarketingDetailsFromUser:function(b){var e=this._getMarketingDialogConf(b);return a.Squarespace.Promises.getDialogData(e).then(function(a){return{account:b,data:a}})},_getMarketingDialogConf:function(b){var e=b.get("developerAccount");return a.merge(d,{savingText:e?"Saving...":"Registering...",initialData:b.get("developerAccountMarketingDetails")})},
_saveRegistration:function(b){return a.Squarespace.Promises.create(function(e,d){var f=b.account;f.setAttrs({developerAccount:!0,developerAccountMarketingDetails:b.data});f.save(function(b){a.Lang.isValue(b)?d(b):e(f)})},this)}});a.namespace("Squarespace.Singletons").DeveloperRegistrar=new b},"1.0",{requires:["base","squarespace-dialog","squarespace-promises","squarespace-dialog-promises"]});
YUI.add("squarespace-block-content-image",function(a){var d=a.namespace("Squarespace.Content").Image=a.Base.create("image",a.Squarespace.SSWidget,[a.WidgetChild,a.Squarespace.Content.ContentBase],{initializer:function(b){this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this.LOG=new a.Squarespace.Debugger({output:!1,name:"BlockContentImage",uid:!0})},render:function(){var b=this.get("model"),c=a.Lang.isValue(this.get("parent"));if(!b.isEmpty()&&!b.isImageDataLoaded()){if(c){var e=a.bind(function(){this.get("parent").set("stack",
null)},this),g=this.get("parent").get("stack");g&&(e=g.add(e))}this.LOG.log("Loading image data...");b.loadImageData().then(a.bind(function(){this.LOG.log("Loaded image data: ",{baseAssetUrl:b.get("baseAssetUrl"),dimensions:b.get("dimensions")});this.syncUI();c&&e();this.fire("image-loaded")},this))}d.superclass.render.apply(this,arguments)},syncUI:function(){var a=this.get("model");a.isEmpty()||a.get("error")||!a.get("isBase64")&&a.get("processing")?this._syncImageRendering():a.isImageDataLoaded()&&
(this._syncImageRendering(),this._syncAspectRatio(),this._syncStretch(),this._adjustImage())},bindUI:function(){var b=this.get("model");b.after(["imageIdChange","errorChange"],function(){this.syncUI()},this);b.after(["completedChange","processingChange"],function(){this._syncProgress()},this);b.after("aspectRatioChange",function(){this._syncAspectRatio();this._syncImageRendering();this._adjustImage()},this);b.after("stretchChange",function(){this._syncStretch()},this);b.after("focalPointChange",function(){this._syncImageRendering();
this._adjustImage()},this);a.Lang.isValue(b.get("vSize"))&&b.after("vSizeChange",function(){var a=this.get("contentBox").get("offsetHeight"),e=this.get("contentBox").get("offsetWidth");b.set("aspectRatio",100*(a/e))},this)},_showEmptyImageState:function(){var a=this.get("model");this.imgNode&&(this.imgNode.remove(!0),this.imgNode=null);this._bb.addClass("sqs-empty");a.get("error")&&(this.LOG.log("Displaying error",a.get("error")),this.set("editing",!1),this.errorNode||(this._bb.addClass("sqs-error"),
this.errorNode=this._cb.appendChild('<div class="error-wrapper"><div class="message"></div><a href="#" class="clear">Clear</a></div>'),this.errorNode.one("a.clear").on("click",function(c){c.halt();this.errorNode.remove();this.errorNode=null;this.set("editing",!0);a.setAttrs({error:null,imageId:null})},this)),this.errorNode.one(".message").setContent(a.get("error")))},_syncImageRendering:function(){var b=this.get("model");b.isEmpty()||!b.get("isBase64")&&b.get("processing")||b.get("error")?this._showEmptyImageState():
(this.errorNode&&(this.errorNode.remove(),this.errorNode=null,this._bb.removeClass("sqs-error")),this.imgNode||(this.imgNode=a.Node.create("<img>"),this.imgNode.on("load",function(){this._fireContentUpdate()},this),this._cb.append(this.imgNode)),b=b.get("baseAssetUrl"),a.Lang.isValue(this.get("parent"))&&(this.get("parent").get("editController").isMobileApp()&&this.imgNode.getAttribute("src")!==b)&&(this.LOG.log("Attempting to load image",b),this.imgNode.setAttribute("src",b)),this._bb.removeClass("sqs-empty"))},
_syncProgress:function(){var b=this.get("model"),c=b.get("completed"),e=a.Lang.isValue(this.get("parent"));a.Lang.isValue(c)&&1>c?(this.LOG.log("Uploading...",100*c+"%"),this._cb.plug(a.Squarespace.Plugin.Progress,{progress:100*c,showBar:!0,showSpinner:!1}),this._cb.addClass(this.getClassName("processing"))):b.get("processing")&&e&&!this.get("parent").get("editController").isMobileApp()?(this.LOG.log("Showing processing spinner"),this._cb.plug(a.Squarespace.Plugin.Progress,{showBar:!1,showSpinner:!0}),
this._cb.addClass(this.getClassName("processing"))):(this.LOG.log("Removing processing state."),this._cb.unplug(a.Squarespace.Plugin.Progress),this._cb.removeClass(this.getClassName("processing")))},_syncAspectRatio:function(b){var c=this.get("model");b=c.get("aspectRatio");var e=c.get("dimensions"),c=c.get("vSize");a.Lang.isValue(c)?(this.LOG.log("Applying vSize value",c,"(pixel value: "+24*c+")"),this.get("contentBox").setStyle("paddingBottom",24*c)):(b||(this.LOG.log("Aspect ratio not found."),
e?(this.LOG.log("Applying evaluated aspectRatio (from dimensions)",b),b=100*(e.height/e.width)):(this.LOG.log("Evaluating `aspectRatio` to 75% (no dimensions found)"),b=75)),this.LOG.log("Applying aspectRatio",b),b=parseFloat(b)+"%",this.get("contentBox").setStyle("paddingBottom",b))},_syncStretch:function(){var a=this.get("model"),c=a.get("stretch"),a=a.get("dimensions");!c&&a?(this.get("boundingBox").setStyle("maxWidth",a.width),this.get("boundingBox").addClass("stretch")):(this.get("boundingBox").setStyle("maxWidth",
null),this.get("boundingBox").removeClass("stretch"))},_attemptToEvaluateDimensions:function(){var b=this.get("model");if(a.Lang.isValue(b.get("baseAssetUrl"))){this.LOG.log("Dimensions missing, attempting to evaluate dimensions in the browser");var c=new Image;c.addEventListener("load",a.bind(function(){this.LOG.log("Missing dimensions evaluated from browser",{width:c.width,height:c.height});b.set("dimensions",{width:c.width,height:c.height});this.syncUI()},this));c.src=b.get("baseAssetUrl")}},_adjustImage:function(){if(this.imgNode){var b=
this.get("model");if(!b.isEmpty()&&b.isImageDataLoaded()){var c=b.get("dimensions");a.Lang.isValue(c)?(this.get("boundingBox").addClass("sqs-intrinsic"),c=b.get("focalPoint").split(","),c={focalPoint:{x:parseFloat(c[0]),y:parseFloat(c[1])},mode:"fill",fixedRatio:!0,stretch:b.get("stretch")},b.get("isBase64")||(c.source=b.get("baseAssetUrl")),b.get("dimensions")&&(c.dimensions=b.get("dimensions")),this.LOG.log("Sending off to ImageLoader",c),ImageLoader.load(this.imgNode,c)):this._attemptToEvaluateDimensions()}}else this.LOG.warn("_adjustImage called without an imgNode in existence.")},
_fireContentUpdate:function(){this.get("parent")&&this.get("parent").fire("widget:contentUpdate")}},{CSS_PREFIX:"sqs-image",ATTRS:{model:{writeOnce:!0,setter:function(b){if(a.Lang.isObject(b))return new a.Squarespace.ContentModel.Image(b);if(a.instanceOf(b,a.Squarespace.ContentModel.Image))return b},value:{},lazyAdd:!1},tabIndex:{value:null},editor:{value:a.Squarespace.Content.Image.Editor}}});a.namespace("Squarespace.ContentModel").Image=a.Base.create("ImageContentModel",a.Model,[],{initializer:function(){this._imageContentItem=
new a.Squarespace.Models.ContentItem({id:this.get("imageId"),collectionId:this.get("collectionId")});this._bindImageListeners(this._imageContentItem);this.after("imageIdChange",function(b){b.newVal?(this._imageContentItem=new a.Squarespace.Models.ContentItem({id:b.newVal,collectionId:this.get("collectionId")}),this._bindImageListeners(this._imageContentItem)):(this.set("dimensions",null),this.set("processing",null),this.set("error",null),this.set("baseAssetUrl",null),this.set("aspectRatio",null))})},
_bindImageListeners:function(b){b.after("mediaProcessingStateChange",function(b){b.newVal==a.Squarespace.MediaProcessingState.READY&&this.loadImageData()},this)},getImageContentItemField:function(a){return this._imageContentItem.get(a)},setItemData:function(b){this._imageContentItem.setAttrs(b);a.Lang.isString(b.id)&&this.set("imageId",b.id)},isEmpty:function(){return!this.get("imageId")&&!this.get("isBase64")},isImageDataLoaded:function(){var b=this.get("baseAssetUrl");return a.Lang.isValue(b)},
loadImageData:function(){if(!a.Lang.isValue(this._itemPromise)||"pending"!==this._itemPromise.getStatus())this._itemPromise=new a.Promise(a.bind(function(b,c){var e=this._imageContentItem;e.load(a.bind(function(a){a?a.notFound?this.set("error","The requested image could not be found."):this.set("error",a.error):this.applyAttrsFromContentItem(e);b();this._itemPromise=null},this))},this));return this._itemPromise},applyAttrsFromContentItem:function(b){a.Squarespace.ContentItemUtils.isErrorProcessingState(b)?
this.set("error","There was an error while processing the image."):a.Squarespace.ContentItemUtils.isProcessingState(b)?this.set("processing",!0):(this.set("processing",!1),this.set("baseAssetUrl",b.get("assetUrl")),this.set("dimensions",b.get("originalSize")),this.set("focalPoint",b.get("mediaFocalPoint")),this.set("filename",b.get("filename")),b=this.get("dimensions"),!a.Lang.isValue(this.get("aspectRatio"))&&a.Lang.isValue(b)&&this.set("aspectRatio",100*(b.height/b.width),{silent:!0}))},saveFocalPoint:function(){this._imageContentItem.set("mediaFocalPoint",
this.get("focalPoint"));this._imageContentItem.save({fields:["mediaFocalPoint"]})}},{ATTRS:{imageId:{},isBase64:{},baseAssetUrl:{value:null},dimensions:{setter:function(b){if(a.Lang.isString(b))return b=b.split("x"),{width:b[0],height:b[1]};if(a.Lang.isValue(b))return b}},aspectRatio:{setter:function(b){b=parseFloat(b);return a.Lang.isNumber(b)?b:null}},focalPoint:{value:"0.5, 0.5",setter:function(b){return a.Lang.isObject(b)?b.x+","+b.y:!b?"0.5, 0.5":b}},scale:{value:"cover",setter:function(a){return"cover"===
a||"contain"===a?a:"cover"}},filename:{value:null,validator:a.Lang.isString}}})},"1.0",{requires:"model widget-child promise squarespace-models-content-item squarespace-ss-widget squarespace-block-content-base squarespace-block-content-image-editor squarespace-debugger squarespace-content-item-utils".split(" ")});
YUI.add("squarespace-external-authentication",function(a){a.namespace("Squarespace");a.Squarespace.ExternalAuthentication=a.Base.create("externalAuthentication",a.Base,[],{initializer:function(){this.publish("completed")},openPopupWindow:function(d,b,c){d="/auth/ExternalAuthenticationInitiate?"+this._buildQueryParams(d,b,c);this._oauthWindow=window.open(d,"ConnectWithOAuth","location=0,status=0,scrollbars=1,width=1020,height=520");this._checkClosedOnInterval();d=window.addEventListener?"addEventListener":
"attachEvent";(0,window[d])("attachEvent"==d?"onmessage":"message",a.bind(this._receiveMessage,this),!1)},_buildQueryParams:function(d,b,c){var e="serviceProvider="+d;a.Lang.isValue(b)&&a.Lang.isValue(c)&&(e+="&"+b+"="+c);this.get("useLoginFlag")&&(e+="&loginFlag=true");this.get("includeWebsiteList")&&(e+="&includeWebsiteList=true");b=this.get("authenticationType");a.Lang.isValue(b)&&(e+="&type="+b);(b=this._getInviteCode())&&(e+="&"+b);d===a.Squarespace.ExternalServiceProviders.FACEBOOK&&(e+="&redirArgs="+
encodeURIComponent("scope"+a.Squarespace.FacebookExtendedPermissions));return e},_getInviteCode:function(){var d=document.location.search;"?"===d[0]&&(d=d.slice(1));return a.Array.find(d.split("&"),function(a){return 0===a.indexOf("invitation=")},this)},_receiveMessage:function(d){d=JSON.parse(d.data);a.Lang.isObject(d)&&(this.set("websites",d.websites),this.set("memberAccount",d.memberAccount))},_checkClosedOnInterval:function(){this._oauthWindow.closed||window.callbackFinished?(window.callbackFinished=
!1,this.fire("completed")):a.later(200,this,this._checkClosedOnInterval)}},{ATTRS:{useLoginFlag:{value:!1},authenticationType:{value:null},includeWebsiteList:{value:!1},websites:{value:null},memberAccount:{value:null}}})},"1.0",{requires:["base","squarespace-enum","squarespace-util"]});
YUI.add("squarespace-content-item-types-enum-record-type",function(a){a.namespace("Squarespace.Enums").RecordType=new function(a,b){this.values=a;for(var c=0;c<this.values.length;c++){var e=this.values[c];this[e[0]]=e[1]}var g=this,f;for(f in b)(function(a){g[a]=function(){var c=b[a].apply(g,arguments);return 0<=g.values.indexOf(c)?c[1]:c}})(f)}([["TEXT",1,"text","Text"],["IMAGE",2,"image","Image"],["QUOTE",4,"quote","Quote"],["LINK",5,"link","Link"],["CHAT",6,"chat"],["AUDIO",7,"audio","Audio"],
["VIDEO",8,"video","Video"],["REVIEW",10,"review"],["STORE_ITEM",11,"store_item"],["EVENT",12,"event","Event"],["THREAD",13,"thread"],["GALLERY",14,"gallery","Gallery"],["BINARY",15,"binary"],["CSSASSET",16,"css-asset"],["TWEAKASSET",17,"tweak-asset"],["DIGITALGOOD",18,"digital-good"],["ATTACHMENT",19,"attachment"],["EXPORT_WORDPRESS",20,"wordpress-export"],["EXPORT_INTERNAL",21,"json-export"],["TWEET",50,"tweet"],["RSS",51,"rss"],["CHECKIN",52,"checkin"],["DELICIOUS",53,"delicious"],["KBARTICLE",
54,"kbarticle","KBArticle"]],{valueForString:function(a){for(var b=0;b<this.values.length;b++)if(this.values[b][2]==a)return this.values[b];return null},stringForValue:function(a){for(var b=0;b<this.values.length;b++)if(this.values[b][1]==a)return this.values[b][2];return null},titleForValue:function(a){for(var b=0;b<this.values.length;b++)if(this.values[b][1]==a)return this.values[b][3];return null}})});
YUI.add("squarespace-calendar-block-renderer",function(a){a.namespace("Y.Squarespace.Rendering");var d=YUI_CONFIG.classNamePrefix||"yui3",b=a.Base.create("SqspCalendarPlugin",a.Squarespace.CalendarBaseRenderer,[],{initializer:function(a){this.host.get("contentBox").delegate("hover",this._onHover,this._onHoverOut,"."+d+"-calendar-day",this)},_renderDay:function(c,e,d){0<d.length&&(c=this._groupEvents(d,c),c=this._createFlyoutNode(c),e.addClass("date-has-event"),e.append(a.Node.create(b.TEMPLATE_DAY_MARKER)),
e.append(c))},_onHover:function(a){a=a.target;var b=a.one(".event-menu"),d=this.host.get("contentBox");b&&(b.show(),b.get("offsetWidth")+a.getX()>d.getX()+d.get("offsetWidth")&&b.addClass("event-menu-right"))},_onHoverOut:function(a){a=a.target;(a=a.hasClass("event-menu")?a:a.one(".event-menu"))&&a.hide()},_groupEvents:function(b,e){var d={},f=[],h=[];a.Array.each(b,function(a){if(this._isSameDay(a,e)){var b=this._getEventDisplayTime(a),c=d[b];c||(c=[],d[b]=c);c.push(a)}else f.push(a)},this);a.Object.each(d,
function(a,b){h.splice(0,0,{displayTime:b,events:a})});0<f.length&&h.splice(0,0,{displayTime:"(from previous day)",events:f});return h},_createFlyoutNode:function(c){var e=a.Node.create(b.TEMPLATE_FLYOUT);a.Array.each(c,function(c){var d=a.Node.create(a.substitute(b.TEMPLATE_GROUP_NODE,{displayTime:c.displayTime}));e.append(d);a.Array.each(c.events,function(c){c=a.substitute(b.TEMPLATE_EVENT_NODE,{fullUrl:c.fullUrl,title:c.title});d.append(c)})});e.hide();return e}},{TEMPLATE_DAY_MARKER:'<div class="date-has-event-marker"></div>',
TEMPLATE_FLYOUT:'<div class="event-menu">',TEMPLATE_GROUP_NODE:'<div class="event-time-group" title="{displayTime}"><div class="event-time">{displayTime}</div></div>',TEMPLATE_EVENT_NODE:'<div class="event-item"><a class="event-link" href="{fullUrl}">{title}</a></div>',NS:"calendarPlugin"});a.namespace("Squarespace.Rendering").renderCalendar=function(c,e){var d;if(a.Lang.isString(e))collectionid=e;else if(a.Object.hasKey(e,"collectionId"))d=e.collectionId;else if(a.instanceOf(e,a.Squarespace.Models.ContentCollection))d=
e.get("id");else if(a.Squarespace.Utils.isDamaskEnabled())d=CONFIG_PANEL.getPreviewCollection().get("id");else{console.warn("Cannot render calendar: failed to determine collectionId");return}d=new a.Squarespace.SquarespaceCalendar({contentBox:c,date:new Date,collectionId:d});d.plug(b);d.render();return d};a.config.win.Squarespace.onInitialize(a,function(){var b=a.all(".sqs-block.calendar-block[data-block-json]");b.size()&&b.each(function(b){a.Squarespace.Rendering.renderCalendar(b.one(".sqs-block-content"),
a.JSON.parse(b.getAttribute("data-block-json")))},this)})},"1.0",{requires:["squarespace-calendar-core-renderer"]});
YUI.add("squarespace-external-link-tab",function(a){var d=a.namespace("Squarespace.Views").ExternalLinkTab=a.Base.create("ExternalLinkTab",a.Squarespace.View,[],{template:"external-link-tab.html",initializer:function(b){d.superclass.initializer.apply(this,arguments);this._protocolRegex=/(?:^#)|(?:^\.{0,2}\/)|(?:^mailto:)|^[a-z]+:\/\//;this._defaultProtocol="http://";this._initialLinkUrl=this.get("linkUrl");this._input=new a.Squarespace.DialogFields.Text({data:"#"==this.get("linkUrl")?null:this.get("linkUrl"),
"strings.placeholder":"http:// ..."})},render:function(){d.superclass.render.apply(this,arguments);this._input.render(this.get("container").one(".link"));this.bindUI()},bindUI:function(){var a=this._input.get("contentBox").one("input");a.on("valuechange",this._inputChange,this);a.on("key",function(a){this._dataChanged(!0);a.halt()},"down:13",this);a=this.get("container");if(a.one(".new-window"))a.one(".new-window").on("click",this._newWindowChange,this);a.one(".visit").on("click",this._visit,this)},
reset:function(){this.set("linkUrl","");this.set("newWindow",!1);var a=this.get("container");a.one('input[type="text"]').set("value","");a.one(".new-window").removeClass("active")},_inputChange:function(){var a=this._linkTrim(this._input.get("contentBox").one("input").get("value"));a&&(!this._protocolRegex.test(a)&&-1===a.indexOf(":"))&&(a=this._defaultProtocol+a);this.set("linkUrl",a);this._dataChanged()},_newWindowChange:function(){this.set("newWindow",!this.get("newWindow"));this.get("container").one(".new-window").toggleClass("active");
this._dataChanged()},_visit:function(){var a=this._input.get("contentBox").one("input").get("value");a&&(this._protocolRegex.test(a)||(a=this._defaultProtocol+a),window.open(a,"visitLink"))},_dataChanged:function(a){this.get("onDataChange")&&this.get("onDataChange")(this.get("linkUrl"),this.get("newWindow"),a)},_linkTrim:function(a){return(a||"").replace(/(?:^[^!-~]+)|(?:\s+$)/g,"")}},{ATTRS:{disableNewWindow:{value:!1},linkUrl:{value:null},newWindow:{value:!1},onDataChange:{value:null}}})},"1.0",
{requires:["base-build","squarespace-view","squarespace-external-link-tab-template"]});
YUI.add("squarespace-form-builder-field-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["form-builder-field.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];this.merge(d,a.helpers);var k;a=this.escapeExpression;return b=""+('<div class="field-control-bar">\n  <div class="field-drag-handle-wrapper">\n    <div class="field-drag-handle"></div>\n  </div>\n\n  <div class="field-type-icon '+a((k=(k=b.field,null==k||!1===k?k:k.type),"function"===
typeof k?k.apply(b):k))+'"></div>\n\n  <div class="field-title"></div>\n\n  <div class="field-controls">\n    <div class="remove-field">&times;</div>\n    <div class="field-locked-icon"></div>\n    <div class="edit-field">'+a((k=(k=b.strings,null==k||!1===k?k:k.editText),"function"===typeof k?k.apply(b):k))+'</div>\n  </div>\n</div>\n\n<div class="editor-wrapper"></div>\n')})})();a.Handlebars.registerPartial("form-builder-field.html".replace("/","."),d.templates["form-builder-field.html"])},"1.0",
{requires:["handlebars-base"]});
YUI.add("squarespace-json-template",function(a){function d(a){return a.replace(/([\{\}\(\)\[\]\|\^\$\-\+\?])/g,"\\$1")}function b(a,b){var c=p[a+b];void 0===c&&(c="("+d(a)+"\\S.*?"+d(b)+"\n?)",c=RegExp(c,"g"));return c}function c(a,b){var c=[{context:a,index:-1}];return{PushSection:function(a){if(void 0===a||null===a)return null;a="@"==a?c[c.length-1].context:c[c.length-1].context[a]||null;c.push({context:a,index:-1});return a},Pop:function(){c.pop()},next:function(){var a=c[c.length-1];-1==a.index&&
(a={context:null,index:0},c.push(a));var b=c[c.length-2].context;if(a.index==b.length)c.pop();else return a.context=b[a.index++],!0},_Undefined:function(a){return void 0===b?null:b},_LookUpStack:function(a){for(var b=c.length-1;;){var e=c[b];if("@index"==a){if(-1!=e.index)return e.index}else if(e=e.context,"object"===typeof e&&(e=e[a],void 0!==e))return e;b--;if(-1>=b)return this._Undefined(a)}},get:function(a){if("@"==a)return c[c.length-1].context;var b=a.split("."),e=this._LookUpStack(b[0]);if(1<
b.length)for(var d=1;d<b.length;d++){if(null===e)return"[JSONT: Can't resolve '"+a+"'.]";e=e[b[d]];if(void 0===e)return this._Undefined(b[d])}return e}}}function e(a,b,c){for(var e=0;e<a.length;e++){var d=a[e];if("string"==typeof d)c(d);else(0,d[0])(d[1],b,c)}}function g(a,b,c){var e;e=b.get(a.name);for(var d=0;d<a.formatters.length;d++){var g=a.formatters[d];e=(0,g[0])(e,b,g[1])}c(e)}function f(a,b,c){var d=b.PushSection(a.section_name),g=!1;d&&(g=!0);d&&0===d.length&&(g=!1);g?(e(a.Statements(),
b,c),b.Pop()):(b.Pop(),e(a.Statements("or"),b,c))}function h(a,b,c){for(var d=b.get("@"),g=0;g<a.clauses.length;g++){var h=a.clauses[g],f=h[1];if((0,h[0][0])(d,b,h[0][1])){e(f,b,c);break}}}function k(a,b,c){var d=b.PushSection(a.section_name);if(d&&0<d.length){var d=d.length-1,g=a.Statements();a=a.Statements("alternate");for(var h=0;void 0!==b.next();h++)e(g,b,c),h!=d&&e(a,b,c)}else e(a.Statements("or"),b,c);b.Pop()}function l(c,e){function d(b){if(b.startsWith(n)){var c=e.partials[b.substr(n.length)];
if(c)return[function(b,e,d){return a.JSONTemplate.evaluateJsonTemplate(c,b)},null];throw{name:"BadPartialInclude",message:b.substr(n)+" is not a valid partial. Remember, loops are not supported (a partial include cannot be included inside itself)."};}var g=p.lookup(b);if(!g[0])throw{name:"BadFormatter",message:b+" is not a valid formatter"};return g}function l(a){var b=u.lookup(a);if(!b[0])throw{name:"BadPredicate",message:a+" is not a valid predicate"};return b}var p=new r([q(a.JSONTemplate.DEFAULT_FORMATTERS),
t(a.JSONTemplate.DEFAULT_PREFIX_FORMATTERS)]),u=r([q(a.JSONTemplate.DEFAULT_PREDICATES),t(a.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES)]),H=e.format_char||"|";if(":"!=H&&"|"!=H)throw{name:"ConfigurationError",message:"Only format characters : and | are accepted"};var x=e.meta||"{}",P=x.length;if(1==P%2)throw{name:"ConfigurationError",message:x+" has an odd number of metacharacters"};for(var ca=x.substring(0,P/2),x=x.substring(P/2,P),P=b(ca,x),Q=s({}),$=[Q],M=ca.length,R,C,F=0;;){R=P.exec(c);if(null===
R)break;else C=R[0];R.index>F&&(F=c.slice(F,R.index),Q.Append(F));F=P.lastIndex;R=!1;"\n"==C.slice(-1)&&(C=C.slice(null,-1),R=!0);C=C.slice(M,-M);if("#"!=C.charAt(0)){if("."==C.charAt(0)){C=C.substring(1,C.length);var L={"meta-left":ca,"meta-right":x,space:" ",tab:"\t",newline:"\n"}[C];if(void 0!==L){Q.Append(L);continue}if(L=C.match(y)){C=L[3];L[1]?(R=k,C=v({section_name:C})):(R=f,C=s({section_name:C}));Q.Append([R,C]);$.push(C);Q=C;continue}var G;if(L=C.match(z)){R=(G=L[1])?l(G):null;Q.NewOrClause(R);
continue}var L=!1,aa=C.match(D);if(aa){if(G=aa[1],L=!0,-1==G.indexOf("?")){R=[function(a){return function(b,c){var e,d,g;if(-1!==a.indexOf(" || ")){e=a.split("||");for(g=0;g<e.length;g++)if(d=e[g].trim(),c.get(d))return!0;return!1}if(-1!==a.indexOf(" && ")){e=a.split(" && ");for(g=0;g<e.length;g++)if(d=e[g].trim(),!c.get(d))return!1;return!0}return c.get(a)}}(G),null];C=w();C.NewOrClause(R);Q.Append([h,C]);$.push(C);Q=C;continue}}else if("?"==C.charAt(C.length-1)||"?"==C.split(" ")[0].charAt(C.split(" ")[0].length-
1))G=C,L=!0;if(L){R=G?l(G):null;C=w();C.NewOrClause(R);Q.Append([h,C]);$.push(C);Q=C;continue}if("alternates with"==C){Q.AlternatesWith();continue}if("end"==C){$.pop();if(0<$.length)Q=$[$.length-1];else throw{name:"TemplateSyntaxError",message:"Got too many {end} statements"};continue}}aa=C.split(H);if(1==aa.length)L=[d("str")];else{L=[];for(C=1;C<aa.length;C++)L.push(d(aa[C]));C=aa[0]}Q.Append([g,{name:C,formatters:L}]);R&&Q.Append("\n")}}Q.Append(c.slice(F));if(1!==$.length)throw{name:"TemplateSyntaxError",
message:"Got too few {end} statements."};return Q}a.namespace("JSONTemplate");var n="apply ",p={};a.JSONTemplate.DEFAULT_FORMATTERS=a.Squarespace.TEMPLATE_FORMATTERS;a.JSONTemplate.DEFAULT_PREFIX_FORMATTERS=[].concat(a.Squarespace.TEMPLATE_PREFIX_FORMATTERS,[{name:"pluralize",func:function(a,b,c){switch(c.length){case 0:b="";c="s";break;case 1:b="";c=c[0];break;case 2:b=c[0];c=c[1];break;default:throw{name:"EvaluationError",message:"pluralize got too many args"};}return 1==a?b:c}},{name:"encode-space",
func:function(a,b,c){return a.replace(/\s/g,"&nbsp;")}},{name:"truncate",func:function(a,b,c){b=c[0]||100;c=c[1]||"...";a&&a.length>b&&(a=a.substring(0,b),a=a.replace(/\w+$/,""),a+=c);return a}},{name:"date",func:function(b,c,e){var d=0,d=(new Date(b)).getTimezoneOffset();if(!a.Lang.isNumber(b))return"Invalid date.";if("undefined"!==typeof TimezoneJS){var g;try{g=new TimezoneJS.Date(b,c.get("website.timeZone"))}catch(h){return"Invalid Timezone"}d=(isNaN(g.getTimezoneOffset())?0:g.getTimezoneOffset())-
d}else c=-parseInt(c.get("website.timeZoneOffset"),10)/6E4,g=(new Date).getTimezoneOffset(),d=c-g;b=new Date(b-6E4*d);e=e.join(" ");return a.DataType.Date.format(b,{format:e})}},{name:"image",func:function(b,c,e){var d;b.mediaFocalPoint&&(d=b.mediaFocalPoint.x+","+b.mediaFocalPoint.y);return'<img class="'+(e[0]?e[0]:"thumb-image")+'" '+(b.title?'alt="'+a.Squarespace.Escaping.escapeForHtmlTag(b.title)+'" ':"")+' data-image="'+b.assetUrl+'" data-image-dimensions="'+b.originalSize+'" data-image-focal-point="'+
d+'"/>'}},{name:"timesince",func:function(b,c,e){if(!a.Lang.isNumber(b))return"Invalid date.";e.join(" ");return'<span class="timesince" data-date="'+b+'">'+a.Squarespace.DateUtils.humanizeDate(b)+"</span>"}},{name:"resizedHeightForWidth",func:function(a,b,c){b=a.split("x");if(2!=b.length)return"Invalid source parameter.  Pass in 'originalSize'.";a=parseInt(b[0],10);b=parseInt(b[1],10);c=parseInt(c[0],10)/a;return parseInt(b*c,10)}},{name:"resizedWidthForHeight",func:function(a,b,c){b=a.split("x");
if(2!=b.length)return"Invalid source parameter.  Pass in 'originalSize'.";a=parseInt(b[0],10);b=parseInt(b[1],10);c=parseInt(c[0],10)/b;return parseInt(a*c,10)}},{name:"squarespaceThumbnailForWidth",func:function(b,c,e){return a.Squarespace.Rendering.getSquarespaceSizeForWidth(parseInt(e[0],10))}},{name:"squarespaceThumbnailForHeight",func:function(b,c,e){c=b.split("x");if(2!=c.length)return"Invalid source parameter.  Pass in 'originalSize'.";b=parseInt(c[0],10);c=parseInt(c[1],10);e=parseInt(e[0],
10)/c;e=parseInt(b*e,10);return a.Squarespace.Rendering.getSquarespaceSizeForWidth(e)}},{name:"cycle",func:function(a,b,c){return c[(a-1)%c.length]}}]);var q=function(a){return{lookup:function(b){return[a[b]||null,null]}}},t=function(a){return{lookup:function(b){for(var c=0;c<a.length;c++){var e=a[c].name,d=a[c].func;if(b.slice(0,e.length)==e)return c=b.charAt(e.length),b=""===c?[]:b.split(c).slice(1),[d,b]}return[null,null]}}},r=function(a){return{lookup:function(b){for(var c=0;c<a.length;c++){var e=
a[c].lookup(b);if(e[0])return e}return[null,null]}}},u=function(a){var b={current_clause:[],Append:function(a){b.current_clause.push(a)},AlternatesWith:function(){throw{name:"TemplateSyntaxError",message:"{.alternates with} can only appear with in {.repeated section ...}"};},NewOrClause:function(a){throw{name:"NotImplemented"};}};return b},s=function(a){var b=u(a);b.statements={"default":b.current_clause};b.section_name=a.section_name;b.Statements=function(a){return b.statements[a||"default"]||[]};
b.NewOrClause=function(a){if(a)throw{name:"TemplateSyntaxError",message:"{.or} clause only takes a predicate inside predicate blocks"};b.current_clause=[];b.statements.or=b.current_clause};return b},v=function(a){var b=s(a);b.AlternatesWith=function(){b.current_clause=[];b.statements.alternate=b.current_clause};return b},w=function(a){var b=u(a);b.clauses=[];b.NewOrClause=function(a){a=a||[function(a){return!0},null];b.current_clause=[];b.clauses.push([a,b.current_clause])};return b},y=/(repeated)?\s*(section)\s+(\S+)?/,
z=/^or(?:[\s\-]+(.+))?/,D=/^if(?:[\s\-]+(.+))?/;a.JSONTemplate.Template=Class.create({initialize:function(a,b,c){a=this.removeMultilineComments(a);this._options=b||{};this._program=l(a,this._options)},removeMultilineComments:function(a){for(var b=a.search("{##"),c;0<=b;)c=a.substr(b),a=a.substr(0,b)+c.substr(c.search("##}")+3),b=a.search("{##");return a},render:function(a,b){var d=c(a,this._options.undefined_str);e(this._program.Statements(),d,b)},expand:function(a){var b=[];this.render(a,function(a){b.push(a)});
return b.join("")}});a.JSONTemplate.DEFAULT_PREDICATES=a.Squarespace.TEMPLATE_PREDICATES;a.JSONTemplate.DEFAULT_PARAMETRIC_PREDICATES=a.Squarespace.TEMPLATE_PARAMETRIC_PREDICATES;a.JSONTemplate.evaluateJsonTemplate=function(b,c,e){return"string"!=typeof b?"JSON Template Error: Processing failed because no input was provided. (type: "+typeof b+", template: "+JSON.stringify(b)+", dictionary: "+JSON.stringify(c)+", partials: "+JSON.stringify(e)+")":(new a.JSONTemplate.Template(b,{partials:e})).expand(c)}},
"1.0",{requires:"datatype-date-format squarespace-common squarespace-util squarespace-date-utils json squarespace-template-helpers".split(" ")});
YUI.add("squarespace-block-search-editor",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.Search=a.Base.create("search-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{initializer:function(b){if(a.Squarespace.Utils.isBetaFeatureEnabled()){var e=this.configDialog.get("dialog");this._dialogReady=!1;if(a.Lang.isValue(e))e.on("ready",function(){var a=e.getField("collectionFilter");a&&(a.after("dataChange",this._onCollectionFilterCheckChange,this),!1===e.getField("collectionFilter").get("data")&&
(e.getField("contentDesc").hide(),e.getField("collectionId").hide()))},this);else this._dialogReady=!0}},_onCollectionFilterCheckChange:function(a){var b=this.configDialog.get("dialog"),d=b.getField("contentDesc"),b=b.getField("collectionId");!0!==a.newVal?(b.clearSelected(),b.set("data",{urlId:null,filter:null,id:null}),d.hide(),b.hide()):(d.show(),b.show())},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Search")}},{NS:"blockEditor",
ATTRS:{blockName:{value:"Search"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Search=a.Base.create("block-search-editor",a.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return a.Squarespace.Utils.isBetaFeatureEnabled()?d:b}}}});var d={title:"Edit Search",flyoutPointerDirection:"hidden",style:"flyout",width:335,height:350,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{tabTitle:"Content",icon:"/universal/images-v6/icons/icon-search-16-light.png",
scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"<strong>This is a search block.</strong> Typing in this search input will allow users to search your website.",padding:[0,20]}},{ctor:a.Squarespace.DialogFields.Check,name:"collectionFilter",config:{"strings.title":"Filter by Collection"}},{ctor:a.Squarespace.DialogFields.Description,config:{name:"contentDesc",text:"Select the content you want to search.",padding:[0,10]}},{ctor:a.Squarespace.DialogFields.ContentIdSelector,
config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{collectionType:[a.Squarespace.CollectionTypes.PRODUCT],collectionOrdering:[a.Squarespace.CollectionOrdering.CHRONOLOGICAL,a.Squarespace.CollectionOrdering.CALENDAR],folder:!1}}}]},{tabTitle:"Display",icon:"/universal/images-v6/icons/icon-search-16-light.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Check,name:"searchPreview",config:{"strings.title":"Quick Preview","strings.description":"A dropdown under the search block will allow a quicker access to the search results."}},
{ctor:a.Squarespace.DialogFields.Select,config:{name:"icon","strings.title":"Icon",className:"thin dark",defaultValue:"dark",options:[{value:"dark",label:"Dark"},{value:"light",label:"Light"}]}}]}]},b={title:"Edit Search",width:335,flyoutPointerDirection:"hidden",style:"flyout",buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{icon:"/universal/images-v6/icons/icon-search-16-light.png",fields:[{ctor:a.Squarespace.DialogFields.Description,
config:{text:"<strong>This is a search block.</strong> Clicking this search button will allow users to search your website"}}]}]}},"1.0",{requires:"base squarespace-block-editor-dialog squarespace-damask-context-globals squarespace-dialog-check squarespace-dialog-content-selector squarespace-model-editor".split(" ")});
YUI.add("text-data-wordbreak",function(a,d){a.namespace("Text.Data").WordBreak={aletter:"[A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f3\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bc0-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u24b6-\u24e9\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u303b\u303c\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790\ua791\ua7a0-\ua7a9\ua7fa-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]",midnumlet:"['\\.\u2018\u2019\u2024\ufe52\uff07\uff0e]",
midletter:"[:\u00b7\u00b7\u05f4\u2027\ufe13\ufe55\uff1a]",midnum:"[,;;\u0589\u060c\u060d\u066c\u07f8\u2044\ufe10\ufe14\ufe50\ufe54\uff0c\uff1b]",numeric:"[0-9\u0660-\u0669\u066b\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9]",
cr:"\\r",lf:"\\n",newline:"[\x0B\f\u0085\u2028\u2029]",extend:"[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b6-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1baa\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]",
format:"[\u00ad\u0600-\u0603\u06dd\u070f\u17b4\u17b5\u200e\u200f\u202a-\u202e\u2060-\u2064\u206a-\u206f\ufeff\ufff9-\ufffb]",katakana:"[\u3031-\u3035\u309b\u309c\u30a0-\u30fa\u30fc-\u30ff\u31f0-\u31ff\u32d0-\u32fe\u3300-\u3357\uff66-\uff9d]",extendnumlet:"[_\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}\u00a1\u00ab\u00b7\u00bb\u00bf;\u00b7\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1361-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u3008\u3009\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30\u2e31\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]"}},
"3.17.2",{requires:["yui-base"]});
YUI.add("squarespace-widget-resize",function(a){a.namespace("Squarespace").WidgetResize=a.Base.create("widget-resize",a.Plugin.Base,[],{initializer:function(){this._timers=[];this._host=this.get("host");this.on(["resizeVerticallyChange","resizeNodeChange"],this._resizeVerticallyChange,this);this.on("resize:start",this._onResizeStart,this);this.on("resize:resize",this._onResizeResize,this);this.on("resize:end",this._onResizeEnd,this);this.on("resize:mouseUp",this._onResizeMouseUp,this);this.once("resize:ready",
this._initSyntheticDblClick,this);this._resizeVerticallyChange();this._initSyntheticDblClick()},_initSyntheticDblClick:function(){var d=null,b=null,c=this.get("resizeNode").resize,e=a.bind(function(){b&&(b.detach(),b=null);d||(d=c.delegate.on("drag:mouseDown",function(g){d.detach();d=null;b=c.delegate.on("drag:mouseDown",function(a){c.fire("handle-dblclick");e()},this);a.later(300,this,e)},this))},this);e()},_resizeVerticallyChange:function(){var d=this.get("resizeVertically"),b=this.get("resizeNode");
d&&(b&&!b.resize)&&(this.resizeV&&this.resizeV.destroy(),b.plug(a.Plugin.Resize,{handles:this.get("handles"),wrap:this.get("wrap"),defMinHeight:this.get("minHeight")}),this.resizeV=b.resize,b.resize.on("resize:start",this.fire,this),b.resize.after("resize:resize",this.fire,this),b.resize.on("resize:end",this.fire,this));this._timers.push(a.later(0,this,this.resetResizeWrapperSize))},_onResizeStart:function(a){a=this._host.get("boundingBox");this._host.get("contentBox");a.addClass("sqs-resizing")},
_onResizeResize:function(a){a=this._host.get("boundingBox").get("region");this.set("aspectRatio",100*(a.height/a.width))},_onResizeEnd:function(a){this._host.get("boundingBox").removeClass("sqs-resizing");this.resetResizeWrapperSize()},resetResizeWrapperSize:function(){this._timers.push(a.later(0,this,function(){var a=this.get("resizeNode"),b=this._host.get("boundingBox"),c={height:null,width:null};a.setStyles(c);a!==b&&b.setStyles(c);this.resizeV&&this.resizeV.get("wrapper").setStyles(c)}))},destructor:function(){for(this.get("resizeNode").unplug(a.Plugin.Resize);0!==
this._timers.length;)this._timers.shift().cancel()}},{NS:"WidgetResize",ATTRS:{aspectRatio:{value:null},handles:{value:["b"],validator:a.Lang.isArray},minHeight:{value:50,validator:a.Lang.isNumber},resizeVertically:{value:!0,lazyAdd:!1},resizeNode:{valueFn:function(){this.get("host").get("boundingBox")}},wrap:{value:!0}}})},"1.0",{requires:["resize","resize-plugin"]});
YUI.add("squarespace-localities",function(a){a.namespace("Squarespace");a.Squarespace.Localities={COUNTRY_OPTIONS:{"":{title:"Not Specified",empty:!0},US:{title:"United States"},CA:{title:"Canada"},AF:{title:"Afghanistan"},AL:{title:"Albania"},DZ:{title:"Algeria"},AS:{title:"American Samoa"},AD:{title:"Andorra"},AO:{title:"Angola"},AI:{title:"Anguilla"},AQ:{title:"Antarctica"},AG:{title:"Antigua and Barbuda"},AR:{title:"Argentina"},AM:{title:"Armenia"},AW:{title:"Aruba"},AU:{title:"Australia"},AT:{title:"Austria"},
AX:{title:"Aland Islands"},AZ:{title:"Azerbaijan"},BS:{title:"Bahamas"},BH:{title:"Bahrain"},BD:{title:"Bangladesh"},BB:{title:"Barbados"},BY:{title:"Belarus"},BE:{title:"Belgium"},BZ:{title:"Belize"},BJ:{title:"Benin"},BM:{title:"Bermuda"},BT:{title:"Bhutan"},BO:{title:"Bolivia"},BA:{title:"Bosnia and Herzegovina"},BW:{title:"Botswana"},BV:{title:"Bouvet Island"},BR:{title:"Brazil"},IO:{title:"British Indian Ocean Territory"},BN:{title:"Brunei Darussalam"},BG:{title:"Bulgaria"},BF:{title:"Burkina Faso"},
BI:{title:"Burundi"},KH:{title:"Cambodia"},CI:{title:"Cote d'Ivoire"},CM:{title:"Cameroon"},CV:{title:"Cape Verde"},KY:{title:"Cayman Islands"},CF:{title:"Central African Republic"},TD:{title:"Chad"},CL:{title:"Chile"},CN:{title:"China"},CX:{title:"Christmas Island"},CC:{title:"Cocos (Keeling) Islands"},CO:{title:"Colombia"},KM:{title:"Comoros"},CG:{title:"Congo"},CD:{title:"Congo, Democratic Republic"},CK:{title:"Cook Islands"},CR:{title:"Costa Rica"},HR:{title:"Croatia"},CU:{title:"Cuba"},CY:{title:"Cyprus"},
CZ:{title:"Czech Republic"},DK:{title:"Denmark"},DJ:{title:"Djibouti"},DM:{title:"Dominica"},DO:{title:"Dominican Republic"},TL:{title:"Timor-Leste"},EC:{title:"Ecuador"},EG:{title:"Egypt"},SV:{title:"El Salvador"},GQ:{title:"Equatorial Guinea"},ER:{title:"Eritrea"},EE:{title:"Estonia"},ET:{title:"Ethiopia"},FK:{title:"Falkland Islands (Malvinas)"},FO:{title:"Faroe Islands"},FJ:{title:"Fiji"},FI:{title:"Finland"},FR:{title:"France"},GF:{title:"French Guiana"},PF:{title:"French Polynesia"},TF:{title:"French Southern Territories"},
GA:{title:"Gabon"},GM:{title:"Gambia"},GE:{title:"Georgia"},DE:{title:"Germany"},GH:{title:"Ghana"},GI:{title:"Gibraltar"},GR:{title:"Greece"},GL:{title:"Greenland"},GD:{title:"Grenada"},GG:{title:"Guernsey"},GP:{title:"Guadeloupe"},GU:{title:"Guam"},GT:{title:"Guatemala"},GN:{title:"Guinea"},GW:{title:"Guinea-Bissau"},GY:{title:"Guyana"},HT:{title:"Haiti"},HM:{title:"Heard and McDonald Islands"},HN:{title:"Honduras"},HK:{title:"Hong Kong"},HU:{title:"Hungary"},IS:{title:"Iceland"},IN:{title:"India"},
ID:{title:"Indonesia"},IR:{title:"Iran"},IQ:{title:"Iraq"},IE:{title:"Ireland"},IL:{title:"Israel"},IT:{title:"Italy"},JM:{title:"Jamaica"},JP:{title:"Japan"},JE:{title:"Jersey"},JO:{title:"Jordan"},KZ:{title:"Kazakhstan"},KE:{title:"Kenya"},KI:{title:"Kiribati"},KP:{title:"Korea, Democratic People's Republic"},KR:{title:"Korea (South)"},KV:{title:"Kosovo"},KW:{title:"Kuwait"},KG:{title:"Kyrgyzstan"},LA:{title:"Laos"},LV:{title:"Latvia"},LB:{title:"Lebanon"},LS:{title:"Lesotho"},LR:{title:"Liberia"},
LY:{title:"Libya"},LI:{title:"Liechtenstein"},LT:{title:"Lithuania"},LU:{title:"Luxembourg"},MO:{title:"Macau"},MK:{title:"Macedonia"},MG:{title:"Madagascar"},MW:{title:"Malawi"},MY:{title:"Malaysia"},MV:{title:"Maldives"},ML:{title:"Mali"},MT:{title:"Malta"},MH:{title:"Marshall Islands"},MQ:{title:"Martinique"},MR:{title:"Mauritania"},MU:{title:"Mauritius"},YT:{title:"Mayotte"},MX:{title:"Mexico"},FM:{title:"Micronesia"},MD:{title:"Moldova"},MC:{title:"Monaco"},MN:{title:"Mongolia"},ME:{title:"Montenegro"},
MS:{title:"Montserrat"},MA:{title:"Morocco"},MZ:{title:"Mozambique"},MM:{title:"Myanmar"},NA:{title:"Namibia"},NR:{title:"Nauru"},NP:{title:"Nepal"},NL:{title:"Netherlands"},AN:{title:"Netherlands Antilles"},NC:{title:"New Caledonia"},NZ:{title:"New Zealand"},NI:{title:"Nicaragua"},NE:{title:"Niger"},NG:{title:"Nigeria"},NU:{title:"Niue"},NF:{title:"Norfolk Island"},MP:{title:"Northern Mariana Islands"},NO:{title:"Norway"},OM:{title:"Oman"},PK:{title:"Pakistan"},PW:{title:"Palau"},PA:{title:"Panama"},
PG:{title:"Papua New Guinea"},PS:{title:"Palestine, State of"},PY:{title:"Paraguay"},PE:{title:"Peru"},PH:{title:"Philippines"},PN:{title:"Pitcairn"},PL:{title:"Poland"},PT:{title:"Portugal"},PR:{title:"Puerto Rico"},QA:{title:"Qatar"},RE:{title:"Reunion"},RO:{title:"Romania"},RU:{title:"Russian Federation"},RW:{title:"Rwanda"},GS:{title:"South Georgia and the South Sandwich Islands"},BL:{title:"Saint Barthelemy"},KN:{title:"Saint Kitts and Nevis"},LC:{title:"Saint Lucia"},VC:{title:"Saint Vincent and the Grenadines"},
WS:{title:"Samoa"},SM:{title:"San Marino"},ST:{title:"Sao Tome and Principe"},SA:{title:"Saudi Arabia"},SN:{title:"Senegal"},RS:{title:"Serbia"},SC:{title:"Seychelles"},SL:{title:"Sierra Leone"},SG:{title:"Singapore"},SK:{title:"Slovakia"},SI:{title:"Slovenia"},SB:{title:"Solomon Islands"},SO:{title:"Somalia"},ZA:{title:"South Africa"},ES:{title:"Spain"},LK:{title:"Sri Lanka"},SH:{title:"Saint Helena"},PM:{title:"Saint Pierre and Miquelon"},SD:{title:"Sudan"},SR:{title:"Suriname"},SJ:{title:"Svalbard and Jan Mayen Islands"},
SZ:{title:"Swaziland"},SE:{title:"Sweden"},CH:{title:"Switzerland"},SY:{title:"Syria"},TW:{title:"Taiwan"},TJ:{title:"Tajikistan"},TZ:{title:"Tanzania"},TH:{title:"Thailand"},TG:{title:"Togo"},TK:{title:"Tokelau"},TO:{title:"Tonga"},TT:{title:"Trinidad and Tobago"},TN:{title:"Tunisia"},TR:{title:"Turkey"},TM:{title:"Turkmenistan"},TC:{title:"Turks and Caicos Islands"},TV:{title:"Tuvalu"},UM:{title:"United States Minor Outlying Islands"},UG:{title:"Uganda"},UA:{title:"Ukraine"},AE:{title:"United Arab Emirates"},
GB:{title:"United Kingdom"},UY:{title:"Uruguay"},UZ:{title:"Uzbekistan"},VU:{title:"Vanuatu"},VA:{title:"Vatican City State (Holy See)"},VE:{title:"Venezuela"},VN:{title:"Viet Nam"},VG:{title:"Virgin Islands (British)"},VI:{title:"Virgin Islands (U.S.)"},WF:{title:"Wallis and Futuna Islands"},EH:{title:"Western Sahara"},YE:{title:"Yemen"},ZM:{title:"Zambia"},ZW:{title:"Zimbabwe"}},STATE_OPTIONS:{AL:{title:"Alabama"},AK:{title:"Alaska"},AZ:{title:"Arizona"},AR:{title:"Arkansas"},CA:{title:"California"},
CO:{title:"Colorado"},CT:{title:"Connecticut"},DE:{title:"Delaware"},FL:{title:"Florida"},GA:{title:"Georgia"},HI:{title:"Hawaii"},ID:{title:"Idaho"},IL:{title:"Illinois"},IN:{title:"Indiana"},IA:{title:"Iowa"},KS:{title:"Kansas"},KY:{title:"Kentucky"},LA:{title:"Louisiana"},ME:{title:"Maine"},MD:{title:"Maryland"},MA:{title:"Massachusetts"},MI:{title:"Michigan"},MN:{title:"Minnesota"},MS:{title:"Mississippi"},MO:{title:"Missouri"},MT:{title:"Montana"},NE:{title:"Nebraska"},NV:{title:"Nevada"},NH:{title:"New Hampshire"},
NJ:{title:"New Jersey"},NM:{title:"New Mexico"},NY:{title:"New York"},NC:{title:"North Carolina"},ND:{title:"North Dakota"},OH:{title:"Ohio"},OK:{title:"Oklahoma"},OR:{title:"Oregon"},PA:{title:"Pennsylvania"},RI:{title:"Rhode Island"},SC:{title:"South Carolina"},SD:{title:"South Dakota"},TN:{title:"Tennessee"},TX:{title:"Texas"},UT:{title:"Utah"},VT:{title:"Vermont"},VA:{title:"Virginia"},WA:{title:"Washington"},DC:{title:"Washington, District of Columbia"},WV:{title:"West Virginia"},WI:{title:"Wisconsin"},
WY:{title:"Wyoming"},AA:{title:"Armed Forces Europe"},AE:{title:"Armed Forces Americas"},AP:{title:"Armed Forces Pacific"}}};a.Squarespace.Localities.COUNTRIES_TO_STATES={US:a.Squarespace.Localities.STATE_OPTIONS,CA:{ON:{title:"Ontario"},QC:{title:"Quebec"},NS:{title:"Nova Scotia"},NB:{title:"New Brunswick"},MB:{title:"Manitoba"},BC:{title:"British Columbia"},PE:{title:"Prince Edward Island"},SK:{title:"Saskatchewan"},AB:{title:"Alberta"},NL:{title:"Newfoundland and Labrador"},NT:{title:"Northwest Territories"},
YT:{title:"Yukon"},NU:{title:"Nunavut"}}};a.Squarespace.Localities.countryCodeFromName=function(b){for(var e in a.Squarespace.Localities.COUNTRY_OPTIONS)if(a.Squarespace.Localities.COUNTRY_OPTIONS[e].title===b)return e};var d=function(b){return a.Array.reduce(a.Object.keys(b).sort(),[],function(a,d){a.push({label:b[d].title,value:d});return a})},b=function(a){return a.sort(function(a,b){return a.label<b.label?-1:1})};a.Squarespace.Localities.getNewCountryOptions=function(){return b(d(a.Squarespace.Localities.COUNTRY_OPTIONS))};
a.Squarespace.Localities.getNewStateOptionsForCountry=function(b){return d(a.Squarespace.Localities.COUNTRIES_TO_STATES[b])};a.Squarespace.Localities.getAmericentricSortedCountryOptions=function(){var b=a.Array.filter(a.Squarespace.Localities.getNewCountryOptions(),function(a){return""!==a.value});b.sort(function(a,b){return"United States"===a.label?-1:"United States"===b.label||a.label>b.label?1:a.label<b.label?-1:0});return b}});
YUI.add("squarespace-frontend-edit-controller-page",function(a){var d=a.namespace("Squarespace.Frontend.EditController"),b=a.Squarespace.Models,c=d.Page=a.Base.create("Page",d.LayoutBase,[],{show:function(){c.superclass.show.call(this);var e=this.get("rootNode").getAttribute("id").substr(5),d=a.Squarespace.ContentCollectionCache.getById(e);a.Squarespace.ContentCollectionUtils.isDemoCollectionId(e)||(e=new b.PageCollectionData({collection:d}),this.set("model",e),e.load(a.bind(function(){this._renderEditor()},
this)))},_getPageLayout:function(){return this.get("model").get("data").get("layout")}},{ATTRS:{model:{validator:a.Squarespace.AttrValidators.isInstanceOf(b.PageCollectionData)},columns:{value:12}}})},"1.0",{requires:"base squarespace-frontend-edit-controller-base squarespace-models-layout squarespace-models-content-collection squarespace-promises squarespace-attr-validators squarespace-frontend-plugin-layoutengine-editor squarespace-frontend-edit-controller-layout-base".split(" ")});
YUI.add("squarespace-dialog-check-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-check.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k,l=this.escapeExpression;a='<div class="check-element ';if((f=d["if"].call(b,b.data,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return"active"},h),data:h}))||0===f)a+=f;a+='">\n  ';if((k=d["if"].call(b,(f=b.strings,null==f||!1===f?f:f.title),
{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,e;return c=""+('\n    <div class="title">'+l((e=(e=a.strings,null==e||!1===e?e:e.title),"function"===typeof e?e.apply(a):e))+"</div>\n  ")},h),data:h}))||0===k)a+=k;a+="\n  ";if((k=d["if"].call(b,(f=b.strings,null==f||!1===f?f:f.description),{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){var c,e;return c=""+('\n    <div class="description">'+l((e=(e=a.strings,null==e||!1===e?e:e.description),"function"===typeof e?e.apply(a):
e))+"</div>\n  ")},h),data:h}))||0===k)a+=k;return a+"\n</div>"})})();a.Handlebars.registerPartial("dialog-check.html".replace("/","."),d.templates["dialog-check.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-block-soundcloud-editor",function(a){a.namespace("Squarespace.Block.Editor").SoundCloud=a.Base.create("soundcloud-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.SoundCloud")}},{NS:"blockEditor",ATTRS:{blockName:{value:"SoundCloud"},resizable:{value:!0},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}}}});a.namespace("Squarespace.Block.ModelEditorDialog").SoundCloud=
a.Base.create("blockSoundCloudEditor",a.Squarespace.ModelEditorDialog,[],{getDialogData:function(){return{embed:this.get("model").toJSON()}},sanitizeDialogData:function(b){return a.merge(b.embed,{showArtwork:b.showArtwork,useVisualPlayer:b.useVisualPlayer})}},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={width:470,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit SoundCloud Embed",icon:"/universal/images-v6/icons/skelecon-soundcloud-16-light.png",
scroll:!1,fields:[{ctor:a.Squarespace.DialogFields.Oembed,name:"embed",config:{"strings.description":"<strong>Paste the URL</strong> of the SoundCloud set or track you'd like to embed, and Squarespace will attempt to locate content at this URL and format it for your site.","strings.inputPlaceholder":"Enter a SoundCloud URL here"}}]}]}},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-damask-context-globals","squarespace-dialog-oembed","squarespace-model-editor"]});
YUI.add("squarespace-flickr-oembed-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["flickr-oembed.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k=this.escapeExpression;a='<div class="flickr-oembed">\n  <a href="';(f=d.url)?f=f.call(b,{hash:{},data:h}):(f=b.url,f="function"===typeof f?f.apply(b):f);a+=k(f)+'">\n    <img src="';(f=d["flickr-url"])?f=f.call(b,{hash:{},data:h}):(f=b["flickr-url"],
f="function"===typeof f?f.apply(b):f);a+=k(f)+'" width="100%" />\n  </a>\n  ';if((f=d["if"].call(b,b.title,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;c='\n    <p><a href="';(e=d.url)?e=e.call(a,{hash:{},data:b}):(e=a.url,e="function"===typeof e?e.apply(a):e);c+=k(e)+'">';(e=d.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,e="function"===typeof e?e.apply(a):e);return c+=k(e)+"</a></p>\n  "},h),data:h}))||0===f)a+=f;return a+"\n</div>"})})();a.Handlebars.registerPartial("flickr-oembed.html".replace("/",
"."),d.templates["flickr-oembed.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-block-content-html-editor",function(a){a.namespace("Squarespace.Content").HtmlEditor=a.Base.create("contentHtmlEditor",a.Squarespace.Content.HtmlEditorBase,[],{initializer:function(){this._cb.on("contextmenu",this._onContextMenu,this);this._cb.on("keyup",this._onKeyUp,this);this._cb.on("paste",this._onPaste,this)},_onContextMenu:function(a){a.stopPropagation();this.block.get("focusHandler").mouseUpPropagationStopped(a)},_onKeyUp:function(d){this._debounceSaveOnKeyUp||(this._debounceSaveOnKeyUp=
a.Squarespace.debounce(function(){this._save()},100));!{27:!0,16:!0,17:!0,18:!0,20:!0,36:!0,35:!0,33:!0,34:!0,37:!0,38:!0,39:!0,40:!0,112:!0,113:!0,114:!0,115:!0,116:!0,117:!0,118:!0,119:!0,120:!0,121:!0,122:!0,123:!0,45:!0,91:!0,144:!0}[d.keyCode]&&this._debounceSaveOnKeyUp();(13===d.keyCode||8===d.keyCode||46===d.keyCode)&&this._fireContentUpdate()},_onPaste:function(){a.soon(a.bind(function(){this._save();this._fireContentUpdate()},this))},initVisualEngine:function(){var d=this.get("host").get("parent"),
b=a.Squarespace.Wysiwyg.ToolbarTypes.LAYOUT_SMALL;d&&d.get("type")===a.Squarespace.BlockType.HTML&&(b=a.Lang.isValue(this._bb.ancestor(".sqs-locked-layout"))?a.Squarespace.Wysiwyg.ToolbarTypes.LOCKED_BLOCK:a.Squarespace.Wysiwyg.ToolbarTypes.BLOCK);this.visualEditor=new a.Squarespace.Wysiwyg.Editor({node:this._host.get("contentBox"),editorType:a.Squarespace.Wysiwyg.EditorTypes.INLINE,toolbarType:b});this.visualEditor.on("change",function(){this._save()},this);d&&(this.visualEditor.on("dataReady",function(){d.fire("widget:contentUpdate")},
this),this.visualEditor.on("blur",function(){d.get("editController").alignInsertPoints(this._bb.ancestor(".sqs-layout"))},this),this.visualEditor.on("removeBlock",a.bind(function(){var b=this._cb.ancestor(".sqs-block");b.addClass("sqs-confirmation-open");var e=new a.Squarespace.Widgets.Confirmation({"strings.title":"Remove Block","strings.message":"Are you sure you wish to remove this block?"});e.on("confirm",function(){b.removeClass("sqs-confirmation-open");this.block.queueForDestruction();d.get("editController").cleanGrids(this._bb.ancestor(".sqs-layout"))},
this);e.on("cancel",function(){b.removeClass("sqs-confirmation-open")},this)},this)));this.afterHostEvent("editableChange",function(a){this.visualEditor.set("editable",a.newVal)});this.afterHostEvent("focusedChange",function(a){!0===a.newVal&&this.visualEditor.giveEditorFocus()},this)},_getVisualEditorData:function(){return this.visualEditor.getEditorData()},_giveEditorFocus:function(){if(this.visualEditor)return this.visualEditor.giveEditorFocus()},_destroyVisualEditor:function(){a.Lang.isValue(this.visualEditor)&&
this.visualEditor.destroy()}},{NS:"contentEditor"})},"2.0",{requires:"base squarespace-edit-controller-web-app squarespace-enum squarespace-block-content-html-editor-base squarespace-widgets-confirmation squarespace-wysiwyg-editor".split(" ")});
YUI.add("squarespace-content-item-types-base",function(a){function d(b,e,d){if(e){for(var f=[],h=e.get("fields"),k=0;k<h.length;k++){var l=h[k];switch(l.type){case "text":f.push({$include:["fields.title",{"config.name":"custom-"+l.name,"config.strings.title":l.title||"","config.strings.placeholder":""}]});break;case "checkbox":f.push({ctor:a.Squarespace.DialogFields.Check,config:{name:"custom-"+l.name,"strings.title":l.title}});break;case "wysiwyg":f.push({ctor:a.Squarespace.DialogFields.Description,
config:{title:l.title||""}});f.push({ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"custom-"+l.name,toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:227,classNames:"major"}});break;case "image":(function(b){f.push({$include:["fields.mainImage",{name:"custom-"+b.name,mode:a.Squarespace.UploadModes.CHILD,childType:a.Squarespace.RecordType.IMAGE,preflight:function(a){var c=d.get("model"),e=d.get("dialog").getField("custom-"+b.name);c.get("id")?a&&a():(c.once("save",function(){e.get("data").set("parentId",
c.get("id"));e.refreshItemPostData();a&&a()}),d.autoSave())}}]})})(l);break;case "gallery":(function(b){f.push({ctor:a.Squarespace.DialogFields.Description,config:{title:b.title||""}});f.push({$include:["fields.childItemsGrid",{"config.width":null,"config.height":170,"config.name":"custom-"+b.name,"config.uploadPreflight":function(a){var c=d.get("model"),e=d.get("dialog").getField("custom-"+b.name).get("data");c.get("id")?(e.set("id",c.get("id")),a()):(c.once("save",function(){e.set("id",c.get("id"));
a()},c),d.autoSave())}}]})})(l)}}e={tabTitle:e.get("title"),name:e.get("name"),scroll:!0,fields:f};b.tabs.push(e)}}a.namespace("Squarespace.ContentItemEditor");var b=a.Squarespace.ContentItemEditor.Base=a.Base.create("ContentItemEditor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){if(this.constructor===b)throw"You cannot instantiate the BaseContentItemEditor.";var c=this.get("dialog"),e=this.get("model");c.on("button-saveAndPublish",this._saveAndPublish,this);c.on("remove-requested",
this._confirmAndRemoveItem,this);c.on("ready",this._dialogOnReady,this);(this._isNew=e.isNew())&&this.plug(a.Squarespace.ModelEditorPlugins.AutoSave)},_saveAndPublish:function(){var b=this.get("dialog");this.get("model").set("workflowState",a.Squarespace.WorkflowStates.PUBLISHED);var e=b.getField("workflow"),d=e.getValue(),f=(new Date).getTime();"draft"!==d.state&&(f=d.date);e.setValue({state:"published",date:f});b.saveAndClose()},_dialogOnReady:function(){var b=this.get("dialog");this.get("model");
this._bindFileUploadBehaviors("mainImage");var e=b.getField("workflow");if(e)e.on("dataChange",function(e){e=a.Squarespace.ObjectBuilder.make({buttons:this.get("dialogConfig.buttons")},this.get("dialogConfigContext"),{id:this._isNew?null:this.get("model").get("id"),workflowState:this._getWorkflowStateForString(e.newVal.state)});b.setButtons(e.buttons)},this)},_bindFileUploadBehaviors:function(a){var b=this.get("dialog").getField(a),d=this.get("model");b&&b.after("dataChange",function(){if(b.get("data")){var a=
b.get("data").get("id");d.get("id")!=a&&d.set("id",a)}else d.get("id")&&d.clearFileData()},this)},_confirmAndRemoveItem:function(b){var e;e=this.getPresentationName();var d=this.get("model");this._isNew?(b="Discard Post",e="Are you sure you wish to discard this "+e.toLowerCase()+"?"):(b="Remove "+e,e="Are you sure you wish to remove this "+e.toLowerCase()+"?");(new a.Squarespace.Widgets.Confirmation({"strings.title":b,"strings.message":e})).on("confirm",function(){d.destroy({remove:!0});this.destroy()},
this)},getDialogData:function(){var c=b.superclass.getDialogData.call(this);c.mainImage=this.get("model");c.workflow={state:a.Squarespace.ContentItemUtils.getWorkflowStateIdentifier(c.workflowState),date:c.publishOn};c.commenting={state:a.Squarespace.ContentItemUtils.getCommentStateIdentifier(c.commentState),date:c.commentDisableOn};c.gallery=this.get("model");c.clickthroughUrl&&(c.clickthroughUrl={url:c.clickthroughUrl});var e=this.getCustomTypeConfiguration();if(e)for(var e=e.get("fields"),d=0;d<
e.length;d++){var f=e[d].type,h=e[d].name,k=a.Object.getValue(c,["customContent",h]);switch(f){case "text":case "wysiwyg":c["custom-"+h]=k;break;case "checkbox":c["custom-"+h]=k;break;case "image":a.Lang.isValue(k)?c["custom-"+h]=new a.Squarespace.Models.ContentItem(a.merge(k,{collectionId:this.get("model").get("collectionId"),parentId:this.get("model").get("id"),recordType:a.Squarespace.RecordType.IMAGE})):c["custom-"+h]=new a.Squarespace.Models.ContentItem({collectionId:this.get("model").get("collectionId"),
parentId:this.get("model").get("id"),recordType:a.Squarespace.RecordType.IMAGE});break;case "gallery":f=new a.Squarespace.Models.ContentItem({id:this.get("model").get("id"),collectionId:this.get("model").get("collectionId"),recordType:a.Squarespace.RecordType.IMAGE});a.Lang.isValue(k)&&f.get("items").add(k);c["custom-"+h]=f;break;default:a.Squarespace.Logger.log("Custom Type Saving Error",{message:"Could not find any data to set for field.",field:e[d]})}}return c},sanitizeDialogData:function(b){delete b.author;
delete b.mainImage;delete b.mediaProcessingState;for(var e="addedOn publishOn updatedOn commentDisableOn startDate endDate".split(" "),d=0;d<e.length;d++)a.Lang.isDate(b[e[d]])?b[e[d]]=b[e[d]].getTime():a.Lang.isNumber(b[e[d]])&&console.warn(e[d]+" should really be a date. Should fix this.");b.commentState=a.Squarespace.CommentStates["allow"==b.commenting.state?"ENABLED":"DISABLED"];b.commentDisableOn=b.commenting.date;delete b.commenting;b.workflowState=this._getWorkflowStateForString(b.workflow.state);
b.publishOn=b.workflow.date;delete b.workflow;b.tags=b.tags||[];b.categories=b.categories||[];delete b.id;delete b.gallery;a.Lang.isObject(b.clickthroughUrl)&&(b.clickthroughUrl=b.clickthroughUrl.url);if(d=this.getCustomTypeConfiguration()){e=d.get("fields");a.Lang.isObject(b.customContent)||(b.customContent={customType:d.get("name")});for(d=0;d<e.length;d++){var f=e[d],h=f.name;switch(f.type){case "text":case "wysiwyg":case "checkbox":b.customContent[h]=b["custom-"+h];delete b["custom-"+h];break;
case "image":b["custom-"+h].get("hasFileData")?b.customContent[h]=b["custom-"+h].getAttrs():delete b.customContent[h];delete b["custom-"+h];break;case "gallery":b.customContent[h]=this.get("dialog").getField("custom-"+h).get("data").get("items").toJSON();delete b["custom-"+h];break;default:a.Squarespace.Logger.log("Custom Type Saving Error",{message:"Could not find anything for field.",field:f})}}}return b},_getWorkflowStateForString:function(b){if("published"==b)return a.Squarespace.WorkflowStates.PUBLISHED;
if("scheduled"==b)return a.Squarespace.WorkflowStates.SCHEDULED;if("needsreview"==b)return a.Squarespace.WorkflowStates.NEEDS_REVIEW;if("draft"==b)return a.Squarespace.WorkflowStates.DRAFT},_getTemplateContext:function(){var b=this.get("model").toJSON(),e=this.get("model").get("collectionId");a.Squarespace.ContentCollectionCache.getCollectionById(e,function(a){b.urlPrefix="/"+a.get("urlId")+"/"});b.presentationName=this.getPresentationName();b.model=this.get("model");b.editor=this;return b},getTemplateContext:function(){var a=
this._getTemplateContext(),b=this.getCustomTypeConfiguration();b&&(a.presentationName=b.get("title"));return a},getPresentationName:function(){var b=this.get("model").get("recordType");return a.Squarespace.Enums.RecordType.titleForValue(b)},getCustomTypeConfiguration:function(){var b=this.get("model").get("customContent.customType");return b&&(b=a.Squarespace.Singletons.Template.get("customTypes."+b))?b:null},_getDialogConfig:function(){var b=a.clone(this.get("editorConfiguration"));d(b,this.getCustomTypeConfiguration(),
this);return b=a.merge({initialDataByReference:!0},b)}},{ATTRS:{editorConfiguration:{value:{}},dialogConfig:{getter:"_getDialogConfig"},dialogConfigContext:{value:a.Squarespace.ContentItemEditorSettings},collection:{}}})},"1.0",{requires:"squarespace-content-item-types-settings squarespace-enum squarespace-model-editor squarespace-content-item-types-enum-record-type squarespace-models-content-collection squarespace-models-content-item squarespace-models-template squarespace-dialog-description squarespace-content-item-utils squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-form-pre-submit-topic",function(a){var d={EMPTY:1,SUB_TOPICS:2,CONTENT:3};a.namespace("Squarespace");var b=a.Squarespace.FormPreSubmitTopic=a.Base.create("FormPreSubmitTopic",a.Squarespace.Widgets.SSWidget,[a.WidgetChild],{initializer:function(){this.publish("removeClicked",{emitFacade:!0});this.publish("titleFieldEnter",{emitFacade:!0});var b=this.get("topic");this._titleField=new a.Squarespace.DialogFields.Text({name:"topicTitle",data:b.get("title")});this._labelField=new a.Squarespace.DialogFields.LabeledText({name:"topicLabel",
data:b.get("label"),className:"thin","strings.placeholder":"Label"});this._subTopicsField=new a.Squarespace.DialogFields.PreSubmitBuilder({name:"subTopics",isSubTopics:!0,data:b.get("subTopics")});this._contentField=new a.Squarespace.DialogFields.ContentItemListBuilder({name:"content",collectionType:a.Squarespace.CollectionTypes.GENERIC,recordType:a.Squarespace.Enums.RecordType.KBARTICLE,allowClear:!this.get("isSubTopic"),data:b.get("relatedContentItems")})},destructor:function(){this.blur();this._titleField.destroy();
this._labelField.destroy();this._subTopicsField.destroy();this._contentField.destroy()},renderUI:function(){b.superclass.renderUI.call(this);var c=this.get("contentBox");this._editButton=c.one("> .topic-control-bar > .topic-controls > .edit-topic");var e=this._topicChildrenNode=c.one("> .topic-children");e.plug(a.Squarespace.Animations.Expandable,{duration:0.2});e.hide(!0);this._titleField.render(c.one("> .topic-control-bar > .topic-title"));this._labelField.render(e.one("> .topic-label"));this._subTopicsField.render(e.one("> .topic-sub-topics"));
this._contentField.render(e.one("> .topic-content"))},bindUI:function(){b.superclass.bindUI.call(this);this.get("topic").after("destroy",this.destroy,this);this.after(["editingChange","editingModeChange"],this.syncUI,this);this._contentField.on("contentCleared",function(){this._set("editingMode",d.EMPTY)},this);this._bindTitleField();this._bindEditButton();this._bindRemoveButton();this._bindLabelField();this._bindTopicChildControls()},syncUI:function(){b.superclass.syncUI.call(this);this._toggleEditingModeClasses();
this.get("editing")?this._setEditingState():this._setClosedState()},openEdit:function(){this._set("editing",!0)},closeEdit:function(){this._set("editing",!1)},focusAndSelect:function(){var a=this._titleField;a.focus();a.select()},_bindTitleField:function(){var a=this._titleField,b=this.get("topic");a.after("dataChange",function(a){b.set("title",a.newVal)},this);a._textField.on("key",function(){this.fire("titleFieldEnter")},"down:13",this)},_bindEditButton:function(){this._editButton.on("click",function(){this.get("animating")||
(this.get("editing")?this.closeEdit():this.openEdit())},this)},_bindRemoveButton:function(){this.get("contentBox").one("> .topic-control-bar .topic-controls > .remove-topic").on("click",function(a){a.halt();this.fire("removeClicked")},this)},_bindLabelField:function(){var a=this.get("topic");this._labelField.after("dataChange",function(b){a.set("label",b.newVal)})},_bindTopicChildControls:function(){var a=this._topicChildrenNode,b=this.get("topic").get("subTopics");a.one("> .topic-child-controls > .topic-child-control-wrapper > .add-sub-topics").on("click",
this._initializeSubTopics,this);a.one("> .topic-child-controls > .topic-child-control-wrapper > .add-content").on("click",this._initializeRelatedContent,this);this._registerEvent(b.after("remove",function(){b.isEmpty()&&this._set("editingMode",d.EMPTY)},this))},_setEditingState:function(){this._editButton.setContent(this.get("strings.doneText"));var a=this._topicChildrenNode,b=this.get("editingMode")===d.CONTENT,g=this._contentField;a.hasClass("expandable-hidden")?(a.once("opened",function(){this._set("animating",
!1);b&&g.focus()},this),this._set("animating",!0),a.show()):b&&g.focus()},_setClosedState:function(){this._editButton.setContent(this.get("strings.editText"));var a=this._topicChildrenNode;a.hasClass("expandable-hidden")||(a.once("closed",function(){this._subTopicsField.closeChildren();this._contentField.clear();this._set("animating",!1)},this),this._set("animating",!0),a.hide())},_toggleEditingModeClasses:function(){var a=this.get("contentBox");switch(this.get("editingMode")){case d.EMPTY:a.removeClass("editing-mode-sub-topics");
a.removeClass("editing-mode-content");a.addClass("editing-mode-empty");break;case d.SUB_TOPICS:a.removeClass("editing-mode-empty");a.removeClass("editing-mode-content");a.addClass("editing-mode-sub-topics");break;case d.CONTENT:a.removeClass("editing-mode-empty"),a.removeClass("editing-mode-sub-topics"),a.addClass("editing-mode-content")}},_initializeSubTopics:function(){var b=this.get("topic").get("subTopics");this._set("editingMode",d.SUB_TOPICS);b.add(new a.Squarespace.Models.FormPreSubmitTopic({title:"New Subtopic"}))},
_initializeRelatedContent:function(){this._set("editingMode",d.CONTENT)}},{CSS_PREFIX:"sqs-form-pre-submit-topic",HANDLEBARS_TEMPLATE:"form-pre-submit-topic.html",ATTRS:{strings:{getter:function(){return{editText:this.get("isSubTopic")?"+ Content":"Edit",doneText:"Done"}}},topic:{valueFn:function(){return new a.Squarespace.Models.FormPreSubmitTopic},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.FormPreSubmitTopic),writeOnce:"initOnly"},editing:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,
readOnly:!0},editingMode:{valueFn:function(){var a=this.get("topic");return this.get("isSubTopic")?d.CONTENT:a.get("subTopics").isEmpty()?a.get("relatedContentItems").isEmpty()?d.EMPTY:d.CONTENT:d.SUB_TOPICS},validator:function(b){if(a.Object.hasValue(d,b))return!0;console.error("FormPreSubmitTopic: Invalid editingMode. Must be a value in the EDITING_MODES enum.");return!1},readOnly:!0},isSubTopic:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},animating:{value:!1,
validator:a.Squarespace.AttrValidators.isBoolean,readOnly:!0}}})},"1.0",{requires:"base widget-child squarespace-animations squarespace-attr-validators squarespace-content-item-types-enum-record-type squarespace-dialog-auto-complete squarespace-dialog-content-item-list-builder squarespace-dialog-pre-submit-builder squarespace-dialog-text squarespace-enum squarespace-form-pre-submit-topic-template squarespace-models-content-item-list squarespace-models-form-pre-submit-topic squarespace-ss-widget".split(" ")});
YUI.add("squarespace-block-summary",function(a){var d=a.namespace("Squarespace.Block").Summary=a.Base.create("block-summary",a.Squarespace.Block.ModelSyncBase,[],{syncUI:function(){d.superclass.syncUI.call(this);this._plugImageLoader()},_renderSuccess:function(a){d.superclass._renderSuccess.call(this,a);this._plugImageLoader()},_getDefaultContent:function(){return{title:!0,thumbnail:!0,excerpt:!0,pageSize:10,collectionId:"",filter:{}}}},{MODEL:a.Squarespace.ContentModel.SummaryBlock,ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},
editor:{value:a.Squarespace.Block.Editor.Summary},type:{value:a.Squarespace.BlockType.SUMMARY}},CSS_PREFIX:"sqs-block-summary"})},"1.0",{requires:["base","squarespace-enum","squarespace-block-summary-editor"]});
YUI.add("squarespace-dialog-email-service-connect-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-email-service-connect.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k,l=this.escapeExpression;f=d.blockHelperMissing;a='<div class="sqs-content-inner">\n\n  <div class="text">\n    ';k={hash:{},inverse:this.noop,fn:this.programWithDepth(1,function(a,b,c){var e,h;e='\n      <div class="title">';
(h=d.title)?h=h.call(a,{hash:{},data:b}):(h=a.title,h="function"===typeof h?h.apply(a):h);return e+=l(h)+'</div>\n      <div class="message">Sending to <span class="connected-email">'+l((h=(h=c.data,null==h||!1===h?h:h.email),"function"===typeof h?h.apply(a):h))+"</span></div>\n    "},h,b),data:h};(h=d.strings)?h=h.call(b,k):(h=b.strings,h="function"===typeof h?h.apply(b):h);d.strings||(h=f.call(b,h,k));if(h||0===h)a+=h;return a+'\n  </div>\n\n  <div class="fields"></div>\n\n  <div class="connect">Connect</div>\n  <div class="icon"></div>\n\n</div>\n'})})();
a.Handlebars.registerPartial("dialog-email-service-connect.html".replace("/","."),d.templates["dialog-email-service-connect.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-block-twitter",function(a){var d=a.namespace("Squarespace.Block").Twitter=a.Base.create("block-twitter",a.Squarespace.Block.SocialSummaryBase,[],{_renderSuccess:function(b){d.superclass._renderSuccess.call(this,b);b&&a.Squarespace.FollowButtonUtils.renderAll()},_getDefaultContent:function(){var b=d.superclass._getDefaultContent.call(this);return a.merge(b,{showAvatar:!0,showUsername:!0,followButton:!1})}},{CSS_PREFIX:"sqs-block-twitter",MODEL:a.Squarespace.ContentModel.TwitterBlock,
ATTRS:{editor:{value:a.Squarespace.Block.Editor.Twitter},type:{value:a.Squarespace.BlockType.TWITTER}}})},"1.0",{requires:"base squarespace-enum squarespace-follow-buttons squarespace-block-social-summary squarespace-block-twitter-editor squarespace-block-twitter-model".split(" ")});YUI.add("squarespace-block-quote-model",function(a){a.namespace("Squarespace.ContentModel").Quote=a.Base.create("QuoteBlockModel",a.Model,[],{},{ATTRS:{quote:{value:""},source:{value:""}}})},"1.0",{requires:["base","model"]});
YUI.add("squarespace-block-spacer-editor",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.Spacer=a.Base.create("blockSpacerEditor",a.Squarespace.Block.Editor.Base,[],{},{NS:"blockEditor",ATTRS:{resizable:{value:!0},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}}}})},"1.0",{requires:["base","squarespace-block-plugin-resizable","squarespace-block-editor-base"]});
YUI.add("squarespace-content-item-types-event",function(a){a.namespace("Squarespace.ContentItemEditor");var d=a.Squarespace.ContentItemEditor.Event=a.Base.create("EventContentItemEditor",a.Squarespace.ContentItemEditor.Base,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){a.getField("startDate").after("dataChange",this._adjustEndDate,this);a.getField("endDate").before("dataChange",this._validateEndDate,this)},this)},getDialogData:function(){var a=d.superclass.getDialogData.call(this),
c=a.structuredContent;a.startDate=c.startDate;a.endDate=c.endDate;return a},sanitizeDialogData:function(a){a=d.superclass.sanitizeDialogData.call(this,a);a.structuredContent={startDate:a.startDate,endDate:a.endDate};return a},_adjustEndDate:function(a){var c=this.get("dialog").getField("endDate"),e=parseInt(a.prevVal,10);a=parseInt(a.newVal,10);e=c.get("data")-e;c.set("data",(new Date(a+e)).getTime())},_validateEndDate:function(a){var c=this.get("dialog").getField("startDate"),e=a.target;a.newVal<
c.get("data")?(e.showError("End time must be later than start time."),e.set("errors",["End time must be later than start time."]),a.halt()):(e.set("errors",[]),e.hideError())},_getTemplateContext:function(){var a=d.superclass._getTemplateContext.call(this);a.enableFeatured=!0;a.enableExcerpt=!0;return a}},{ATTRS:{editorConfiguration:{value:{title:"Edit {presentationName}",width:720,name:"event-post-editor",verticalHeight:"full",overlay:0.5,initialDataByReference:!0,tabs:[{$include:["tabs.primary.base",
"tabs.primary.event"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}})},"1.0",{requires:["squarespace-content-item-types-base"]});
YUI.add("squarespace-dialog-google-docs-service-connect",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.GoogleDocsServiceConnect=a.Base.create("googleDocsServiceConnect",a.Squarespace.DialogFields.OauthServiceConnect,[],{initializer:function(){this.get("contentBox").addClass("sqs-oauth-service-connect-content");this._spreadsheetField=new a.Squarespace.DialogFields.Text({name:"spreadsheet",className:"thin","strings.title":"Spreadsheet Name",data:this.get("data.spreadsheetName")})},
renderUI:function(){d.superclass.renderUI.call(this);var a=this._spreadsheetField;a.render(this.get("contentBox").one(".fields"));this._spreadsheetFieldInput=a.get("contentBox").one("input")},bindUI:function(){d.superclass.bindUI.call(this);this._spreadsheetField.after("dataChange",function(a){var c=this.get("data")||{};c.spreadsheetName=a.newVal;this.set("data",c)},this)},_getErrors:function(){var b=[],c=this.get("data.spreadsheetName");if(this.get("data.connected")&&(!a.Lang.isValue(c)||""===c))this._set("errorFlyoutAnchor",
this._spreadsheetField.get("contentBox").one("input")),b.push("Spreadsheet Name required.");return b},_completeAuthentication:function(){var b=this._spreadsheetField,c=b.get("data");(!a.Lang.isValue(c)||""===c)&&b.set("data",this.get("getSpreadsheetName")());this.set("connectionInProgress",!1)},_getConnectedMessageUsername:function(){return this.get("data.username")}},{CSS_PREFIX:"sqs-google-docs-service-connect",ATTRS:{serviceProvider:{value:a.Squarespace.ExternalServiceProviders.GOOGLEDOCS2},formStorageBackendType:{value:a.Squarespace.FormStorageBackendType.GOOGLE},
strings:{value:{title:"Google Docs",connectedMessage:"As"}},getSpreadsheetName:{value:function(){return"New Spreadsheet"}}}})},"1.0",{requires:["base","squarespace-enum","squarespace-dialog-oauth-service-connect","squarespace-dialog-text"]});
YUI.add("squarespace-dialog-auto-complete",function(a){var d=a.Squarespace.DialogFields.AutoComplete=a.Base.create("AutoComplete",a.Squarespace.DialogFields.Text,[],{destructor:function(){var a=this.get("acWidget");a&&a.destroy()},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("contentBox");new a.Squarespace.Spinner({color:"dark",render:b});b=new a.Squarespace.Widgets.ScrollingAutoCompleteList(a.merge({inputNode:this._textField},this.get("acConfig")));this._set("acWidget",b);
b.render()},bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("contentBox"),c=this.get("acWidget");c.on("query",function(){a.addClass("querying")},this);c.on("results",function(){a.removeClass("querying")},this);this.get("requireListEntry")&&c.after("select",this._afterSelect,this)},syncUI:function(){d.superclass.syncUI.call(this);this._textField.set("value",this.get("data"))},focus:function(){this._textField.focus()},clear:function(){this.set("data",null);this._textField.set("value",
"");this.get("acWidget")._onInputValueChange({newVal:""})},_afterSelect:function(b){b=b.result.raw;var c=this.get("responseDataProperty");a.Lang.isValue(c)?(this.set("data",b[c]),this._set("dataObject",b)):this.set("data",b);this.fire("select",{data:this.get("data")})},_afterDataChange:noop,_afterValueChange:function(a){this.get("requireListEntry")||d.superclass._afterValueChange.call(this,a)},_afterBlur:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",!1)}},{CSS_PREFIX:"sqs-auto-complete",
ATTRS:{data:{value:null,validator:function(a){return!0}},acConfig:{value:null,setter:function(b){if(!a.Lang.isValue(b.source))throw"No data source provided for AutoComplete";return a.merge({activateFirstItem:!0,resultHighlighter:"phraseMatch"},b)},validator:a.Squarespace.AttrValidators.isNullOrObject,writeOnce:"initOnly"},acWidget:{value:null,validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Widgets.ScrollingAutoCompleteList),readOnly:!0,writeOnce:!0},requireListEntry:{value:!1,
validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},responseDataProperty:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},dataObject:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject,readOnly:!0}}})},"1.0",{requires:["base","squarespace-dialog-text","squarespace-spinner","squarespace-scrolling-auto-complete-list","squarespace-attr-validators"]});
YUI.add("squarespace-object-builder",function(a){function d(){var b=Array.prototype.slice.call(arguments),c=b.shift(),e=b[b.length-1],d="prependArrays"==e;"prependArrays"==e||"appendArrays"==e?b.pop():e=null;for(var g=0,p=b.length;g<p;g++)if(b[g])for(var q in b[g])e&&b[g][q]&&a.Lang.isArray(b[g][q])?c[q]=(d?b[g][q]:c[q]||[]).concat((d?c[q]:b[g][q])||[]):c[q]=b[g][q];return c}function b(a,c){for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)){for(var d=a[e],g=0;g<c.length;g++){if("undefined"===
typeof c[g].test||c[g].test(a[e],e,a))c[g].each&&c[g].each(a[e],e,a),c[g].map&&(a[e]=c[g].map(a[e],e,a));if("undefined"===typeof a[e])break}null!==a[e]&&("object"===typeof a[e]&&!d.$dontRecurse)&&b(a[e],c);if(a[e]instanceof Array)for(d=0;d<c.length;d++)if("undefined"===typeof c[d].postTest||c[d].postTest(a[e]))c[d].post&&(a[e]=c[d].post(a[e],e,a))}return a}function c(c,e,g){var l={include:{test:function(a){return a&&a.$include},map:function(b){var c,e=b.$include;!a.Lang.isArray(e)&&!a.Lang.isObject(e[0])&&
(e=[e]);for(var h=0,f=e.length;h<f;h++){var l=e[h],s;if("string"===typeof l){var v=l.split(".");s=g;for(var w=0,y=v.length;w<y;w++)if(s[v[w]])s=a.clone(s[v[w]]);else throw"Bad path `"+l+"`: `"+v[w]+"` not found.";}else{if("object"===typeof l)for(var z in l)if("string"==typeof z&&-1!==z.indexOf(".")){v=z.split(".");for(w=s;0!==v.length;)if(y=v.shift(),0===v.length){w[y]=l[z];break}else{var D=[y].concat(v).join(".");w.hasOwnProperty(D)?v=[D]:(w.hasOwnProperty(y)||(w[y]={}),w=w[y])}delete l[z]}s=l}c=
d(c||(a.Lang.isArray(s)?[]:{}),s,"prependArrays")}b.$update&&(c.$update=b.$update);b.$concat&&(c.$concat=b.$concat);b.$when&&(c.$when=b.$when);return c}},update:{test:function(a){return a&&a.$update},each:function(c){function e(a,b){return function(c,e){return e===a&&c===b}}function d(b){return function(c,e,d){a.mix(d,b,!0)}}var g=[],h=c.$update;delete c.$update;for(var f in h)"."==f[0]?g.push({test:e("name",f.slice(1)),each:d(h[f])}):g.push({test:e("type",f),each:d(h[f])});return b(c,g)}},when:{test:function(a){return a&&
a.$when},map:function(b){if(a.Lang.isFunction(b.$when)&&b.$when(g)){if(b.$value)return b.$value;delete b.$when;return b}}},value:{test:function(a){return a&&a.$value},map:function(a){return g[a.$value]}},valueFn:{test:function(a){return a&&a.$valueFn},map:function(a){return a.$valueFn(g)}},template:{test:function(b,c,e){return a.Squarespace.StringTemplate&&"string"===typeof b&&!e.$escape},map:function(b){return a.Squarespace.StringTemplate.template(b,g)}},concat:{postTest:function(a){var b=!1;if(a&&
a instanceof Array)for(var c=0;c<a.length;c++)a[c]&&(a[c]instanceof Array&&a[c].$concat)&&(b=b||a[c].$concat);return b},post:function(a,b,c){b=[];for(c=0;c<a.length;c++)a[c]&&a[c]instanceof Array&&a[c].$concat?b=b.concat(a[c]):b.push(a[c]);return b}},trim:{postTest:function(b){return a.Lang.isArray(b)},post:function(b,c,e){c=b.filter(function(b){return!a.Lang.isUndefined(b)});b.$concat&&(c.$concat=b.$concat);return c}}};return b(a.merge(e),c.map(function(a){return l[a]}))}var e=a.namespace("Squarespace.StringTemplate");
e.filters={lower:function(a){return(a||"").toLowerCase()},capitalize:function(a){return 1>=a.length?a:a.charAt(0).toUpperCase()+a.slice(1)}};e.template=function(b,c,d){d=a.merge(e.filters,d);return b.replace(/\{(\s*)([^\s|]+)((?:\|[^}]+)?)(\s*)\}/g,function(a,b,e,g,f){var r=c[e],u=!1;"undefined"==typeof r&&(u=!0);if(g){g=g.split("|").filter(function(a){return a});for(var s=0,v=g.length;s<v;s++){var w=g[s].split(/[:,\s]+/g),y=w.shift();if(y)if(d[y])r=d[y](r,w,c);else if("'"==y[0]&&"'"===y[y.length-
1]||'"'==y[9]&&'"'===y[y.length-1])r||(r=y.slice(1,-1));else throw"Unknown filter: `"+y+'` in "'+a+'"';}}u&&!r&&console.warn("Template var `"+e+'` not found in context. String: "'+a+'" Context:',c);return b+(r||"")+f})};var g=a.namespace("Squarespace.ObjectBuilder");g.operations="include update when value template concat trim".split(" ");g.walkObject=b;g.build=c;g.make=function(a,b,e){a=c(["include","update"],a,b);return a=c("when value valueFn template concat trim".split(" "),a,e)}},"1.0",{requires:["oop"]});
YUI.add("squarespace-block-gallery",function(a){var d=a.namespace("Squarespace.Block").Gallery=a.Base.create("block-gallery",a.Squarespace.Block.ModelSyncBase,[a.Squarespace.Block.Mixin.AspectRatio],{bindUI:function(){this.get("model").after("change",this._afterModelChange,this);this.after("resized",this.syncUI,this);this.after("widgetContentChange",this._setWidgetContent,this)},_afterModelChange:function(a){this._renderBlock(a)},show:function(){d.superclass.show.call(this,arguments);this._setWidgetContent()},
_renderBlock:function(a){this.get("boundingBox").setData("block",this.get("model").getAttrs());this._shouldGetWidgetRendering(a)?(this.requestingContent=!0,d.superclass._renderBlock.call(this)):this.fire("widget:contentUpdate")},_renderSuccess:function(a){this.requestingContent=!1;this.set("widgetContent",a.html);this._setWidgetContent()},_setWidgetContent:function(){if(!this.requestingContent){var b=a.Node.create(this.get("widgetContent")),c=this.get("contentBox");c.setHTML(b);this.get("model").get("aspectRatio")&&
c.one(".sqs-state-message")&&c.one(".sqs-state-message").wrap("<div></div>");this._updateAspectRatio();a.Squarespace.GalleryManager.initializeBlock(c)}},_shouldGetWidgetRendering:function(b){return!a.Lang.isValue(b)||!a.Object.hasKey(b,"changed")?!0:!a.Squarespace.Block.Utils.checkWhitelist(this.get("modelWhiteList"),b.changed)}},{ATTRS:{editor:{value:a.Squarespace.Block.Editor.Gallery},modelWhiteList:{setter:function(b){return a.Lang.isArray(b)?b:a.Lang.isString(b)?[b]:[]},value:"padding methodOption transientGallery autoplay lightbox vSize aspectRatio thumbnail-strip-height thumbnail-strip-margin".split(" ")},
type:{value:a.Squarespace.BlockType.GALLERY},vSize:{valueFn:function(){return"slider"===this.get("model").get("design")?10:null}},widgetContent:{value:""}},CSS_PREFIX:"sqs-block-gallery",MODEL:a.Squarespace.ContentModel.GalleryBlock})},"1.0",{requires:"base model squarespace-block-base-modelsync squarespace-block-gallery-editor squarespace-block-gallery-model squarespace-block-gallery-model-editor squarespace-block-mixin-aspect-ratio squarespace-block-utils squarespace-dialog-content-item-grid squarespace-dialog-content-selector squarespace-dialog-fields squarespace-dialog-gallery-options squarespace-dialog-multi-frame squarespace-dialog-multi-option squarespace-models-content-collection".split(" ")});
YUI.add("squarespace-content-item-types-mixin-custom-sanitizer",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.CustomSanitizer=a.Base.create("sanitizerMixin",a.Base,[],{sanitizeTemplateContextForCustomType:function(d,b){a.Lang.isValue(b)&&(d.presentationName=b.get("title"))},sanitizeConfigurationForCustomType:function(d,b,c){if(a.Lang.isValue(b)){var e=[],g=b.get("fields");a.Array.each(g,function(b,d){switch(b.type){case "text":e.push({$include:["fields.title",{"config.name":"custom-"+
b.name,"config.strings.title":b.title||"","config.strings.placeholder":""}]});break;case "checkbox":e.push({ctor:a.Squarespace.DialogFields.Check,config:{name:"custom-"+b.name,"strings.title":b.title}});break;case "wysiwyg":e.push({ctor:a.Squarespace.DialogFields.Description,config:{title:b.title||""}});e.push({ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"custom-"+b.name,toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:227,classNames:"major"}});break;case "image":(function(b){e.push({$include:["fields.mainImage",
{name:"custom-"+b.name,mode:a.Squarespace.UploadModes.CHILD,childType:a.Squarespace.RecordType.IMAGE,preflight:function(a){var e=c.get("model"),d=c.get("dialog").getField("custom-"+b.name);e.get("id")?a&&a():(e.once("save",function(){d.get("data").set("parentId",e.get("id"));d.refreshItemPostData();a&&a()}),c.autoSave())}}]})})(b);break;case "gallery":(function(b){e.push({ctor:a.Squarespace.DialogFields.Description,config:{title:b.title||""}});e.push({$include:["fields.childItemsGrid",{"config.width":null,
"config.height":170,"config.name":"custom-"+b.name,"config.uploadPreflight":function(a){var e=c.get("model"),d=c.get("dialog").getField("custom-"+b.name).get("data");e.get("id")?(d.set("id",e.get("id")),a()):(e.once("save",function(){d.set("id",e.get("id"));a()},e),c.autoSave())}}]})})(b)}},this);b={tabTitle:b.get("title"),name:b.get("name"),scroll:!0,fields:e};d.tabs.push(b)}},sanitizeDataForCustomType:function(d,b,c){if(a.Lang.isValue(b)){var e=b.get("fields");a.Lang.isObject(d.customContent)||
(d.customContent={customType:b.get("name")});a.Array.each(e,function(b,e){var h=b.name;switch(b.type){case "text":case "wysiwyg":case "checkbox":d.customContent[h]=d["custom-"+h];delete d["custom-"+h];break;case "image":d["custom-"+h].get("hasFileData")?d.customContent[h]=d["custom-"+h].getAttrs():delete d.customContent[h];delete d["custom-"+h];break;case "gallery":d.customContent[h]=c.get("dialog").getField("custom-"+h).get("data").get("items").toJSON();delete d["custom-"+h];break;default:a.Squarespace.Logger.log("Custom Type Saving Error",
{message:"Could not find anything for field.",field:b})}},this)}},setDataForCustomType:function(d,b,c){a.Lang.isValue(b)&&(b=b.get("fields"),a.Array.each(b,function(b,g){var f=b.type,h=b.name,k="custom"+h,h=a.Object.getValue(d,["customContent",h]);switch(f){case "text":case "wysiwyg":case "checkbox":d[k]=h;break;case "image":a.Lang.isValue(h)?d[k]=new a.Squarespace.Models.ContentItem(a.merge(h,{collectionId:c.get("model").get("collectionId"),parentId:c.get("model").get("id"),recordType:a.Squarespace.RecordType.IMAGE})):
d[k]=new a.Squarespace.Models.ContentItem({collectionId:c.get("model").get("collectionId"),parentId:c.get("model").get("id"),recordType:a.Squarespace.RecordType.IMAGE});break;case "gallery":f=new a.Squarespace.Models.ContentItem({id:c.get("model").get("id"),collectionId:c.get("model").get("collectionId"),recordType:a.Squarespace.RecordType.IMAGE});a.Lang.isValue(h)&&f.get("items").add(h);d[k]=f;break;default:a.Squarespace.Logger.log("Custom Type Saving Error",{message:"Could not find any data to set for field.",
field:b})}},this))}},{})},"1.0",{requires:"squarespace-content-item-types-enum-record-type squarespace-content-item-types-settings squarespace-content-item-utils squarespace-dialog-description squarespace-enum squarespace-logger squarespace-model-editor squarespace-models-content-collection squarespace-models-content-item squarespace-models-template".split(" ")});
YUI.add("squarespace-tweak-typekit-defaults",function(a){a.namespace("Squarespace.Tweak").TypekitDefaults=[{Foundry:"TypeTogether","Family ID":"gjst","Family Name":"Abril Text","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/abril-text","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gjst","Family Name":"Abril Text","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/abril-text","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gjst",
"Family Name":"Abril Text","Variation Name":"Semibold",FVD:"n6",URL:"http://typekit.com/fonts/abril-text","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gjst","Family Name":"Abril Text","Variation Name":"Semibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/abril-text","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gjst","Family Name":"Abril Text","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/abril-text","RECOMMENDED FOR BODY TEXT":"N"},
{Foundry:"TypeTogether","Family ID":"gjst","Family Name":"Abril Text","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/abril-text","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gjst","Family Name":"Abril Text","Variation Name":"Extra Bold",FVD:"n8",URL:"http://typekit.com/fonts/abril-text","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gjst","Family Name":"Abril Text","Variation Name":"Extra Bold Italic",FVD:"i8",URL:"http://typekit.com/fonts/abril-text",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Thin",FVD:"n1",URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Thin Italic",FVD:"i1",URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/adelle-web",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/adelle-web",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Semibold",FVD:"n6",URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Semibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/adelle-web",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Extra Bold",FVD:"n8",URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Extra Bold Italic",FVD:"i8",
URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Heavy",FVD:"n9",URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"gmsj","Family Name":"Adelle","Variation Name":"Heavy Italic",FVD:"i9",URL:"http://typekit.com/fonts/adelle-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans",
"Variation Name":"Thin",FVD:"n1",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"Thin Italic",FVD:"i1",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether",
"Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"SemiBold",FVD:"n6",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"SemiBold Italic",FVD:"i6",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/adelle-sans",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"ExtraBold",FVD:"n8",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"ExtraBold Italic",
FVD:"i8",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"Heavy",FVD:"n9",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"jcyh","Family Name":"Adelle Sans","Variation Name":"Heavy Italic",FVD:"i9",URL:"http://typekit.com/fonts/adelle-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"hmqz","Family Name":"Adobe Caslon Pro",
"Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/adobe-caslon-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"hmqz","Family Name":"Adobe Caslon Pro","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/adobe-caslon-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"hmqz","Family Name":"Adobe Caslon Pro","Variation Name":"Semibold",FVD:"n6",URL:"http://typekit.com/fonts/adobe-caslon-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe",
"Family ID":"hmqz","Family Name":"Adobe Caslon Pro","Variation Name":"Semibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/adobe-caslon-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"hmqz","Family Name":"Adobe Caslon Pro","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/adobe-caslon-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"hmqz","Family Name":"Adobe Caslon Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/adobe-caslon-pro",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"tmmf","Family Name":"Adobe Garamond Pro","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/adobe-garamond-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"tmmf","Family Name":"Adobe Garamond Pro","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/adobe-garamond-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"tmmf","Family Name":"Adobe Garamond Pro","Variation Name":"Semibold",
FVD:"n6",URL:"http://typekit.com/fonts/adobe-garamond-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"tmmf","Family Name":"Adobe Garamond Pro","Variation Name":"Semibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/adobe-garamond-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"tmmf","Family Name":"Adobe Garamond Pro","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/adobe-garamond-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"tmmf",
"Family Name":"Adobe Garamond Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/adobe-garamond-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Hairline",FVD:"n2",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Hairline Italic",FVD:"i2",URL:"http://typekit.com/fonts/aktiv-grotesk-std",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Regular",
FVD:"n4",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Medium",FVD:"n5",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy",
"Family Name":"Aktiv Grotesk Std","Variation Name":"Medium Italic",FVD:"i5",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/aktiv-grotesk-std",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"XBold",FVD:"n8",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"XBold Italic",FVD:"i8",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Black",
FVD:"n9",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"tscy","Family Name":"Aktiv Grotesk Std","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/aktiv-grotesk-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"URW++","Family ID":"lbmp","Family Name":"AlternateGothic No. 3 D","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/alternate-gothic-no-3-d","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Porchez Typofonderie",
"Family ID":"sskw","Family Name":"Ambroise STD","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/ambroise-std","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Porchez Typofonderie","Family ID":"sskw","Family Name":"Ambroise STD","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/ambroise-std","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Porchez Typofonderie","Family ID":"sskw","Family Name":"Ambroise STD","Variation Name":"Demi Bold",FVD:"n6",URL:"http://typekit.com/fonts/ambroise-std",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Porchez Typofonderie","Family ID":"sskw","Family Name":"Ambroise STD","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/ambroise-std","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Porchez Typofonderie","Family ID":"sskw","Family Name":"Ambroise STD","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/ambroise-std","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"xgpm","Family Name":"Arno Pro","Variation Name":"Regular",
FVD:"n4",URL:"https: //typekit.com/fonts/arno-pro","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"xgpm","Family Name":"Arno Pro","Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/arno-pro","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"xgpm","Family Name":"Arno Pro","Variation Name":"Semibold",FVD:"n6",URL:"https: //typekit.com/fonts/arno-pro","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"xgpm","Family Name":"Arno Pro","Variation Name":"Semibold Italic",
FVD:"i6",URL:"https: //typekit.com/fonts/arno-pro","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"xgpm","Family Name":"Arno Pro","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/arno-pro","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"xgpm","Family Name":"Arno Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/arno-pro","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"dfjt","Family Name":"Atrament Web",
"Variation Name":"Light",FVD:"n3",URL:"https: //typekit.com/fonts/atrament-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"dfjt","Family Name":"Atrament Web","Variation Name":"Light Italic",FVD:"i3",URL:"https: //typekit.com/fonts/atrament-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"dfjt","Family Name":"Atrament Web","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/atrament-web","RECOMMENDED FOR BODY TEXT":"N"},
{Foundry:"Suitcase Type Foundry","Family ID":"dfjt","Family Name":"Atrament Web","Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/atrament-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"dfjt","Family Name":"Atrament Web","Variation Name":"Semibold",FVD:"n6",URL:"https: //typekit.com/fonts/atrament-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"dfjt","Family Name":"Atrament Web","Variation Name":"Semibold Italic",
FVD:"i6",URL:"https: //typekit.com/fonts/atrament-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"dfjt","Family Name":"Atrament Web","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/atrament-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"dfjt","Family Name":"Atrament Web","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/atrament-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"T.26","Family ID":"hmcs",
"Family Name":"Aurea Ultra","Variation Name":"Roman",FVD:"n4",URL:"https: //typekit.com/fonts/aurea-ultra","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"T.26","Family ID":"hmcs","Family Name":"Aurea Ultra","Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/aurea-ultra","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Insigne","Family ID":"rtjn","Family Name":"Aviano Flare","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/aviano-flare","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Insigne",
"Family ID":"rtjn","Family Name":"Aviano Flare","Variation Name":"Medium",FVD:"n5",URL:"https: //typekit.com/fonts/aviano-flare","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Insigne","Family ID":"rtjn","Family Name":"Aviano Flare","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/aviano-flare","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Dharma Type","Family ID":"nrgs","Family Name":"Bebas Neue","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/bebas-neue","RECOMMENDED FOR BODY TEXT":"N"},
{Foundry:"Chank Co","Family ID":"wrtz","Family Name":"BigSmalls Bold","Variation Name":"Regular",FVD:"n7",URL:"https: //typekit.com/fonts/bigsmalls-bold","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"qssm","Family Name":"Botanika Mono Web","Variation Name":"Regular",FVD:"n4",URL:"https://typekit.com/fonts/botanika-mono-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"qssm","Family Name":"Botanika Mono Web","Variation Name":"Italic",
FVD:"i4",URL:"https://typekit.com/fonts/botanika-mono-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"qssm","Family Name":"Botanika Mono Web","Variation Name":"Semi Bold",FVD:"n6",URL:"https://typekit.com/fonts/botanika-mono-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"qssm","Family Name":"Botanika Mono Web","Variation Name":"Semi Bold Italic",FVD:"i6",URL:"https://typekit.com/fonts/botanika-mono-web","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Thin",FVD:"n1",URL:"http://typekit.com/fonts/brandon-grotesque","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Thin Italic",FVD:"i1",URL:"http://typekit.com/fonts/brandon-grotesque","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/brandon-grotesque",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/brandon-grotesque","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/brandon-grotesque","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Italic",
FVD:"i4",URL:"http://typekit.com/fonts/brandon-grotesque","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Medium",FVD:"n5",URL:"http://typekit.com/fonts/brandon-grotesque","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Medium Italic",FVD:"i5",URL:"http://typekit.com/fonts/brandon-grotesque","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts",
"Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/brandon-grotesque","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/brandon-grotesque","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/brandon-grotesque",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yvxn","Family Name":"Brandon Grotesque","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/brandon-grotesque","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"ymzk","Family Name":"Bree Web","Variation Name":"Thin",FVD:"n2",URL:"http://typekit.com/fonts/bree-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"ymzk","Family Name":"Bree Web","Variation Name":"Thin Oblique",
FVD:"i2",URL:"http://typekit.com/fonts/bree-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"ymzk","Family Name":"Bree Web","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/bree-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"ymzk","Family Name":"Bree Web","Variation Name":"Light Oblique",FVD:"i3",URL:"http://typekit.com/fonts/bree-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"ymzk","Family Name":"Bree Web",
"Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/bree-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"ymzk","Family Name":"Bree Web","Variation Name":"Oblique",FVD:"i4",URL:"http://typekit.com/fonts/bree-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"ymzk","Family Name":"Bree Web","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/bree-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"ymzk",
"Family Name":"Bree Web","Variation Name":"Bold Oblique",FVD:"i7",URL:"http://typekit.com/fonts/bree-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"ymzk","Family Name":"Bree Web","Variation Name":"Extra Bold",FVD:"n8",URL:"http://typekit.com/fonts/bree-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"ymzk","Family Name":"Bree Web","Variation Name":"Extra Bold Oblique",FVD:"i8",URL:"http://typekit.com/fonts/bree-web","RECOMMENDED FOR BODY TEXT":"N"},
{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Medium",FVD:"n5",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Medium Italic",FVD:"i5",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Semibold",FVD:"n6",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Semibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Black",FVD:"n8",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"yywq","Family Name":"Brevia","Variation Name":"Black Italic",FVD:"i8",URL:"http://typekit.com/fonts/brevia","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"exljbris Font Foundry","Family ID":"vybr","Family Name":"Calluna","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/calluna","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"vybr","Family Name":"Calluna","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/calluna","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"vybr","Family Name":"Calluna","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/calluna",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"vybr","Family Name":"Calluna","Variation Name":"Semi Bold",FVD:"n6",URL:"http://typekit.com/fonts/calluna","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"vybr","Family Name":"Calluna","Variation Name":"Semi Bold Italic",FVD:"i6",URL:"http://typekit.com/fonts/calluna","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"vybr","Family Name":"Calluna","Variation Name":"Bold",
FVD:"n7",URL:"http://typekit.com/fonts/calluna","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"vybr","Family Name":"Calluna","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/calluna","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"vybr","Family Name":"Calluna","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/calluna","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"wgzc",
"Family Name":"Calluna Sans","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/calluna-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"wgzc","Family Name":"Calluna Sans","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/calluna-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"wgzc","Family Name":"Calluna Sans","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/calluna-sans","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"exljbris Font Foundry","Family ID":"wgzc","Family Name":"Calluna Sans","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/calluna-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"wgzc","Family Name":"Calluna Sans","Variation Name":"Semibold",FVD:"n6",URL:"http://typekit.com/fonts/calluna-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"wgzc","Family Name":"Calluna Sans","Variation Name":"Semibold Italic",
FVD:"i6",URL:"http://typekit.com/fonts/calluna-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"wgzc","Family Name":"Calluna Sans","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/calluna-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"wgzc","Family Name":"Calluna Sans","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/calluna-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry",
"Family ID":"wgzc","Family Name":"Calluna Sans","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/calluna-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"wgzc","Family Name":"Calluna Sans","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/calluna-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Extra Light",FVD:"n2",URL:"http://typekit.com/fonts/comingodos-web",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Extra Light Italic",FVD:"i2",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Light Italic",
FVD:"i3",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web",
"Variation Name":"Semibold",FVD:"n6",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Semibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm",
"Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Extra Bold",FVD:"n8",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Extra Bold Italic",FVD:"i8",URL:"http://typekit.com/fonts/comingodos-web",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"nyvb","Family Name":"CamingoDos Web","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/comingodos-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"The League of Moveable Type","Family ID":"klcb","Family Name":"Chunk","Variation Name":"Regular",
FVD:"n4",URL:"http://typekit.com/fonts/chunk","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Delve Fonts","Family ID":"fscr","Family Name":"Continuo Web","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/continuo-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Mark Simonson Studio","Family ID":"drjf","Family Name":"Coquette","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/coquette","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Mark Simonson Studio","Family ID":"drjf","Family Name":"Coquette",
"Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/coquette","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Mark Simonson Studio","Family ID":"drjf","Family Name":"Coquette","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/coquette","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Veer","Family ID":"bwbh","Family Name":"Corner Store","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/corner-store","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ParaType","Family ID":"gkhs",
"Family Name":"DIN Condensed Web","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/din-condensed-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"kldz","Family Name":"Effra","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/effra","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"kldz","Family Name":"Effra","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/effra","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag",
"Family ID":"kldz","Family Name":"Effra","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/effra","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"kldz","Family Name":"Effra","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/effra","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"kldz","Family Name":"Effra","Variation Name":"Medium",FVD:"n5",URL:"http://typekit.com/fonts/effra","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag",
"Family ID":"kldz","Family Name":"Effra","Variation Name":"Medium Italic",FVD:"i5",URL:"http://typekit.com/fonts/effra","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"kldz","Family Name":"Effra","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/effra","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"kldz","Family Name":"Effra","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/effra","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag",
"Family ID":"kldz","Family Name":"Effra","Variation Name":"Heavy",FVD:"n9",URL:"http://typekit.com/fonts/effra","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"kldz","Family Name":"Effra","Variation Name":"Heavy Italic",FVD:"i9",URL:"http://typekit.com/fonts/effra","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Insigne Design","Family ID":"gckq","Family Name":"Eigerdals","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/eigerdals","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Insigne Design","Family ID":"gckq","Family Name":"Eigerdals","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/eigerdals","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Insigne Design","Family ID":"gckq","Family Name":"Eigerdals","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/eigerdals","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Insigne Design","Family ID":"gckq","Family Name":"Eigerdals","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/eigerdals",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"IM Fell","Family ID":"btzs","Family Name":"English Small Caps","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/english-small-caps","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Just Another Foundry","Family ID":"ttyp","Family Name":"FacitWeb","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/facitweb","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Just Another Foundry","Family ID":"ttyp","Family Name":"FacitWeb","Variation Name":"Italic",
FVD:"i4",URL:"http://typekit.com/fonts/facitweb","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Just Another Foundry","Family ID":"ttyp","Family Name":"FacitWeb","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/facitweb","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Just Another Foundry","Family ID":"ttyp","Family Name":"FacitWeb","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/facitweb","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"krvz",
"Family Name":"Felt Tip Roman","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/felt-tip-roman","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Mark Simonson Studio","Family ID":"krvz","Family Name":"Felt Tip Roman","Variation Name":"Heavy",FVD:"n8",URL:"https: //typekit.com/fonts/felt-tip-roman","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"exljbris Font Foundry","Family ID":"pzyv","Family Name":"Fertigo Pro","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/fertigo-pro",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"exljbris Font Foundry","Family ID":"pzyv","Family Name":"Fertigo Pro","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/fertigo-pro","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"exljbris Font Foundry","Family ID":"twbx","Family Name":"Fertigo Pro Script","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/fertigo-pro-script","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro",
"Variation Name":"Extra Light",FVD:"n1",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Extra Light Italic",FVD:"i1",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Light",FVD:"n2",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Light Italic",FVD:"i2",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Regular",FVD:"n3",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro",
"Variation Name":"Italic",FVD:"i3",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Book",FVD:"n4",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Book Italic",FVD:"i4",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Medium",FVD:"n5",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Medium Italic",FVD:"i5",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Demibold",
FVD:"n6",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Demibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"snqb","Family Name":"FF Basic Gothic Web Pro","Variation Name":"Black Italic",
FVD:"i9",URL:"http://typekit.com/fonts/ff-basic-gothic-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"gwsq","Family Name":"FF Brokenscript Web Condensed","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/ff-brokenscript-web-condensed","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"FontFont","Family ID":"rlxq","Family Name":"FF Dagny Web Pro","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/ff-dagny-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont",
"Family ID":"rlxq","Family Name":"FF Dagny Web Pro","Variation Name":"Regular Italic",FVD:"i4",URL:"http://typekit.com/fonts/ff-dagny-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rlxq","Family Name":"FF Dagny Web Pro","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/ff-dagny-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rlxq","Family Name":"FF Dagny Web Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/ff-dagny-web-pro",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"dbqg","Family Name":"FF Dax Web Pro","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/ff-dax-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"dbqg","Family Name":"FF Dax Web Pro","Variation Name":"Regular Italic",FVD:"i4",URL:"http://typekit.com/fonts/ff-dax-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"dbqg","Family Name":"FF Dax Web Pro","Variation Name":"Bold",
FVD:"n7",URL:"http://typekit.com/fonts/ff-dax-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"dbqg","Family Name":"FF Dax Web Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/ff-dax-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rczt","Family Name":"FF Good Headline Pro Condensed","Variation Name":"Book",FVD:"n4",URL:"http://typekit.com/fonts/ff-good-headline-web-pro-condensed","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont",
"Family ID":"rczt","Family Name":"FF Good Headline Pro Condensed","Variation Name":"Book Italic",FVD:"i4",URL:"http://typekit.com/fonts/ff-good-headline-web-pro-condensed","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rczt","Family Name":"FF Good Headline Pro Condensed","Variation Name":"Medium",FVD:"n5",URL:"http://typekit.com/fonts/ff-good-headline-web-pro-condensed","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rczt","Family Name":"FF Good Headline Pro Condensed",
"Variation Name":"Medium Italic",FVD:"i5",URL:"http://typekit.com/fonts/ff-good-headline-web-pro-condensed","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rczt","Family Name":"FF Good Headline Pro Condensed","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/ff-good-headline-web-pro-condensed","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rczt","Family Name":"FF Good Headline Pro Condensed","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/ff-good-headline-web-pro-condensed",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"fytf","Family Name":"FF Market Web","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/ff-market-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"FontFont","Family ID":"rrtc","Family Name":"FF Meta Serif Web Pro","Variation Name":"Book",FVD:"n5",URL:"http://typekit.com/fonts/ff-meta-serif-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rrtc","Family Name":"FF Meta Serif Web Pro","Variation Name":"Book Italic",
FVD:"i5",URL:"http://typekit.com/fonts/ff-meta-serif-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rrtc","Family Name":"FF Meta Serif Web Pro","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/ff-meta-serif-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rrtc","Family Name":"FF Meta Serif Web Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/ff-meta-serif-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont",
"Family ID":"brwr","Family Name":"FF Meta Web Pro","Variation Name":"Normal",FVD:"n4",URL:"http://typekit.com/fonts/ff-meta-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"brwr","Family Name":"FF Meta Web Pro","Variation Name":"Normal Italic",FVD:"i4",URL:"http://typekit.com/fonts/ff-meta-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"brwr","Family Name":"FF Meta Web Pro","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/ff-meta-web-pro",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"brwr","Family Name":"FF Meta Web Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/ff-meta-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"rgzb","Family Name":"FF Netto Web","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/ff-netto-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"FontFont","Family ID":"sbsp","Family Name":"FF Prater Block Web","Variation Name":"Regular",
FVD:"n4",URL:"http://typekit.com/fonts/ff-prater-block-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"FontFont","Family ID":"lgpw","Family Name":"FF Tisa Sans Pro","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/ff-tisa-sans-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"lgpw","Family Name":"FF Tisa Sans Pro","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/ff-tisa-sans-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"lgpw",
"Family Name":"FF Tisa Sans Pro","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/ff-tisa-sans-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"lgpw","Family Name":"FF Tisa Sans Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/ff-tisa-sans-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"xwmz","Family Name":"FF Tisa Web Pro","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/ff-tisa-web-pro",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"xwmz","Family Name":"FF Tisa Web Pro","Variation Name":"Regular Italic",FVD:"i4",URL:"http://typekit.com/fonts/ff-tisa-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"xwmz","Family Name":"FF Tisa Web Pro","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/ff-tisa-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"FontFont","Family ID":"xwmz","Family Name":"FF Tisa Web Pro","Variation Name":"Bold Italic",
FVD:"i7",URL:"http://typekit.com/fonts/ff-tisa-web-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"URW++","Family ID":"fbft","Family Name":"Franklin Gothic URW","Variation Name":"Light",FVD:"n3",URL:"https: //typekit.com/fonts/franklin-gothic-urw","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"URW++","Family ID":"fbft","Family Name":"Franklin Gothic URW","Variation Name":"Book",FVD:"n4",URL:"https: //typekit.com/fonts/franklin-gothic-urw","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"URW++","Family ID":"fbft",
"Family Name":"Franklin Gothic URW","Variation Name":"Book Italic",FVD:"i4",URL:"https: //typekit.com/fonts/franklin-gothic-urw","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"URW++","Family ID":"fbft","Family Name":"Franklin Gothic URW","Variation Name":"Medium",FVD:"n5",URL:"https: //typekit.com/fonts/franklin-gothic-urw","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"URW++","Family ID":"fbft","Family Name":"Franklin Gothic URW","Variation Name":"Medium Italic",FVD:"i5",URL:"https: //typekit.com/fonts/franklin-gothic-urw",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"URW++","Family ID":"fbft","Family Name":"Franklin Gothic URW","Variation Name":"Demi",FVD:"n7",URL:"https: //typekit.com/fonts/franklin-gothic-urw","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"URW++","Family ID":"fbft","Family Name":"Franklin Gothic URW","Variation Name":"Demi Italic",FVD:"i7",URL:"https: //typekit.com/fonts/franklin-gothic-urw","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"URW++","Family ID":"fbft","Family Name":"Franklin Gothic URW","Variation Name":"Heavy",
FVD:"n9",URL:"https: //typekit.com/fonts/franklin-gothic-urw","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"URW++","Family ID":"fbft","Family Name":"Franklin Gothic URW","Variation Name":"Heavy Italic",FVD:"i9",URL:"https: //typekit.com/fonts/franklin-gothic-urw","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Light",FVD:"n3",URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts",
"Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Light Italic",FVD:"i3",URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Book",FVD:"n4",URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Book Italic",FVD:"i4",URL:"https: //typekit.com/fonts/freight-sans-pro",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Medium",FVD:"n5",URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Medium Italic",FVD:"i5",URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro",
"Variation Name":"Semibold",FVD:"n6",URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Semibold Italic",FVD:"i6",URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Black",FVD:"n9",URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Phil's Fonts","Family ID":"bgnv","Family Name":"Freight Sans Pro","Variation Name":"Black Italic",FVD:"i9",
URL:"https: //typekit.com/fonts/freight-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType","Family ID":"ftnk","Family Name":"Futura PT","Variation Name":"Light",FVD:"n3",URL:"https: //typekit.com/fonts/futura-pt","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ParaType","Family ID":"ftnk","Family Name":"Futura PT","Variation Name":"Light Italic",FVD:"n3",URL:"https: //typekit.com/fonts/futura-pt","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ParaType","Family ID":"ftnk","Family Name":"Futura PT",
"Variation Name":"Book",FVD:"n4",URL:"https: //typekit.com/fonts/futura-pt","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ParaType","Family ID":"ftnk","Family Name":"Futura PT","Variation Name":"Book Italic",FVD:"i4",URL:"https: //typekit.com/fonts/futura-pt","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ParaType","Family ID":"ftnk","Family Name":"Futura PT","Variation Name":"Medium",FVD:"n5",URL:"https: //typekit.com/fonts/futura-pt","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ParaType","Family ID":"ftnk",
"Family Name":"Futura PT","Variation Name":"Medium Italic",FVD:"i5",URL:"https: //typekit.com/fonts/futura-pt","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ParaType","Family ID":"ftnk","Family Name":"Futura PT","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/futura-pt","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ParaType","Family ID":"ftnk","Family Name":"Futura PT","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/futura-pt","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ParaType",
"Family ID":"ftnk","Family Name":"Futura PT","Variation Name":"Extra Bold",FVD:"n8",URL:"https: //typekit.com/fonts/futura-pt","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ParaType","Family ID":"ftnk","Family Name":"Futura PT","Variation Name":"Extra Bold Italic",FVD:"i8",URL:"https: //typekit.com/fonts/futura-pt","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"msmg","Family Name":"Garamond Premier Pro Display","Variation Name":"Light",FVD:"n3",URL:"https://typekit.com/fonts/garamond-premier-pro-display",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"msmg","Family Name":"Garamond Premier Pro Display","Variation Name":"Light Italic",FVD:"i3",URL:"https://typekit.com/fonts/garamond-premier-pro-display","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"msmg","Family Name":"Garamond Premier Pro Display","Variation Name":"Regular",FVD:"n4",URL:"https://typekit.com/fonts/garamond-premier-pro-display","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"msmg","Family Name":"Garamond Premier Pro Display",
"Variation Name":"Italic",FVD:"i4",URL:"https://typekit.com/fonts/garamond-premier-pro-display","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"msmg","Family Name":"Garamond Premier Pro Display","Variation Name":"Medium",FVD:"n5",URL:"https://typekit.com/fonts/garamond-premier-pro-display","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"msmg","Family Name":"Garamond Premier Pro Display","Variation Name":"Medium Italic",FVD:"i5",URL:"https://typekit.com/fonts/garamond-premier-pro-display",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"msmg","Family Name":"Garamond Premier Pro Display","Variation Name":"Semibold",FVD:"n6",URL:"https://typekit.com/fonts/garamond-premier-pro-display","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"msmg","Family Name":"Garamond Premier Pro Display","Variation Name":"Semibold Italic",FVD:"i6",URL:"https://typekit.com/fonts/garamond-premier-pro-display","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"msmg","Family Name":"Garamond Premier Pro Display",
"Variation Name":"Bold",FVD:"n7",URL:"https://typekit.com/fonts/garamond-premier-pro-display","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"msmg","Family Name":"Garamond Premier Pro Display","Variation Name":"Bold Italic",FVD:"i7",URL:"https://typekit.com/fonts/garamond-premier-pro-display","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"ctzl","Family Name":"Good Times","Variation Name":"Light",FVD:"n3",URL:"https: //typekit.com/fonts/good-times","RECOMMENDED FOR BODY TEXT":"N"},
{Foundry:"Typodermic","Family ID":"ctzl","Family Name":"Good Times","Variation Name":"Book",FVD:"n4",URL:"https: //typekit.com/fonts/good-times","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"ctzl","Family Name":"Good Times","Variation Name":"Book Italic",FVD:"i4",URL:"https: //typekit.com/fonts/good-times","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"ctzl","Family Name":"Good Times","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/good-times",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"ctzl","Family Name":"Good Times","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/good-times","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Veer","Family ID":"dlmy","Family Name":"Hellenic Wide","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/hellenic-wide","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Just Another Foundry","Family ID":"lmgn","Family Name":"Herb Condensed","Variation Name":"Regular",
FVD:"n4",URL:"http://typekit.com/fonts/herb-condensed","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Just Another Foundry","Family ID":"lmgn","Family Name":"Herb Condensed","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/herb-condensed","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"xstc","Family Name":"Hypatia Sans Pro","Variation Name":"Extra Light",FVD:"n2",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc",
"Family Name":"Hypatia Sans Pro","Variation Name":"Extra Light Italic",FVD:"i2",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc","Family Name":"Hypatia Sans Pro","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc","Family Name":"Hypatia Sans Pro","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/hypatia-sans-pro",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc","Family Name":"Hypatia Sans Pro","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc","Family Name":"Hypatia Sans Pro","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc","Family Name":"Hypatia Sans Pro","Variation Name":"Semibold",
FVD:"n6",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc","Family Name":"Hypatia Sans Pro","Variation Name":"Semibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc","Family Name":"Hypatia Sans Pro","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc",
"Family Name":"Hypatia Sans Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc","Family Name":"Hypatia Sans Pro","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"xstc","Family Name":"Hypatia Sans Pro","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/hypatia-sans-pro","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface","Variation Name":"Thin",FVD:"n1",URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface","Variation Name":"Thin Italic",FVD:"i1",URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface","Variation Name":"Light",FVD:"n3",URL:"https: //typekit.com/fonts/interface",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface","Variation Name":"Light Italic",FVD:"i3",URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface","Variation Name":"Italic",FVD:"i4",
URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface",
"Variation Name":"Extra Bold",FVD:"n8",URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface","Variation Name":"Extra Bold Italic",FVD:"i8",URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"vbpf","Family Name":"Interface","Variation Name":"Black",FVD:"n9",URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag",
"Family ID":"vbpf","Family Name":"Interface","Variation Name":"Black Italic",FVD:"i9",URL:"https: //typekit.com/fonts/interface","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Steve Mehallo","Family ID":"rbkz","Family Name":"Jeanne Moderno Ultra","Variation Name":"Regular",FVD:"n8",URL:"https: //typekit.com/fonts/jeanne-moderno-ultra","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Steve Mehallo","Family ID":"rbkz","Family Name":"Jeanne Moderno Ultra","Variation Name":"Italic",FVD:"i8",URL:"https: //typekit.com/fonts/jeanne-moderno-ultra",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Extra Light",FVD:"n1",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Extra Light Italic",FVD:"i1",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Light",FVD:"n2",
URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Light Italic",FVD:"i2",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat",
"Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Medium",FVD:"n5",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Medium Italic",FVD:"i5",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk",
"Family Name":"Jubilat","Variation Name":"Semibold",FVD:"n6",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Semibold Italic",FVD:"i6",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio",
"Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Black",FVD:"n9",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"cwfk","Family Name":"Jubilat","Variation Name":"Black Italic",FVD:"i9",URL:"https: //typekit.com/fonts/jubilat","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Yanone","Family ID":"jgfl","Family Name":"Kaffeesatz","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/kaffeesatz","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Yanone","Family ID":"jgfl","Family Name":"Kaffeesatz","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/kaffeesatz","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"jdwz","Family Name":"Katarine Web","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/katarine-web",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jdwz","Family Name":"Katarine Web","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/katarine-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jdwz","Family Name":"Katarine Web","Variation Name":"Semi Bold",FVD:"n6",URL:"http://typekit.com/fonts/katarine-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jdwz","Family Name":"Katarine Web",
"Variation Name":"Semi Bold Italic",FVD:"i6",URL:"http://typekit.com/fonts/katarine-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Chank Co","Family ID":"rkyr","Family Name":"Kegger Collegiate","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/kegger-collegiate","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"kbrb","Family Name":"Kulturista Web","Variation Name":"Thin",FVD:"n1",URL:"https: //typekit.com/fonts/kulturista-web","RECOMMENDED FOR BODY TEXT":"N"},
{Foundry:"Suitcase Type Foundry","Family ID":"kbrb","Family Name":"Kulturista Web","Variation Name":"Thin Italic",FVD:"i1",URL:"https: //typekit.com/fonts/kulturista-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"kbrb","Family Name":"Kulturista Web","Variation Name":"Light",FVD:"n3",URL:"https: //typekit.com/fonts/kulturista-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"kbrb","Family Name":"Kulturista Web","Variation Name":"Light Italic",
FVD:"i3",URL:"https: //typekit.com/fonts/kulturista-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"kbrb","Family Name":"Kulturista Web","Variation Name":"Medium",FVD:"n4",URL:"https: //typekit.com/fonts/kulturista-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"kbrb","Family Name":"Kulturista Web","Variation Name":"Medium Italic",FVD:"i4",URL:"https: //typekit.com/fonts/kulturista-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry",
"Family ID":"kbrb","Family Name":"Kulturista Web","Variation Name":"Semi Bold",FVD:"n6",URL:"https: //typekit.com/fonts/kulturista-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"kbrb","Family Name":"Kulturista Web","Variation Name":"Semi Bold Italic",FVD:"i6",URL:"https: //typekit.com/fonts/kulturista-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"kbrb","Family Name":"Kulturista Web","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/kulturista-web",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Suitcase Type Foundry","Family ID":"kbrb","Family Name":"Kulturista Web","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/kulturista-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Just Another Foundry","Family ID":"rvnd","Family Name":"Lapture","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/lapture","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Just Another Foundry","Family ID":"rvnd","Family Name":"Lapture","Variation Name":"Italic",
FVD:"i4",URL:"http://typekit.com/fonts/lapture","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Just Another Foundry","Family ID":"rvnd","Family Name":"Lapture","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/lapture","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Just Another Foundry","Family ID":"rvnd","Family Name":"Lapture","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/lapture","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Porchez Typofonderie","Family ID":"mvgb","Family Name":"Le Monde Journal STD",
"Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/le-monde-journal-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Porchez Typofonderie","Family ID":"mvgb","Family Name":"Le Monde Journal STD","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/le-monde-journal-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Porchez Typofonderie","Family ID":"mvgb","Family Name":"Le Monde Journal STD","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/le-monde-journal-std",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Porchez Typofonderie","Family ID":"mvgb","Family Name":"Le Monde Journal STD","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/le-monde-journal-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Porchez Typofonderie","Family ID":"rshz","Family Name":"Le Monde Sans STD","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/le-monde-sans-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Porchez Typofonderie","Family ID":"rshz","Family Name":"Le Monde Sans STD",
"Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/le-monde-sans-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Porchez Typofonderie","Family ID":"rshz","Family Name":"Le Monde Sans STD","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/le-monde-sans-std","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Porchez Typofonderie","Family ID":"rshz","Family Name":"Le Monde Sans STD","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/le-monde-sans-std","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"The League of Moveable Type","Family ID":"kmpm","Family Name":"League Gothic","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/league-gothic","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Thin",FVD:"n1",URL:"http://typekit.com/fonts/lexia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Thin Italic",FVD:"i1",URL:"http://typekit.com/fonts/lexia",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/lexia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/lexia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/lexia",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/lexia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/lexia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/lexia",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Extra Bold",FVD:"n8",URL:"http://typekit.com/fonts/lexia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Extra Bold Italic",FVD:"i8",URL:"http://typekit.com/fonts/lexia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/lexia",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Dalton Maag","Family ID":"jmhq","Family Name":"Lexia","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/lexia","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"vyvm","Family Name":"LFT Etica Display Web","Variation Name":"Thin",FVD:"n2",URL:"http://typekit.com/fonts/lft-etica-display-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"vyvm","Family Name":"LFT Etica Display Web","Variation Name":"Heavy",
FVD:"n9",URL:"http://typekit.com/fonts/lft-etica-display-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"stqs","Family Name":"LFT Etica Web","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/lft-etica-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"stqs","Family Name":"LFT Etica Web","Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/lft-etica-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"stqs",
"Family Name":"LFT Etica Web","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/lft-etica-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"stqs","Family Name":"LFT Etica Web","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/lft-etica-web","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Red Hat","Family ID":"zsyz","Family Name":"Liberation Sans","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/liberation-sans","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Red Hat","Family ID":"zsyz","Family Name":"Liberation Sans","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/liberation-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Red Hat","Family ID":"zsyz","Family Name":"Liberation Sans","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/liberation-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Red Hat","Family ID":"zsyz","Family Name":"Liberation Sans","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/liberation-sans",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Red Hat","Family ID":"lcny","Family Name":"Liberation Serif","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/liberation-serif","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Red Hat","Family ID":"lcny","Family Name":"Liberation Serif","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/liberation-serif","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Red Hat","Family ID":"lcny","Family Name":"Liberation Serif","Variation Name":"Bold",
FVD:"n7",URL:"http://typekit.com/fonts/liberation-serif","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Red Hat","Family ID":"lcny","Family Name":"Liberation Serif","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/liberation-serif","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"hdtl","Family Name":"Livory","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/livory","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"hdtl","Family Name":"Livory",
"Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/livory","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"hdtl","Family Name":"Livory","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/livory","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"HVD Fonts","Family ID":"hdtl","Family Name":"Livory","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/livory","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Lanston Type","Family ID":"mrnw","Family Name":"LTC Bodoni 175",
"Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/ltc-bodoni-175","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Lanston Type","Family ID":"mrnw","Family Name":"LTC Bodoni 175","Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/ltc-bodoni-175","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Positype","Family ID":"tcqg","Family Name":"Lust Script","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/lust-script","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Outras Fontes",
"Family ID":"jkrp","Family Name":"Maryam Regular","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/maryam-regular","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Adobe","Family ID":"nljb","Family Name":"Minion Pro","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/minion-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"nljb","Family Name":"Minion Pro","Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/minion-pro","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Adobe","Family ID":"nljb","Family Name":"Minion Pro","Variation Name":"Medium",FVD:"n5",URL:"https: //typekit.com/fonts/minion-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"nljb","Family Name":"Minion Pro","Variation Name":"Medium Italic",FVD:"i5",URL:"https: //typekit.com/fonts/minion-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"nljb","Family Name":"Minion Pro","Variation Name":"Semibold",FVD:"n6",URL:"https: //typekit.com/fonts/minion-pro",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"nljb","Family Name":"Minion Pro","Variation Name":"Semibold Italic",FVD:"i6",URL:"https: //typekit.com/fonts/minion-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"nljb","Family Name":"Minion Pro","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/minion-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"nljb","Family Name":"Minion Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/minion-pro",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"EuropaType","Family ID":"kckf","Family Name":"Motor","Variation Name":"Normal",FVD:"n4",URL:"https: //typekit.com/fonts/motor","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"htrh","Family Name":"Museo","Variation Name":"100",FVD:"n1",URL:"http://typekit.com/fonts/museo","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"htrh","Family Name":"Museo","Variation Name":"300",FVD:"n3",URL:"http://typekit.com/fonts/museo",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"htrh","Family Name":"Museo","Variation Name":"300 Italic",FVD:"i3",URL:"http://typekit.com/fonts/museo","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"htrh","Family Name":"Museo","Variation Name":"500",FVD:"n5",URL:"http://typekit.com/fonts/museo","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"htrh","Family Name":"Museo","Variation Name":"700",FVD:"n7",URL:"http://typekit.com/fonts/museo",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"htrh","Family Name":"Museo","Variation Name":"700 Italic",FVD:"i7",URL:"http://typekit.com/fonts/museo","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"htrh","Family Name":"Museo","Variation Name":"900",FVD:"n9",URL:"http://typekit.com/fonts/museo","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"ycvr","Family Name":"Museo Sans","Variation Name":"100",FVD:"n1",
URL:"http://typekit.com/fonts/museo-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"ycvr","Family Name":"Museo Sans","Variation Name":"100 Italic",FVD:"i1",URL:"http://typekit.com/fonts/museo-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"ycvr","Family Name":"Museo Sans","Variation Name":"300",FVD:"n3",URL:"http://typekit.com/fonts/museo-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"ycvr",
"Family Name":"Museo Sans","Variation Name":"300 Italic",FVD:"i3",URL:"http://typekit.com/fonts/museo-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"ycvr","Family Name":"Museo Sans","Variation Name":"500",FVD:"n5",URL:"http://typekit.com/fonts/museo-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"ycvr","Family Name":"Museo Sans","Variation Name":"500 Italic",FVD:"i5",URL:"http://typekit.com/fonts/museo-sans","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"exljbris Font Foundry","Family ID":"ycvr","Family Name":"Museo Sans","Variation Name":"700",FVD:"n7",URL:"http://typekit.com/fonts/museo-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"ycvr","Family Name":"Museo Sans","Variation Name":"700 Italic",FVD:"i7",URL:"http://typekit.com/fonts/museo-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"ycvr","Family Name":"Museo Sans","Variation Name":"900",FVD:"n9",URL:"http://typekit.com/fonts/museo-sans",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"ycvr","Family Name":"Museo Sans","Variation Name":"900 Italic",FVD:"i9",URL:"http://typekit.com/fonts/museo-sans","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"100",FVD:"n1",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"100 Italic",
FVD:"i1",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"300",FVD:"n3",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"300 Italic",FVD:"i3",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb",
"Family Name":"Museo Slab","Variation Name":"500",FVD:"n5",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"500 Italic",FVD:"i5",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"700",FVD:"n7",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"700 Italic",FVD:"i7",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"1000",FVD:"n9",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"1000 Italic",FVD:"i9",URL:"http://typekit.com/fonts/museo-slab",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"900",FVD:"n8",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"exljbris Font Foundry","Family ID":"llxb","Family Name":"Museo Slab","Variation Name":"900 Italic",FVD:"i8",URL:"http://typekit.com/fonts/museo-slab","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"cbym","Family Name":"Myriad Pro","Variation Name":"Regular",
FVD:"n4",URL:"https: //typekit.com/fonts/myriad-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"cbym","Family Name":"Myriad Pro","Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/myriad-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"cbym","Family Name":"Myriad Pro","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/myriad-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Adobe","Family ID":"cbym","Family Name":"Myriad Pro","Variation Name":"Bold Italic",
FVD:"i7",URL:"https: //typekit.com/fonts/myriad-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jvbv","Family Name":"Nudista Web","Variation Name":"Thin",FVD:"n1",URL:"http://typekit.com/fonts/nudista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jvbv","Family Name":"Nudista Web","Variation Name":"Thin Italic",FVD:"i1",URL:"http://typekit.com/fonts/nudista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry",
"Family ID":"jvbv","Family Name":"Nudista Web","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/nudista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jvbv","Family Name":"Nudista Web","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/nudista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jvbv","Family Name":"Nudista Web","Variation Name":"Medium",FVD:"n4",URL:"http://typekit.com/fonts/nudista-web",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jvbv","Family Name":"Nudista Web","Variation Name":"Medium Italic",FVD:"i4",URL:"http://typekit.com/fonts/nudista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jvbv","Family Name":"Nudista Web","Variation Name":"Semi Bold",FVD:"n6",URL:"http://typekit.com/fonts/nudista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jvbv","Family Name":"Nudista Web",
"Variation Name":"Semi Bold Italic",FVD:"i6",URL:"http://typekit.com/fonts/nudista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jvbv","Family Name":"Nudista Web","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/nudista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"jvbv","Family Name":"Nudista Web","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/nudista-web","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Hairline",FVD:"n1",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Hairline Italic",FVD:"i1",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Extra Light",FVD:"n2",URL:"http://typekit.com/fonts/omnes-pro",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Extra Light Italic",FVD:"i2",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Light Italic",
FVD:"i3",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro",
"Variation Name":"Medium",FVD:"n5",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Medium Italic",FVD:"i5",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Semibold",FVD:"n6",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio",
"Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Semibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Darden Studio","Family ID":"mpmb","Family Name":"Omnes Pro","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/omnes-pro","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Insigne Design","Family ID":"zvgp","Family Name":"Pauline","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/pauline",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Insigne Design","Family ID":"zvgp","Family Name":"Pauline","Variation Name":"Oblique",FVD:"i4",URL:"http://typekit.com/fonts/pauline","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Insigne Design","Family ID":"zvgp","Family Name":"Pauline","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/pauline","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Insigne Design","Family ID":"zvgp","Family Name":"Pauline","Variation Name":"Bold Oblique",FVD:"i7",URL:"http://typekit.com/fonts/pauline",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType","Family ID":"cmzp","Family Name":"Pragmatica Web","Variation Name":"Extra Light",FVD:"n2",URL:"http://typekit.com/fonts/pragmatica-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType","Family ID":"cmzp","Family Name":"Pragmatica Web","Variation Name":"Extra Light Oblique",FVD:"i2",URL:"http://typekit.com/fonts/pragmatica-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType","Family ID":"cmzp","Family Name":"Pragmatica Web","Variation Name":"Light",
FVD:"n3",URL:"http://typekit.com/fonts/pragmatica-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType","Family ID":"cmzp","Family Name":"Pragmatica Web","Variation Name":"Light Oblique",FVD:"i3",URL:"http://typekit.com/fonts/pragmatica-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType","Family ID":"cmzp","Family Name":"Pragmatica Web","Variation Name":"Book",FVD:"n4",URL:"http://typekit.com/fonts/pragmatica-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType","Family ID":"cmzp","Family Name":"Pragmatica Web",
"Variation Name":"Oblique",FVD:"i4",URL:"http://typekit.com/fonts/pragmatica-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType","Family ID":"cmzp","Family Name":"Pragmatica Web","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/pragmatica-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType","Family ID":"cmzp","Family Name":"Pragmatica Web","Variation Name":"Bold Oblique",FVD:"i7",URL:"http://typekit.com/fonts/pragmatica-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType",
"Family ID":"cmzp","Family Name":"Pragmatica Web","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/pragmatica-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ParaType","Family ID":"cmzp","Family Name":"Pragmatica Web","Variation Name":"Black Oblique",FVD:"i9",URL:"http://typekit.com/fonts/pragmatica-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Thin",FVD:"n1",URL:"http://typekit.com/fonts/proxima-nova",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Thin Italic",FVD:"i1",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova",
"Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Regular Italic",FVD:"i4",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Semibold",FVD:"n6",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Semibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Bold",FVD:"n7",
URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Extrabold",FVD:"n8",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio",
"Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Extrabold Italic",FVD:"i8",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/proxima-nova","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"vcsm","Family Name":"Proxima Nova","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/proxima-nova",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"rjbz","Family Name":"Purista Web","Variation Name":"Thin",FVD:"n2",URL:"https: //typekit.com/fonts/purista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"rjbz","Family Name":"Purista Web","Variation Name":"Thin Italic",FVD:"i2",URL:"https: //typekit.com/fonts/purista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"rjbz","Family Name":"Purista Web",
"Variation Name":"Light",FVD:"n3",URL:"https: //typekit.com/fonts/purista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"rjbz","Family Name":"Purista Web","Variation Name":"Light Italic",FVD:"i3",URL:"https: //typekit.com/fonts/purista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"rjbz","Family Name":"Purista Web","Variation Name":"Medium",FVD:"n4",URL:"https: //typekit.com/fonts/purista-web","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Suitcase Type Foundry","Family ID":"rjbz","Family Name":"Purista Web","Variation Name":"Medium Italic",FVD:"i4",URL:"https: //typekit.com/fonts/purista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"rjbz","Family Name":"Purista Web","Variation Name":"Semi Bold",FVD:"n6",URL:"https: //typekit.com/fonts/purista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"rjbz","Family Name":"Purista Web","Variation Name":"Semi Bold Italic",
FVD:"i6",URL:"https: //typekit.com/fonts/purista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"rjbz","Family Name":"Purista Web","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/purista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Suitcase Type Foundry","Family ID":"rjbz","Family Name":"Purista Web","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/purista-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ps Type","Family ID":"hptl",
"Family Name":"Quatro","Variation Name":"Ultra Black",FVD:"n9",URL:"https: //typekit.com/fonts/quatro","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ps Type","Family ID":"hptl","Family Name":"Quatro","Variation Name":"Ultra Black Italic",FVD:"i9",URL:"https: //typekit.com/fonts/quatro","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ps Type","Family ID":"dxzd","Family Name":"Quatro Slab","Variation Name":"Ultra Black",FVD:"n9",URL:"https: //typekit.com/fonts/quatro-slab","RECOMMENDED FOR BODY TEXT":"N"},
{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Thin",FVD:"n2",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Thin Italic",FVD:"i2",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Light",FVD:"n3",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Light Italic",FVD:"i3",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Medium",FVD:"n5",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Medium Italic",FVD:"i5",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Heavy",FVD:"n9",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"ps Type","Family ID":"yqrc","Family Name":"Ratio","Variation Name":"Heavy Italic",FVD:"i9",URL:"https: //typekit.com/fonts/ratio","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"ps Type","Family ID":"lwyp","Family Name":"Ratio Display","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/ratio-display","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"ps Type","Family ID":"lwyp","Family Name":"Ratio Display","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/ratio-display","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Mark Simonson Studio","Family ID":"snjm","Family Name":"Refrigerator Deluxe","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/refrigerator-deluxe",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Mark Simonson Studio","Family ID":"snjm","Family Name":"Refrigerator Deluxe","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/refrigerator-deluxe","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Mark Simonson Studio","Family ID":"snjm","Family Name":"Refrigerator Deluxe","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/refrigerator-deluxe","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Mark Simonson Studio","Family ID":"snjm","Family Name":"Refrigerator Deluxe",
"Variation Name":"Heavy",FVD:"n9",URL:"http://typekit.com/fonts/refrigerator-deluxe","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Jan Fromm","Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm",
"Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Medium",FVD:"n5",URL:"http://typekit.com/fonts/rooney-sans-web",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Medium Italic",FVD:"i5",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Bold Italic",
FVD:"i7",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Heavy",FVD:"n8",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Heavy Italic",FVD:"i8",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"mtpj",
"Family Name":"Rooney Sans Web","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"mtpj","Family Name":"Rooney Sans Web","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/rooney-sans-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/rooney-web","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/rooney-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/rooney-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/rooney-web",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Medium",FVD:"n5",URL:"http://typekit.com/fonts/rooney-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Medium Italic",FVD:"i5",URL:"http://typekit.com/fonts/rooney-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/rooney-web",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/rooney-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Heavy",FVD:"n8",URL:"http://typekit.com/fonts/rooney-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Heavy Italic",FVD:"i8",URL:"http://typekit.com/fonts/rooney-web",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Black",FVD:"n9",URL:"http://typekit.com/fonts/rooney-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Jan Fromm","Family ID":"thfh","Family Name":"Rooney Web","Variation Name":"Black Italic",FVD:"i9",URL:"http://typekit.com/fonts/rooney-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"rtgb","Family Name":"Ronnia Web","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/ronnia-web",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"rtgb","Family Name":"Ronnia Web","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/ronnia-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"rtgb","Family Name":"Ronnia Web","Variation Name":"Bold ",FVD:"n7",URL:"http://typekit.com/fonts/ronnia-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"rtgb","Family Name":"Ronnia Web","Variation Name":"Bold Italic",FVD:"i7",
URL:"http://typekit.com/fonts/ronnia-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"TypeTogether","Family ID":"hzlv","Family Name":"Ronnia Web Condensed","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/ronnia-web-condensed","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"TypeTogether","Family ID":"hzlv","Family Name":"Ronnia Web Condensed","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/ronnia-web-condensed","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"fdys",
"Family Name":"Scheme","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/scheme","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Rosetta","Family ID":"wbmp","Family Name":"Skolar Web","Variation Name":"Light",FVD:"n3",URL:"http://typekit.com/fonts/skolar-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Rosetta","Family ID":"wbmp","Family Name":"Skolar Web","Variation Name":"Light Italic",FVD:"i3",URL:"http://typekit.com/fonts/skolar-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Rosetta",
"Family ID":"wbmp","Family Name":"Skolar Web","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/skolar-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Rosetta","Family ID":"wbmp","Family Name":"Skolar Web","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/skolar-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Rosetta","Family ID":"wbmp","Family Name":"Skolar Web","Variation Name":"Semibold",FVD:"n6",URL:"http://typekit.com/fonts/skolar-web","RECOMMENDED FOR BODY TEXT":"Y"},
{Foundry:"Rosetta","Family ID":"wbmp","Family Name":"Skolar Web","Variation Name":"Semibold Italic",FVD:"i6",URL:"http://typekit.com/fonts/skolar-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Rosetta","Family ID":"wbmp","Family Name":"Skolar Web","Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/skolar-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Rosetta","Family ID":"wbmp","Family Name":"Skolar Web","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/skolar-web",
"RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Rosetta","Family ID":"wbmp","Family Name":"Skolar Web","Variation Name":"Extra Bold",FVD:"n8",URL:"http://typekit.com/fonts/skolar-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Rosetta","Family ID":"wbmp","Family Name":"Skolar Web","Variation Name":"Extra Bold Italic",FVD:"i8",URL:"http://typekit.com/fonts/skolar-web","RECOMMENDED FOR BODY TEXT":"Y"},{Foundry:"Mark Simonson Studio","Family ID":"mkrf","Family Name":"Snicker","Variation Name":"Bold",FVD:"n7",
URL:"http://typekit.com/fonts/snicker","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Insigne Design","Family ID":"qlvb","Family Name":"Sommet Slab","Variation Name":"Regular",FVD:"n4",URL:"http://typekit.com/fonts/sommet-slab","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Insigne Design","Family ID":"qlvb","Family Name":"Sommet Slab","Variation Name":"Italic",FVD:"i4",URL:"http://typekit.com/fonts/sommet-slab","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Insigne Design","Family ID":"qlvb","Family Name":"Sommet Slab",
"Variation Name":"Bold",FVD:"n7",URL:"http://typekit.com/fonts/sommet-slab","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Insigne Design","Family ID":"qlvb","Family Name":"Sommet Slab","Variation Name":"Bold Italic",FVD:"i7",URL:"http://typekit.com/fonts/sommet-slab","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"ywrj","Family Name":"Superclarendon","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/superclarendon","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic",
"Family ID":"ywrj","Family Name":"Superclarendon","Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/superclarendon","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"ywrj","Family Name":"Superclarendon","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/superclarendon","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"ywrj","Family Name":"Superclarendon","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/superclarendon",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Chank Co","Family ID":"gmjz","Family Name":"Swingdancer","Variation Name":"Regular",FVD:"n5",URL:"https: //typekit.com/fonts/swingdancer","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"qywd","Family Name":"Tandelle","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/tandelle","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"qywd","Family Name":"Tandelle","Variation Name":"Italic",FVD:"i4",URL:"https: //typekit.com/fonts/tandelle",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"qywd","Family Name":"Tandelle","Variation Name":"Bold",FVD:"n7",URL:"https: //typekit.com/fonts/tandelle","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"qywd","Family Name":"Tandelle","Variation Name":"Bold Italic",FVD:"i7",URL:"https: //typekit.com/fonts/tandelle","RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Typodermic","Family ID":"bxhq","Family Name":"Teeshirt","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/teeshirt",
"RECOMMENDED FOR BODY TEXT":"N"},{Foundry:"Veer","Family ID":"rkwh","Family Name":"Veer Annabelle","Variation Name":"Regular",FVD:"n4",URL:"https: //typekit.com/fonts/veer-annabelle","RECOMMENDED FOR BODY TEXT":"N"}]},"1.0",{requires:[]});
YUI.add("squarespace-block-posts-by-model-editor-base",function(a){a.namespace("Squarespace.Block.ModelEditorDialog").PostsBy=a.Base.create("blockPostsByEditor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){var d=this.get("dialog"),b=a.Squarespace.ContentCollectionCache;this._dialogReady=!1;(this._collectionsLoaded=0===b.size())&&b.load(a.bind(this._onCollectionsLoaded,this));a.Lang.isValue(d)&&d.after("ready",this._onDialogLoaded,this)},_getDefaultAndProductCollections:function(){var d=
a.Squarespace.ContentCollectionCache.filter(function(b){if(b=b.getTemplateConfiguration()){var c=b.get("collectionType");return(c==a.Squarespace.CollectionTypes.PRODUCT||c==a.Squarespace.CollectionTypes.GENERIC)&&!1===b.get("folder")}return!1});return this._filterOutCalendarCollections(d)},_filterOutCalendarCollections:function(d){return a.Array.filter(d,function(b){return b.getTemplateConfiguration().get("ordering")===a.Squarespace.CollectionOrdering.CALENDAR?!1:!0})},_onDialogLoaded:function(a){this._dialogReady=
!0;this._collectionsLoaded&&this._setCollections()},_onCollectionsLoaded:function(a){this._collectionsLoaded=!0;this._dialogReady&&this._setCollections()},_setCollections:function(){var d=this.get("dialog"),b=this._getDefaultAndProductCollections(),b=a.Squarespace.ContentCollectionUtils.groupCollectionsByTypeName(b);d.getField("collectionId").set("collectionGroups",b)},_getDefaultDialogConfiguration:function(){var d=this.get("strings.description");return{name:"groupby",title:"Edit List",width:300,
height:450,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:this.get("strings.title"),icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{title:d,text:"",padding:[0,0]}},{ctor:a.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{folder:!1}}}]}]}}},{NS:"postsByEditor",
ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfiguration",validator:a.Lang.isObject},strings:{value:{title:"Index",description:"Select a collection below."}}}})},"1.0",{requires:["base","squarespace-block-posts-by-model","squarespace-models-content-collection","squarespace-dialog-description","squarespace-dialog-content-selector"]});
YUI.add("squarespace-instagram-oembed-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["instagram-oembed.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k=this.escapeExpression;a='<div class="instagram-oembed">\n  <a href="';(f=d.url)?f=f.call(b,{hash:{},data:h}):(f=b.url,f="function"===typeof f?f.apply(b):f);a+=k(f)+'">\n    <img src="';(f=d["instagram-url"])?f=f.call(b,{hash:{},data:h}):(f=b["instagram-url"],
f="function"===typeof f?f.apply(b):f);a+=k(f)+'" width="100%" />\n  </a>\n  ';if((f=d["if"].call(b,b.title,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;c='\n    <p><a href="';(e=d.url)?e=e.call(a,{hash:{},data:b}):(e=a.url,e="function"===typeof e?e.apply(a):e);c+=k(e)+'">';(e=d.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,e="function"===typeof e?e.apply(a):e);return c+=k(e)+"</a></p>\n  "},h),data:h}))||0===f)a+=f;return a+"\n</div>"})})();a.Handlebars.registerPartial("instagram-oembed.html".replace("/",
"."),d.templates["instagram-oembed.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-models-connected-accounts",function(a){a.namespace("Squarespace.Models");var d=a.Base.create("ConnectedAccounts",a.ModelList,[a.Squarespace.ModelSync.REST,a.Squarespace.ModelListParse],{model:a.Squarespace.Models.ConnectedAccount},{ATTRS:{websiteId:{value:null}}});a.Squarespace.Models.ConnectedAccounts=d;a=a.Squarespace.Singletons.ConnectedAccounts=new a.Squarespace.Models.ConnectedAccounts({websiteId:a.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","id"]),items:Static.SQUARESPACE_CONTEXT.connectedAccounts||
[]});a.comparator=function(a){return"dropbox"===a.get("serviceName")?0:a.get("addedOn")};a.sort()},"1.0",{requires:"base model model-list squarespace-model-sync-rest squarespace-models-connected-account squarespace-model-list-parse squarespace-util".split(" ")});
YUI.add("text-wordbreak",function(a,d){var b=a.Text,c=b.Data.WordBreak,e=[RegExp(c.aletter),RegExp(c.midnumlet),RegExp(c.midletter),RegExp(c.midnum),RegExp(c.numeric),RegExp(c.cr),RegExp(c.lf),RegExp(c.newline),RegExp(c.extend),RegExp(c.format),RegExp(c.katakana),RegExp(c.extendnumlet)],g=RegExp("^"+c.punctuation+"$"),f=/\s/,h={getWords:function(a,b){var c=0,e=h._classify(a),d=e.length,t=[],r=[],u,s,v;b||(b={});b.ignoreCase&&(a=a.toLowerCase());s=b.includePunctuation;for(v=b.includeWhitespace;c<d;++c)u=
a.charAt(c),t.push(u),h._isWordBoundary(e,c)&&((t=t.join(""))&&((v||!f.test(t))&&(s||!g.test(t)))&&r.push(t),t=[]);return r},getUniqueWords:function(b,c){return a.Array.unique(h.getWords(b,c))},isWordBoundary:function(a,b){return h._isWordBoundary(h._classify(a),b)},_classify:function(a){for(var b,c=[],d=0,g,h,f=a.length,u=e.length,s;d<f;++d){b=a.charAt(d);s=12;for(g=0;g<u;++g)if((h=e[g])&&h.test(b)){s=g;break}c.push(s)}return c},_isWordBoundary:function(a,b){var c,e=a[b],d=a[b+1],g;if(0>b||b>a.length-
1&&0!==b||0===e&&0===d)return!1;g=a[b+2];if(0===e&&(2===d||1===d)&&0===g)return!1;c=a[b-1];return(2===e||1===e)&&0===d&&0===c||(4===e||0===e)&&(4===d||0===d)||(3===e||1===e)&&4===d&&4===c||4===e&&(3===d||1===d)&&4===g||(8===e||9===e||8===c||9===c||8===d||9===d)||5===e&&6===d?!1:7===e||5===e||6===e||7===d||5===d||6===d?!0:10===e&&10===d||11===d&&(0===e||4===e||10===e||11===e)||11===e&&(0===d||4===d||10===d)?!1:!0}};b.WordBreak=h},"3.17.2",{requires:["array-extras","text-data-wordbreak"]});
YUI.add("squarespace-damask-login",function(a){var d={email:{ctor:a.Squarespace.DialogFields.Email,config:{strings:{placeholder:"Email"}}},password:{ctor:a.Squarespace.DialogFields.Password,config:{strings:{placeholder:"Password"}}},"stay-logged-in":{ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Stay Logged In",data:!0}}},b=a.namespace("Squarespace.Damask").Login=a.Base.create("Login",a.Squarespace.SSWidget,[],{initializer:function(){this._fields={}},destructor:function(){this.get("contentBox").ancestor("html").removeClass(this.getClassName("visible"))},
renderUI:function(){b.superclass.renderUI.call(this);var c=this.get("contentBox");c.ancestor("html").addClass(this.getClassName("visible")).addClass("squarespace-damask").removeClass("squarespace-cameron");var e=this.getProperty("FIELD_CONFIG");c.all("[data-field-name]").each(function(b){var c=b.getAttribute("data-field-name");if(a.Object.hasKey(e,c)){if(a.Object.hasKey(this._fields,c))throw"Can not use the same field twice!";var d=e[c];this._fields[c]=new d.ctor(a.merge(d.config,{render:b}))}else console.log(".... cant find: ",
c)},this)},bindUI:function(){this.get("contentBox").delegate("click",function(a){},'[data-action="submit"]',this);a.one("input").focus()},getField:function(a){return this._fields[a]}},{CSS_PREFIX:"sqs-damask-login",HANDLEBARS_TEMPLATE:"damask-login.html",FIELD_CONFIG:d,ATTRS:{strings:{value:{loginWithGoogle:"Login w. Google"}}}})},"1.0",{requires:["squarespace-ss-widget","squarespace-damask-login-template","squarespace-dialog-text","squarespace-dialog-password","squarespace-dialog-check"]});
YUI.add("squarespace-dialog-oembed",function(a){var d=a.namespace("Squarespace.DialogFields").Oembed=a.Base.create("oembed",a.Squarespace.DialogField2,[],{renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("contentBox");this._input=a.one(".input");this._manual=a.one(".manual");this._status=a.one(".status");this._updateStatus(!0)},bindUI:function(){this._input.on("contextmenu",function(a){a.stopImmediatePropagation()});this._input.on("valuechange",this._onChange,this);if(this._manual)this._manual.on("click",
this._setManually,this)},syncUI:function(){d.superclass.syncUI.call(this);this.get("boundingBox").toggleClass("has-title",a.Lang.isValue(this.get("strings.title")))},focus:function(){this._input.focus()},didDataChange:function(){return this.get("edited")},_saveDefaultThumbnail:function(){a.Data.post({url:"/api/commondata/SaveMedia",data:{fileUrl:this.get("data.thumbnailUrl"),replaceItemId:this.get("item").get("id"),collectionId:this.get("collection").get("id"),process:!0,systemDataOrigin:this.get("data.thumbnailUrl")},
success:function(b){b=new a.Squarespace.ImageProcessingJob(a.merge(b.job,{started:!0}));b.on("complete",function(){this.get("dialog").fire("save-item");this.set("edited",!1)},this);b.on("failure",function(){this.get("dialog").fire("save-item");this.set("edited",!1)},this);Static.JOB_MANAGER.addJob(b)}},this)},_updateStatus:function(b,c){if("manual"==this.get("data.resolvedBy"))this._input.set("value",""),this._setStatus(!1,"Embed data has been manually set.");else{var e;b?(e=this.get("data.url"),
this.set("lastUrl",this.get("data.url"))):e=this.get("processingUrl");e?this.get("data.resolved")||this.get("data.resolvedBy")?(e=this.get("data.resolvedObject")?this.get("data.resolveObject")+" Successfully Located.":"Successfully Located.",this._setStatus(!1,e)):a.Lang.isString(c)?this._setStatus(!1,c):this._setStatus(!1,"URL is not embeddable."):this._setStatus(!1,this.get("strings.description"))}},_onChange:function(){var b=this._input.get("value");if(b!=this.get("lastUrl")){this.set("processingUrl",
b);this.set("lastUrl",this.get("processingUrl"));this.set("edited",!0);if(""!==this.get("processingUrl")){var c=this.get("processingUrl");0!==c.search(/^https?:\/\//)&&(c="http://"+c.replace(/^\/\//,""));var e=function(b,e){e!=c?(this._clear(),this._updateStatus()):b?(this.set("data",a.merge(this.get("data"),b)),this._updateStatus(),this._sendAnalyticsInfo("Success")):(this._clear(),this._updateStatus(),this._sendAnalyticsInfo("Empty"))},d=function(a,b){this._clear();this._updateStatus();this._sendAnalyticsInfo("Failure")},
f=function(a,b){this._clear();this._updateStatus(null,"The request to resolve this URL timed out, please try again. ");this._sendAnalyticsInfo("Timeout")};a.Object.some(a.Squarespace.oEmbedResolvers,function(a){if(a.canProcess(c,this.get("filter")))return this._setStatus(!0,"Locating content at that URL..."),a.process(c,{onSuccess:e,onFailure:d,onTimeout:f},this),!0},this)}this._clear();this._updateStatus()}},_sendAnalyticsInfo:function(b){a.Squarespace.Analytics.trackInternal("system_oembed",{result:b})},
_setStatus:function(b,c){this._status.empty(!0);b&&(new a.Squarespace.Spinner({render:this._status})).get("boundingBox").setStyles({"float":"left",marginRight:"9px"});this._status.append(a.Node.create(c))},_setManually:function(){var b=new a.Squarespace.EditingDialog({style:"flyout",name:"edit-embed",closeOthers:!1,overlay:0.5,width:460,buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Set"}],primaryTabs:[{title:"Edit Embed Data",icon:"/universal/images-v6/icons/icon-embed-16-light-solid.png",
fields:[{ctor:a.Squarespace.DialogFields.TextArea,config:{name:"html","strings.placeholder":"Paste a custom embed code here.",height:200}}]}]});b.on("send-requested",function(){var a={html:b.getData().html,resolvedBy:"manual",resolved:!0};this.set("data",a);this.set("lastUrl",null);this.set("edited",!0);this._updateStatus();b.close()},this);"manual"==this.get("data.resolvedBy")&&b.setInitialData({html:this.get("data.html")});this.get("dialog").addChildDialog(b);a.later(0,this,function(){b.show()})},
_clear:function(){this.set("data",{url:this._input.get("value")})}},{CSS_PREFIX:"sqs-oembed",HANDLEBARS_TEMPLATE:"dialog-oembed.html",ASYNC_DATA:!0,ATTRS:{strings:{value:{title:"",description:"",inputPlaceholder:"Enter an embeddable URL here"}},collection:{value:null},contentItem:{value:null},data:{value:{}},edited:{value:!1},filter:{},item:{value:null},lastUrl:{value:null},manual:{value:!0},processingUrl:{value:null}}})},"1.0",{requires:"base base-build event-valuechange squarespace-dialog-field-2 squarespace-dialog-check squarespace-dialog-file-image squarespace-oembed-resolvers squarespace-dialog-oembed-template squarespace-job-manager squarespace-jobs squarespace-spinner".split(" ")});
YUI.add("squarespace-block-summary-v2-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");a.Squarespace.Block.ModelEditorDialog.SummaryV2=a.Base.create("SummaryV2ModelEditorDialog",a.Squarespace.ModelEditorDialog,[],{initializer:function(){this.dialog=this.get("dialog");this.model=this.get("model");this.collectionId=this._getCollectionId();this.collectionClassification=this._getCollectionClassification(this.collectionId);this.dialog.on("ready",function(){this._updateLayoutFields();
this._updateDisplayFields();this._updateMetadataDropdowns();this._updateAutocomplete();this.dialog.getField("collectionId").after("dataChange",function(){this._resetMetadataDropdowns();this._resetEventTimeframeDropdown()},this)},this);this.model.after("collectionIdChange",function(){this.collectionId=this._getCollectionId();this.collectionClassification=this._getCollectionClassification(this.collectionId);this._updateDisplayFields();this._updateMetadataDropdowns();this._updateAutocomplete()},this);
this.model.after("designChange",this._updateLayoutFields,this);this.model.after("showExcerptChange",this._updateReadMoreLinkField,this);this.model.on("save",this._setLightboxMode,this);this.dialog.on(["shown","tab-focused"],function(){this.dialog.getField("pageSize").refreshWidth();this.dialog.getField("listImageSize").refreshWidth();this.dialog.getField("slidesPerRow").refreshWidth()},this)},_setLightboxMode:function(){this.model.set("lightbox","gallery"===this.collectionClassification)},_updateLayoutFields:function(){var a=
this.model.get("design");this.dialog.el.all(".sqs-dialog-field.layout").each(function(b){b.toggleClass("hidden",!b.hasClass(a))},this)},_updateDisplayFields:function(){this.dialog.el.all(".sqs-dialog-field.display").each(function(a){a.toggleClass("hidden",!a.hasClass(this.collectionClassification))},this)},_updateReadMoreLinkField:function(){"blog"===this.collectionClassification&&this.dialog.getField("showReadMoreLink").get("boundingBox").toggleClass("hidden",!this.model.get("showExcerpt"))},_updateMetadataDropdowns:function(){var a=
[],a="gallery"===this.collectionClassification?a.concat([this._createSelectOption("none","None"),this._createSelectOption("date","Date Posted"),this._createSelectOption("cats","Category"),this._createSelectOption("tags","Tags"),this._createSelectOption("author","Author"),this._createSelectOption("location","Location")]):"events"===this.collectionClassification?a.concat([this._createSelectOption("none","None"),this._createSelectOption("date","Event Date"),this._createSelectOption("event-time","Event Time"),
this._createSelectOption("cats","Category"),this._createSelectOption("tags","Tags"),this._createSelectOption("location","Location")]):"products"===this.collectionClassification?a.concat([this._createSelectOption("none","None"),this._createSelectOption("cats","Category"),this._createSelectOption("tags","Tags")]):a.concat([this._createSelectOption("none","None"),this._createSelectOption("date","Date Posted"),this._createSelectOption("cats","Category"),this._createSelectOption("tags","Tags"),this._createSelectOption("author",
"Author"),this._createSelectOption("location","Location"),this._createSelectOption("comments","Comments")]);this.dialog.getField("primaryMetadata").set("options",a);this.dialog.getField("secondaryMetadata").set("options",a)},_resetMetadataDropdowns:function(){var a="date";"products"===this.collectionClassification&&(a="none");this.dialog.getField("primaryMetadata").set("data",a);this.dialog.getField("secondaryMetadata").set("data","none")},_resetEventTimeframeDropdown:function(){this.dialog.getField("showPastOrUpcomingEvents").set("data",
"Upcoming")},_updateAutocomplete:function(){var d=this._getCollectionId(),b=this.dialog.getField("filter");if(a.Lang.isString(d)&&""!==d&&a.Lang.isValue(b)){var c=b.get("tagField"),e=b.get("categoryField"),d={collectionId:d};a.Lang.isValue(b)&&(this._getNewAutoCompleteData(c,"/api/commondata/GetAutoCompleteTags",d),this._getNewAutoCompleteData(e,"/api/commondata/GetAutoCompleteCategories",d))}},_getNewAutoCompleteData:function(d,b,c){a.Data.get({url:b,data:c,success:function(b){var c=d.get("acWidget");
a.Lang.isValue(c)&&c.set("source",b)}})},_createSelectOption:function(a,b){return{value:a,label:b}},_getCollectionId:function(){return this.model.get("collectionId")||""},_getCollectionClassification:function(d){if(!d||!a.Squarespace.ContentCollectionCache.getById(d))return"";d=a.Squarespace.ContentCollectionCache.getById(d).get("typeName");d=a.Squarespace.Singletons.Template.get("collectionConfigs."+d).get("acceptTypes");var b;1===d.length?"text"===d[0]?b="blog":"image"===d[0]?b="gallery":"event"===
d[0]?b="events":"store_item"===d[0]&&(b="products"):b=2===d.length&&("image"===d[0]&&"video"===d[1]||"video"===d[0]&&"image"===d[1])?"gallery":"unknown";return b},_getDefaultDialogConfig:function(){return{title:"Edit Summary",width:400,height:440,name:"editSummaryV2Block",closeOthers:!1,style:"standard",flyoutPointerDirection:"hidden",draggable:9!==a.UA.ie&&10!==a.UA.ie,loadingText:"Editing Summary Block &hellip;",initialDataByReference:!0,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},
{type:"saveAndClose",title:"Save"}],tabs:[{tabTitle:"Content",icon:"/universal/images-v6/icons/icon-summary-16-light.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:'<span class="title">Collection</span> <span class="description">Select a collection from  which to feature items.</span>'}},{ctor:a.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{collectionType:[a.Squarespace.CollectionTypes.PRODUCT,
a.Squarespace.CollectionTypes.GENERIC],ordering:[a.Squarespace.CollectionOrdering.USER,a.Squarespace.CollectionOrdering.CHRONOLOGICAL,a.Squarespace.CollectionOrdering.CALENDAR],folder:!1}}}]},{tabTitle:"Layout",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Design",name:"design",className:"layout autogrid list autocolumns carousel thin dark",defaultValue:"autogrid",options:[{value:"autogrid",label:"Grid"},{value:"list",label:"List"},{value:"carousel",label:"Carousel"},
{value:"autocolumns",label:"Autocolumns"}]}},{ctor:a.Squarespace.DialogFields.Text,config:{"strings.title":"Header Text",name:"headerText",className:"layout carousel thin",defaultValue:""}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Text Size",name:"textSize",className:"layout autogrid list autocolumns carousel thin dark",defaultValue:"medium",options:[{value:"extralarge",label:"Extra Large"},{value:"large",label:"Large"},{value:"medium",label:"Medium"},{value:"small",label:"Small"}]}},
{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Aspect Ratio",name:"imageAspectRatio",className:"layout autogrid list carousel thin dark",defaultValue:1.5,options:[{value:"Auto",label:"Auto"},{value:1,label:"1:1 Square"},{value:1.5,label:"3:2 Standard"},{value:2/3,label:"2:3 Standard (Vertical)"},{value:4/3,label:"4:3 Four-Three"},{value:0.75,label:"3:4 Three-Four (Vertical)"},{value:16/9,label:"16:9 Widescreen"},{value:2.4,label:"2.40 Anamorphic Widescreen"}]}},{ctor:a.Squarespace.DialogFields.Description,
config:{text:'<span class="title">Column Width</span> <span class="description">Specify a minimum width columns should be. The number of columns displayed will vary depending on the width of your site.',className:"layout autogrid autocolumns"}},{ctor:a.Squarespace.DialogFields.Slider,required:!1,config:{name:"columnWidth",range:[50,600],labelWidth:15,submitOnEnter:!0,className:"layout autogrid autocolumns"}},{ctor:a.Squarespace.DialogFields.Description,config:{text:'<span class="title">Gutter Width</span> <span class="description">Specify the distance between items.',
className:"layout autogrid autocolumns"}},{ctor:a.Squarespace.DialogFields.Slider,required:!1,config:{name:"gutter",range:[0,100],labelWidth:15,submitOnEnter:!0,className:"layout autogrid autocolumns"}},{ctor:a.Squarespace.DialogFields.Description,config:{text:'<span class="title">Image Size</span> <span class="description">Specify how wide the image should be in relation to the text.',className:"layout list"}},{ctor:a.Squarespace.DialogFields.Slider,required:!1,config:{name:"listImageSize",range:[10,
80],"strings.suffix":"%",pluralize:!1,labelWidth:20,submitOnEnter:!0,className:"layout list"}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Image Alignment",name:"listImageAlignment",className:"layout list thin dark",defaultValue:"left",options:[{value:"left",label:"Left"},{value:"right",label:"Right"}]}},{ctor:a.Squarespace.DialogFields.Description,config:{text:'<span class="title">Items Per Row</span> <span class="description">Specify how many items should be visible at a time.',
className:"layout carousel"}},{ctor:a.Squarespace.DialogFields.Slider,required:!1,config:{name:"slidesPerRow",range:[1,5],labelWidth:5,submitOnEnter:!0,className:"layout carousel"}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Text Alignment",name:"textAlignment",className:"layout autogrid list autocolumns carousel thin dark",defaultValue:"left",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]}},{ctor:a.Squarespace.DialogFields.Select,
config:{"strings.title":"Metadata Position",name:"metadataPosition",className:"display blog gallery events products unknown thin dark",defaultValue:"below-content",options:[{value:"above-title",label:"Above Title"},{value:"below-title",label:"Below Title"},{value:"below-content",label:"Below Content"}]}}]},{tabTitle:"Display",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:'<span class="title">Number of Items</span> <span class="description">Select the number of items to display.',
className:"display blog gallery events products unknown"}},{ctor:a.Squarespace.DialogFields.Slider,required:!0,config:{name:"pageSize",range:[1,30],labelWidth:10,submitOnEnter:!0,className:"display blog gallery events products unknown"}},{ctor:a.Squarespace.DialogFields.Description,config:{text:'<span class="title">Primary Information to Display</span>'}},{ctor:a.Squarespace.DialogFields.Check,name:"showTitle",config:{"strings.title":"Title"},className:"display blog gallery events products unknown"},
{ctor:a.Squarespace.DialogFields.Check,name:"showThumbnail",config:{"strings.title":"Thumbnail"},className:"display blog gallery events products unknown"},{ctor:a.Squarespace.DialogFields.Check,name:"showExcerpt",config:{"strings.title":"Excerpt"},className:"display blog gallery events products unknown"},{ctor:a.Squarespace.DialogFields.Check,name:"showReadMoreLink",config:{"strings.title":"Read More Link"},className:"display blog unknown"},{ctor:a.Squarespace.DialogFields.Check,name:"showPrice",
config:{"strings.title":"Price"},className:"display products"},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Event Timeframe",name:"showPastOrUpcomingEvents",className:"display events thin dark",defaultValue:"upcoming",options:[{value:"upcoming",label:"Upcoming"},{value:"past",label:"Past"}]}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Primary Metadata",name:"primaryMetadata",className:"display blog gallery events products unknown thin dark",defaultValue:"none",
options:[]}},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Secondary Metadata",name:"secondaryMetadata",className:"display blog gallery events products unknown thin dark",defaultValue:"none",options:[]}},{ctor:a.Squarespace.DialogFields.SummaryFilter,name:"filter"}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:a.Lang.isObject}}})},"1.0",{requires:"base model squarespace-dialog-check squarespace-dialog-content-selector squarespace-dialog-select squarespace-dialog-slider squarespace-dialog-summary-filter squarespace-dialog-text squarespace-model-editor squarespace-models-content-collection".split(" ")});
YUI.add("squarespace-content-item-types-settings",function(a){var d=a.namespace("Squarespace").ContentItemEditorSettings={};d.fields={};a.Squarespace.Utils.isDamaskEnabled()?d.fields.url={ctor:a.Squarespace.DialogFields.Url,config:{name:"urlId",prefix:"{urlPrefix}",filter:"url-slug-with-slash","strings.title":"Post URL","strings.description":"While Squarespace generates URLs for your posts automatically, you can optionally create a custom URL for this post above.","strings.placeholder":"..."}}:d.fields.url=
{type:"text",name:"urlId",prefix:"{urlPrefix}",title:"Post URL",description:"While Squarespace generates URLs for your posts automatically, you can optionally create a custom URL for this post above.",filter:"url-slug-with-slash",style:"thin",icon:"link"};d.fields.author={ctor:a.Squarespace.DialogFields.Select,config:{name:"authorId",prefix:"","strings.title":"Author",className:"thin dark",icon:"user",options:{$valueFn:function(a){var c=[];if(Static.SQUARESPACE_CONTEXT.memberAccountNames)for(var e in Static.SQUARESPACE_CONTEXT.memberAccountNames)c.push({value:e,
label:Static.SQUARESPACE_CONTEXT.memberAccountNames[e].displayName});else c.push({value:0,label:"Automatic"});a.authorId&&!Static.SQUARESPACE_CONTEXT.memberAccountNames[a.authorId]&&(a.author?c.push({label:a.author.displayName,value:a.authorId}):c.push({value:a.authorId,label:""}));return c}},defaultValue:{$valueFn:function(){return Static.SQUARESPACE_CONTEXT.authenticatedAccount.id}}}};d.fields.sourceUrl={ctor:a.Squarespace.DialogFields.Text,config:{name:"sourceUrl",strings:{title:"Source URL",placeholder:"http://...",
description:"Source URLs are often displayed below a blog post, to provide attribution or further reading."},className:"thin"}};d.fields.wysiwyg={ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"body",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:227,classNames:"major"}};d.fields.layout={$when:function(a){return!a.disableLayout},ctor:a.Squarespace.DialogFields.Layout,config:{name:"body",contentItem:{$valueFn:function(a){return a.model},$dontRecurse:!0},itemClass:{$valueFn:function(a){return a.model.name}}}};
d.fields.excerpt={ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"excerpt",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.FULL,editorHeight:147,classNames:"major",title:"Excerpt",description:"Excerpts are used most often on the blog list page."}};d.fields.mainImage={ctor:a.Squarespace.DialogFields.FileImage,contentType:"image",name:"mainImage",width:250,height:250,square:!0,mode:a.Squarespace.UploadModes.ITEM,strings:{title:"Thumbnail Image"}};d.fields.clickthroughUrl={ctor:a.Squarespace.DialogFields.CreateLink,
config:{name:"clickthroughUrl","strings.title":"Clickthrough URL",disableNewWindow:!0}};d.fields.title={ctor:a.Squarespace.DialogFields.Text,countHeight:!0,config:{name:"title",className:"large","strings.placeholder":"Enter a {presentationName|lower} title...","strings.title":{$when:a.Squarespace.Utils.isDamaskEnabled,$value:"Title"}},$when:function(a){return!a.disableTitle}};d.fields.childItemsGrid={ctor:a.Squarespace.DialogFields.ContentItemGrid,config:{name:"gallery",width:300,height:{$valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?
388:340}},contentItemImageOptions:{showWorkflowState:!1,showActionOverlay:!0,actionOverlayButtons:[a.Squarespace.ActionOverlayButtons.EDIT_IMAGE,a.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]},acceptTypes:["image","video"],uploadPreflight:{$valueFn:function(a){var c=a.model;return function(e){c.get("id")?e():(c.once("save",function(){e()},c),a.editor.autoSave())}}}}};d.fields.tags={ctor:a.Squarespace.DialogFields.Stringset,config:{mode:"input",requestUrl:"/api/commondata/GetAutoCompleteTags",name:"tags",
title:"",maxMemberChars:a.Squarespace.MaxTagLength,addText:"Click to add tags.",emptyText:"No tags added.",memberClass:"tag",editorLabel:"Add Tags",description:"Click to edit tags.",existingMembers:null,collectionId:"{collectionId}"}};d.fields.categories={ctor:a.Squarespace.DialogFields.Stringset,config:{mode:"select",name:"categories",title:"",requestUrl:"/api/commondata/GetCollectionCategories",maxMemberChars:a.Squarespace.MaxCategoryLength,addText:"Click to add categories.",emptyText:"No categories added.",
memberClass:"category",editorLabel:"Pick Categories",description:"Click to choose categories.",existingMembers:null,canAddMembers:!0,addMemberText:"Create Category",collectionId:"{collectionId}"}};d.fields.productVariantsPricingPlaceholder={ctor:a.Squarespace.DialogFields.VariantsPricingPlaceholder,config:{name:"pricingPlaceholder"}};d.fields.productDigitalPricingPlaceholder={ctor:a.Squarespace.DialogFields.DigitalPricingPlaceholder,config:{name:"pricingPlaceholder"}};d.fields.featured={ctor:a.Squarespace.DialogFields.Check,
name:"starred",config:{"strings.title":"Featured Post","strings.description":"Some templates and blocks will highlight posts flagged as featured."}};d.fields.passthrough={ctor:a.Squarespace.DialogFields.Check,name:"passthrough",config:{"strings.title":"Post Title should link to Source URL"}};d.groups={type:"splitter"};d.groups.tagging={type:"stack",fields:[{$include:"fields.tags"},{$include:"fields.categories"}]};d.groups.publishingWorkflow=[{ctor:a.Squarespace.DialogFields.Stateflow,config:{name:"commenting",
allowNever:!0,states:{allow:{title:"Comments On",optionDesc:"Comments are allowed on this entry.",stateDesc:"Disable comments [DURATION]."},disable:{title:"Comments Off",optionDesc:"No comments allowed.",stateDesc:"No comments allowed."}},stateOrder:["allow","disable"]}},{ctor:a.Squarespace.DialogFields.Stateflow,config:{name:"workflow",states:{published:{title:"Published",optionDesc:"Publish this entry now.",stateDesc:"Published on [DATE]."},scheduled:{title:"Scheduled",optionDesc:"Publish this entry in the future.",
stateDesc:"Publish [DURATION]."},needsreview:{title:"Needs Review",optionDesc:"Mark this entry for review.",stateDesc:"Post will be added to review queue."},draft:{title:"Draft",optionDesc:"Save this entry for later editing.",stateDesc:"This post will not be visible."}},stateOrder:["published","scheduled","needsreview","draft"]}}];d.tabs={};d.tabs.primary={};d.tabs.primary.base={fields:[{type:"splitter",countHeight:!0,fields:[{$include:["groups.tagging",{width:0.36}],$update:{tags:{style:"thin"}}},
{$include:"groups.publishingWorkflow",$concat:!0,$update:{".commenting":{width:0.29},".workflow":{width:0.35},statepicker:{direction:"up",style:"minor"}}}]}]};d.tabs.primary.text={icon:a.Squarespace.Rendering.getIconUrl("text",24,"light-solid"),fields:[{$include:"fields.title"},{$include:["fields.layout",{verticalSpan:!0}]}]};d.tabs.primary.image={icon:a.Squarespace.Rendering.getIconUrl("image",24,"light-solid"),fields:[{type:"splitter",fields:[{ctor:a.Squarespace.DialogFields.FileImage,disableEdit:{$valueFn:function(b){return a.Lang.isValue(b.model.get("proxyForId"))}},
height:248,constrainMethod:"contain",contentType:"image",mode:a.Squarespace.UploadModes.ITEM,width:0.35,name:"mainImage",uploadMessage:"Click here or drag and drop to add a thumbnail image.",title:"",description:""},{type:"stack",width:0.65,fields:[{$include:["fields.title",{"config.strings.placeholder":"Enter an image title..."}]},{$include:"fields.wysiwyg"}]}]}]};d.tabs.primary.quote={icon:a.Squarespace.Rendering.getIconUrl("quote",24,"light-solid"),fields:[{type:"textarea",height:140,countHeight:!0,
name:"quote",title:"Enter a quote...",titleStyle:"inline",style:"title"},{ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"body",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.FULL,editorHeight:227,classNames:"major"}}]};d.tabs.primary.link={icon:a.Squarespace.Rendering.getIconUrl("link",24,"light-solid"),fields:[{$include:["fields.title",{"config.strings.placeholder":"Enter a link title..."}]},{$include:["fields.title",{"config.name":"url","config.strings.placeholder":"Enter a link URL..."}]},
{$include:["fields.layout",{verticalSpan:!0}]}]};d.tabs.primary.video={icon:a.Squarespace.Rendering.getIconUrl("video",24,"light-solid"),fields:[{type:"splitter",fields:[{type:"stack",width:0.3,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"customThumbDescription",text:"<strong>Custom Thumbnail</strong> Upload an image to be used with the image overlay."}},{$include:["fields.mainImage",{"strings.title":"",height:220,contentLabel:"video thumbnail"}]},{ctor:a.Squarespace.DialogFields.Description,
config:{name:"automaticThumbDescription",text:""}},{name:"overlay",ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Use Thumbnail"}}]},{type:"stack",width:0.7,fields:[{ctor:a.Squarespace.DialogFields.Oembed,config:{name:"oembed",filter:"video","strings.description":"<strong>Paste the URL</strong> of a video (Vimeo, YouTube, Animoto, Wistia, etc.) you'd like to embed, and Squarespace will attempt to locate and format this video for your site."}},{$include:"fields.title"},{$when:function(a){return d.tabs.primary.video.isLayoutField(a.body)},
$include:["fields.layout",{height:190}]},{$when:function(a){return!d.tabs.primary.video.isLayoutField(a.body)},$include:["fields.wysiwyg",{ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"body",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:217,classNames:"major"}}]}]}]}],isLayoutField:function(b){return a.Lang.isValue(b)&&a.Lang.isValue(b.layout)||"4fa14d3ce4b08a53fa26468e"===Static.SQUARESPACE_CONTEXT.website.id}};d.tabs.primary.event={icon:a.Squarespace.Rendering.getIconUrl("event",
32,"light-solid"),fields:[{$include:["fields.title",{title:"Enter a event title.."}]},{type:"splitter",countHeight:!0,fields:[{ctor:a.Squarespace.DialogFields.DateTimePicker,config:{name:"startDate",direction:"down",width:0.5,"strings.title":"","strings.description":"Start on [DATE].",dateFormat:"%a, %b %d %Y at %I:%M%p"}},{ctor:a.Squarespace.DialogFields.DateTimePicker,config:{name:"endDate",direction:"down",width:0.5,dateFormat:"%a, %b %d %Y at %I:%M%p","strings.title":"","strings.description":"End on [DATE].",
"strings.validationError":"End time must be later than start time.",dataValidator:function(a){var c=this.get("dialog").getField("startDate").get("data");return null===a?!0:a<c?!1:!0}}}]},{$include:["fields.layout",{verticalSpan:!0}]}]};d.tabs.primary.gallery={icon:a.Squarespace.Rendering.getIconUrl("gallery",24,"light-solid"),fields:[{$include:"fields.title"},{$include:["fields.childItemsGrid",{"config.width":739,"config.height":135}]},{$include:["fields.layout",{height:150}]}]};d.tabs.primary.audio=
{icon:a.Squarespace.Rendering.getIconUrl("audio",24,"light-solid"),fields:[{type:"splitter",height:600,fields:[{type:"stack",width:0.35,fields:[{ctor:a.Squarespace.DialogFields.FileAudio,disableEdit:{$valueFn:function(b){return a.Lang.isValue(b.model.get("proxyForId"))}},height:248,constrainMethod:"contain",contentType:"audio",mode:a.Squarespace.UploadModes.ITEM,name:"audioTrack",uploadMessage:"Click here or drag and drop to add an audio track."},{$include:["fields.title",{"config.name":"artistName",
"config.strings.title":"Artist Name","config.strings.placeholder":"Enter an artist name...","config.className":"thin","config.submitOnEnter":!0}]}]},{type:"stack",width:0.65,height:600,fields:[{$include:["fields.title",{"config.submitOnEnter":!0,"config.strings.placeholder":"Enter an {presentationName|lower} title..."}]},{ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"body",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:300,classNames:"major"}}]}]}]};d.tabs.panel=
{};d.tabs.panel.primary={fields:[{$include:"fields.tags"},{$include:"fields.categories"},{ctor:a.Squarespace.DialogFields.StateManager,config:{name:"commenting",allowNever:!0,states:{allow:{title:"Comments On",optionDesc:"Comments are allowed on this entry.",stateDesc:"Disable comments [DURATION]."},disable:{title:"Comments Off",optionDesc:"No comments allowed.",stateDesc:"No comments allowed."}},stateOrder:["allow","disable"]}},{ctor:a.Squarespace.DialogFields.StateManager,config:{name:"workflow",
states:{published:{title:"Published",optionDesc:"Publish this entry now.",stateDesc:"Published on [DATE]."},scheduled:{title:"Scheduled",optionDesc:"Publish this entry in the future.",stateDesc:"Publish [DURATION]."},needsreview:{title:"Needs Review",optionDesc:"Mark this entry for review.",stateDesc:"Post will be added to review queue."},draft:{title:"Draft",optionDesc:"Save this entry for later editing.",stateDesc:"This post will not be visible."}},stateOrder:["published","scheduled","needsreview",
"draft"]}}]};d.tabs.primary.product={};d.tabs.primary.product.base={icon:a.Squarespace.Rendering.getIconUrl("products",32,"light"),fields:[{type:"splitter",fields:[{type:"stack",width:0.38,verticalSpan:!0,fields:[{$include:"fields.childItemsGrid"}]},{type:"stack",width:0.62,verticalSpan:!0,fields:[{$include:["fields.title",{"config.strings.placeholder":"Enter a {presentationName|lower} name..."}]},{name:"pricingPlaceholder"},{ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"excerpt",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.FULL,
editorHeight:185,classNames:"major",title:"Brief Description"}}]}]},{type:"splitter",fields:[{$include:["groups.tagging",{width:0.39}]},{ctor:a.Squarespace.DialogFields.Stateflow,direction:"up",style:"minor",name:"workflow",width:0.5,states:{published:{title:"Available",optionDesc:"This product is currently available for sale.",stateDesc:"Released on [DATE]."},scheduled:{title:"Scheduled",optionDesc:"This product is scheduled to become available later.",stateDesc:"For sale [DURATION]."},draft:{title:"Not Listed",
optionDesc:"Hide this from being listed in your store.",stateDesc:"This product will not be available for purchase."}},stateOrder:["published","scheduled","draft"]}]}]};d.tabs.product={};d.tabs.product.variantsPhysical={tabTitle:"Pricing & Variants",name:"variants_tab",fields:[{ctor:a.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:!0,measurementStandard:{$valueFn:function(a){return Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.measurementStandard}}}}]};d.tabs.product.variantsService=
{tabTitle:"Pricing & Variants",name:"variants_tab",fields:[{ctor:a.Squarespace.DialogFields.VariantsTable,config:{name:"variants",isPhysical:!1}}]};d.tabs.product.upload={tabTitle:"Pricing & Upload",name:"variants_tab",fields:[{type:"splitter",fields:[{ctor:a.Squarespace.DialogFields.File,config:{name:"digitalGoods",title:"Digital Goods",contentType:"file",recordType:a.Squarespace.RecordType.DIGITALGOOD,childAsset:!0,mode:a.Squarespace.UploadModes.CHILD,maxSize:300,childType:a.Squarespace.ChildGroups.DIGITAL_GOODS,
constrainMethod:"contain",height:200,width:0.27,description:"Customers will receive this file after purchase.",preflight:{$valueFn:function(b){var c=b.model;return function(e){var d=b.editor,f=d.get("dialog").getField("digitalGoods"),h=f.get("data"),k=function(){h.set("parentId",c.get("id"));f.refreshItemPostData()};c.get("id")?(a.Lang.isValue(h)&&!h.get("parentId")&&k(),c.clearChildGroup("digitalGoods",e)):(c.once("save",function(){k();e&&e()}),d.autoSave())}}}}},{type:"stack",width:0.5,fields:[{ctor:a.Squarespace.DialogFields.MoneyText,
width:0.5,name:"priceCents","strings.title":"Price"},{ctor:a.Squarespace.DialogFields.MoneyText,width:0.5,name:"salePriceCents","strings.title":"Sale Price"},{ctor:a.Squarespace.DialogFields.Check,width:0.5,name:"onSale",config:{"strings.title":"On Sale","strings.description":"Charge customers the sale price."}}]}]}]};d.tabs.product.additionalInfo={tabTitle:"Additional Info",name:"additionalInfo",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{title:"Additional Info",text:"Put additional info on your product page: a longer description, videos, or other content.",
padding:[0,10]}},{$include:["fields.layout",{height:310}]}]};d.tabs.product.workflow={tabTitle:"Workflow",name:"workflow",fields:[{type:"splitter",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{width:0.5,name:"additionalInformationDescription",title:"Collect Additional Information",text:"Use this area to create a custom checkout workflow. Selecting a form to the right will require users to fill out that form when adding this product to their cart. Forms created here can be used across multiple products."}},
{ctor:a.Squarespace.DialogFields.FormSelector,config:{width:0.5,name:"additionalFieldsFormId",formType:a.Squarespace.FormType.PRODUCT}}]}]};d.tabs.options={};d.tabs.options["default"]={tabTitle:"Options",name:"options",scroll:!0,fields:[{type:"splitter",countHeight:!0,fields:[{$include:["fields.mainImage",{width:0.4}]},{type:"stack",width:0.6,fields:[{$include:"fields.url"},{$include:"fields.author"},{$include:"fields.sourceUrl"},{$include:"fields.passthrough",$when:function(a){return a.enablePassthrough}}]}]},
{$include:"fields.excerpt",$when:function(a){return a.enableExcerpt}},{$include:"fields.featured",$when:function(a){return a.enableFeatured}}]};d.tabs.options.image=a.merge(d.tabs.options["default"],{fields:[{type:"stack",fields:[{type:"splitter",fields:[{$include:["fields.url",{width:0.6}]},{$include:["fields.author",{width:0.4}]}]},{type:"splitter",fields:[{$include:["fields.sourceUrl",{"config.width":0.6}]},{$include:["fields.clickthroughUrl",{"config.width":284}]}]}]}]});d.tabs.options.video=
d.tabs.options.audio=a.merge(d.tabs.options["default"],{fields:[{type:"stack",fields:[{type:"splitter",fields:[{$include:["fields.url",{width:0.6}]},{$include:["fields.author",{width:0.4}]}]},{$include:"fields.sourceUrl"},{$include:"fields.excerpt"}]}]});d.tabs.options.product=a.merge(d.tabs.options["default"],{fields:[{type:"splitter",fields:[{$include:["fields.mainImage",{width:0.35}]},{type:"stack",width:0.65,fields:[{$include:["fields.url",{title:"Product URL"}]},{ctor:a.Squarespace.DialogFields.Check,
config:{name:"useCustomAddButtonText","strings.title":"Use Custom Add Button Label","strings.description":'Default button label is "Add To Cart" and "Purchase" when express checkout is enabled.'}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"customAddButtonText"}},{ctor:a.Squarespace.DialogFields.Check,name:"starred",config:{"strings.title":"Featured Product","strings.description":'Some templates and blocks will highlight products marked as "featured".'}}]}]}]});d.tabs.location={tabTitle:"Location",
name:"Location",fields:[{ctor:a.Squarespace.DialogFields.Map,config:{name:"location",title:"Enter a location...",titleStyle:"inline",height:400}}]};d.tabs.social={tabTitle:"Social",name:"social",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{title:"Social",text:"Select the accounts below you would like to update when you post this item.",padding:[0,10]}},{name:"shareStates",ctor:a.Squarespace.DialogFields.ItemPush,config:{pushedServices:{$valueFn:function(a){return a.pushedServices}},
published:{$valueFn:function(b){return b.workflowState===a.Squarespace.WorkflowStates.PUBLISHED}},pendingPushedServices:{$valueFn:function(a){return a.pendingPushedServices}},models:{$valueFn:function(){return a.Squarespace.Singletons.ConnectedAccounts},$dontRecurse:!0}}}]};d.buttons=[{type:"cancel",title:"Cancel"},{type:"remove",title:"Delete"},{$value:{type:"duplicate",title:"Duplicate"},$when:function(b){var c=b.productType;return!b.unsaved&&b.recordType==a.Squarespace.Enums.RecordType.STORE_ITEM&&
(c==a.Squarespace.ProductTypes.PHYSICAL||c===a.Squarespace.ProductTypes.SERVICE)}},{type:"saveAndClose",title:"Save"},{$value:{type:"saveAndPublish",className:"saveAndPublish",title:"Save & Publish"},$when:function(b){return-1!==[a.Squarespace.WorkflowStates.DRAFT,a.Squarespace.WorkflowStates.NEEDS_REVIEW].indexOf(b.workflowState)}}]},"1.0",{requires:"squarespace-dialog-fields squarespace-dialog-fields-generators squarespace-dialog-stateflow squarespace-dialog-stringset squarespace-dialog-datetime-picker squarespace-dialog-content-item-grid squarespace-dialog-text squarespace-dialog-create-link squarespace-dialog-map squarespace-dialog-html squarespace-external-link-tab squarespace-tab-view squarespace-file-manager-tab squarespace-existing-content-link-tab squarespace-dialog-file-image squarespace-dialog-file-audio squarespace-block-base squarespace-dialog-digital-pricing-placeholder squarespace-dialog-variants-pricing-placeholder squarespace-dialog-pricing-placeholder squarespace-dialog-variants-table squarespace-dialog-item-push squarespace-models-connected-accounts squarespace-dialog-form-builder squarespace-dialog-form-preview squarespace-dialog-check squarespace-dialog-select squarespace-dialog-form-selector squarespace-dialog-description squarespace-dialog-layout squarespace-dialog-oembed squarespace-dialog-state-manager squarespace-dialog-wysiwyg squarespace-enum".split(" ")});
YUI.add("squarespace-block-foursquare-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");a.namespace("Squarespace.Block.Editor").Foursquare=a.Base.create("foursquare-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Foursquare")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Foursquare"}}});a.Squarespace.Block.ModelEditorDialog.Foursquare=a.Base.create("FoursquareSummaryModelEditorDialog",
a.Squarespace.Block.ModelEditorDialog.SocialSummary,[],{},{ATTRS:{icon:{value:"foursquare"},type:{value:a.Squarespace.BlockType.FOURSQUARE},socialAccountType:{value:a.Squarespace.ExternalServiceProviders.FOURSQUARE},collectionType:{value:a.Squarespace.CollectionTypes.FOURSQUARE},strings:{value:{name:"Foursquare",itemTypePlural:"Check-ins",itemType:"Check-in"}}}})},"1.0",{requires:"base model squarespace-block-foursquare-model squarespace-block-summary-model-editor squarespace-damask-context-globals squarespace-dialog-select squarespace-dialog-button squarespace-dialog-slider squarespace-model-editor".split(" ")});
YUI.add("squarespace-block-product",function(a){var d=a.namespace("Squarespace.Block").Product=a.Base.create("block-product",a.Squarespace.Block.ModelSyncBase,[],{_renderSuccess:function(a){d.superclass._renderSuccess.call(this,a);this._plugImageLoader()}},{CSS_PREFIX:"sqs-block-product",MODEL:a.Squarespace.ContentModel.ProductBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Product},type:{value:a.Squarespace.BlockType.PRODUCT}}})},"1.0",{requires:["squarespace-enum","squarespace-image-loader",
"squarespace-block-base-modelsync","squarespace-block-product-model","squarespace-block-product-editor"]});
YUI.add("squarespace-markdown-editor",function(a){a.namespace("Squarespace");a.Squarespace.MarkdownEditor=a.Base.create("markdownEditor",a.Squarespace.TextEditor,[],{initializer:function(){this._editorNode=a.one(this.editor.getWrapperElement());this._initializeLinkFlyout()},execCommand:function(a,b){var c=!0;switch(a){case "bold":this._toggleSurroundSelection("**");break;case "link":this._showLinkFlyout(this._findLinkId(),!0);c=!1;break;case "italic":this._toggleSurroundSelection("*");break;case "heading":this._toggleHeading(b);
break;case "insertorderedlist":this._toggleSurroundSelection("1. ","",!0);break;case "insertunorderedlist":this._toggleSurroundSelection("* ","",!0);break;case "blockquote":this._toggleSurroundSelection("> ","",!0)}c&&this.editor.focus()},_initializeLinkFlyout:function(){this._linkEdit=new a.Squarespace.Flyout.LinkEdit({disableNewWindow:!0,panedlAnimDuration:0});this._linkEdit._editPanel.get("boundingBox").setStyle("position","fixed");this._linkEdit._promptPanel.get("boundingBox").setStyle("position",
"fixed");this._linkEdit.on("dataChange",function(d){d=d.newVal;a.Lang.isUndefined(d.linkUrl)||this._cmLink(d.linkId||0,d.linkUrl)},this);this._linkEdit.on("unlink",function(a){this._cmLink(a.linkId||0,"")},this);this._editorNode.after("mouseup",a.bind(function(a){var b=this._findLinkId();"0"!==b&&this._lastSeenLinkId!==b?(a.halt(),this._lastSeenLinkId=b,this._showLinkFlyout(b,!1)):(this._lastSeenLinkId="",this._linkEdit.close(!0))},this))},_findLinkId:function(){var d=a.clone(this.editor.getCursor()),
b=a.clone(this.editor.getTokenAt(d));if("link"===b.className){for(;"]"!==(!b.string?b.string:b.string.substring(b.string.length-1));)b=this.editor.getTokenAt({line:d.line,ch:b.end+1});b=this.editor.getTokenAt({line:d.line,ch:b.end+1});if("string"===b.className&&/\[([^\[]+)\]/.test(b.string))return RegExp.$1}return"0"},_showLinkFlyout:function(d,b){var c=a.one(".field-wysiwyg-control"),e;if(d){var g=this.editor.getValue();RegExp("\\n\\s*\\["+d+"\\]\\s*:\\s*([^'\"(\\n]+)[^\\n]*").test(g)&&(e=RegExp.$1)}b?
this._linkEdit.openEdit(c,e,d):this._linkEdit.openPrompt(c,e,d)},_cmHeading:function(d){var b=a.clone(this.editor.getCursor(!0)),c;this.editor.somethingSelected()?(c=this.editor.getSelection(),c=c.split(/[\r\n]{1,2}/)[0]):(c=this.editor.getLine(b.line),b.ch=0,this.editor.setSelection(b,{line:b.line,ch:1E6}));d=["_","=","-","`"][d];d=Array(Math.max(c.length+1,3)).join(d);0<b.ch?(this.editor.replaceSelection("\n\n"+c+"\n"+d+"\n"),this.editor.setSelection({line:b.line+2,ch:0},{line:b.line+2,ch:1E6})):
(this.editor.replaceSelection(c+"\n"+d+"\n"),this.editor.setSelection({line:b.line,ch:0},{line:b.line,ch:1E6}))},_cmUnheading:function(){var d=a.clone(this.editor.getCursor(!0)).line;if(/^[=\-]{3,}/.test(this.editor.getLine(d+1))){var b=/^\w*$/.test(this.editor.getLine(d+2));this.editor.setSelection({line:d,ch:1E6},{line:d+1+b,ch:1E6});this.editor.replaceSelection("");this.editor.setSelection({line:d,ch:0},{line:d,ch:1E6});return!0}return!1},_toggleHeading:function(a){this._cmUnheading()||this._cmHeading(a)},
_cmSurround:function(d,b,c){b=a.Lang.isUndefined(b)?d:b;var e=a.clone(this.editor.getCursor(!0)),g=a.clone(this.editor.getCursor(!1)),f=this.editor.getSelection();if(c){if(e.line!==g.line){c=e.line;for(f=g.line+1;c<f;c++)this.editor.setSelection({line:c,ch:0}),this._cmSurround(d,b,!0);this.editor.setSelection({line:e.line,ch:0},{line:g.line,ch:1E6});return}c=this.editor.getLine(e.line);var f=a.clone(this.editor.getCursor(!0)),h=a.clone(this.editor.getCursor(!1));f.ch=Math.max(c.search(/\S/),0);h.ch=
c.length;this.editor.setSelection(f,h);f=c.substr(Math.max(0,f.ch))}e.ch+=d.length;g.ch+=d.length;this.editor.replaceSelection(d+f+b);this.editor.setSelection(e,g)},_cmUnsurround:function(d,b,c){b=a.Lang.isUndefined(b)?d:b;var e=a.clone(this.editor.getCursor(!0)),g=a.clone(this.editor.getCursor(!1));if(c){if(e.line!==g.line){c=!1;for(var f,h=e.line,k=g.line+1;h<k;h++)this.editor.setSelection({line:h,ch:0},{line:h,ch:0}),c=(f=this._cmUnsurround(d,b,!0))||c;this.editor.setSelection({line:e.line,ch:0},
{line:g.line,ch:1E6});return c}c=this.editor.getLine(e.line);e.ch=c.search(/\W/);g.ch=c.length}e.ch=Math.max(0,e.ch-d.length);g.ch+=b.length;c=this.editor.getRange(e,g);f=c.length-b.length;return c.slice(0,d.length)==d&&c.slice(f)==b?(this.editor.setSelection(e,g),this.editor.replaceSelection(c.slice(d.length,f)),!0):!1},_toggleSurroundSelection:function(a,b,c){this._cmUnsurround(a,b,c)||this._cmSurround(a,b,c)},_cmLink:function(d,b){var c=!1,e=a.clone(this.editor.getCursor(!0)),g=a.clone(this.editor.getCursor(!1)),
f,h;if(b)if("0"===d){this._cmSurround("[","][0]");e.ch++;g.ch++;c=g.line;f="\n[0]: "+b;do if(c++,h=this.editor.getLine(c),a.Lang.isUndefined(h)){this.editor.replaceRange("\n"+f,{line:c,ch:0});break}else if(a.Squarespace.StringUtils.isBlank(h)){(h=this.editor.getLine(c+1))&&(h[0]&&"["!==h[0])&&(f+="\n");this.editor.replaceRange(f,{line:c,ch:0});break}while(h);f=this.editor.getValue();c=!0}else h=RegExp("(\\n\\s*\\["+d+"\\]\\s*:\\s*)[^'\"(\\n]+([^\\n]*)"),f=this.editor.getValue(),f=f.replace(h,"$1"+
b+"$2");else h=RegExp("(?:\\[([^\\]]+)\\]\\s*\\["+d+"\\])|(?:^\\s*\\["+d+"\\]\\s*:.*$(?:\\n$)?)","gm"),f=this.editor.getValue(),f=f.replace(h,"$1"),e.ch--,g.ch--,c=!0;if(c){var k=0,l={};f.replace(/\]\s*\[(\d{1,3})\]/g,function(a,b){l[b]||(k+=1,l[""+b]=k);return a});f=f.replace(/\[(\d{1,3})\]/g,function(a,b){return"["+(l[b]||b)+"]"});"0"===d&&this._linkEdit.set("linkId",l[d])}this.editor.setValue(f);this.editor.setSelection(e,g)}},{ATTRS:{mode:{value:"code"},height:{value:-1}}})},"1.0",{requires:["squarespace-string-utils",
"squarespace-text-editor"]});
YUI.add("squarespace-models-navigation",function(a){var d=a.Base.create("NavigationItem",a.Model,[],{initializer:function(){if(this.get("collection"))this.get("collection").on("navigationTitleChange",function(a){this.set("title",a.newVal)},this)},sync:function(a,b,c){console.log(this.name+" | sync called with action "+a+" and options ",b);"delete"==a?this.get("collection")?this.get("collection").destroy({remove:!0}):this.getNavigationItemList().save(b,c):("create"==a||"save"==a)&&this.getNavigationItemList().save(b,
c)},destroy:function(b,c){var d=this;"function"===typeof b&&(c=b,b=null);d.onceAfter("destroy",function(){function h(c){c||a.Array.each(d.lists.concat(),function(a){a.remove(d,b)})}b&&(b.remove||b["delete"])?(h(),d.sync("delete",b,function(){c&&c.apply(null,arguments)})):(h(),c&&c.apply(null,arguments))});return this.constructor.superclass.destroy.call(d)},toJSON:function(a){var b=this.constructor.superclass.toJSON.call(this);a?delete b.collection:b.collection&&(b.collection=b.collection.toJSON());
b.children&&(b.items=b.children.toJSON(a),delete b.children);return b},isFolder:function(){if(this.get("collectionId")&&!this.get("children").isEmpty())return!0;if(this.get("collection")){var a=this.get("collection").getTemplateConfiguration();return a&&a.get("folder")?!0:!1}},_setChildren:function(b){if(b){this.get("collectionId")&&(this.get("collection")&&this.get("collection").get("type")==a.Squarespace.CollectionTypes.TEMPLATE_PAGE)&&(b=[]);var d;a.Lang.isArray(b)?d=new c:a.instanceOf(b,c)&&(d=
b,d.setTemplateNavigation(this.getNavigationItemList().getTemplateNavigation()));d&&this._navigationItemList&&(d.setTemplateNavigation(this._navigationItemList.getTemplateNavigation()),d.setNavigationItemList(this._navigationItemList));if(!d)throw"Can't set navigation that isn't an instanceOf FolderItemList.";a.Lang.isArray(b)&&0!==b.length&&(d.setTemplateNavigation(this.getNavigationItemList().getTemplateNavigation()),a.Array.each(b,function(a){var b=a.children;b&&delete a.children;a=d.add(a);b&&
a.set("children",b)}));return d}},setNavigationItemList:function(a){if("NavigationItemList"!==a.name)throw"Cant set a navigationitemlist that isnt actually a navigationitemlist";var b=this.get("children");b&&b.setNavigationItemList(a);this._navigationItemList=a},getNavigationItemList:function(){var a=this._navigationItemList;if(!a)throw"No NavigationItemList found. Possible errors with wrapping data.";return a},setFolderItemList:function(b){if(!a.instanceOf(b,c)&&!a.Lang.isNull(b))throw"Cant set a folder ItemList that isn't a folder.";
this._folderItemList=b},getFolderItemList:function(){return this._folderItemList}},{ATTRS:{title:{value:""},collection:{valueFn:function(b){if(this._getAttr("collectionId"))return a.Squarespace.ContentCollectionCache.getCollectionFromData({id:this._getAttr("collectionId"),navigationTitle:this._getAttr("title"),urlId:this._getAttr("urlId"),typeName:this._getAttr("typeName"),enabled:this._getAttr("enabled"),type:this._getAttr("collectionType")})}},icon:{valueFn:function(){return this.get("collectionId")?
a.Squarespace.ContentCollectionUtils.getIconClassNames(this.get("collection")):this.get("externalLink")?"external-link":""}},children:{value:[],lazyAdd:!1,setter:"_setChildren"}}}),b=a.Base.create("NavigationItemList",a.ModelList,[],{model:d,add:function(a,c){return b.superclass.add.apply(this,arguments)},sync:function(b,c,d){console.log(this.name+" | sync called with action "+b+" and options ",c);"update"===b||"create"===b?a.Data.post({json:!0,url:"/api/widget/UpdateNavigation",data:{fieldName:this.getTemplateNavigation().get("name"),
navigation:{items:this.toJSON(!0)},templateId:a.Squarespace.Singletons.Template.get("id")},success:function(a){console.log("response!",a);d&&d()},failure:function(b){(new a.Squarespace.SystemError("Something Went Wrong",b,"json")).show()}}):"function"===typeof d&&d()},initializer:function(){this.each(function(a){this._bootstrapReference(a)},this);this.on(["create","add"],function(a){this._bootstrapReference(a.model)},this)},save:function(b,c){this.sync("update",b,a.bind(function(){this.fire("save");
a.Lang.isFunction(c)&&c()},this))},_bootstrapReference:function(a){a.setNavigationItemList(this)},setTemplateNavigation:function(a){this._templateNavigation=a},getTemplateNavigation:function(){var a=this._templateNavigation;if(!a)throw"TemplateNavigation not found! Possible errors with wrapping data.";return a},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})}}),c=a.Base.create("FolderItemList",b,[],{_bootstrapReference:function(a){a.setNavigationItemList(this.getNavigationItemList());
a.setFolderItemList(this)},sync:function(a,b,c){this.getNavigationItemList().sync(a,b,c)},setNavigationItemList:function(a){if("NavigationItemList"!==a.name)throw"Cant set a navigationitemlist that isnt actually a navigationitemlist";this._navigationItemList=a},getNavigationItemList:function(){var a=this._navigationItemList;if(!a)throw"No NavigationItemList found. Possible errors with wrapping data.";return a}});a.namespace("Squarespace.Models").NavigationItemList=b;a.namespace("Squarespace.Models").NavigationFolderItemList=
c},"1.0",{requires:["squarespace-models-content-collection","squarespace-content-collection-utils"]});
YUI.add("squarespace-tiny-social-account",function(a){var d={facebook:"/universal/images-v6/icons/icon-facebook-18-color.png",instagram:"/universal/images-v6/icons/icon-instagram-18-color.png",twitter:"/universal/images-v6/icons/icon-twitter-18-color.png",dropbox:"/universal/images-v6/icons/icon-dropbox-18-color.png",googleauth2:"/universal/images-v6/icons/icon-google-18-color.png",google:"/universal/images-v6/icons/icon-google-18-color.png",tumblr:"/universal/images-v6/icons/icon-tumblr-18-color.png",
flickr:"/universal/images-v6/icons/icon-flickr-18-color.png",foursquare:"/universal/images-v6/icons/icon-foursquare-18-color.png",vimeo:"/universal/images-v6/icons/icon-vimeo-18-color.png",youtube:"/universal/images-v6/icons/icon-youtube-18-color.png",linkedin:"/universal/images-v6/icons/icon-linkedin-18-color.png",smugmug:"/universal/images-v6/icons/icon-smugmug-16-color.png",dribbble:"/universal/images-v6/icons/icon-dribbble-16-color.png",fivehundredpix:"/universal/images-v6/icons/icon-fivehundredpix-16-color.png",
pinterest:"/universal/images-v6/icons/icon-pinterest-16-color.png",email:"/universal/images-v6/icons/icon-email-16-light.png",github:"/universal/images-v6/icons/icon-github-16-light.png"},b={facebook:"Facebook",instagram:"Instagram",twitter:"Twitter",dropbox:"Dropbox",google:"Google",googleauth2:"Google",tumblr:"Tumblr",flickr:"Flickr",foursquare:"Foursquare",vimeo:"Vimeo",youtube:"Youtube",linkedin:"LinkedIn",smugmug:"SmugMug",dribbble:"Dribbble",pinterest:"Pinterest",fivehundredpix:"500px",email:"Email",
github:"Github"};a.Handlebars.registerHelper("icon-url",function(a){return d[a.serviceName]});a.Handlebars.registerHelper("service-display-name",function(a){var e=b[a.serviceName];e||(e=a.screenname);return e});a.namespace("Squarespace.Widgets").TinySocialAccount=a.Base.create("tinySocialAccount",a.Squarespace.Widgets.SSWidget,[],{},{ATTRS:{account:{}},CSS_PREFIX:"sqs-tiny-social-account",HANDLEBARS_TEMPLATE:"tiny-social-account.html"})},"1.0",{requires:["base-build","handlebars-base","squarespace-ss-widget",
"squarespace-tiny-social-account-template"]});
YUI.add("squarespace-block-instagram-editor",function(a){a.namespace("Squarespace.Block.Editor").Instagram=a.Base.create("instagram-block-editor-dialog",a.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Instagram")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Instagram"}}});a.namespace("Squarespace.Block.ModelEditorDialog");a.Squarespace.Block.ModelEditorDialog.Instagram=a.Base.create("InstagramModelEditorDialog",
a.Squarespace.Block.ModelEditorDialog.SummaryGallery,[],{},{ATTRS:{icon:{value:"instagram"},type:{value:a.Squarespace.BlockType.INSTAGRAM},socialAccountType:{value:a.Squarespace.ExternalServiceProviders.INSTAGRAM},collectionType:{value:a.Squarespace.CollectionTypes.INSTAGRAM},strings:{value:{name:"Instagram",itemTypePlural:"Photos",itemType:"Photo"}}}})},"1.0",{requires:"base squarespace-block-summary-gallery-model-editor squarespace-block-instagram-model squarespace-damask-context-globals squarespace-enum squarespace-util".split(" ")});
YUI.add("squarespace-connected-account-widget",function(a){a.Handlebars.registerHelper("serviceNameForDisplay",function(a){a=a.serviceName;return"fivehundredpix"===a?"500px":a});a.Handlebars.registerHelper("screenNameForDisplay",function(d){if("tumblr"===d.serviceName&&d.metaData&&d.metaData.primaryBlog){var b=a.Array.find(d.metaData.blogs,function(a){return a.primary});if(b)return d.screenname+" ("+b.title+")"}return d.screenname});a.namespace("Squarespace.Widgets").ConnectedAccount=a.Base.create("connectedAccountWidget",
a.Widget,[a.WidgetChild],{initializer:function(){this._editor=a.Squarespace.ConnectedAccountEditors.create(this.get("model"));this._bindEditorEvents(this._editor);this.publish("reauthenticate",{emitFacade:!0})},destructor:function(){this._editor.destroy();this._modelChangeHandle&&this._modelChangeHandle.detach()},_bindEditorEvents:function(a){a=a.get("dialog");a.on("button-reset",this._resetSubscription,this);a.on("remove-requested",this._remove,this)},_remove:function(){(new a.Squarespace.Widgets.Confirmation({"strings.title":"Disconnect Account",
"strings.message":"Are you sure you want to disconnect this account?"})).on("confirm",function(){this.get("model").destroy({remove:!0},a.bind(function(a){a||this.destroy()},this))},this)},_resetSubscription:function(){this.get("model").resetSubscription();new a.Squarespace.Widgets.Information({"strings.title":"Account Reset","strings.message":"Your connected account has been reset. Social blocks are being populated with the latest activity. This may take a few minutes."})},bindUI:function(){var a=
this.get("model");a&&(this._modelChangeHandle=a.after("change",this.syncUI,this));this.get("boundingBox").on("click",function(){this.get("editable")&&this._edit()},this);this.get("contentBox").delegate("click",this._reauthenticate,".reauthenticate",this)},syncUI:function(){this.get("contentBox").setContent(a.Squarespace.UITemplates.renderAsNodeOrDocFrag("connected-account.html",this.get("model").getAttrs()))},_reauthenticate:function(a){a.halt();this.fire("reauthenticate")},_edit:function(){this._editor.show()}},
{CSS_PREFIX:"sqs-connected-account",ATTRS:{model:{},editable:{value:!0,validator:a.Lang.isBoolean}}})},"1.0",{requires:"base widget widget-child squarespace-ui-templates squarespace-connected-account-editors squarespace-connected-account-template squarespace-widgets-confirmation squarespace-widgets-information".split(" ")});
YUI.add("squarespace-widgets-model-list",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.ModelList=a.Base.create("ModelList",a.Squarespace.Widgets.SSWidget,[a.WidgetParent,a.Squarespace.Mixins.Loadable],{destructor:function(){this._loadingTimer&&this._loadingTimer.cancel()},bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("models");a.after("add",function(c){1===a.size()&&this._empty();this._addWidgetForModel(c.model)},this);a.after("remove",function(c){this._removeWidgetForModel(c.model);
a.isEmpty()&&this._renderEmptyState()},this);a.after("reset",this._renderLoadedState,this)},syncUI:function(){d.superclass.syncUI.call(this);this.get("loading")?this._renderLoadingState():this._renderLoadedState()},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=a.later(500,this,function(){this._empty();new a.Squarespace.Spinner({render:this.get("contentBox"),size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();
this._empty();var a=this.get("models");a.isEmpty()?this._renderEmptyState():a.each(this._addWidgetForModel,this)},_renderEmptyState:function(){var b=this.get("emptyStateIconSrc"),c=this.get("strings.modelName")+"s",e=a.Node.create('<div class="no-models"></div>');a.Lang.isValue(b)&&""!==b&&e.append('<img class="icon large" src="'+b+'" />');e.append('<div class="no-models-text">There are no '+c+".</div>");this.get("contentBox").append(e)},_empty:function(){this.removeAll().each(function(a){a.destroy()});
this._childrenContainer.empty()},_addWidgetForModel:function(a){var c=this.get("models").indexOf(a);this.add({model:a},c)},_removeWidgetForModel:function(a){var c;this.some(function(e){if(e.get("model")===a)return c=e,!0})&&c.destroy()}},{CSS_PREFIX:"sqs-model-list",ATTRS:{models:{valueFn:function(){return new a.Squarespace.Models.ModelList},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.ModelList),writeOnce:"initOnly"},emptyStateIconSrc:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,
writeOnce:"initOnly"},loadable:{getter:function(){return this.get("models")},readOnly:!0},strings:{value:{modelName:"model"},validator:function(b){return!a.Lang.isObject(b)?(console.error('ModelList: Invalid "strings" attribute. Must be an object.'),!1):!a.Object.hasKey(b,"modelName")?(console.error('ModelList: Invalid "strings" attribute. Must have key "modelName".'),!1):!0},writeOnce:"initOnly"},defaultChildType:{value:a.Squarespace.Widgets.Model,writeOnce:"initOnly"}}})},"1.0",{requires:"base event-custom squarespace-attr-validators squarespace-mixins-loadable squarespace-models-model-list squarespace-spinner squarespace-ss-widget squarespace-widgets-model widget-parent".split(" ")});
YUI.add("squarespace-block-amazon",function(a){var d=a.Base.create("AmazonModel",a.Model,[],{},{ATTRS:{alignment:{value:"left"},showImage:{validator:a.Lang.isBoolean,value:!0},showTitle:{validator:a.Lang.isBoolean,value:!0},showAuthor:{validator:a.Lang.isBoolean,value:!0}}});a.namespace("Squarespace.Block").Amazon=a.Base.create("block-amazon",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-amazon",MODEL:d,ATTRS:{type:{value:a.Squarespace.BlockType.AMAZON},editor:{value:a.Squarespace.Block.Editor.Amazon}}})},
"1.0",{requires:["base","model","squarespace-block-base-modelsync","squarespace-block-amazon-editor","squarespace-enum"]});
YUI.add("squarespace-dialog-slider",function(a){a.namespace("Squarespace.DialogFields").Slider=a.Base.create("slider",a.Squarespace.DialogField2,[],{initializer:function(){this.unplug(a.Plugin.WidgetAnim);a.Lang.isValue(this._initialData)||(this._initialData=this.get("data"))},renderUI:function(){a.Squarespace.DialogFields.Slider.superclass.renderUI.call(this);this.slider=new a.Slider({axis:"x"});var d=this.get("contentBox").one(".slider-container"),b=this.get("range");this.slider.setAttrs({thumbUrl:this.get("thumbUrl"),
min:b[0],max:b[1],value:this.get("data")});this.slider.render(d);this._updateDisplayFromSliderValue();this.refreshWidth()},show:function(){var d=this.get("visible");a.Squarespace.DialogFields.Slider.superclass.show.call(this);d||this.refreshWidth()},refreshWidth:function(){var a=this.get("contentBox");this.slider.set("length",a.one(".slider-container").get("offsetWidth"))},bindUI:function(){a.Squarespace.DialogFields.Slider.superclass.bindUI.call(this);this.slider.after("thumbMove",this._updateDataFromSlider,
this);this.slider.after("thumbMove",this._updateDisplayFromSliderValue,this);this.after("dataChange",this._updateSliderFromData,this)},_getDisplayValue:function(){var a=this.get("strings.suffix"),b=this.get("strings.zeroLabel"),c=this.get("data"),e=this.get("pluralize");return 0===c&&b?b:a?c+"&nbsp;"+a+(1!==c&&e?"s":""):c},_updateDisplayFromSliderValue:function(){this.get("contentBox").one(".numeric-display").setContent(this._getDisplayValue(this.get("data")))},_updateDataFromSlider:function(){this.set("data",
this.slider.get("value"))},_updateSliderFromData:function(){this.slider.set("value",this.get("data"))},destructor:function(){this.slider&&this.slider.destroy()}},{CSS_PREFIX:"sqs-slider",HANDLEBARS_TEMPLATE:"dialog-slider.html",ATTRS:{data:{value:null,getter:function(d){return a.Lang.isValue(d)?d:this.get("range")[0]},validator:a.Lang.isNumber},displayFormatter:{value:function(){return this._getDisplayValue(this.get("data"))}},range:{validator:function(d){var b=d[0];d=d[1];return a.Lang.isNumber(b)&&
a.Lang.isNumber(d)&&b<d},value:[0,100]},labelWidth:{value:20},pluralize:{value:!0},disabled:{value:!1},thumbUrl:{value:"/universal/images-v6/dialog/slider-thumb-dark.png"}}})},"1.0",{requires:["base","base-build","squarespace-dialog-field-2","squarespace-dialog-slider-template"]});
YUI.add("squarespace-block-tagcloud-editor",function(a){a.namespace("Squarespace.Block.Editor").Tagcloud=a.Base.create("tagcloud-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Tagcloud")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Tagcloud"}}});var d=a.namespace("Squarespace.Block.ModelEditorDialog").Tagcloud=a.Base.create("blockTagcloudEditor",a.Squarespace.ModelEditorDialog,
[],{_showDialog:function(){d.superclass._showDialog.call(this);var a=this.get("dialog").getField("collectionIds");a.set("collectionGroups",this._getCollectionGroups());a.syncUI()},_getCollectionGroups:function(){var b=a.Squarespace.ContentCollectionUtils,c=a.Squarespace.ContentCollectionCache.filter(b.isGenericOrProduct),c=a.Array(c).filter(b.isNotCalendar);return b.groupCollectionsByTypeName(c)},_getDialogConfig:function(){return{width:300,height:450,closeOthers:!1,draggable:!0,flyoutPointerDirection:"hidden",
style:"flyout",initialDataByReference:!0,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Tag Cloud",icon:"/universal/images-v6/icons/icon-tagcloud-16-light-solid.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Select,config:{name:"type","strings.title":"Display Type",className:"dark thin",defaultValue:"tag",options:[{value:"tag",label:this.get("strings").tag},{value:"category",label:this.get("strings").category}]}},
{ctor:a.Squarespace.DialogFields.Select,config:{name:"sortby","strings.title":"Sort By",defaultValue:"az",className:"thin dark",options:[{value:"az",label:this.get("strings").az},{value:"weight",label:this.get("strings").weight},{value:"activity",label:this.get("strings").activity}]}},{ctor:a.Squarespace.DialogFields.Description,config:{title:"Tag Limit",text:"",padding:[15,0]}},{ctor:a.Squarespace.DialogFields.Slider,required:!0,config:{name:"count",range:[5,100],"strings.suffix":"Tag","strings.description":"Pick the number of tags to show in the cloud.",
pluralize:!0,labelWidth:50,submitOnEnter:!0}},{ctor:a.Squarespace.DialogFields.ContentIdArraySelector,config:{name:"collectionIds",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionGroups:[]}}]}]}}},{ATTRS:{dialogConfig:{getter:"_getDialogConfig"},strings:{value:{az:"A-Z",weight:"Weight",activity:"Activity",tag:"Tags",category:"Categories",author:"Author",fontsize:"Font Size",color:"Color",flat:"Flat"}}}})},"1.0",{requires:"base squarespace-block-editor-dialog squarespace-content-collection-utils squarespace-damask-context-globals squarespace-dialog-content-item-grid squarespace-dialog-gallery-options squarespace-dialog-multi-option squarespace-dialog-multi-frame squarespace-gallery-option-synchronizer squarespace-models-content-collection squarespace-plugin-actionoverlay".split(" ")});
YUI.add("datatype-number-parse",function(a,d){var b=a.Escape.regex;a.mix(a.namespace("Number"),{_buildParser:a.cached(function(a,e,d,f){var h=[],k;a&&h.push("^\\s*"+b(a)+"\\s*");e&&h.push("\\s*"+b(e)+"\\s*$");d&&h.push(b(d)+"(?=\\d)");k=RegExp("(?:"+h.join("|")+")","g");"."===f&&(f=null);return function(a){a=a.replace(k,"");return f?a.replace(f,"."):a}}),parse:function(b,e){var d;e&&"string"===typeof b&&(d=this._buildParser(e.prefix,e.suffix,e.thousandsSeparator,e.decimalSeparator),b=d(b));"string"===
typeof b&&""!==a.Lang.trim(b)&&(b=+b);if("number"!==typeof b||!isFinite(b))b=null;return b}});a.namespace("Parsers").number=a.Number.parse;a.namespace("DataType");a.DataType.Number=a.Number},"3.17.2",{requires:["escape"]});
YUI.add("squarespace-block-fivehundredpix",function(a){a.namespace("Squarespace.Block").Fivehundredpix=a.Base.create("block-fivehundredpix",a.Squarespace.Block.SummaryGallery,[],{},{CSS_PREFIX:"sqs-block-fivehundredpix",MODEL:a.Squarespace.ContentModel.FivehundredpixBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Fivehundredpix},type:{value:a.Squarespace.BlockType.FIVEHUNDREDPIX}}})},"1.0",{requires:["base","squarespace-enum","squarespace-block-summary-gallery","squarespace-block-fivehundredpix-editor",
"squarespace-block-fivehundredpix-model"]});
YUI.add("squarespace-dialog-developer-registration-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-developer-registration.html"]=a(function(a,b,d,f,h){function k(a,b){var c,e;c='\n        <div class="text"><strong>Name: </strong>';(e=d.businessName)?e=e.call(a,{hash:{},data:b}):(e=a.businessName,e=typeof e===l?e.apply(a):e);c+=n(e)+'</div>\n        <div class="text"><strong>Email: </strong>';(e=d.businessEmailAddress)?e=e.call(a,{hash:{},
data:b}):(e=a.businessEmailAddress,e=typeof e===l?e.apply(a):e);c+=n(e)+'</div>\n        <div class="text"><strong>Phone Number: </strong>';(e=d.phoneNumber)?e=e.call(a,{hash:{},data:b}):(e=a.phoneNumber,e=typeof e===l?e.apply(a):e);c+=n(e)+'</div>\n        <div class="text"><strong>Address: </strong>';(e=d.streetAddress)?e=e.call(a,{hash:{},data:b}):(e=a.streetAddress,e=typeof e===l?e.apply(a):e);c+=n(e)+", ";(e=d.cityStateZip)?e=e.call(a,{hash:{},data:b}):(e=a.cityStateZip,e=typeof e===l?e.apply(a):
e);c+=n(e)+", ";(e=d.countryCode)?e=e.call(a,{hash:{},data:b}):(e=a.countryCode,e=typeof e===l?e.apply(a):e);c+=n(e)+'</div>\n        <div class="text"><strong>Website: </strong>';(e=d.businessWebsiteUrl)?e=e.call(a,{hash:{},data:b}):(e=a.businessWebsiteUrl,e=typeof e===l?e.apply(a):e);return c+=n(e)+"</div>\n      "}this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};a="";var l="function",n=this.escapeExpression,p=this;if((b=d["if"].call(b,b.isDeveloperWithMarketingDetails,{hash:{},
inverse:p.program(4,function(a,b){return'\n\n   \n  <div class="developer-signup sqs-description">\n    <div class="title">Developer Registration</div>\n    <div class="text">Use this area to register your Squarespace member account as a developer. Registering as a developer will enable this account to access certain advanced developer features within our interface.</div>\n    <a href="#" class="signup">Register as a Developer</a>\n  </div> \n\n'},h),fn:p.program(1,function(a,b){var c,e;c='\n   \n  \n  <div class="developer sqs-description">\n    <div class="title">Developer Registration</div>\n    <div class="text"><strong>You are a registered developer, welcome to the developer platform!</strong> To enable developer mode on a website and begin accessing the source code, go to Settings &gt; Developer area in the website manager and flip the developer toggle in the upper right.</div>\n\n    <div class="developer-information">\n      ';
if((e=d["with"].call(a,a.marketingData,{hash:{},inverse:p.noop,fn:p.program(2,k,b),data:b}))||0===e)c+=e;return c+'\n    </div>\n\n    <a href="#" class="edit">Edit Developer Registration</a>\n  </div>\n  \n'},h),data:h}))||0===b)a+=b;return a+"\n"})})();a.Handlebars.registerPartial("dialog-developer-registration.html".replace("/","."),d.templates["dialog-developer-registration.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("resize-base",function(a,d){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.Lang,e=c.isArray,g=c.isBoolean,f=c.isNumber,h=c.isString,k=a.Array,l=c.trim,n=k.indexOf,c=function(){return Array.prototype.slice.call(arguments).join(" ")},p=function(a){return Math.round(parseFloat(a))||0},q=function(b){return b instanceof a.Node},t=a.cached(function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}),r=a.cached(function(){var a=[],b=k(arguments,0,!0);k.each(b,function(b,
c){0<c&&(b=t(b));a.push(b)});return a.join("")}),u=a.ClassNameManager.getClassName,s=u("resize"),v=u("resize","handle"),w=u("resize","handle","active"),y=u("resize","handle","inner"),z=u("resize","handle","inner","{handle}"),D=u("resize","handle","{handle}"),K=u("resize","hidden","handles"),B=u("resize","handles","wrapper"),E=u("resize","wrapper");a.mix(b,{NAME:"resize",ATTRS:{activeHandle:{value:null,validator:function(b){return a.Lang.isString(b)||a.Lang.isNull(b)}},activeHandleNode:{value:null,
validator:q},autoHide:{value:!1,validator:g},defMinHeight:{value:15,validator:f},defMinWidth:{value:15,validator:f},handles:{setter:"_setHandles",value:"all"},handlesWrapper:{readOnly:!0,setter:a.one,valueFn:"_valueHandlesWrapper"},node:{setter:a.one},resizing:{value:!1,validator:g},wrap:{setter:"_setWrap",value:!1,validator:g},wrapTypes:{readOnly:!0,value:/^canvas|textarea|input|select|button|img|iframe|table|embed$/i},wrapper:{readOnly:!0,valueFn:"_valueWrapper",writeOnce:!0}},RULES:{b:function(a,
b,c){a.info.offsetHeight=a.originalInfo.offsetHeight+c},l:function(a,b){var c=a.info,e=a.originalInfo;c.left=e.left+b;c.offsetWidth=e.offsetWidth-b},r:function(a,b){a.info.offsetWidth=a.originalInfo.offsetWidth+b},t:function(a,b,c){b=a.info;a=a.originalInfo;b.top=a.top+c;b.offsetHeight=a.offsetHeight-c},tr:function(){this.t.apply(this,arguments);this.r.apply(this,arguments)},bl:function(){this.b.apply(this,arguments);this.l.apply(this,arguments)},br:function(){this.b.apply(this,arguments);this.r.apply(this,
arguments)},tl:function(){this.t.apply(this,arguments);this.l.apply(this,arguments)}},capitalize:r});a.Resize=a.extend(b,a.Base,{ALL_HANDLES:"t tr r br b bl l tl".split(" "),REGEX_CHANGE_HEIGHT:/^(t|tr|b|bl|br|tl)$/i,REGEX_CHANGE_LEFT:/^(tl|l|bl)$/i,REGEX_CHANGE_TOP:/^(tl|t|tr)$/i,REGEX_CHANGE_WIDTH:/^(bl|br|l|r|tl|tr)$/i,HANDLES_WRAP_TEMPLATE:'<div class="'+B+'"></div>',WRAP_TEMPLATE:'<div class="'+E+'"></div>',HANDLE_TEMPLATE:'<div class="'+c(v,D)+'"><div class="'+c(y,z)+'">&nbsp;</div></div>',
totalHSurrounding:0,totalVSurrounding:0,nodeSurrounding:null,wrapperSurrounding:null,changeHeightHandles:!1,changeLeftHandles:!1,changeTopHandles:!1,changeWidthHandles:!1,delegate:null,info:null,lastInfo:null,originalInfo:null,initializer:function(){this._eventHandles=[];this.renderer()},renderUI:function(){this._renderHandles()},bindUI:function(){this._createEvents();this._bindDD();this._bindHandle()},syncUI:function(){this.get("node").addClass(s);this._setHideHandlesUI(this.get("autoHide"))},destructor:function(){var b=
this,c=b.get("node"),e=b.get("wrapper"),d=e.get("parentNode");a.each(b._eventHandles,function(a){a.detach()});b._eventHandles.length=0;b.eachHandle(function(a){b.delegate.dd.destroy();a.remove(!0)});b.delegate.destroy();b.get("wrap")&&(b._copyStyles(e,c),d&&d.insertBefore(c,e),e.remove(!0));c.removeClass(s);c.removeClass(K)},renderer:function(){this.renderUI();this.bindUI();this.syncUI()},eachHandle:function(b){var c=this;a.each(c.get("handles"),function(a,e){var d=c.get("handle"+a.toUpperCase());
b.apply(c,[d,a,e])})},_bindDD:function(){this.delegate=new a.DD.Delegate({bubbleTargets:this,container:this.get("handlesWrapper"),dragConfig:{clickPixelThresh:0,clickTimeThresh:0,useShim:!0,move:!1},nodes:"."+v,target:!1});this._eventHandles.push(this.on("drag:drag",this._handleResizeEvent),this.on("drag:dropmiss",this._handleMouseUpEvent),this.on("drag:end",this._handleResizeEndEvent),this.on("drag:start",this._handleResizeStartEvent))},_bindHandle:function(){var b=this.get("wrapper");this._eventHandles.push(b.on("mouseenter",
a.bind(this._onWrapperMouseEnter,this)),b.on("mouseleave",a.bind(this._onWrapperMouseLeave,this)),b.delegate("mouseenter",a.bind(this._onHandleMouseEnter,this),"."+v),b.delegate("mouseleave",a.bind(this._onHandleMouseLeave,this),"."+v))},_createEvents:function(){var a=this,b=function(b,c){a.publish(b,{defaultFn:c,queuable:!1,emitFacade:!0,bubbles:!0,prefix:"resize"})};b("resize:start",this._defResizeStartFn);b("resize:resize",this._defResizeFn);b("resize:align",this._defResizeAlignFn);b("resize:end",
this._defResizeEndFn);b("resize:mouseUp",this._defMouseUpFn)},_renderHandles:function(){var a=this.get("wrapper"),b=this.get("handlesWrapper");this.eachHandle(function(a){b.append(a)});a.append(b)},_buildHandle:function(b){return a.Node.create(a.Lang.sub(this.HANDLE_TEMPLATE,{handle:b}))},_calcResize:function(){var b=this.handle,c=this.info,e=this.originalInfo,d=c.actXY[0]-e.actXY[0],c=c.actXY[1]-e.actXY[1];if(b&&a.Resize.RULES[b])a.Resize.RULES[b](this,d,c)},_checkSize:function(a,b){var c=this.info,
e=this.originalInfo,d="offsetHeight"===a?"top":"left";c[a]=b;if("left"===d&&this.changeLeftHandles||"top"===d&&this.changeTopHandles)c[d]=e[d]+e[a]-b},_copyStyles:function(b,c){var e=b.getStyle("position").toLowerCase(),d=this._getBoxSurroundingInfo(b);"static"===e&&(e="relative");e={position:e,left:b.getComputedStyle("left"),top:b.getComputedStyle("top")};a.mix(e,d.margin);a.mix(e,d.border);c.setStyles(e);b.setStyles({border:0,margin:0});c.sizeTo(b.get("offsetWidth")+d.totalHBorder,b.get("offsetHeight")+
d.totalVBorder)},_extractHandleName:a.cached(function(a){return(a=a.get("className").match(RegExp(u("resize","handle","(\\w{1,2})\\b"))))?a[1]:null}),_getInfo:function(a,b){var c=[0,0],e=b.dragEvent.target,d=a.getXY(),h=d[0],d=d[1],g=a.get("offsetHeight"),f=a.get("offsetWidth");b&&(c=e.actXY.length?e.actXY:e.lastXY);return{actXY:c,bottom:d+g,left:h,offsetHeight:g,offsetWidth:f,right:h+f,top:d}},_getBoxSurroundingInfo:function(b){var c={padding:{},margin:{},border:{}};q(b)&&a.each(["top","right","bottom",
"left"],function(a){var e=r("padding",a),d=r("margin",a),h=r("border",a,"width"),g=r("border",a,"color");a=r("border",a,"style");c.border[g]=b.getComputedStyle(g);c.border[a]=b.getComputedStyle(a);c.border[h]=b.getComputedStyle(h);c.margin[d]=b.getComputedStyle(d);c.padding[e]=b.getComputedStyle(e)});c.totalHBorder=p(c.border.borderLeftWidth)+p(c.border.borderRightWidth);c.totalHPadding=p(c.padding.paddingLeft)+p(c.padding.paddingRight);c.totalVBorder=p(c.border.borderBottomWidth)+p(c.border.borderTopWidth);
c.totalVPadding=p(c.padding.paddingBottom)+p(c.padding.paddingTop);return c},_syncUI:function(){var b=this.info,c=this.wrapperSurrounding,e=this.get("wrapper"),d=this.get("node");e.sizeTo(b.offsetWidth,b.offsetHeight);(this.changeLeftHandles||this.changeTopHandles)&&e.setXY([b.left,b.top]);e.compareTo(d)||d.sizeTo(b.offsetWidth-c.totalHBorder,b.offsetHeight-c.totalVBorder);a.UA.webkit&&d.setStyle("resize","none")},_updateChangeHandleInfo:function(a){this.changeHeightHandles=this.REGEX_CHANGE_HEIGHT.test(a);
this.changeLeftHandles=this.REGEX_CHANGE_LEFT.test(a);this.changeTopHandles=this.REGEX_CHANGE_TOP.test(a);this.changeWidthHandles=this.REGEX_CHANGE_WIDTH.test(a)},_updateInfo:function(a){this.info=this._getInfo(this.get("wrapper"),a)},_updateSurroundingInfo:function(){var a=this.get("node"),b=this.get("wrapper"),a=this._getBoxSurroundingInfo(a),b=this._getBoxSurroundingInfo(b);this.nodeSurrounding=a;this.wrapperSurrounding=b;this.totalVSurrounding=a.totalVPadding+b.totalVBorder;this.totalHSurrounding=
a.totalHPadding+b.totalHBorder},_setActiveHandlesUI:function(a){var b=this.get("activeHandleNode");b&&(a?(this.eachHandle(function(a){a.removeClass(w)}),b.addClass(w)):b.removeClass(w))},_setHandles:function(b){var c=this,d=[];e(b)?d=b:h(b)&&("all"===b.toLowerCase()?d=c.ALL_HANDLES:a.each(b.split(","),function(a){a=l(a);-1<n(c.ALL_HANDLES,a)&&d.push(a)}));return d},_setHideHandlesUI:function(a){var b=this.get("wrapper");this.get("resizing")||(a?b.addClass(K):b.removeClass(K))},_setWrap:function(a){var b=
this.get("node").get("nodeName");this.get("wrapTypes").test(b)&&(a=!0);return a},_defMouseUpFn:function(){this.set("resizing",!1)},_defResizeFn:function(a){this._resize(a)},_resize:function(a){this._handleResizeAlignEvent(a.dragEvent);this._syncUI()},_defResizeAlignFn:function(a){this._resizeAlign(a)},_resizeAlign:function(a){var b,c;this.lastInfo=this.info;this._updateInfo(a);a=this.info;this._calcResize();this.con||(b=this.get("defMinHeight")+this.totalVSurrounding,c=this.get("defMinWidth")+this.totalHSurrounding,
a.offsetHeight<=b&&this._checkSize("offsetHeight",b),a.offsetWidth<=c&&this._checkSize("offsetWidth",c))},_defResizeEndFn:function(a){this._resizeEnd(a)},_resizeEnd:function(a){a.dragEvent.target.actXY=[];this._syncUI();this._setActiveHandlesUI(!1);this.set("activeHandle",null);this.set("activeHandleNode",null);this.handle=null},_defResizeStartFn:function(a){this._resizeStart(a)},_resizeStart:function(a){var b=this.get("wrapper");this.handle=this.get("activeHandle");this.set("resizing",!0);this._updateSurroundingInfo();
this.originalInfo=this._getInfo(b,a);this._updateInfo(a)},_handleMouseUpEvent:function(a){this.fire("resize:mouseUp",{dragEvent:a,info:this.info})},_handleResizeEvent:function(a){this.fire("resize:resize",{dragEvent:a,info:this.info})},_handleResizeAlignEvent:function(a){this.fire("resize:align",{dragEvent:a,info:this.info})},_handleResizeEndEvent:function(a){this.fire("resize:end",{dragEvent:a,info:this.info})},_handleResizeStartEvent:function(a){this.get("activeHandle")||this._setHandleFromNode(a.target.get("node"));
this.fire("resize:start",{dragEvent:a,info:this.info})},_onWrapperMouseEnter:function(){this.get("autoHide")&&this._setHideHandlesUI(!1)},_onWrapperMouseLeave:function(){this.get("autoHide")&&this._setHideHandlesUI(!0)},_setHandleFromNode:function(a){var b=this._extractHandleName(a);this.get("resizing")||(this.set("activeHandle",b),this.set("activeHandleNode",a),this._setActiveHandlesUI(!0),this._updateChangeHandleInfo(b))},_onHandleMouseEnter:function(a){this._setHandleFromNode(a.currentTarget)},
_onHandleMouseLeave:function(){this.get("resizing")||this._setActiveHandlesUI(!1)},_valueHandlesWrapper:function(){return a.Node.create(this.HANDLES_WRAP_TEMPLATE)},_valueWrapper:function(){var b=this.get("node"),c=b.get("parentNode"),e=b;this.get("wrap")&&(e=a.Node.create(this.WRAP_TEMPLATE),c&&c.insertBefore(e,b),e.append(b),this._copyStyles(b,e),b.setStyles({position:"static",left:0,top:0}));return e}});a.each(a.Resize.prototype.ALL_HANDLES,function(b){a.Resize.ATTRS["handle"+b.toUpperCase()]=
{setter:function(){return this._buildHandle(b)},value:null,writeOnce:!0}})},"3.17.2",{requires:"base widget event oop dd-drag dd-delegate dd-drop".split(" "),skinnable:!0});
YUI.add("uploader-queue",function(a,d){var b=function(){this.queuedFiles=[];this.uploadRetries={};this.numberOfUploads=0;this.currentUploadedByteValues={};this.currentFiles={};this.totalBytes=this.totalBytesUploaded=0;b.superclass.constructor.apply(this,arguments)};a.extend(b,a.Base,{_currentState:b.STOPPED,initializer:function(){},_uploadStartHandler:function(a){a.file=a.target;a.originEvent=a;this.fire("uploadstart",a)},_uploadErrorHandler:function(a){var e=this.get("errorAction"),d;a.file=a.target;
a.originEvent=a;this.numberOfUploads-=1;delete this.currentFiles[a.target.get("id")];this._detachFileEvents(a.target);a.target.cancelUpload();e===b.STOP?this.pauseUpload():e===b.RESTART_ASAP?(e=a.target.get("id"),d=this.uploadRetries[e]||0,d<this.get("retryCount")&&(this.uploadRetries[e]=d+1,this.addToQueueTop(a.target)),this._startNextFile()):e===b.RESTART_AFTER&&(e=a.target.get("id"),d=this.uploadRetries[e]||0,d<this.get("retryCount")&&(this.uploadRetries[e]=d+1,this.addToQueueBottom(a.target)),
this._startNextFile());this.fire("uploaderror",a)},_startNextFile:function(){if(0<this.queuedFiles.length){var a=this.queuedFiles.shift(),b=a.get("id"),d=this.get("perFileParameters"),d=d.hasOwnProperty(b)?d[b]:d;this.currentUploadedByteValues[b]=0;a.on("uploadstart",this._uploadStartHandler,this);a.on("uploadprogress",this._uploadProgressHandler,this);a.on("uploadcomplete",this._uploadCompleteHandler,this);a.on("uploaderror",this._uploadErrorHandler,this);a.on("uploadcancel",this._uploadCancelHandler,
this);a.set("xhrHeaders",this.get("uploadHeaders"));a.set("xhrWithCredentials",this.get("withCredentials"));a.startUpload(this.get("uploadURL"),d,this.get("fileFieldName"));this._registerUpload(a)}},_registerUpload:function(a){this.numberOfUploads+=1;this.currentFiles[a.get("id")]=a},_unregisterUpload:function(a){0<this.numberOfUploads&&(this.numberOfUploads-=1);delete this.currentFiles[a.get("id")];delete this.uploadRetries[a.get("id")];this._detachFileEvents(a)},_detachFileEvents:function(a){a.detach("uploadstart",
this._uploadStartHandler);a.detach("uploadprogress",this._uploadProgressHandler);a.detach("uploadcomplete",this._uploadCompleteHandler);a.detach("uploaderror",this._uploadErrorHandler);a.detach("uploadcancel",this._uploadCancelHandler)},_uploadCompleteHandler:function(c){this._unregisterUpload(c.target);this.totalBytesUploaded+=c.target.get("size");delete this.currentUploadedByteValues[c.target.get("id")];0<this.queuedFiles.length&&this._currentState===b.UPLOADING&&this._startNextFile();var e=this.totalBytesUploaded,
d=Math.min(100,Math.round(1E4*e/this.totalBytes)/100);c.file=c.target;c.originEvent=c;a.each(this.currentUploadedByteValues,function(a){e+=a});this.fire("totaluploadprogress",{bytesLoaded:e,bytesTotal:this.totalBytes,percentLoaded:d});this.fire("uploadcomplete",c);0===this.queuedFiles.length&&0>=this.numberOfUploads&&(this.fire("alluploadscomplete"),this._currentState=b.STOPPED)},_uploadCancelHandler:function(a){a.originEvent=a;a.file=a.target;this.fire("uploadcancel",a)},_uploadProgressHandler:function(b){this.currentUploadedByteValues[b.target.get("id")]=
b.bytesLoaded;var e=this.totalBytesUploaded,d=Math.min(100,Math.round(1E4*e/this.totalBytes)/100);b.originEvent=b;b.file=b.target;this.fire("uploadprogress",b);a.each(this.currentUploadedByteValues,function(a){e+=a});this.fire("totaluploadprogress",{bytesLoaded:e,bytesTotal:this.totalBytes,percentLoaded:d})},startUpload:function(){this.queuedFiles=this.get("fileList").slice(0);this.numberOfUploads=0;this.currentUploadedByteValues={};this.currentFiles={};this.totalBytesUploaded=0;for(this._currentState=
b.UPLOADING;this.numberOfUploads<this.get("simUploads")&&0<this.queuedFiles.length;)this._startNextFile()},pauseUpload:function(){this._currentState=b.STOPPED},restartUpload:function(){for(this._currentState=b.UPLOADING;this.numberOfUploads<this.get("simUploads");)this._startNextFile()},forceReupload:function(a){var b=a.get("id");this.currentFiles.hasOwnProperty(b)&&(a.cancelUpload(),this._unregisterUpload(a),this.addToQueueTop(a),this._startNextFile())},addToQueueTop:function(a){this.queuedFiles.unshift(a)},
addToQueueBottom:function(a){this.queuedFiles.push(a)},cancelUpload:function(a){var e;if(a)if(a=a.get("id"),this.currentFiles[a])this.currentFiles[a].cancelUpload(),this._unregisterUpload(this.currentFiles[a]),this._currentState===b.UPLOADING&&this._startNextFile();else{e=0;for(len=this.queuedFiles.length;e<len;e++)if(this.queuedFiles[e].get("id")===a){this.queuedFiles.splice(e,1);break}}else{for(e in this.currentFiles)this.currentFiles[e].cancelUpload(),this._unregisterUpload(this.currentFiles[e]);
this.currentUploadedByteValues={};this.currentFiles={};this.totalBytesUploaded=0;this.fire("alluploadscancelled");this._currentState=b.STOPPED}}},{CONTINUE:"continue",STOP:"stop",RESTART_ASAP:"restartasap",RESTART_AFTER:"restartafter",STOPPED:"stopped",UPLOADING:"uploading",NAME:"uploaderqueue",ATTRS:{simUploads:{value:2,validator:function(a){return 1<=a&&5>=a}},errorAction:{value:"continue",validator:function(a){return a===b.CONTINUE||a===b.STOP||a===b.RESTART_ASAP||a===b.RESTART_AFTER}},bytesUploaded:{readOnly:!0,
value:0},bytesTotal:{readOnly:!0,value:0},fileList:{value:[],lazyAdd:!1,setter:function(b){a.Array.each(b,function(a){this.totalBytes+=a.get("size")},this);return b}},fileFieldName:{value:"Filedata"},uploadURL:{value:""},uploadHeaders:{value:{}},withCredentials:{value:!0},perFileParameters:{value:{}},retryCount:{value:3}}});a.namespace("Uploader");a.Uploader.Queue=b},"3.17.2",{requires:["base"]});
YUI.add("squarespace-editor-base",function(a){function d(){this.time=0;this.done=[];this.undone=[]}var b=/^[\u200b\s]*$/;d.prototype={addChange:function(a){this.undone.length=0;this.done.push(a)}};a.mix(a.Node.DOM_EVENTS,{paste:!0});a.namespace("Squarespace");var c=a.Squarespace.Range,e={UL:["LI"],OL:["LI"]},g={LI:["UL","OL"]},f=a.Squarespace.EditorBase=a.Base.create("Squared",a.Plugin.Base,[],{_root:null,_listeners:null,_initialValue:null,initializer:function(b){b=this._root=this.get("host");for(var c=
a.Array(b._node.childNodes),e=0,g=c.length;e<g;e++)3===c[e].nodeType&&0===c[e].textContent.replace(/\s+/g,"").length&&b.removeChild(c[e]);c=b.get("innerHTML");this.get("keepEmptyBlocks")&&(c=c.replace(/>&nbsp;</g,">\u200b<"),b.setContent(c));this._initialValue=c;b.set("contentEditable",this.get("editable"));this._history=new d;this.set("keyMap",this.get("keyMap"));b.on(["keyup","mouseup"],this._containerHandler,this);b.on("paste",this._onPaste,this);b.on("focus",this._ensureBlock,this);this.publish("pasteRaw",
{emitFacade:!0,defaultFn:a.bind(this._pasteRaw,this)});this.publish("pasteCooked",{defaultFn:a.bind(this._pasteCooked,this)});return this},destructor:function(){this._root.set("contentEditable",!1).removeAttribute("contentEditable");for(var a=0,b=this._listeners.length;a<b;a++)this._listeners[a].detach();this._listeners=[];this._root.setContent(this.getValue())},reset:function(){this._root.set("content",this._initialValue);this._history=new d},execute:function(a,b,e){var d=this._root,g=this.get("blockElementsWithHeadings"),
f=c.fromSelection({root:d}),t=f.get("container"),r=f.collapsed(),u,s=f.get("offsets"),v=f.cloneContents().all(g),w=f.get("endContainer").ancestor(g,!0),y=null;this._addChange(this._root.get("innerHTML"));w.next()?(y=w.next(),w="before"):(y=w.get("parentNode"),w="after");v.size()?t.all(g).each(function(d){0===d.all(g).size()&&(u=(new c).selectNodeContents(d).intersection(f))&&(b?a(u,b.cloneNode(),e):a(u))},this):a(f,b,e);e&&(y&&y.get("parentNode")&&"none"!=y.getStyle("display")?!y.compareTo(this._root)&&
this._canBeSiblings(y.get("tagName"),e.get("tagName"))?y.insert(e,w):y.append(e):d.append(e),this._mergeWithNeighboringNodes(e),0===t.get("children").size()&&t.remove());if(r&&b&&""===b.get("text")&&b.get("parentNode"))b.set("text","\u200b"),f.selectNodeContents(b);else if(r&&b&&!b.get("parentNode")){if(f.set("offsets",s),t=f.get("endContainer").ancestor("*",!0),t._node.nextSibling||t.insert("\u200b","after"),t=t._node.nextSibling)""===t.textContent&&(t.textContent="\u200b"),f.selectNodeContents(t).collapse()}else f.set("offsets",
s);f.toSelection();d.focus();this.fire("commandExecuted");return b},_canBeSiblings:function(a,b){return!(("LI"==a||"LI"==b)&&a!=b)},wrapFromHtml:function(b){var c=this._root;b=a.Node.create(b);b=b.one(":first-child")||b;var e=b.ancestor(function(a){return!a.parentNode||a.parentNode._node===c});e&&("OL"==e.get("tagName")||"UL"==e.get("tagName"))&&e.get("childNodes").remove();return this.wrap(b,e)},wrap:function(b,c){var e=this.execute(a.bind(this._wrapWithinBlock,this),b,c);this._containerHandler();
return e},_wrapWithinBlock:function(a,e,d){var n,p,q;p=this._root;var t=this.get("blockElements"),r=a.get("container").ancestor(t,!0);(p=p===r)&&(r=a.get("container"));if(e.test(t)||d&&d.test(t))this.get("inlineOnly")||(d?(e.setContent(r.get("innerHTML")),d.appendChild(e),r.remove()):3==a.get("container").get("nodeType")&&!a.collapsed()&&!g[r.get("tagName")]?(p=a.cloneRange(),q=a.cloneRange(),n=a.cloneRange().selectNodeContents(r).shrink(),p.setStart(n.get("startContainer"),n.get("startOffset")).setEnd(a.get("startContainer"),
a.get("startOffset")).shrink(),q.setStart(a.get("endContainer"),a.get("endOffset")).setEnd(n.get("endContainer"),n.get("endOffset")).shrink(),p.collapsed()?(d=a.extractContents(),r.insert(e.setContent(d),"before")):q.collapsed()?(d=a.extractContents(),r.insert(e.setContent(d),"after")):(r.insert(r.cloneNode().setContent(q.extractContents()),"after"),r.insert(e.setContent(a.extractContents()),"after")),0===r.get("children").size()&&b.test(r.get("text"))&&r.remove()):g[r.get("tagName")]?this.unwrapBlock(r.get("parentNode").get("tagName"),
e.get("tagName"),e):(p?e.setContent(r.get("outerHTML")):e.setContent(r.get("innerHTML")),r.insert(e,"before"),r.remove()));else{p=f._innerOuterToSelector(e,d);var r=p.replace(/[\s>]+/g,","),u=a.shrink().get("container").ancestor(p+","+t,!0);q=u.test(p);var t=p.split(">").length-1,s=u;p=p.replace(/h[1-6]/i,"h1, h2, h3, h4, h5, h6");r=r.replace(/h[1-6]/i,"h1, h2, h3, h4, h5, h6");d||(d=e);if(q){n=(new c({root:this._root})).selectNode(u);p=n.cloneRange();q=n.cloneRange();p.setEnd(a.get("startContainer"),
a.get("startOffset"));q.setStart(a.get("endContainer"),a.get("endOffset"));p.collapsed()||(a=f._innerOuterClone(e,d),p.surroundContents(a.innerNode,a.outerNode),a.innerNode.all(r).each(function(a){f.unwrap(a)}));q.collapsed()||(a=f._innerOuterClone(e,d),q.surroundContents(a.innerNode,a.outerNode),a.innerNode.all(r).each(function(a){f.unwrap(a)}));for(;t--;)s=u.get("parentNode");f.unwrap(u,s)}else if(t=a.cloneRange(),s=a.get("startContainer").ancestor(p),q=a.get("endContainer").ancestor(p),s&&(a=a.union(t.selectNode(s))),
q&&(a=a.union(t.selectNode(q))),a.surroundContents(e,d),e.all(r).each(function(a){f.unwrap(a)}),e.get("parentNode").test("p")&&e.test("h1, h2, h3, h4, h5, h6")&&e.unwrap(),e.test("h1, h2, h3, h4, h5, h6")&&e.get("parentNode").get("childNodes").each(function(a){3===a._node.nodeType&&""!==a._node.textContent&&a.wrap("<p></p>")}),p!==r){d=p.split(">");a=function(a){return a===u};p=0;for(t=d.length;p<t;p++)if(r=e.ancestor(d[p]+" "+d[p],!0,a))e._node===r._node&&(e=e.get("parentNode")),f.unwrap(r)}}},unwrap:function(a,
b,c){this._addChange(this._root.get("innerHTML"));if(!(this._root.compareTo(a)||this._root.compareTo(b)&&!c))return a=f.unwrap(a,b,c),this._containerHandler(),a},unwrapBlock:function(b,e,d){this._addChange(this._root.get("innerHTML"));var g=this;b=this._root;var f=this.get("blockElementsWithHeadings"),q=c.fromSelection({root:this._root}),t=q.get("offsets"),r=q.get("startContainer").ancestor(f,!0),u=this._root===r,s=b;u||(d=s=r.get("parentNode"));var v=new a.NodeList,w=new c,y=[];e=a.Node.create("<"+
(e?e:this.get("defaultBlockElement"))+">");r===b&&console.log("congratulation: your day just got more interesting!");w.selectNode(s);q.iterate(function(b){b._node||(b=new a.Node(b));1===b.get("nodeType")&&b.test(f)&&v.push(b)},r._node);w.intersection(q).isEqual(w)&&!w.isEqual(q)?v.each(function(a){g._splitBlockNodes(a,a,y)}):g._splitBlockNodes(s,d,y);for(d=0;d<y.length;d++)this._containsSubtree(v,y[d])&&(r=e.cloneNode(),s=(s=y[d].one(f))?s.get("innerHTML"):y[d].get("innerHTML"),r.setContent(s),y[d].replace(r),
y[d]=r);if(!u){var z;for(d=0;d<y.length;d++)if(z)if(y[d].get("tagName")!=e.get("tagName")&&y[d].get("tagName")==z.get("tagName")){for(u=0;u<y[d].get("children").size();u++)z.appendChild(y[d].get("children").item(u));y[d].remove();y[d]=null}else z=y[d];else z=y[d]}q.set("offsets",t).toSelection();b.focus();this._containerHandler()},unwrapBlocks:function(){this._addChange(this._root.get("innerHTML"));var b=this.get("blockElementsWithHeadings"),e=c.fromSelection({root:this._root}),d=e.get("startContainer").ancestor(b,
!0),g=[];if(!e.collapsed()){e.iterate(function(c){c._node||(c=new a.Node(c));1==c.get("nodeType")&&(c.test(b)&&!c.test("ul, ol, li"))&&g.push(c)},d._node);for(e=0;e<g.length;e++)this._existsInDom(g[e]._node)&&((new c).selectNodeContents(g[e]).shrink().toSelection(),this.unwrapBlock(g[e].get("tagName")))}},_mergeWithNeighboringNodes:function(a){if(e[a.get("tagName")]){var b=a.previous(),c=a.next(),d=b;d||(d=a);b&&b.get("tagName")==a.get("tagName")&&(a.get("children").each(function(a){d.appendChild(a)}),
a.remove());c&&c.get("tagName")==a.get("tagName")&&(c.get("children").each(function(a){d.appendChild(a)}),c.remove())}},_existsInDom:function(a){for(a=a.parentNode;a;){if(a==document)return!0;a=a.parentNode}return!1},_containsSubtree:function(a,b){var c=this.get("blockElementsWithHeadings");if(0<b.all(c).size()){var e=!1;b.all(c).each(function(b){-1<a.indexOf(b)&&(e=!0)});return e}return-1<a.indexOf(b)},_splitBlockNodes:function(b,c,d){var f=this.get("blockElementsWithHeadings"),p=this,q=b.get("tagName").toUpperCase(),
t=b==this._root,r=e[q]&&0<e[q].length&&0<b.all(f).size();t?b.all(f).each(function(a){p._splitBlockNodes(a,a,d)}):r?(b.all(f).each(function(b){var e=a.Node.create("<"+q+">");e.appendChild(b);c.insert(e,"before");d&&-1==d.indexOf(e)&&d.push(e);0<b.all(f).size()&&p._splitBlockNodes(b,c,d)}),0===b.all(f).size()&&b.remove()):b.test(f)&&(g[q]&&b.get("parentNode")&&-1<g[q].indexOf(b.get("parentNode").get("tagName"))?0<b.siblings().size()?p._splitBlockNodes(b.get("parentNode"),b.get("parentNode"),d):d&&-1==
d.indexOf(b.get("parentNode"))&&d.push(b.get("parentNode")):d&&-1==d.indexOf(b)&&d.push(b))},clear:function(b){return this.execute(a.bind(this._clear,this,b))},_clear:function(b,c){c.shrink();var e=this.get("blockElementsWithHeadings");c.get("container");for(var e=c.get("container").ancestor(e,!0),e=a.one(c.grow(e).extractContents()),d=/<(\/)?(\w+)(?:.+(href="(?:\\.|[^"\\])*?"))?.*?>/gi,g=function(a,c,e,d){return!b&&("a"==e||"A"==e)?"<"+(c?c:"")+e+" "+(d?d:"")+">":""},f=e._node.childNodes,t=0,r=f.length;t<
r;t++)if(1==f[t].nodeType){var u=a.Node.create(f[t].outerHTML.replace(d,g))._node;e._node.replaceChild(u,f[t])}c.insertNode(e._node);return this},_ensureBlock:function(){var b=this._root,e=c.fromSelection({root:b}),d=this.get("blockElementsWithHeadings");if(this.get("requireBlocks")&&!b.one(d)){var g=a.Node.create("<"+this.get("defaultBlockElement")+"/>");b.get("childNodes").size()&&!b.get("firstChild").test("br")?g.setContent(b.get("childNodes")):g.set("text","\u200b");b.empty().appendChild(g)}e.collapsed()&&
e.get("container").compareTo(b)&&(g=b.one(d),d=g.siblings(d),d=d.item(d.size()-1)||g,d.get("text")||d.set("text","\u200b"),e.selectNodeContents(d).collapse(d.compareTo(b.get("children").item(0))).toSelection());b.focus()},_updateKeyMap:function(b){function c(a,b,e,d,g,f){return function(c){c.keyCode==b&&(e==c.ctrlKey&&d==c.metaKey&&g==c.shiftKey&&f==c.altKey)&&a.call(this,c)}}var e,d,g,f;if(this._listeners){e=0;for(g=this._listeners.length;e<g;e++)this._listeners[e].detach()}this._listeners=[];for(d in b)if(b.hasOwnProperty(d)){f=
b[d];"string"===typeof f&&(f=this[f]);e=d.split(",");for(var t=0,r=e.length;t<r;t++)g=e[t].split("+"),this._listeners.push(this._root.on("keydown",c(f,g[0],0<g.indexOf("ctrl")||0<g.indexOf("CMD")&&"macintosh"!==a.UA.os,0<g.indexOf("meta")||0<g.indexOf("CMD")&&"macintosh"===a.UA.os,0<g.indexOf("shift"),0<g.indexOf("alt")),this))}return b},_setEditable:function(a){this._root.setAttribute("contentEditable",a?"true":"false");return a},_onBackspace:function(e){var d=this._root,g=c.fromSelection({root:d}),
f=d._node.textContent;if(g.empty()){var p=g.get("container"),q=g.get("startOffset");3===p._node.nodeType&&(p=p.get("parentNode"));"\u200b"===p.get("text")&&(p.set("text",""),g.selectNodeContents(p).collapse().toSelection(),e.halt());0===q&&p.test("ol>li, ul>li")&&(this._addChange(this._root.get("innerHTML")),g=p.previous("li"),q=p.get("parentNode"),g&&!b.test(g.get("text"))&&(e.halt(),(new c({root:d})).selectNodeContents(p),this.unwrapBlock(q.get("tagName"))));if(!f||"\u200b"===f||"\n"===f)return e.halt(),
this._ensureBlock()}else g.cloneRange().shrink().toSelection(),g.cloneRange().selectNodeContents(d).shrink().isEqual(g)&&this._addChange(this._root.get("innerHTML"));a.onceAfter("keyup",this._ensureBlock,this)},_onEnter:function(e){if(e.shiftKey&&!a.UA.safari)return!0;e.halt();if(!this.get("inlineOnly")){var d=this._root,g=c.fromSelection({root:d}),f=this.get("blockElementsWithHeadings"),p=g.get("startContainer").ancestor(f,!0,function(a){return a.compareTo(d)}),q=(new c({root:d})).selectNodeContents(p),
t=g.get("container"),r=t.get("parentNode").compareTo(d)&&!t.test(f),u=q.cloneRange();e.shiftKey&&520<a.UA.safari?(this._addChange(d.get("innerHTML")),p=a.config.doc.createTextNode("\u200b"),g.insertNode(p).insertNode(a.Node.create("<br/>")),g.selectNodeContents(p).collapse().toSelection()):r&&this.get("requireBlocks")?(f=this.get("defaultBlockElement"),p=a.Node.create("<"+f+"/>").set("text",t.get("text")),t.insert(p,"after"),g.setStart(p.get("firstChild"),g.get("startOffset")).collapse(!0),g.toSelection(),
t.remove()):(this._addChange(d.get("innerHTML")),g.collapsed()||g.deleteContents(),q.setEnd(g.get("startContainer"),g.get("startOffset")),u.setStart(g.get("startContainer"),g.get("startOffset")),u.collapsed()?(t=p.get("text").replace("\u200b",""),p.test("blockquote, h1, h2, h3")?(f=(q=p.previous(f.replace(/(?:blockquote)|(?:h\d)/gi,"")))&&q.get("tagName")||"p",q=q&&q.get("className")||""):b.test(t)&&p.test("li")&&!p.next("li")?(t=p.ancestor("ol, ul"),p.remove(),f=(q=t.previous(f.replace(/(?:[ou]l)|(?:h\d),/g,
"")))&&q.get("tagName")||"p",q=q&&q.get("className")||"",p=t):(f=p.get("tagName"),q=p.get("className")||""),q&&(q=' class="'+q+'"'),p=p.insert(a.Node.create("<"+f+q+">\u200b</"+f+">"),"after").next(),g.setStart(p,0).setEnd(p,0).toSelection(),d.focus()):q.collapsed()&&p.test("blockquote, h1, h2, h3")?(f=this.get("defaultBlockElement"),q=p.insert(a.Node.create("<"+f+">\u200b</"+f+">"),"before").previous(),g.setStart(q,0).setEnd(q,0).toSelection(),d.focus()):(g=p.cloneNode(!0).empty(),q.surroundContents(g),
0===g.get("text").length&&g.set("text","\u200b"),p.insert(g,"before").previous().removeAttribute("id")))}},_containerHandler:function(){var b,c,e;if(this._containerTests){var d=this._root;b=(new a.Squarespace.Range({root:d})).fromSelection().get("container");3===b._node.nodeType&&(b=b.get("parentNode"));var g={},f=!1,t=b.ancestors(function(a){return!(f=f||a.compareTo(d))},!0);b=0;for(c=t.size();b<c;b++){var r=t.item(b);for(e in this._containerTests)r.test(this._containerTests[e])&&(g[e]=r)}this.set("containers",
g)}},_setOnlyOnContainerChange:function(b,c){for(var e=this.get(c),d=Object.keys(e||{}),g=Object.keys(b||{}),f=0,t=Math.max(d.length,g.length);f<t;f++){if(d[f]!==g[f])return b;var r=e[d[f]],u=b[g[f]];if(r._node&&u._node&&r._node.href!==u._node.href)return b}return a.Attribute.INVALID_VALUE},registerContainer:function(b,c){this._containerTests||(this._containerTests={});1==arguments.length?this._containerTests=a.mix(this._containerTests,b,!0):this._containerTests[b]=c},_onPaste:function(b){this.pasting||
(this.pasting=!0,b=this.get("pasteWhitelist"),b||(b=this.get("pasteBaseWhitelist")+","+this.get("blockElementsWithHeadings"),b+=","+this._uniqueNodesInRoot(),this.set("pasteWhitelist",b)),this._pasteHolder=this._root.get("innerHTML"),this._pasteOffsets=c.fromSelection({root:this._root}).get("offsets"),this._addChange(this._pasteHolder),a.later(0,this,this._afterPaste))},_afterPaste:function(a){this.pasting&&(this.pasting=!1,(a=this._removeCommonText(this._pasteHolder,this._root.get("innerHTML")))&&
this.fire("pasteRaw",{content:a,_orig:a}))},_pasteRaw:function(b){var e=this._root,d=b._orig,g=this.get("blockElementsWithHeadings"),f=this.get("defaultBlockElement"),q={start:this._pasteOffsets.start,end:this._pasteOffsets.end},t=d.replace(/<[^>]+>/g,"").replace(/&\w+;/g," ").length,r;0===t&&null!==d.match(/<[^>]+>/g)?this.undo():(r=b.content.split(/\s*<br[^>]*>\s*<br[^>]*>\s*/gi),1<r.length&&(b.content="<"+f+">"+r.join("</"+f+"><"+f+">")+"</"+f+">"),this._pasteHolder="",this._pasteOffsets=null,
q.end=q.start+t+a.one(a.Node.create(d)).all("img").size(),t=c.fromOffsets(this._root,q),t.grow(t.get("container").ancestor(g,!0,function(a){return!a.compareTo(e)})||e),b.content===b._orig?(d=t.extractContents(),this.get("requireBlocks")&&!e.one(g)&&(b=a.Node.create("<"+f+"></"+f+">"),b.setContent(d),d=b)):(t.extractContents(),d=a.Node.create(b.content),q.end=q.start+b.content.replace(/<[^>]+>/g,"").length),this.fire("pasteCooked",{content:d,offsets:q,range:t}))},_pasteCooked:function(c){function e(b){if(b&&
1===b.get("nodeType")){for(var c=b._node.attributes,g=b.getAttribute("className").replace(/(?:\bApple-style-span\b)|(?:\brow\b)|(?:\bcol\b)|(?:\bsqsp-[^ ]+)/g,""),h=b.getAttribute("href");c.length;)b.removeAttribute(c[0].name);"div"===b._node.tagName.toLowerCase()&&(c=r.cloneNode().setContent(b.get("childNodes")),b.replace(c),b=c);b.get("childNodes").each(function(a){e(a)});b.test(t)?(g&&b.setAttribute("className",g),h&&b.setAttribute("href",h)):g?(c=d.compareTo(b.get("parentNode"))?a.Node.create('<div class="'+
g+'"/>'):a.Node.create('<span class="'+g+'"/>'),c.setContent(b.get("childNodes")),b.replace(c),b=c):1<b.get("parentNode").get("nodeType")?(c=r.cloneNode(),c.setContent(b.getContent()),b.replace(c)):f.unwrap(b)}}var d=this._root,g=c.content,p=c.offsets;c=c.range;var q=this.get("blockElementsWithHeadings"),t=this.get("pasteWhitelist"),r=a.Node.create("<"+this.get("defaultBlockElement")+"/>");g.all("b[id]").each(function(a){f.unwrap(a)});for(var u=g.one(".Apple-style-span, div > div, p > p, div > h3, div > h2, div > h1"),
s;u;)u.hasClass("Apple-style-span")||(u=u.get("parentNode")),s=u.get("parentNode"),u.get("childNodes").each(function(a){3===a._node.nodeType&&(a=r.cloneNode().setContent(a));s.insertBefore(a,u)}),u.remove(),u=g.one(".Apple-style-span, div > div, p > p, div > h3, div > h2, div > h1");g.all("b, i").each(function(b){var c=a.Node.create("b"==b.get("tagName").toLowerCase()?"<strong/>":"<em/>"),e=b.get("childNodes");c.setContent(e.size()?e:"");b.replace(c)});if(g.get("tagName")&&g.one(g.get("tagName"))){for(var v=
g.get("parentNode")||a.one(document.createDocumentFragment()),w=g.get("firstChild");w;)v.appendChild(w),w=g.get("firstChild");g=v}this.get("requireBlocks")&&(0===g.all(q).size()&&b.test(this._root.get("text")))&&(g=r.cloneNode().setContent(g));g.get("childNodes").each(function(a){e(a)});g.all(q).each(function(a){b.test(a.get("text"))&&a.remove()});g.all("div+br, p+br").remove();if((v=c.get("startContainer").previous(q)||c.get("startContainer"))&&!v.compareTo(this._root)&&b.test(v.get("text")))c.set("startContainer",
v.next(q)),v.remove();c.collapse(!0);c.insertNode(g);c.set("offsets",p).collapse().toSelection();this.pasting=!1},_uniqueNodesInRoot:function(){var a={br:1};this._root.all("*").each(function(b){var c=b.getAttribute("className").split(" ").join(".");a[b.get("tagName")+(c?"."+c:"")]=1});return Object.keys(a).join(",")},_removeCommonText:function(a,b){var c=0,e=0;if(a===b)return"";for(var d=0,g=Math.min(a.length,b.length);d<g;d++)if(a[d]===b[d])c++;else{"<"===a[d-1]&&c--;break}d=0;for(g=Math.min(a.length,
b.length)-c;d<g;d++)if(a[a.length-d]!==b[b.length-d]){for(e=d-1;b.lastIndexOf("<",b.length-1-e)>b.lastIndexOf(">",b.length-1-e);)e--;break}d===g&&(e=d);return e?b.slice(c,-e):b.slice(c)},getValue:function(){var a=this._root;c.fromSelection({root:a}).get("container");a.all(this.get("blockElementsWithHeadings")).size();var a=this._root.get("innerHTML"),b=this.get("keepWhitespaceRuns"),e=this.get("keepEmptyBlocks");return a=a.replace(/(?:[ ]{2})|(?:\s{0,20}id="yui[^"]+")|(?:(\w?)\u200b(\w?))/g,function(a,
c,d){return b&&"  "==a?"\u00a0 ":"\u200b"===a[a.length-1]||"\u200b"===a[a.length-2]?c||d||(e?"\u00a0":""):""})},_onUndo:function(a){var b=this,e=b._root,d=e.get("innerHTML"),g;0<b._history.done.length&&(g=c.fromSelection({root:this._root}).get("offsets"),setTimeout(function(){e.get("innerHTML")===d?(b.undo(),b._undoing=!1):(b._undoing=!0,b._history.undone.push({value:d,offset:g}))},0))},_onRedo:function(a){0!==this._history.undone.length&&(a.preventDefault(),this.redo())},_addChange:function(a){this.fire("change");
this._history.addChange({value:a,offset:c.fromSelection({root:this._root}).get("offsets")})},undo:function(){this._undoHelper(this._history.done,this._history.undone)},redo:function(){this._undoHelper(this._history.undone,this._history.done)},_undoHelper:function(a,b){var e=a.pop(),d,g;e&&(d=this._root.get("innerHTML"),g=c.fromSelection({root:this._root}).get("offsets"),this._root.setContent(e.value),c.fromOffsets(this._root,e.offset).toSelection(),this._root.focus(),b.push({value:d,offset:g}))}},
{NS:"editor",ATTRS:{blockElements:{valueFn:function(){return"p,li,ul,ol,dd,dt,dl,pre,figcaption,blockquote,section,div"}},blockElementsWithHeadings:{valueFn:function(){return"p,ul,ol,li,dd,dt,dl,pre,figcaption,blockquote,section,div,h1,h2,h3,h4,h5,h6"}},keyMap:{value:{8:"_onBackspace",46:"_onBackspace","13, 13+shift":"_onEnter","86+CMD, 45+shift":"_onPaste","90+CMD":"_onUndo","90+CMD+shift, 89+CMD":"_onRedo"},setter:"_updateKeyMap"},value:{getter:"getValue"},defaultBlockElement:{value:"p"},requireBlocks:{value:!0},
inlineOnly:{value:!1},keepWhitespaceRuns:{value:!0},keepEmptyBlocks:{value:!0},pasteBaseWhitelist:{value:"b,i,em,strong,a,pre"},pasteWhitelist:{value:""},editable:{value:!0,setter:"_setEditable"},containers:{value:{},setter:"_setOnlyOnContainerChange"}},_innerOuterClone:function(b,c){function e(a,c){if(c===b)return g=a,!0;c=c.firstChild;for(a=a.firstChild;c;){if(e(a,c))return!0;c=c.nextSibling;a=a.nextSibling}}b=b._node||b;var d=c.cloneNode(!0),g=d._node;e(d._node,c._node||c);return{outerNode:d,innerNode:a.one(g)}},
_innerOuterToSelector:function(a,b,c){c||(c=a._node||a);b||(b=a);var e=c.tagName,d=c.className?"."+(""+c.className).split(/\s+/g).join("."):"",g=c.id&&!/^yui/.test(c.id)?"#"+c.id:"";return!c.parentNode||c===b._node||c===b?e+g+d:f._innerOuterToSelector(a,b,c.parentNode)+">"+e+g+d},unwrap:function(b,c,e,d){b=b._node||b;c=c&&c._node||c||b;c=e?c:c.parentNode||c;if(!c)return b;for(;b!==c;){e=b.parentNode;var g=b.childNodes,q=b.previousSibling,t=b.nextSibling,r=null,u=null;if(e){for(;g.length;)r=b.firstChild,
u?u.appendChild(r.parentNode.removeChild(r)):(e.insertBefore(r,b),a.one(b).test("h1, h2, h3, h4, h5, h6")&&a.one(b.parentNode).test("div")&&(a.one(r).wrap("<p></p>"),u=r.parentNode));e.removeChild(b);if(!a.one(b).test("h1, h2, h3, h4, h5, h6")){if(!d&&t&&t.previousSibling)if(3===t.nodeType&&3==t.previousSibling.nodeType)t.previousSibling.textContent+=t.textContent,e.removeChild(t);else if(f._innerOuterToSelector(t)===f._innerOuterToSelector(t.previousSibling)){for(;t.childNodes.length;)t.previousSibling.appendChild(t.firstChild);
e.removeChild(t)}if(!d&&q&&q.nextSibling)if(3===q.nodeType&&3==q.nextSibling.nodeType)q.textContent+=q.nextSibling.textContent,e.removeChild(q.nextSibling);else if(f._innerOuterToSelector(q)===f._innerOuterToSelector(q.nextSibling)){for(;q.nextSibling.childNodes.length;)q.appendChild(q.nextSibling.lastChild);e.removeChild(q.nextSibling)}}}b=e}return b}})},"0.12.0",{requires:["plugin","base","node","squarespace-range"]});
YUI.add("resize-constrain",function(a,d){function b(){b.superclass.constructor.apply(this,arguments)}var c=a.Lang,e=c.isNumber,g=c.isString,f=a.Resize.capitalize,h=function(a){return parseFloat(a)||0};a.mix(b,{NAME:"resizeConstrained",NS:"con",ATTRS:{constrain:{setter:function(b){if(b&&(b instanceof a.Node||g(b)||b.nodeType))b=a.one(b);return b}},minHeight:{value:15,validator:e},minWidth:{value:15,validator:e},maxHeight:{value:Infinity,validator:e},maxWidth:{value:Infinity,validator:e},preserveRatio:{value:!1,
validator:c.isBoolean},tickX:{value:!1},tickY:{value:!1}}});a.extend(b,a.Plugin.Base,{constrainSurrounding:null,initializer:function(){var b=this.get("host");b.delegate.dd.plug(a.Plugin.DDConstrained,{tickX:this.get("tickX"),tickY:this.get("tickY")});b.after("resize:align",a.bind(this._handleResizeAlignEvent,this));b.on("resize:start",a.bind(this._handleResizeStartEvent,this))},_checkConstrain:function(a,b,c){var e,d,g=this.get("host").info;d=this.constrainSurrounding.border;var r=this._getConstrainRegion();
r&&(e=g[a]+g[c],b=r[b]-h(d[f("border",b,"width")]),e>=b&&(g[c]-=e-b),e=g[a],d=r[a]+h(d[f("border",a,"width")]),e<=d&&(g[a]+=d-e,g[c]-=d-e))},_checkHeight:function(){var a=this.get("host"),b=a.info,c=this.get("maxHeight")+a.totalVSurrounding,e=this.get("minHeight")+a.totalVSurrounding;this._checkConstrain("top","bottom","offsetHeight");b.offsetHeight>c&&a._checkSize("offsetHeight",c);b.offsetHeight<e&&a._checkSize("offsetHeight",e)},_checkRatio:function(){var b=this.get("host"),c=b.info,d=b.originalInfo,
g=d.offsetWidth,f=d.offsetHeight,t=d.top,r=d.left,u=d.bottom,d=d.right,s=b.changeHeightHandles,v,w;this.get("constrain")&&(b.changeHeightHandles&&b.changeWidthHandles)&&(v=this._getConstrainRegion(),s=this.constrainSurrounding.border,u=v.bottom-h(s.borderBottomWidth)-u,w=r-(v.left+h(s.borderLeftWidth)),d=v.right-h(s.borderRightWidth)-d,s=t-(v.top+h(s.borderTopWidth)),s=b.changeLeftHandles&&b.changeTopHandles?s<w:b.changeLeftHandles?u<w:b.changeTopHandles?s<d:u<d);s?(c.offsetWidth=g*(c.offsetHeight/
f),this._checkWidth(),c.offsetHeight=f*(c.offsetWidth/g)):(c.offsetHeight=f*(c.offsetWidth/g),this._checkHeight(),c.offsetWidth=g*(c.offsetHeight/f));b.changeTopHandles&&(c.top=t+(f-c.offsetHeight));b.changeLeftHandles&&(c.left=r+(g-c.offsetWidth));a.each(c,function(a,b){e(a)&&(c[b]=Math.round(a))})},_checkRegion:function(){var b=this.get("host"),c=this._getConstrainRegion();return a.DOM.inRegion(null,c,!0,b.info)},_checkWidth:function(){var a=this.get("host"),b=a.info,c=this.get("maxWidth")+a.totalHSurrounding,
e=this.get("minWidth")+a.totalHSurrounding;this._checkConstrain("left","right","offsetWidth");b.offsetWidth<e&&a._checkSize("offsetWidth",e);b.offsetWidth>c&&a._checkSize("offsetWidth",c)},_getConstrainRegion:function(){var b=this.get("host").get("node"),c=this.get("constrain"),e=null;c&&(e="view"===c?b.get("viewportRegion"):c instanceof a.Node?c.get("region"):c);return e},_handleResizeAlignEvent:function(){var a=this.get("host");this._checkHeight();this._checkWidth();this.get("preserveRatio")&&this._checkRatio();
this.get("constrain")&&!this._checkRegion()&&(a.info=a.lastInfo)},_handleResizeStartEvent:function(){var a=this.get("constrain");this.constrainSurrounding=this.get("host")._getBoxSurroundingInfo(a)}});a.namespace("Plugin");a.Plugin.ResizeConstrained=b},"3.17.2",{requires:["plugin","resize-base"]});
YUI.add("squarespace-timer-mixin",function(a){a.namespace("Squarespace");a.Squarespace.TimerMixin=a.Base.create("TimerMixin",a.Base,[],{_timer:function(a,b){this._timers||(this._timers={});b=b||"generic";this._timers[b]=this._timers[b]||[];this._timers[b].push(a);return a},destructor:function(){for(var a in this._timers)for(;0!==this._timers[a].length;)this._timers[a].shift().cancel()}})},"1.0",{requires:["base"]});
YUI.add("squarespace-dialog-stringset",function(a){var d=a.namespace("Squarespace.DialogFields").Stringset=a.Base.create("stringset-field",a.Squarespace.DialogField2,[a.WidgetParent,a.Squarespace.Mixins.StringSetUtils],{initializer:function(b){var c=this.get("mode"),e="input"===c,d=a.Lang.isValue(b.existingMembers),f=b.allowOnlyExistingMembers,h=a.Lang.isValue(b.requestUrl),e=e&&!d&&!f&&h;a.Lang.isValue(b.existingMembers)||this.set("existingMembers",[]);b.panel&&(this.panel=b.panel);!a.Lang.isNumber(b.maxMemberChars)&&
a.Lang.isNumber(parseInt(b.maxMemberChars,10))&&this.set("maxMemberChars",parseInt(b.maxMemberChars,10));e?this._requestMemberData(this._loadInputMembersSuccess):"select"===c&&(h||this.set("requestUrl","/api/commondata/GetCollectionCategories"),this._requestMemberData(this._loadSelectMembersSuccess));this.get("boundingBox").addClass(this.get("style"))},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("contentBox"),c=b.one(this._setFieldWrapper),e=this.get("style"),g=this.get("description"),
f=this.get("title")||"",h=a.Object.hasKey(this.PARTIALS,e)?e:"thin",f=a.Node.create(a.Lang.sub(this.PARTIALS[h],{title:f}));f.one(this._inputWrapperSelector).append(this.memberControl);a.Lang.isValue(g)&&(g=a.Node.create(a.Lang.sub(this.PARTIALS.descTemplate,{desc:g})),f.append(g));c.addClass(e);c.append(f);this.memberControl=b.one(this._memberContainerSelector);this.flyoutTarget=b.one(this._flyoutTargetSelector);this._renderSetMembers()},bindUI:function(){d.superclass.bindUI.call(this);this.get("contentBox").on("click",
this.handleWidgetClick,this);this.memberControl.on("mouseenter",this.recalcMeasurements,this);this.memberControl.on("mouseover",this.blurInactiveMember,this);this.memberControl.on("mouseout",this.resetViewportAnimation,this);this.memberControl.on("mousemove",this.mapViewportToMousePosition,this);this.on("activeMemberChange",this._animateActiveMember,this);this.on("dataChange",this.afterDataChange,this);this.on("removingMemberChange",this._tryAddPlaceholder,this)},syncUI:function(){d.superclass.syncUI.call(this);
this._updateMeasurements()},afterDataChange:function(b){var c=b.newVal,e=a.Lang.isArray(b.prevVal)?b.prevVal:[],d="_injectNewMemberList",f=[];a.Lang.isArray(b.newVal)&&c.length!==e.length&&(0===e.length&&this.memberControl.empty(),c.length<e.length&&(d="_ejectMemberList"),f=this.diffStringSets(c,e),this[d](f));this.flyout&&this.flyout.set("data",c)},handleWidgetClick:function(a){a.halt();a=a.target;var c=this.get("mode");if(a.hasClass("x"))(a=a.ancestor("."+this.get("memberClass")))&&this._destroyMember(a.getData("data"));
else if(!this._isFlyoutOpen()&&("input"===c||"select"===c))this.panel&&this.panel.setActiveFlyout({constraintClasses:".workflow-flyout",field:this}),this.showFlyout()},recalcMeasurements:function(b){a.Lang.isNumber(this.get("memberContainerWidth"))&&this._updateMeasurements()},blurInactiveMember:function(a){this._cancelTimers();if(!(a.target==this.get("activeMember")||a.target==this.get("removingMember"))&&a.target.hasClass("tag"))this._blurMember(),this.set("activeMember",a.target)},resetViewportAnimation:function(b){b=
b.target.hasClass("x");var c=!a.Lang.isNull(this._blurTimer);!b&&!c&&(this.snapBackTimer||(this.snapBackTimer=a.later(150,this,this._nudgeViewportTo,0)),this.blurTimer=a.later(50,this,this._blurMember))},mapViewportToMousePosition:function(a){var c=this.get("contentBox").one(this._inputWrapperSelector),e=c.get("offsetWidth");0<this._getViewportOverhang()&&(a=(a.clientX-c.getX())/e,this._nudgetViewportToPercent(a))},_updateData:function(b){var c=this.get("data"),e=b.newVal;b.type.indexOf("removeMember");
b=this.get("existingMembers");if(a.Lang.isString(e)||a.Lang.isArray(e))a.Lang.isString(e)&&(e=[e]),b=b.concat(e),this.set("existingMembers",a.Array.dedupe(b)),a.Array.each(e,function(a){this._hasTag(a)?c.splice(c.indexOf(a),1):c.push(a)},this),this.set("data",c)},_tryAddPlaceholder:function(b){a.Lang.isNull(b.newVal)&&0===this.get("data").length&&this._addPlaceholder()},showFlyout:function(){if(this.flyout)this.closeFlyout(a.bind(this.showFlyout,this));else{var b=this._getMemberEditorWidget();this._initFlyout(b,
{alignment:"tl",animateOpacity:!0});0===this.get("data").length&&this._addPlaceholder()}},closeFlyout:function(b,c){var e=this.flyoutPlugin,d=this.flyoutTarget,f=a.Lang.isValue(d)&&d.hasPlugin(e.NS);this.flyout&&(f&&(a.Lang.isValue(this.flyout)&&a.Lang.isFunction(this.flyout.hide)&&this.flyout.hide(),d[e.NS].on("hidden",this._cleanUpFlyout,this,b,c),d[e.NS].hide()),0===this.get("data").length&&this._addPlaceholder(!1))},_getMemberEditorWidget:function(){switch(this.get("mode")){case "input":return new a.Squarespace.DialogFields.InputEditor({allowOnlyExistingMembers:this.get("allowOnlyExistingMembers"),
autoCompleteIndex:-1,data:this.get("data"),editorLabel:this.get("editorLabel"),existingMembers:this.get("existingMembers"),memberClass:this.get("memberClass"),visible:!1});case "select":return new a.Squarespace.DialogFields.SelectEditor({addMemberText:this.get("addMemberText"),canAddMembers:this.get("canAddMembers"),collectionId:this.get("collectionId"),editorLabel:this.get("editorLabel"),data:this.get("data"),maxLength:this.get("maxMemberChars"),memberClass:this.get("memberClass"),options:this.get("existingMembers")});
default:console.warn("Unsupported mode.")}},_animate:function(b){if(!this.get("destroyed"))return b=new a.Anim(b),this._anims.add(b),b},_getViewportOverhang:function(){var a=this.get("contentBox").one(this._inputWrapperSelector).get("offsetWidth");return(this.get("memberContainerWidth")||0)-a},_nudgetViewportToPercent:function(a){var c=this._getViewportOverhang();if(0<c){if(0.04>a||0.96<a)a=Math.min(Math.round(a),1);this.get("contentBox").one(this._memberContainerSelector).setStyle("left",-1*c*a)}},
_nudgeViewportTo:function(b){var c=this._memberContainerSelector,c=this.get("contentBox").one(c);this.get("destroyed")||(this.snapBackAnim&&this.snapBackAnim.stop(),this.snapBackAnim=this._animate({node:c,duration:0.3,easing:a.Easing.easeOutStrong,to:{left:b}}),this.snapBackAnim.run(),this.snapBackTimer=null)},_blurMember:function(){var b,c;this.get("destroyed")||(b=this.get("activeMember"),a.Lang.isValue(b)&&(a.Object.hasKey(b,"anim")&&b.anim.stop(),(c=b.one(":last-child"))&&c.remove(),b.setStyle("paddingRight",
this.get("activeMemberPadding")+"px"),b.anim=this._animate({node:b,duration:0.25,easing:a.Easing.easeOutStrong,to:{paddingRight:this.get("defaultMemberPadding")}}),b.anim.run(),this.set("activeMember",null)))},_animateActiveMember:function(b){a.Lang.isNull(b.newVal)||(b=b.newVal,b.anim=this._animate({node:b,duration:0.25,easing:a.Easing.easeOutStrong,to:{paddingRight:this.get("activeMemberPadding")+"px"}}),b.anim.on("end",function(){var b=this.get("node"),e=a.Node.create('<span class="x">&times;</span>');
b.append(e);b.setStyle("paddingRight","2px")}),b.anim.run())},_cancelTimers:function(){this.blurTimer&&(this.blurTimer.cancel(),this.blurTimer=null);this.snapBackTimer&&(this.snapBackTimer.cancel(),this.snapBackTimer=null)},_updateMeasurements:function(b){var c=this.get("contentBox");a.Lang.isNumber(b)||(b=0);0<this.get("data").length&&(b=c.one(this._memberContainerSelector).get("offsetWidth")+b+this.get("defaultMemberPadding"),this.set("memberContainerWidth",b))},_renderSetMembers:function(){var b=
this.get("data");this.memberControl.empty();a.Lang.isArray(b)&&0<b.length?a.Array.each(b,function(a,b){this.memberControl.append(this._createMemberNode(a))},this):this._addPlaceholder()},_addPlaceholder:function(b){a.Lang.isUndefined(b)&&(b=this._isFlyoutOpen());a.Lang.isValue(this.memberControl)||(this.memberControl=this.get("contentBox").one(this._memberContainerSelector));this.memberControl.empty();b=a.Lang.sub('<div class="text dialog-element">{label}</div>',{label:b?this.get("emptyText"):'<div class="add-header">'+
this.get("addText")+"</div>"});this.memberControl.append(b)},_initFlyout:function(b,c){var e=this.flyoutPlugin,d=this.get("contentBox").one(this._flyoutTargetSelector);if(!a.Lang.isObject(b))throw"Flyout widget is missing.";this.flyout=this.add(b).item(0);d.hasPlugin(e.NS)&&d.unplug(e.NS);c=a.merge(c,{host:this,node:this.flyout.get("flyoutNode")});d.plug(e,{duration:0.2});d[e.NS].setAttrs(c);d[e.NS].show();this.flyout.after(["addMember","removeMember"],this._updateData,this)},_cleanUpFlyout:function(b,
c,e){var d=this.flyoutPlugin,f=this.get("contentBox").one(this._flyoutTargetSelector);this.removeAll();this.flyout.destroy(!0);this.flyout=null;f.unplug(d.NS);a.Lang.isFunction(c)&&c.apply(e||this,arguments)},_createMemberNode:function(b){var c;c=a.Node.create('<div class="tag"></div>');c.set("text",b);c.addClass(this.get("memberClass"));c.setData("data",b);return c},_destroyMember:function(a){var c=[];this.get("contentBox").all("."+this.get("memberClass")).each(function(e){e=e.getData("data");e!==
a&&c.push(e)});this.set("data",c)},_injectNewMember:function(b){var c=0,e=0,d=0;b=this._createMemberNode(b);b.setStyle("opacity",0);this.memberControl.append(b);c=b.get("offsetWidth");d=b.getStyle("paddingLeft");e=b.getStyle("paddingRight");b.setStyles({width:0,paddingLeft:0,opacity:1});var f={node:b,duration:0.25,easing:a.Easing.easeOutStrong},f=a.merge(f,{to:{width:c-20,paddingRight:e,paddingLeft:d}});b.anim=this._animate(f);b.anim.on("end",function(){this.get("node").setStyle("width","")});b.anim.run()},
_injectNewMemberList:function(b){a.Array.each(b,function(a,b){this._injectNewMember(a)},this)},_ejectMember:function(b){var c=[],e;this.get("contentBox").all(".tag."+this.get("memberClass")).each(function(a,e){a.getData("data")===b&&c.push(a)});c.length&&(e=c[0],e==this.get("activeMember")&&(this.set("activeMember",null),this.set("removingMember",e)),a.Object.hasKey(e,"anim")&&e.anim.stop(),e.anim=this._animate({node:e,duration:0.22,easing:a.Easing.easeOutStrong,to:{width:0,paddingRight:0,paddingLeft:0,
marginRight:0}}),e.anim.on("end",a.bind(function(a){e.anim.get("node").remove(!0);this.set("removingMember",null)},this)),e.anim.run())},_ejectMemberList:function(b){a.Array.each(b,function(a){this._ejectMember(a)},this)},_isFlyoutOpen:function(){var b=this.flyoutPlugin,c=this.flyoutTarget;return a.Lang.isValue(c)?!!c.hasPlugin(b.NS):!1},_hasTag:function(b,c){a.Lang.isUndefined(c)&&(c=this.get("data"));return a.Lang.isArray(c)?this.memberInSet(c,b):!1},_loadInputMembersSuccess:function(a){this.set("existingMembers",
a)},_loadSelectMembersSuccess:function(b){var c=[];a.Object.each(b,function(a,b){c.push(a.name)},this);this.set("existingMembers",c)},_requestMemberData:function(b){var c={collectionId:this.get("collectionId")},e=this.get("requestUrl");a.Data.get({url:e,data:c,success:a.bind(b,this)},this)},_memberContainerSelector:".tag-field-container",_flyoutTargetSelector:".field-input-wrapper",_setFieldWrapper:".tag-field-wrapper",_inputWrapperSelector:".field-input-wrapper",_snapBackTimer:null,_blurTimer:null,
flyoutPlugin:a.Squarespace.Animations.Flyout,PARTIALS:{thin:'<div class="field-lhs title">{title}</div><div class="field-rhs"><div class="field-input-wrapper"><div class="tag-field clear"><div class="tag-field-container"></div></div></div></div>',minor:'<div class="field-rhs"><div class="field-lhs title">{title}</div><div class="field-input-wrapper"><div class="tag-field clear"><div class="tag-field-container"></div></div></div></div>',descTemplate:'<div class="field-description-wrapper"><div class="field-description">{desc}</div></div>'}},
{CSS_PREFIX:"sqs-stringset",TEMPLATE:'<div class="field-wrapper tag-field-wrapper clear"></div>',ATTRS:{activeMember:{},addText:{value:"Click to add tags."},addMemberText:{value:"Create tag"},activeMemberPadding:{value:18},allowOnlyExistingMembers:{value:!1},canAddMembers:{value:!1},collectionId:{},data:{value:[],setter:function(b){return a.Lang.isArray(b)?b:[]},getter:function(a){return a.concat([])}},defaultMemberPadding:{value:6},description:{},editorLabel:{},emptyText:{},existingMembers:{value:[],
validator:a.Lang.isArray},memberClass:{value:"tag"},mode:{value:"input",validator:function(a){return-1!==["input","select"].indexOf(a)}},maxMemberChars:{value:null},removingMember:{},requestUrl:{},style:{value:"thin",validator:a.Lang.isString,getter:function(a){return a.toLowerCase()}},memberContainerWidth:{},title:{},visible:{value:!0}}})},"1.0.0",{requires:"base squarespace-dialog-field-2 squarespace-dialog-stringset-input-editor squarespace-dialog-stringset-select-editor squarespace-node-flyout squarespace-stringset-utils-mixin".split(" ")});
YUI.add("squarespace-dialog-slider-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-slider.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};a="";var k,l=this.escapeExpression;if((f=d["if"].call(b,(k=b.strings,null==k||!1===k?k:k.title),{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;return c=""+('\n<div class="title">'+l((e=(e=a.strings,null==e||!1===e?e:e.title),"function"===
typeof e?e.apply(a):e))+"</div>\n")},h),data:h}))||0===f)a+=f;a+='\n<div class="slider">\n  <div class="numeric-display" ';if((f=d["if"].call(b,b.labelWidth,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,e;c='style="width: ';(e=d.labelWidth)?e=e.call(a,{hash:{},data:b}):(e=a.labelWidth,e="function"===typeof e?e.apply(a):e);return c+=l(e)+"px"},h),data:h}))||0===f)a+=f;a+='"></div>\n  <div class="slider-container" ';if((f=d["if"].call(b,b.labelWidth,{hash:{},inverse:this.noop,fn:this.program(5,
function(a,b){var c,e;c='style="margin-left: ';(e=d.labelWidth)?e=e.call(a,{hash:{},data:b}):(e=a.labelWidth,e="function"===typeof e?e.apply(a):e);return c+=l(e)+"px"},h),data:h}))||0===f)a+=f;return a+='"></div>\n</div>\n<div class="description">'+l((k=(k=b.strings,null==k||!1===k?k:k.description),"function"===typeof k?k.apply(b):k))+"</div>\n"})})();a.Handlebars.registerPartial("dialog-slider.html".replace("/","."),d.templates["dialog-slider.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("handlebars-compiler",function(a,d){var b=a.Handlebars,c=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,params:27,hash:28,dataName:29,param:30,STRING:31,
INTEGER:32,BOOLEAN:33,hashSegments:34,hashSegment:35,ID:36,EQUALS:37,DATA:38,pathSegments:39,SEP:40,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",31:"STRING",32:"INTEGER",33:"BOOLEAN",36:"ID",37:"EQUALS",38:"DATA",40:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,
3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[27,2],[27,1],[30,1],[30,1],[30,1],[30,1],[30,1],[28,1],[34,2],[34,1],[35,3],[35,3],[35,3],[35,3],[35,3],[26,1],[26,1],[26,1],[29,2],[21,1],[39,3],[39,1]],performAction:function(a,b,c,e,d,g,f){a=g.length-1;switch(d){case 1:return g[a-1];case 2:this.$=new e.ProgramNode([],g[a]);break;case 3:this.$=new e.ProgramNode(g[a-2],g[a]);break;case 4:this.$=new e.ProgramNode(g[a-1],[]);break;case 5:this.$=new e.ProgramNode(g[a]);
break;case 6:this.$=new e.ProgramNode([],[]);break;case 7:this.$=new e.ProgramNode([]);break;case 8:this.$=[g[a]];break;case 9:g[a-1].push(g[a]);this.$=g[a-1];break;case 10:this.$=new e.BlockNode(g[a-2],g[a-1].inverse,g[a-1],g[a]);break;case 11:this.$=new e.BlockNode(g[a-2],g[a-1],g[a-1].inverse,g[a]);break;case 12:this.$=g[a];break;case 13:this.$=g[a];break;case 14:this.$=new e.ContentNode(g[a]);break;case 15:this.$=new e.CommentNode(g[a]);break;case 16:this.$=new e.MustacheNode(g[a-1][0],g[a-1][1]);
break;case 17:this.$=new e.MustacheNode(g[a-1][0],g[a-1][1]);break;case 18:this.$=g[a-1];break;case 19:this.$=new e.MustacheNode(g[a-1][0],g[a-1][1],"&"===g[a-2][2]);break;case 20:this.$=new e.MustacheNode(g[a-1][0],g[a-1][1],!0);break;case 21:this.$=new e.PartialNode(g[a-1]);break;case 22:this.$=new e.PartialNode(g[a-2],g[a-1]);break;case 24:this.$=[[g[a-2]].concat(g[a-1]),g[a]];break;case 25:this.$=[[g[a-1]].concat(g[a]),null];break;case 26:this.$=[[g[a-1]],g[a]];break;case 27:this.$=[[g[a]],null];
break;case 28:this.$=[[g[a]],null];break;case 29:g[a-1].push(g[a]);this.$=g[a-1];break;case 30:this.$=[g[a]];break;case 31:this.$=g[a];break;case 32:this.$=new e.StringNode(g[a]);break;case 33:this.$=new e.IntegerNode(g[a]);break;case 34:this.$=new e.BooleanNode(g[a]);break;case 35:this.$=g[a];break;case 36:this.$=new e.HashNode(g[a]);break;case 37:g[a-1].push(g[a]);this.$=g[a-1];break;case 38:this.$=[g[a]];break;case 39:this.$=[g[a-2],g[a]];break;case 40:this.$=[g[a-2],new e.StringNode(g[a])];break;
case 41:this.$=[g[a-2],new e.IntegerNode(g[a])];break;case 42:this.$=[g[a-2],new e.BooleanNode(g[a])];break;case 43:this.$=[g[a-2],g[a]];break;case 44:this.$=new e.PartialNameNode(g[a]);break;case 45:this.$=new e.PartialNameNode(new e.StringNode(g[a]));break;case 46:this.$=new e.PartialNameNode(new e.IntegerNode(g[a]));break;case 47:this.$=new e.DataNode(g[a]);break;case 48:this.$=new e.IdNode(g[a]);break;case 49:g[a-2].push({part:g[a],separator:g[a-1]});this.$=g[a-2];break;case 50:this.$=[{part:g[a]}]}},
table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],25:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],25:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],25:[1,16]},{17:23,18:[1,22],21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,
8],25:[2,8]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{4:30,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],25:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,
14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:31,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:32,21:24,29:25,36:[1,28],38:[1,27],39:26},{17:33,21:24,29:25,36:[1,28],38:[1,27],39:26},{21:35,26:34,31:[1,36],32:[1,37],36:[1,28],39:26},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],25:[1,16]},{17:23,21:24,29:25,36:[1,28],38:[1,27],39:26},{5:[2,4],7:38,8:6,9:7,11:8,12:9,13:10,
14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],25:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{18:[1,39]},{18:[2,27],21:44,24:[2,27],27:40,28:41,29:48,30:42,31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,28],24:[2,28]},{18:[2,48],24:[2,48],31:[2,48],32:[2,48],33:[2,48],36:[2,48],38:[2,48],40:[1,51]},{21:52,36:[1,
28],39:26},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],38:[2,50],40:[2,50]},{10:53,20:[1,54]},{10:55,20:[1,54]},{18:[1,56]},{18:[1,57]},{24:[1,58]},{18:[1,59],21:60,36:[1,28],39:26},{18:[2,44],36:[2,44]},{18:[2,45],36:[2,45]},{18:[2,46],36:[2,46]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],25:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,25],21:44,24:[2,25],28:61,29:48,30:62,
31:[1,45],32:[1,46],33:[1,47],34:43,35:49,36:[1,50],38:[1,27],39:26},{18:[2,26],24:[2,26]},{18:[2,30],24:[2,30],31:[2,30],32:[2,30],33:[2,30],36:[2,30],38:[2,30]},{18:[2,36],24:[2,36],35:63,36:[1,64]},{18:[2,31],24:[2,31],31:[2,31],32:[2,31],33:[2,31],36:[2,31],38:[2,31]},{18:[2,32],24:[2,32],31:[2,32],32:[2,32],33:[2,32],36:[2,32],38:[2,32]},{18:[2,33],24:[2,33],31:[2,33],32:[2,33],33:[2,33],36:[2,33],38:[2,33]},{18:[2,34],24:[2,34],31:[2,34],32:[2,34],33:[2,34],36:[2,34],38:[2,34]},{18:[2,35],24:[2,
35],31:[2,35],32:[2,35],33:[2,35],36:[2,35],38:[2,35]},{18:[2,38],24:[2,38],36:[2,38]},{18:[2,50],24:[2,50],31:[2,50],32:[2,50],33:[2,50],36:[2,50],37:[1,65],38:[2,50],40:[2,50]},{36:[1,66]},{18:[2,47],24:[2,47],31:[2,47],32:[2,47],33:[2,47],36:[2,47],38:[2,47]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:67,36:[1,28],39:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,
16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,68]},{18:[2,24],24:[2,24]},{18:[2,29],24:[2,29],31:[2,29],32:[2,29],33:[2,29],36:[2,29],38:[2,29]},{18:[2,37],24:[2,37],36:[2,37]},{37:[1,65]},{21:69,29:73,31:[1,70],32:[1,71],
33:[1,72],36:[1,28],38:[1,27],39:26},{18:[2,49],24:[2,49],31:[2,49],32:[2,49],33:[2,49],36:[2,49],38:[2,49],40:[2,49]},{18:[1,74]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{18:[2,39],24:[2,39],36:[2,39]},{18:[2,40],24:[2,40],36:[2,40]},{18:[2,41],24:[2,41],36:[2,41]},{18:[2,42],24:[2,42],36:[2,42]},{18:[2,43],24:[2,43],36:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]}],defaultActions:{17:[2,1]},parseError:function(a,
b){throw Error(a);},parse:function(a){var b=[0],c=[null],e=[],d=this.table,g="",f=0,h=0,k=0;this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});a=this.lexer.yylloc;e.push(a);var l=this.lexer.options&&this.lexer.options.ranges;"function"===typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,p,q,I,A={},H,x;;){q=b[b.length-1];if(this.defaultActions[q])I=this.defaultActions[q];else{if(null===
n||"undefined"==typeof n)n=void 0,n=this.lexer.lex()||1,"number"!==typeof n&&(n=this.symbols_[n]||n);I=d[q]&&d[q][n]}if("undefined"===typeof I||!I.length||!I[0]){var P="";if(!k){x=[];for(H in d[q])this.terminals_[H]&&2<H&&x.push("'"+this.terminals_[H]+"'");P=this.lexer.showPosition?"Parse error on line "+(f+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(f+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||
n)+"'");this.parseError(P,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:a,expected:x})}}if(I[0]instanceof Array&&1<I.length)throw Error("Parse Error: multiple actions possible at state: "+q+", token: "+n);switch(I[0]){case 1:b.push(n);c.push(this.lexer.yytext);e.push(this.lexer.yylloc);b.push(I[1]);n=null;p?(n=p,p=null):(h=this.lexer.yyleng,g=this.lexer.yytext,f=this.lexer.yylineno,a=this.lexer.yylloc,0<k&&k--);break;case 2:x=this.productions_[I[1]][1];A.$=c[c.length-
x];A._$={first_line:e[e.length-(x||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(x||1)].first_column,last_column:e[e.length-1].last_column};l&&(A._$.range=[e[e.length-(x||1)].range[0],e[e.length-1].range[1]]);q=this.performAction.call(A,g,h,f,this.yy,I[1],c,e);if("undefined"!==typeof q)return q;x&&(b=b.slice(0,-2*x),c=c.slice(0,-1*x),e=e.slice(0,-1*x));b.push(this.productions_[I[1]][0]);c.push(A.$);e.push(A._$);I=d[b[b.length-2]][b[b.length-1]];b.push(I);break;case 3:return!0}}return!0}},
c=function(){return{EOF:1,parseError:function(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._less=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;
this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b-1);this.offset-=b;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-
1);c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===a.length?this.yylloc.first_column:0)+a[a.length-c.length].length-c[0].length:this.yylloc.first_column-b};this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]);return this},more:function(){this._more=!0;return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=
this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;20>a.length&&(a+=this._input.substr(0,20-a.length));return(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c;this._more||(this.match=
this.yytext="");for(var e=this._currentRules(),d=0;d<e.length;d++)if((b=this._input.match(this.rules[e[d]]))&&(!a||b[0].length>a[0].length))if(a=b,c=d,!this.options.flex)break;if(a){if(b=a[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=b.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=
a;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,this.yy,this,e[c],this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(a)return a}else return""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,
line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!==typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},options:{},performAction:function(a,b,c,e){switch(c){case 0:return b.yytext="\\",
14;case 1:"\\"!==b.yytext.slice(-1)&&this.begin("mu");"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1),this.begin("emu"));if(b.yytext)return 14;break;case 2:return 14;case 3:return"\\"!==b.yytext.slice(-1)&&this.popState(),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1)),14;case 4:return b.yytext=b.yytext.substr(0,b.yyleng-4),this.popState(),15;case 5:return 25;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 22;
case 12:this.popState();this.begin("com");break;case 13:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 37;case 16:return 36;case 17:return 36;case 18:return 40;case 20:return this.popState(),24;case 21:return this.popState(),18;case 22:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),31;case 23:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\'/g,"'"),31;case 24:return 38;case 25:return 33;case 26:return 33;case 27:return 32;
case 28:return 36;case 29:return b.yytext=b.yytext.substr(1,b.yyleng-2),36;case 30:return"INVALID";case 31:return 5}},rules:[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}\/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,
/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},INITIAL:{rules:[0,1,2,31],inclusive:!0}}}}();b.lexer=c;a.prototype=b;b.Parser=a;return new a}();b.Parser=c;b.parse=function(a){if(a.constructor===
b.AST.ProgramNode)return a;b.Parser.yy=b.AST;return b.Parser.parse(a)};b.AST={};b.AST.ProgramNode=function(a,c){this.type="program";this.statements=a;c&&(this.inverse=new b.AST.ProgramNode(c))};b.AST.MustacheNode=function(a,b,c){this.type="mustache";this.escaped=!c;this.hash=b;c=this.id=a[0];a=this.params=a.slice(1);this.isHelper=(this.eligibleHelper=c.isSimple)&&(a.length||b)};b.AST.PartialNode=function(a,b){this.type="partial";this.partialName=a;this.context=b};b.AST.BlockNode=function(a,c,e,d){var g=
a.id;if(g.original!==d.original)throw new b.Exception(g.original+" doesn't match "+d.original);this.type="block";this.mustache=a;this.program=c;if((this.inverse=e)&&!this.program)this.isInverse=!0};b.AST.ContentNode=function(a){this.type="content";this.string=a};b.AST.HashNode=function(a){this.type="hash";this.pairs=a};b.AST.IdNode=function(a){this.type="ID";for(var c="",e=[],d=0,g=0,f=a.length;g<f;g++){var h=a[g].part,c=c+((a[g].separator||"")+h);if(".."===h||"."===h||"this"===h){if(0<e.length)throw new b.Exception("Invalid path: "+
c);".."===h?d++:this.isScoped=!0}else e.push(h)}this.original=c;this.parts=e;this.string=e.join(".");this.depth=d;this.isSimple=1===a.length&&!this.isScoped&&0===d;this.stringModeValue=this.string};b.AST.PartialNameNode=function(a){this.type="PARTIAL_NAME";this.name=a.original};b.AST.DataNode=function(a){this.type="DATA";this.id=a};b.AST.StringNode=function(a){this.type="STRING";this.original=this.string=this.stringModeValue=a};b.AST.IntegerNode=function(a){this.type="INTEGER";this.original=this.integer=
a;this.stringModeValue=Number(a)};b.AST.BooleanNode=function(a){this.type="BOOLEAN";this.bool=a;this.stringModeValue="true"===a};b.AST.CommentNode=function(a){this.type="comment";this.comment=a};var e=b.Compiler=function(){},g=b.JavaScriptCompiler=function(){};e.prototype={compiler:e,disassemble:function(){for(var a=this.opcodes,b,c=[],e,d,g=0,f=a.length;g<f;g++)if(b=a[g],"DECLARE"===b.opcode)c.push("DECLARE "+b.name+"="+b.value);else{e=[];for(var h=0;h<b.args.length;h++)d=b.args[h],"string"===typeof d&&
(d='"'+d.replace("\n","\\n")+'"'),e.push(d);c.push(b.opcode+" "+e.join(" "))}return c.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var e=this.opcodes[c],d=a.opcodes[c];if(e.opcode!==d.opcode||e.args.length!==d.args.length)return!1;for(var g=0;g<e.args.length;g++)if(e.args[g]!==d.args[g])return!1}b=this.children.length;if(a.children.length!==b)return!1;for(c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,
compile:function(a,b){this.children=[];this.depths={list:[]};this.options=b;var c=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(c)for(var e in c)this.options.knownHelpers[e]=c[e];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){a=a.statements;var b;this.opcodes=[];for(var c=0,e=a.length;c<e;c++)b=a[c],this[b.type](b);this.isSimple=1===e;this.depths.list=this.depths.list.sort(function(a,
b){return a-b});return this},compileProgram:function(a){a=(new this.compiler).compile(a,this.options);var b=this.guid++,c;this.usePartial=this.usePartial||a.usePartial;this.children[b]=a;for(var e=0,d=a.depths.list.length;e<d;e++)c=a.depths.list[e],2>c||this.addDepth(c-1);return b},block:function(a){var b=a.mustache,c=a.program;a=a.inverse;c&&(c=this.compileProgram(c));a&&(a=this.compileProgram(a));var e=this.classifyMustache(b);"helper"===e?this.helperMustache(b,c,a):"simple"===e?(this.simpleMustache(b),
this.opcode("pushProgram",c),this.opcode("pushProgram",a),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(b,c,a),this.opcode("pushProgram",c),this.opcode("pushProgram",a),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(a){a=a.pairs;var b,c;this.opcode("pushHash");for(var e=0,d=a.length;e<d;e++)b=a[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",
c.stringModeValue,c.type)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0;a.context?this.ID(a.context):this.opcode("push","depth0");this.opcode("invokePartial",b.name);this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){var b=this.options,c=this.classifyMustache(a);"simple"===c?this.simpleMustache(a):"helper"===c?this.helperMustache(a):this.ambiguousMustache(a);a.escaped&&
!b.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(a,b,c){a=a.id;var e=a.parts[0],d=null!=b||null!=c;this.opcode("getContext",a.depth);this.opcode("pushProgram",b);this.opcode("pushProgram",c);this.opcode("invokeAmbiguous",e,d)},simpleMustache:function(a){a=a.id;"DATA"===a.type?this.DATA(a):a.parts.length?this.ID(a):(this.addDepth(a.depth),this.opcode("getContext",a.depth),this.opcode("pushContext"));this.opcode("resolvePossibleLambda")},helperMustache:function(a,
b,c){b=this.setupFullMustacheParams(a,b,c);a=a.id.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",b.length,a);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+a);this.opcode("invokeHelper",b.length,a)}},ID:function(a){this.addDepth(a.depth);this.opcode("getContext",a.depth);a.parts[0]?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var b=1,c=a.parts.length;b<c;b++)this.opcode("lookup",
a.parts[b])},DATA:function(a){this.options.data=!0;if(a.id.isScoped||a.id.depth)throw new b.Exception("Scoped data references are not supported: "+a.original);this.opcode("lookupData");a=a.id.parts;for(var c=0,e=a.length;c<e;c++)this.opcode("lookup",a[c])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,
1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){if(isNaN(a))throw Error("EWOT");0!==a&&!this.depths[a]&&(this.depths[a]=!0,this.depths.list.push(a))},classifyMustache:function(a){var b=a.isHelper,c=a.eligibleHelper,e=this.options;c&&!b&&(e.knownHelpers[a.id.parts[0]]?b=!0:e.knownHelpersOnly&&(c=!1));return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b=a.length,c;b--;)if(c=a[b],this.options.stringParams)c.depth&&this.addDepth(c.depth),
this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type);else this[c.type](c)},setupMustacheParams:function(a){var b=a.params;this.pushParams(b);a.hash?this.hash(a.hash):this.opcode("emptyHash");return b},setupFullMustacheParams:function(a,b,c){var e=a.params;this.pushParams(e);this.opcode("pushProgram",b);this.opcode("pushProgram",c);a.hash?this.hash(a.hash):this.opcode("emptyHash");return e}};var f=function(a){this.value=a};g.prototype={nameLookup:function(a,
b){return/^[0-9]+$/.test(b)?a+"["+b+"]":g.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,c,e,d){this.environment=a;this.options=c||{};b.log(b.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=
!!e;this.context=e||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(a,c);a=a.opcodes;this.i=0;for(l=a.length;this.i<l;this.i++)c=a[this.i],"DECLARE"===c.opcode?this[c.name]=c.value:this[c.opcode].apply(this,c.args);return this.createFunctionContext(d)},nextOpcode:function(){return this.environment.opcodes[this.i+1]},eat:function(){this.i+=1},preamble:function(){var a=
[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);");this.options.data&&(c+=" data = data || {};");a.push(c)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=a},createFunctionContext:function(a){var c=this.stackVars.concat(this.registers.list);0<c.length&&(this.source[1]=this.source[1]+", "+c.join(", "));
if(!this.isChild)for(var e in this.context.aliases)this.context.aliases.hasOwnProperty(e)&&(this.source[1]=this.source[1]+", "+e+"="+this.context.aliases[e]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";");this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n");this.environment.isSimple||this.source.push("return buffer;");c=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];e=0;for(var d=this.environment.depths.list.length;e<
d;e++)c.push("depth"+this.environment.depths.list[e]);e=this.mergeSource();this.isChild||(d=b.COMPILER_REVISION,e="this.compilerInfo = ["+d+",'"+b.REVISION_CHANGES[d]+"'];\n"+e);if(a)return c.push(e),Function.apply(this,c);a="function "+(this.name||"")+"("+c.join(",")+") {\n  "+e+"}";b.log(b.logger.DEBUG,a+"\n\n");return a},mergeSource:function(){for(var a="",b,c=0,e=this.source.length;c<e;c++){var d=this.source[c];d.appendToBuffer?b=b?b+"\n    + "+d.content:d.content:(b&&(a+="buffer += "+b+";\n  ",
b=void 0),a+=d+"\n  ")}return a},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);this.replaceStack(function(b){a.splice(1,0,b);return"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b);a[a.length-1]="options";this.source.push("if (!"+this.lastHelper+
") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){this.flushInline();var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }");this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.source.push(this.appendToBuffer("escapeExpression("+
this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+
b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(a){this.push("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext);this.pushString(b);"string"===typeof a?this.pushString(a):this.pushStackLiteral(a)},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;
this.hash=void 0;this.options.stringParams&&(this.register("hashContexts","{"+a.contexts.join(",")+"}"),this.register("hashTypes","{"+a.types.join(",")+"}"));this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){this.inlineStack.push(a);return a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,
b){this.context.aliases.helperMissing="helpers.helperMissing";var c=this.lastHelper=this.setupHelper(a,b,!0),e=this.nameLookup("depth"+this.lastContext,b,"context");this.push(c.name+" || "+e);this.replaceStack(function(a){return a+" ? "+a+".call("+c.callParams+") : helperMissing.call("+c.helperMissingParams+")"})},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");
var c=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),d=this.nameLookup("depth"+this.lastContext,a,"context"),g=this.nextStack();this.source.push("if ("+g+" = "+e+") { "+g+" = "+g+".call("+c.callParams+"); }");this.source.push("else { "+g+" = "+d+"; "+g+" = typeof "+g+" === functionType ? "+g+".apply(depth0) : "+g+"; }")},invokePartial:function(a){a=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&a.push("data");
this.context.aliases.self="this";this.push("self.invokePartial("+a.join(", ")+")")},assignToHash:function(a){var b=this.popStack(),c,e;this.options.stringParams&&(e=this.popStack(),c=this.popStack());var d=this.hash;c&&d.contexts.push("'"+a+"': "+c);e&&d.types.push("'"+a+"': "+e);d.values.push("'"+a+"': ("+b+")")},compiler:g,compileChildren:function(a,b){for(var c=a.children,e,d,g=0,f=c.length;g<f;g++){e=c[g];d=new this.compiler;var h=this.matchExistingProgram(e);null==h?(this.context.programs.push(""),
h=this.context.programs.length,e.index=h,e.name="program"+h,this.context.programs[h]=d.compile(e,b,this.context),this.context.environments[h]=e):(e.index=h,e.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var e=this.context.environments[b];if(e&&e.equals(a))return b}},programExpression:function(a){this.context.aliases.self="this";if(null==a)return"self.noop";var b=this.environment.children[a];a=b.depths.list;for(var c=[b.index,b.name,"data"],
e=0,d=a.length;e<d;e++)b=a[e],1===b?c.push("depth0"):c.push("depth"+(b-1));return(0===a.length?"self.program(":"self.programWithDepth(")+c.join(", ")+")"},register:function(a,b){this.useRegister(a);this.source.push(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new f(a))},pushStack:function(a){this.flushInline();var b=this.incrStack();a&&this.source.push(b+" = "+a+";");this.compileStack.push(b);
return b},replaceStack:function(a){var b="",c=this.isInline(),e;c?(e=this.popStack(!0),e instanceof f?e=e.value:(b=this.stackSlot?this.topStackName():this.incrStack(),b="("+this.push(b)+" = "+e+"),",e=this.topStack())):e=this.topStack();a=a.call(this,e);c?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+b+a+")")):(/^stack/.test(e)||(e=this.nextStack()),this.source.push(e+" = ("+b+a+");"));return e},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;
this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var e=a[b];e instanceof f?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof
f)return c.value;b||this.stackSlot--;return c},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,b=b[b.length-1];return!a&&b instanceof f?b.value:b},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var e=[];this.setupParams(a,e,c);a=this.nameLookup("helpers",b,"helper");return{params:e,name:a,callParams:["depth0"].concat(e).join(", "),
helperMissingParams:c&&["depth0",this.quotedString(b)].concat(e).join(", ")}},setupParams:function(a,b,c){var e=[],d=[],g=[],f,h;e.push("hash:"+this.popStack());f=this.popStack();if((h=this.popStack())||f)h||(this.context.aliases.self="this",h="self.noop"),f||(this.context.aliases.self="this",f="self.noop"),e.push("inverse:"+f),e.push("fn:"+h);for(h=0;h<a;h++)f=this.popStack(),b.push(f),this.options.stringParams&&(g.push(this.popStack()),d.push(this.popStack()));this.options.stringParams&&(e.push("contexts:["+
d.join(",")+"]"),e.push("types:["+g.join(",")+"]"),e.push("hashContexts:hashContexts"),e.push("hashTypes:hashTypes"));this.options.data&&e.push("data:data");e="{"+e.join(",")+"}";c?(this.register("options",e),b.push("options")):b.push(e);return b.join(", ")}};for(var c="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),
h=g.RESERVED_WORDS={},k=0,l=c.length;k<l;k++)h[c[k]]=!0;g.isValidJavaScriptVariableName=function(a){return!g.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1};b.precompile=function(a,c){if(null==a||"string"!==typeof a&&a.constructor!==b.AST.ProgramNode)throw new b.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);c=c||{};"data"in c||(c.data=!0);var d=b.parse(a),d=(new e).compile(d,c);return(new g).compile(d,c)};b.compile=function(a,c){if(null==
a||"string"!==typeof a&&a.constructor!==b.AST.ProgramNode)throw new b.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);c=c||{};"data"in c||(c.data=!0);var d;return function(f,h){if(!d){var k=b.parse(a),k=(new e).compile(k,c),k=(new g).compile(k,c,void 0,!0);d=b.template(k)}return d.call(this,f,h)}};b.logger.log=function(a,b){};b.render=function(a,c,e){return b.compile(a)(c,e)}},"3.17.2",{requires:["handlebars-base"]});
YUI.add("squarespace-dialog-html",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.HTML=a.Base.create("html",a.Squarespace.DialogField2,[],{bindUI:function(){d.superclass.bindUI.call(this);this._registerEvent(this.after("contentChange",this.syncUI,this))},syncUI:function(){d.superclass.syncUI.call(this);this.get("contentBox").setHTML(this.get("content"))},focus:null,blur:null,enable:null,disable:null},{CSS_PREFIX:"sqs-html",ATTRS:{content:{value:""},focusable:{value:!1}}})},
"1.0",{requires:["base","squarespace-dialog-field-2"]});
YUI.add("squarespace-content-item-types-gallery",function(a){a.namespace("Squarespace.ContentItemEditor").Gallery=a.Base.create("GalleryContentItemEditor",a.Squarespace.ContentItemEditor.Base,[],{},{ATTRS:{editorConfiguration:{value:{title:"Edit {presentationName}",width:800,height:450,overlay:0.5,initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.gallery"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}})},
"1.0",{requires:["squarespace-content-item-types-base"]});
YUI.add("squarespace-member-permission-utils",function(a){a.namespace("Squarespace");a.Squarespace.MemberPermissionUtils={createReplaceAndRemoveDialog:function(d,b,c){var e=b.get("pseudonymAccount"),g=e?"author":"contributor",f=b.get("email"),f=e?"":f?f:" - ",h=new a.Squarespace.MemberSelectDialog({title:"Remove "+g.capitalize(),description:a.Lang.sub("<strong>{displayName} {email}</strong> may be listed as the author of content on your site. To remove this author, please select an author to re-assign ownership to.",{displayName:a.Escape.html(b.get("displayName")),
email:f}),saveButtonText:"Replace and Remove",icon:"/universal/images-v6/icons/icon-trash-12-light.png",selectPlaceholder:"New Author",confirmationText:{title:"Remove "+g.capitalize(),body:"Are you sure you wish to remove this "+g+" and re-assign all authored entries to someone else? This cannot be undone."},showConfirmation:!0,filter:function(b){return b.get("id")===d.get("id")||a.Object.isEmpty(b.get("permissions"))?!1:!0}});h.on("member-chosen",function(f){f=f.memberAccount.get("id");b.replaceAuthor(f,
function(f){if(f)new a.Squarespace.Widgets.Alert({"strings.title":"Error Replacing Authors","strings.message":"We were unable to replace authors."}),h.allowEditing();else{var k=function(){delete Static.SQUARESPACE_CONTEXT.memberAccountNames[b.get("id")];h.close();c.destroy()};e?b.destroy({remove:!0},function(){d.destroy({remove:!0},function(){new a.Squarespace.Widgets.Information({"strings.title":g.capitalize()+" Removed","strings.message":"The specified "+g+"has been removed."});k()})}):d.destroy({remove:!0},
function(){(new a.Squarespace.Information({position:"top-right"})).show(g.capitalize()+" Removed","The specified "+g+"has been removed.");k()})}})});h.show()}}},"1.0",{requires:"base squarespace-member-select-dialog squarespace-models-website-settings squarespace-ui-base squarespace-widgets-alert squarespace-widgets-information".split(" ")});
YUI.add("squarespace-dialog-stringset-input-editor",function(a){var d,b=function(){return 0},c=function(c){if(a.Lang.isString(c)&&0<c.length){var d=c[0];return function(a,b){var c=a.toLocaleLowerCase().indexOf(d.toLocaleLowerCase()),e=b.toLocaleLowerCase().indexOf(d.toLocaleLowerCase());return c>e?1:c<e?-1:0}}return b};d=a.namespace("Squarespace.DialogFields").InputEditor=a.Base.create("InputEditor",a.Squarespace.DialogField2,[a.WidgetChild,a.Squarespace.Mixins.StringSetUtils],{initializer:function(b){a.Lang.isValue(b.existingMembers)||
this.set("existingMembers",[]);a.Lang.isValue(b.data)||this.set("data",[])},destructor:function(){this._autoCompleteEl.remove(!0);this._autoCompleteSuggestionsEl&&this._autoCompleteSuggestionsEl.remove(!0)},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("contentBox"),c=this.PARTIALS.AC_TEMPLATE;b.one(".workflow-flyout").setStyle("width",this.get("width")+"px");b.one(".flyout-title").set("text",this.get("editorLabel"));this._editorControlEl=b.one("input");this._autoCompleteEl=
a.Node.create(c);this._autoCompleteSuggestionsEl=this._autoCompleteEl.one(".workflow-flyout-autocomplete");a.one(document.body).append(this._autoCompleteEl);this._autoCompleteEl.focus();this._autoCompleteAnim=this._anim({node:this._autoCompleteSuggestionsEl,duration:0.25,easing:a.Easing.easeOutStrong})},bindUI:function(){d.superclass.bindUI.call(this);this._editorControlEl.on("keydown",this.handleTextInput,this);this._editorControlEl.on("keyup",this.haltEvent,this);this._editorControlEl.on("valuechange",
this._displayAutoComplete,this);this._autoCompleteEl.on("click",this.handleAutoCompleteClick,this);this.after("selectedIndexChange",this.highlightSelection,this);this.before("destroy",function(){this._autoCompleteEl.remove(!0)},this);this._autoCompleteAnim.after("end",this._cleanUpHideFlyoutAnim,this)},haltEvent:function(a){a.halt()},handleTextInput:function(a){var b=a.keyCode,c=this.get("selectedIndex"),d=this.get("autoCompleteMatches");switch(b){case 13:case 188:if(-1===c)b=this._editorControlEl.get("value");
else if(b=this._autoCompleteSuggestionsEl.all(".match").item(c))b=b.getData("data");else{a.halt();break}this.addMember(b);a.halt();break;case 38:case 40:if(!d.length)break;38===b&&0<c?c--:40===b&&c<d.length-1&&c++;this.set("selectedIndex",c);a.halt();break;default:this.set("selectedIndex",-1),a.stopPropagation()}},highlightSelection:function(a){a=a.newVal;var b;this._autoCompleteSuggestionsEl&&(b=this._autoCompleteSuggestionsEl.all(".match"),b.removeClass("selected"),(match=b.item(a))&&match.addClass("selected"))},
handleAutoCompleteClick:function(a){if(a.target.hasClass("match")&&!a.target.hasClass("disabled")){a.stopPropagation();a=a.target.getData("data");if(a=this.currentMatches(a))this._displayAutoComplete(),this.addMember(a);this.resetControl();this._editorControlEl.focus();this._displayAutoComplete()}},resetControl:function(){this._editorControlEl.set("value","")},hide:function(){this._autoCompleteSuggestionsEl.hide()},alreadyHasMember:function(a){var b=this.get("data");return this.memberInSet(b,a+"")},
currentMatches:function(b){var c=this.get("autoCompleteMatches");return(c=a.Array.find(c,function(a,c){return a.value.toLowerCase()===b.toLowerCase()}))?c.value:!1},addMember:function(b){var c=this.get("existingMembers"),d=this.get("allowOnlyExistingMembers");this.get("selectedIndex");b=this.cleanMember(b);if(!a.Lang.isString(b)||0===b.length||this.alreadyHasMember(b))this._displayAutoComplete();else if(this.memberInSet(c,b)||!d)d||(c.push(b),this.set("existingMembers",c)),this._createMember(b),this.resetControl(),
this.set("selectedIndex",-1),this._displayAutoComplete()},_createMember:function(b,c){a.Lang.isUndefined(c);this.alreadyHasMember(b)||this.fire("addMember",{newVal:b})},_highlightMatch:function(b,c){return a.Highlight.all(b,c)},_processSuggestions:function(b,d,f,h){var k=[];f.sort(c(d));a.Array.each(f,function(c,f){var p=this._highlightMatch(c,d);p===a.Escape.html(c)||(k.length>=h||this.alreadyHasMember(c))||(p=a.Node.create('<div class="match">'+p+"</div>"),p.setData("data",c),b.append(p),k.push({node:p,
value:c}))},this);b.setStyles({opacity:1,display:"block"});return k},_displayAutoComplete:function(){var a=this.cleanMember(this._editorControlEl.get("value")),b=this.get("existingMembers"),c=this.get("maxSuggestions");1>c||1>b.length||(this._autoCompleteSuggestionsEl.empty(),b=this._processSuggestions(this._autoCompleteSuggestionsEl,a,b,c),this.set("autoCompleteMatches",b),this._autoCompleteAnim&&this._autoCompleteAnim.stop(),b.length&&a?this._showAutoComplete():this._hideAutocomplete())},_showAutoComplete:function(){var a=
(this.get("autoCompleteMatches")||[]).length,b={display:"block",width:this._editorControlEl.get("offsetWidth")+"px",opacity:1,left:this._editorControlEl.getX()-this._editorControlEl.get("docScrollX")+"px",top:this._editorControlEl.getY()+this._editorControlEl.get("offsetHeight")-this._editorControlEl.get("docScrollY")+"px"};this._autoCompleteEl.setStyles(b);this._autoCompleteAnim.setAttrs({to:{height:23*a+"px"}});this._editorControlEl.setStyles({borderBottomLeftRadius:"0px",borderBottomRightRadius:"0px"});
this._autoCompleteAnim.run()},_hideAutocomplete:function(){this._autoCompleteAnim.setAttrs({to:{height:0}});this._autoCompleteAnim.run()},_cleanUpHideFlyoutAnim:function(a){a=this._autoCompleteAnim.get("node");var b=this.get("borderRadius");a&&1>a.get("clientHeight")&&(a.setStyle("display","none"),this._editorControlEl.setStyles({borderBottomLeftRadius:b,borderBottomRightRadius:b}))},_anim:function(b){if(!this.get("destroyed"))return b=new a.Anim(b),this._anims.add(b),b},PARTIALS:{AC_TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-autocomplete clear"></div></div>'}},
{CSS_PREFIX:"sqs-stringset-input-editor",TEMPLATE:'<div class="workflow-flyout tight"><div class="workflow-flyout-options clear"><div class="flyout-title"></div><input class="field-input" placeholder="Tags, comma separated"></div><div class="flyout-notch"></div></div>',ATTRS:{allowOnlyExistingMembers:{},autoCompleteMatches:{validator:a.Lang.isArray},borderRadius:{value:"3px"},canAddMembers:{},editorLabel:{value:""},data:{value:[]},emptyText:{value:""},existingMembers:{},flyoutNode:{getter:function(){return this.get("contentBox").one(".workflow-flyout")}},
maxMemberChars:{},maxSuggestions:{value:6},selectedIndex:{value:-1,setter:function(b){b=parseInt(b,10);return a.Lang.isNumber(b)&&-1<b?b:-1}},width:{value:250}}})},"1.0.0",{requires:["base","base-build","highlight","squarespace-stringset-utils-mixin","squarespace-dialog-field-2"]});
YUI.add("swfdetect",function(a,d){function b(a){g.isNumber(parseInt(a[0],10))&&(e.flashMajor=a[0]);g.isNumber(parseInt(a[1],10))&&(e.flashMinor=a[1]);g.isNumber(parseInt(a[2],10))&&(e.flashRev=a[2])}var c=0,e=a.UA,g=a.Lang,f,h,k;if(e.gecko||e.webkit||e.opera){if(c=navigator.mimeTypes["application/x-shockwave-flash"])if(c=c.enabledPlugin)f=c.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split("."),b(f)}else if(e.ie){try{h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),h.AllowScriptAccess=
"always"}catch(l){null!==h&&(c=6)}if(0===c)try{k=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),f=k.GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(","),b(f)}catch(n){}}a.SWFDetect={getFlashVersion:function(){return String(e.flashMajor)+"."+String(e.flashMinor)+"."+String(e.flashRev)},isFlashVersionAtLeast:function(a,b,c){var d=parseInt(e.flashMajor,10),g=parseInt(e.flashMinor,10),f=parseInt(e.flashRev,10);a=parseInt(a||0,10);b=parseInt(b||0,10);c=parseInt(c||0,10);return a===d?b===g?
c<=f:b<g:a<d}}},"3.17.2",{requires:["yui-base"]});
YUI.add("squarespace-existing-content-link-tab",function(a){var d=a.namespace("Squarespace.Views").ExistingContentLinkTab=a.Base.create("ExistingContentLinkTab",a.Squarespace.View,[],{template:"existing-content-link-tab.html",initializer:function(b){d.superclass.initializer.apply(this,arguments);this._contentOptions=new a.Squarespace.DialogFields.ContentSelector({data:this.get("selectedContent")})},render:function(){d.superclass.render.apply(this,arguments);this._contentOptions.render(this.get("container").one(".content-options"));
this.bindUI()},bindUI:function(){this._contentOptions.on("dataChange",function(a){this.set("selectedContent",a.newVal);this._dataChanged()},this)},reset:function(){this.set("selectedContent",null);this._contentOptions.clearSelected()},_dataChanged:function(){this.get("onDataChange")&&this.get("onDataChange")(this.get("selectedContent"))}},{ATTRS:{onDataChange:{value:null},selectedContent:{value:null}}})},"1.0",{requires:"base-build squarespace-ui-base squarespace-view squarespace-existing-content-link-tab-template squarespace-dialog-html squarespace-dialog-text squarespace-dialog-content-selector".split(" ")});
YUI.add("squarespace-widgets-member-account-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["widgets-member-account.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k=this.escapeExpression;a='  <div class="profile-image">\n    <img src="';(f=d.avatarAssetUrl)?f=f.call(b,{hash:{},data:h}):(f=b.avatarAssetUrl,f="function"===typeof f?f.apply(b):f);a+=k(f)+'" alt="User Avatar" height="100" width="100">\n  </div>\n\n  <div class="profile-info">\n    <span class="name">';
(f=d.displayName)?f=f.call(b,{hash:{},data:h}):(f=b.displayName,f="function"===typeof f?f.apply(b):f);a+=k(f)+'</span>\n    <span class="email">';(f=d.email)?f=f.call(b,{hash:{},data:h}):(f=b.email,f="function"===typeof f?f.apply(b):f);return a+=k(f)+"</span>\n  </div>\n"})})();a.Handlebars.registerPartial("widgets-member-account.html".replace("/","."),d.templates["widgets-member-account.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-content-item-image",function(a){a.namespace("Squarespace");a.Squarespace.ContentItemImage=a.Base.create("ContentItemImage",a.Squarespace.SSWidget,[a.WidgetChild,a.Squarespace.TimerMixin],{initializer:function(){this.publish("aviary-start",{emitFacade:!0});this.publish("aviary-finish",{emitFacade:!0});this.publish("remove",{emitFacade:!0})},destructor:function(){this.get("item").detach(this.get("id")+"|*")},renderUI:function(){var d=this.get("contentBox"),b=a.Squarespace.RecordTypeString[this.get("item").get("recordType")];
"store_item"===b&&(b="product");d.addClass("item-type-"+b);a.Cookie.get("SQUARESPACE_DEBUG_DISPLAY_INDEX")&&(d.appendChild(a.Node.create('<div class="index">'+this.get("item").get("displayIndex")+"</div>")),d.appendChild(a.Node.create('<div class="itemId">'+this.get("item").get("id")+"</div>")));d.appendChild(a.Node.create('<div class="inside"></div>'))},bindUI:function(){a.Cookie.get("SQUARESPACE_DEBUG_DISPLAY_INDEX")&&this.get("item").after("displayIndexChange",function(a){this.get("contentBox").one(".index").setHTML(a.newVal)},
this);var d=this.get("boundingBox"),b=this.get("contentBox"),c=this.get("id"),e=this.get("item"),g=e.get("items");this._registerEvent(e.after(["titleChange","workflowStateChange","save"],function(b){a.Lang.isValue(b.options)&&"mediaFocalPointChange"==b.options.source||this.syncUI()},this));if(this._useFirstChild()){this._currentSyncRequest=null;var f=a.bind(function(a){this._registerEvent(a.after(c+"|mediaProcessingStateChange",function(b){0===g.indexOf(a)&&this.syncUI()},this))},this);g.each(function(a){f(a)},
this);this._registerEvent(g.after(c+"|add",function(b){var c=b.model;0===b.index&&c.get("mediaProcessingState")===a.Squarespace.MediaProcessingState.READY&&this.syncUI();f(c)},this));this._registerEvent(g.after(c+"|remove",function(a){0===a.index&&this.syncUI()},this))}else this._registerEvent(e.after(c+"|mediaProcessingStateChange",this.syncUI,this));d.on("click",function(a){if(d.one("img")&&a.target.ancestor(".inside",!0)||!d.one("img"))this.set("selected",0!==this.get("selected")?0:1)},this);if(this.get("editable"))d.on(["dblclick",
"contextmenu"],function(a){a.halt();this.editItem()},this);this.get("animation")&&b.plug(this.get("animation"),{onlyUseOpacity:!0});this.on("animationChange",function(a){a.prevVal&&this.get("contentBox").unplug(a.prevVal);a.newVal&&this.get("contentBox").plug(a.newVal,{onlyUseOpacity:!0})},this);b.delegate("click",function(){this.fire("remove")},".image-processing-error a",this);this.after("preventLoadChange",this.syncUI,this)},syncUI:function(){if(!this.get("preventLoad")){var d=this.get("contentBox"),
b=this.get("contentBox").one(".inside"),c=a.bind(function(){this._hideProgressIndicator();b.empty()},this),e=a.bind(function(){var b=this.get("item"),c=this._getRenderingImageItem();switch(c?c.get("mediaProcessingState"):a.Squarespace.MediaProcessingState.READY){case a.Squarespace.MediaProcessingState.QUEUED:case a.Squarespace.MediaProcessingState.PROCESSING:this._showProgressIndicator();break;case a.Squarespace.MediaProcessingState.READY:this._showImage(c||b);this.get("showActionOverlay")&&this._showActionOverlay();
break;default:this._usePlaceholder()?(this._showImage(c||b),this.get("showActionOverlay")&&this._showActionOverlay()):this._showError()}},this);this.get("animation")?(d.plug(this.get("animation")),d.once("hidden",function(){this.get("destroyed")||(c(),e());this._timer(a.later(20+200*Math.random(),this,function(){this.get("destroyed")||d.show()}))},this),d.hide()):this.get("destroyed")||(c(),e())}},editItem:function(){var d=this.get("item"),d=new (a.Squarespace.ContentItemEditorFactory.getEditor(d,
this.get("itemEditorOptions")))({model:d,parentDialog:this.get("itemEditorOptions.parentDialog")});this.get("itemEditorOptions.anchorToImageWidget")&&d.set("anchorNode",this.get("boundingBox"));d.show();return d},_uiSetChildSelected:function(a){this.get("boundingBox")[a?"addClass":"removeClass"]("selected")},_showProgressIndicator:function(){var d=this.get("contentBox").one(".inside");d.addClass("processing");d.plug(a.Squarespace.Plugin.Progress,{showBar:!1,showSpinner:!0,showCancel:!0,spinnerSize:this.get("progressSpinnerSize")}).progress.once("cancel",
function(a){this.fire("remove")},this)},_hideProgressIndicator:function(){var d=this.get("contentBox").one(".inside");d&&d.hasClass("processing")&&(d.removeClass("processing"),d.unplug(a.Squarespace.Plugin.Progress))},_showError:function(){var d=a.Node.create('<div class="image-processing-error"><p>Something went wrong.<br /><a href="#" class="remove">Remove</a></p></div>');d.one("p a.remove").once("click",function(a){a.halt();this.fire("remove")},this);this.get("contentBox").one(".inside").appendChild(d)},
_getRenderingImageItem:function(){return this._useFirstChild()?this.get("item").get("items").item(0):this.get("item")},_showImage:function(d){this.get("boundingBox");var b=this.get("contentBox"),c=a.Node.create('<img data-load="false" data-src="'+d.get("assetUrl")+'" data-image-dimensions="'+d.get("originalSize")+'" />');b.one(".inside").appendChild(c);c.setStyles({visibility:"hidden"});b.setStyles({backgroundImage:null,backgroundSize:null});d.get("hasFileData")&&this._showFocalPoint()&&(b=c.plug(a.Squarespace.Plugin.FocalPoint,
{focalPoint:d.get("mediaFocalPoint")}).focalPoint,b.on("focalPointChanged",function(a){d.set("mediaFocalPoint",a.focalPoint);d.save({fields:["mediaFocalPoint"],source:"mediaFocalPointChange"})},this),b.on("focalPointChange",function(a){d.set("mediaFocalPoint",a.newVal)}));var e=this._timer(a.later(1E3,this,function(){!this.get("destroyed")&&(c.getDOMNode()&&c.inDoc())&&this._showProgressIndicator()}));c.once("load",function(){e&&e.cancel();this._hideProgressIndicator();var b=this.get("animation");
b?this._timer(a.later(20+200*Math.random(),this,function(){!this.get("destroyed")&&(c.getDOMNode()&&c.inDoc())&&(c.setStyles({visibility:null}),b&&(c.plug(b),c.hide(!0),c.show(),this._showItemSpecificInformation()))})):c.setStyles({visibility:null})},this);c.once("error",function(){e&&e.cancel();c.setAttribute("src","/universal/images-v6/configuration/template-no-image.png")},this);c.loader||c.plug(a.Squarespace.Loader2,{mode:"fit",load:!0})},_showItemSpecificInformation:function(){var d=this.get("item"),
b=this.get("contentBox").one(".inside"),c=b.one("img"),e=c.get("width"),g=c.get("offsetLeft"),f=c.get("offsetTop"),h;switch(this.get("item").get("recordType")){case a.Squarespace.RecordType.STORE_ITEM:h=a.Node.create('<div class="information"><div class="title">'+this.get("item").get("title")+'</div><div class="price">'+a.Squarespace.Commerce.priceString(this.get("item").toJSON())+"</div></div>");h.setStyles({width:e,left:g,bottom:f});b.append(h);var k=h.one(".price").get("offsetWidth");h.one(".title").setStyle("width",
h.get("offsetWidth")-k-20);this.get("showWorkflowState")&&d.get("workflowState")!==a.Squarespace.WorkflowStates.PUBLISHED&&(d=a.Node.create('<div class="flag-wrapper"><div class="flag-text">Not Listed</div></div>'),d.setStyles({width:e,height:c.get("height"),left:g,top:f}),b.append(d));break;case a.Squarespace.RecordType.IMAGE:h=d.get("workflowState");this.get("showWorkflowState")&&h!==a.Squarespace.WorkflowStates.PUBLISHED&&(d=a.Node.create('<div class="flag-wrapper"><div class="flag-text">'+a.Squarespace.ContentItemUtils.getWorkflowStateCopy(h)+
"</div></div>"),d.setStyles({width:e,height:c.get("height"),left:g,top:f}),b.append(d));break;default:if(k=a.Node.create('<div class="type-icon"></div>'),k.setStyles({top:f+5,left:g+5}),b.append(k),d=d.get("workflowState"),this.get("showWorkflowState")&&d!==a.Squarespace.WorkflowStates.PUBLISHED&&(d=a.Node.create('<div class="flag-wrapper"><div class="flag-text">'+a.Squarespace.ContentItemUtils.getWorkflowStateCopy(h)+"</div></div>"),d.setStyles({width:e,height:c.get("height"),left:g,top:f}),b.append(d)),
c=this.get("item").get("title"))h=a.Node.create('<div class="information"><div class="title">'+c+"</div></div>"),h.setStyles({width:e,left:g,bottom:f}),b.append(h)}},_showActionOverlay:function(){this._actionOverlay&&this._actionOverlay.destroy();var d=this.get("contentBox");d.plug(a.Squarespace.Plugin.ActionOverlay,{buttons:this.get("actionOverlayButtons"),position:0.5<=this.get("item").get("mediaFocalPoint").y?"top":"bottom"});var b=this._actionOverlay=d.actionOverlay,c=a.Squarespace.ActionOverlayButtons.EDIT_IMAGE;
b.on("button-"+c,function(e){b.setLoadingState(c,!0);a.Aviary.once("ready",function(){b.setLoadingState(c,!1);this.fire("aviary-start")},this);a.Aviary.once("close",function(){this.fire("aviary-finish")},this);a.Aviary.launch(this.get("item"),a.Squarespace.UploadModes.ITEM)},this);b.on("button-"+a.Squarespace.ActionOverlayButtons.IMAGE_INFO,function(){this.editItem()},this);b.on("button-"+a.Squarespace.ActionOverlayButtons.REMOVE_IMAGE,function(){this.fire("remove")},this);if((d=d.one("img"))&&d.focalPoint)d.focalPoint.on("focalPointChanged",
function(a){b.set("position",0.5<=a.focalPoint.y?"top":"bottom")},this);b.render()},_usePlaceholder:function(){var d=a.Squarespace.RecordType;return-1!==[d.VIDEO,d.TEXT,d.STORE_ITEM].indexOf(this.get("item").get("recordType"))},_useFirstChild:function(){var d=a.Squarespace.RecordType;return-1!==[d.STORE_ITEM,d.GALLERY].indexOf(this.get("item").get("recordType"))},_showFocalPoint:function(){return this.get("item").get("recordType")===a.Squarespace.RecordType.IMAGE}},{CSS_PREFIX:"sqs-content-item-image",
ATTRS:{item:{validator:function(d){return a.instanceOf(d,a.Squarespace.Models.ContentItem)}},parentModel:{validator:function(d){return a.instanceOf(d,a.Squarespace.Models.ContentCollection)||a.instanceOf(d,a.Squarespace.Models.Contentitem)}},animation:{value:a.Squarespace.Animations.Fadeable},showActionOverlay:{value:!1},actionOverlayButtons:{value:[a.Squarespace.ActionOverlayButtons.EDIT_IMAGE,a.Squarespace.ActionOverlayButtons.IMAGE_INFO,a.Squarespace.ActionOverlayButtons.REMOVE_IMAGE]},showWorkflowState:{value:!0},
progressSpinnerSize:{value:30},editable:{value:!1},itemEditorOptions:{value:{}},preventLoad:{value:!1}}})},"1.0",{requires:"widget-child squarespace-commerce-utils squarespace-ss-widget squarespace-image-loader squarespace-animations squarespace-aviary squarespace-plugin-progress squarespace-plugin-focalpoint squarespace-plugin-actionoverlay squarespace-models-content-collection squarespace-models-content-item squarespace-timer-mixin squarespace-enum squarespace-util squarespace-content-item-utils".split(" ")});
YUI.add("squarespace-session-storage",function(a){a.namespace("Squarespace");var d=function(){return a.Lang.isValue(window.localStorage)};a.Squarespace.SessionStorage={saveSessionData:function(b,c,e){c={value:c};a.Lang.isDate(e)?c.expires=e.getTime():e=null;c=btoa(a.JSON.stringify(c));d()?window.localStorage.setItem(b,c):null===e?a.Cookie.set(b,c,{path:"/"}):a.Cookie.set(b,c,{path:"/",expires:e})},getSessionData:function(b){var c;c=d()?window.localStorage.getItem(b):a.Cookie.get(b);if(!a.Lang.isValue(c))return null;
c=a.JSON.parse(atob(c));return a.Lang.isNumber(c.expires)&&c.expires<(new Date).getTime()?(d()&&window.localStorage.removeItem(b),null):c.value},removeSessionData:function(b){d()&&window.localStorage.removeItem(b);a.Cookie.remove(b)}}},"1.0",{requires:["base","cookie"]});
YUI.add("squarespace-block-spacer",function(a){a.namespace("Squarespace.ContentModel").Spacer=a.Base.create("SpacerBlockModel",a.Model,[],{},{ATTRS:{vSize:{value:1},aspectRatio:{value:null}}});a.namespace("Squarespace.Block").Spacer=a.Base.create("block-spacer",a.Squarespace.Block.Base,[a.Squarespace.Block.Mixin.AspectRatio],{},{CSS_PREFIX:"sqs-block-spacer",MODEL:a.Squarespace.ContentModel.Spacer,ATTRS:{editor:{valueFn:function(){return a.Squarespace.Block.Editor.Spacer}},mobileEditor:{valueFn:function(){return a.Squarespace.Block.Editor.Spacer}},
emailEditor:{valueFn:function(){return a.Squarespace.Block.Editor.SpacerEmail}},type:{value:a.Squarespace.BlockType.SPACER},classNames:{value:"spacer-block"},floatable:{value:!1}}})},"1.0",{requires:"base squarespace-block-base squarespace-block-mixin-aspect-ratio squarespace-block-spacer-editor squarespace-enum squarespace-ss-widget".split(" ")});
YUI.add("squarespace-dialog-digital-pricing-placeholder",function(a){a.namespace("Squarespace");a.Squarespace.DialogFields.DigitalPricingPlaceholder=a.Base.create("digitalPricingPlaceholder",a.Squarespace.DialogFields.PricingPlaceholder,[],{initializer:function(){}},{CSS_PREFIX:"sqs-digital-pricing-placeholder",ATTRS:{}})},"1.0",{requires:["squarespace-dialog-pricing-placeholder"]});
YUI.add("squarespace-content-item-types-kbarticle",function(a){var d=a.namespace("Squarespace.ContentItemEditor").KBArticle=a.Base.create("ArticleEditor",a.Squarespace.ContentItemEditor.Base,[],{getPresentationName:function(){return"KBArticle"},_getTemplateContext:function(){var a=d.superclass._getTemplateContext.call(this);a.enableFeatured=!0;a.enablePassthrough=!0;a.enableExcerpt=!0;return a}},{ATTRS:{editorConfiguration:{value:{title:"Edit {presentationName}",width:650,name:"kbarticle-editor",
overlay:0.5,verticalHeight:"full",initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.text"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}})},"1.0",{requires:["squarespace-content-item-types-base"]});
YUI.add("squarespace-block-audio",function(a){var d=a.Base.create("AudioBlockModel",a.Model,[],{},{ATTRS:{designStyle:{getter:function(b){return!a.Squarespace.Utils.isBetaFeatureEnabled()||!a.Lang.isValue(b)?"classic":b}}}}),b=a.namespace("Squarespace.Block").Audio=a.Base.create("block-audio",a.Squarespace.Block.ModelSyncBase,[],{_renderSuccess:function(c){b.superclass._renderSuccess.call(this,c);c=this.get("contentBox").one(".sqs-audio-embed");if(a.Lang.isValue(c))if(a.Squarespace.Widgets.AudioPlayer)switch(this.get("model").get("designStyle")){case "minimal":new a.Squarespace.Widgets.AudioPlayerMinimal({render:c});
break;default:new a.Squarespace.Widgets.AudioPlayer({render:c})}else Squarespace&&Squarespace.addLoadTrigger&&Squarespace.addLoadTrigger(".sqs-audio-embed",["squarespace-audio-player"])}},{CSS_PREFIX:"sqs-block-audio",MODEL:d,ATTRS:{type:{value:a.Squarespace.BlockType.AUDIO},editor:{value:a.Squarespace.Block.Editor.Audio},defaultContentModel:{value:{designStyle:"minimal"}}}})},"1.0",{requires:["base","model","squarespace-enum","squarespace-block-base-modelsync","squarespace-block-audio-editor"]});
YUI.add("squarespace-dd-superproxy",function(a){a.namespace("Squarespace.Plugin").DDSuperProxy=a.Base.create("DDSuperProxy",a.Plugin.DDProxy,[],{_init:function(){var d=a.DD.DDM;if(d._proxy){this._hands||(this._hands=[]);var b,c,e=this.get("host");e.get("dragNode").compareTo(e.get("node"))&&d._proxy&&e.set("dragNode",d._proxy);a.each(this._hands,function(a){a.detach()});b=d.on("ddm:start",a.bind(function(){d.activeDrag===e&&e.get("node").inDoc()&&d._setFrame(e)},this));c=d.on("ddm:end",a.bind(function(){e.get("dragging")&&
(this.get("flyBack")?this._flyBackAndCleanupProxy():(this.get("moveOnEnd")&&e.get("node").setXY(e.lastXY),this._cleanupProxy()))},this));this._hands=[b,c]}else d._createFrame(),a.on("domready",a.bind(this._init,this))},clone:function(){var d=this.get("host"),b=d.get("node"),c=b.cloneNode(!0);delete c._yuid;c.setAttribute("id",a.guid());c.setStyle("position","absolute");this.get("cloneClass")&&c.addClass(this.get("cloneClass"));this.get("containerNode").appendChild(c);d.set("dragNode",c);this.get("hideOriginalNode")&&
(this._originalHostVisiblity=b.getStyle("visibility"),b.setStyles({visibility:"hidden"}));return c},_cleanupProxy:function(){var d=this.get("host"),b=d.get("node"),c=d.get("dragNode");this.get("hideOnEnd")?c.setStyle("display","none"):this.get("hideOriginalNode")&&b.setStyles({visibility:this._originalHostVisiblity||null});this.get("cloneNode")&&(c.remove(),d.set("dragNode",a.DD.DDM._proxy))},_flyBackAndCleanupProxy:function(){var d=this.get("host"),b=d.get("node"),c=d.get("dragNode"),e=b.getXY(),
e={top:b.get("offsetTop"),left:b.get("offsetLeft")};e.top-=parseInt(b.getStyle("marginTop"),10);e.left-=parseInt(b.getStyle("marginLeft"),10);c.setStyles({opacity:1,display:"block"});e=new a.Anim({node:c,to:{top:e.top,left:e.left},duration:this.get("flyBackDuration"),easing:a.Easing.easeOutStrong});e.on("start",function(){c.addClass("proxy-animating-back");b.addClass("proxy-animating-back");this.get("movingClass")&&b.addClass(this.get("movingClass"))});e.on("end",function(){c.removeClass("proxy-animating-back");
b.removeClass("proxy-animating-back");this.get("hideOriginalNode")&&!this.get("hideOnEnd")&&b.setStyles({visibility:null});this.get("movingClass")&&b.removeClass(this.get("movingClass"));c.remove();d.set("dragNode",a.DD.DDM._proxy);b.fire("proxy-destroyed")},this);c.get("parentNode")!=b.get("parentNode")?(b.get("parentNode").append(c),e.fire("end"),a.later(300,this,function(){b.fire("proxy-destroyed")})):e.run()}},{NS:"proxy",ATTRS:{cloneNode:{value:!0},hideOriginalNode:{value:!0},cloneClass:{value:null},
movingClass:{value:null},flyBack:{value:!0},flyBackDuration:{value:0.3},moveOnEnd:{value:!0},hideOnEnd:{value:!1},containerNode:{getter:function(a){return a||this.get("host").get("node").get("parentNode")}}}})},"1.0",{requires:["dd-proxy","anim"]});
YUI.add("squarespace-dialog-oauth-service-connect",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.OauthServiceConnect=a.Base.create("oauthServiceConnect",a.Squarespace.DialogFields.ServiceConnect,[],{initializer:function(){if(this.constructor===d)throw"DialogFields.ServiceConnect: This is an abstract class and is not meant to be used on its own.";this.get("contentBox").addClass("sqs-service-connect-content");this._externalAuthentication=new a.Squarespace.ExternalAuthentication},
renderUI:function(){d.superclass.renderUI.call(this);this._messageEl=this.get("contentBox").one(".text .message")},bindUI:function(){d.superclass.bindUI.call(this);this.get("contentBox").on("click",function(a){var c=this.get("data.connected");c&&a.target.hasClass("icon")?this._disconnect():c||this._connect()},this);this._externalAuthentication.after("completed",this._continueAuthentication,this)},_setInProgressState:function(){d.superclass._setInProgressState.call(this);this._messageEl.setContent("Connecting...")},
_setConnectedState:function(){d.superclass._setConnectedState.call(this);this._messageEl.setContent(this.get("strings.connectedMessage")+" "+this._getConnectedMessageUsername())},_setDisconnectedState:function(){d.superclass._setDisconnectedState.call(this);this._messageEl.setContent("Click to connect")},_connect:function(){var b=this.get("serviceProvider"),c=this.get("oauthOwner");if(!a.Lang.isValue(b))throw"DialogFields.OauthServiceConnect: The serviceProvider attribute must be defined.";this.set("connectionInProgress",
!0);this._externalAuthentication.openPopupWindow(this.get("serviceProvider"),c.name+"Id",c.getId())},_disconnect:function(){var a=this.get("data")||{};a.username=null;a.connected=!1;this.set("data",a)},_continueAuthentication:function(){var b=this.get("oauthOwner");if(!this.get("formStorageBackendType"))throw"DialogFields.OauthServiceConnect: The formStorageBackendType attributed must be defined.";var c={formStorageBackendType:this.get("formStorageBackendType")};c[b.name+"Id"]=b.getId();a.Data.get({url:"/api/commondata/GetSocialConfig",
data:c,success:function(b){b=b.socialConfig;var c=this.get("data")||{},d=!1,h=c.socialConfig;h&&h.externalAuthenticationId==b.externalAuthenticationId&&(d=!0);!d&&b&&!b.oauthError&&b.serviceProviderEnum===this.get("serviceProvider")?(c.socialConfig=b,c.username=b.profileUserName,c.connected=!0,this.set("data",c),this._completeAuthentication()):(c.username=null,this.set("data",c),this.get("contentBox"),b=b&&b.oauthError?b.oauthErrorMessage:"Error authenticating with external service.",new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Alert.ANCHOR.ELEMENT,
anchor:this.get("contentBox"),"strings.title":"External Authentication Error","strings.message":b}),this.set("connectionInProgress",!1))},failure:function(b){new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Alert.ANCHOR.ELEMENT,anchor:this.get("contentBox"),"strings.title":"External Authentication Error","strings.message":b.error});this.set("connectionInProgress",!1)}},this)},_completeAuthentication:function(){},_getConnectedMessageUsername:function(){throw"DialogFields.OauthServiceConnect: _getConnectedMessageUsername must be implemented by the extending class.";
}},{CSS_PREFIX:"sqs-oauth-service-connect",HANDLEBARS_TEMPLATE:"dialog-oauth-service-connect.html",ATTRS:{strings:{value:{title:"Oauth Service",connectedMessage:"As"}},serviceProvider:{value:null},formStorageBackendType:{value:null},oauthOwner:{value:{name:"collection",getId:function(){}}}}})},"1.0",{requires:"base squarespace-ui-base squarespace-dialog-service-connect squarespace-external-authentication squarespace-dialog-oauth-service-connect-template squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-dialog-map-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-map.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];this.merge(d,a.helpers);var k;a=this.escapeExpression;return b=""+('<div class="field-wrapper text-field-wrapper clear major">\n  <div class="map-address-fields">\n    <input class="field-input map-address-title" type="text" placeholder="'+a((k=(k=b.strings,null==k||!1===k?k:k.placeholderAddressTitle),
"function"===typeof k?k.apply(b):k))+'" spellcheck="false" style="font-weight: bold;"/>\n    <input class="field-input map-address-line1" type="text" placeholder="'+a((k=(k=b.strings,null==k||!1===k?k:k.placeholderAddress1),"function"===typeof k?k.apply(b):k))+'" spellcheck="false" />\n    <input class="field-input map-address-line2" type="text" placeholder="'+a((k=(k=b.strings,null==k||!1===k?k:k.placeholderAddress2),"function"===typeof k?k.apply(b):k))+'" spellcheck="false" />\n    <input class="field-input map-address-country" type="text" placeholder="'+
a((k=(k=b.strings,null==k||!1===k?k:k.placeholderAddressCountry),"function"===typeof k?k.apply(b):k))+'" spellcheck="false" />\n  </div>\n</div>')})})();a.Handlebars.registerPartial("dialog-map.html".replace("/","."),d.templates["dialog-map.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-help",function(a){a.namespace("Squarespace");var d,b,c,e;e=new a.JSONTemplate.Template('<div class="video {.section helpButtons}hasButtons{.end}" data-sectionName="{name}"><div class="player"></div><div class="meta"><div class="info"><div class="title">{title}</div><div class="description">{description}</div></div>{.section helpButtons}<div class="buttons"><div class="knowledge-base"><a target="_blank" href="{kbUrl}">Knowledge Base</a></div><div class="ticket"><a href="#">Open a Ticket</a></div></div>{.end}</div></div>');c=
new a.JSONTemplate.Template('<div class="help-video {name}" data-sectionName="{name}"><div class="thumbnail {name}"></div><div class="play">&nbsp;</div><div class="meta"><div class="title">{title}</div><div class="length">{duration}</div></div></div>');a.Squarespace.HelpLinks={BASIC_INFO:"http://help.squarespace.com/guides/configuring-basic-information-settings",META_DESCRIPTION:"http://help.squarespace.com/guides/how-do-i-increase-my-site-visibility-to-search-engines",GENERAL:"http://help.squarespace.com/guides/configuring-general-settings",
TEMPLATES:"http://help.squarespace.com/guides/?category=Templates",BILLING:"http://help.squarespace.com/guides/?category=Billing",CONTRIBUTORS:"http://help.squarespace.com/guides/adding-and-managing-contributors",CONNECTED_ACCOUNTS:"http://help.squarespace.com/guides/connecting-social-accounts",SHARE_BUTTONS:"http://help.squarespace.com/guides/configuring-sharing-services",FACEBOOK_PAGE:"http://help.squarespace.com/guides/using-facebook-with-squarespace",IMPORT_EXPORT:"http://help.squarespace.com/guides/importing-and-exporting-content",
CODE_INJECTION:"http://help.squarespace.com/guides/using-code-injection",URL_MAPPINGS:"http://help.squarespace.com/guides/how-do-i-create-url-shortcuts-or-mappings",REDIRECT_TYPES:"http://help.squarespace.com/guides/what-is-the-difference-between-a-301-and-302-redirect",DOMAINS_POINTING:"http://help.squarespace.com/guides/mapping-a-domain-general-instructions",DOMAINS_EMAIL:"https://help.squarespace.com/guides/how-do-i-set-up-google-apps-for-my-domain",GENERAL_GA:"http://help.squarespace.com/guides/using-google-analytics-with-squarespace",
GENERAL_TYPEKIT:"http://help.squarespace.com/guides/using-typekit-with-squarespace",HIDDEN_FORM_FIELD:"http://help.squarespace.com/guides/how-do-i-track-referral-sources-for-form-block-submissions"};d=a.Base.create("help",a.Overlay,[],{initializer:function(b){this.set("zIndex",1E5);b=this.get("tray");this.plug(a.Plugin.WidgetAnim,{duration:0.3});this.anim.get("animShow").set("easing",a.Easing.easeOutStrong);this.anim.get("animHide").set("easing",a.Easing.easeOutStrong);b.setAttrs({sections:{welcome:{title:"Welcome to Squarespace",
description:"Learn about the basics of managing a website using Squarespace 6 &mdash; creating a page, setting your site name and logo, adding content, and changing your site's style.",video:this.getWistiaEmbed("nmriqqfa2z"),duration:"2:23",helpButtons:!1},gallery:{title:"Image Galleries",description:"This video shows how to manage a gallery of images on Squarespace 6.  From creating a gallery, uploading images, arranging and deleting images, to viewing your created gallery.",video:this.getWistiaEmbed("sqftxada2u"),
duration:"0:49",helpButtons:!0},blog:{title:"The Blogging System",description:"Squarespace's blogging platform is simple enough for a quick stream of images, and robust enough for a demanding company blog.  This video teaches you the basics of blogging on Squarespace.",video:this.getWistiaEmbed("5ubthoqlu5"),duration:"1:40",helpButtons:!0},page:{title:"LayoutEngine Page Creation",description:"Only Squarespace comes with a completely custom page builder, letting you create complex, grid-based page layouts with columns, mixed media, and more.",
video:this.getWistiaEmbed("4x96kf18u3"),duration:"1:44",helpButtons:!0}}})},getWistiaEmbed:function(a){return'<iframe src="http://fast.wistia.com/embed/iframe/'+a+'?controlsVisibleOnLoad=true&playButton=false&playerColor=000000&version=v1&videoHeight=360&videoWidth=640&volumeControl=true" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" width="800" height="450"></iframe>'},renderUI:function(){this.get("contentBox").append(a.Node.create('<div class="close"></div>'));
this.get("contentBox").append(a.Node.create('<div class="overlay"></div>'));this.setStdModContent(a.WidgetStdMod.BODY,'<div class="body"></div>');var b=this.get("tray");1<a.Object.keys(b.get("sections")).length?(this.setStdModContent(a.WidgetStdMod.FOOTER,'<div class="footer"></div>'),b.render(this.getStdModNode(a.WidgetStdMod.FOOTER).one(".footer"))):this.get("contentBox").one(".body").addClass("single")},bindUI:function(){var a=this.get("tray"),b=this.get("contentBox");a.after("sectionChange",this.syncUI,
this);b.one(".overlay").on(this.get("id")+"|click",this._onOverlayClick,this);b.one(".close").on(this.get("id")+"|click",this._onCloseClick,this);b.delegate(this.get("id")+"|click",this._onOpenTicketClick,".ticket",this)},syncUI:function(){var b=this.get("tray"),c=this.get("contentBox").one(".body");if((b=b.get("sections")[this.get("section")])&&b!==c.getAttribute("data-sectionname"))c.setContent(e.expand(a.merge(b,{kbUrl:a.Squarespace.V6FAQUrl}))),this.get("visible")&&this._renderVideo()},_renderVideo:function(){var b=
this.get("tray").get("sections")[this.get("section")];this.get("contentBox").one(".player").append(a.Node.create(b.video));a.Squarespace.Analytics.trackInternal("help_video_view",{section:this.get("section")})},_removeVideo:function(){var a=this.get("contentBox").one(".player");a&&a.empty()},showWelcome:function(){var b=new a.Squarespace.Lightbox({content:'<div class="wrapper"><div class="title"><img src="/universal/images-v6/welcome-to-squarespace.png" width="363" height="40" title="Welcome to Squarespace."></div><div class="body">We\'ve set up your new website at a temporary URL while you build it with Squarespace.  <br/><br/> <strong>Once you\'re ready to launch your website, you can customize this address with a free custom domain name from Squarespace (with annual purchase) or a domain of your own.</strong></div><div class="mock-browser"><div class="browserBar"><div class="controls"></div><div class="urlBar">'+
Static.SQUARESPACE_CONTEXT.website.authenticUrl+'</div></div><div class="browserWindow"></div></div><div class="button-wrapper"><input type="button" class="saveAndClose" value="Start Building"/></div></div>',zIndex:200100,transition:"scale",name:"welcome-box",theme:"white",opacity:0.9,margin:0});b.show();return b},showTemplatePreviewWelcome:function(b){(new a.Squarespace.Lightbox({content:'<div class="wrapper commerce-welcome template-preview-welcome"><div class="title">Preview Mode</div><div class="body">You are now previewing the template <strong>'+
b.templateName+'</strong>. <ul class="disclaimer"><li class="point">We have loaded this template with a set of demo content that will give you an idea of how to best set up this template.</li><li class="point">Your live site will not be affected by changes you make to the style or the navigation order.</li><li class="point">In this preview, your existing pages have been moved to the <strong>Not Linked</strong> section within the content manager and can be moved into the active navigation as you setup this template.</li></ul>More information is available on our <a href="http://help.squarespace.com/customer/portal/articles/438017" target="_blank">help site</a>.</div><div class="button-wrapper"><input type="button" class="saveAndClose" value="Close"/></div></div>',
zIndex:200100,transition:"scale",name:"welcome-box",theme:"white",opacity:0.9,clickAnywhereToExit:!0,disableNormalClose:!1,margin:0})).show()},showLayoutEngine2Welcome:function(b){var c=new a.Squarespace.Lightbox({content:'<div class="wrapper le2-welcome"><div class="title"><h1>Introducing LayoutEngine 2</h1><h2>A new set of editing controls for your site.</h2></div><div class="body"><video autoplay loop><source src="https://d342grh1myn7qf.cloudfront.net/le2/le2-intro.m4v" type="video/mp4" /><source src="https://d342grh1myn7qf.cloudfront.net/le2/le2-intro.ogv" type="video/ogg" /></video></div><div class="button-wrapper"><span class="button"><a target="_blank" href="http://help.squarespace.com/customer/portal/articles/1394549">Learn More</a></span><span class="button ok"><a>Ok, I understand</a></span></div></div>',
zIndex:200100,transition:"scale",name:"welcome-box",opacity:0.7,clickAnywhereToExit:!1,disableNormalClose:!0,margin:0});c.show();c.getContentEl().on("click",function(a){a.halt()});c.getContentEl().all(".button").each(function(a){a.on("click",function(a){a.stopPropagation();a.target.ancestor(".ok",!0)&&c.hide()})});return c},showCommerceWelcome:function(){var b=new a.Squarespace.Lightbox({content:'<div class="wrapper commerce-welcome"><div class="title">Welcome to Commerce</div><div class="body">We are pleased to welcome you to <b>Squarespace Commerce</b>, a completely integrated way to sell physical and digital goods and services from your website. You can try Squarespace Commerce and start building your store for free.</div><div><b>However, in order to accept payments, you must:</b></div> <ul class="disclaimer"><li class="point">Create a free <b>Stripe</b> account and be a merchant based in the United States, Canada, the United Kingdom, or Ireland.</li><li class="point">Be a paying subscriber of any Squarespace package.</li></ul> <div class="button-wrapper"><input type="button" class="saveAndClose" value="Get Started with Commerce"/></div></div>',
zIndex:200100,transition:"scale",name:"welcome-box",opacity:0.9,clickAnywhereToExit:!1,disableNormalClose:!0,margin:0});b.show();new a.Squarespace.ToolTip({target:".commerce-welcome .footnote.fee",title:"Business Plan",body:"The Squarespace Business Plan is $24/mo with a Yearly subscription.",clickToShow:!0});b.contentEl.one(".saveAndClose").on("click",function(){b.hide()});return b},showNewslettersWelcome:function(){var b=new a.Squarespace.Lightbox({content:'<div class="wrapper newsletters-welcome"><div class="title">Welcome to Newsletters</div><div class="body">We are pleased to welcome you to <b>Squarespace Newsletters</b>, a completely integrated way to easily send newsletters to a mailing list from your website.</div><div class="button-wrapper"><input type="button" class="saveAndClose" value="Get Started with Newsletters"/></div></div>',
zIndex:200100,transition:"scale",name:"welcome-box",opacity:0.9,clickAnywhereToExit:!1,disableNormalClose:!0,margin:0});b.show();b.contentEl.one(".saveAndClose").on("click",function(){b.hide()});return b},show:function(b){a.Squarespace.EscManager.addTarget(this);this.set("section",b);this.get("rendered")||this.render();var c=this.get("tray");a.later(300,this,function(){this.get("visible")&&c.show()},this);a.later(600,this,function(){this.get("visible")&&this._renderVideo()},this);this.constructor.superclass.show.apply(this,
arguments)},hide:function(){this.get("contentBox").one("iframe")&&this._removeVideo();a.later(300,this,function(){this.get("tray").hide();this.constructor.superclass.hide.apply(this,arguments)})},close:function(){this.hide()},_onOverlayClick:function(a){a.halt();this.hide()},_onCloseClick:function(a){a.halt();this.hide()},_onKnowledgeBaseClick:function(b){a.Squarespace.Analytics.trackInternal("help_knowledgebase_click",{fromSection:this.get("section")});window.open("http://support.squarespace.com/",
"squarespace-help")},_onOpenTicketClick:function(b){a.Squarespace.Analytics.trackInternal("help_go_to_support_panel",{fromSection:this.get("section"),location:"help (overlay)",implementor:"dbrito",inApp:!0});this._popupToSupport()},_popupToSupport:function(){window.open("http://help.squarespace.com/open-a-ticket")}},{ATTRS:{align:{value:{points:[a.WidgetPositionAlign.TL,a.WidgetPositionAlign.TL]}},zIndex:{},tray:{valueFn:function(){return new b({visible:!1})}},section:{getter:function(){return this.get("tray").get("section")||
a},setter:function(a){this.get("tray").set("section",a)},validator:function(a){return!!this.get("tray").get("sections")[a]}}},CSS_PREFIX:"sqs-help"});b=a.Base.create("helpTray",a.Widget,[],{initializer:function(){this.plug(a.Plugin.WidgetAnim);this.anim.get("animShow").setAttrs({"from.marginTop":15,"to.marginTop":0,easing:a.Easing.easeOutStrong,duration:0.2});this.anim.get("animHide").setAttrs({"to.marginTop":15,easing:a.Easing.easeOutStrong,duration:0.1})},renderUI:function(){a.each(this.get("sections"),
this._renderVideoThumbnail,this)},bindUI:function(){this.get("contentBox").delegate(this.get("id")+"|click",this._onVideoClick,".help-video",this);this.after("sectionChange",this.syncUI,this)},_renderVideoThumbnail:function(a,b){a.name=b;this.get("contentBox").append(c.expand(a))},_onVideoClick:function(a){var b=a.target.ancestor(".help-video",!0).getAttribute("data-sectionname");a.halt();b&&this.set("section",b)},syncUI:function(){var a=this.get("contentBox");a.all(".help-video.active").removeClass("active");
a.one('.help-video[data-sectionname="'+this.get("section")+'"]').addClass("active")}},{ATTRS:{sections:{},section:{getter:function(b){return b||a.Object.keys(this.get("sections"))[0]}}},CSS_PREFIX:"sqs-help-tray"});a.Squarespace.HelpTray=b;a.Squarespace.Help=new d({visible:!1})},"1.0",{requires:["node","squarespace-json-template","squarespace-dombuilder","overlay","widget-anim"]});
YUI.add("squarespace-block-focus-handler",function(a){var d=a.namespace("Squarespace.Block").BlockFocusHandler=a.Base.create("BlockFocusHandler",a.Base,[],{initializer:function(){var b=a.Squarespace._hDocFocus;this._ensureDefaultFocusIsRemoved();b||(b=a.Squarespace._hDocFocus=a.one(a.config.doc).on("gesturemovestart",a.bind(this._onDocMouseDown,this)),b.listeners={count:0});b.listeners[a.stamp(this,!0)]=!0;b.listeners.count++},mouseMoveThreshold:10,mouseUpPropagationStopped:function(a){this.fire("mouseUpStopped",
a)},_onDocMouseDown:function(b){var c=a.one(a.config.doc);this._touchPos={x:b.pageX,y:b.pageY};this._detachMouseEvents();this._ensureDefaultFocusIsRemoved();this._hDocMouseMove=c.on("gesturemove",a.bind(this._onDocMouseMove,this));this._hDocMouseUp=c.on("gesturemoveend",a.bind(this._onDocMouseUp,this));this._preventedMouseup=this.on("mouseUpStopped",this._onMouseUpStopped,this)},_onDocMouseMove:function(a){var c=this._touchPos,e=this.mouseMoveThreshold,d=Math.abs(c.x-a.pageX),c=Math.abs(c.y-a.pageY);
if(d>e||c>e)a&&a.target.ancestor(".sqs-block-html .sqs-wysiwyg-editor",!0)?this._onDocMouseUp(a):this._detachMouseEvents()},_ensureDefaultFocusIsRemoved:function(){a.Widget._hDocFocus&&a.Widget._hDocFocus.detach()},_onDocMouseUp:function(a){this._detachMouseEvents();this._onDocFocus(a)},_onMouseUpStopped:function(a){a.target=a.details[0].target;this._onDocMouseUp(a)},preventBlockFocus:function(){this._detachMouseEvents()},_onDocFocus:function(b){var c=this._getBlockFromEvent(b),e=d._activeBlock;d._activeTarget=
b?b.target:null;this._shouldBlockFocusChange(e,c,b)?e&&this._isDialogOpen(e)?this._handleDialogOpenFocusChange(e,c,b):this._handleBlockFocusChange(e,c,b):this._handleContentItemFocusChange(b);a.UA.mobile||this._handleBlockSelectionChange(c,b)},giveBlockSyntheticFocus:function(a){var c=d._activeBlock;if(c===a)return!1;this._handleBlockFocusChange(c,a)},_shouldBlockFocusChange:function(a,c,e){return a===c||e&&e.target.ancestor(".sqs-prevent-block-focus-change,.sqsp-tooltip,.dialog-screen-overlay,.cke_dialog,.cke_toolbar, .dialog-choose-image-picker-url, .dialog-content-type.flyout, .dialog-minimal-video-editor.flyout, .sqs-image-picker, .sqs-widgets-confirmation .confirmation-button, .workflow-flyout",
!0)||this._wasDialogClicked(a,e)||this._isSelectEvent(e)?!1:!0},_shouldBlockContentItemFocusChange:function(b,c,e){return void 0===e?!0:e.target.ancestor(".sqs-prevent-block-focus-change,.sqsp-tooltip,.dialog-screen-overlay,.cke_dialog,.cke_toolbar, .dialog-choose-image-picker-url, .dialog-content-type.flyout, .dialog-minimal-video-editor.flyout, .sqs-image-picker, .sqs-widgets-confirmation .confirmation-button, .workflow-flyout",!0)||b===c||!a.Lang.isValue(b)&&!a.Lang.isValue(c)?!1:!0},_handleContentItemFocusChange:function(a){var c=
this._getContentItemFromEvent(a),e=d._activeContentItem;this._shouldBlockContentItemFocusChange(c,e,a)&&(e&&this._blurChild(e),c&&this._focusChild(c))},_handleDialogOpenFocusChange:function(b,c,e){var d=this._getBlockConfigDialog(b).get("dialog");this._onDialogClose(d,a.bind(function(){c&&this._focusBlock(c,e);this._blurBlock(b)},this));d.close(e,!1)},_handleBlockFocusChange:function(a,c,e){c&&this._focusBlock(c,e);a&&(this._blurBlock(a),c||(d._activeBlock=null))},_focusBlock:function(b,c){b._domFocus=
!0;b._set("focused",!0,{src:"ui"});if(b.get("isWidgetParent")&&a.Lang.isValue(c)){var e=this._getContentItemFromEvent(c);this._shouldBlockContentItemFocusChange(e,d._activeContentItem,c)&&this._focusChild(e)}d._activeBlock=b},_focusChild:function(a){a&&(a._domFocus=!0,a._set("focused",!0,{src:"ui"}),a.get("boundingBox").addClass("sqs-content-item-focused"),d._activeContentItem=a)},_blurChild:function(a){a._domFocus=!1;var c=a.get("boundingBox");!a.get("destroyed")&&c.getDOMNode()?(a._set("focused",
!1,{src:"ui"}),c.removeClass("sqs-content-item-focused")):console.warn("Not bluring ... childWidget is either destroyed or its boudningBox no longer exists.");d._activeContentItem===a&&(d._activeContentItem=null)},_blurBlock:function(a){a._domFocus=!1;a.get("boundingBox").getDOMNode()?a._set("focused",!1,{src:"ui"}):console.warn("Not bluring ... block boundingBox no longer exists.");a.get("isWidgetParent")&&a.each(this._blurChild,this)},blurBlock:function(a){this._blurBlock(a);d._activeBlock===a&&
(d._activeBlock=null)},blurAllBlocks:function(){this._onDocFocus()},_handleBlockSelectionChange:function(b,c){var e=this._isSelectEvent(c),d=a.Lang.isValue(b)&&0<b.get("selected");!e&&!d&&this._deselectAllSelectedBlocks();(e||!d)&&this._toggleBlockSelected(b)},_toggleBlockSelected:function(b){a.Lang.isValue(b)&&(0<b.get("selected")?(b.get("focused")&&this._blurBlock(b),b._set("selected",0,{src:"ui"})):b._set("selected",1,{src:"ui"}))},_deselectAllSelectedBlocks:function(){var b=a.all(".sqs-selected.sqs-block");
0<b.size()&&b.each(function(b){b=a.Widget.getByNode(b);this._toggleBlockSelected(b)},this)},_isSelectEvent:function(b){return!b?!1:"macintosh"===a.UA.os&&b.metaKey||"macintosh"!==a.UA.os&&b.ctrlKey},_isDialogOpen:function(a){return this._doesBlockHaveDialogEditor(a)&&this._getBlockConfigDialog(a).get("visible")},_onDialogClose:function(a,c){var e,d;e=a.once("dismiss",function(){c();d.detach()},this);d=a.once("cancel-close",function(){e.detach()})},_wasDialogClicked:function(a,c){if(this._isDialogOpen(a)&&
c)for(var e=this._getBlockConfigDialog(a).get("dialog"),e=[e].concat(e.childDialogs),d=0;d<e.length;d++){var f=e[d];if(f.el&&(f.el===c.target||f.el.contains(c.target)))return!0}return!1},_doesBlockHaveDialogEditor:function(a){return a&&a.blockEditor&&a.blockEditor.configDialog},_getBlockConfigDialog:function(a){return a.blockEditor.configDialog},_getBlockFromEvent:function(b){return b?a.Widget.getByNode(b.target.ancestor(".sqs-block",!0)):null},_getContentItemFromEvent:function(b){return(b=b?b.target.ancestor(".sqs-widget",
!0):!1)&&!b.hasClass("sqs-block")?a.Widget.getByNode(b):null},getCurrentlyFocused:function(){return{block:d._activeBlock,content:d._activeContentItem,target:d._activeTarget}},_detachMouseEvents:function(){this._hDocMouseMove&&this._hDocMouseMove.detach();this._hDocMouseUp&&this._hDocMouseUp.detach();this._preventedMouseup&&this._preventedMouseup.detach()},destructor:function(){a.Widget.prototype._unbindDOM.call(this);this._detachMouseEvents()}});a.namespace("Squarespace.Singletons").BlockFocusHandler=
new d},"1.0",{requires:"base model event squarespace-ss-widget widget-parent squarespace-util squarespace-enum squarespace-block-editor-base".split(" ")});
YUI.add("squarespace-block-audio-player-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["block-audio-player.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k=this.escapeExpression;a='<div class="player">\n  <div class="action">\n    <div class="play">\n      <div class="play-button"></div>\n    </div>\n    <div class="pause">\n      <div class="pause-button"></div>\n    </div>\n  </div>\n  <div class="labels">\n    <div class="title-wrapper">\n      <div class="title" title="';(f=
d.title)?f=f.call(b,{hash:{},data:h}):(f=b.title,f="function"===typeof f?f.apply(b):f);a+=k(f)+'" data-title="';(f=d.title)?f=f.call(b,{hash:{},data:h}):(f=b.title,f="function"===typeof f?f.apply(b):f);a+=k(f)+'">';(f=d.title)?f=f.call(b,{hash:{},data:h}):(f=b.title,f="function"===typeof f?f.apply(b):f);a+=k(f)+'</div>\n    </div>\n    <div class="artistName" title="';(f=d.artistName)?f=f.call(b,{hash:{},data:h}):(f=b.artistName,f="function"===typeof f?f.apply(b):f);a+=k(f)+'">';(f=d.artistName)?
f=f.call(b,{hash:{},data:h}):(f=b.artistName,f="function"===typeof f?f.apply(b):f);a+=k(f)+'</div>\n  </div>\n  <div class="secondary-controls">\n    <div class="time">\n      <span class="progress"></span>\n      <span class="total">';(f=d.duration)?f=f.call(b,{hash:{},data:h}):(f=b.duration,f="function"===typeof f?f.apply(b):f);return a+=k(f)+'</span>\n    </div>\n  </div>\n  <div class="track">\n    <span class="played"><span class="icon"></span></span>\n  </div>\n</div>\n'})})();a.Handlebars.registerPartial("block-audio-player.html".replace("/",
"."),d.templates["block-audio-player.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("resize-plugin",function(a,d){var b=function(c){c.node=a.Widget&&c.host instanceof a.Widget?c.host.get("boundingBox"):c.host;c.widget=c.host instanceof a.Widget?c.host:!1;b.superclass.constructor.call(this,c)};b.NAME="resize-plugin";b.NS="resize";b.ATTRS={node:{value:void 0},widget:{value:void 0}};a.extend(b,a.Resize,{initializer:function(a){this.set("node",a.node);this.set("widget",a.widget);this.on("resize:resize",function(a){this._correctDimensions(a)})},_correctDimensions:function(a){var b=
this.get("node"),d={old:b.getX(),cur:a.currentTarget.info.left},f={old:b.getY(),cur:a.currentTarget.info.top};this.get("widget")&&this._setWidgetProperties(a,d,f);this._isDifferent(d.old,d.cur)&&b.set("x",d.cur);this._isDifferent(f.old,f.cur)&&b.set("y",f.cur)},_setWidgetProperties:function(b,d,g){var f=this.get("widget"),h=f.get("height"),k=f.get("width"),l=b.currentTarget.info.offsetWidth-b.currentTarget.totalHSurrounding;b=b.currentTarget.info.offsetHeight-b.currentTarget.totalVSurrounding;this._isDifferent(h,
b)&&f.set("height",b);this._isDifferent(k,l)&&f.set("width",l);f.hasImpl&&f.hasImpl(a.WidgetPosition)&&(this._isDifferent(f.get("x"),d.cur)&&f.set("x",d.cur),this._isDifferent(f.get("y"),g.cur)&&f.set("y",g.cur))},_isDifferent:function(a,b){var d=!1;a!==b&&(d=b);return d}});a.namespace("Plugin");a.Plugin.Resize=b},"3.17.2",{requires:["resize-base","plugin"],optional:["resize-constrain"]});
YUI.add("squarespace-dialog-check",function(a){a.namespace("Squarespace.DialogFields");var d=function(a,c){return function(d){d.halt();a.call(c,d)}};a.Squarespace.DialogFields.Check=a.Base.create("check",a.Squarespace.DialogField2,[],{initializer:function(b){!a.Lang.isValue(b.data)&&a.Lang.isValue(b.defaultValue)&&this.set("data",b.defaultValue)},bindUI:function(){a.Squarespace.DialogFields.Check.superclass.bindUI.call(this);this.get("boundingBox").on("tap",d(this._toggleActive,this));this.get("boundingBox").after("mousedown",
function(a){a.halt()},this)},syncUI:function(){a.Squarespace.DialogFields.Check.superclass.syncUI.call(this);this.get("contentBox").setHTML(this.renderTemplate());a.Lang.isValue(this.get("strings.description"))?this.get("boundingBox").addClass("has-description"):this.get("boundingBox").addClass("has-no-description")},_toggleActive:function(){this.set("data",!this.get("data"))}},{CSS_PREFIX:"sqs-check",HANDLEBARS_TEMPLATE:"dialog-check.html",ATTRS:{data:{value:!1}}})},"1.0",{requires:["base","base-build",
"event-tap","squarespace-dialog-field-2","squarespace-dialog-check-template"]});
YUI.add("squarespace-block-code",function(a){a.namespace("Squarespace.Block").Code=a.Base.create("block-code",a.Squarespace.Block.ModelSyncBase,[],{_setWidgetContent:function(){var a=this.get("contentBox");a.setHTML(this.get("widgetContent"));a.all("script").each(function(a){a.replace('<div class="sqs-state-message warning">Embedded Code: This block contains embedded code and will only be rendered on the front of your site.</div>')});this.get("model").get("aspectRatio")&&a.one(".sqs-state-message")&&
a.one(".sqs-state-message").wrap("<div></div>")}},{CSS_PREFIX:"sqs-block-code",ATTRS:{defaultContentModel:{value:{wysiwyg:{engine:"code",mode:"htmlmixed",isSource:!1,source:""},html:"<p>Hello, World!</p>"}},editor:{value:a.Squarespace.Block.Editor.Code}}})},"1.0",{requires:["squarespace-block-base-modelsync","squarespace-block-code-editor","squarespace-block-mixin-aspect-ratio"]});
YUI.add("squarespace-block-flickr-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");a.namespace("Squarespace.Block.Editor").Flickr=a.Base.create("flickr-block-editor-dialog",a.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Flickr")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Flickr"}}});a.Squarespace.Block.ModelEditorDialog.Flickr=a.Base.create("FlickrModelEditorDialog",
a.Squarespace.Block.ModelEditorDialog.SummaryGallery,[],{},{ATTRS:{icon:{value:"flickr"},type:{value:a.Squarespace.BlockType.FLICKR},socialAccountType:{value:a.Squarespace.ExternalServiceProviders.FLICKR},collectionType:{value:a.Squarespace.CollectionTypes.FLICKR},strings:{value:{name:"Flickr",itemTypePlural:"Photos",itemType:"Photo"}}}})},"1.0",{requires:"base squarespace-block-summary-gallery-model-editor squarespace-block-flickr-model squarespace-damask-context-globals squarespace-enum squarespace-util".split(" ")});
YUI.add("squarespace-tweak-rules",function(a){a.namespace("Squarespace");a.Squarespace.TweakRules=Class.create({_defaultParams:{paths:["/universal/styles-v6"]},initialize:function(d){this.lessVars={};this.lessScopesByVar={};this.varBackDeps={};this.ready=!1;this.params=a.merge(this._defaultParams,d)},processLess:function(d,b){var c=new less.Parser({paths:this.params.paths});try{c.parse(d,a.bind(this._parseCallback,this))}catch(e){console.error("LESS compile error: ",e)}},setLessVariable:function(a,
b){b=b.trim();var c;c=0===b.indexOf("{")?a+b:a+":"+b+";";this.processLess(c)},getCssForVariable:function(d){d=this.lessScopesByVar[d];var b="";if(d)try{a.Array.each(d,function(c){for(var d=c.c,f=[];c.parent;)c=c.parent,c.c&&f.unshift(c.c);c=null;f[0]instanceof less.tree.Directive&&(c=f.shift(),f.shift());var h=[],f=a.Array.filter(f,function(a){return a instanceof less.tree.Media?(h.push(a),!1):!0}),k=[];0!==f.length&&f[0].selectors?k.unshift(a.Array.map(f[0].selectors,function(a){return[a]})):k.unshift([]);
a.Array.each(f.slice(1),function(a){if(a.selectors){var b=[];a.joinSelectors(b,k[0],a.selectors);k.unshift(b)}});var f=this._genFrames(),f=d.eval({frames:f}),d=k[0],f=f.toCSS(d,{}),l=f.indexOf("}");-1<l&&(f=f.substring(0,l+1));c&&(f=c.name+"{\n"+f+"}\n");0<h.length&&(l={},c=null,1<h.length?(l.mediaPath=h.slice(0,h.length-1),h[h.length-1].evalNested(l),c=h[h.length-1].features.toCSS(d)):(l.mediaBlocks=h,h[0].evalTop(l),c=h[0].features.toCSS(d)),d=f.split("{"),0<d.length&&(f=d[0].split(","),f=a.Array.map(f,
function(a){return a.substring(a.indexOf("& ")+1)}),f=f.join(",")+"{"+d[1]),f="@media "+c+"{\n"+f+"}\n");b+=f+"\n"},this)}catch(c){console.error("Error rebuilding CSS: ",c)}return b},_getObj:function(a,b,c){var e=a[b];e||(e=a[b]=c);return e},_getScopeForVar:function(a){return this._getObj(this.lessScopesByVar,a,[])},_getBackDepsForVar:function(a){return this._getObj(this.varBackDeps,a,[])},_parseCallback:function(a,b){b instanceof less.tree.Ruleset&&(this._inspectAll(b.rules,null),this.ready?this.fire("update"):
(this.ready=!0,this.fire("ready")))},_genFrames:function(){var d=a.Object.values(this.lessVars);return[new less.tree.Ruleset(null,d)]},_inspectAll:function(d,b){a.Array.each(d,function(a){this._inspectNode(a,b)},this)},_newScope:function(a,b){return{parent:b,c:a}},_inspectNode:function(a,b){a instanceof less.tree.Ruleset?(b=this._newScope(a,b),this._iruleset(a,b)):a instanceof less.tree.mixin.Definition?this._imixinDefinition(a,b):a instanceof less.tree.mixin.Call?this._imixinCall(a,b):a instanceof
less.tree.Directive||a instanceof less.tree.Media?(b=this._newScope(a,b),this._idirective(a,b)):a instanceof less.tree.Rule?this._irule(a,b):a instanceof less.tree.Value?this._ivalue(a,b):a instanceof less.tree.Expression?this._iexpression(a,b):a instanceof less.tree.Call?this._icall(a,b):a instanceof less.tree.Operation?this._ioperation(a,b):a instanceof less.tree.Variable?this._ivariable(a,b):this._igeneric(a,b)},_selectorsToString:function(d){return a.Array.map(d,function(a){return a.toCSS({})}).join("").trim()},
_iruleset:function(d,b){if(b&&!b.parent){var c=this._selectorsToString(d.selectors);this.lessVars[c]=d}a.Lang.isArray(d.rules)&&this._inspectAll(d.rules,b)},_idirective:function(a,b){a.ruleset&&this._inspectNode(a.ruleset,b)},_imixinCall:function(a,b){this._selectorsToString([a.selector]);this._addDepToScope(a,b);this._inspectAll(a.arguments,b)},_imixinDefinition:function(a,b){b||(b={});b.parentVar=a;this.lessVars[a.name]=a;this._inspectAll(a.rules,b);b.parentVar=null},_irule:function(a,b){a.variable&&
(b||(b={}),b.parentVar=a,this.lessVars[a.name]=a);this._inspectNode(a.value,b);a.variable&&(b.parentVar=null)},_ivalue:function(d,b){a.Lang.isArray(d.value)&&this._inspectAll(d.value,b)},_iexpression:function(d,b){a.Lang.isArray(d.value)&&this._inspectAll(d.value,b)},_icall:function(d,b){a.Lang.isArray(d.args)&&this._inspectAll(d.args,b)},_ioperation:function(d,b){a.Lang.isArray(d.operands)&&this._inspectAll(d.operands,b)},_ivariable:function(a,b){a.name&&b&&(b.c&&this._addDepToScope(a,b),b.parentVar&&
this._addBackDep(b.parentVar,a))},_igeneric:function(d,b){a.Lang.isArray(d.value)&&this._inspectAll(d.value,b)},_getRefName:function(a){if(a instanceof less.tree.mixin.Definition||a instanceof less.tree.Ruleset)return this._selectorsToString(a.selectors).trim();if(a instanceof less.tree.mixin.Call)return this._selectorsToString([a.selector]).trim();if(a=a.name)return a.trim()},_addDepToScope:function(d,b){this._uniqueAdd(this._getScopeForVar(this._getRefName(d)),b);a.Array.each(this._getBackDepsForVar(this._getRefName(d)),
function(a){a=this._getScopeForVar(this._getRefName(a));this._uniqueAdd(a,b)},this)},_addBackDep:function(d,b){this._getBackDepsForVar(this._getRefName(d)).push(b);for(var c=this._getBackDepsForVar(this._getRefName(b));0<c.length;){var e=c.shift(),g=this._getBackDepsForVar(this._getRefName(d));this._uniqueAdd(g,e);a.Array.each(this._getBackDepsForVar(this._getRefName(e)),c.push,c)}},_uniqueAdd:function(d,b){-1===a.Array.indexOf(d,b)&&d.push(b)}});a.augment(a.Squarespace.TweakRules,a.EventTarget)},
"1.0",{requires:["event","array-extras","thirdparty-less","squarespace-common"]});
YUI.add("squarespace-block-markdown-editor",function(a){a.namespace("Squarespace.Block.Editor").Markdown=a.Base.create("markdown-block-editor-dialog",a.Squarespace.Block.Editor.Code,[a.Squarespace.Block.Mixin.Splitable,a.Squarespace.Block.Mixin.Coalesceable],{initializer:function(){this.placeholder=a.Node.create('<div class="sqs-placeholder">Double-click to edit...</div>');this._bb.appendChild(this.placeholder);this.on("editingChange",this._togglePlaceholder,this);this._togglePlaceholder();"markdown"!==
this._model.get("wysiwyg").mode&&(this._model.get("wysiwyg").mode="markdown")},insertContentIntoModel:function(b){b=b.replace(RegExp(' id="yui[^"]+"',"g"),"");this._model.get("wysiwyg").source=a.Squarespace.Lang.markdownFromHTML(b);this._model.set("html",b);this._togglePlaceholder()},_togglePlaceholder:function(b){var c=!1;a.Squarespace.StringUtils.isBlank(this._model.get("html"))&&(b?b.newVal||(c=!0):this.get("host").get("isNewBlock")||(c=!0));c?this.placeholder.show():this.placeholder.hide()},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Markdown")}},
{NS:"blockEditor",ATTRS:{blockName:{value:"Markdown"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Markdown=a.Base.create("block-markdown-editor",a.Squarespace.Block.ModelEditorDialog.Code,[],{initializer:function(){this.updateWysiwygHeightEvent=a.Do.after(this._updateWysiwygHeight,this.get("dialog"),"moveIntoView",this)},_updateWysiwygHeight:function(){var a=this.get("dialog"),c=a.getField("wysiwyg"),a=a.getBodyHeight()-a.bodyHeight,e=c.config.height;0<a&&(a=30+e-a,c.containerHeight=a,c.editor.set("height",
a+"px"))},destructor:function(){this.updateWysiwygHeightEvent.detach()}},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={width:575,height:618,forcePosition:"fixed",buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Markdown",icon:"/universal/images-v6/icons/icon-code-16-light.png",fields:[{type:"wysiwyg",height:550,width:525,countHeight:!0,name:"wysiwyg",titleStyle:"inline",engine:"markdown",menuConfig:"markdown",
preGenerateHTML:function(a){return a.replace(RegExp("<[^\\s/>]+","gm"),'$& data-preserve-html-node="true"')}}]}]}},"1.0",{requires:"base squarespace-block-code-editor squarespace-block-mixin-splitable squarespace-block-mixin-coalesceable squarespace-damask-context-globals squarespace-debounce squarespace-markdown-from-html squarespace-string-utils".split(" ")});
YUI.add("squarespace-drag-selection",function(a){a.namespace("Squarespace").DragSelection=a.Base.create("dragSelection",a.Base,[a.Squarespace.DragSelectionSelectorBlackList],{initializer:function(d){d=this.get("id");this._selectionNode=a.Node.create("<div></div>");this._selectionNode.addClass("squarespace-selection").setAttribute("data-selection-id",d);this._dragClassName="drag-selection-dragging";this.publish("selection-started",{preventable:!0,defaultFn:this._initSelection,context:this,broadcast:2});
this.on(d+"|nodeChange",this._bindUI,this);this._bindUI()},destructor:function(){this._hideAnimation&&this._hideAnimation.stop();this._selectionNode.remove(!0);this._selectionNode=null;a.detachAll(this.get("id")+"|*");this._activationSub&&(this._activationSub.detach(),this._activationSub=null)},_bindUI:function(){this._activationSub&&this._activationSub.detach();this._activationSub=this.get("node").on("mousedown",this._onMouseDown,this)},_onMouseDown:function(a){this.get("enabled")&&this.fire("selection-started",
{originalMousedown:a})},_initSelection:function(d){d=d.originalMousedown;this.get("dragging")||1!==d.button||(this._origin={x:d.pageX,y:d.pageY},this._pointInActivationRegion(this._origin.x,this._origin.y)&&this._mouseDownInValidRegion(d)&&(this._hideAnimation&&this._hideAnimation.stop(!0),this._selectionNode.setStyles({top:this._origin.y+1,left:this._origin.x+1,right:a.one("body").get("offsetWidth")-this._origin.x,bottom:a.one(a.config.win).get(".innerHeight")-this._origin.y}),a.one("body").addClass(this._dragClassName).appendChild(this._selectionNode),
a.one(a.config.win).once(this.get("id")+"|mouseup",this._endSelection,this),this._mouseMoveSubscription=a.one(a.config.win).on(this.get("id")+"|mousemove",this._dragSelection,this)))},_dragSelection:function(d){if(this.get("enabled")&&this._origin){d.halt();var b=this.get("boundingRegion"),c=this._origin,e=d.pageX,g=d.pageY,f=e>c.x?c.x:e,e=e>c.x?e:c.x,h=g>c.y?c.y:g,c=g>c.y?g:c.y;b&&(b.top&&(h=h<b.top?b.top:h),b.bottom&&(c=c>b.bottom?b.bottom:c),b.left&&(f=f<b.left?b.left:f),b.right&&(e=e>b.right?
b.right:e));this._selectionNode.setStyles({top:h+1,left:f+1,right:a.config.doc.body.offsetWidth-e,bottom:a.config.win.innerHeight-c});this.fire("selection-dragged",{region:this._selectionNode.get("region"),originalMousemove:d})}},_endSelection:function(d){d&&d.halt();this._mouseMoveSubscription&&(this._mouseMoveSubscription.detach(),delete this._mouseMoveSubscription);this._origin&&delete this._origin;a.one("body").removeClass(this._dragClassName);this.fire("selection-complete",{region:this._selectionNode.get("region"),
originalMouseup:d});this._selectionNode.ancestor("body")&&(this._hideAnimation=new a.Anim({node:this._selectionNode,to:{opacity:0},duration:0.3,easing:a.Easing.easeOutStrong}),this._hideAnimation.once(this.get("id")+"|end",function(){this._selectionNode.remove();this._selectionNode.setStyle("opacity",1);delete this._hideAnimation},this),this._hideAnimation.run())},_mouseDownInValidRegion:function(a){for(var b=this.get("invalidRegions"),c=0;c<b.length;c++){var e=b[c];if(e)if("string"===typeof e){if(a.target.ancestor(e,
!0))return!1}else if(e=this._getRegion(e),this._pointInRegion(this._origin.x,this._origin.y,e))return!1}return!0},_pointInActivationRegion:function(a,b){var c=this.get("activationRegion");return!c?!0:this._pointInRegion(a,b,c)},_pointInRegion:function(a,b,c){return c.top&&c.right&&c.bottom&&c.left?a>=c.left&&a<=c.right&&b>=c.top&&b<=c.bottom:c.left&&a<c.left||c.right&&a>c.right||c.top&&b<c.top||c.bottom&&b>c.bottom?!1:!0},_getRegion:function(d){return a.instanceOf(d,a.Node)?d.get("region"):d},_getNode:function(d){if(!d)throw this.name+
": The node attr is required.";if(!a.Lang.isString(d)&&!a.instanceOf(d,a.Node))throw this.name+": The node attr must be a Y.Node instance or selector string.";a.Lang.isString(d)&&(d=a.one(d));return d},_getDragging:function(){var d=a.one("body");return d?d.hasClass(this._dragClassName):!1},_setEnabled:function(d){this._activationSub&&this._activationSub.detach();d?this._bindUI():this.get("dragging")&&this._endSelection();a.one("body").addClass(d?"drag-selection-enabled":"drag-selection-disabled").removeClass(!d?
"drag-selection-enabled":"drag-selection-disabled");return d},enable:function(){this.set("enabled",!0)},disable:function(){this.set("enabled",!1)}},{ATTRS:{node:{value:null,getter:"_getNode",validator:function(d){if(!a.Lang.isString&&!(d instanceof a.Node))throw this.name+": node attr must be a node or selector string.";return!0}},boundingRegion:{value:null,getter:"_getRegion"},activationRegion:{value:null,getter:"_getRegion"},enabled:{value:!0,setter:"_setEnabled"},dragging:{value:!1,valueFn:"_getDragging",
getter:"_getDragging",readOnly:!0},invalidRegions:{value:[]}}})},"1.0",{requires:["base-build","node","anim","squarespace-drag-selection-selector-blacklist"]});
YUI.add("squarespace-layout-insert-block-menu-mixin",function(a){a.namespace("Squarespace.Layout").InsertBlockMenuMixin=a.Base.create("layout-insert-block-menu-mixin",a.Base,[],{initializer:function(){this._icons=[];this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this._ec=this.get("editController");this._initDragDelegate(this._getDragDelegateConfig());this._initClickDelegate();this.on("focusedChange",this._onFocusedChange,this)},renderUI:function(){this._renderMenuIcons(this._getInsertableBlockItems())},
_getInsertableBlockItems:function(){return[]},_renderMenuIcons:function(a){console.warn("Unimplemented method _renderMenuIcons.")},_getDragDelegateConfig:function(){return null},_initDragDelegate:function(d){this.dragDelegate=new a.Squarespace.Layout.DragDelegate(a.merge({container:this._bb,nodes:this.get("nodes"),dragConfig:{groups:["blocks"],clickTimeThresh:200},useDragScroll:!0,scrollNode:this.get("scrollNode"),useDragProxy:!0,dragProxyConfig:{cloneNode:!0,hideOriginalNode:!1,moveOnEnd:!1,flyBack:!1,
containerNode:this._bb},extraSyncShims:!0,editController:this.get("editController")},d));this.dragDelegate.before("drag:start",this._ec.layoutBeforeDragStart,this._ec);this.dragDelegate.on("drag:start",this._dragStart,this);this.dragDelegate.on("drag:end",this._dragEnd,this);this.after("scrollNodeChange",function(a){this.dragDelegate.set("scrollNode",a.newVal)},this)},_initClickDelegate:function(){this.clickDelegate=a.delegate(a.UA.mobile?"tap":"click",this._onClick,this._bb,this.get("nodes"),this)},
_detachClickDelegate:function(){this.clickDelegate&&this.clickDelegate.detach()},destructor:function(){this.dragDelegate.destroy();this._detachClickDelegate()},_dragStart:function(a){this._detachClickDelegate();this._ec.set("selection",null);this._ec.set("dropInfo",null);this._ec.layoutDragStart(this.get("layoutNode"));this.hideMenu()},_dragEnd:function(d){this.blur();this.hide();this.createBlock(a.DD.DDM.activeDrag.get("node"));this._ec.layoutDragEnd();this._initClickDelegate()},_onClick:function(a){a.preventDefault();
this.hideMenu();this._ec.set("dropInfo",this._getDefaultDropInfo());this.createBlock(a.target)},_getDefaultDropInfo:function(){return null},createBlock:function(a){if(this._ec.get("dropInfo")&&(this.newBlock=this._instantiateNewBlock(a)))this.newBlock._trackEngagementCreate(),this._ec.set("selection",this.newBlock.get("boundingBox")),this._ec.insertBlockToLayout(),this._afterNewBlockInsert()},_instantiateNewBlock:function(d){if(d.hasClass("sqs-destroyme"))return d.removeClass("sqs-destroyme"),!1;
var b=this._ec.get("dropInfo").node,c;b&&(c=b.ancestor(".sqs-layout"));return new (a.Widget.getByNode(d).get("ctor"))({editable:!1,render:c||!0,visible:!1,isNewBlock:!0,editMode:this.get("editMode"),editController:this.get("editController")})},_afterNewBlockInsert:function(){this.newBlock.get("boundingBox").scrollIntoView();this.newBlock.set("editable",!0)},hideMenu:noop,_onFocusedChange:noop},{ATTRS:{nodes:{value:".sqs-blockicon"},scrollNode:{},layoutNode:{getter:function(){return a.one(".sqs-layout")}}}})},
"1.0",{requires:["base","squarespace-block-icon","squarespace-layout-drag"]});
YUI.add("squarespace-image",function(a){var d=a.Squarespace.Image=a.Base.create("image",a.Base,[],{initializer:function(a){this._initImg();this.get("loadOnSrcChange")&&this.load();a=this.get("id");this.after(a+"|srcChange",function(a){this._initImg();this.get(loadOnSrcChange)&&this.load()},this)},destructor:function(){this._img=null;a.detach(this.get("id")+"|*")},load:function(){if(this.get("src"))this._img.src=this.get("src");else throw this.name+": This image has no URL specified.";},_initImg:function(){this._setAttrs({loadComplete:d.ATTRS.loadComplete.value,
loadFailed:d.ATTRS.loadFailed.value});var b=this._img=new Image;b.onload=a.bind(function(a){this._set("loadComplete",!0)},this);b.onerror=a.bind(function(a){this._set("loadFailed",!0);this._set("loadComplete",!0)},this)},_getWidth:function(){return this._getDim("width")},_getHeight:function(){return this._getDim("height")},_getDim:function(a){var c=null;this._img&&(this.get("loadComplete")&&!this.get("loadFailed"))&&(c=this._img[a]);return c}},{ATTRS:{src:{value:null},width:{value:null,readOnly:!0,
getter:"_getWidth"},height:{value:null,readOnly:!0,getter:"_getHeight"},loadOnSrcChange:{value:!1},loadFailed:{value:!1,readOnly:!0},loadComplete:{value:!1,readOnly:!0}}})},"1.0",{requires:["base","base-build"]});
YUI.add("squarespace-dialog-text-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-text.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};a="";var k,l=this.escapeExpression;if((f=d["if"].call(b,(k=b.strings,null==k||!1===k?k:k.title),{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;return c=""+('\n  <div class="title">'+l((e=(e=a.strings,null==e||!1===e?e:e.title),"function"===
typeof e?e.apply(a):e))+"</div>\n")},h),data:h}))||0===f)a+=f;a+='\n\n<input type="text" ';if((f=d["if"].call(b,b.maxLength,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,e;c='maxlength="';(e=d.maxLength)?e=e.call(a,{hash:{},data:b}):(e=a.maxLength,e="function"===typeof e?e.apply(a):e);return c+=l(e)+'"'},h),data:h}))||0===f)a+=f;a+="\n       ";if((f=d["if"].call(b,b.readOnly,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){return'readonly="readonly"'},h),data:h}))||0===
f)a+=f;a+="\n       ";if((f=d["if"].call(b,b.selectAllOnFocus,{hash:{},inverse:this.noop,fn:this.program(7,function(a,b){return'onClick="this.select()"'},h),data:h}))||0===f)a+=f;a+="/>\n\n";if((f=d["if"].call(b,(k=b.strings,null==k||!1===k?k:k.description),{hash:{},inverse:this.noop,fn:this.program(9,function(a,b){var c,e,d;c='\n\n\t<div class="description">\n    ';if((d=(e=(e=a.strings,null==e||!1===e?e:e.description),"function"===typeof e?e.apply(a):e))||0===d)c+=d;return c+"\n  </div>\n\n"},h),
data:h}))||0===f)a+=f;return a+"\n"})})();a.Handlebars.registerPartial("dialog-text.html".replace("/","."),d.templates["dialog-text.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("autocomplete-filters",function(a,d){var b=a.Array,c=a.Object,e=a.Text.WordBreak,g=a.mix(a.namespace("AutoCompleteFilters"),{charMatch:function(a,c,e){if(!a)return c;var d=b.unique((e?a:a.toLowerCase()).split(""));return b.filter(c,function(a){a=a.text;e||(a=a.toLowerCase());return b.every(d,function(b){return-1!==a.indexOf(b)})})},charMatchCase:function(a,b){return g.charMatch(a,b,!0)},phraseMatch:function(a,c,e){if(!a)return c;e||(a=a.toLowerCase());return b.filter(c,function(b){return-1!==
(e?b.text:b.text.toLowerCase()).indexOf(a)})},phraseMatchCase:function(a,b){return g.phraseMatch(a,b,!0)},startsWith:function(a,c,e){if(!a)return c;e||(a=a.toLowerCase());return b.filter(c,function(b){return 0===(e?b.text:b.text.toLowerCase()).indexOf(a)})},startsWithCase:function(a,b){return g.startsWith(a,b,!0)},subWordMatch:function(a,c,d){if(!a)return c;var g=e.getUniqueWords(a,{ignoreCase:!d});return b.filter(c,function(a){var c=d?a.text:a.text.toLowerCase();return b.every(g,function(a){return-1!==
c.indexOf(a)})})},subWordMatchCase:function(a,b){return g.subWordMatch(a,b,!0)},wordMatch:function(a,d,g){if(!a)return d;var l={ignoreCase:!g},n=e.getUniqueWords(a,l);return b.filter(d,function(a){var d=b.hash(e.getUniqueWords(a.text,l));return b.every(n,function(a){return c.owns(d,a)})})},wordMatchCase:function(a,b){return g.wordMatch(a,b,!0)}})},"3.17.2",{requires:["array-extras","text-wordbreak"]});
YUI.add("squarespace-block-amazon-editor",function(a){a.namespace("Squarespace.Block.Editor").Amazon=a.Base.create("amazon-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Amazon")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Amazon"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Amazon=a.Base.create("blockAmazonEditor",a.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});
var d={width:420,name:"editAmazonBlock",buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],primaryTabs:[{title:"Edit Amazon Item",icon:"/universal/images-v6/icons/icon-amazon-16-light.png",scroll:!1,fields:[{ctor:a.Squarespace.DialogFields.ProductChooser,name:"amazonProduct",mode:"amazon",maxResults:3},{ctor:a.Squarespace.DialogFields.Select,config:{"strings.title":"Alignment",name:"alignment",description:"Select alignment for this block.",className:"thin dark",
defaultValue:"left",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showImage",strings:{title:"Show Image",description:"Show a thumbnail image of this product."}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showTitle",strings:{title:"Show Title",description:"Show the title of this product."}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showAuthor",strings:{title:"Show Author",
description:"Show the author of this product."}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showPrice",strings:{title:"Show Price",description:"Display the current price of this product from Amazon."}}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"showBuyButton",strings:{title:"Add Buy Button",description:"Add a button below this product to buy it on Amazon.com."}}}]}]}},"1.0",{requires:"base squarespace-block-editor-dialog squarespace-damask-context-globals squarespace-dialog-check squarespace-dialog-product-chooser squarespace-dialog-select".split(" ")});
YUI.add("squarespace-block-form",function(a){var d=a.namespace("Squarespace.Models").BlockFormModel=a.Base.create("BlockFormModel",a.Model,[],{initializer:function(){this._formModel=this._createFormModel()},_saveFormModel:function(b){if(this._saveInProgress)this.onceAfter("save",b);else this._saveInProgress=!0,this._formModel.save(a.bind(function(){this.set("formId",this._formModel.get("id"));this._formModel.saveStorageBackends({googleDocs:this.get("googleDocsConnect"),mailchimp:this.get("mailchimpConnect"),
email:this.get("emailConnect"),siteUser:this.get("siteUserConnect")},function(a){this._saveInProgress=!1;if(a){var e=a.googleDocsConnect,d=a.mailchimpConnect,f=a.emailConnect;a=a.message;var h="Form Storage Connection Failure",k="Unable to connect to form storage backend. Please try again.";e?(h="Google Docs Connection Failure",k=e):d?(h="Mailchimp Connection Failure",k=d):f?(h="Email Connection Failure",k=f):a&&(h="Storage Connection Failure",k=a);b({title:h,message:k,src:"storageBackends"})}else b()},
this)},this))},sync:function(b,c,e){if("read"==b)b=this.get("formId"),a.Lang.isValue(b)?(this._formModel.set("id",b),this._formModel.load(function(){e()})):this._saveFormModel(e);else if("create"==b||"update"==b)a.Array.each(this.constructor.FORM_MODEL_FIELDS,function(a){this._formModel.set(a,this.get(a))},this),this._saveFormModel(e)},validate:function(a,c){this.getAttrs();-1==[this.get("googleDocsConnect.connected"),this.get("mailchimpConnect.connected"),this.get("siteUserConnect.connected"),this.get("emailConnect.connected")].indexOf(!0)?
c({title:"No Storage Backends Connected",message:"You have not connected your form to a storage backend. Please connect at least one storage backend before saving",src:"validate"}):c()},toJSON:function(){return{formId:this.get("formId"),useLightbox:this.get("useLightbox"),lightboxHandleText:this.get("lightboxHandleText"),buttonAlignment:this.get("buttonAlignment"),hSize:this.get("hSize"),vSize:this.get("vSize"),floatDir:this.get("floatDir")}},_createFormModel:function(){return new a.Squarespace.Models.Form({id:null,
name:"New Form",fields:[{type:"name",id:null,locked:!1,title:"Name",description:"",required:!0,name:!0},{type:"email",id:null,locked:!1,title:"Email Address",description:"",placeholder:"",required:!0,email:!0},{type:"text",id:null,locked:!1,title:"Subject",description:"",placeholder:"",required:!0,text:!0},{type:"textarea",id:null,locked:!1,title:"Message",description:"",placeholder:"",required:!0,textarea:!0}],submitButtonText:"Submit",submissionMessage:{html:"Thank you!"}})},getFormModel:function(){return this._formModel}},
{FORM_MODEL_FIELDS:"name fields submitButtonText submissionMessage submissionHTML usePreSubmit preSubmitTopics".split(" "),ATTRS:{emailConnect:{valueFn:function(){if(!a.Lang.isValue(this.get("formId")))return{connected:!0,email:Static.SQUARESPACE_CONTEXT.authenticatedAccount.email}}},siteUserConnect:{valueFn:function(){if(!a.Lang.isValue(this.get("formId")))return{connected:a.Squarespace.Utils.isNewslettersEnabled()}}}}});a.namespace("Squarespace.Block").Form=a.Base.create("block-form",a.Squarespace.Block.ModelSyncBase,
[],{initializer:function(){this._formPreview=new a.Squarespace.Widgets.FormPreview({form:this.get("model").getFormModel()})},renderUI:function(){this.get("model").load(a.bind(this._renderBlock,this))},bindUI:function(){var a=this.get("model");a.after("change",this._renderBlock,this);a.after("save",this.syncUI,this)},syncUI:function(a){a=this.get("model");this._formPreview.set("useLightbox",a.get("useLightbox"));this._formPreview.set("lightboxHandleText",a.get("lightboxHandleText"));this._formPreview.set("buttonAlignment",
a.get("buttonAlignment"));this._formPreview.syncUI()},_renderBlock:function(){var b=this.get("model");this._formPreview.get("rendered")?a.Lang.isUndefined(b.get("fields"))||(b._formModel.set("fields",b.get("fields")),this.syncUI()):this._formPreview.render(this.get("contentBox"));this.fire("widget:contentUpdate")}},{CSS_PREFIX:"sqs-block-form",MODEL:d,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Form},type:{value:a.Squarespace.BlockType.FORM}}})},"1.0",{requires:["model","squarespace-block-form-editor",
"squarespace-form-preview","squarespace-models-form","squarespace-util"]});YUI.add("lang/autocomplete-list",function(a){a.Intl.add("autocomplete-list","",{item_selected:"{item} selected.",items_available:"Suggestions are available. Use the up and down arrow keys to select suggestions."})},"3.17.2");
YUI.add("squarespace-block-horizontal-rule-editor",function(a){a.namespace("Squarespace.Block.Editor").HorizontalRule=a.Base.create("horizontal-rule-block-editor-dialog",a.Squarespace.Block.Editor.Base,[],{},{NS:"blockEditor",ATTRS:{blockName:{value:"HorizontalRule"}}})},"1.0",{requires:["base","squarespace-block-editor-base"]});
YUI.add("squarespace-frontend-edit-controller-connected-accounts",function(a){var d=a.namespace("Squarespace.Frontend.EditController"),b=a.Squarespace.Frontend.OverlayEditorControl;d.ConnectedAccounts=a.Base.create("ConnectedAccounts",d.Base,[],{show:function(){this.get("rootNode").plug(b,{label:"Edit Connected Accounts",action:this._onConfigureClick,context:this})},_onConfigureClick:function(){this.fire("navigate",{path:"/settings/connected-accounts"})},hide:function(){this.get("rootNode").unplug(b)}})},
"1.0",{requires:["base","squarespace-frontend-edit-controller-base"]});
YUI.add("squarespace-dialog-button",function(a){var d=a.namespace("Squarespace.DialogFields").Button=a.namespace("Squarespace.Widgets").Button=a.Base.create("button",a.Squarespace.DialogField2,[],{initializer:function(a){this.get("contentBox").addClass(this.get("alignment"));this.publish("click")},bindUI:function(){d.superclass.bindUI.call(this);this.get("contentBox").delegate("click",this._handleClick,"a",this);this.on("stringsChange",this._updateStringElements,this);this.after("waitingChange",function(a){this._toggleWaitingSpinner(a.newVal)},
this)},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("boundingBox"),c=this._anchorNode=this.get("contentBox").one("a"),e=this.get("name");c.set("value",this.get("data"));c.set("name",e);b.setAttribute("title",this.get("strings.text"));this._renderButtonText();this._renderSpinner();this._toggleActive(this.get("active")&&a.Lang.isValue(e))},syncUI:function(){d.superclass.syncUI.call(this);this._toggleWaitingSpinner(this.get("waiting"))},setText:function(a){this.set("strings.text",
a)},getText:function(){return this.get("strings.text")},setOnClick:function(b,c){a.Lang.isFunction(b)&&this.set("onClick",b);a.Lang.isValue(c)&&this.set("context",c)},disable:function(){this.toggleDisabled(!0)},enable:function(){this.toggleDisabled(!1)},showWaiting:function(){this._toggleWaitingSpinner(!0);this.set("waiting",!0)},hideWaiting:function(){this._toggleWaitingSpinner(!1);this.set("waiting",!1)},toggleDisabled:function(a){this.set("disabled",a);this.get("contentBox").toggleClass("disabled",
a)},_toggleActive:function(a){this.set("active",a);this.get("contentBox").toggleClass("active",a)},_toggleWaitingSpinner:function(a){a?this._waiting.show():this._waiting.hide()},_handleClick:function(b){var c=this._anchorNode;this.get("disabled")?b.halt():(b=this.get("href"))?this.get("newWindow")?window.open(b):window.location=b:a.Lang.isFunction(this.get("onClick"))?this.get("onClick").call(this.get("context")):c.fire("click",this.get("active"))},_animateTextChange:function(b){var c=new a.Anim({node:this._anchorNode,
from:{opacity:0},to:{opacity:1},duration:0.2,easing:"easeOut"});b=new a.Anim({node:this._anchorNode,from:{opacity:1},to:{opacity:0},duration:0.2,easing:"easeIn"});c.on("end",a.bind(function(){this._toggleActive(!0)},this));b.on("end",a.bind(function(){this._renderButtonText();a.Lang.isNull(this._anchorNode)||c.run()},this));this._toggleActive(!1);this._registerAnim(c);this._registerAnim(b);b.run()},_updateStringElements:function(a){"strings.text"===a.subAttrName&&this._animateTextChange(a.newVal.text)},
_renderIcon:function(){this.get("icon")&&this._button.append('<div class="icon"></div>')},_renderButtonText:function(){var b=this.get("strings.text");a.Lang.isString(b)&&0<b.length&&this._anchorNode.setHTML(b)},_renderSpinner:function(){this._waiting=a.Node.create('<div class="waiting"></div>');this.get("contentBox").append(this._waiting);this._waiting.hide()}},{CSS_PREFIX:"sqs-button",TEMPLATE:"<a></a>",ATTRS:{active:{},alignment:{value:"",validator:a.Lang.isString},className:{value:"normal-button"},
context:{value:this},data:{},disabled:{setter:function(a){return!!a}},icon:{},name:{},onClick:{validator:a.Lang.isFunction},strings:{value:{title:"",text:""}},waiting:{value:!1},href:{validator:a.Lang.isString},newWindow:{value:!1,validator:a.Lang.isBoolean}}})},"1.0",{requires:"base node anim squarespace-dialog-field-2 squarespace-dialog squarespace-util".split(" ")});
YUI.add("squarespace-block-form-editor",function(a){var d=a.namespace("Squarespace.Block.Editor").Form=a.Base.create("form-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_enableEditing:function(a){a&&"contextmenu"===a.type&&a.preventDefault();d.superclass._enableEditing.call(this)},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Form")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Form"}}}),b=a.namespace("Squarespace.Block.ModelEditorDialog").Form=
a.Base.create("blockFormEditor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){this.get("dialog").on("ready",function(){this._bindDialogFields()},this);this.plug(a.Squarespace.ModelEditorPlugins.LoadBeforeShowing)},_bindDialogFields:function(){var a=this.get("dialog"),b=this.get("model");a.getField("fields").after("change",function(a){b.fire("change",{changed:{fields:{prevVal:a.prevVal,newVal:a.newVal}}})},this)},getDialogData:function(){var b=this.get("model"),c=b.getFormModel();return a.merge({useLightbox:b.get("useLightbox"),
lightboxHandleText:b.get("lightboxHandleText"),buttonAlignment:b.get("buttonAlignment"),name:c.get("name"),fields:c.get("fields"),submitButtonText:c.get("submitButtonText"),submissionMessage:c.get("submissionMessage"),submissionHTML:c.get("submissionHTML"),usePreSubmit:c.get("usePreSubmit"),preSubmitTopics:c.get("preSubmitTopics")},this._getConnectFieldInitialData())},_saveResponseHandler:function(c,e,d,k,l){var n=this.get("dialog");c&&("validate"==c.src||"storageBackends"==c.src)?(n.allowEditing(),
new a.Squarespace.Widgets.Alert({"strings.title":c.title,"strings.message":c.message})):b.superclass._saveResponseHandler.call(this,c,e,d,k,l)},_getConnectFieldInitialData:function(){var b={},c=this.get("model"),e=c.getFormModel(),d=e.get("connectedBackends");d&&a.Array.each(d,function(e){var d=e.backendId;if(a.Lang.isValue(d)){var h=e.socialConfig;switch(e.backendType){case a.Squarespace.FormStorageBackendType.EMAIL:b.emailConnect={connected:!0,email:d};break;case a.Squarespace.FormStorageBackendType.SITE_USER:b.siteUserConnect=
{connected:!0};break;case a.Squarespace.FormStorageBackendType.GOOGLE:d=e.config.spreadsheetName;a.Lang.isValue(d)||(d=c.get("googleDocsConnect.spreadsheetName"));b.googleDocsConnect={connected:!0,username:h.profileUserName,socialConfig:h,spreadsheetName:d};break;case a.Squarespace.FormStorageBackendType.MAILCHIMP:e=h.profileUserName;a.Lang.isValue(e)||(e=c.get("mailchimpConnect.username"));b.mailchimpConnect={connected:!0,username:e,socialConfig:h,list:d};break;default:a.Squarespace.Logger.log("Unrecognized Connected Backend Type",
{storageBackend:e})}}},this);!b.emailConnect&&!a.Lang.isValue(e.get("id"))&&(b.emailConnect={connected:!0,email:Static.SQUARESPACE_CONTEXT.authenticatedAccount.email});return b}},{ATTRS:{dialogConfig:{valueFn:function(){return e}},dialogConfigContext:{valueFn:function(){return c}}}}),c={primaryFieldConfigs:[{ctor:a.Squarespace.DialogFields.LabeledText,config:{name:"name","strings.label":"Form Name",submitOnEnter:!0}},{ctor:a.Squarespace.DialogFields.Description,config:{text:"<strong>Drag and drop</strong> the fields below to manipulate the structure of your form. <strong>Click</strong> on any field to edit it."}},
{ctor:a.Squarespace.DialogFields.FormBuilder,config:{name:"fields",allowMultipleEmailFields:{$valueFn:function(a){return a.get("mailchimpConnect")?!a.get("mailchimpConnect.connected"):!0}}}}],connectFieldConfigsByName:{email:{ctor:a.Squarespace.DialogFields.EmailServiceConnect,config:{name:"emailConnect"}},googleDocs:{ctor:a.Squarespace.DialogFields.GoogleDocsServiceConnect,config:{name:"googleDocsConnect",getSpreadsheetName:{$valueFn:function(a){return function(){return a.getFormModel().get("name")}}},
oauthOwner:{name:"form",getId:{$valueFn:function(a){return function(){return a.getFormModel().get("id")}}}}}},mailchimp:{ctor:a.Squarespace.DialogFields.MailChimpServiceConnect,config:{name:"mailchimpConnect",oauthOwner:{name:"form",getId:{$valueFn:function(a){return function(){return a.getFormModel().get("id")}}}}}},siteUser:{ctor:a.Squarespace.DialogFields.SiteUserServiceConnect,config:{name:"siteUserConnect"}}},connectFieldConfigs:[{$include:"connectFieldConfigsByName.email"},{$include:"connectFieldConfigsByName.googleDocs"},
{$include:"connectFieldConfigsByName.mailchimp"},{ctor:a.Squarespace.DialogFields.Description,config:{name:"mailchimpAccountCreation",text:'<a href="http://www.mailchimp.com/signup?utm_source=squarespace1&utm_medium=partnerships&utm_campaign=pid&pid=squarespace&source=website" target="_blank">Don\'t have a MailChimp account? Click here to sign up.</a>'}}],submissionFieldConfigs:[{ctor:a.Squarespace.DialogFields.Text,config:{name:"submitButtonText",className:"thin","strings.title":"Submit Button Label",
"strings.placeholder":"Submit"}},{ctor:a.Squarespace.DialogFields.Select,config:{name:"buttonAlignment","strings.title":"Button Alignment",defaultValue:"left",className:"thin dark",options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]}},{ctor:a.Squarespace.DialogFields.Description,config:{name:"submissionMessageDescription",title:"Post-Submit Message",text:"Display this message to users after they submit your form."}},{ctor:a.Squarespace.DialogFields.Wysiwyg,
config:{name:"submissionMessage",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:175,classNames:"submissionMessage"}},{ctor:a.Squarespace.DialogFields.Description,config:{name:"submissionHTMLDescription",title:"Post-Submit HTML",text:"HTML to be rendered in addition to the Post-Submit Message."}},{ctor:a.Squarespace.DialogFields.HtmlCode,config:{name:"submissionHTML"}}],lightboxFieldConfigs:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"lightboxModeDescription",
title:"Lightbox Mode",text:"Replace this form with a button. Open the form in a lightbox when this button is pressed, rather than embedding it in the page. Great for long forms."}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"useLightbox","strings.title":"Enable Lightbox Mode"}},{ctor:a.Squarespace.DialogFields.Description,config:{name:"lightboxHandleDescription"}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"lightboxHandleText",className:"thin","strings.title":"Open Button Label",
"strings.description":"Display this text on the button to open this form.","strings.placeholder":"Open Form"}}],workflowFieldConfigs:[{ctor:a.Squarespace.DialogFields.Description,config:{title:"Pre-Submit Settings",text:"Provide users with links to content related to their inquiry before displaying the form. If they are not able to find a helpful link, they will be directed to the form."}},{ctor:a.Squarespace.DialogFields.Check,config:{name:"usePreSubmit","strings.title":"Enable Pre-Submit","strings.description":"Enable the pre-submit workflow for this form."}},
{ctor:a.Squarespace.DialogFields.PreSubmitBuilder,config:{name:"preSubmitTopics"}}]},e={name:"editFormBlock",loadingText:"Editing Form...",closeOthers:!1,style:"standard",flyoutPointerDirection:"hidden",width:470,height:525,title:"Edit Form",initialDataByReference:!0,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],primaryTabs:[{title:"Edit Form",icon:"/universal/images-v6/standard/icon_form_42_light.png",tabTitle:"Build",scroll:!0,fields:{$include:"primaryFieldConfigs"}}],
secondaryTabs:[{tabTitle:"Storage",fields:{$include:"connectFieldConfigs"}},{tabTitle:"Advanced",scroll:!0,fields:[{$include:"submissionFieldConfigs",$concat:!0},{$include:"lightboxFieldConfigs",$concat:!0}]},{tabTitle:"Workflow",scroll:!0,fields:{$include:"workflowFieldConfigs"},$when:function(){return a.Squarespace.Utils.isBetaFeatureEnabled()}}]}},"1.0",{requires:"model squarespace-damask-context-globals squarespace-dialog-check squarespace-dialog-code squarespace-dialog-description squarespace-dialog-email-service-connect squarespace-dialog-google-docs-service-connect squarespace-dialog-mailchimp-service-connect squarespace-dialog-pre-submit-builder squarespace-dialog-site-user-service-connect squarespace-dialog-wysiwyg squarespace-models-form squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-content-item-types-product-service",function(a){a.namespace("Squarespace.ContentItemEditor");var d=a.Squarespace.ContentItemEditor.ProductService=a.Base.create("ProductServiceContentItemEditor",a.Squarespace.ContentItemEditor.ProductVariants,[],{getDialogData:function(){var b=d.superclass.getDialogData.call(this);b.pricingPlaceholder={productType:a.Squarespace.ProductTypes.SERVICE,variants:b.variants.variants};return b},getPresentationName:function(){return"Service Product"}},
{ATTRS:{editorConfiguration:{value:{name:"editProduct",title:"Edit {presentationName}",width:850,height:{$valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?550:420}},overlay:0.5,closeOthers:!1,initialDataByReference:!0,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productVariantsPricingPlaceholder"}}},{$include:"tabs.product.variantsService"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.product.workflow"},{$include:"tabs.options.product"},
{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}})},"1.0",{requires:["base","squarespace-util","squarespace-content-item-types-product-variants"]});
YUI.add("squarespace-widgets-member-account",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.MemberAccount=a.Base.create("MemberAccount",a.Squarespace.Widgets.Model,[],{renderUI:function(){d.superclass.renderUI.call(this)},_getHBTemplateContext:function(){var a=this.get("model").toJSON();a.avatarAssetUrl||(a.avatarAssetUrl="/universal/images-v6/default-avatar-white.png");return a}},{CSS_PREFIX:"sqs-member-account",HANDLEBARS_TEMPLATE:"widgets-member-account.html",ATTRS:{model:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.MemberAccount)}}})},
"1.0",{requires:["base","squarespace-util","squarespace-widgets-model","squarespace-widgets-member-account-template","squarespace-models-member-account"]});YUI.add("squarespace-block-instagram-model",function(a){a.namespace("Squarespace.ContentModel").InstagramBlock=a.Base.create("InstagramModel",a.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{})},"1.0",{requires:["base","model","squarespace-enum","squarespace-block-summary-gallery-model"]});
YUI.add("squarespace-event-dbltap",function(a){a.Event.define("dbltap",{on:function(d,b,c){this._clear(b);b._handle=d.on("tap",function(e){b._timer&&b._timer.cancel();2===++b._counter?(this._clear(b),c.fire(e)):b._timer=a.later(300,this,this._clear,[b])},null,this)},detach:function(a,b,c){b._handle.detach();b._timer&&b._timer.cancel()},_clear:function(a){a._counter=0;a._timer=null}})},"1.0",{requires:["event","event-tap","event-synthetic"]});
YUI.add("squarespace-block-summary-v2-editor",function(a){a.namespace("Squarespace.Block.Editor").SummaryV2=a.Base.create("summary-v2-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.SummaryV2")},afterLayoutDrag:function(){this._host.fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:"SummaryV2"}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-summary-v2-model-editor",
"squarespace-damask-context-globals","squarespace-model-editor"]});
YUI.add("squarespace-calendar-core-renderer",function(a){var d=function(b){return b.recordType===a.Squarespace.RecordType.EVENT?b.structuredContent.startDate:b.addedOn};a.Squarespace.SquarespaceCalendar=a.Base.create("SquarespaceCalendar",a.Calendar,[],{initializer:function(){this._fetchEvents()},bindUI:function(){a.Calendar.superclass.bindUI.call(this);this.before("dateChange",this._clearEvents,this);this.after("dateChange",this._fetchEvents,this);this.after("collectionIdChange",this._fetchEvents,
this)},_clearEvents:function(){this.set("events",[])},_fetchEvents:function(){var b=this.get("date"),b=a.DataType.Date.format(b,{format:"%B-%Y",locale:"en"});a.Data.get({url:this._getFetchUrl(b),success:this._parseResponse,failure:this._handleResponseError},this)},_parseResponse:function(a){this.set("events",a)},_handleResponseError:function(b){console.error("Failed fetch data: "+b);new a.Squarespace.Widgets.Alert({"strings.title":"Server Request Failed","strings.message":"Failed to get calender data, "+
b.message})},_getFetchUrl:function(a){return"/api/open/GetItemsByMonth?collectionId="+this.get("collectionId")+"&month="+a}},{ATTRS:{events:{value:[],validator:a.Lang.isArray},collectionId:{value:null,validator:a.Lang.isString}}});a.Squarespace.CalendarBaseRenderer=a.Base.create("CalendarBaseRenderer",a.Plugin.Base,[],{initializer:function(a){this.host=a.host;this.afterHostEvent("eventsChange",this._onEventsChange,this)},_onEventsChange:function(b){var c=null;a.Lang.isArray(b.newVal)&&0<b.newVal.length&&
(c=a.bind(this._calendarFilterFunction,this));this.host.set("customRenderer",{rules:{all:"events"},filterFunction:c})},_calendarFilterFunction:function(a,c,e){e=this.host.get("events");e=this._getEventsOfDay(e,a);this._sortEvents(e);this._renderDay(a,c,e)},_renderDay:function(a,c,e){0<e.length&&c.setStyle("background","gray")},_sortEvents:function(a){a.sort(function(a,b){var g=d(a);return d(b)-g})},_getEventsOfDay:function(b,c){var e=a.DataType.Date.format(c,{format:"%Y-%m-%d"});return a.Lang.isArray(b)&&
0<b.length?a.Array.filter(b,function(a){return this._isEventPartOfDay(a,e)},this):[]},_isEventPartOfDay:function(b,c){var e,d;d=b.structuredContent;if(b.recordType!==a.Squarespace.RecordType.EVENT)return e=a.Squarespace.DateUtils.dateFormat(b.addedOn,{format:"%Y-%m-%d"}),e===c;e=a.Squarespace.DateUtils.dateFormat(d.startDate,{format:"%Y-%m-%d"});d=a.Squarespace.DateUtils.dateFormat(d.endDate,{format:"%Y-%m-%d"});return c==e||c==d||new Date(c)>new Date(e)&&new Date(c)<new Date(d)?!0:!1},_getEventDisplayTime:function(b){b=
d(b);return a.Squarespace.DateUtils.dateFormat(b,{format:"%l:%M%P"}).trim()},_isSameDay:function(b,c){if(b.recordType!==a.Squarespace.RecordType.EVENT)return!0;var e=a.Squarespace.DateUtils.dateFormat(b.structuredContent.startDate,{format:"%Y-%m-%d"}),d=a.DataType.Date.format(c,{format:"%Y-%m-%d"});return e===d}},{NS:"calendarPlugin"})},"1.0",{requires:["calendar","node","squarespace-ui-base","squarespace-date-utils","squarespace-widgets-alert"]});
YUI.add("squarespace-mixins-loadable",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.Loadable=a.Base.create("Loadable",a.Base,[],{initializer:function(){var d=this.get("loadable"),b=this.get("loadOnInitialize");a.Lang.isValue(d)?(this._bindLoadable(),b&&d.load()):b&&console.error("Squarespace.Mixins.Loadable: You set loadOnInitialize to true, but the loadable was not defined in the initializer.");this.after("loadableChange",this._bindLoadable,this)},_bindLoadable:function(){var d=
this.get("loadable");a.Do.before(function(){this._set("loading",!0)},d,"load",this);d.after("load",function(){this._set("loading",!1)},this);a.Do.after(function(){this.after("loadingChange",this.syncUI,this)},this,"bindUI",this)}},{ATTRS:{loadable:{value:null},loading:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:!0},loadOnInitialize:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"}}})},"1.0",{requires:["base","event-custom","squarespace-attr-validators"]});
YUI.add("squarespace-block-rss-editor",function(a){a.namespace("Squarespace.Block.Editor").Rss=a.Base.create("rss-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Rss")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Rss"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Rss=a.Base.create("blockRssEditor",a.Squarespace.ModelEditorDialog,[],{_getDefaultDialogConfig:function(){return{width:350,
height:320,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],primaryTabs:[{title:"RSS Block",icon:"/universal/images-v6/icons/icon-rss-16-light-solid.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Squarespace automatically embeds your RSS feeds on blog and blog post pages. This block allows you to provide an additional, explicit link to your blog's RSS feed."}},{ctor:a.Squarespace.DialogFields.ContentIdSelector,
config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{collectionType:a.Squarespace.CollectionTypes.GENERIC,ordering:a.Squarespace.CollectionOrdering.CHRONOLOGICAL,folder:!1}}}]}]}}},{NS:"rssEditor",ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",validator:a.Lang.isObject}}})},"1.0",{requires:"base squarespace-block-editor-dialog squarespace-content-collection-utils squarespace-damask-context-globals squarespace-dialog-content-selector squarespace-dialog-description squarespace-dialog-fields-generators squarespace-models-content-collection squarespace-models-template".split(" ")});
!function(a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);this.CodeMirror=a()}}(function(){function a(b,c){if(!(this instanceof a))return new a(b,c);this.options=c=c||{};kc(Qe,c,!1);t(c);var e=c.value;"string"==typeof e&&(e=new Ia(e,c.mode));this.doc=e;var g=this.display=new d(b,e);g.wrapper.CodeMirror=this;l(this);h(this);c.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");c.autofocus&&!pd&&
wa(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new qd};nb&&setTimeout(ab(na,this,!0),20);Jc(this);Td||(Re(),Td=!0);var f=this;ha(this,function(){f.curOp.forceUpdate=!0;Ud(f,e);c.autofocus&&!pd||yb()==g.input?setTimeout(ab(Kc,f),20):Lc(f);for(var a in Zb)Zb.hasOwnProperty(a)&&Zb[a](f,c[a],Vd);for(a=0;a<rd.length;++a)rd[a](f)})}function d(a,b){var c=this.input=O("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");
Ba?c.style.width="1000px":c.setAttribute("wrap","off");lc&&(c.style.border="1px solid black");c.setAttribute("autocorrect","off");c.setAttribute("autocapitalize","off");c.setAttribute("spellcheck","false");this.inputDiv=O("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");this.scrollbarH=O("div",[O("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");this.scrollbarV=O("div",[O("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");this.scrollbarFiller=
O("div",null,"CodeMirror-scrollbar-filler");this.gutterFiller=O("div",null,"CodeMirror-gutter-filler");this.lineDiv=O("div",null,"CodeMirror-code");this.selectionDiv=O("div",null,null,"position: relative; z-index: 1");this.cursorDiv=O("div",null,"CodeMirror-cursors");this.measure=O("div",null,"CodeMirror-measure");this.lineMeasure=O("div",null,"CodeMirror-measure");this.lineSpace=O("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");
this.mover=O("div",[O("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=O("div",[this.mover],"CodeMirror-sizer");this.heightForcer=O("div",null,null,"position: absolute; height: "+ob+"px; width: 1px;");this.gutters=O("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=O("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=O("div",[this.inputDiv,this.scrollbarH,this.scrollbarV,
this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");mc&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);lc&&(c.style.width="0px");Ba||(this.scroller.draggable=!0);sd&&(this.inputDiv.style.height="1px",this.inputDiv.style.position="absolute");mc&&(this.scrollbarH.style.minHeight=this.scrollbarV.style.minWidth="18px");a.appendChild?a.appendChild(this.wrapper):a(this.wrapper);this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=null;this.lastSizeC=this.viewOffset=
0;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=this.updateLineNumbers=null;this.prevInput="";this.pollingFast=this.alignWidgets=!1;this.poll=new qd;this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.inaccurateSelection=!1;this.maxLine=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.selForContextMenu=null}function b(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption);c(b)}function c(a){a.doc.iter(function(a){a.stateAfter&&
(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;bb(a,100);a.state.modeGen++;a.curOp&&xa(a)}function e(a){var b=Ca(a.display),c=a.options.lineWrapping,e=c&&Math.max(5,a.display.scroller.clientWidth/Na(a.display)-3);return function(d){if(Fb(a.doc,d))return 0;var g=0;if(d.widgets)for(var f=0;f<d.widgets.length;f++)d.widgets[f].height&&(g+=d.widgets[f].height);return c?g+(Math.ceil(d.text.length/e)||1)*b:g+b}}function g(a){var b=a.doc,c=e(a);b.iter(function(a){var b=c(a);b!=
a.height&&cb(a,b)})}function f(a){var b=pb[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");ya(a)}function k(a){l(a);xa(a);setTimeout(function(){v(a)},20)}function l(a){var b=a.display.gutters,c=a.options.gutters;Gb(b);for(var e=0;e<c.length;++e){var d=c[e],g=b.appendChild(O("div",
null,"CodeMirror-gutter "+d));"CodeMirror-linenumbers"==d&&(a.display.lineGutter=g,g.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=e?"":"none";n(a)}function n(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px";a.display.scrollbarH.style.left=a.options.fixedGutter?b+"px":0}function p(a){if(0==a.height)return 0;for(var b,c=a.text.length,e=a;b=Hb(e,!0);)b=b.find(0,!0),e=b.from.line,c+=b.from.ch-b.to.ch;for(e=a;b=Hb(e,!1);)b=b.find(0,!0),c-=e.text.length-b.from.ch,
e=b.to.line,c+=e.text.length-b.to.ch;return c}function q(a){var b=a.display;a=a.doc;b.maxLine=T(a,a.first);b.maxLineLength=p(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var c=p(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function t(a){var b=ta(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function r(a){var b=a.display.scroller;return{clientHeight:b.clientHeight,
barHeight:a.display.scrollbarV.clientHeight,scrollWidth:b.scrollWidth,clientWidth:b.clientWidth,barWidth:a.display.scrollbarH.clientWidth,docHeight:Math.round(a.doc.height+(a.display.mover.offsetHeight-a.display.lineSpace.offsetHeight))}}function u(a,b){b||(b=r(a));var c=a.display,e=b.docHeight+ob,d=b.scrollWidth>b.clientWidth,g=e>b.clientHeight;if(g?(c.scrollbarV.style.display="block",c.scrollbarV.style.bottom=d?nc(c.measure)+"px":"0",c.scrollbarV.firstChild.style.height=Math.max(0,e-b.clientHeight+
(b.barHeight||c.scrollbarV.clientHeight))+"px"):(c.scrollbarV.style.display="",c.scrollbarV.firstChild.style.height="0"),d?(c.scrollbarH.style.display="block",c.scrollbarH.style.right=g?nc(c.measure)+"px":"0",c.scrollbarH.firstChild.style.width=b.scrollWidth-b.clientWidth+(b.barWidth||c.scrollbarH.clientWidth)+"px"):(c.scrollbarH.style.display="",c.scrollbarH.firstChild.style.width="0"),d&&g?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=c.scrollbarFiller.style.width=nc(c.measure)+
"px"):c.scrollbarFiller.style.display="",d&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=nc(c.measure)+"px",c.gutterFiller.style.width=c.gutters.offsetWidth+"px"):c.gutterFiller.style.display="",!a.state.checkedOverlayScrollbar&&0<b.clientHeight)0===nc(c.measure)&&(c.scrollbarV.style.minWidth=c.scrollbarH.style.minHeight=zb&&!Se?"12px":"18px",e=function(b){(b.target||b.srcElement)!=c.scrollbarV&&(b.target||b.srcElement)!=
c.scrollbarH&&ja(a,Mc)(b)},W(c.scrollbarV,"mousedown",e),W(c.scrollbarH,"mousedown",e)),a.state.checkedOverlayScrollbar=!0}function s(a,b,c){var e=c&&null!=c.top?c.top:a.scroller.scrollTop,e=Math.floor(e-a.lineSpace.offsetTop),d=c&&null!=c.bottom?c.bottom:e+a.wrapper.clientHeight,e=Ib(b,e),d=Ib(b,d);if(c&&c.ensure){var g=c.ensure.from.line;c=c.ensure.to.line;if(e>g)return{from:g,to:Ib(b,db(T(b,g))+a.wrapper.clientHeight)};if(Math.min(c,b.lastLine())>=d)return{from:Ib(b,db(T(b,c))-a.wrapper.clientHeight),
to:c}}return{from:e,to:d}}function v(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var e=w(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,g=e+"px",f=0;f<c.length;f++)if(!c[f].hidden){a.options.fixedGutter&&c[f].gutter&&(c[f].gutter.style.left=g);var h=c[f].alignable;if(h)for(var k=0;k<h.length;k++)h[k].style.left=g}a.options.fixedGutter&&(b.gutters.style.left=e+d+"px")}}function w(a){return a.scroller.getBoundingClientRect().left-
a.sizer.getBoundingClientRect().left}function y(a,b,c){for(var e,d=a.display.viewFrom,g=a.display.viewTo,f=s(a.display,a.doc,b),h=!0;;h=!1){var k=a.display.scroller.clientWidth,l;a:{l=a;var p=f,q=c;c=l.display;var x=l.doc;if(c.wrapper.offsetWidth){if(q||!(p.from>=c.viewFrom&&p.to<=c.viewTo&&0==$b(l))){var v;v=l;if(v.options.lineNumbers){var t=v.doc,t=String(v.options.lineNumberFormatter(t.first+t.size-1+v.options.firstLineNumber)),V=v.display;if(t.length!=V.lineNumChars){var H=V.measure.appendChild(O("div",
[O("div",t)],"CodeMirror-linenumber CodeMirror-gutter-elt")),U=H.firstChild.offsetWidth,H=H.offsetWidth-U;v=(V.lineGutter.style.width="",V.lineNumInnerWidth=Math.max(U,V.lineGutter.offsetWidth-H),V.lineNumWidth=V.lineNumInnerWidth+H,V.lineNumChars=V.lineNumInnerWidth?t.length:-1,V.lineGutter.style.width=V.lineNumWidth+"px",n(v),!0)}else v=!1}else v=!1;v&&fa(l);v=D(l);U=x.first+x.size;t=Math.max(p.from-l.options.viewportMargin,x.first);V=Math.min(U,p.to+l.options.viewportMargin);c.viewFrom<t&&20>t-
c.viewFrom&&(t=Math.max(x.first,c.viewFrom));c.viewTo>V&&20>c.viewTo-V&&(V=Math.min(U,c.viewTo));Ab&&(t=td(l.doc,t),V=Wd(l.doc,V));p=t!=c.viewFrom||V!=c.viewTo||c.lastSizeC!=c.wrapper.clientHeight;x=l;U=x.display;0==U.view.length||t>=U.viewTo||V<=U.viewFrom?(U.view=qb(x,t,V),U.viewFrom=t):(U.viewFrom>t?U.view=qb(x,t,U.viewFrom).concat(U.view):U.viewFrom<t&&(U.view=U.view.slice(Bb(x,t))),U.viewFrom=t,U.viewTo<V?U.view=U.view.concat(qb(x,U.viewTo,V)):U.viewTo>V&&(U.view=U.view.slice(0,Bb(x,V))));U.viewTo=
V;c.viewOffset=db(T(l.doc,c.viewFrom));l.display.mover.style.top=c.viewOffset+"px";x=$b(l);if(p||0!=x||q){q=yb();4<x&&(c.lineDiv.style.display="none");K(l,c.updateLineNumbers,v);4<x&&(c.lineDiv.style.display="");q&&yb()!=q&&q.offsetHeight&&q.focus();Gb(c.cursorDiv);Gb(c.selectionDiv);p&&(c.lastSizeC=c.wrapper.clientHeight,bb(l,400));l=l.display;c=l.lineDiv.offsetTop;for(q=0;q<l.view.length;q++)if(p=l.view[q],!p.hidden&&(mc?(v=p.node.offsetTop+p.node.offsetHeight,x=v-c,c=v):(x=p.node.getBoundingClientRect(),
x=x.bottom-x.top),v=p.line.height-x,2>x&&(x=Ca(l)),(0.001<v||-0.001>v)&&(cb(p.line,x),z(p.line),p.rest)))for(x=0;x<p.rest.length;x++)z(p.rest[x]);l=!0;break a}}l=void 0}else l=(fa(l),void 0)}if(!l)break;e=!0;a.display.maxLineChanged&&!a.options.lineWrapping&&(l=a,c=l.display,q=Oa(l,Pa(l,c.maxLine),c.maxLine.text.length,void 0).left,c.maxLineChanged=!1,q=Math.max(0,q+3),p=Math.max(0,c.sizer.offsetLeft+q+ob-c.scroller.clientWidth),c.sizer.style.minWidth=q+"px",p<l.doc.scrollLeft&&eb(l,Math.min(c.scroller.scrollLeft,
p),!0));l=r(a);Ka(a);c=a;q=l;c.display.sizer.style.minHeight=c.display.heightForcer.style.top=q.docHeight+"px";c.display.gutters.style.height=Math.max(q.docHeight,q.clientHeight-ob)+"px";u(a,l);Ba&&a.options.lineWrapping&&(c=a,q=l,c.display.sizer.offsetWidth+c.display.gutters.offsetWidth<c.display.scroller.clientWidth-1&&(c.display.sizer.style.minHeight=c.display.heightForcer.style.top="0px",c.display.gutters.style.height=q.docHeight+"px"));if(h&&a.options.lineWrapping&&k!=a.display.scroller.clientWidth)c=
!0;else if(c=!1,b&&null!=b.top&&(b={top:Math.min(l.docHeight-ob-l.clientHeight,b.top)}),f=s(a.display,a.doc,b),f.from>=a.display.viewFrom&&f.to<=a.display.viewTo)break}return a.display.updateLineNumbers=null,e&&(pa(a,"update",a),(a.display.viewFrom!=d||a.display.viewTo!=g)&&pa(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo)),e}function z(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function D(a){for(var b=a.display,c={},e={},d=b.gutters.firstChild,
g=0;d;d=d.nextSibling,++g)c[a.options.gutters[g]]=d.offsetLeft,e[a.options.gutters[g]]=d.offsetWidth;return{fixedPos:w(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:e,wrapperWidth:b.wrapper.clientWidth}}function K(a,b,c){function e(b){var c=b.nextSibling;return Ba&&zb&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var d=a.display,g=a.options.lineNumbers,f=d.lineDiv,h=f.firstChild,k=d.view,d=d.viewFrom,l=0;l<k.length;l++){var s=k[l];if(!s.hidden)if(s.node){for(;h!=
s.node;)h=e(h);h=g&&null!=b&&d>=b&&s.lineNumber;s.changes&&(-1<ta(s.changes,"gutter")&&(h=!1),B(a,s,d,c));h&&(Gb(s.lineNumber),s.lineNumber.appendChild(document.createTextNode(String(a.options.lineNumberFormatter(d+a.options.firstLineNumber)))));h=s.node.nextSibling}else{var n=H(a,s,d,c);f.insertBefore(n,h)}d+=s.size}for(;h;)h=e(h)}function B(a,b,c,e){for(var d=0;d<b.changes.length;d++){var g=b.changes[d];if("text"==g){var g=b,f=g.text.className,h=S(a,g);g.text==g.node&&(g.node=h.pre);g.text.parentNode.replaceChild(h.pre,
g.text);g.text=h.pre;h.bgClass!=g.bgClass||h.textClass!=g.textClass?(g.bgClass=h.bgClass,g.textClass=h.textClass,I(g)):f&&(g.text.className=f)}else if("gutter"==g)A(a,b,c,e);else if("class"==g)I(b);else if("widget"==g){g=b;f=e;g.alignable&&(g.alignable=null);for(var h=void 0,k=g.node.firstChild;k;k=h)h=k.nextSibling,"CodeMirror-linewidget"==k.className&&g.node.removeChild(k);x(g,f)}}b.changes=null}function E(a){return a.node==a.text&&(a.node=O("div",null,null,"position: relative"),a.text.parentNode&&
a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),mc&&(a.node.style.zIndex=2)),a.node}function S(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):Xd(a,b)}function I(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;if(b&&(b+=" CodeMirror-linebackground"),a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=E(a);
a.background=c.insertBefore(O("div",null,b),c.firstChild)}a.line.wrapClass?E(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass)||""}function A(a,b,c,e){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);var d=b.line.gutterMarkers;if(a.options.lineNumbers||d){var g=E(b),g=b.gutter=g.insertBefore(O("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(a.options.fixedGutter?e.fixedPos:
-e.gutterTotalWidth)+"px"),b.text);if(!a.options.lineNumbers||d&&d["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(O("div",String(a.options.lineNumberFormatter(c+a.options.firstLineNumber)),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+e.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),d)for(b=0;b<a.options.gutters.length;++b){c=a.options.gutters[b];var f=d.hasOwnProperty(c)&&d[c];f&&g.appendChild(O("div",[f],"CodeMirror-gutter-elt","left: "+e.gutterLeft[c]+
"px; width: "+e.gutterWidth[c]+"px"))}}}function H(a,b,c,e){var d=S(a,b);return b.text=b.node=d.pre,d.bgClass&&(b.bgClass=d.bgClass),d.textClass&&(b.textClass=d.textClass),I(b),A(a,b,c,e),x(b,e),b.node}function x(a,b){if(P(a.line,a,b,!0),a.rest)for(var c=0;c<a.rest.length;c++)P(a.rest[c],a,b,!1)}function P(a,b,c,e){if(a.widgets){var d=E(b),g=0;for(a=a.widgets;g<a.length;++g){var f=a[g],h=O("div",[f.node],"CodeMirror-linewidget");f.handleMouseEvents||(h.ignoreEvents=!0);var k=f,l=h,s=c;if(k.noHScroll){(b.alignable||
(b.alignable=[])).push(l);var n=s.wrapperWidth;l.style.left=s.fixedPos+"px";k.coverGutter||(n-=s.gutterTotalWidth,l.style.paddingLeft=s.gutterTotalWidth+"px");l.style.width=n+"px"}k.coverGutter&&(l.style.zIndex=5,l.style.position="relative",k.noHScroll||(l.style.marginLeft=-s.gutterTotalWidth+"px"));e&&f.above?d.insertBefore(h,b.gutter||b.text):d.appendChild(h);pa(f,"redraw")}}}function ca(a,b){return 0>Y(a,b)?b:a}function Q(a,b){return 0>Y(a,b)?a:b}function $(a,b){this.ranges=a;this.primIndex=b}
function M(a,b){this.anchor=a;this.head=b}function R(a,b){var c=a[b];a.sort(function(a,b){return Y(a.from(),b.from())});b=ta(a,c);for(c=1;c<a.length;c++){var e=a[c],d=a[c-1];if(0<=Y(d.to(),e.from())){var g=Q(d.from(),e.from()),f=ca(d.to(),e.to()),e=d.empty()?e.from()==e.head:d.from()==d.head;b>=c&&--b;a.splice(--c,2,new M(e?f:g,e?g:f))}}return new $(a,b)}function C(a,b){return new $([new M(a,b||a)],0)}function F(a,b){if(b.line<a.first)return J(a.first,0);var c=a.first+a.size-1;if(b.line>c)c=J(c,T(a,
c).text.length);else var c=T(a,b.line).text.length,e=b.ch,c=null==e||e>c?J(b.line,c):0>e?J(b.line,0):b;return c}function L(a,b){return b>=a.first&&b<a.first+a.size}function G(a,b,c,e){return a.cm&&a.cm.display.shift||a.extend?(a=b.anchor,e&&(b=0>Y(c,a),b!=0>Y(e,a)?(a=c,c=e):b!=0>Y(c,e)&&(c=e)),new M(a,c)):new M(e||c,c)}function aa(a,b,c,e){ba(a,new $([G(a,a.sel.primary(),b,c)],0),e)}function la(a,b,c){for(var e=[],d=0;d<a.sel.ranges.length;d++)e[d]=G(a,a.sel.ranges[d],b[d],null);b=R(e,a.sel.primIndex);
ba(a,b,c)}function Z(a,b,c,e){var d=a.sel.ranges.slice(0);d[b]=c;ba(a,R(d,a.sel.primIndex),e)}function ma(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new M(F(a,b[c].anchor),F(a,b[c].head))}};return qa(a,"beforeSelectionChange",a,c),a.cm&&qa(a.cm,"beforeSelectionChange",a.cm,c),c.ranges!=b.ranges?R(c.ranges,c.ranges.length-1):b}function sa(a,b,c){var e=a.history.done,d=ga(e);d&&d.ranges?(e[e.length-1]=b,Ta(a,b,c)):ba(a,b,c)}function ba(a,
b,c){Ta(a,b,c);b=a.sel;var e=a.cm?a.cm.curOp.id:0/0,d=a.history,g=c&&c.origin,f;if(!(f=e==d.lastOp))if(f=g)if(f=d.lastSelOrigin==g)if(!(f=d.lastModTime==d.lastSelTime&&d.lastOrigin==g)){f=ga(d.done);var h=g.charAt(0);f="*"==h||"+"==h&&f.ranges.length==b.ranges.length&&f.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}f?d.done[d.done.length-1]=b:Nc(b,d.done);d.lastSelTime=+new Date;d.lastSelOrigin=g;d.lastOp=e;c&&!1!==c.clearRedo&&
Yd(d.undone)}function Ta(a,b,c){(Ua(a,"beforeSelectionChange")||a.cm&&Ua(a.cm,"beforeSelectionChange"))&&(b=ma(a,b));var e=0>Y(b.primary().head,a.sel.primary().head)?-1:1;U(a,Qa(a,b,e,!0));c&&!1===c.scroll||!a.cm||ac(a.cm)}function U(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,Zd(a.cm)),pa(a,"cursorActivity",a))}function rb(a){U(a,Qa(a,a.sel,null,!1),Jb)}function Qa(a,b,c,e){for(var d,g=0;g<b.ranges.length;g++){var f=b.ranges[g],h=Ja(a,f.anchor,c,e),
k=Ja(a,f.head,c,e);(d||h!=f.anchor||k!=f.head)&&(d||(d=b.ranges.slice(0,g)),d[g]=new M(h,k))}return d?R(d,b.primIndex):b}function Ja(a,b,c,e){var d=!1,g=b,f=c||1;a.cantEdit=!1;a:for(;;){var h=T(a,g.line);if(h.markedSpans)for(var k=0;k<h.markedSpans.length;++k){var l=h.markedSpans[k],s=l.marker;if((null==l.from||(s.inclusiveLeft?l.from<=g.ch:l.from<g.ch))&&(null==l.to||(s.inclusiveRight?l.to>=g.ch:l.to>g.ch))){if(e&&(qa(s,"beforeCursorEnter"),s.explicitlyCleared)){if(h.markedSpans){--k;continue}break}if(s.atomic){k=
s.find(0>f?-1:1);if(0==Y(k,g)&&(k.ch+=f,0>k.ch?k=k.line>a.first?F(a,J(k.line-1)):null:k.ch>h.text.length&&(k=k.line<a.first+a.size-1?J(k.line+1,0):null),!k)){if(d)return e?(a.cantEdit=!0,J(a.first,0)):Ja(a,b,c,!0);d=!0;k=b;f=-f}g=k;continue a}}}return g}}function Ka(a){for(var b=a.display,c=a.doc,e=document.createDocumentFragment(),d=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++){var f=c.sel.ranges[g],h=f.empty();if(h||a.options.showCursorWhenSelecting){var k=a,l=e,s=ra(k,f.head,
"div"),n=l.appendChild(O("div","\u00a0","CodeMirror-cursor"));if(n.style.left=s.left+"px",n.style.top=s.top+"px",n.style.height=Math.max(0,s.bottom-s.top)*k.options.cursorHeight+"px",s.other)k=l.appendChild(O("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),k.style.display="",k.style.left=s.other.left+"px",k.style.top=s.other.top+"px",k.style.height=0.85*(s.other.bottom-s.other.top)+"px"}h||sb(a,f,d)}a.options.moveInputWithCursor&&(c=ra(a,c.sel.primary().head,"div"),g=b.wrapper.getBoundingClientRect(),
f=b.lineDiv.getBoundingClientRect(),a=Math.max(0,Math.min(b.wrapper.clientHeight-10,c.top+f.top-g.top)),c=Math.max(0,Math.min(b.wrapper.clientWidth-10,c.left+f.left-g.left)),b.inputDiv.style.top=a+"px",b.inputDiv.style.left=c+"px");fb(b.cursorDiv,e);fb(b.selectionDiv,d)}function sb(a,b,c){function e(a,b,c,d){0>b&&(b=0);b=Math.round(b);d=Math.round(d);h.appendChild(O("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?s-a:c)+"px; height: "+(d-b)+"px"))}
function d(b,c,g){var h,k,Ha=T(f,b),Sd=Ha.text.length;return Te(gb(Ha),c||0,null==g?Sd:g,function(d,f,n){var r,p,x=La(a,J(b,d),"div",Ha,"left");if(d==f)r=x,n=p=x.left;else{if(r=La(a,J(b,f-1),"div",Ha,"right"),"rtl"==n)n=x,x=r,r=n;n=x.left;p=r.right}null==c&&0==d&&(n=l);3<r.top-x.top&&(e(n,x.top,null,x.bottom),n=l,x.bottom<r.top&&e(n,x.bottom,null,r.top));null==g&&f==Sd&&(p=s);(!h||x.top<h.top||x.top==h.top&&x.left<h.left)&&(h=x);(!k||r.bottom>k.bottom||r.bottom==k.bottom&&r.right>k.right)&&(k=r);
l+1>n&&(n=l);e(n,r.top,p-n,r.bottom)}),{start:h,end:k}}var g=a.display,f=a.doc,h=document.createDocumentFragment(),k=hb(a.display),l=k.left,s=g.lineSpace.offsetWidth-k.right,g=b.from();b=b.to();if(g.line==b.line)d(g.line,g.ch,b.ch);else{var n=T(f,g.line),k=T(f,b.line),k=ib(n)==ib(k),g=d(g.line,g.ch,k?n.text.length+1:null).end;b=d(b.line,k?0:null,b.ch).start;k&&(g.top<b.top-2?(e(g.right,g.top,null,g.bottom),e(l,b.top,b.left,b.bottom)):e(g.right,g.top,b.left-g.right,g.bottom));g.bottom<b.top&&e(l,g.bottom,
null,b.top)}c.appendChild(h)}function tb(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate&&(b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate))}}function bb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,ab(Kb,a))}function Kb(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.viewTo)){var c=
+new Date+a.options.workTime,e=oc(b.mode,Da(a,b.frontier));ha(a,function(){b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(d){if(b.frontier>=a.display.viewFrom){var g=d.styles,f=$d(a,d,e,!0);d.styles=f.styles;f.classes?d.styleClasses=f.classes:d.styleClasses&&(d.styleClasses=null);for(var f=!g||g.length!=d.styles.length,h=0;!f&&h<g.length;++h)f=g[h]!=d.styles[h];f&&Va(a,b.frontier,"text");d.stateAfter=oc(b.mode,e)}else ud(a,d.text,e),d.stateAfter=0==b.frontier%5?oc(b.mode,
e):null;return++b.frontier,+new Date>c?(bb(a,a.options.workDelay),!0):void 0})})}}function bc(a,b,c){for(var e,d,g=a.doc,f=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>f;--b){if(b<=g.first)return g.first;var h=T(g,b-1);if(h.stateAfter&&(!c||b<=g.frontier))return b;h=Wa(h.text,null,a.options.tabSize);(null==d||e>h)&&(d=b-1,e=h)}return d}function Da(a,b,c){var e=a.doc,d=a.display;if(!e.mode.startState)return!0;var g=bc(a,b,c),f=g>e.first&&T(e,g-1).stateAfter;return f=f?oc(e.mode,f):Ue(e.mode),e.iter(g,b,
function(c){ud(a,c.text,f);c.stateAfter=g==b-1||0==g%5||g>=d.viewFrom&&g<d.viewTo?oc(e.mode,f):null;++g}),c&&(e.frontier=g),f}function hb(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=fb(a.measure,O("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};return isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b),b}function da(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Bb(a,b)];
var c=a.display.externalMeasured;return c&&b>=c.lineN&&b<c.lineN+c.size?c:void 0}function Pa(a,b){var c=ka(b),e=da(a,c);e&&!e.text?e=null:e&&e.changes&&B(a,e,c,D(a));if(!e){var d;d=ib(b);e=ka(d);d=a.display.externalMeasured=new Xa(a.doc,d,e);d.lineN=e;e=d.built=Xd(a,d);e=(d.text=e.pre,fb(a.display.lineMeasure,e.pre),d)}a:if(d=e,d.line==b)c={map:d.measure.map,cache:d.measure.cache};else{for(var g=0;g<d.rest.length;g++)if(d.rest[g]==b){c={map:d.measure.maps[g],cache:d.measure.caches[g]};break a}for(g=
0;g<d.rest.length;g++)if(ka(d.rest[g])>c){c={map:d.measure.maps[g],cache:d.measure.caches[g],before:!0};break a}c=void 0}return{line:b,view:e,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function Oa(a,b,c,e){b.before&&(c=-1);var d,g=c+(e||"");if(b.cache.hasOwnProperty(g))d=b.cache[g];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var f=b.view,h=b.rect,k=a.options.lineWrapping,l=k&&a.display.scroller.clientWidth;if(!f.measure.heights||k&&f.measure.width!=
l){var s=f.measure.heights=[];if(k){f.measure.width=l;f=f.text.firstChild.getClientRects();for(k=0;k<f.length-1;k++){var l=f[k],n=f[k+1];2<Math.abs(l.bottom-n.bottom)&&s.push((l.bottom+n.top)/2-h.top)}}s.push(h.bottom-h.top)}b.hasHeights=!0}var h=e,r,p,x,s=b.map;for(e=0;e<s.length;e+=3){var q=s[e],u=s[e+1];if(q>c?(p=0,x=1,d="left"):u>c?(p=c-q,x=p+1):(e==s.length-3||c==u&&s[e+3]>c)&&(x=u-q,p=x-1,c>=u&&(d="right")),null!=p){if(r=s[e+2],q==u&&h==(r.insertLeft?"left":"right")&&(d=h),"left"==h&&0==p)for(;e&&
s[e-2]==s[e-3]&&s[e-1].insertLeft;)r=s[(e-=3)+2],d="left";if("right"==h&&p==u-q)for(;e<s.length-3&&s[e+3]==s[e+4]&&!s[e+5].insertLeft;)r=s[(e+=3)+2],d="right";break}}if(3==r.nodeType){for(;p&&pc(b.line.text.charAt(q+p));)--p;for(;u>q+x&&pc(b.line.text.charAt(q+x));)++x;if(za&&0==p&&x==u-q)c=r.parentNode.getBoundingClientRect();else if(Aa&&a.options.lineWrapping){var v=qc(r,p,x).getClientRects();c=v.length?v["right"==h?v.length-1:0]:vd}else c=qc(r,p,x).getBoundingClientRect()||vd}else 0<p&&(d=h="right"),
c=a.options.lineWrapping&&1<(v=r.getClientRects()).length?v["right"==h?v.length-1:0]:r.getBoundingClientRect();if(za&&!p&&(!c||!c.left&&!c.right))c=(r=r.parentNode.getClientRects()[0])?{left:r.left,right:r.left+Na(a.display),top:r.top,bottom:r.bottom}:vd;r=(c.bottom+c.top)/2-b.rect.top;p=b.view.measure.heights;for(e=0;e<p.length-1&&!(r<p[e]);e++);a=e?p[e-1]:0;r=p[e];d={left:("right"==d?c.right:c.left)-b.rect.left,right:("left"==d?c.left:c.right)-b.rect.left,top:a,bottom:r};d=(c.left||c.right||(d.bogus=
!0),d);d.bogus||(b.cache[g]=d)}return{left:d.left,right:d.right,top:d.top,bottom:d.bottom}}function Lb(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function Ra(a){a.display.externalMeasure=null;Gb(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Lb(a.display.view[b])}function ya(a){Ra(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=
!0);a.display.lineNumChars=null}function ua(a,b,c,e){if(b.widgets)for(var d=0;d<b.widgets.length;++d)if(b.widgets[d].above){var g=rc(b.widgets[d]);c.top+=g;c.bottom+=g}if("line"==e)return c;e||(e="local");b=db(b);if("local"==e?b+=a.display.lineSpace.offsetTop:b-=a.display.viewOffset,"page"==e||"window"==e)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==e?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),e=a.left+("window"==e?0:window.pageXOffset||(document.documentElement||
document.body).scrollLeft),c.left+=e,c.right+=e;return c.top+=b,c.bottom+=b,c}function ea(a,b,c){if("div"==c)return b;var e=b.left;b=b.top;if("page"==c)e-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop;else if("local"==c||!c)c=a.display.sizer.getBoundingClientRect(),e+=c.left,b+=c.top;a=a.display.lineSpace.getBoundingClientRect();return{left:e-a.left,top:b-a.top}}function La(a,b,c,e,d){return e||(e=
T(a.doc,b.line)),ua(a,e,Oa(a,Pa(a,e),b.ch,d),c)}function ra(a,b,c,e,d){function g(b,f){var h=Oa(a,d,b,f?"right":"left");return f?h.left=h.right:h.right=h.left,ua(a,e,h,c)}function f(a,b){var c=h[b],e=c.level%2;return a==(c.level%2?c.to:c.from)&&b&&c.level<h[b-1].level?(c=h[--b],a=wd(c)-(c.level%2?0:1),e=!0):a==wd(c)&&b<h.length-1&&c.level<h[b+1].level&&(c=h[++b],a=(c.level%2?c.to:c.from)-c.level%2,e=!1),e&&a==c.to&&a>c.from?g(a-1):g(a,e)}e=e||T(a.doc,b.line);d||(d=Pa(a,e));var h=gb(e);b=b.ch;if(!h)return g(b);
var k=xd(h,b),k=f(b,k);return null!=sc&&(k.other=f(b,sc)),k}function Sa(a,b){var c=0;b=F(a.doc,b);a.options.lineWrapping||(c=Na(a.display)*b.ch);var e=T(a.doc,b.line),d=db(e)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:d,bottom:d+e.height}}function jb(a,b,c,e){a=J(a,b);return a.xRel=e,c&&(a.outside=!0),a}function ub(a,b,c){var e=a.doc;if(c+=a.display.viewOffset,0>c)return jb(e.first,0,!0,-1);var d=Ib(e,c),g=e.first+e.size-1;if(d>g)return jb(e.first+e.size-1,T(e,g).text.length,!0,1);0>
b&&(b=0);for(e=T(e,d);;){d=kb(a,e,d,b,c);g=(e=Hb(e,!1))&&e.find(0,!0);if(!e||!(d.ch>g.from.ch||d.ch==g.from.ch&&0<d.xRel))return d;d=ka(e=g.to.line)}}function kb(a,b,c,e,d){function g(e){e=ra(a,J(c,e),"line",b,l);return h=!0,f>e.bottom?e.left-k:f<e.top?e.left+k:(h=!1,e.left)}var f=d-db(b),h=!1,k=2*a.display.wrapper.clientWidth,l=Pa(a,b),s=gb(b),n=b.text.length;d=Oc(b);var r=Pc(b),p=g(d),x=h,q=g(r),u=h;if(e>q)return jb(c,r,u,1);for(;;){if(s?r==d||r==yd(b,d,1):1>=r-d){s=p>e||q-e>=e-p?d:r;for(e-=s==
d?p:q;pc(b.text.charAt(s));)++s;return jb(c,s,s==d?x:u,-1>e?-1:1<e?1:0)}var v=Math.ceil(n/2),t=d+v;if(s)for(var t=d,V=0;v>V;++V)t=yd(b,t,1);V=g(t);V>e?(r=t,q=V,(u=h)&&(q+=1E3),n=v):(d=t,p=V,x=h,n-=v)}}function Ca(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Mb){Mb=O("pre");for(var b=0;49>b;++b)Mb.appendChild(document.createTextNode("x")),Mb.appendChild(O("br"));Mb.appendChild(document.createTextNode("x"))}fb(a.measure,Mb);b=Mb.offsetHeight/50;return 3<b&&(a.cachedTextHeight=b),
Gb(a.measure),b||1}function Na(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=O("span","xxxxxxxxxx"),c=O("pre",[b]);fb(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;return 2<b&&(a.cachedCharWidth=b),b||10}function va(a){a.curOp={viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++Ve};Qc++||(Cb=[])}function N(a){var b=
a.curOp,c=a.doc,e=a.display;if(a.curOp=null,b.updateMaxLine&&q(a),b.viewChanged||b.forceUpdate||null!=b.scrollTop||b.scrollToPos&&(b.scrollToPos.from.line<e.viewFrom||b.scrollToPos.to.line>=e.viewTo)||e.maxLineChanged&&a.options.lineWrapping){var d=y(a,{top:b.scrollTop,ensure:b.scrollToPos},b.forceUpdate);a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop)}if(!d&&b.selectionChanged&&Ka(a),d||b.startHeight==a.doc.height||u(a),null!=b.scrollTop&&e.scroller.scrollTop!=b.scrollTop)d=
Math.max(0,Math.min(e.scroller.scrollHeight-e.scroller.clientHeight,b.scrollTop)),e.scroller.scrollTop=e.scrollbarV.scrollTop=c.scrollTop=d;null!=b.scrollLeft&&e.scroller.scrollLeft!=b.scrollLeft&&(d=Math.max(0,Math.min(e.scroller.scrollWidth-e.scroller.clientWidth,b.scrollLeft)),e.scroller.scrollLeft=e.scrollbarH.scrollLeft=c.scrollLeft=d,v(a));if(b.scrollToPos){a:{c=F(a.doc,b.scrollToPos.from);e=F(a.doc,b.scrollToPos.to);d=b.scrollToPos.margin;for(null==d&&(d=0);;){var g=!1,f=ra(a,c),h=e&&e!=c?
ra(a,e):f,h=Rc(a,Math.min(f.left,h.left),Math.min(f.top,h.top)-d,Math.max(f.left,h.left),Math.max(f.bottom,h.bottom)+d),k=a.doc.scrollTop,l=a.doc.scrollLeft;if(null!=h.scrollTop&&(Ya(a,h.scrollTop),1<Math.abs(a.doc.scrollTop-k)&&(g=!0)),null!=h.scrollLeft&&(eb(a,h.scrollLeft),1<Math.abs(a.doc.scrollLeft-l)&&(g=!0)),!g){c=f;break a}}c=void 0}if(b.scrollToPos.isCursor&&a.state.focused&&(e=c,d=a.display,g=d.sizer.getBoundingClientRect(),c=null,0>e.top+g.top?c=!0:e.bottom+g.top>(window.innerHeight||document.documentElement.clientHeight)&&
(c=!1),null!=c&&!We))e=O("div","\u200b",null,"position: absolute; top: "+(e.top-d.viewOffset-a.display.lineSpace.offsetTop)+"px; height: "+(e.bottom-e.top+ob)+"px; left: "+e.left+"px; width: 2px;"),a.display.lineSpace.appendChild(e),e.scrollIntoView(c),a.display.lineSpace.removeChild(e)}b.selectionChanged&&tb(a);a.state.focused&&b.updateInput&&na(a,b.typing);c=b.maybeHiddenMarkers;e=b.maybeUnhiddenMarkers;if(c)for(d=0;d<c.length;++d)c[d].lines.length||qa(c[d],"hide");if(e)for(d=0;d<e.length;++d)e[d].lines.length&&
qa(e[d],"unhide");var s;if(--Qc||(s=Cb,Cb=null),b.changeObjs&&qa(a,"changes",a,b.changeObjs),s)for(d=0;d<s.length;++d)s[d]();if(b.cursorActivityHandlers)for(d=0;d<b.cursorActivityHandlers.length;d++)b.cursorActivityHandlers[d](a)}function ha(a,b){if(a.curOp)return b();va(a);try{return b()}finally{N(a)}}function ja(a,b){return function(){if(a.curOp)return b.apply(a,arguments);va(a);try{return b.apply(a,arguments)}finally{N(a)}}}function ia(a){return function(){if(this.curOp)return a.apply(this,arguments);
va(this);try{return a.apply(this,arguments)}finally{N(this)}}}function oa(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);va(b);try{return a.apply(this,arguments)}finally{N(b)}}}function Xa(a,b,c){for(var e=this.line=b,d;e=Hb(e,!1);)e=e.find(1,!0).line,(d||(d=[])).push(e);this.size=(this.rest=d)?ka(ga(this.rest))-c+1:1;this.node=this.text=null;this.hidden=Fb(a,b)}function qb(a,b,c){var e,d=[];for(e=b;c>e;)b=new Xa(a.doc,T(a.doc,e),e),e+=b.size,d.push(b);return d}function xa(a,
b,c,e){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);e||(e=0);var d=a.display;if(e&&c<d.viewTo&&(null==d.updateLineNumbers||d.updateLineNumbers>b)&&(d.updateLineNumbers=b),a.curOp.viewChanged=!0,b>=d.viewTo)Ab&&td(a.doc,b)<d.viewTo&&fa(a);else if(c<=d.viewFrom)Ab&&Wd(a.doc,c+e)>d.viewFrom?fa(a):(d.viewFrom+=e,d.viewTo+=e);else if(b<=d.viewFrom&&c>=d.viewTo)fa(a);else if(b<=d.viewFrom){var g=Ea(a,c,c+e,1);g?(d.view=d.view.slice(g.index),d.viewFrom=g.lineN,d.viewTo+=e):fa(a)}else if(c>=
d.viewTo)(g=Ea(a,b,b,-1))?(d.view=d.view.slice(0,g.index),d.viewTo=g.lineN):fa(a);else{var g=Ea(a,b,b,-1),f=Ea(a,c,c+e,1);g&&f?(d.view=d.view.slice(0,g.index).concat(qb(a,g.lineN,f.lineN)).concat(d.view.slice(f.index)),d.viewTo+=e):fa(a)}(a=d.externalMeasured)&&(c<a.lineN?a.lineN+=e:b<a.lineN+a.size&&(d.externalMeasured=null))}function Va(a,b,c){a.curOp.viewChanged=!0;var e=a.display,d=a.display.externalMeasured;if(d&&b>=d.lineN&&b<d.lineN+d.size&&(e.externalMeasured=null),!(b<e.viewFrom||b>=e.viewTo))a=
e.view[Bb(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==ta(a,c)&&a.push(c))}function fa(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function Bb(a,b){if(b>=a.display.viewTo||(b-=a.display.viewFrom,0>b))return null;for(var c=a.display.view,e=0;e<c.length;e++)if(b-=c[e].size,0>b)return e}function Ea(a,b,c,e){var d=Bb(a,b),g=a.display.view;if(!Ab)return{index:d,lineN:c};for(var f=0,h=a.display.viewFrom;d>f;f++)h+=g[f].size;if(h!=b){if(0<e){if(d==
g.length-1)return null;b=h+g[d].size-b;d++}else b=h-b;c+=b}for(;td(a.doc,c)!=c;){if(d==(0>e?0:g.length-1))return null;c+=e*g[d-(0>e?1:0)].size;d+=e}return{index:d,lineN:c}}function $b(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var e=a[c];e.hidden||e.node&&!e.changes||++b}return b}function Ma(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){cc(a);a.state.focused&&Ma(a)})}function vb(a){function b(){cc(a)||c?(a.display.pollingFast=!1,Ma(a)):(c=!0,a.display.poll.set(60,
b))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function cc(a){var b=a.display.input,c=a.display.prevInput,e=a.doc;if(!a.state.focused||Xe(b)&&!c||wb(a)||a.options.disableInput)return!1;a.state.pasteIncoming&&a.state.fakedLastChar&&(b.value=b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var d=b.value;if(d==c&&!a.somethingSelected())return!1;if(Aa&&!za&&a.display.inputHasSelection===d)return na(a),!1;var g=!a.curOp;g&&va(a);a.display.shift=!1;8203!=d.charCodeAt(0)||
e.sel!=a.display.selForContextMenu||c||(c="\u200b");for(var f=0,h=Math.min(c.length,d.length);h>f&&c.charCodeAt(f)==d.charCodeAt(f);)++f;for(var h=d.slice(f),k=dc(h),l=a.state.pasteIncoming&&1<k.length&&e.sel.ranges.length==k.length,s=e.sel.ranges.length-1;0<=s;s--){var n=e.sel.ranges[s],r=n.from(),p=n.to();f<c.length?r=J(r.line,r.ch-(c.length-f)):a.state.overwrite&&n.empty()&&!a.state.pasteIncoming&&(p=J(p.line,Math.min(T(e,p.line).text.length,p.ch+ga(k).length)));var x=a.curOp.updateInput,p={from:r,
to:p,text:l?[k[s]]:k,origin:a.state.pasteIncoming?"paste":a.state.cutIncoming?"cut":"+input"};if(ec(a.doc,p),pa(a,"inputRead",a,p),h&&!a.state.pasteIncoming&&a.options.electricChars&&a.options.smartIndent&&100>n.head.ch&&(!s||e.sel.ranges[s-1].head.line!=n.head.line))if(r=a.getModeAt(n.head),r.electricChars)for(p=0;p<r.electricChars.length;p++){if(-1<h.indexOf(r.electricChars.charAt(p))){tc(a,n.head.line,"smart");break}}else r.electricInput&&(p=Nb(p),r.electricInput.test(T(e,p.line).text.slice(0,
p.ch))&&tc(a,n.head.line,"smart"))}return ac(a),a.curOp.updateInput=x,a.curOp.typing=!0,1E3<d.length||-1<d.indexOf("\n")?b.value=a.display.prevInput="":a.display.prevInput=d,g&&N(a),a.state.pasteIncoming=a.state.cutIncoming=!1,!0}function na(a,b){var c,e,d=a.doc;a.somethingSelected()?(a.display.prevInput="",c=d.sel.primary(),e=(c=ae&&(100<c.to().line-c.from().line||1E3<(e=a.getSelection()).length))?"-":e||a.getSelection(),a.display.input.value=e,a.state.focused&&uc(a.display.input),Aa&&!za&&(a.display.inputHasSelection=
e)):b||(a.display.prevInput=a.display.input.value="",Aa&&!za&&(a.display.inputHasSelection=null));a.display.inaccurateSelection=c}function wa(a){"nocursor"==a.options.readOnly||pd&&yb()==a.display.input||a.display.input.focus()}function Ob(a){a.state.focused||(wa(a),Kc(a))}function wb(a){return a.options.readOnly||a.doc.cantEdit}function Jc(a){function b(){a.state.focused&&setTimeout(ab(wa,a),0)}function c(b){lb(a,b)||zd(b)}function e(b){if(a.somethingSelected())d.inaccurateSelection&&(d.prevInput=
"",d.inaccurateSelection=!1,d.input.value=a.getSelection(),uc(d.input));else{for(var c="",g=[],f=0;f<a.doc.sel.ranges.length;f++){var h=a.doc.sel.ranges[f].head.line,h={anchor:J(h,0),head:J(h+1,0)};g.push(h);c+=a.getRange(h.anchor,h.head)}"cut"==b.type?a.setSelections(g,null,Jb):(d.prevInput="",d.input.value=c,uc(d.input))}"cut"==b.type&&(a.state.cutIncoming=!0)}var d=a.display;W(d.scroller,"mousedown",ja(a,Mc));nb?W(d.scroller,"dblclick",ja(a,function(b){if(!lb(a,b)){var c=Fa(a,b);c&&(!Pb(a,b,"gutterClick",
!0,pa)&&!mb(a.display,b))&&(Ga(b),b=Ad(a.doc,c),aa(a.doc,b.anchor,b.head))}})):W(d.scroller,"dblclick",function(b){lb(a,b)||Ga(b)});W(d.lineSpace,"selectstart",function(a){mb(d,a)||Ga(a)});Bd||W(d.scroller,"contextmenu",function(b){be(a,b)});W(d.scroller,"scroll",function(){d.scroller.clientHeight&&(Ya(a,d.scroller.scrollTop),eb(a,d.scroller.scrollLeft,!0),qa(a,"scroll",a))});W(d.scrollbarV,"scroll",function(){d.scroller.clientHeight&&Ya(a,d.scrollbarV.scrollTop)});W(d.scrollbarH,"scroll",function(){d.scroller.clientHeight&&
eb(a,d.scrollbarH.scrollLeft)});W(d.scroller,"mousewheel",function(b){Qb(a,b)});W(d.scroller,"DOMMouseScroll",function(b){Qb(a,b)});W(d.scrollbarH,"mousedown",b);W(d.scrollbarV,"mousedown",b);W(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0});W(d.input,"keyup",ja(a,Sc));W(d.input,"input",function(){Aa&&!za&&a.display.inputHasSelection&&(a.display.inputHasSelection=null);vb(a)});W(d.input,"keydown",ja(a,vc));W(d.input,"keypress",ja(a,fc));W(d.input,"focus",ab(Kc,a));W(d.input,
"blur",ab(Lc,a));a.options.dragDrop&&(W(d.scroller,"dragstart",function(b){var c=a;if(Aa&&(!c.state.draggingText||100>+new Date-ce))zd(b);else if(!lb(c,b)&&!mb(c.display,b)&&(b.dataTransfer.setData("Text",c.getSelection()),b.dataTransfer.setDragImage&&!de)){var d=O("img",null,null,"position: fixed; left: 0; top: 0;");d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";Za&&(d.width=d.height=1,c.display.wrapper.appendChild(d),d._top=d.offsetTop);b.dataTransfer.setDragImage(d,
0,0);Za&&d.parentNode.removeChild(d)}}),W(d.scroller,"dragenter",c),W(d.scroller,"dragover",c),W(d.scroller,"drop",ja(a,wc)));W(d.scroller,"paste",function(b){mb(d,b)||(a.state.pasteIncoming=!0,wa(a),vb(a))});W(d.input,"paste",function(){if(Ba&&!a.state.fakedLastChar&&!(200>new Date-a.state.lastMiddleDown)){var b=d.input.selectionStart,c=d.input.selectionEnd;d.input.value+="$";d.input.selectionStart=b;d.input.selectionEnd=c;a.state.fakedLastChar=!0}a.state.pasteIncoming=!0;vb(a)});W(d.input,"cut",
e);W(d.input,"copy",e);sd&&W(d.sizer,"mouseup",function(){yb()==d.input&&d.input.blur();wa(a)})}function Rb(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;a.setSize()}function mb(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function Fa(a,b,c,d){var e=a.display;if(!c&&(c=b.target||b.srcElement,c==e.scrollbarH||c==e.scrollbarV||c==e.scrollbarFiller||c==e.gutterFiller))return null;var g,
f,e=e.lineSpace.getBoundingClientRect();try{g=b.clientX-e.left,f=b.clientY-e.top}catch(h){return null}var k;b=ub(a,g,f);if(d&&1==b.xRel&&(k=T(a.doc,b.line).text).length==b.ch)d=Wa(k,k.length,a.options.tabSize)-k.length,b=J(b.line,Math.max(0,Math.round((g-hb(a.display).left)/Na(a.display))-d));return b}function Mc(a){if(!lb(this,a)){var b=this.display;if(b.shift=a.shiftKey,mb(b,a))return Ba||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100)),void 0;if(!Pb(this,a,"gutterClick",
!0,pa)){var c=Fa(this,a);switch(window.focus(),ee(a)){case 1:c?gc(this,a,c):(a.target||a.srcElement)==b.scroller&&Ga(a);break;case 2:Ba&&(this.state.lastMiddleDown=+new Date);c&&aa(this.doc,c);setTimeout(ab(wa,this),20);Ga(a);break;case 3:Bd&&be(this,a)}}}}function gc(a,b,c){setTimeout(ab(Ob,a),0);var d,e=+new Date;Tc&&Tc.time>e-400&&0==Y(Tc.pos,c)?d="triple":Uc&&Uc.time>e-400&&0==Y(Uc.pos,c)?(d="double",Tc={time:e,pos:c}):(d="single",Uc={time:e,pos:c});var e=a.doc.sel,g=zb?b.metaKey:b.ctrlKey;a.options.dragDrop&&
Ye&&!g&&!wb(a)&&"single"==d&&-1<e.contains(c)&&e.somethingSelected()?xc(a,b,c):Cd(a,b,c,d,g)}function xc(a,b,c){var d=a.display,e=ja(a,function(g){Ba&&(d.scroller.draggable=!1);a.state.draggingText=!1;xb(document,"mouseup",e);xb(d.scroller,"drop",e);10>Math.abs(b.clientX-g.clientX)+Math.abs(b.clientY-g.clientY)&&(Ga(g),aa(a.doc,c),wa(a),nb&&!za&&setTimeout(function(){document.body.focus();wa(a)},20))});Ba&&(d.scroller.draggable=!0);a.state.draggingText=e;d.scroller.dragDrop&&d.scroller.dragDrop();
W(document,"mouseup",e);W(d.scroller,"drop",e)}function Cd(a,b,c,d,e){function g(b){if(0!=Y(x,b))if(x=b,"rect"==d){var e=[],f=a.options.tabSize,h=Wa(T(l,c.line).text,c.ch,f),k=Wa(T(l,b.line).text,b.ch,f),Ha=Math.min(h,k),h=Math.max(h,k),k=Math.min(c.line,b.line);for(b=Math.min(a.lastLine(),Math.max(c.line,b.line));b>=k;k++){var s=T(l,k).text,q=fe(s,Ha,f);Ha==h?e.push(new M(J(k,q),J(k,q))):s.length>q&&e.push(new M(J(k,q),J(k,fe(s,h,f))))}e.length||e.push(new M(c,c));ba(l,R(p.ranges.slice(0,r).concat(e),
r),Vc)}else e=n,f=e.anchor,Ha=b,"single"!=d&&(b="double"==d?Ad(l,b):new M(J(b.line,0),F(l,J(b.line+1,0))),0<Y(b.anchor,f)?(Ha=b.head,f=Q(e.from(),b.anchor)):(Ha=b.anchor,f=ca(e.to(),b.head))),e=p.ranges.slice(0),e[r]=new M(F(l,f),Ha),ba(l,R(e,r),Vc)}function f(b){var c=++u,e=Fa(a,b,!0,"rect"==d);if(e)if(0!=Y(e,x)){Ob(a);g(e);var h=s(k,l);(e.line>=h.to||e.line<h.from)&&setTimeout(ja(a,function(){u==c&&f(b)}),150)}else{var Ha=b.clientY<q.top?-20:b.clientY>q.bottom?20:0;Ha&&setTimeout(ja(a,function(){u==
c&&(k.scroller.scrollTop+=Ha,f(b))}),50)}}function h(b){u=1/0;Ga(b);wa(a);xb(document,"mousemove",v);xb(document,"mouseup",t);l.history.lastSelOrigin=null}var k=a.display,l=a.doc;Ga(b);var n,r,p=l.sel;(e&&!b.shiftKey?(r=l.sel.contains(c),n=-1<r?l.sel.ranges[r]:new M(c,c)):n=l.sel.primary(),b.altKey)?(d="rect",e||(n=new M(c,c)),c=Fa(a,b,!0,!0),r=-1):"double"==d?(b=Ad(l,c),n=a.display.shift||l.extend?G(l,n,b.anchor,b.head):b):"triple"==d?(b=new M(J(c.line,0),F(l,J(c.line+1,0))),n=a.display.shift||l.extend?
G(l,n,b.anchor,b.head):b):n=G(l,n,c);e?-1<r?Z(l,r,n,Vc):(r=l.sel.ranges.length,ba(l,R(l.sel.ranges.concat([n]),r),{scroll:!1,origin:"*mouse"})):(r=0,ba(l,new $([n],0),Vc),p=l.sel);var x=c,q=k.wrapper.getBoundingClientRect(),u=0,v=ja(a,function(a){(Aa&&!Ze?a.buttons:ee(a))?f(a):h(a)}),t=ja(a,h);W(document,"mousemove",v);W(document,"mouseup",t)}function Pb(a,b,c,e,d){try{var g=b.clientX,f=b.clientY}catch(h){return!1}if(g>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;e&&Ga(b);
e=a.display;var k=e.lineDiv.getBoundingClientRect();if(f>k.bottom||!Ua(a,c))return Dd(b);f-=k.top-e.viewOffset;for(k=0;k<a.options.gutters.length;++k){var l=e.gutters.childNodes[k];if(l&&l.getBoundingClientRect().right>=g)return g=Ib(a.doc,f),d(a,c,a,g,a.options.gutters[k],b),Dd(b)}}function wc(a){var b=this;if(!lb(b,a)&&!mb(b.display,a)){Ga(a);Aa&&(ce=+new Date);var c=Fa(b,a,!0),e=a.dataTransfer.files;if(c&&!wb(b))if(e&&e.length&&window.FileReader&&window.File){var d=e.length,g=Array(d),f=0;a=function(a,
e){var h=new FileReader;h.onload=ja(b,function(){if(g[e]=h.result,++f==d){c=F(b.doc,c);var a={from:c,to:c,text:dc(g.join("\n")),origin:"paste"};ec(b.doc,a);sa(b.doc,C(c,Nb(a)))}});h.readAsText(a)};for(var h=0;d>h;++h)a(e[h],h)}else{if(b.state.draggingText&&-1<b.doc.sel.contains(c))return b.state.draggingText(a),setTimeout(ab(wa,b),20),void 0;try{if(g=a.dataTransfer.getData("Text")){var k=b.state.draggingText&&b.listSelections();if(Ta(b.doc,C(c,c)),k)for(h=0;h<k.length;++h)Wc(b.doc,"",k[h].anchor,
k[h].head,"drag");b.replaceSelection(g,"around","paste");wa(b)}}catch(l){}}}}function Ya(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,yc||y(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),yc&&y(a),bb(a,100))}function eb(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,v(a),a.display.scroller.scrollLeft!=
b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function Qb(a,b){var c=b.wheelDeltaX,e=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==e&&b.detail&&b.axis==b.VERTICAL_AXIS?e=b.detail:null==e&&(e=b.wheelDelta);var d=a.display,g=d.scroller;if(c&&g.scrollWidth>g.clientWidth||e&&g.scrollHeight>g.clientHeight){if(e&&zb&&Ba){var f=b.target,h=d.view;a:for(;f!=g;f=f.parentNode)for(var k=0;k<h.length;k++)if(h[k].node==
f){a.display.currentWheelTarget=f;break a}}if(c&&!yc&&!Za&&null!=$a)return e&&Ya(a,Math.max(0,Math.min(g.scrollTop+e*$a,g.scrollHeight-g.clientHeight))),eb(a,Math.max(0,Math.min(g.scrollLeft+c*$a,g.scrollWidth-g.clientWidth))),Ga(b),d.wheelStartX=null,void 0;e&&null!=$a&&(f=e*$a,h=a.doc.scrollTop,k=h+d.wrapper.clientHeight,0>f?h=Math.max(0,h+f-50):k=Math.min(a.doc.height,k+f+50),y(a,{top:h,bottom:k}));20>Xc&&(null==d.wheelStartX?(d.wheelStartX=g.scrollLeft,d.wheelStartY=g.scrollTop,d.wheelDX=c,d.wheelDY=
e,setTimeout(function(){if(null!=d.wheelStartX){var a=g.scrollLeft-d.wheelStartX,b=g.scrollTop-d.wheelStartY,a=b&&d.wheelDY&&b/d.wheelDY||a&&d.wheelDX&&a/d.wheelDX;d.wheelStartX=d.wheelStartY=null;a&&($a=($a*Xc+a)/(Xc+1),++Xc)}},200)):(d.wheelDX+=c,d.wheelDY+=e))}}function Sb(a,b,c){if("string"==typeof b&&(b=Yc[b],!b))return!1;a.display.pollingFast&&cc(a)&&(a.display.pollingFast=!1);var e=a.display.shift,d=!1;try{wb(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),d=b(a)!=ge}finally{a.display.shift=
e,a.state.suppressEdits=!1}return d}function zc(a){var b=a.state.keyMaps.slice(0);return a.options.extraKeys&&b.push(a.options.extraKeys),b.push(a.options.keyMap),b}function Db(a,b){var c=Ed(a.options.keyMap),e=c.auto;clearTimeout(he);e&&!$e(b)&&(he=setTimeout(function(){Ed(a.options.keyMap)==c&&(a.options.keyMap=e.call?e.call(null,a):e,f(a))},50));var d=af(b,!0),g=!1;if(!d)return!1;var h=zc(a);return g=b.shiftKey?Zc("Shift-"+d,h,function(b){return Sb(a,b,!0)})||Zc(d,h,function(b){return("string"==
typeof b?/^go[A-Z]/.test(b):b.motion)?Sb(a,b):void 0}):Zc(d,h,function(b){return Sb(a,b)}),g&&(Ga(b),tb(a),pa(a,"keyHandled",a,d,b)),g}function $c(a,b,c){var e=Zc("'"+c+"'",zc(a),function(b){return Sb(a,b,!0)});return e&&(Ga(b),tb(a),pa(a,"keyHandled",a,"'"+c+"'",b)),e}function vc(a){if(Ob(this),!lb(this,a)){nb&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=Db(this,a);Za&&(Fd=c?b:null,!c&&88==b&&!ae&&(zb?a.metaKey:a.ctrlKey)&&this.replaceSelection("",
null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||ad(this)}}function ad(a){function b(a){18!=a.keyCode&&a.altKey||(bd(c,"CodeMirror-crosshair"),xb(document,"keyup",b),xb(document,"mouseover",b))}var c=a.display.lineDiv;cd(c,"CodeMirror-crosshair");W(document,"keyup",b);W(document,"mouseover",b)}function Sc(a){lb(this,a)||16==a.keyCode&&(this.doc.sel.shift=!1)}function fc(a){if(!lb(this,a)){var b=a.keyCode,c=a.charCode;if(Za&&b==Fd)return Fd=null,Ga(a),void 0;if(!(Za&&
(!a.which||10>a.which)||sd)||!Db(this,a))b=String.fromCharCode(null==c?b:c),$c(this,a,b)||(Aa&&!za&&(this.display.inputHasSelection=null),vb(this))}}function Kc(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(qa(a,"focus",a),a.state.focused=!0,cd(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(na(a),Ba&&setTimeout(ab(na,a,!0),0))),Ma(a),tb(a))}function Lc(a){a.state.focused&&(qa(a,"blur",a),a.state.focused=!1,bd(a.display.wrapper,"CodeMirror-focused"));
clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||(a.display.shift=!1)},150)}function be(a,b){function c(){if(null!=d.input.selectionStart){var b=a.somethingSelected(),e=d.input.value="\u200b"+(b?d.input.value:"");d.prevInput=b?"":"\u200b";d.input.selectionStart=1;d.input.selectionEnd=e.length}}function e(){if(d.inputDiv.style.position="relative",d.input.style.cssText=h,za&&(d.scrollbarV.scrollTop=d.scroller.scrollTop=f),Ma(a),null!=d.input.selectionStart){(!Aa||za)&&c();var b=
0,g=function(){d.selForContextMenu==a.doc.sel&&0==d.input.selectionStart?ja(a,Yc.selectAll)(a):10>b++?d.detectingSelectAll=setTimeout(g,500):na(a)};d.detectingSelectAll=setTimeout(g,200)}}if(!lb(a,b,"contextmenu")){var d=a.display;if(!mb(d,b)&&(!Ua(a,"gutterContextMenu")||!Pb(a,b,"gutterContextMenu",!1,qa))){var g=Fa(a,b),f=d.scroller.scrollTop;if(g&&!Za){a.options.resetSelectionOnContextMenu&&-1==a.doc.sel.contains(g)&&ja(a,ba)(a.doc,C(g),Jb);var h=d.input.style.cssText;if(d.inputDiv.style.position=
"absolute",d.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: "+(Aa?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",wa(a),na(a),a.somethingSelected()||(d.input.value=d.prevInput=" "),d.selForContextMenu=a.doc.sel,clearTimeout(d.detectingSelectAll),Aa&&!za&&c(),Bd){zd(b);var k=function(){xb(window,"mouseup",
k);setTimeout(e,20)};W(window,"mouseup",k)}else setTimeout(e,50)}}}}function ie(a,b){if(0>Y(a,b.from))return a;if(0>=Y(a,b.to))return Nb(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=Nb(b).ch-b.to.ch),J(c,d)}function V(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new M(ie(e.anchor,b),ie(e.head,b)))}return R(c,a.sel.primIndex)}function je(a,b,c){return a.line==b.line?J(c.line,a.ch-b.ch+c.ch):J(c.line+(a.line-b.line),a.ch)}
function ke(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};return c&&(b.update=function(b,c,d,e){b&&(this.from=F(a,b));c&&(this.to=F(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)}),qa(a,"beforeChange",a,b),a.cm&&qa(a.cm,"beforeChange",a.cm,b),b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function ec(a,b,c){if(a.cm){if(!a.cm.curOp)return ja(a.cm,ec)(a,b,c);if(a.cm.state.suppressEdits)return}if(!(Ua(a,"beforeChange")||
a.cm&&Ua(a.cm,"beforeChange"))||(b=ke(a,b,!0)))if(c=le&&!c&&bf(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)me(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else me(a,b)}function me(a,b){if(1!=b.text.length||""!=b.text[0]||0!=Y(b.from,b.to)){var c=V(a,b);ne(a,b,c,a.cm?a.cm.curOp.id:0/0);Ac(a,b,c,Gd(a,b));var d=[];Tb(a,function(a,c){c||-1!=ta(d,a.history)||(oe(a.history,b),d.push(a.history));Ac(a,b,null,Gd(a,b))})}}function dd(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d,e=a.history,g=
a.sel,f="undo"==b?e.done:e.undone,h="undo"==b?e.undone:e.done,k=0;k<f.length&&(d=f[k],c?!d.ranges||d.equals(a.sel):d.ranges);k++);if(k!=f.length){for(e.lastOrigin=e.lastSelOrigin=null;d=f.pop(),d.ranges;){if(Nc(d,h),c&&!d.equals(a.sel))return ba(a,d,{clearRedo:!1}),void 0;g=d}c=[];Nc(g,h);h.push({changes:c,generation:e.generation});e.generation=d.generation||++e.maxGeneration;e=Ua(a,"beforeChange")||a.cm&&Ua(a.cm,"beforeChange");for(k=d.changes.length-1;0<=k;--k){var l=d.changes[k];if(l.origin=b,
e&&!ke(a,l,!1))return f.length=0,void 0;c.push(Hd(a,l));g=k?V(a,l,null):ga(f);Ac(a,l,g,pe(a,l));!k&&a.cm&&a.cm.scrollIntoView(l);var s=[];Tb(a,function(a,b){b||-1!=ta(s,a.history)||(oe(a.history,l),s.push(a.history));Ac(a,l,null,pe(a,l))})}}}}function qe(a,b){if(0!=b&&(a.first+=b,a.sel=new $(Id(a.sel.ranges,function(a){return new M(J(a.anchor.line+b,a.anchor.ch),J(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){xa(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Va(a.cm,
d,"gutter")}}function Ac(a,b,c,d){if(a.cm&&!a.cm.curOp)return ja(a.cm,Ac)(a,b,c,d);if(b.to.line<a.first)return qe(a,b.text.length-1-(b.to.line-b.from.line)),void 0;if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);qe(a,e);b={from:J(a.first,0),to:J(b.to.line+e,b.to.ch),text:[ga(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:J(e,T(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=Bc(a,b.from,b.to);c||(c=V(a,b,null));
a.cm?cf(a.cm,b,d):Jd(a,b,d);Ta(a,c,Jb)}}function cf(a,b,c){var d=a.doc,g=a.display,f=b.from,h=b.to,k=!1,l=f.line;a.options.lineWrapping||(l=ka(ib(T(d,f.line))),d.iter(l,h.line+1,function(a){return a==g.maxLine?(k=!0,!0):void 0}));-1<d.sel.contains(b.from,b.to)&&Zd(a);Jd(d,b,c,e(a));a.options.lineWrapping||(d.iter(l,f.line+b.text.length,function(a){var b=p(a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=b,g.maxLineChanged=!0,k=!1)}),k&&(a.curOp.updateMaxLine=!0));d.frontier=Math.min(d.frontier,
f.line);bb(a,400);c=b.text.length-(h.line-f.line)-1;f.line!=h.line||1!=b.text.length||re(a.doc,b)?xa(a,f.line,h.line+1,c):Va(a,f.line,"text");c=Ua(a,"changes");if((d=Ua(a,"change"))||c)b={from:f,to:h,text:b.text,removed:b.removed,origin:b.origin},d&&pa(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function Wc(a,b,c,d,e){if(d||(d=c),0>Y(d,c)){var g=d;d=c;c=g}"string"==typeof b&&(b=dc(b));ec(a,{from:c,to:d,text:b,origin:e})}function Rc(a,b,
c,d,e){var g=a.display,f=Ca(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:g.scroller.scrollTop,k=g.scroller.clientHeight-ob,l={},s=a.doc.height+(g.mover.offsetHeight-g.lineSpace.offsetHeight),n=f>c,f=e>s-f;h>c?l.scrollTop=n?0:c:e>h+k&&(c=Math.min(c,(f?s:e)-k),c!=h&&(l.scrollTop=c));a=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:g.scroller.scrollLeft;h=g.scroller.clientWidth-ob;b+=g.gutters.offsetWidth;d+=g.gutters.offsetWidth;g=g.gutters.offsetWidth;c=g+10>
b;return a+g>b||c?(c&&(b=0),l.scrollLeft=Math.max(0,b-10-g)):d>h+a-3&&(l.scrollLeft=d+10-h),l}function ed(a,b,c){(null!=b||null!=c)&&fd(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function ac(a){fd(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?J(b.line,b.ch-1):b,d=J(b.line,b.ch+1));a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,
isCursor:!0}}function fd(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=Sa(a,b.from),d=Sa(a,b.to),b=Rc(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function tc(a,b,c,d){var e,g=a.doc;null==c&&(c="add");"smart"==c&&(a.doc.mode.indent?e=Da(a,b):c="prev");var f=a.options.tabSize,h=T(g,b),k=Wa(h.text,null,f);h.stateAfter&&(h.stateAfter=null);var l,s=h.text.match(/^\s*/)[0];
if(d||/\S/.test(h.text)){if("smart"==c&&(l=a.doc.mode.indent(e,h.text.slice(s.length),h.text),l==ge)){if(!d)return;c="prev"}}else l=0,c="not";"prev"==c?l=b>g.first?Wa(T(g,b-1).text,null,f):0:"add"==c?l=k+a.options.indentUnit:"subtract"==c?l=k-a.options.indentUnit:"number"==typeof c&&(l=k+c);l=Math.max(0,l);d="";e=0;if(a.options.indentWithTabs)for(c=Math.floor(l/f);c;--c)e+=f,d+="\t";if(l>e&&(d+=se(l-e)),d!=s)Wc(a.doc,d,J(b,0),J(b,s.length),"+input");else for(c=0;c<g.sel.ranges.length;c++)if(a=g.sel.ranges[c],
a.head.line==b&&a.head.ch<s.length){e=J(b,s.length);Z(g,c,new M(e,e));break}h.stateAfter=null}function gd(a,b,c,d){var e=b,g=b,f=a.doc;return"number"==typeof b?g=T(f,Math.max(f.first,Math.min(b,f.first+f.size-1))):e=ka(b),null==e?null:(d(g,e)&&Va(a,e,c),g)}function hd(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var g=b(c[e]);d.length&&0>=Y(g.from,ga(d).to);){var f=d.pop();if(0>Y(f.from,g.from)){g.from=f.from;break}}d.push(g)}ha(a,function(){for(var b=d.length-1;0<=b;b--)Wc(a.doc,
"",d[b].from,d[b].to,"+delete");ac(a)})}function Kd(a,b,c,d,e){function g(b){var d=(e?yd:te)(k,h,c,!0);if(null==d){b||(b=f+c,b=!(b<a.first||b>=a.first+a.size?l=!1:(f=b,k=T(a,b))));if(b)return l=!1;h=e?(0>c?Pc:Oc)(k):0>c?k.text.length:0}else h=d;return!0}var f=b.line,h=b.ch;b=c;var k=T(a,f),l=!0;if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d){var s=null;d="group"==d;for(var n=!0;!(0>c)||g(!n);n=!1){var r=k.text.charAt(h)||"\n",r=id(r)?"w":d&&"\n"==r?"n":!d||/\s/.test(r)?null:
"p";if(!d||n||r||(r="s"),s&&s!=r){0>c&&(c=1,g());break}if(r&&(s=r),0<c&&!g(!n))break}}b=Ja(a,J(f,h),b,!0);return l||(b.hitSide=!0),b}function ue(a,b,c,d){var e,g=a.doc,f=b.left;"page"==d?(d=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),e=b.top+c*(d-(0>c?1.5:0.5)*Ca(a.display))):"line"==d&&(e=0<c?b.bottom+3:b.top-3);for(;;){var h=ub(a,f,e);if(!h.outside)break;if(0>c?0>=e:e>=g.height){h.hitSide=!0;break}e+=5*c}return h}function Ad(a,b){var c=T(a,
b.line).text,d=b.ch,e=b.ch;if(c){(0>b.xRel||e==c.length)&&d?--d:++e;for(var g=c.charAt(d),g=id(g)?id:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!id(a)};0<d&&g(c.charAt(d-1));)--d;for(;e<c.length&&g(c.charAt(e));)++e}return new M(J(b.line,d),J(b.line,e))}function X(b,c,d,e){a.defaults[b]=c;d&&(Zb[b]=e?function(a,b,c){c!=Vd&&d(a,b,c)}:d)}function Ed(a){return"string"==typeof a?pb[a]:a}function hc(a,b,c,d,e){if(d&&d.shared)return df(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return ja(a.cm,
hc)(a,b,c,d,e);var g=new Ub(a,e);e=Y(b,c);if(d&&kc(d,g,!1),0<e||0==e&&!1!==g.clearWhenEmpty)return g;if(g.replacedWith&&(g.collapsed=!0,g.widgetNode=O("span",[g.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(g.widgetNode.ignoreEvents=!0),d.insertLeft&&(g.widgetNode.insertLeft=!0)),g.collapsed){if(ve(a,b.line,b,c,g)||b.line!=c.line&&ve(a,c.line,b,c,g))throw Error("Inserting collapsed marker partially overlapping an existing one");Ab=!0}g.addToHistory&&ne(a,{from:b,to:c,origin:"markText"},
a.sel,0/0);var f,h=b.line,k=a.cm;if(a.iter(h,c.line+1,function(a){k&&g.collapsed&&!k.options.lineWrapping&&ib(a)==k.display.maxLine&&(f=!0);g.collapsed&&h!=b.line&&cb(a,0);var d=new jd(g,h==b.line?b.ch:null,h==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++h}),g.collapsed&&a.iter(b.line,c.line+1,function(b){Fb(a,b)&&cb(b,0)}),g.clearOnEnter&&W(g,"beforeCursorEnter",function(){g.clear()}),g.readOnly&&(le=!0,(a.history.done.length||a.history.undone.length)&&
a.clearHistory()),g.collapsed&&(g.id=++ef,g.atomic=!0),k){if(f&&(k.curOp.updateMaxLine=!0),g.collapsed)xa(k,b.line,c.line+1);else if(g.className||g.title||g.startStyle||g.endStyle)for(d=b.line;d<=c.line;d++)Va(k,d,"text");g.atomic&&rb(k.doc);pa(k,"markerAdded",k,g)}return g}function df(a,b,c,d,e){d=kc(d);d.shared=!1;var g=[hc(a,b,c,d,e)],f=g[0],h=d.widgetNode;return Tb(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));g.push(hc(a,F(a,b),F(a,c),d,e));for(var k=0;k<a.linked.length;++k)if(a.linked[k].isParent)return;
f=ga(g)}),new kd(g,f)}function we(a){return a.findMarks(J(a.first,0),a.clipPos(J(a.lastLine())),function(a){return a.parent})}function ff(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];Tb(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var g=c.markers[e];-1==ta(d,g.doc)&&(g.parent=null,c.markers.splice(e--,1))}}}function jd(a,b,c){this.marker=a;this.from=b;this.to=c}function Cc(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Gd(a,
b){var c=L(a,b.from.line)&&T(a,b.from.line).markedSpans,d=L(a,b.to.line)&&T(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,g=b.to.ch,f=0==Y(b.from,b.to);if(c)for(var h,k=0;k<c.length;++k){var l=c[k],s=l.marker;if(null==l.from||(s.inclusiveLeft?l.from<=e:l.from<e)||l.from==e&&"bookmark"==s.type&&(!f||!l.marker.insertLeft)){var n=null==l.to||(s.inclusiveRight?l.to>=e:l.to>e);(h||(h=[])).push(new jd(s,l.from,n?null:l.to))}}c=h;if(d){var r;for(h=0;h<d.length;++h)if(k=d[h],l=k.marker,null==
k.to||(l.inclusiveRight?k.to>=g:k.to>g)||k.from==g&&"bookmark"==l.type&&(!f||k.marker.insertLeft))s=null==k.from||(l.inclusiveLeft?k.from<=g:k.from<g),(r||(r=[])).push(new jd(l,s?null:k.from-g,null==k.to?null:k.to-g))}d=r;f=1==b.text.length;r=ga(b.text).length+(f?e:0);if(c)for(g=0;g<c.length;++g)h=c[g],null==h.to&&((k=Cc(d,h.marker))?f&&(h.to=null==k.to?null:k.to+r):h.to=e);if(d)for(g=0;g<d.length;++g)h=d[g],(null!=h.to&&(h.to+=r),null==h.from)?(k=Cc(c,h.marker))||(h.from=r,f&&(c||(c=[])).push(h)):
(h.from+=r,f&&(c||(c=[])).push(h));c&&(c=xe(c));d&&d!=c&&(d=xe(d));e=[c];if(!f){var p,f=b.text.length-2;if(0<f&&c)for(g=0;g<c.length;++g)null==c[g].to&&(p||(p=[])).push(new jd(c[g].marker,null,null));for(g=0;f>g;++g)e.push(p);e.push(d)}return e}function xe(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function pe(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(gf(c[d]));c=e}else c=
null;d=Gd(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var g=c[e],f=d[e];if(g&&f){var h=0;a:for(;h<f.length;++h){for(var k=f[h],l=0;l<g.length;++l)if(g[l].marker==k.marker)continue a;g.push(k)}}else f&&(c[e]=f)}return c}function bf(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=ta(d,c)||(d||(d=[])).push(c)}}),!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];
for(var e=c.find(0),g=0;g<a.length;++g){var f=a[g];if(!(0>Y(f.to,e.from)||0<Y(f.from,e.to))){var h=[g,1],k=Y(f.from,e.from),l=Y(f.to,e.to);(0>k||!c.inclusiveLeft&&!k)&&h.push({from:f.from,to:e.from});(0<l||!c.inclusiveRight&&!l)&&h.push({from:e.to,to:f.to});a.splice.apply(a,h);g+=h.length-1}}}return a}function ye(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function ze(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=
b}}function Ae(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=Y(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=Y(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function Hb(a,b){var c,d=Ab&&a.markedSpans;if(d)for(var e,g=0;g<d.length;++g)e=d[g],e.marker.collapsed&&null==(b?e.from:e.to)&&(!c||0>Ae(c,e.marker))&&(c=e.marker);return c}function ve(a,b,c,d,e){a=T(a,b);if(a=Ab&&a.markedSpans)for(b=0;b<a.length;++b){var g=
a[b];if(g.marker.collapsed){var f=g.marker.find(0),h=Y(f.from,c)||(g.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),k=Y(f.to,d)||(g.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=k||0>=h&&0<=k)&&(0>=h&&0<(Y(f.to,c)||(g.marker.inclusiveRight?1:0)-(e.inclusiveLeft?-1:0))||0<=h&&0>(Y(f.from,d)||(g.marker.inclusiveLeft?-1:0)-(e.inclusiveRight?1:0))))return!0}}}function ib(a){for(var b;b=Hb(a,!0);)a=b.find(-1,!0).line;return a}function td(a,b){var c=T(a,b),d=ib(c);return c==d?b:ka(d)}
function Wd(a,b){if(b>a.lastLine())return b;var c,d=T(a,b);if(!Fb(a,d))return b;for(;c=Hb(d,!1);)d=c.find(1,!0).line;return ka(d)+1}function Fb(a,b){var c=Ab&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed)if(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&Ld(a,b,d))return!0}function Ld(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),Ld(a,b.line,Cc(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,
e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&Ld(a,b,d))return!0}function rc(a){if(null!=a.height)a=a.height;else{var b;a:{b=document.body;var c=a.node;if(b.contains)b=b.contains(c);else{for(;c=c.parentNode;)if(c==b){b=!0;break a}b=void 0}}a=(b||fb(a.cm.display.measure,O("div",[a.node],null,"position: relative")),a.height=a.node.offsetHeight)}return a}function hf(a,
b,c,d){var e=new ld(a,c,d);return e.noHScroll&&(a.display.alignWidgets=!0),gd(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,!Fb(a.doc,b))c=db(b)<a.doc.scrollTop,cb(b,b.height+rc(e)),c&&ed(a,null,e.height),a.curOp.forceUpdate=!0;return!0}),e}function Be(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?
"bgClass":"textClass";null==b[d]?b[d]=c[2]:RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}return a}function Ce(b,c){if(b.blankLine)return b.blankLine(c);if(b.innerMode){var d=a.innerMode(b,c);return d.mode.blankLine?d.mode.blankLine(d.state):void 0}}function Md(a,b,c){c=a.token(b,c);if(b.pos<=b.start)throw Error("Mode "+a.name+" failed to advance stream.");return c}function De(b,c,d,e,g,f,h){var k=d.flattenSpans;null==k&&(k=b.options.flattenSpans);var l,s=0,n=null,r=new md(c,b.options.tabSize);
for(""==c&&Be(Ce(d,e),f);!r.eol();){if(r.pos>b.options.maxHighlightLength?(k=!1,h&&ud(b,c,e,r.pos),r.pos=c.length,l=null):l=Be(Md(d,r,e),f),b.options.addModeClass){var p=a.innerMode(d,e).mode.name;p&&(l="m-"+(l?p+" "+l:p))}k&&n==l||(s<r.start&&g(r.start,n),s=r.start,n=l);r.start=r.pos}for(;s<r.pos;)b=Math.min(r.pos,s+5E4),g(b,n),s=b}function $d(a,b,c,d){var e=[a.state.modeGen],g={};De(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},g,d);for(c=0;c<a.state.overlays.length;++c){var f=a.state.overlays[c],
h=1,k=0;De(a,b.text,f.mode,!0,function(a,b){for(var c=h;a>k;){var d=e[h];d>a&&e.splice(h,1,a,e[h+1],d);h+=2;k=Math.min(a,d)}if(b)if(f.opaque)e.splice(c,h-c,a,"cm-overlay "+b),h=c+2;else for(;h>c;c+=2)d=e[c+1],e[c+1]=(d?d+" ":"")+"cm-overlay "+b},g)}return{styles:e,classes:g.bgClass||g.textClass?g:null}}function Ee(a,b){if(!b.styles||b.styles[0]!=a.state.modeGen){var c=$d(a,b,b.stateAfter=Da(a,ka(b)));b.styles=c.styles;c.classes?b.styleClasses=c.classes:b.styleClasses&&(b.styleClasses=null)}return b.styles}
function ud(a,b,c,d){var e=a.doc.mode,g=new md(b,a.options.tabSize);g.start=g.pos=d||0;for(""==b&&Ce(e,c);!g.eol()&&g.pos<=a.options.maxHighlightLength;)Md(e,g,c),g.start=g.pos}function Fe(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?jf:kf;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function Xd(a,b){var c=O("span",null,null,Ba?"padding-right: .1px":null),c={pre:O("pre",[c]),content:c,col:0,pos:0,cm:a};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e,g=d?b.rest[d-1]:
b.line;c.pos=0;c.addToken=lf;(Aa||Ba)&&a.getOption("lineWrapping")&&(c.addToken=mf(c.addToken));var f;if(null!=Nd)f=Nd;else{f=fb(a.display.measure,document.createTextNode("A\u062eA"));var h=qc(f,0,1).getBoundingClientRect();f=h.left==h.right?!1:Nd=3>qc(f,1,2).getBoundingClientRect().right-h.right}f&&(e=gb(g))&&(c.addToken=nf(c.addToken,e));c.map=[];a:{f=c;var h=Ee(a,g),k=g.markedSpans,l=g.text,s=0;if(k)for(var n=void 0,r=void 0,p=void 0,x=void 0,q=void 0,u=void 0,v=l.length,t=0,V=1,U="",H=0;;){if(H==
t){for(var r=p=x=q="",u=null,H=1/0,S=[],A=0;A<k.length;++A){var w=k[A],E=w.marker;w.from<=t&&(null==w.to||w.to>t)?(null!=w.to&&H>w.to&&(H=w.to,p=""),E.className&&(r+=" "+E.className),E.startStyle&&w.from==t&&(x+=" "+E.startStyle),E.endStyle&&w.to==H&&(p+=" "+E.endStyle),E.title&&!q&&(q=E.title),E.collapsed&&(!u||0>Ae(u.marker,E))&&(u=w)):w.from>t&&H>w.from&&(H=w.from);"bookmark"==E.type&&w.from==t&&E.widgetNode&&S.push(E)}if(u&&(u.from||0)==t&&(Ge(f,(null==u.to?v+1:u.to)-t,u.marker,null==u.from),
null==u.to))break a;if(!u&&S.length)for(A=0;A<S.length;++A)Ge(f,0,S[A])}if(t>=v)break;for(S=Math.min(v,H);;){if(U){A=t+U.length;u||(w=A>S?U.slice(0,S-t):U,f.addToken(f,w,n?n+r:r,x,t+w.length==H?p:"",q));if(A>=S){U=U.slice(S-t);t=S;break}t=A;x=""}U=l.slice(s,s=h[V++]);n=Fe(h[V++],f.cm.options)}}else for(V=1;V<h.length;V+=2)f.addToken(f,l.slice(s,s=h[V]),Fe(h[V+1],f.cm.options))}g.styleClasses&&(g.styleClasses.bgClass&&(c.bgClass=He(g.styleClasses.bgClass,c.bgClass||"")),g.styleClasses.textClass&&(c.textClass=
He(g.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(of(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}return qa(a,"renderLine",a,b.line,c.pre),c}function lf(a,b,c,d,e,g){if(b){var f=a.cm.options.specialChars,h=!1;if(f.test(b))for(var k=document.createDocumentFragment(),l=0;;){f.lastIndex=l;var s=f.exec(b),n=s?s.index-l:b.length-
l;if(n){var r=document.createTextNode(b.slice(l,l+n));za?k.appendChild(O("span",[r])):k.appendChild(r);a.map.push(a.pos,a.pos+n,r);a.col+=n;a.pos+=n}if(!s)break;(l+=n+1,"\t"==s[0])?(r=a.cm.options.tabSize,s=r-a.col%r,r=k.appendChild(O("span",se(s),"cm-tab")),a.col+=s):(r=a.cm.options.specialCharPlaceholder(s[0]),za?k.appendChild(O("span",[r])):k.appendChild(r),a.col+=1);a.map.push(a.pos,a.pos+1,r);a.pos++}else a.col+=b.length,k=document.createTextNode(b),a.map.push(a.pos,a.pos+b.length,k),za&&(h=
!0),a.pos+=b.length;if(c||d||e||h)return b=c||"",d&&(b+=d),e&&(b+=e),d=O("span",[k],b),g&&(d.title=g),a.content.appendChild(d);a.content.appendChild(k)}}function mf(a){function b(a){for(var c=" ",d=0;d<a.length-2;++d)c+=d%2?" ":"\u00a0";return c+" "}return function(c,d,e,g,f,h){a(c,d.replace(/ {3,}/g,b),e,g,f,h)}}function nf(a,b){return function(c,d,e,g,f,h){e=e?e+" cm-force-border":"cm-force-border";for(var k=c.pos,l=k+d.length;;){for(var s=0;s<b.length;s++){var n=b[s];if(n.to>k&&n.from<=k)break}if(n.to>=
l)return a(c,d,e,g,f,h);a(c,d.slice(0,n.to-k),e,g,null,h);g=null;d=d.slice(n.to-k);k=n.to}}}function Ge(a,b,c,d){(c=!d&&c.widgetNode)&&(a.map.push(a.pos,a.pos+b,c),a.content.appendChild(c));a.pos+=b}function re(a,b){return 0==b.from.ch&&0==b.to.ch&&""==ga(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Jd(a,b,c,d){function e(a,c,g){var f=d;a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);ye(a);ze(a,g);c=f?f(a):1;c!=a.height&&cb(a,c);
pa(a,"change",a,b)}var g=b.from,f=b.to,h=b.text,k=T(a,g.line),l=T(a,f.line),s=ga(h),n=c?c[h.length-1]:null,r=f.line-g.line;if(re(a,b)){for(var p=0,x=[];p<h.length-1;++p)x.push(new Vb(h[p],c?c[p]:null,d));e(l,l.text,n);r&&a.remove(g.line,r);x.length&&a.insert(g.line,x)}else if(k==l)if(1==h.length)e(k,k.text.slice(0,g.ch)+s+k.text.slice(f.ch),n);else{x=[];for(p=1;p<h.length-1;++p)x.push(new Vb(h[p],c?c[p]:null,d));x.push(new Vb(s+k.text.slice(f.ch),n,d));e(k,k.text.slice(0,g.ch)+h[0],c?c[0]:null);a.insert(g.line+
1,x)}else if(1==h.length)e(k,k.text.slice(0,g.ch)+h[0]+l.text.slice(f.ch),c?c[0]:null),a.remove(g.line+1,r);else{e(k,k.text.slice(0,g.ch)+h[0],c?c[0]:null);e(l,s+l.text.slice(f.ch),n);p=1;for(x=[];p<h.length-1;++p)x.push(new Vb(h[p],c?c[p]:null,d));1<r&&a.remove(g.line+1,r-1);a.insert(g.line+1,x)}pa(a,"change",a,b)}function Dc(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Ec(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=
a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Tb(a,b,c){function d(a,e,g){if(a.linked)for(var f=0;f<a.linked.length;++f){var h=a.linked[f];if(h.doc!=e){var k=g&&h.sharedHist;(!c||k)&&(b(h.doc,k),d(h.doc,a,k))}}}d(a,null,!0)}function Ud(a,c){if(c.cm)throw Error("This document is already in use.");a.doc=c;c.cm=a;g(a);b(a);a.options.lineWrapping||q(a);a.options.mode=c.modeOption;xa(a)}function T(a,b){if(b-=a.first,0>b||b>=a.size)throw Error("There is no line "+
(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],g=e.chunkSize();if(g>b){c=e;break}b-=g}return c.lines[b]}function Bc(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e}),d}function Od(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function cb(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function ka(a){if(null==a.parent)return null;
var b=a.parent;a=ta(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Ib(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],g=e.height;if(g>b){a=e;continue a}b-=g;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(e>b)break;b-=e}return c+d}function db(a){a=ib(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;
b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length;++d){e=a.children[d];if(e==c)break;b+=e.height}return b}function gb(a){var b=a.order;return null==b&&(b=a.order=pf(a.text)),b}function nd(a){this.done=[];this.undone=[];this.undoDepth=1/0;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=null;this.generation=this.maxGeneration=a||1}function Hd(a,b){var c={from:J(b.from.line,b.from.ch),to:Nb(b),text:Bc(a,b.from,b.to)};return Ie(a,c,b.from.line,
b.to.line+1),Tb(a,function(a){Ie(a,c,b.from.line,b.to.line+1)},!0),c}function Yd(a){for(;a.length&&ga(a).ranges;)a.pop()}function ne(a,b,c,d){var e=a.history;e.undone.length=0;var g,f=+new Date;if((e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))&&(g=e.lastOp==d?(Yd(e.done),ga(e.done)):e.done.length&&!ga(e.done).ranges?ga(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),ga(e.done)):
void 0)){var h=ga(g.changes);0==Y(b.from,b.to)&&0==Y(b.from,h.to)?h.to=Nb(b):g.changes.push(Hd(a,b))}else{(g=ga(e.done))&&g.ranges||Nc(a.sel,e.done);g={changes:[Hd(a,b)],generation:e.generation};for(e.done.push(g);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift()}e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;h||qa(a,"historyAdded")}function Nc(a,b){var c=ga(b);c&&c.ranges&&c.equals(a)||b.push(a)}
function Ie(a,b,c,d){var e=b["spans_"+a.id],g=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[g]=c.markedSpans);++g})}function gf(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function ic(a,b,c){for(var d=0,e=[];d<a.length;++d){var g=a[d];if(g.ranges)e.push(c?$.prototype.deepCopy.call(g):g);else{var g=g.changes,f=[];e.push({changes:f});for(var h=
0;h<g.length;++h){var k,l=g[h];if(f.push({from:l.from,to:l.to,text:l.text}),b)for(var s in l)(k=s.match(/^spans_(\d+)$/))&&-1<ta(b,Number(k[1]))&&(ga(f)[s]=l[s],delete l[s])}}}return e}function Je(a,b,c,d){for(var e=0;e<a.length;++e){var g=a[e],f=!0;if(g.ranges){g.copied||(g=a[e]=g.deepCopy(),g.copied=!0);for(var h=0;h<g.ranges.length;h++){var f=g.ranges[h].anchor,k=b;c<f.line?f.line+=d:k<f.line&&(f.line=k,f.ch=0);f=g.ranges[h].head;k=b;c<f.line?f.line+=d:k<f.line&&(f.line=k,f.ch=0)}}else{for(h=0;h<
g.changes.length;++h)if(k=g.changes[h],c<k.from.line)k.from=J(k.from.line+d,k.from.ch),k.to=J(k.to.line+d,k.to.ch);else if(b<=k.to.line){f=!1;break}f||(a.splice(0,e+1),e=0)}}}function oe(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Je(a.done,c,d,e);Je(a.undone,c,d,e)}function Dd(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function ee(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),zb&&a.ctrlKey&&1==b&&(b=3),b}function pa(a,
b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);Cb||(++Qc,Cb=[],setTimeout(qf,0));for(var g=0;g<d.length;++g)Cb.push(c(d[g]))}}function qf(){--Qc;var a=Cb;Cb=null;for(var b=0;b<a.length;++b)a[b]()}function lb(a,b,c){return qa(a,c||b.type,a,b),Dd(b)||b.codemirrorIgnore}function Zd(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=
0;c<b.length;++c)-1==ta(a,b[c])&&a.push(b[c])}}function Ua(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function jc(a){a.prototype.on=function(a,b){W(this,a,b)};a.prototype.off=function(a,b){xb(this,a,b)}}function qd(){this.id=null}function fe(a,b,c){for(var d=0,e=0;;){var g=a.indexOf("\t",d);-1==g&&(g=a.length);var f=g-d;if(g==a.length||e+f>=b)return d+Math.min(f,b-e);if(e+=g-d,e+=c-e%c,d=g+1,e>=b)return d}}function se(a){for(;od.length<=a;)od.push(ga(od)+" ");return od[a]}function ga(a){return a[a.length-
1]}function ta(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function Id(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function Ke(a,b){var c;Object.create?c=Object.create(a):(c=function(){},c.prototype=a,c=new c);return b&&kc(b,c),c}function kc(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function ab(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Le(a){for(var b in a)if(a.hasOwnProperty(b)&&
a[b])return!1;return!0}function pc(a){return 768<=a.charCodeAt(0)&&rf.test(a)}function O(a,b,c,d){a=document.createElement(a);if(c&&(a.className=c),d&&(a.style.cssText=d),"string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function Gb(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function fb(a,b){return Gb(a).appendChild(b)}function yb(){return document.activeElement}function Pd(a){return RegExp("\\b"+
a+"\\b\\s*")}function bd(a,b){var c=Pd(b);c.test(a.className)&&(a.className=a.className.replace(c,""))}function cd(a,b){Pd(b).test(a.className)||(a.className+=" "+b)}function He(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!Pd(c[d]).test(b)&&(b+=" "+c[d]);return b}function Me(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function Re(){var a;W(window,"resize",function(){null==a&&(a=
setTimeout(function(){Fc=a=null;Me(Rb)},100))});W(window,"blur",function(){Me(Lc)})}function nc(a){if(null!=Fc)return Fc;var b=O("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return fb(a,b),b.offsetWidth&&(Fc=b.offsetHeight-b.clientHeight),Fc||0}function of(a){if(null==Qd){var b=O("span","\u200b");fb(a,O("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(Qd=1>=b.offsetWidth&&2<b.offsetHeight&&!mc)}return Qd?O("span","\u200b"):O("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}
function Te(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,g=0;g<a.length;++g){var f=a[g];(f.from<c&&f.to>b||b==c&&f.to==b)&&(d(Math.max(f.from,b),Math.min(f.to,c),1==f.level?"rtl":"ltr"),e=!0)}e||d(b,c,"ltr")}function wd(a){return a.level%2?a.from:a.to}function Oc(a){return(a=gb(a))?a[0].level%2?a[0].to:a[0].from:0}function Pc(a){var b=gb(a);return b?wd(ga(b)):a.text.length}function Ne(a,b){var c=T(a.doc,b),d=ib(c);d!=c&&(b=ka(d));d=(c=gb(d))?c[0].level%2?Pc(d):Oc(d):0;return J(b,d)}function xd(a,
b){sc=null;for(var c,d=0;d<a.length;++d){var e=a[d];if(e.from<b&&e.to>b)return d;if(e.from==b||e.to==b){if(null!=c){var g=e.level,f=a[c].level,h=a[0].level;return g==h||(f==h?0:f>g)?(e.from!=e.to&&(sc=c),d):(e.from!=e.to&&(sc=d),c)}c=d}}return c}function Rd(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&pc(a.text.charAt(b)));return b}function yd(a,b,c,d){var e=gb(a);if(!e)return te(a,b,c,d);var g=xd(e,b),f=e[g];for(b=Rd(a,b,f.level%2?-c:c,d);;){if(b>f.from&&b<f.to)return b;if(b==f.from||b==f.to)return xd(e,
b)==g?b:(f=e[g+c],0<c==f.level%2?f.to:f.from);if(f=e[g+=c],!f)return null;b=0<c==f.level%2?Rd(a,f.to,-1,d):Rd(a,f.from,1,d)}}function te(a,b,c,d){b+=c;if(d)for(;0<b&&pc(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var yc=/gecko\/\d/i.test(navigator.userAgent),nb=/MSIE \d/.test(navigator.userAgent),mc=nb&&(null==document.documentMode||8>document.documentMode),za=nb&&(null==document.documentMode||9>document.documentMode),Ze=nb&&(null==document.documentMode||10>document.documentMode),sf=
/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),Aa=nb||sf,Ba=/WebKit\//.test(navigator.userAgent),tf=Ba&&/Qt\/\d+\.\d+/.test(navigator.userAgent),uf=/Chrome\//.test(navigator.userAgent),Za=/Opera\//.test(navigator.userAgent),de=/Apple Computer/.test(navigator.vendor),sd=/KHTML\//.test(navigator.userAgent),Se=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),We=/PhantomJS/.test(navigator.userAgent),lc=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),pd=
lc||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),zb=lc||/Mac/.test(navigator.platform),vf=/win/i.test(navigator.platform),Wb=Za&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Wb&&(Wb=Number(Wb[1]));Wb&&15<=Wb&&(Za=!1,Ba=!0);var Oe=zb&&(tf||Za&&(null==Wb||12.11>Wb)),Bd=yc||Aa&&!za,le=!1,Ab=!1,J=a.Pos=function(a,b){return this instanceof J?(this.line=a,this.ch=b,void 0):new J(a,b)},Y=a.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};$.prototype={primary:function(){return this.ranges[this.primIndex]},
equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=Y(c.anchor,d.anchor)||0!=Y(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new M(J(this.ranges[b].anchor.line,this.ranges[b].anchor.ch),J(this.ranges[b].head.line,this.ranges[b].head.ch));return new $(a,this.primIndex)},somethingSelected:function(){for(var a=
0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=Y(b,d.from())&&0>=Y(a,d.to()))return c}return-1}};M.prototype={from:function(){return Q(this.anchor,this.head)},to:function(){return ca(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Mb,Uc,Tc,vd={left:0,right:0,top:0,bottom:0},Ve=0,ce=0,Xc=0,$a=null;Aa?$a=-0.53:
yc?$a=15:uf?$a=-0.7:de&&($a=-1/3);var he,Fd=null,Nb=a.changeEnd=function(a){return a.text?J(a.from.line+a.text.length-1,ga(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.prototype={constructor:a,focus:function(){window.focus();wa(this);vb(this)},setOption:function(a,b){var c=this.options,d=c[a];(c[a]!=b||"mode"==a)&&(c[a]=b,Zb.hasOwnProperty(a)&&ja(this,Zb[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?
"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:ia(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque});this.state.modeGen++;xa(this)}),removeOverlay:ia(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==
a||"string"==typeof a&&d.name==a)return b.splice(c,1),this.state.modeGen++,xa(this),void 0}}),indentLine:ia(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");L(this.doc,a)&&tc(this,a,b,c)}),indentSelection:ia(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(tc(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&ac(this));else for(var g=Math.max(c,e.from().line),
c=e.to(),c=Math.min(this.lastLine(),c.line-(c.ch?0:1))+1;c>g;++g)tc(this,g,a)}}),getTokenAt:function(a,b){var c=this.doc;a=F(c,a);for(var d=Da(this,a.line,b),e=this.doc.mode,c=T(c,a.line),c=new md(c.text,this.options.tabSize);c.pos<a.ch&&!c.eol();){c.start=c.pos;var g=Md(e,c,d)}return{start:c.start,end:c.pos,string:c.current(),type:g||null,state:d}},getTokenTypeAt:function(a){a=F(this.doc,a);var b,c=Ee(this,T(this.doc,a.line)),d=0,e=(c.length-1)/2;a=a.ch;if(0==a)b=c[2];else for(;;){var g=d+e>>1;if((g?
c[2*g-1]:0)>=a)e=g;else{if(!(c[2*g+1]<a)){b=c[2*g+2];break}d=g+1}}c=b?b.indexOf("cm-overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!Xb.hasOwnProperty(b))return Xb;var d=Xb[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var g=0;g<e[b].length;g++){var f=
d[e[b][g]];f&&c.push(f)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(g=0;g<d._global.length;g++)f=d._global[g],f.pred(e,this)&&-1==ta(c,f.val)&&c.push(f.val);return c},getStateAfter:function(a,b){var c=this.doc;return a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1)),Da(this,a+1,b)},cursorCoords:function(a,b){var c,d=this.doc.sel.primary();return c=null==a?d.head:"object"==typeof a?F(this.doc,a):a?d.from():d.to(),ra(this,c,b||
"page")},charCoords:function(a,b){return La(this,F(this.doc,a),b||"page")},coordsChar:function(a,b){return a=ea(this,a,b||"page"),ub(this,a.left,a.top)},lineAtHeight:function(a,b){return a=ea(this,{top:a,left:0},b||"page").top,Ib(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);d=T(this.doc,a);return ua(this,d,{top:0,left:0},b||"page").top+(c?this.doc.height-db(d):0)},defaultTextHeight:function(){return Ca(this.display)},
defaultCharWidth:function(){return Na(this.display)},setGutterMarker:ia(function(a,b,c){return gd(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&Le(d)&&(a.gutterMarkers=null),!0})}),clearGutter:ia(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,Va(b,d,"gutter"),Le(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),addLineClass:ia(function(a,b,c){return gd(this,a,"class",function(a){var d=
"text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:ia(function(a,b,c){return gd(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var g=e.match(RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!g)return!1;var f=g.index+g[0].length;a[d]=e.slice(0,g.index)+(g.index&&f!=e.length?" ":"")+e.slice(f)||
null}return!0})}),addLineWidget:ia(function(a,b,c){return hf(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!L(this.doc,a))return null;var b=a;if(a=T(this.doc,a),!a)return null}else if(b=ka(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,
b,c,d,e){var g=this.display;a=ra(this,F(this.doc,a));var f=a.bottom,h=a.left;if(b.style.position="absolute",g.sizer.appendChild(b),"over"==d)f=a.top;else if("above"==d||"near"==d){var k=Math.max(g.wrapper.clientHeight,this.doc.height),l=Math.max(g.sizer.clientWidth,g.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>k)&&a.top>b.offsetHeight?f=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=k&&(f=a.bottom);h+b.offsetWidth>l&&(h=l-b.offsetWidth)}b.style.top=f+"px";b.style.left=b.style.right=
"";"right"==e?(h=g.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(g.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px");c&&(a=Rc(this,h,f,h+b.offsetWidth,f+b.offsetHeight),null!=a.scrollTop&&Ya(this,a.scrollTop),null!=a.scrollLeft&&eb(this,a.scrollLeft))},triggerOnKeyDown:ia(vc),triggerOnKeyPress:ia(fc),triggerOnKeyUp:ia(Sc),execCommand:function(a){return Yc.hasOwnProperty(a)?Yc[a](this):void 0},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var g=0;
for(a=F(this.doc,a);b>g&&(a=Kd(this.doc,a,e,c,d),!a.hitSide);++g);return a},moveH:ia(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Kd(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},Yb)}),deleteH:ia(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):hd(this,function(d){var e=Kd(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=
1;0>b&&(e=-1,b=-b);var g=0;for(a=F(this.doc,a);b>g;++g){var f=ra(this,a,"div");if(null==d?d=f.left:f.left=d,a=ue(this,f,e,c),a.hitSide)break}return a},moveV:ia(function(a,b){var c=this,d=this.doc,e=[],g=!c.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(f){if(g)return 0>a?f.from():f.to();var h=ra(c,f.head,"div");null!=f.goalColumn&&(h.left=f.goalColumn);e.push(h.left);var k=ue(c,h,a,b);return"page"==b&&f==d.sel.primary()&&ed(c,null,La(c,k,"div").top-h.top),k},
Yb),e.length)for(var f=0;f<d.sel.ranges.length;f++)d.sel.ranges[f].goalColumn=e[f]}),toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?cd(this.display.cursorDiv,"CodeMirror-overwrite"):bd(this.display.cursorDiv,"CodeMirror-overwrite"),qa(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return yb()==this.display.input},scrollTo:ia(function(a,b){(null!=a||null!=b)&&fd(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&
(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller,b=ob;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:ia(function(a,b){if(null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:J(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line)fd(this),
this.curOp.scrollToPos=a;else{var c=Rc(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:ia(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a));null!=b&&(this.display.wrapper.style.height=c(b));this.options.lineWrapping&&Ra(this);this.curOp.forceUpdate=!0;qa(this,
"refresh",this)}),operation:function(a){return ha(this,a)},refresh:ia(function(){var a=this.display.cachedTextHeight;xa(this);this.curOp.forceUpdate=!0;ya(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);n(this);(null==a||0.5<Math.abs(a-Ca(this.display)))&&g(this);qa(this,"refresh",this)}),swapDoc:ia(function(a){var b=this.doc;return b.cm=null,Ud(this,a),ya(this),na(this),this.scrollTo(a.scrollLeft,a.scrollTop),pa(this,"swapDoc",this,b),b}),getInputField:function(){return this.display.input},
getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};jc(a);var Qe=a.defaults={},Zb=a.optionHandlers={},Vd=a.Init={toString:function(){return"CodeMirror.Init"}};X("value","",function(a,b){a.setValue(b)},!0);X("mode",null,function(a,c){a.doc.modeOption=c;b(a)},!0);X("indentUnit",2,b,!0);X("indentWithTabs",!1);X("smartIndent",!0);X("tabSize",4,function(a){c(a);ya(a);xa(a)},!0);X("specialChars",
/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=RegExp(b.source+(b.test("\t")?"":"|\t"),"g");a.refresh()},!0);X("specialCharPlaceholder",function(a){var b=O("span","\u2022","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b},function(a){a.refresh()},!0);X("electricChars",!0);X("rtlMoveVisually",!vf);X("wholeLineUpdateBefore",!0);X("theme","default",function(a){h(a);k(a)},!0);X("keyMap","default",f);X("extraKeys",null);X("lineWrapping",!1,
function(a){a.options.lineWrapping?(cd(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth=""):(bd(a.display.wrapper,"CodeMirror-wrap"),q(a));g(a);xa(a);ya(a);setTimeout(function(){u(a)},100)},!0);X("gutters",[],function(a){t(a.options);k(a)},!0);X("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?w(a.display)+"px":"0";a.refresh()},!0);X("coverGutterNextToScrollbar",!1,u,!0);X("lineNumbers",!1,function(a){t(a.options);k(a)},!0);X("firstLineNumber",1,k,!0);X("lineNumberFormatter",
function(a){return a},k,!0);X("showCursorWhenSelecting",!1,Ka,!0);X("resetSelectionOnContextMenu",!0);X("readOnly",!1,function(a,b){"nocursor"==b?(Lc(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||na(a))});X("disableInput",!1,function(a,b){b||na(a)},!0);X("dragDrop",!0);X("cursorBlinkRate",530);X("cursorScrollMargin",0);X("cursorHeight",1);X("workTime",100);X("workDelay",100);X("flattenSpans",!0,c,!0);X("addModeClass",!1,c,!0);X("pollInterval",100);X("undoDepth",200,function(a,
b){a.doc.history.undoDepth=b});X("historyEventDelay",1250);X("viewportMargin",10,function(a){a.refresh()},!0);X("maxHighlightLength",1E4,c,!0);X("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)});X("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});X("autofocus",null);var Pe=a.modes={},Gc=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),2<arguments.length){c.dependencies=[];for(var d=2;d<
arguments.length;++d)c.dependencies.push(arguments[d])}Pe[b]=c};a.defineMIME=function(a,b){Gc[a]=b};a.resolveMode=function(b){if("string"==typeof b&&Gc.hasOwnProperty(b))b=Gc[b];else if(b&&"string"==typeof b.name&&Gc.hasOwnProperty(b.name)){var c=Gc[b.name];"string"==typeof c&&(c={name:c});b=Ke(c,b);b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}};a.getMode=function(b,c){c=a.resolveMode(c);
var d=Pe[c.name];if(!d)return a.getMode(b,"text/plain");d=d(b,c);if(Hc.hasOwnProperty(c.name)){var e=Hc[c.name],g;for(g in e)e.hasOwnProperty(g)&&(d.hasOwnProperty(g)&&(d["_"+g]=d[g]),d[g]=e[g])}if(d.name=c.name,c.helperType&&(d.helperType=c.helperType),c.modeProps)for(g in c.modeProps)d[g]=c.modeProps[g];return d};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});a.defineMIME("text/plain","null");var Hc=a.modeExtensions={};a.extendMode=function(a,b){var c=Hc.hasOwnProperty(a)?
Hc[a]:Hc[a]={};kc(b,c)};a.defineExtension=function(b,c){a.prototype[b]=c};a.defineDocExtension=function(a,b){Ia.prototype[a]=b};a.defineOption=X;var rd=[];a.defineInitHook=function(a){rd.push(a)};var Xb=a.helpers={};a.registerHelper=function(b,c,d){Xb.hasOwnProperty(b)||(Xb[b]=a[b]={_global:[]});Xb[b][c]=d};a.registerGlobalHelper=function(b,c,d,e){a.registerHelper(b,c,e);Xb[b]._global.push({pred:d,val:e})};var oc=a.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c=
{},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c},Ue=a.startState=function(a,b,c){return a.startState?a.startState(b,c):!0};a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var Yc=a.commands={selectAll:function(a){a.setSelection(J(a.firstLine(),0),J(a.lastLine()),Jb)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Jb)},killLine:function(a){hd(a,
function(b){if(b.empty()){var c=T(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:J(b.head.line+1,0)}:{from:b.head,to:J(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){hd(a,function(b){return{from:J(b.from().line,0),to:F(a.doc,J(b.to().line+1,0))}})},delLineLeft:function(a){hd(a,function(a){return{from:J(a.from().line,0),to:a.from()}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},
redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(J(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(J(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return Ne(a,b.head.line)},Yb)},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){var c=Ne(a,b.head.line),d=a.getLineHandle(c.line),e=gb(d);return!e||0==e[0].level?(d=Math.max(0,d.text.search(/\S/)),J(c.line,b.head.line==c.line&&b.head.ch<=d&&b.head.ch?0:d)):c},Yb)},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=
b.head.line;for(var c,d=T(a.doc,b);c=Hb(d,!1);)d=c.find(1,!0).line,b=null;c=(c=gb(d))?c[0].level%2?Oc(d):Pc(d):d.text.length;return J(null==b?ka(d):b,c)},Yb)},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div")},Yb)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},Yb)},goLineUp:function(a){a.moveV(-1,
"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,
"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),
d=a.options.tabSize,e=0;e<c.length;e++){var g=c[e].from(),g=Wa(a.getLine(g.line),g.ch,d);b.push(Array(d-g%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){ha(a,function(){for(var b=a.listSelections(),c=0;c<b.length;c++){var d=b[c].head,e=T(a.doc,d.line).text;0<d.ch&&d.ch<e.length-1&&a.replaceRange(e.charAt(d.ch)+e.charAt(d.ch-1),J(d.line,d.ch-1),J(d.line,d.ch+1))}})},newlineAndIndent:function(a){ha(a,
function(){for(var b=a.listSelections().length,c=0;b>c;c++){var d=a.listSelections()[c];a.replaceRange("\n",d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);ac(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},pb=a.keyMap={};pb.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab",
"Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};pb.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find",
"Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};pb.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd",
"Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]};pb.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight",
"Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};pb["default"]=zb?pb.macDefault:pb.pcDefault;var Zc=a.lookupKey=function(a,b,c){function d(b){b=Ed(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=
Object.prototype.toString.call(b))return d(b);for(e=0;e<b.length;++e){var g=d(b[e]);if(g)return g}return!1}for(var e=0;e<b.length;++e){var g=d(b[e]);if(g)return"stop"!=g}},$e=a.isModifierKey=function(a){a=Eb[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},af=a.keyName=function(a,b){if(Za&&34==a.keyCode&&a["char"])return!1;var c=Eb[a.keyCode];return null==c||a.altGraphKey?!1:(a.altKey&&(c="Alt-"+c),(Oe?a.metaKey:a.ctrlKey)&&(c="Ctrl-"+c),(Oe?a.ctrlKey:a.metaKey)&&(c="Cmd-"+c),!b&&a.shiftKey&&
(c="Shift-"+c),c)};a.fromTextArea=function(b,c){function d(){b.value=l.getValue()}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=yb();c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(W(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var g=b.form,f=g.submit;try{var h=g.submit=function(){d();g.submit=f;g.submit();g.submit=h}}catch(k){}}b.style.display=
"none";var l=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return l.save=d,l.getTextArea=function(){return b},l.toTextArea=function(){d();b.parentNode.removeChild(l.getWrapperElement());b.style.display="";b.form&&(xb(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=f))},l};var md=a.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};md.prototype={eol:function(){return this.pos>=
this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);return("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;
return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);return-1<a?(this.pos=a,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Wa(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Wa(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Wa(this.string,
null,this.tabSize)-(this.lineStart?Wa(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"!=typeof a)return(a=this.string.slice(this.pos).match(a))&&0<a.index?null:(a&&!1!==b&&(this.pos+=a[0].length),a);var d=this.string.substr(this.pos,a.length);return(c?d.toLowerCase():d)==(c?a.toLowerCase():a)?(!1!==b&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=
a}}};var Ub=a.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a};jc(Ub);Ub.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;if(b&&va(a),Ua(this,"clear")){var c=this.find();c&&pa(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var g=this.lines[e],f=Cc(g.markedSpans,this);a&&!this.collapsed?Va(a,ka(g),"text"):a&&(null!=f.to&&(d=ka(g)),null!=f.from&&(c=ka(g)));for(var h=g,k=g.markedSpans,l=f,s=void 0,n=0;n<k.length;++n)k[n]!=l&&
(s||(s=[])).push(k[n]);h.markedSpans=s;null==f.from&&this.collapsed&&!Fb(this.doc,g)&&a&&cb(g,Ca(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)g=ib(this.lines[e]),f=p(g),f>a.display.maxLineLength&&(a.display.maxLine=g,a.display.maxLineLength=f,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&xa(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&rb(a.doc));a&&pa(a,"markerCleared",a,this);
b&&N(a);this.parent&&this.parent.clear()}};Ub.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var g=this.lines[e],f=Cc(g.markedSpans,this);if(null!=f.from&&(c=J(b?g:ka(g),f.from),-1==a))return c;if(null!=f.to&&(d=J(b?g:ka(g),f.to),1==a))return d}return c&&{from:c,to:d}};Ub.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&ha(c,function(){var d=a.line,e=ka(a.line),e=da(c,e);if(e&&(Lb(e),c.curOp.selectionChanged=
c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!Fb(b.doc,d)&&null!=b.height)e=b.height,b.height=null,(e=rc(b)-e)&&cb(d,d.height+e)})};Ub.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=ta(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Ub.prototype.detachLine=function(a){if(this.lines.splice(ta(this.lines,a),1),!this.lines.length&&this.doc.cm)a=this.doc.cm.curOp,
(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this)};var ef=0,kd=a.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};jc(kd);kd.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();pa(this,"clear")}};kd.prototype.find=function(a,b){return this.primary.find(a,b)};var ld=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=
c[d]);this.cm=a;this.node=b};jc(ld);ld.prototype.clear=function(){var a=this.cm,b=this.line.widgets,c=this.line,d=ka(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var g=rc(this);ha(a,function(){var b=-g;db(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&ed(a,null,b);Va(a,d,"widget");cb(c,Math.max(0,c.height-g))})}};ld.prototype.changed=function(){var a=this.height,b=this.cm,c=this.line;this.height=null;var d=rc(this)-a;d&&ha(b,function(){b.curOp.forceUpdate=
!0;db(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&ed(b,null,d);cb(c,c.height+d)})};var Vb=a.Line=function(a,b,c){this.text=a;ze(this,b);this.height=c?c(this):1};jc(Vb);Vb.prototype.lineNo=function(){return ka(this)};var kf={},jf={};Dc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;d>c;++c){var e=this.lines[c];this.height-=e.height;var g=e;g.parent=null;ye(g);pa(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},
insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;b>a;++a)if(c(this.lines[a]))return!0}};Ec.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(e>a){var g=Math.min(b,e-a),f=d.height;if(d.removeInner(a,g),this.height-=f-d.height,e==g&&(this.children.splice(c--,
1),d.parent=null),0==(b-=g))break;a=0}else a-=e}if(25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof Dc)))c=[],this.collapse(c),this.children=[new Dc(c)],this.children[0].parent=this},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],g=e.chunkSize();if(g>=a){if(e.insertInner(a,b,c),e.lines&&50<e.lines.length){for(;50<
e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new Dc(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Ec(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=ta(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Ec(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);
a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],g=e.chunkSize();if(g>a){g=Math.min(b,g-a);if(e.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};var wf=0,Ia=a.Doc=function(a,b,c){if(!(this instanceof Ia))return new Ia(a,b,c);null==c&&(c=0);Ec.call(this,[new Dc([new Vb("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=J(c,0);this.sel=C(c);this.history=new nd(null);
this.id=++wf;this.modeOption=b;"string"==typeof a&&(a=dc(a));Jd(this,{from:c,to:c,text:a});ba(this,C(c),Jb)};Ia.prototype=Ke(Ec.prototype,{constructor:Ia,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Od(this,this.first,this.first+this.size);return!1===a?b:b.join(a||
"\n")},setValue:oa(function(a){var b=J(this.first,0),c=this.first+this.size-1;ec(this,{from:b,to:J(c,T(this,c).text.length),text:dc(a),origin:"setValue"},!0);ba(this,C(b))}),replaceRange:function(a,b,c,d){b=F(this,b);c=c?F(this,c):b;Wc(this,a,b,c,d)},getRange:function(a,b,c){a=Bc(this,F(this,a),F(this,b));return!1===c?a:a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){return L(this,a)?T(this,a):void 0},getLineNumber:function(a){return ka(a)},
getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=T(this,a)),ib(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return F(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},
setCursor:oa(function(a,b,c){a=F(this,"number"==typeof a?J(a,b||0):a);ba(this,C(a,null),c)}),setSelection:oa(function(a,b,c){var d=F(this,a);a=F(this,b||a);ba(this,C(d,a),c)}),extendSelection:oa(function(a,b,c){aa(this,F(this,a),b&&F(this,b),c)}),extendSelections:oa(function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=F(this,a[d]);la(this,c)}),extendSelectionsBy:oa(function(a,b){la(this,Id(this.sel.ranges,a),b)}),setSelections:oa(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new M(F(this,
a[d].anchor),F(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));ba(this,R(e,b),c)}}),addSelection:oa(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new M(F(this,a),F(this,b||a)));ba(this,R(d,d.length-1),c)}),getSelection:function(a){for(var b,c=this.sel.ranges,d=0;d<c.length;d++){var e=Bc(this,c[d].from(),c[d].to());b=b?b.concat(e):e}return!1===a?b:b.join(a||"\n")},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Bc(this,c[d].from(),c[d].to());
!1!==a&&(e=e.join(a||"\n"));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:oa(function(a,b,c){for(var d=[],e=this.sel,g=0;g<e.ranges.length;g++){var f=e.ranges[g];d[g]={from:f.from(),to:f.to(),text:dc(a[g]),origin:c}}if(g=b)if(g="end"!=b){g=[];c=a=J(this.first,0);for(e=0;e<d.length;e++){var h=d[e],f=je(h.from,a,c),k=je(Nb(h),a,c);(a=h.to,c=k,"around"==b)?(h=this.sel.ranges[e],h=0>Y(h.head,
h.anchor),g[e]=new M(h?k:f,h?f:k)):g[e]=new M(f,f)}g=new $(g,this.sel.primIndex)}b=g;for(g=d.length-1;0<=g;g--)ec(this,d[g]);b?sa(this,b):this.cm&&ac(this.cm)}),undo:oa(function(){dd(this,"undo")}),redo:oa(function(){dd(this,"redo")}),undoSelection:oa(function(){dd(this,"undo",!0)}),redoSelection:oa(function(){dd(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||
++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new nd(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:ic(this.history.done),undone:ic(this.history.undone)}},
setHistory:function(a){var b=this.history=new nd(this.history.maxGeneration);b.done=ic(a.done.slice(0),null,!0);b.undone=ic(a.undone.slice(0),null,!0)},markText:function(a,b,c){return hc(this,F(this,a),F(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared};return a=F(this,a),hc(this,a,a,c,"bookmark")},findMarksAt:function(a){a=F(this,a);var b=[],c=T(this,a.line).markedSpans;if(c)for(var d=
0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=F(this,a);b=F(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(g){if(g=g.markedSpans)for(var f=0;f<g.length;f++){var h=g[f];e==a.line&&a.ch>h.to||null==h.from&&e!=a.line||e==b.line&&h.from>b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){if(b=b.markedSpans)for(var c=
0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)}),a},posFromIndex:function(a){var b,c=this.first;return this.iter(function(d){d=d.text.length+1;return d>a?(b=a,!0):(a-=d,++c,void 0)}),F(this,J(c,b))},indexFromPos:function(a){a=F(this,a);var b=a.ch;return a.line<this.first||0>a.ch?0:(this.iter(this.first,a.line,function(a){b+=a.text.length+1}),b)},copy:function(a){var b=new Ia(Od(this,this.first,this.first+this.size),this.modeOption,this.first);return b.scrollTop=this.scrollTop,b.scrollLeft=
this.scrollLeft,b.sel=this.sel,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new Ia(Od(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=we(this);for(c=0;c<a.length;c++){var d=
a[c],e=d.find(),g=b.clipPos(e.from),e=b.clipPos(e.to);Y(g,e)&&(g=hc(b,g,e,d.primary,d.primary.type),d.markers.push(g),g.parent=d)}return b},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c)if(this.linked[c].doc==b){this.linked.splice(c,1);b.unlinkDoc(this);ff(we(this));break}if(b.history==this.history){var d=[b.id];Tb(b,function(a){d.push(a.id)},!0);b.history=new nd(null);b.history.done=ic(this.history.done,d);b.history.undone=ic(this.history.undone,
d)}},iterLinkedDocs:function(a){Tb(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});Ia.prototype.eachLine=Ia.prototype.iter;var xf=["iter","insert","remove","copy","getEditor"],Ic;for(Ic in Ia.prototype)Ia.prototype.hasOwnProperty(Ic)&&0>ta(xf,Ic)&&(a.prototype[Ic]=function(a){return function(){return a.apply(this.doc,arguments)}}(Ia.prototype[Ic]));jc(Ia);var Cb,Ga=a.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},yf=a.e_stopPropagation=
function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},zd=a.e_stop=function(a){Ga(a);yf(a)},W=a.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},xb=a.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},qa=a.signal=
function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},Qc=0,ob=30,ge=a.Pass={toString:function(){return"CodeMirror.Pass"}},Jb={scroll:!1},Vc={origin:"*mouse"},Yb={origin:"+move"};qd.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var Wa=a.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var g=a.indexOf("\t",d);if(0>g||g>=b)return e+
(b-d);e+=g-d;e+=c-e%c;d=g+1}},od=[""],uc=function(a){a.select()};lc?uc=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:Aa&&(uc=function(a){try{a.select()}catch(b){}});[].indexOf&&(ta=function(a,b){return a.indexOf(b)});[].map&&(Id=function(a,b){return a.map(b)});var qc,zf=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,id=a.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||zf.test(a))},rf=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;
qc=document.createRange?function(a,b,c){var d=document.createRange();return d.setEnd(a,c),d.setStart(a,b),d}:function(a,b,c){var d=document.body.createTextRange();return d.moveToElementText(a.parentNode),d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d};nb&&(yb=function(){try{return document.activeElement}catch(a){return document.body}});var Fc,Qd,Nd,Td=!1,Ye=function(){if(za)return!1;var a=O("div");return"draggable"in a||"dragDrop"in a}(),dc=a.splitLines=3!="\n\nb".split(/\n/).length?
function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var g=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),f=g.indexOf("\r");-1!=f?(c.push(g.slice(0,f)),b+=f+1):(c.push(g),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},Xe=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},ae=
function(){var a=O("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),Eb={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",
220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};a.keyNames=Eb;(function(){for(var a=0;10>a;a++)Eb[a+48]=Eb[a+96]=String(a);for(a=65;90>=a;a++)Eb[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Eb[a+111]=Eb[a+63235]="F"+a})();var sc,pf=function(){function a(b){return 247>=b?c.charAt(b):1424<=b&&1524>=b?"R":1536<=b&&1773>=b?d.charAt(b-1536):1774<=b&&2220>=b?"r":8192<=b&&8203>=b?"w":8204==
b?"b":"L"}function b(a,c,d){this.level=a;this.from=c;this.to=d}var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",
e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,g=/[stwN]/,f=/[LRr]/,h=/[Lb1n]/,k=/[1n]/;return function(c){if(!e.test(c))return!1;for(var d,l=c.length,s=[],n=0;l>n;++n)s.push(a(c.charCodeAt(n)));for(var n=0,r="L";l>n;++n)d=s[n],"m"==d?s[n]=r:r=d;n=0;for(r="L";l>n;++n)d=s[n],"1"==d&&"r"==r?s[n]="n":f.test(d)&&(r=d,"r"==d&&(s[n]="R"));n=1;for(r=s[0];l-1>n;++n)d=s[n],"+"==d&&"1"==r&&"1"==s[n+1]?s[n]="1":","!=d||r!=s[n+1]||"1"!=r&&"n"!=r||(s[n]=r),r=d;for(n=0;l>n;++n)if(d=s[n],","==d)s[n]="N";else if("%"==
d){for(r=n+1;l>r&&"%"==s[r];++r);var p=n&&"!"==s[n-1]||l>r&&"1"==s[r]?"1":"N";for(d=n;r>d;++d)s[d]=p;n=r-1}n=0;for(r="L";l>n;++n)d=s[n],"L"==r&&"1"==d?s[n]="L":f.test(d)&&(r=d);for(n=0;l>n;++n)if(g.test(s[n])){for(r=n+1;l>r&&g.test(s[r]);++r);d="L"==(l>r?s[r]:"L");p="L"==(n?s[n-1]:"L")||d?"L":"R";for(d=n;r>d;++d)s[d]=p;n=r-1}for(var x,r=[],n=0;l>n;)if(h.test(s[n])){d=n;for(++n;l>n&&h.test(s[n]);++n);r.push(new b(0,d,n))}else{var q=n,p=r.length;for(++n;l>n&&"L"!=s[n];++n);for(d=q;n>d;)if(k.test(s[d])){d>
q&&r.splice(p,0,new b(1,q,d));q=d;for(++d;n>d&&k.test(s[d]);++d);r.splice(p,0,new b(2,q,d));q=d}else++d;n>q&&r.splice(p,0,new b(1,q,n))}return 1==r[0].level&&(x=c.match(/^\s+/))&&(r[0].from=x[0].length,r.unshift(new b(0,0,x[0].length))),1==ga(r).level&&(x=c.match(/\s+$/))&&(ga(r).to-=x[0].length,r.push(new b(0,l-x[0].length,l))),r[0].level!=ga(r).level&&r.push(new b(r[0].level,l,l)),r}}();return a.version="4.1.1",a});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function d(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=!0;return b}function b(a,b){for(var c,d=!1;null!=(c=a.next());){if(d&&"/"==c){b.tokenize=null;break}d="*"==c}return["comment","comment"]}function c(a,b){return a.skipTo("--\x3e")?(a.match("--\x3e"),b.tokenize=null):a.skipToEnd(),["comment","comment"]}
a.defineMode("css",function(b,c){function d(a,b){var c=a.next();if(x[c]){var f=x[c](a,b);if(!1!==f)return f}"@"==c?(a.eatWhile(/[\w\\\-]/),c=(r=a.current(),"def")):c="="==c||("~"==c||"|"==c)&&a.eat("=")?(r="compare",null):'"'==c||"'"==c?(b.tokenize=e(c),b.tokenize(a,b)):"#"==c?(a.eatWhile(/[\w\\\-]/),r="hash","atom"):"!"==c?(a.match(/^\s*\w*/),r="important","keyword"):/\d/.test(c)||"."==c&&a.eat(/\d/)?(a.eatWhile(/[\w.%]/),r="unit","number"):"-"!==c?/[,+>*\/]/.test(c)?(r="select-op",null):"."==c&&
a.match(/^-?[_a-z][_a-z0-9-]*/i)?(r="qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(c)?(r=c,null):"u"==c&&a.match("rl(")?(a.backUp(1),b.tokenize=g,r="word","property"):/[\w\\\-]/.test(c)?(a.eatWhile(/[\w\\\-]/),r="word","property"):(r=null,null):/[\d.]/.test(a.peek())?(a.eatWhile(/[\w.%]/),r="unit","number"):a.match(/^[^-]+-/)?(r="meta","meta"):void 0;return c}function e(a){return function(b,c){for(var e,g=!1;null!=(e=b.next());){if(e==a&&!g){")"==a&&b.backUp(1);break}g=!g&&"\\"==e}return(e==a||!g&&
")"!=a)&&(c.tokenize=null),b.pos==b.start?d(b,c):(r="string","string")}}function g(a,b){return a.next(),b.tokenize=a.match(/\s*[\"\')]/,!1)?null:e(")"),r="(",null}function f(a,b,c){this.type=a;this.indent=b;this.prev=c}function h(a,b,c){return a.context=new f(c,b.indentation()+q,a.context),c}function k(a){return a.context=a.context.prev,a.context.type}function l(a,b,c,d){for(d=d||1;0<d;d--)c.context=c.context.prev;return L[c.context.type](a,b,c)}function n(a){a=a.current().toLowerCase();p=R.hasOwnProperty(a)?
"atom":M.hasOwnProperty(a)?"keyword":"variable"}c.propertyKeywords||(c=a.resolveMode("text/css"));var r,p,q=b.indentUnit,x=c.tokenHooks,u=c.mediaTypes||{},t=c.mediaFeatures||{},Q=c.propertyKeywords||{},$=c.nonStandardPropertyKeywords||{},M=c.colorKeywords||{},R=c.valueKeywords||{},C=c.fontProperties||{},F=c.allowNested,L={};return L.top=function(a,b,c){if("{"==a)return h(c,b,"block");if("}"==a&&c.context.prev)return k(c);if("@media"==a)return h(c,b,"media");if("@font-face"==a)return"font_face_before";
if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(a))return"keyframes";if(a&&"@"==a.charAt(0))return h(c,b,"at");if("hash"==a)p="builtin";else if("word"==a)p="tag";else{if("variable-definition"==a)return"maybeprop";if("interpolation"==a)return h(c,b,"interpolation");if(":"==a)return"pseudo";if(F&&"("==a)return h(c,b,"params")}return c.context.type},L.block=function(a,b,c){return"word"==a?(a=b.current().toLowerCase(),Q.hasOwnProperty(a)?(p="property","maybeprop"):$.hasOwnProperty(a)?(p="string-2","maybeprop"):
F?(p=b.match(/^\s*:/,!1)?"property":"tag","block"):(p+=" error","maybeprop")):"meta"==a?"block":F||"hash"!=a&&"qualifier"!=a?L.top(a,b,c):(p="error","block")},L.maybeprop=function(a,b,c){return":"==a?h(c,b,"prop"):L[c.context.type](a,b,c)},L.prop=function(a,b,c){if(";"==a)return k(c);if("{"==a&&F)return h(c,b,"propBlock");if("}"==a||"{"==a)return l(a,b,c);if("("==a)return h(c,b,"parens");if("hash"!=a||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(b.current()))if("word"==a)n(b);else{if("interpolation"==
a)return h(c,b,"interpolation")}else p+=" error";return"prop"},L.propBlock=function(a,b,c){return"}"==a?k(c):"word"==a?(p="property","maybeprop"):c.context.type},L.parens=function(a,b,c){return"{"==a||"}"==a?l(a,b,c):")"==a?k(c):"parens"},L.pseudo=function(a,b,c){return"word"==a?(p="variable-3",c.context.type):L[c.context.type](a,b,c)},L.media=function(a,b,c){if("("==a)return h(c,b,"media_parens");if("}"==a)return l(a,b,c);if("{"==a)return k(c)&&h(c,b,F?"block":"top");"word"==a&&(a=b.current().toLowerCase(),
p="only"==a||"not"==a||"and"==a?"keyword":u.hasOwnProperty(a)?"attribute":t.hasOwnProperty(a)?"property":"error");return c.context.type},L.media_parens=function(a,b,c){return")"==a?k(c):"{"==a||"}"==a?l(a,b,c,2):L.media(a,b,c)},L.font_face_before=function(a,b,c){return"{"==a?h(c,b,"font_face"):L[c.context.type](a,b,c)},L.font_face=function(a,b,c){return"}"==a?k(c):"word"==a?(p=C.hasOwnProperty(b.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},L.keyframes=function(a,b,c){return"word"==
a?(p="variable","keyframes"):"{"==a?h(c,b,"top"):L[c.context.type](a,b,c)},L.at=function(a,b,c){return";"==a?k(c):"{"==a||"}"==a?l(a,b,c):("word"==a?p="tag":"hash"==a&&(p="builtin"),"at")},L.interpolation=function(a,b,c){return"}"==a?k(c):"{"==a||";"==a?l(a,b,c):("variable"!=a&&(p="error"),"interpolation")},L.params=function(a,b,c){return")"==a?k(c):"{"==a||"}"==a?l(a,b,c):("word"==a&&n(b),"params")},{startState:function(a){return{tokenize:null,state:"top",context:new f("top",a||0,null)}},token:function(a,
b){if(!b.tokenize&&a.eatSpace())return null;var c=(b.tokenize||d)(a,b);return c&&"object"==typeof c&&(r=c[1],c=c[0]),p=c,b.state=L[b.state](r,a,b),p},indent:function(a,b){var c=a.context,d=b&&b.charAt(0),e=c.indent;return"prop"==c.type&&"}"==d&&(c=c.prev),!c.prev||("}"!=d||"block"!=c.type&&"top"!=c.type&&"interpolation"!=c.type&&"font_face"!=c.type)&&(")"!=d||"parens"!=c.type&&"params"!=c.type&&"media_parens"!=c.type)&&("{"!=d||"at"!=c.type&&"media"!=c.type)||(e=c.indent-q),e},electricChars:"}",blockCommentStart:"/*",
blockCommentEnd:"*/",fold:"brace"}});var e="all aural braille handheld print projection screen tty tv embossed".split(" "),g=d(e),f="width min-width max-width height min-height max-height device-width min-device-width max-device-width device-height min-device-height max-device-height aspect-ratio min-aspect-ratio max-aspect-ratio device-aspect-ratio min-device-aspect-ratio max-device-aspect-ratio color min-color max-color color-index min-color-index max-color-index monochrome min-monochrome max-monochrome resolution min-resolution max-resolution scan grid".split(" "),
h=d(f),k="align-content align-items align-self alignment-adjust alignment-baseline anchor-point animation animation-delay animation-direction animation-duration animation-fill-mode animation-iteration-count animation-name animation-play-state animation-timing-function appearance azimuth backface-visibility background background-attachment background-clip background-color background-image background-origin background-position background-repeat background-size baseline-shift binding bleed bookmark-label bookmark-level bookmark-state bookmark-target border border-bottom border-bottom-color border-bottom-left-radius border-bottom-right-radius border-bottom-style border-bottom-width border-collapse border-color border-image border-image-outset border-image-repeat border-image-slice border-image-source border-image-width border-left border-left-color border-left-style border-left-width border-radius border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-left-radius border-top-right-radius border-top-style border-top-width border-width bottom box-decoration-break box-shadow box-sizing break-after break-before break-inside caption-side clear clip color color-profile column-count column-fill column-gap column-rule column-rule-color column-rule-style column-rule-width column-span column-width columns content counter-increment counter-reset crop cue cue-after cue-before cursor direction display dominant-baseline drop-initial-after-adjust drop-initial-after-align drop-initial-before-adjust drop-initial-before-align drop-initial-size drop-initial-value elevation empty-cells fit fit-position flex flex-basis flex-direction flex-flow flex-grow flex-shrink flex-wrap float float-offset flow-from flow-into font font-feature-settings font-family font-kerning font-language-override font-size font-size-adjust font-stretch font-style font-synthesis font-variant font-variant-alternates font-variant-caps font-variant-east-asian font-variant-ligatures font-variant-numeric font-variant-position font-weight grid grid-area grid-auto-columns grid-auto-flow grid-auto-position grid-auto-rows grid-column grid-column-end grid-column-start grid-row grid-row-end grid-row-start grid-template grid-template-areas grid-template-columns grid-template-rows hanging-punctuation height hyphens icon image-orientation image-rendering image-resolution inline-box-align justify-content left letter-spacing line-break line-height line-stacking line-stacking-ruby line-stacking-shift line-stacking-strategy list-style list-style-image list-style-position list-style-type margin margin-bottom margin-left margin-right margin-top marker-offset marks marquee-direction marquee-loop marquee-play-count marquee-speed marquee-style max-height max-width min-height min-width move-to nav-down nav-index nav-left nav-right nav-up opacity order orphans outline outline-color outline-offset outline-style outline-width overflow overflow-style overflow-wrap overflow-x overflow-y padding padding-bottom padding-left padding-right padding-top page page-break-after page-break-before page-break-inside page-policy pause pause-after pause-before perspective perspective-origin pitch pitch-range play-during position presentation-level punctuation-trim quotes region-break-after region-break-before region-break-inside region-fragment rendering-intent resize rest rest-after rest-before richness right rotation rotation-point ruby-align ruby-overhang ruby-position ruby-span shape-inside shape-outside size speak speak-as speak-header speak-numeral speak-punctuation speech-rate stress string-set tab-size table-layout target target-name target-new target-position text-align text-align-last text-decoration text-decoration-color text-decoration-line text-decoration-skip text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-height text-indent text-justify text-outline text-overflow text-shadow text-size-adjust text-space-collapse text-transform text-underline-position text-wrap top transform transform-origin transform-style transition transition-delay transition-duration transition-property transition-timing-function unicode-bidi vertical-align visibility voice-balance voice-duration voice-family voice-pitch voice-range voice-rate voice-stress voice-volume volume white-space widows width word-break word-spacing word-wrap z-index clip-path clip-rule mask enable-background filter flood-color flood-opacity lighting-color stop-color stop-opacity pointer-events color-interpolation color-interpolation-filters color-rendering fill fill-opacity fill-rule image-rendering marker marker-end marker-mid marker-start shape-rendering stroke stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-rendering baseline-shift dominant-baseline glyph-orientation-horizontal glyph-orientation-vertical text-anchor writing-mode".split(" "),
l=d(k),n="scrollbar-arrow-color scrollbar-base-color scrollbar-dark-shadow-color scrollbar-face-color scrollbar-highlight-color scrollbar-shadow-color scrollbar-3d-light-color scrollbar-track-color shape-inside searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration zoom".split(" "),n=d(n),p="aliceblue antiquewhite aqua aquamarine azure beige bisque black blanchedalmond blue blueviolet brown burlywood cadetblue chartreuse chocolate coral cornflowerblue cornsilk crimson cyan darkblue darkcyan darkgoldenrod darkgray darkgreen darkkhaki darkmagenta darkolivegreen darkorange darkorchid darkred darksalmon darkseagreen darkslateblue darkslategray darkturquoise darkviolet deeppink deepskyblue dimgray dodgerblue firebrick floralwhite forestgreen fuchsia gainsboro ghostwhite gold goldenrod gray grey green greenyellow honeydew hotpink indianred indigo ivory khaki lavender lavenderblush lawngreen lemonchiffon lightblue lightcoral lightcyan lightgoldenrodyellow lightgray lightgreen lightpink lightsalmon lightseagreen lightskyblue lightslategray lightsteelblue lightyellow lime limegreen linen magenta maroon mediumaquamarine mediumblue mediumorchid mediumpurple mediumseagreen mediumslateblue mediumspringgreen mediumturquoise mediumvioletred midnightblue mintcream mistyrose moccasin navajowhite navy oldlace olive olivedrab orange orangered orchid palegoldenrod palegreen paleturquoise palevioletred papayawhip peachpuff peru pink plum powderblue purple red rosybrown royalblue saddlebrown salmon sandybrown seagreen seashell sienna silver skyblue slateblue slategray snow springgreen steelblue tan teal thistle tomato turquoise violet wheat white whitesmoke yellow yellowgreen".split(" "),
q=d(p),t="above absolute activeborder activecaption afar after-white-space ahead alias all all-scroll alternate always amharic amharic-abegede antialiased appworkspace arabic-indic armenian asterisks auto avoid avoid-column avoid-page avoid-region background backwards baseline below bidi-override binary bengali blink block block-axis bold bolder border border-box both bottom break break-all break-word button button-bevel buttonface buttonhighlight buttonshadow buttontext cambodian capitalize caps-lock-indicator caption captiontext caret cell center checkbox circle cjk-earthly-branch cjk-heavenly-stem cjk-ideographic clear clip close-quote col-resize collapse column compact condensed contain content content-box context-menu continuous copy cover crop cross crosshair currentcolor cursive dashed decimal decimal-leading-zero default default-button destination-atop destination-in destination-out destination-over devanagari disc discard document dot-dash dot-dot-dash dotted double down e-resize ease ease-in ease-in-out ease-out element ellipse ellipsis embed end ethiopic ethiopic-abegede ethiopic-abegede-am-et ethiopic-abegede-gez ethiopic-abegede-ti-er ethiopic-abegede-ti-et ethiopic-halehame-aa-er ethiopic-halehame-aa-et ethiopic-halehame-am-et ethiopic-halehame-gez ethiopic-halehame-om-et ethiopic-halehame-sid-et ethiopic-halehame-so-et ethiopic-halehame-ti-er ethiopic-halehame-ti-et ethiopic-halehame-tig ew-resize expanded extra-condensed extra-expanded fantasy fast fill fixed flat footnotes forwards from geometricPrecision georgian graytext groove gujarati gurmukhi hand hangul hangul-consonant hebrew help hidden hide higher highlight highlighttext hiragana hiragana-iroha horizontal hsl hsla icon ignore inactiveborder inactivecaption inactivecaptiontext infinite infobackground infotext inherit initial inline inline-axis inline-block inline-table inset inside intrinsic invert italic justify kannada katakana katakana-iroha keep-all khmer landscape lao large larger left level lighter line-through linear lines list-item listbox listitem local logical loud lower lower-alpha lower-armenian lower-greek lower-hexadecimal lower-latin lower-norwegian lower-roman lowercase ltr malayalam match media-controls-background media-current-time-display media-fullscreen-button media-mute-button media-play-button media-return-to-realtime-button media-rewind-button media-seek-back-button media-seek-forward-button media-slider media-sliderthumb media-time-remaining-display media-volume-slider media-volume-slider-container media-volume-sliderthumb medium menu menulist menulist-button menulist-text menulist-textfield menutext message-box middle min-intrinsic mix mongolian monospace move multiple myanmar n-resize narrower ne-resize nesw-resize no-close-quote no-drop no-open-quote no-repeat none normal not-allowed nowrap ns-resize nw-resize nwse-resize oblique octal open-quote optimizeLegibility optimizeSpeed oriya oromo outset outside outside-shape overlay overline padding padding-box painted page paused persian plus-darker plus-lighter pointer polygon portrait pre pre-line pre-wrap preserve-3d progress push-button radio read-only read-write read-write-plaintext-only rectangle region relative repeat repeat-x repeat-y reset reverse rgb rgba ridge right round row-resize rtl run-in running s-resize sans-serif scroll scrollbar se-resize searchfield searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration semi-condensed semi-expanded separate serif show sidama single skip-white-space slide slider-horizontal slider-vertical sliderthumb-horizontal sliderthumb-vertical slow small small-caps small-caption smaller solid somali source-atop source-in source-out source-over space square square-button start static status-bar stretch stroke sub subpixel-antialiased super sw-resize table table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group telugu text text-bottom text-top textarea textfield thai thick thin threeddarkshadow threedface threedhighlight threedlightshadow threedshadow tibetan tigre tigrinya-er tigrinya-er-abegede tigrinya-et tigrinya-et-abegede to top transparent ultra-condensed ultra-expanded underline up upper-alpha upper-armenian upper-greek upper-hexadecimal upper-latin upper-norwegian upper-roman uppercase urdu url vertical vertical-text visible visibleFill visiblePainted visibleStroke visual w-resize wait wave wider window windowframe windowtext x-large x-small xor xx-large xx-small".split(" "),
r=d(t),u=d("font-family src unicode-range font-variant font-feature-settings font-stretch font-weight font-style".split(" ")),e=e.concat(f).concat(k).concat(n).concat(p).concat(t);a.registerHelper("hintWords","css",e);a.defineMIME("text/css",{mediaTypes:g,mediaFeatures:h,propertyKeywords:l,nonStandardPropertyKeywords:n,colorKeywords:q,valueKeywords:r,fontProperties:u,tokenHooks:{"<":function(a,b){return a.match("!--")?(b.tokenize=c,c(a,b)):!1},"/":function(a,c){return a.eat("*")?(c.tokenize=b,b(a,
c)):!1}},name:"css"});a.defineMIME("text/x-scss",{mediaTypes:g,mediaFeatures:h,propertyKeywords:l,nonStandardPropertyKeywords:n,colorKeywords:q,valueKeywords:r,fontProperties:u,allowNested:!0,tokenHooks:{"/":function(a,c){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(c.tokenize=b,b(a,c)):["operator","operator"]},":":function(a){return a.match(/\s*{/)?[null,"{"]:!1},$:function(a){return a.match(/^[\w-]+/),a.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2",
"variable"]},"#":function(a){return a.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"});a.defineMIME("text/x-less",{mediaTypes:g,mediaFeatures:h,propertyKeywords:l,nonStandardPropertyKeywords:n,colorKeywords:q,valueKeywords:r,fontProperties:u,allowNested:!0,tokenHooks:{"/":function(a,c){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(c.tokenize=b,b(a,c)):["operator","operator"]},"@":function(a){return a.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,
!1)?!1:(a.eatWhile(/[\w\\\-]/),a.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],a):a(CodeMirror)})(function(a){a.defineMode("htmlmixed",function(d,b){function c(a,b){var c=b.htmlState.tagName,d=h.token(a,b.htmlState);if("script"==c&&/\btag\b/.test(d)&&">"==a.current()){(c=(c=a.string.slice(Math.max(0,
a.pos-100),a.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i))?c[1]:"")&&/[\"\']/.test(c.charAt(0))&&(c=c.slice(1,c.length-1));for(var e=0;e<l.length;++e){var n=l[e];if("string"==typeof n.matches?c==n.matches:n.matches.test(c)){n.mode&&(b.token=g,b.localMode=n.mode,b.localState=n.mode.startState&&n.mode.startState(h.indent(b.htmlState,"")));break}}}else"style"==c&&/\btag\b/.test(d)&&">"==a.current()&&(b.token=f,b.localMode=k,b.localState=k.startState(h.indent(b.htmlState,"")));return d}function e(a,
b,c){var d=a.current(),e=d.search(b);return-1<e?a.backUp(d.length-e):d.match(/<\/?$/)&&(a.backUp(d.length),a.match(b,!1)||a.match(d)),c}function g(a,b){return a.match(/^<\/\s*script\s*>/i,!1)?(b.token=c,b.localState=b.localMode=null,c(a,b)):e(a,/<\/\s*script\s*>/,b.localMode.token(a,b.localState))}function f(a,b){return a.match(/^<\/\s*style\s*>/i,!1)?(b.token=c,b.localState=b.localMode=null,c(a,b)):e(a,/<\/\s*style\s*>/,k.token(a,b.localState))}var h=a.getMode(d,{name:"xml",htmlMode:!0,multilineTagIndentFactor:b.multilineTagIndentFactor,
multilineTagIndentPastTag:b.multilineTagIndentPastTag}),k=a.getMode(d,"css"),l=[],n=b&&b.scriptTypes;if(l.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:a.getMode(d,"javascript")}),n)for(var p=0;p<n.length;++p){var q=n[p];l.push({matches:q.matches,mode:q.mode&&a.getMode(d,q.mode)})}return l.push({matches:/./,mode:a.getMode(d,"text/plain")}),{startState:function(){var a=h.startState();return{token:c,localMode:null,localState:null,htmlState:a}},copyState:function(b){if(b.localState)var c=
a.copyState(b.localMode,b.localState);return{token:b.token,localMode:b.localMode,localState:c,htmlState:a.copyState(h,b.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(b,c){return!b.localMode||/^\s*<\//.test(c)?h.indent(b.htmlState,c):b.localMode.indent?b.localMode.indent(b.localState,c):a.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||h}}}},"xml","javascript","css");a.defineMIME("text/html","htmlmixed")});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineMode("javascript",function(d,b){function c(a,b,c){return ya=a,ua=c,b}function e(a,b){var d=a.next();if('"'==d||"'"==d)return b.tokenize=g(d),b.tokenize(a,b);if("."==d&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return c("number","number");if("."==d&&a.match(".."))return c("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(d))return c(d);
if("="==d&&a.eat(">"))return c("=>","operator");if("0"==d&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),c("number","number");if(/\d/.test(d))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),c("number","number");if("/"==d){if(a.eat("*"))d=(b.tokenize=f,f(a,b));else if(a.eat("/"))d=(a.skipToEnd(),c("comment","comment"));else if("operator"==b.lastType||"keyword c"==b.lastType||"sof"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType)){a:for(var e=!1,k=!1;null!=(d=a.next());){if(!e){if("/"==d&&!k)break a;"["==
d?k=!0:k&&"]"==d&&(k=!1)}e=!e&&"\\"==d}d=(a.eatWhile(/[gimy]/),c("regexp","string-2"))}else d=(a.eatWhile(kb),c("operator","operator",a.current()));return d}if("`"==d)return b.tokenize=h,h(a,b);if("#"==d)return a.skipToEnd(),c("error","error");if(kb.test(d))return a.eatWhile(kb),c("operator","operator",a.current());a.eatWhile(/[\w\$_]/);d=a.current();return(e=ub.propertyIsEnumerable(d)&&ub[d])&&"."!=b.lastType?c(e.type,e.style,d):c("variable","variable",d)}function g(a){return function(b,d){var g,
f=!1;if(ra&&"@"==b.peek()&&b.match(Ca))return d.tokenize=e,c("jsonld-keyword","meta");for(;null!=(g=b.next())&&(g!=a||f);)f=!f&&"\\"==g;return f||(d.tokenize=e),c("string","string")}}function f(a,b){for(var d,g=!1;d=a.next();){if("/"==d&&g){b.tokenize=e;break}g="*"==d}return c("comment","comment")}function h(a,b){for(var d,g=!1;null!=(d=a.next());){if(!g&&("`"==d||"$"==d&&a.eat("{"))){b.tokenize=e;break}g=!g&&"\\"==d}return c("quasi","string-2",a.current())}function k(a,b){b.fatArrowAt&&(b.fatArrowAt=
null);var c=a.string.indexOf("=>",a.start);if(!(0>c)){for(var d=0,e=!1,c=c-1;0<=c;--c){var g=a.string.charAt(c),f=Na.indexOf(g);if(0<=f&&3>f){if(!d){++c;break}if(0==--d)break}else if(3<=f&&6>f)++d;else if(/[$\w]/.test(g))e=!0;else if(e&&!d){++c;break}}e&&!d&&(b.fatArrowAt=c)}}function l(a,b,c,d,e,g){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=g;null!=d&&(this.align=d)}function n(){for(var a=arguments.length-1;0<=a;a--)N.cc.push(arguments[a])}function p(){return n.apply(null,arguments),
!0}function q(a){function c(b){for(;b;b=b.next)if(b.name==a)return!0;return!1}var d=N.state;if(d.context){if(!(N.marked="def",c(d.localVars)))d.localVars={name:a,next:d.localVars}}else c(d.globalVars)||b.globalVars&&(d.globalVars={name:a,next:d.globalVars})}function t(){N.state.context={prev:N.state.context,vars:N.state.localVars};N.state.localVars=ha}function r(){N.state.localVars=N.state.context.vars;N.state.context=N.state.context.prev}function u(a,b){var c=function(){var c=N.state,d=c.indented;
"stat"==c.lexical.type&&(d=c.lexical.indented);c.lexical=new l(d,N.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function s(){var a=N.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function v(a){function b(c){return c==a?p():";"==a?n():p(b)}return b}function w(a,b){return"var"==a?p(u("vardef",b.length),aa,v(";"),s):"keyword a"==a?p(u("form"),y,w,s):"keyword b"==a?p(u("form"),w,s):"{"==a?p(u("}"),F,s):";"==a?p():"if"==a?("else"==N.state.lexical.info&&
N.state.cc[N.state.cc.length-1]==s&&N.state.cc.pop()(),p(u("form"),y,w,s,ba)):"function"==a?p(Ka):"for"==a?p(u("form"),Ta,w,s):"variable"==a?p(u("stat"),P):"switch"==a?p(u("form"),y,u("}","switch"),v("{"),F,s,s):"case"==a?p(y,v(":")):"default"==a?p(v(":")):"catch"==a?p(u("form"),t,v("("),sb,v(")"),w,s,r):"module"==a?p(u("form"),t,bc,r,s):"class"==a?p(u("form"),tb,Kb,s):"export"==a?p(u("form"),Da,s):"import"==a?p(u("form"),hb,s):n(u("stat"),y,v(";"),s)}function y(a){return D(a,!1)}function z(a){return D(a,
!0)}function D(a,b){if(N.state.fatArrowAt==N.stream.start){var c=b?x:H;if("("==a)return p(t,u(")"),R(la,")"),s,v("=>"),c,r);if("variable"==a)return n(t,la,v("=>"),c,r)}c=b?S:E;return va.hasOwnProperty(a)?p(c):"function"==a?p(Ka,c):"keyword c"==a?p(b?B:K):"("==a?p(u(")"),K,Ra,v(")"),s,c):"operator"==a||"spread"==a?p(b?z:y):"["==a?p(u("]"),Oa,s,c):"{"==a?C(Q,"}",null,c):"quasi"==a?n(I,c):p()}function K(a){return a.match(/[;\}\)\],]/)?n():n(y)}function B(a){return a.match(/[;\}\)\],]/)?n():n(z)}function E(a,
b){return","==a?p(y):S(a,b,!1)}function S(a,b,c){var d=0==c?E:S,e=0==c?y:z;return"=>"==b?p(t,c?x:H,r):"operator"==a?/\+\+|--/.test(b)?p(d):"?"==b?p(y,v(":"),e):p(e):"quasi"==a?n(I,d):";"!=a?"("==a?C(z,")","call",d):"."==a?p(ca,d):"["==a?p(u("]"),K,v("]"),s,d):void 0:void 0}function I(a,b){return"quasi"!=a?n():"${"!=b.slice(b.length-2)?p(I):p(y,A)}function A(a){return"}"==a?(N.marked="string-2",N.state.tokenize=h,p(I)):void 0}function H(a){return k(N.stream,N.state),"{"==a?n(w):n(y)}function x(a){return k(N.stream,
N.state),"{"==a?n(w):n(z)}function P(a){return":"==a?p(s,w):n(E,v(";"),s)}function ca(a){return"variable"==a?(N.marked="property",p()):void 0}function Q(a,b){if("variable"==a){if(N.marked="property","get"==b||"set"==b)return p($)}else if("number"==a||"string"==a)N.marked=ra?"property":a+" property";else if("["==a)return p(y,v("]"),M);return va.hasOwnProperty(a)?p(M):void 0}function $(a){return"variable"!=a?n(M):(N.marked="property",p(Ka))}function M(a){return":"==a?p(z):"("==a?n(Ka):void 0}function R(a,
b){function c(d){return","==d?(d=N.state.lexical,"call"==d.info&&(d.pos=(d.pos||0)+1),p(a,c)):d==b?p():p(v(b))}return function(d){return d==b?p():n(a,c)}}function C(a,b,c){for(var d=3;d<arguments.length;d++)N.cc.push(arguments[d]);return p(u(b,c),R(a,b),s)}function F(a){return"}"==a?p():n(w,F)}function L(a){return jb&&":"==a?p(G):void 0}function G(a){return"variable"==a?(N.marked="variable-3",p()):void 0}function aa(){return n(la,L,ma,sa)}function la(a,b){return"variable"==a?(q(b),p()):"["==a?C(la,
"]"):"{"==a?C(Z,"}"):void 0}function Z(a,b){return"variable"!=a||N.stream.match(/^\s*:/,!1)?("variable"==a&&(N.marked="property"),p(v(":"),la,ma)):(q(b),p(ma))}function ma(a,b){return"="==b?p(z):void 0}function sa(a){return","==a?p(aa):void 0}function ba(a,b){return"keyword b"==a&&"else"==b?p(u("form","else"),w,s):void 0}function Ta(a){return"("==a?p(u(")"),U,v(")"),s):void 0}function U(a){return"var"==a?p(aa,v(";"),Qa):";"==a?p(Qa):"variable"==a?p(rb):n(y,v(";"),Qa)}function rb(a,b){return"in"==
b||"of"==b?(N.marked="keyword",p(y)):p(E,Qa)}function Qa(a,b){return";"==a?p(Ja):"in"==b||"of"==b?(N.marked="keyword",p(y)):n(y,v(";"),Ja)}function Ja(a){")"!=a&&p(y)}function Ka(a,b){return"*"==b?(N.marked="keyword",p(Ka)):"variable"==a?(q(b),p(Ka)):"("==a?p(t,u(")"),R(sb,")"),s,w,r):void 0}function sb(a){return"spread"==a?p(sb):n(la,L)}function tb(a,b){return"variable"==a?(q(b),p(bb)):void 0}function bb(a,b){return"extends"==b?p(y):void 0}function Kb(a){return"{"==a?C(Q,"}"):void 0}function bc(a,
b){return"string"==a?p(w):"variable"==a?(q(b),p(Pa)):void 0}function Da(a,b){return"*"==b?(N.marked="keyword",p(Pa,v(";"))):"default"==b?(N.marked="keyword",p(y,v(";"))):n(w)}function hb(a){return"string"==a?p():n(da,Pa)}function da(a,b){return"{"==a?C(da,"}"):("variable"==a&&q(b),p())}function Pa(a,b){return"from"==b?(N.marked="keyword",p(y)):void 0}function Oa(a){return"]"==a?p():n(z,Lb)}function Lb(a){return"for"==a?n(Ra,v("]")):","==a?p(R(z,"]")):n(R(z,"]"))}function Ra(a){return"for"==a?p(Ta,
Ra):"if"==a?p(y,Ra):void 0}var ya,ua,ea=d.indentUnit,La=b.statementIndent,ra=b.jsonld,Sa=b.json||ra,jb=b.typescript,ub=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),g={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),
"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":g,"false":g,"null":g,undefined:g,NaN:g,Infinity:g,"this":a("this"),module:a("module"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d};if(jb){var c={type:"variable",style:"variable-3"},c={"interface":a("interface"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),
"static":a("static"),string:c,number:c,bool:c,any:c},f;for(f in c)b[f]=c[f]}return b}(),kb=/[+\-*&%=<>!?|~^]/,Ca=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Na="([{}])",va={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},N={state:null,column:null,marked:null,cc:null},ha={name:"this",next:{name:"arguments"}};return s.lex=!0,{startState:function(a){a={tokenize:e,lastType:"sof",cc:[],lexical:new l((a||0)-ea,0,"block",!1),localVars:b.localVars,
context:b.localVars&&{vars:b.localVars},indented:0};return b.globalVars&&"object"==typeof b.globalVars&&(a.globalVars=b.globalVars),a},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),k(a,b)),b.tokenize!=f&&a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"!=ya){b.lastType="operator"!=ya||"++"!=ua&&"--"!=ua?ya:"incdec";a:{var d=ya,e=ua,g=b.cc;N.state=b;N.stream=a;N.marked=null;N.cc=g;for(b.lexical.hasOwnProperty("align")||
(b.lexical.align=!0);;)if((g.length?g.pop():Sa?y:w)(d,e)){for(;g.length&&g[g.length-1].lex;)g.pop()();if(N.marked)c=N.marked;else{if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==e){d=!0;break b}for(g=b.context;g;g=g.prev)for(d=g.vars;d;d=d.next)if(d.name==e){d=!0;break b}d=void 0}c=d?"variable-2":c}break a}c=void 0}}return c},indent:function(c,d){if(c.tokenize==f)return a.Pass;if(c.tokenize!=e)return 0;var g=d&&d.charAt(0),h=c.lexical;if(!/^\s*else\b/.test(d))for(var k=c.cc.length-1;0<=
k;--k){var l=c.cc[k];if(l==s)h=h.prev;else if(l!=ba)break}"stat"==h.type&&"}"==g&&(h=h.prev);La&&")"==h.type&&"stat"==h.prev.type&&(h=h.prev);k=h.type;l=g==k;return"vardef"==k?h.indented+("operator"==c.lastType||","==c.lastType?h.info+1:0):"form"==k&&"{"==g?h.indented:"form"==k?h.indented+ea:"stat"==k?h.indented+("operator"==c.lastType||","==c.lastType?La||ea:0):"switch"!=h.info||l||0==b.doubleIndentSwitch?h.align?h.column+(l?0:1):h.indented+(l?0:ea):h.indented+(/^(?:case|default)\b/.test(d)?ea:2*
ea)},electricChars:":{}",blockCommentStart:Sa?null:"/*",blockCommentEnd:Sa?null:"*/",lineComment:Sa?null:"//",fold:"brace",helperType:Sa?"json":"javascript",jsonldMode:ra,jsonMode:Sa}});a.defineMIME("text/javascript","javascript");a.defineMIME("text/ecmascript","javascript");a.defineMIME("application/javascript","javascript");a.defineMIME("application/ecmascript","javascript");a.defineMIME("application/json",{name:"javascript",json:!0});a.defineMIME("application/x-json",{name:"javascript",json:!0});
a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});a.defineMIME("text/typescript",{name:"javascript",typescript:!0});a.defineMIME("application/typescript",{name:"javascript",typescript:!0})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror",require("../xml/xml"))):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml"],a):a(CodeMirror)})(function(a){a.defineMode("markdown",function(d,b){function c(a){return a.linkTitle=!1,a.em=!1,a.strong=!1,a.quote=0,v||a.f!=g||(a.f=l,a.block=e),a.trailingSpace=0,a.trailingSpaceNewLine=!1,a.thisLineHasContent=!1,null}function e(a,c){var d=a.sol(),e=!1!==c.list;!1!==c.list&&0<=c.indentationDiff?
(4>c.indentationDiff&&(c.indentation-=c.indentationDiff),c.list=null):!1!==c.list&&0<c.indentation?(c.list=null,c.listDepth=Math.floor(c.indentation/4)):!1!==c.list&&(c.list=!1,c.listDepth=0);var g=null;return 4<=c.indentationDiff?(c.indentation-=4,a.skipToEnd(),B):a.eatSpace()?null:(g=a.match(la))?(c.header=6>=g[0].length?g[0].length:6,b.highlightFormatting&&(c.formatting="header"),c.f=c.inline,h(c)):c.prevLineHasContent&&(g=a.match(Z))?(c.header="="==g[0].charAt(0)?1:2,b.highlightFormatting&&(c.formatting=
"header"),c.f=c.inline,h(c)):a.eat(">")?(c.indentation++,c.quote=d?1:c.quote+1,b.highlightFormatting&&(c.formatting="quote"),a.eatSpace(),h(c)):"["===a.peek()?(c.f=c.inline=t,t(a,c)):a.match(F,!0)?H:(!c.prevLineHasContent||e)&&(a.match(L,!1)||a.match(G,!1))?(d=null,a.match(L,!0)?d="ul":(a.match(G,!0),d="ol"),c.indentation+=4,c.list=!0,c.listDepth++,b.taskLists&&a.match(aa,!1)&&(c.taskList=!0),c.f=c.inline,b.highlightFormatting&&(c.formatting=["list","list-"+d]),h(c)):b.fencedCodeBlocks&&a.match(/^```([\w+#]*)/,
!0)?(c.localMode=z(RegExp.$1),c.localMode&&(c.localState=c.localMode.startState()),c.f=c.block=f,f(a,c),b.highlightFormatting&&(c.formatting="code-block"),c.code=!0,h(c)):(c.f=c.inline=c.inline,(0,c.inline)(a,c))}function g(a,b){var c=w.token(a,b.htmlState);return(v&&!b.htmlState.tagName&&!b.htmlState.context||b.md_inside&&-1<a.current().indexOf(">"))&&(b.f=l,b.block=e,b.htmlState=null),c}function f(a,c){if(a.sol()&&a.match(/^```/,!0)){c.localMode=c.localState=null;c.f=l;c.block=e;b.highlightFormatting&&
(c.formatting="code-block");c.code=!0;var d=h(c);return c.code=!1,d}return c.localMode?c.localMode.token(a,c.localState):(a.skipToEnd(),B)}function h(a){var c=[];if(a.formatting){c.push(P);"string"==typeof a.formatting&&(a.formatting=[a.formatting]);for(var d=0;d<a.formatting.length;d++)c.push(P+"-"+a.formatting[d]),"header"===a.formatting[d]&&c.push(P+"-"+a.formatting[d]+"-"+a.header),"quote"===a.formatting[d]&&(!b.maxBlockquoteDepth||b.maxBlockquoteDepth>=a.quote?c.push(P+"-"+a.formatting[d]+"-"+
a.quote):c.push("error"))}if(a.taskOpen)return c.push("meta"),c.length?c.join(" "):null;if(a.taskClosed)return c.push("property"),c.length?c.join(" "):null;if(a.linkHref)return c.push(M),c.length?c.join(" "):null;if(a.strong&&c.push(C),a.em&&c.push(R),a.linkText&&c.push($),a.code&&c.push(B),a.header&&(c.push(K),c.push(K+"-"+a.header)),a.quote&&(c.push(E),!b.maxBlockquoteDepth||b.maxBlockquoteDepth>=a.quote?c.push(E+"-"+a.quote):c.push(E+"-"+b.maxBlockquoteDepth)),!1!==a.list)(d=(a.listDepth-1)%3)?
1===d?c.push(I):c.push(A):c.push(S);return a.trailingSpaceNewLine?c.push("trailing-space-new-line"):a.trailingSpace&&c.push("trailing-space-"+(a.trailingSpace%2?"a":"b")),c.length?c.join(" "):null}function k(a,b){return a.match(ma,!0)?h(b):void 0}function l(c,d){var e=d.text(c,d);if("undefined"!=typeof e)return e;if(d.list)return d.list=null,h(d);if(d.taskList)return"x"!==c.match(aa,!0)[1]?d.taskOpen=!0:d.taskClosed=!0,b.highlightFormatting&&(d.formatting="task"),d.taskList=!1,h(d);if(d.taskOpen=
!1,d.taskClosed=!1,d.header&&c.match(/^#+$/,!0))return b.highlightFormatting&&(d.formatting="header"),h(d);var e=c.sol(),f=c.next();if(d.escape)return d.escape=!1,h(d);if("\\"===f)return b.highlightFormatting&&(d.formatting="escape"),d.escape=!0,h(d);if(d.linkTitle){d.linkTitle=!1;var k=f;"("===f&&(k=")");k=(k+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");if(c.match(RegExp("^\\s*(?:[^"+k+"\\\\]+|\\\\\\\\|\\\\.)"+k),!0))return M}if("`"===f)return e=d.formatting,b.highlightFormatting&&(d.formatting=
"code"),f=h(d),k=c.pos,c.eatWhile("`"),k=1+c.pos-k,d.code?k===D?(d.code=!1,f):(d.formatting=e,h(d)):(D=k,d.code=!0,h(d));if(d.code)return h(d);if("!"===f&&c.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return c.match(/\[[^\]]*\]/),d.inline=d.f=p,x;if("["===f&&c.match(/.*\](\(| ?\[)/,!1))return d.linkText=!0,b.highlightFormatting&&(d.formatting="link"),h(d);if("]"===f&&d.linkText)return b.highlightFormatting&&(d.formatting="link"),e=h(d),d.linkText=!1,d.inline=d.f=p,e;if("<"===f&&c.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,
!1))return d.f=d.inline=n,b.highlightFormatting&&(d.formatting="link"),e=h(d),e?e+=" ":e="",e+ca;if("<"===f&&c.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return d.f=d.inline=n,b.highlightFormatting&&(d.formatting="link"),e=h(d),e?e+=" ":e="",e+Q;if("<"===f&&c.match(/^\w/,!1))return-1!=c.string.indexOf(">")&&(e=c.string.substring(1,c.string.indexOf(">")),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(e)&&(d.md_inside=!0)),c.backUp(1),d.htmlState=a.startState(w),d.f=d.block=g,g(c,d);if("<"===f&&c.match(/^\/\w*?>/))return d.md_inside=
!1,"tag";k=!1;if(!b.underscoresBreakWords&&"_"===f&&"_"!==c.peek()&&c.match(/(\w)/,!1)){var l=c.pos-2;0<=l&&(l=c.string.charAt(l),"_"!==l&&l.match(/(\w)/,!1)&&(k=!0))}if("*"===f||"_"===f&&!k){if(!(e&&" "===c.peek())){if(d.strong===f&&c.eat(f))return b.highlightFormatting&&(d.formatting="strong"),f=h(d),d.strong=!1,f;if(!d.strong&&c.eat(f))return d.strong=f,b.highlightFormatting&&(d.formatting="strong"),h(d);if(d.em===f)return b.highlightFormatting&&(d.formatting="em"),f=h(d),d.em=!1,f;if(!d.em)return d.em=
f,b.highlightFormatting&&(d.formatting="em"),h(d)}}else if(" "===f&&(c.eat("*")||c.eat("_"))){if(" "===c.peek())return h(d);c.backUp(1)}return" "===f&&(c.match(/ +$/,!1)?d.trailingSpace++:d.trailingSpace&&(d.trailingSpaceNewLine=!0)),h(d)}function n(a,c){if(">"===a.next()){c.f=c.inline=l;b.highlightFormatting&&(c.formatting="link");var d=h(c);return d?d+=" ":d="",d+ca}return a.match(/^[^>]+/,!0),ca}function p(a,c){if(a.eatSpace())return null;var d=a.next();return"("===d||"["===d?(c.f=c.inline=q("("===
d?")":"]"),b.highlightFormatting&&(c.formatting="link-string"),c.linkHref=!0,h(c)):"error"}function q(a){return function(c,d){if(c.next()===a){d.f=d.inline=l;b.highlightFormatting&&(d.formatting="link-string");var e=h(d);return d.linkHref=!1,e}return c.match(s(a),!0)&&c.backUp(1),d.linkHref=!0,h(d)}}function t(a,c){return a.match(/^[^\]]*\]:/,!1)?(c.f=r,a.next(),b.highlightFormatting&&(c.formatting="link"),c.linkText=!0,h(c)):(c.f=c.inline=l,l(a,c))}function r(a,c){if(a.match(/^\]:/,!0)){c.f=c.inline=
u;b.highlightFormatting&&(c.formatting="link");var d=h(c);return c.linkText=!1,d}return a.match(/^[^\]]+/,!0),$}function u(a,b){return a.eatSpace()?null:(a.match(/^[^\s]+/,!0),void 0===a.peek()?b.linkTitle=!0:a.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),b.f=b.inline=l,M)}function s(a){return sa[a]||(a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),sa[a]=RegExp("^(?:[^\\\\]|\\\\.)*?("+a+")")),sa[a]}var v=a.modes.hasOwnProperty("xml"),w=a.getMode(d,
v?{name:"xml",htmlMode:!0}:"text/plain"),y={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},z=function(){var b,c,e={},g={},f=[];for(c in a.modes)a.modes.propertyIsEnumerable(c)&&f.push(c);for(b=0;b<f.length;b++)e[f[b]]=f[b];f=[];for(c in a.mimeModes)a.mimeModes.propertyIsEnumerable(c)&&f.push({mime:c,mode:a.mimeModes[c]});for(b=0;b<f.length;b++)c=f[b].mime,g[c]=f[b].mime;
for(var h in y)(y[h]in e||y[h]in g)&&(e[h]=y[h]);return function(b){return e[b]?a.getMode(d,e[b]):null}}();void 0===b.highlightFormatting&&(b.highlightFormatting=!1);void 0===b.maxBlockquoteDepth&&(b.maxBlockquoteDepth=0);void 0===b.underscoresBreakWords&&(b.underscoresBreakWords=!0);void 0===b.fencedCodeBlocks&&(b.fencedCodeBlocks=!1);void 0===b.taskLists&&(b.taskLists=!1);var D=0,K="header",B="comment",E="quote",S="variable-2",I="variable-3",A="keyword",H="hr",x="tag",P="formatting",ca="link",Q=
"link",$="link",M="string",R="em",C="strong",F=/^([*\-=_])(?:\s*\1){2,}\s*$/,L=/^[*\-+]\s+/,G=/^[0-9]+\.\s+/,aa=/^\[(x| )\](?=\s)/,la=/^#+/,Z=/^(?:\={1,}|-{1,})$/,ma=/^[^#!\[\]*_\\<>` "'(]+/,sa=[],ba={startState:function(){return{f:e,prevLineHasContent:!1,thisLineHasContent:!1,block:e,htmlState:null,indentation:0,inline:l,text:k,escape:!1,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1}},copyState:function(b){return{f:b.f,
prevLineHasContent:b.prevLineHasContent,thisLineHasContent:b.thisLineHasContent,block:b.block,htmlState:b.htmlState&&a.copyState(w,b.htmlState),indentation:b.indentation,localMode:b.localMode,localState:b.localMode?a.copyState(b.localMode,b.localState):null,inline:b.inline,text:b.text,escape:!1,formatting:!1,linkTitle:b.linkTitle,em:b.em,strong:b.strong,header:b.header,taskList:b.taskList,list:b.list,listDepth:b.listDepth,quote:b.quote,trailingSpace:b.trailingSpace,trailingSpaceNewLine:b.trailingSpaceNewLine,
md_inside:b.md_inside}},token:function(a,b){if(b.formatting=!1,a.sol()){var d=a.match(/^\s*$/,!0)||b.header;if(b.header=0,d)return b.prevLineHasContent=!1,c(b),this.token(a,b);b.prevLineHasContent=b.thisLineHasContent;b.thisLineHasContent=!0;b.escape=!1;b.taskList=!1;b.code=!1;b.trailingSpace=0;b.trailingSpaceNewLine=!1;b.f=b.block;var d=a.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,e=4*Math.floor((d-b.indentation)/4);4<e&&(e=4);e=b.indentation+e;if(b.indentationDiff=e-b.indentation,b.indentation=
e,0<d)return null}d=b.f(a,b);return a.start==a.pos?this.token(a,b):d},innerMode:function(a){return a.block==g?{state:a.htmlState,mode:w}:a.localState?{state:a.localState,mode:a.localMode}:{state:a,mode:ba}},blankLine:c,getType:h,fold:"markdown"};return ba},"xml");a.defineMIME("text/x-markdown","markdown")});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineMode("sql",function(a,b){function c(a,b){var c=a.next();if(t[c]){var d=t[c](a,b);if(!1!==d)return d}if(1==q.hexNumber&&("0"==c&&a.match(/^[xX][0-9a-fA-F]+/)||("x"==c||"X"==c)&&a.match(/^'[0-9a-fA-F]+'/))||1==q.binaryNumber&&(("b"==c||"B"==c)&&a.match(/^'[01]+'/)||"0"==c&&a.match(/^b[01]+/)))return"number";
if(47<c.charCodeAt(0)&&58>c.charCodeAt(0))return a.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),1==q.decimallessFloat&&a.eat("."),"number";if("?"==c&&(a.eatSpace()||a.eol()||a.eat(";")))return"variable-3";if("'"==c||'"'==c&&q.doubleQuote)return b.tokenize=e(c),b.tokenize(a,b);if((1==q.nCharCast&&("n"==c||"N"==c)||1==q.charsetCast&&"_"==c&&a.match(/[a-z][a-z0-9]*/i))&&("'"==a.peek()||'"'==a.peek()))return"keyword";if(/^[\(\),\;\[\]]/.test(c))return null;if(q.commentSlashSlash&&"/"==c&&a.eat("/")||q.commentHash&&
"#"==c||"-"==c&&a.eat("-")&&(!q.commentSpaceRequired||a.eat(" ")))return a.skipToEnd(),"comment";if("/"==c&&a.eat("*"))return b.tokenize=g,b.tokenize(a,b);if("."!=c){if(p.test(c))return a.eatWhile(p),null;if("{"==c&&(a.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||a.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";a.eatWhile(/^[_\w\d]/);c=a.current().toLowerCase();return r.hasOwnProperty(c)&&(a.match(/^( )+'[^']*'/)||a.match(/^( )+"[^"]*"/))?"number":k.hasOwnProperty(c)?"atom":l.hasOwnProperty(c)?
"builtin":n.hasOwnProperty(c)?"keyword":h.hasOwnProperty(c)?"string-2":null}return 1==q.zerolessFloat&&a.match(/^(?:\d+(?:e[+-]?\d+)?)/i)?"number":1==q.ODBCdotTable&&a.match(/^[a-zA-Z_]+/)?"variable-2":void 0}function e(a){return function(b,d){for(var e,g=!1;null!=(e=b.next());){if(e==a&&!g){d.tokenize=c;break}g=!g&&"\\"==e}return"string"}}function g(a,b){for(;;){if(!a.skipTo("*")){a.skipToEnd();break}if(a.next(),a.eat("/")){b.tokenize=c;break}}return"comment"}function f(a,b,c){b.context={prev:b.context,
indent:a.indentation(),col:a.column(),type:c}}var h=b.client||{},k=b.atoms||{"false":!0,"true":!0,"null":!0},l=b.builtin||{},n=b.keywords||{},p=b.operatorChars||/^[*+\-%<>!=&|~^]/,q=b.support||{},t=b.hooks||{},r=b.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:c,context:null}},token:function(a,b){if(a.sol()&&b.context&&null==b.context.align&&(b.context.align=!1),a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==c)return c;b.context&&null==b.context.align&&
(b.context.align=!0);var d=a.current();"("==d?f(a,b,")"):"["==d?f(a,b,"]"):b.context&&b.context.type==d&&(b.indent=b.context.indent,b.context=b.context.prev);return c},indent:function(b,c){var e=b.context;if(!e)return 0;var g=c.charAt(0)==e.type;return e.align?e.col+(g?0:1):e.indent+(g?0:a.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:q.commentSlashSlash?"//":q.commentHash?"#":null}});(function(){function d(a){for(var b;null!=(b=a.next());)if("`"==b&&!a.eat("`"))return"variable-2";
return null}function b(a){return a.eat("@")&&(a.match(/^session\./),a.match(/^local\./),a.match(/^global\./)),a.eat("'")?(a.match(/^.*'/),"variable-2"):a.eat('"')?(a.match(/^.*"/),"variable-2"):a.eat("`")?(a.match(/^.*`/),"variable-2"):a.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function c(a){return a.eat("N")?"atom":a.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function e(a){var b={};a=a.split(" ");for(var c=0;c<a.length;++c)b[a[c]]=!0;return b}a.defineMIME("text/x-sql",{name:"sql",keywords:e("alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where begin"),
builtin:e("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:e("date time timestamp"),support:e("ODBCdotTable doubleQuote binaryNumber hexNumber")});a.defineMIME("text/x-mssql",
{name:"sql",client:e("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:e("alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered"),builtin:e("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),
atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:e("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":b}});a.defineMIME("text/x-mysql",{name:"sql",client:e("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:e("alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group groupby_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:e("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:e("date time timestamp"),support:e("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":b,"`":d,"\\":c}});a.defineMIME("text/x-mariadb",{name:"sql",client:e("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:e("alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:e("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:e("date time timestamp"),support:e("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":b,"`":d,"\\":c}});a.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:e("use select from using consistency where limit first reversed first and in insert into values using consistency ttl update set delete truncate begin batch apply create keyspace with columnfamily primary key index on drop alter type add any one quorum all local_quorum each_quorum"),builtin:e("ascii bigint blob boolean counter decimal double float int text timestamp uuid varchar varint"),atoms:e("false true"),
operatorChars:/^[<>=]/,dateSQL:{},support:e("commentSlashSlash decimallessFloat"),hooks:{}});a.defineMIME("text/x-plsql",{name:"sql",client:e("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),
keywords:e("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),
builtin:e("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),
operatorChars:/^[*+\-%<>!=~]/,dateSQL:e("date time timestamp"),support:e("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")});a.defineMIME("text/x-hive",{name:"sql",keywords:e("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),
builtin:e("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:e("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:e("date timestamp"),support:e("ODBCdotTable doubleQuote binaryNumber hexNumber")})})()});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineMode("xml",function(d,b){function c(a,b){function c(d){return b.tokenize=d,d(a,b)}var d=a.next();if("<"==d)return a.eat("!")?a.eat("[")?a.match("CDATA[")?c(f("atom","]]\x3e")):null:a.match("--")?c(f("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(h(1))):null:a.eat("?")?
(a.eatWhile(/[\w\._\-]/),b.tokenize=f("meta","?>"),"meta"):(B=a.eat("/")?"closeTag":"openTag",b.tokenize=e,"tag bracket");if("&"==d){var g;return g=a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"),g?"atom":"error"}return a.eatWhile(/[^&<]/),null}function e(a,b){var d=a.next();return">"==d||"/"==d&&a.eat(">")?(b.tokenize=c,B=">"==d?"endTag":"selfcloseTag","tag bracket"):"="==d?(B="equals",null):"<"==d?(b.tokenize=c,b.state=
p,b.tagName=b.tagStart=null,(d=b.tokenize(a,b))?d+" error":"error"):/[\'\"]/.test(d)?(b.tokenize=g(d),b.stringStartCol=a.column(),b.tokenize(a,b)):(a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function g(a){var b=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=e;break}return"string"};return b.isInAttribute=!0,b}function f(a,b){return function(d,e){for(;!d.eol();){if(d.match(b)){e.tokenize=c;break}d.next()}return a}}function h(a){return function(b,d){for(var e;null!=(e=b.next());){if("<"==
e)return d.tokenize=h(a+1),d.tokenize(b,d);if(">"==e){if(1==a){d.tokenize=c;break}return d.tokenize=h(a-1),d.tokenize(b,d)}}return"meta"}}function k(a,b,c){this.prev=a.context;this.tagName=b;this.indent=a.indented;this.startOfLine=c;(S.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)&&(this.noIndent=!0)}function l(a){a.context&&(a.context=a.context.prev)}function n(a,b){for(var c;a.context&&!(c=a.context.tagName,!S.contextGrabbers.hasOwnProperty(c)||!S.contextGrabbers[c].hasOwnProperty(b));)l(a)}
function p(a,b,c){return"openTag"==a?(c.tagStart=b.column(),q):"closeTag"==a?t:p}function q(a,b,c){return"word"==a?(c.tagName=b.current(),E="tag",s):(E="error",q)}function t(a,b,c){return"word"==a?(a=b.current(),c.context&&c.context.tagName!=a&&S.implicitlyClosed.hasOwnProperty(c.context.tagName)&&l(c),c.context&&c.context.tagName==a?(E="tag",r):(E="tag error",u)):(E="error",u)}function r(a,b,c){return"endTag"!=a?(E="error",r):(l(c),p)}function u(a,b,c){return E="error",r(a,b,c)}function s(a,b,c){if("word"==
a)return E="attribute",v;if("endTag"==a||"selfcloseTag"==a){b=c.tagName;var d=c.tagStart;return c.tagName=c.tagStart=null,"selfcloseTag"==a||S.autoSelfClosers.hasOwnProperty(b)?n(c,b):(n(c,b),c.context=new k(c,b,d==c.indented)),p}return E="error",s}function v(a,b,c){return"equals"==a?w:(S.allowMissing||(E="error"),s(a,b,c))}function w(a,b,c){return"string"==a?y:"word"==a&&S.allowUnquoted?(E="string",s):(E="error",s(a,b,c))}function y(a,b,c){return"string"==a?y:s(a,b,c)}var z=d.indentUnit,D=b.multilineTagIndentFactor||
1,K=b.multilineTagIndentPastTag;null==K&&(K=!0);var B,E,S=b.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,
div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},
I=b.alignCDATA;return{startState:function(){return{tokenize:c,state:p,indented:0,tagName:null,tagStart:null,context:null}},token:function(a,b){if(!b.tagName&&a.sol()&&(b.indented=a.indentation()),a.eatSpace())return null;B=null;var c=b.tokenize(a,b);return(c||B)&&"comment"!=c&&(E=null,b.state=b.state(B||c,a,b),E&&(c="error"==E?c+" error":E)),c},indent:function(b,d,g){var f=b.context;if(b.tokenize.isInAttribute)return b.tagStart==b.indented?b.stringStartCol+1:b.indented+z;if(f&&f.noIndent)return a.Pass;
if(b.tokenize!=e&&b.tokenize!=c)return g?g.match(/^(\s*)/)[0].length:0;if(b.tagName)return K?b.tagStart+b.tagName.length+2:b.tagStart+z*D;if(I&&/<!\[CDATA\[/.test(d))return 0;if((b=d&&/^<(\/)?([\w_:\.-]*)/.exec(d))&&b[1])for(;f;){if(f.tagName==b[2]){f=f.prev;break}if(!S.implicitlyClosed.hasOwnProperty(f.tagName))break;f=f.prev}else if(b)for(;f;){d=S.contextGrabbers[f.tagName];if(!d||!d.hasOwnProperty(b[2]))break;f=f.prev}for(;f&&!f.startOfLine;)f=f.prev;return f?f.indent+z:0},electricInput:/<\/[\s\w:]+>$/,
blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:b.htmlMode?"html":"xml",helperType:b.htmlMode?"html":"xml"}});a.defineMIME("text/xml","xml");a.defineMIME("application/xml","xml");a.mimeModes.hasOwnProperty("text/html")||a.defineMIME("text/html",{name:"xml",htmlMode:!0})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function d(a,b){var c=a.getRange(g(b.line,b.ch-1),g(b.line,b.ch+1));return 2==c.length?c:null}function b(b){for(var c={name:"autoCloseBrackets",Backspace:function(c){if(c.getOption("disableInput"))return a.Pass;for(var e=c.listSelections(),h=0;h<e.length;h++){if(!e[h].empty())return a.Pass;var k=d(c,e[h].head);
if(!k||0!=b.indexOf(k)%2)return a.Pass}for(h=e.length-1;0<=h;h--)k=e[h].head,c.replaceRange("",g(k.line,k.ch-1),g(k.line,k.ch+1))}},k="",l=0;l<b.length;l+=2)!function(b,d){b!=d&&(k+=d);c["'"+b+"'"]=function(c){if(c.getOption("disableInput"))return a.Pass;for(var f,h,l=c.listSelections(),s=0;s<l.length;s++){var v=l[s],w=v.head;if("'"==b&&"comment"==c.getTokenTypeAt(w))return a.Pass;h=c.getRange(w,g(w.line,w.ch+1));if(v.empty())if(b==d&&h==d)h=c.getRange(w,g(w.line,w.ch+3))==b+b+b?"skipThree":"skip";
else if(b==d&&1<w.ch&&c.getRange(g(w.line,w.ch-2),w)==b+b&&(2>=w.ch||c.getRange(g(w.line,w.ch-3),g(w.line,w.ch-2))!=b))h="addFour";else{if(b==d&&a.isWordChar(h)||!(c.getLine(w.line).length==w.ch||0<=k.indexOf(h)||e.test(h)))return a.Pass;h="both"}else h="surround";if(f){if(f!=h)return a.Pass}else f=h}c.operation(function(){if("skip"==f)c.execCommand("goCharRight");else if("skipThree"==f)for(var a=0;3>a;a++)c.execCommand("goCharRight");else if("surround"==f){for(var e=c.getSelections(),a=0;a<e.length;a++)e[a]=
b+e[a]+d;c.replaceSelections(e,"around")}else"both"==f?(c.replaceSelection(b+d,null),c.execCommand("goCharLeft")):"addFour"==f&&(c.replaceSelection(b+b+b+b,"before"),c.execCommand("goCharRight"))})};b!=d&&(c["'"+d+"'"]=function(b){for(var c=b.listSelections(),e=0;e<c.length;e++){var f=c[e];if(!f.empty()||b.getRange(f.head,g(f.head.line,f.head.ch+1))!=d)return a.Pass}b.execCommand("goCharRight")})}(b.charAt(l),b.charAt(l+1));return c}function c(b){return function(c){if(c.getOption("disableInput"))return a.Pass;
for(var e=c.listSelections(),g=0;g<e.length;g++){if(!e[g].empty())return a.Pass;var n=d(c,e[g].head);if(!n||0!=b.indexOf(n)%2)return a.Pass}c.operation(function(){c.replaceSelection("\n\n",null);c.execCommand("goCharLeft");e=c.listSelections();for(var a=0;a<e.length;a++){var b=e[a].head.line;c.indentLine(b,null,!0);c.indentLine(b+1,null,!0)}})}}var e=/\s/,g=a.Pos;a.defineOption("autoCloseBrackets",!1,function(d,e,g){if(g!=a.Init&&g&&d.removeKeyMap("autoCloseBrackets"),e){var l="()[]{}''\"\"";g="[]{}";
"string"==typeof e?l=e:"object"==typeof e&&(null!=e.pairs&&(l=e.pairs),null!=e.explode&&(g=e.explode));e=b(l);g&&(e.Enter=c(g));d.addKeyMap(e)}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],a):a(CodeMirror)})(function(a){function d(d){if(d.getOption("disableInput"))return a.Pass;for(var f=d.listSelections(),h=[],k=0;k<f.length;k++){if(!f[k].empty())return a.Pass;var l=f[k].head,n=d.getTokenAt(l),p=a.innerMode(d.getMode(),n.state),q=p.state;if("xml"!=p.mode.name||!q.tagName)return a.Pass;
var t=d.getOption("autoCloseTags"),r="html"==p.mode.configuration,p="object"==typeof t&&t.dontCloseTags||r&&c,r="object"==typeof t&&t.indentTags||r&&e,t=q.tagName;n.end>l.ch&&(t=t.slice(0,t.length-n.end+l.ch));var u=t.toLowerCase();if(!t||"string"==n.type&&(n.end!=l.ch||!/[\"\']/.test(n.string.charAt(n.string.length-1))||1==n.string.length)||"tag"==n.type&&"closeTag"==q.type||n.string.indexOf("/")==n.string.length-1||p&&-1<b(p,u)||a.scanForClosingTag&&a.scanForClosingTag(d,l,t,Math.min(d.lastLine()+
1,l.line+50)))return a.Pass;n=r&&-1<b(r,u);h[k]={indent:n,text:">"+(n?"\n\n":"")+"</"+t+">",newPos:n?a.Pos(l.line+1,0):a.Pos(l.line,l.ch+1)}}for(k=f.length-1;0<=k;k--)l=h[k],d.replaceRange(l.text,f[k].head,f[k].anchor,"+insert"),n=d.listSelections().slice(0),n[k]={head:l.newPos,anchor:l.newPos},d.setSelections(n),l.indent&&(d.indentLine(l.newPos.line,null,!0),d.indentLine(l.newPos.line+1,null,!0))}function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;++c)if(a[c]==b)return c;
return-1}a.defineOption("autoCloseTags",!1,function(b,c,e){if(e!=a.Init&&e&&b.removeKeyMap("autoCloseTags"),c)e={name:"autoCloseTags"},("object"!=typeof c||c.whenClosing)&&(e["'/'"]=function(b){a:if(b.getOption("disableInput"))b=a.Pass;else{for(var c=b.listSelections(),d=[],e=0;e<c.length;e++){if(!c[e].empty()){b=a.Pass;break a}var g=c[e].head,f=b.getTokenAt(g),h=a.innerMode(b.getMode(),f.state),u=h.state;if("string"==f.type||"<"!=f.string.charAt(0)||f.start!=g.ch-1||"xml"!=h.mode.name||!u.context||
!u.context.tagName){b=a.Pass;break a}d[e]="/"+u.context.tagName+">"}b.replaceSelections(d);b=void 0}return b}),("object"!=typeof c||c.whenOpening)&&(e["'>'"]=function(a){return d(a)}),b.addKeyMap(e)});var c="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),e="applet blockquote body button div dl fieldset form frameset h1 h2 h3 h4 h5 h6 head html iframe layer legend object ol p select table ul".split(" ")});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../../mode/css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../../mode/css/css"],a):a(CodeMirror)})(function(a){var d={link:1,visited:1,active:1,hover:1,focus:1,"first-letter":1,"first-line":1,"first-child":1,before:1,after:1,lang:1};a.registerHelper("hint","css",function(b){function c(a){for(var b in a)h&&0!=b.lastIndexOf(h,0)||n.push(b)}var e=b.getCursor(),g=
b.getTokenAt(e),f=a.innerMode(b.getMode(),g.state);if("css"==f.mode.name){var h=g.string;b=g.start;var k=g.end;/[^\w$_-]/.test(h)&&(h="",b=k=e.ch);var l=a.resolveMode("text/css"),n=[],f=f.state.state;return"pseudo"==f||"variable-3"==g.type?c(d):"block"==f||"maybeprop"==f?c(l.propertyKeywords):"prop"==f||"parens"==f||"at"==f||"params"==f?(c(l.valueKeywords),c(l.colorKeywords)):("media"==f||"media_parens"==f)&&(c(l.mediaTypes),c(l.mediaFeatures)),n.length?{list:n,from:a.Pos(e.line,b),to:a.Pos(e.line,
k)}:void 0}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function d(a,b,d){var f;return f=a.getWrapperElement().appendChild(document.createElement("div")),f.className=d?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof b?f.innerHTML=b:f.appendChild(b),f}function b(a,b){a.state.currentNotificationClose&&a.state.currentNotificationClose();
a.state.currentNotificationClose=b}a.defineExtension("openDialog",function(c,e,g){function f(){l||(l=!0,k.parentNode.removeChild(k))}b(this,null);var h,k=d(this,c,g&&g.bottom),l=!1,n=this,p=k.getElementsByTagName("input")[0];return p?(g&&g.value&&(p.value=g.value),a.on(p,"keydown",function(b){g&&g.onKeyDown&&g.onKeyDown(b,p.value,f)||(13==b.keyCode||27==b.keyCode)&&(p.blur(),a.e_stop(b),f(),n.focus(),13==b.keyCode&&e(p.value))}),g&&g.onKeyUp&&a.on(p,"keyup",function(a){g.onKeyUp(a,p.value,f)}),g&&
g.value&&(p.value=g.value),p.focus(),a.on(p,"blur",f)):(h=k.getElementsByTagName("button")[0])&&(a.on(h,"click",function(){f();n.focus()}),h.focus(),a.on(h,"blur",f)),f});a.defineExtension("openConfirm",function(c,e,g){function f(){k||(k=!0,h.parentNode.removeChild(h),l.focus())}b(this,null);var h=d(this,c,g&&g.bottom);c=h.getElementsByTagName("button");var k=!1,l=this,n=1;c[0].focus();for(g=0;g<c.length;++g){var p=c[g];!function(b){a.on(p,"click",function(c){a.e_preventDefault(c);f();b&&b(l)})}(e[g]);
a.on(p,"blur",function(){--n;setTimeout(function(){0>=n&&f()},200)});a.on(p,"focus",function(){++n})}});a.defineExtension("openNotification",function(c,e){function g(){l||(l=!0,clearTimeout(f),h.parentNode.removeChild(h))}b(this,g);var f,h=d(this,c,e&&e.bottom),k=e&&(void 0===e.duration?5E3:e.duration),l=!1;a.on(h,"click",function(b){a.e_preventDefault(b);g()});k&&(f=setTimeout(g,e.duration))})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineOption("fullScreen",!1,function(d,b,c){c==a.Init&&(c=!1);!c!=!b&&(b?(b=d.getWrapperElement(),d.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:b.style.width,height:b.style.height},b.style.width="",b.style.height="auto",b.className+=" CodeMirror-fullscreen",
document.documentElement.style.overflow="hidden"):(b=d.getWrapperElement(),b.className=b.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="",c=d.state.fullScreenRestore,b.style.width=c.width,b.style.height=c.height,window.scrollTo(c.scrollLeft,c.scrollTop)),d.refresh())})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function d(a){for(var b in n)n.hasOwnProperty(b)&&(a.attrs[b]=n[b])}var b="ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu".split(" "),
c=["_blank","_self","_top","_parent"],e=["ascii","utf-8","utf-16","latin1","latin1"],g=["get","post","put","delete"],f=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],h="all;screen;print;embossed;braille;handheld;print;projection;screen;tty;tv;speech;3d-glasses;resolution [>][<][=] [X];device-aspect-ratio: X/Y;orientation:portrait;orientation:landscape;device-height: [X];device-width: [X]".split(";"),k={attrs:{}},l={a:{attrs:{href:null,ping:null,type:null,media:h,target:c,
hreflang:b}},abbr:k,acronym:k,address:k,applet:k,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:h,hreflang:b,type:null,shape:["default","rect","circle","poly"]}},article:k,aside:k,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["","autoplay"],loop:["","loop"],controls:["","controls"]}},b:k,base:{attrs:{href:null,target:c}},basefont:k,bdi:k,bdo:k,big:k,blockquote:{attrs:{cite:null}},body:k,br:k,
button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["","autofocus"],disabled:["","autofocus"],formenctype:f,formmethod:g,formnovalidate:["","novalidate"],formtarget:c,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:k,center:k,cite:k,code:k,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["","disabled"],checked:["","checked"]}},
data:{attrs:{value:null}},datagrid:{attrs:{disabled:["","disabled"],multiple:["","multiple"]}},datalist:{attrs:{data:null}},dd:k,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["","open"]}},dfn:k,dir:k,div:k,dl:k,dt:k,em:k,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["","disabled"],form:null,name:null}},figcaption:k,figure:k,font:k,footer:k,form:{attrs:{action:null,name:null,"accept-charset":e,autocomplete:["on","off"],
enctype:f,method:g,novalidate:["","novalidate"],target:c}},frame:k,frameset:k,h1:k,h2:k,h3:k,h4:k,h5:k,h6:k,head:{attrs:{},children:"title base link style meta script noscript command".split(" ")},header:k,hgroup:k,hr:k,html:{attrs:{manifest:null},children:["head","body"]},i:k,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["","seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,
width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["","autofocus"],checked:["","checked"],disabled:["","disabled"],formenctype:f,formmethod:g,formnovalidate:["","novalidate"],formtarget:c,multiple:["",
"multiple"],readonly:["","readonly"],required:["","required"],type:"hidden text search tel url email password datetime date month week time datetime-local number range color checkbox radio file submit image reset button".split(" ")}},ins:{attrs:{cite:null,datetime:null}},kbd:k,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["","autofocus"],disabled:["","disabled"],keytype:["RSA"]}},label:{attrs:{"for":null,form:null}},legend:k,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,
hreflang:b,media:h,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:k,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:e,name:"viewport application-name author description generator keywords".split(" "),"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:k,noframes:k,noscript:k,object:{attrs:{data:null,type:null,
name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["","typemustmatch"]}},ol:{attrs:{reversed:["","reversed"],start:null,type:["1","a","A","i","I"]}},optgroup:{attrs:{disabled:["","disabled"],label:null}},option:{attrs:{disabled:["","disabled"],label:null,selected:["","selected"],value:null}},output:{attrs:{"for":null,form:null,name:null}},p:k,param:{attrs:{name:null,value:null}},pre:k,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:k,rt:k,ruby:k,s:k,samp:k,script:{attrs:{type:["text/javascript"],
src:null,async:["","async"],defer:["","defer"],charset:e}},section:k,select:{attrs:{form:null,name:null,size:null,autofocus:["","autofocus"],disabled:["","disabled"],multiple:["","multiple"]}},small:k,source:{attrs:{src:null,type:null,media:null}},span:k,strike:k,strong:k,style:{attrs:{type:["text/css"],media:h,scoped:null}},sub:k,summary:k,sup:k,table:k,tbody:k,td:{attrs:{colspan:null,rowspan:null,headers:null}},textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,
cols:null,autofocus:["","autofocus"],disabled:["","disabled"],readonly:["","readonly"],required:["","required"],wrap:["soft","hard"]}},tfoot:k,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:k,time:{attrs:{datetime:null}},title:k,tr:k,track:{attrs:{src:null,label:null,"default":null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:b}},tt:k,u:k,ul:k,"var":k,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous",
"use-credentials"],preload:["auto","metadata","none"],autoplay:["","autoplay"],mediagroup:["movie"],muted:["","muted"],controls:["","controls"]}},wbr:k},n={accesskey:"abcdefghijklmnopqrstuvwxyz0123456789".split(""),"class":null,contenteditable:["true","false"],contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,
lang:["en","es"],spellcheck:["true","false"],style:null,tabindex:"123456789".split(""),title:null,translate:["yes","no"],onclick:null,rel:"stylesheet alternate author bookmark help license next nofollow noreferrer prefetch prev search tag".split(" ")};d(k);for(var p in l)l.hasOwnProperty(p)&&l[p]!=k&&d(l[p]);a.htmlSchema=l;a.registerHelper("hint","html",function(b,c){var d={schemaInfo:l};if(c)for(var e in c)d[e]=c[e];return a.hint.xml(b,d)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function d(a,b){for(var c=0,d=a.length;d>c;++c)b(a[c])}function b(b,c,d,f){var h=b.getCursor(),k=d(b,h),l=k;if(!/\b(?:string|comment)\b/.test(k.type)){k.state=a.innerMode(b.getMode(),k.state).state;for(/^[\w$_]*$/.test(k.string)||(k=l={start:h.ch,end:h.ch,string:"",state:k.state,type:"."==k.string?"property":
null});"property"==l.type;){if(l=d(b,g(h.line,l.start)),"."!=l.string)return;if(l=d(b,g(h.line,l.start)),!n)var n=[];n.push(l)}return{list:e(k,n,c,f),from:g(h.line,k.start),to:g(h.line,k.end)}}}function c(a,b){var c=a.getTokenAt(b);return b.ch==c.start+1&&"."==c.string.charAt(0)?(c.end=c.start,c.string=".",c.type="property"):/^\.[\w$_]*$/.test(c.string)&&(c.type="property",c.start++,c.string=c.string.replace(/\./,"")),c}function e(a,b,c,e){function g(a){if(0==a.lastIndexOf(w,0)){var b;a:if(Array.prototype.indexOf)b=
-1!=n.indexOf(a);else{for(b=n.length;b--;)if(n[b]===a){b=!0;break a}b=!1}b||n.push(a)}}function l(a){"string"==typeof a?d(f,g):a instanceof Array?d(h,g):a instanceof Function&&d(k,g);for(var b in a)g(b)}var n=[],w=a.string;if(b&&b.length){var y;a=b.pop();for(a.type&&0===a.type.indexOf("variable")?(e&&e.additionalContext&&(y=e.additionalContext[a.string]),y=y||window[a.string]):"string"==a.type?y="":"atom"==a.type?y=1:"function"==a.type&&(null==window.jQuery||"$"!=a.string&&"jQuery"!=a.string||"function"!=
typeof window.jQuery?null!=window._&&"_"==a.string&&"function"==typeof window._&&(y=window._()):y=window.jQuery());null!=y&&b.length;)y=y[b.pop().string];null!=y&&l(y)}else{for(b=a.state.localVars;b;b=b.next)g(b.name);for(b=a.state.globalVars;b;b=b.next)g(b.name);l(window);d(c,g)}return n}var g=a.Pos;a.registerHelper("hint","javascript",function(a,c){return b(a,l,function(a,b){return a.getTokenAt(b)},c)});a.registerHelper("hint","coffeescript",function(a,d){return b(a,n,c,d)});var f="charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search".split(" "),
h="length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight ".split(" "),k=["prototype","apply","call","bind"],l="break case catch continue debugger default delete do else false finally for function if in instanceof new null return switch throw true try typeof var void while with".split(" "),n="and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes".split(" ")});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function d(a,c,d,e){var g=a.getLineHandle(c.line),k=c.ch-1,g=0<=k&&h[g.text.charAt(k)]||h[g.text.charAt(++k)];if(!g)return null;var u=">"==g.charAt(1)?1:-1;if(d&&0<u!=(k==c.ch))return null;d=a.getTokenTypeAt(f(c.line,k+1));a=b(a,f(c.line,k+(0<u?1:0)),u,d||null,e);return null==a?null:{from:f(c.line,k),
to:a&&a.pos,match:a&&a.ch==g.charAt(0),forward:0<u}}function b(a,b,c,d,e){var g=e&&e.maxScanLineLength||1E4,k=e&&e.maxScanLines||1E3,s=[];e=e&&e.bracketRegex?e.bracketRegex:/[(){}[\]]/;for(var k=0<c?Math.min(b.line+k,a.lastLine()+1):Math.max(a.firstLine()-1,b.line-k),v=b.line;v!=k;v+=c){var w=a.getLine(v);if(w){var y=0<c?0:w.length-1,z=0<c?w.length:-1;if(!(w.length>g))for(v==b.line&&(y=b.ch-(0>c?1:0));y!=z;y+=c){var D=w.charAt(y);if(e.test(D)&&(void 0===d||a.getTokenTypeAt(f(v,y+1))==d))if(">"==h[D].charAt(1)==
0<c)s.push(D);else{if(!s.length)return{pos:f(v,y),ch:D};s.pop()}}}}return v-c==(0<c?a.lastLine():a.firstLine())?!1:null}function c(a,b,c){for(var e=a.state.matchBrackets.maxHighlightLineLength||1E3,h=[],k=a.listSelections(),u=0;u<k.length;u++){var s=k[u].empty()&&d(a,k[u].head,!1,c);if(s&&a.getLine(s.from.line).length<=e){var v=s.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";h.push(a.markText(s.from,f(s.from.line,s.from.ch+1),{className:v}));s.to&&a.getLine(s.to.line).length<=
e&&h.push(a.markText(s.to,f(s.to.line,s.to.ch+1),{className:v}))}}if(h.length){g&&a.state.focused&&a.display.input.focus();c=function(){a.operation(function(){for(var a=0;a<h.length;a++)h[a].clear()})};if(!b)return c;setTimeout(c,800)}}function e(a){a.operation(function(){k&&(k(),k=null);k=c(a,!1,a.state.matchBrackets)})}var g=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),f=a.Pos,h={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},k=null;a.defineOption("matchBrackets",
!1,function(b,c,d){d&&d!=a.Init&&b.off("cursorActivity",e);c&&(b.state.matchBrackets="object"==typeof c?c:{},b.on("cursorActivity",e))});a.defineExtension("matchBrackets",function(){c(this,!0)});a.defineExtension("findMatchingBracket",function(a,b,c){return d(this,a,b,c)});a.defineExtension("scanForBracket",function(a,c,d,e){return b(this,a,c,d,e)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],a):a(CodeMirror)})(function(a){function d(a){a.state.tagHit&&a.state.tagHit.clear();a.state.tagOther&&a.state.tagOther.clear();a.state.tagHit=a.state.tagOther=null}function b(b){b.state.failedTagMatch=!1;b.operation(function(){if(d(b),!b.somethingSelected()){var c=b.getCursor(),f=b.getViewport();
f.from=Math.min(f.from,c.line);f.to=Math.max(c.line+1,f.to);if(c=a.findMatchingTag(b,c,f))b.state.matchBothTags&&(f="open"==c.at?c.open:c.close)&&(b.state.tagHit=b.markText(f.from,f.to,{className:"CodeMirror-matchingtag"})),(c="close"==c.at?c.open:c.close)?b.state.tagOther=b.markText(c.from,c.to,{className:"CodeMirror-matchingtag"}):b.state.failedTagMatch=!0}})}function c(a){a.state.failedTagMatch&&b(a)}a.defineOption("matchTags",!1,function(e,g,f){f&&f!=a.Init&&(e.off("cursorActivity",b),e.off("viewportChange",
c),d(e));g&&(e.state.matchBothTags="object"==typeof g&&g.bothTags,e.on("cursorActivity",b),e.on("viewportChange",c),b(e))});a.commands.toMatchingTag=function(b){var c=a.findMatchingTag(b,b.getCursor());c&&(c="close"==c.at?c.open:c.close)&&b.extendSelection(c.to,c.from)}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.runMode=function(d,b,c,e){b=a.getMode(a.defaults,b);var g=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||9>document.documentMode);if(1==c.nodeType){var f=e&&e.tabSize||a.defaults.tabSize,h=c,k=0;h.innerHTML="";c=function(a,b){if("\n"==a)return h.appendChild(document.createTextNode(g?
"\r":a)),k=0,void 0;for(var c="",d=0;;){var e=a.indexOf("\t",d);if(-1==e){c+=a.slice(d);k+=a.length-d;break}k+=e-d;c+=a.slice(d,e);d=f-k%f;k+=d;for(var l=0;d>l;++l)c+=" ";d=e+1}b?(e=h.appendChild(document.createElement("span")),e.className="cm-"+b.replace(/ +/g," cm-"),e.appendChild(document.createTextNode(c))):h.appendChild(document.createTextNode(c))}}d=a.splitLines(d);e=e&&e.state||a.startState(b);for(var l=0,n=d.length;n>l;++l){l&&c("\n");var p=new a.StringStream(d[l]);for(!p.string&&b.blankLine&&
b.blankLine(e);!p.eol();){var q=b.token(p,e);c(p.current(),q,l,p.start,e);p.start=p.pos}}}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function d(a,b,c){this.cm=a;this.getHints=b;this.options=c;this.widget=this.onClose=null}function b(a,b){function c(a,g){var f;f="string"!=typeof g?function(a){return g(a,b)}:d.hasOwnProperty(g)?d[g]:g;e[a]=f}var d={Up:function(){b.moveFocus(-1)},Down:function(){b.moveFocus(1)},PageUp:function(){b.moveFocus(-b.menuSize()+
1,!0)},PageDown:function(){b.moveFocus(b.menuSize()-1,!0)},Home:function(){b.setFocus(0)},End:function(){b.setFocus(b.length-1)},Enter:b.pick,Tab:b.pick,Esc:b.close},e=a.customKeys?{}:d;if(a.customKeys)for(var g in a.customKeys)a.customKeys.hasOwnProperty(g)&&c(g,a.customKeys[g]);if(a.extraKeys)for(g in a.extraKeys)a.extraKeys.hasOwnProperty(g)&&c(g,a.extraKeys[g]);return e}function c(a,b){for(;b&&b!=a;){if("LI"===b.nodeName.toUpperCase()&&b.parentNode==a)return b;b=b.parentNode}}function e(d,e){this.completion=
d;this.data=e;var l=this,n=d.cm,p=d.options,q=this.hints=document.createElement("ul");q.className="CodeMirror-hints";this.selectedHint=p.getDefaultSelection?p.getDefaultSelection(n,p,e):0;for(var t=e.list,r=0;r<t.length;++r){var u=q.appendChild(document.createElement("li")),s=t[r],v=g+(r!=this.selectedHint?"":" "+f);null!=s.className&&(v=s.className+" "+v);u.className=v;s.render?s.render(u,e,s):u.appendChild(document.createTextNode(s.displayText||("string"==typeof s?s:s.text)));u.hintId=r}var r=n.cursorCoords(!1!==
p.alignWithWord?e.from:null),w=r.left,y=r.bottom,z=!0;q.style.left=w+"px";q.style.top=y+"px";u=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth);v=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(p.container||document.body).appendChild(q);s=q.getBoundingClientRect();if(0<s.bottom-v){var D=s.bottom-s.top,K=s.top-(r.bottom-r.top);0<K-D?(q.style.top=(y=K-D)+"px",z=!1):D>v&&(q.style.height=v-5+"px",q.style.top=(y=
r.bottom-s.top)+"px",v=n.getCursor(),e.from.ch!=v.ch&&(r=n.cursorCoords(v),q.style.left=(w=r.left)+"px",s=q.getBoundingClientRect()))}v=s.left-u;if(0<v&&(s.right-s.left>u&&(q.style.width=u-5+"px",v-=s.right-s.left-u),q.style.left=(w=r.left-v)+"px"),n.addKeyMap(this.keyMap=b(p,{moveFocus:function(a,b){l.changeActive(l.selectedHint+a,b)},setFocus:function(a){l.changeActive(a)},menuSize:function(){return l.screenAmount()},length:t.length,close:function(){d.close()},pick:function(){l.pick()},data:e})),
!1!==p.closeOnUnfocus){var B;n.on("blur",this.onBlur=function(){B=setTimeout(function(){d.close()},100)});n.on("focus",this.onFocus=function(){clearTimeout(B)})}var E=n.getScrollInfo();return n.on("scroll",this.onScroll=function(){var a=n.getScrollInfo(),b=n.getWrapperElement().getBoundingClientRect(),c=y+E.top-a.top,e=c-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return z||(e+=q.offsetHeight),e<=b.top||e>=b.bottom?d.close():(q.style.top=c+"px",q.style.left=w+E.left-
a.left+"px",void 0)}),a.on(q,"dblclick",function(a){(a=c(q,a.target||a.srcElement))&&null!=a.hintId&&(l.changeActive(a.hintId),l.pick())}),a.on(q,"click",function(a){(a=c(q,a.target||a.srcElement))&&null!=a.hintId&&(l.changeActive(a.hintId),p.completeOnSingleClick&&l.pick())}),a.on(q,"mousedown",function(){setTimeout(function(){n.focus()},20)}),a.signal(e,"select",t[0],q.firstChild),!0}var g="CodeMirror-hint",f="CodeMirror-hint-active";a.showHint=function(b,c,e){if(!(1<b.listSelections().length||
b.somethingSelected())){if(null==c){if(e&&e.async)return;c=a.hint.auto}b.state.completionActive&&b.state.completionActive.close();var g=b.state.completionActive=new d(b,c,e||{});return a.signal(b,"startCompletion",b),g.options.async?(c(b,function(a){g.showHints(a)},g.options),void 0):g.showHints(c(b,g.options))}};d.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.widget&&this.widget.close(),this.onClose&&this.onClose(),a.signal(this.cm,"endCompletion",this.cm))},
active:function(){return this.cm.state.completionActive==this},pick:function(b,c){var d=b.list[c];d.hint?d.hint(this.cm,b,d):this.cm.replaceRange("string"==typeof d?d:d.text,d.from||b.from,d.to||b.to,"complete");a.signal(b,"pick",d);this.close()},showHints:function(a){return a&&a.list.length&&this.active()?(0!=this.options.completeSingle&&1==a.list.length?this.pick(a,0):this.showWidget(a),void 0):this.close()},showWidget:function(b){function c(){q||(q=!0,r.close(),r.cm.off("cursorActivity",f),b&&
a.signal(b,"close"))}function d(){q||(a.signal(b,"update"),r.options.async?r.getHints(r.cm,g,r.options):g(r.getHints(r.cm,r.options)))}function g(a){if(b=a,!q){if(!b||!b.list.length)return c();r.widget&&r.widget.close();r.widget=new e(r,b)}}function f(){t&&(y(t),t=0);var a=r.cm.getCursor(),b=r.cm.getLine(a.line);a.line!=s.line||b.length-a.ch!=v-s.ch||a.ch<s.ch||r.cm.somethingSelected()||a.ch&&u.test(b.charAt(a.ch-1))?r.close():(t=w(d),r.widget&&r.widget.close())}this.widget=new e(this,b);a.signal(b,
"shown");var q,t=0,r=this,u=this.options.closeCharacters||/[\s()\[\]{};:>,]/,s=this.cm.getCursor(),v=this.cm.getLine(s.line).length,w=window.requestAnimationFrame||function(a){return setTimeout(a,1E3/60)},y=window.cancelAnimationFrame||clearTimeout;this.cm.on("cursorActivity",f);this.onClose=c}};e.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null;this.hints.parentNode.removeChild(this.hints);this.completion.cm.removeKeyMap(this.keyMap);var a=this.completion.cm;
!1!==this.completion.options.closeOnUnfocus&&(a.off("blur",this.onBlur),a.off("focus",this.onFocus));a.off("scroll",this.onScroll)}},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(b,c){if(b>=this.data.list.length?b=c?this.data.list.length-1:0:0>b&&(b=c?0:this.data.list.length-1),this.selectedHint!=b){var d=this.hints.childNodes[this.selectedHint];d.className=d.className.replace(" "+f,"");d=this.hints.childNodes[this.selectedHint=b];d.className+=" "+f;d.offsetTop<
this.hints.scrollTop?this.hints.scrollTop=d.offsetTop-3:d.offsetTop+d.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=d.offsetTop+d.offsetHeight-this.hints.clientHeight+3);a.signal(this.data,"select",this.data.list[this.selectedHint],d)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}};a.registerHelper("hint","auto",function(b,c){var d;d=b.getHelpers(b.getCursor(),"hint");if(d.length)for(var e=0;e<d.length;e++){var g=
d[e](b,c);if(g&&g.list.length)return g}else if(d=b.getHelper(b.getCursor(),"hintWords")){if(d)return a.hint.fromList(b,{words:d})}else if(a.hint.anyword)return a.hint.anyword(b,c)});a.registerHelper("hint","fromList",function(b,c){for(var d=b.getCursor(),e=b.getTokenAt(d),g=[],f=0;f<c.words.length;f++){var t=c.words[f];t.slice(0,e.string.length)==e.string&&g.push(t)}return g.length?{list:g,from:a.Pos(d.line,e.start),to:a.Pos(d.line,e.end)}:void 0});a.commands.autocomplete=a.showHint});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../../mode/sql/sql")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../../mode/sql/sql"],a):a(CodeMirror)})(function(a){function d(b){b=b.doc.modeOption;return"sql"===b&&(b="text/x-sql"),a.resolveMode(b).keywords}function b(a,b,c,d){for(var e in c)if(c.hasOwnProperty(e)){Array.isArray(c)&&(e=c[e]);var g=b,f=e.substr(0,g.length);g.toUpperCase()===f.toUpperCase()&&a.push(d(e))}}
function c(a,c){var d=c.getCursor(),e=c.getTokenAt(d),g=e.string.substr(1),d=n(d.line,e.start),d=c.getTokenAt(d).string;h.hasOwnProperty(d)||(d=f(d,c));(d=h[d])&&b(a,g,d,function(a){return"."+a})}function e(a,b){if(a)for(var c=/[,;]/g,d=a.split(" "),e=0;e<d.length;e++)b(d[e]?d[e].replace(c,""):"")}function g(a){return a.line+a.ch/Math.pow(10,6)}function f(a,b){for(var c=b.doc,d=c.getValue(),f=a.toUpperCase(),k="",v="",w=[],y=n(0,0),z=n(b.lastLine(),b.getLineHandle(b.lastLine()).length),D=d.indexOf(l.QUERY_DIV);-1!=
D;)w.push(c.posFromIndex(D)),D=d.indexOf(l.QUERY_DIV,D+1);w.unshift(n(0,0));w.push(n(b.lastLine(),b.getLineHandle(b.lastLine()).text.length));for(var D=0,K=g(b.getCursor()),d=0;d<w.length;d++){var B=g(w[d]);if(K>D&&B>=K){y=n(Math.floor(D),+D.toString().split(".").pop());z=n(Math.floor(B),+B.toString().split(".").pop());break}D=B}c=c.getRange(y,z,!1);for(d=0;d<c.length&&!(e(c[d],function(a){var b=a.toUpperCase();b===f&&h.hasOwnProperty(k)&&(v=k);b!==l.ALIAS_KEYWORD&&(k=a)}),v);d++);return v}var h,
k,l={QUERY_DIV:";",ALIAS_KEYWORD:"AS"},n=a.Pos;a.registerHelper("hint","sql",function(a,e){h=e&&e.tables||{};k=k||d(a);var g=a.getCursor(),f=a.getTokenAt(g),l=f.end,s=[],v=f.string.trim();if("."==v.charAt(0)){if(c(s,a),!s.length){for(;f.start&&"."==v.charAt(0);)f=a.getTokenAt(n(g.line,f.start-1)),v=f.string+v;b(s,v,h,function(a){return a})}}else b(s,v,k,function(a){return a.toUpperCase()}),b(s,v,h,function(a){return a});return{list:s,from:n(g.line,f.start),to:n(g.line,l)}})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function d(a,b,c,d){this.line=b;this.ch=c;this.cm=a;this.text=a.getLine(b);this.min=d?d.from:a.firstLine();this.max=d?d.to-1:a.lastLine()}function b(a,b){var c=a.cm.getTokenTypeAt(n(a.line,b));return c&&/\btag\b/.test(c)}function c(a){return a.line>=a.max?void 0:(a.ch=0,a.text=a.cm.getLine(++a.line),!0)}
function e(a){return a.line<=a.min?void 0:(a.text=a.cm.getLine(--a.line),a.ch=a.text.length,!0)}function g(a){for(;;){var d=a.text.indexOf(">",a.ch);if(-1==d){if(c(a))continue;break}if(b(a,d+1)){var e=a.text.lastIndexOf("/",d),e=-1<e&&!/\S/.test(a.text.slice(e+1,d));return a.ch=d+1,e?"selfClose":"regular"}a.ch=d+1}}function f(a){for(;;){var c=a.ch?a.text.lastIndexOf("<",a.ch-1):-1;if(-1==c){if(e(a))continue;break}if(b(a,c+1)){p.lastIndex=c;a.ch=c;var d=p.exec(a.text);if(d&&d.index==c)return d}else a.ch=
c}}function h(a){for(;;){p.lastIndex=a.ch;var d=p.exec(a.text);if(!d){if(c(a))continue;break}if(b(a,d.index+1))return a.ch=d.index+d[0].length,d;a.ch=d.index+1}}function k(a,b){for(var c=[];;){var d,e=h(a),f=a.line,k=a.ch-(e?e[0].length:0);if(!e||!(d=g(a)))break;if("selfClose"!=d)if(e[1]){for(var l=c.length-1;0<=l;--l)if(c[l]==e[2]){c.length=l;break}if(0>l&&(!b||b==e[2]))return{tag:e[2],from:n(f,k),to:n(a.line,a.ch)}}else c.push(e[2])}}function l(a,c){for(var d=[];;){var g;a:{for(g=a;;){var h=g.ch?
g.text.lastIndexOf(">",g.ch-1):-1;if(-1==h){if(e(g))continue;g=void 0;break a}if(b(g,h+1)){var k=g.text.lastIndexOf("/",h),k=-1<k&&!/\S/.test(g.text.slice(k+1,h));g=(g.ch=h+1,k?"selfClose":"regular");break a}g.ch=h}g=void 0}if(!g)break;if("selfClose"!=g){g=a.line;h=a.ch;k=f(a);if(!k)break;if(k[1])d.push(k[2]);else{for(var l=d.length-1;0<=l;--l)if(d[l]==k[2]){d.length=l;break}if(0>l&&(!c||c==k[2]))return{tag:k[2],from:n(a.line,a.ch),to:n(g,h)}}}else f(a)}}var n=a.Pos,p=RegExp("<(/?)([A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)",
"g");a.registerHelper("fold","xml",function(a,b){for(var c=new d(a,b.line,0);;){var e,f=h(c);if(!f||c.line!=b.line||!(e=g(c)))break;if(!f[1]&&"selfClose"!=e)return b=n(c.line,c.ch),(c=k(c,f[2]))&&{from:b,to:c.from}}});a.findMatchingTag=function(a,b,c){var e=new d(a,b.line,b.ch,c);if(-1!=e.text.indexOf(">")||-1!=e.text.indexOf("<")){var h=g(e),p=h&&n(e.line,e.ch),w=h&&f(e);if(h&&"selfClose"!=h&&w&&!(0<(e.line-b.line||e.ch-b.ch)))return b={from:n(e.line,e.ch),to:p,tag:w[2]},w[1]?{open:l(e,w[2]),close:b,
at:"close"}:(e=new d(a,p.line,p.ch,c),{open:b,close:k(e,w[2]),at:"open"})}};a.findEnclosingTag=function(a,b,c){for(var e=new d(a,b.line,b.ch,c);;){var g=l(e);if(!g)break;var f=new d(a,b.line,b.ch,c);if(f=k(f,g.tag))return{open:g,close:f}}};a.scanForClosingTag=function(a,b,c,e){a=new d(a,b.line,b.ch,e?{from:0,to:e}:null);return!!k(a,c)}});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){var d=a.Pos;a.registerHelper("hint","xml",function(b,c){var e=c&&c.schemaInfo,g=c&&c.quoteChar||'"';if(e){var f=b.getCursor(),h=b.getTokenAt(f),k=a.innerMode(b.getMode(),h.state);if("xml"==k.mode.name){var l,n,p=[],q=!1,t=/\btag\b/.test(h.type),r=t&&/^\w/.test(h.string);if(r){var u=b.getLine(f.line).slice(Math.max(0,
h.start-2),h.start);(u=/<\/$/.test(u)?"close":/<$/.test(u)?"open":null)&&(n=h.start-("close"==u?2:1))}else t&&"<"==h.string?u="open":t&&"</"==h.string&&(u="close");if(!t&&!k.state.tagName||u){r&&(l=h.string);var q=u,k=(g=k.state.context)&&e[g.tagName],s=g?k&&k.children:e["!top"];if(s&&"close"!=u)for(e=0;e<s.length;++e)l&&0!=s[e].lastIndexOf(l,0)||p.push("<"+s[e]);else if("close"!=u)for(var v in e)!e.hasOwnProperty(v)||"!top"==v||"!attrs"==v||l&&0!=v.lastIndexOf(l,0)||p.push("<"+v);g&&(!l||"close"==
u&&0==g.tagName.lastIndexOf(l,0))&&p.push("</"+g.tagName+">")}else{v=(k=e[k.state.tagName])&&k.attrs;e=e["!attrs"];if(!v&&!e)return;if(v){if(e){var u={},w;for(w in e)e.hasOwnProperty(w)&&(u[w]=e[w]);for(w in v)v.hasOwnProperty(w)&&(u[w]=v[w]);v=u}}else v=e;if("string"==h.type||"="==h.string){u=b.getRange(d(f.line,Math.max(0,f.ch-60)),d(f.line,"string"==h.type?h.start:h.end));e=u.match(/([^\s\u00a0=<>\"\']+)=$/);if(!e||!v.hasOwnProperty(e[1])||!(s=v[e[1]]))return;"function"==typeof s&&(s=s.call(this,
b));"string"==h.type&&(l=h.string,/['"]/.test(h.string.charAt(0))&&(g=h.string.charAt(0),l=h.string.slice(1)),q=!0);for(e=0;e<s.length;++e)l&&0!=s[e].lastIndexOf(l,0)||p.push(g+s[e]+g)}else{"attribute"==h.type&&(l=h.string,q=!0);for(var y in v)!v.hasOwnProperty(y)||l&&0!=y.lastIndexOf(l,0)||p.push(y)}}return{list:p,from:q?d(f.line,null==n?h.start:n):f,to:q?d(f.line,h.end):f}}}})});YUI.add("thirdparty-codemirror-compressed",function(a){a.namespace("Squarespace.Thirdparty").CodeMirrorCompressed=CodeMirror});
YUI.add("squarespace-dialog-email-service-connect",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.EmailServiceConnect=a.Base.create("emailServiceConnect",a.Squarespace.DialogFields.ServiceConnect,[],{initializer:function(){this.get("contentBox").addClass("sqs-service-connect-content");this._addressField=new a.Squarespace.DialogFields.Text({name:"address",className:"thin","strings.title":"Email Address",data:this.get("data.email")})},renderUI:function(){d.superclass.renderUI.call(this);
var a=this.get("contentBox"),c=this._addressField;c.render(a.one(".fields"));this._addressFieldInput=c.get("contentBox").one("input");this._connectedEmailEl=a.one(".text .message .connected-email")},bindUI:function(){d.superclass.bindUI.call(this);this.get("contentBox").on("click",function(a){var c=this.get("data.connected");a=a.target;c&&a.hasClass("icon")?this._disconnect():!c&&a.hasClass("connect")&&this._connect()},this);this._addressField.get("contentBox").one("input").after("keyup",function(a){13==
a.keyCode&&this._connect()},this);this.after("dataChange",function(){this._connectedEmailEl.setContent(this.get("data.email"))},this)},_connect:function(){var b=this._addressField.get("data").trim();if(a.Squarespace.EmailUtils.isValid(b)){var c=this.get("data")||{};c.email=b;c.connected=!0;this.set("data",c)}else new a.Squarespace.Widgets.Alert({"strings.title":"Invalid Email Address","strings.message":"You must provide a valid email address."})},_disconnect:function(){var a=this.get("data");a.email=
null;a.connected=!1;this.set("data",a)}},{CSS_PREFIX:"sqs-email-service-connect",HANDLEBARS_TEMPLATE:"dialog-email-service-connect.html",ATTRS:{strings:{value:{title:"Email"}}}})},"1.0",{requires:"base squarespace-util squarespace-ui-base squarespace-dialog-service-connect squarespace-dialog-text squarespace-dialog-email-service-connect-template squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-block-tourdates-editor",function(a){a.namespace("Squarespace.Block.Editor").TourDates=a.Base.create("tourdates-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.TourDates")},afterLayoutDrag:function(){this._host.fire("resized")}},{NS:"blockEditor",ATTRS:{blockName:{value:"TourDates"}}})},"1.0",{requires:["base","squarespace-model-editor","squarespace-block-editor-dialog",
"squarespace-block-tourdates-model-editor","squarespace-damask-context-globals"]});
YUI.add("squarespace-dialog-file-requires-processing",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.FileRequiresProcessing=a.Base.create("fileRequiresProcessing",a.Squarespace.DialogFields.File,[],{initializer:function(){if(this.constructor===d)throw"Y.Squarespace.DialogFields.FileRequiresProcessing is an abstract class. Please use a subclass.";this.uploader&&this.uploader.setAttrs({fileFilters:[this.getProperty("FILE_FILTER")],createJob:a.bind(this._createProcessingJob,
this),jobFailure:a.bind(this._processingJobFailure,this)})},_bindDataEvents:function(){d.superclass._bindDataEvents.call(this);var a=this.get("data");a&&this._registerEvent(a.after("mediaProcessingStateChange",this.syncUI,this))},_cleanupResidualElements:function(){d.superclass._cleanupResidualElements.call(this);var a=this.get("boundingBox"),c=this.get("contentBox");a.removeClass("processing-taking-longer");c.removeClass("loaded");c.all("."+this.getClassName()+"-preview").remove();c.all(".processing-failed").remove();
c.all(".processing-longer-than-expected").remove()},_renderDataLoadedState:function(){this._cleanupResidualElements();var b=this.get("boundingBox");this.get("contentBox");var c=this.get("data");this.get("contentBox").removeClass("data-loading");if(c&&c.get("hasFileData")){b.addClass("has-file");var d=c.get("mediaProcessingState");a.Squarespace.ContentItemUtils.isErrorProcessingState(c)?(b.addClass("has-error"),this._renderProcessingFailed()):(b.removeClass("has-error"),d===a.Squarespace.MediaProcessingState.READY||
a.Lang.isNull(d)?this._renderFilePreview():(b.addClass("processing-taking-longer"),this._progressBarWidget.set("showSpinner",!0),this._renderProcessingPreview(),this._renderCancelProcessing()))}else b.removeClass("has-error"),b.removeClass("has-preview"),b.removeClass("has-file"),this._progressBarWidget.setAttrs({showSpinner:!1,showBar:!1})},_renderDataLoadingState:function(){d.superclass._renderDataLoadingState.call(this);this.get("boundingBox").removeClass("has-error")},_renderProcessingPreview:function(){var a=
this.getClassName();this.get("contentBox").append('<div class="'+a+"-preview "+a+'-preview-empty"></div>')},_renderProcessingFailed:function(){var b=a.Node.create('<div class="processing-failed"><p><strong>Oops!</strong><br />Something went wrong.<br /><a href="#" class="retry">Retry?</a></p></div>');b.one("p a.retry").on("click",function(a){a.halt();this.set("data",null)},this);this.get("contentBox").append(b)},_renderCancelProcessing:function(){var b=a.Node.create('<div class="processing-longer-than-expected"><p>'+
this.getProperty("PROCESSING_COPY")+'<br /><a href="#" class="cancel">Cancel</a></p></div>');b.one("p a.cancel").on("click",function(a){a.halt();this.set("data",null)},this);this.get("contentBox").append(b)},_createProcessingJob:function(b,c){if(!c.job)return console.warn("Did not create processing job because response did not have job information."),null;var d=new (this.getProperty("PROCESSING_JOB"))(a.merge(c.job,{started:!0}));this.set("data",new a.Squarespace.Models.ContentItem(a.merge(c.media[0],
{mediaProcessingState:a.Squarespace.MediaProcessingState.QUEUED})));return d},_processingJobFailure:function(){new a.Squarespace.Widgets.Alert({"strings.title":"Processing Failed","strings.message":"We were unable to process your file. Please try again."});this.syncUI()}},{})},"1.0",{requires:"base node squarespace-dialog-file squarespace-enum squarespace-models-content-item squarespace-ui-base squarespace-content-item-utils squarespace-widgets-alert".split(" ")});
YUI.add("widget-stdmod",function(a,d){function b(a){}var c=a.Lang,e=a.Node,g=a.UA,f=a.Widget,h=a.Widget.UI_SRC;b.HEADER="header";b.BODY="body";b.FOOTER="footer";b.AFTER="after";b.BEFORE="before";b.REPLACE="replace";var k=b.HEADER,l=b.BODY,n=b.FOOTER,p=k+"Content",q=n+"Content",t=l+"Content";b.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:b.BODY,validator:function(a){return this._validateFillHeight(a)}}};b.HTML_PARSER={headerContent:function(a){return this._parseStdModHTML(k)},
bodyContent:function(a){return this._parseStdModHTML(l)},footerContent:function(a){return this._parseStdModHTML(n)}};b.SECTION_CLASS_NAMES={header:f.getClassName("hd"),body:f.getClassName("bd"),footer:f.getClassName("ft")};b.TEMPLATES={header:'<div class="'+b.SECTION_CLASS_NAMES[k]+'"></div>',body:'<div class="'+b.SECTION_CLASS_NAMES[l]+'"></div>',footer:'<div class="'+b.SECTION_CLASS_NAMES[n]+'"></div>'};b.prototype={initializer:function(){this._stdModNode=this.get("contentBox");a.before(this._renderUIStdMod,
this,"renderUI");a.before(this._bindUIStdMod,this,"bindUI");a.before(this._syncUIStdMod,this,"syncUI")},_syncUIStdMod:function(){var a=this._stdModParsed;(!a||!a[p])&&this._uiSetStdMod(k,this.get(p));(!a||!a[t])&&this._uiSetStdMod(l,this.get(t));(!a||!a[q])&&this._uiSetStdMod(n,this.get(q));this._uiSetFillHeight(this.get("fillHeight"))},_renderUIStdMod:function(){this._stdModNode.addClass(f.getClassName("stdmod"));this._renderStdModSections();this.after("headerContentChange",this._afterHeaderChange);
this.after("bodyContentChange",this._afterBodyChange);this.after("footerContentChange",this._afterFooterChange)},_renderStdModSections:function(){c.isValue(this.get(p))&&this._renderStdMod(k);c.isValue(this.get(t))&&this._renderStdMod(l);c.isValue(this.get(q))&&this._renderStdMod(n)},_bindUIStdMod:function(){this.after("fillHeightChange",this._afterFillHeightChange);this.after("heightChange",this._fillHeight);this.after("contentUpdate",this._fillHeight)},_afterHeaderChange:function(a){a.src!==h&&
this._uiSetStdMod(k,a.newVal,a.stdModPosition)},_afterBodyChange:function(a){a.src!==h&&this._uiSetStdMod(l,a.newVal,a.stdModPosition)},_afterFooterChange:function(a){a.src!==h&&this._uiSetStdMod(n,a.newVal,a.stdModPosition)},_afterFillHeightChange:function(a){this._uiSetFillHeight(a.newVal)},_validateFillHeight:function(a){return!a||a==b.BODY||a==b.HEADER||a==b.FOOTER},_uiSetFillHeight:function(a){a=this.getStdModNode(a);var b=this._currFillNode;b&&a!==b&&b.setStyle("height","");a&&(this._currFillNode=
a);this._fillHeight()},_fillHeight:function(){if(this.get("fillHeight")){var a=this.get("height");""!=a&&"auto"!=a&&this.fillHeight(this.getStdModNode(this.get("fillHeight")))}},_uiSetStdMod:function(a,b,d){if(c.isValue(b)){var e=this.getStdModNode(a,!0);this._addStdModContent(e,b,d);this.set(a+"Content",this._getStdModContent(a),{src:h})}else this._eraseStdMod(a);this.fire("contentUpdate")},_renderStdMod:function(a){var b=this.get("contentBox"),c=this._findStdModSection(a);c||(c=this._getStdModTemplate(a));
this._insertStdModSection(b,a,c);this[a+"Node"]=c;return this[a+"Node"]},_eraseStdMod:function(a){var b=this.getStdModNode(a);b&&(b.remove(!0),delete this[a+"Node"])},_insertStdModSection:function(a,b,c){var d=a.get("firstChild");b===n||!d?a.appendChild(c):b===k?a.insertBefore(c,d):(b=this[n+"Node"])?a.insertBefore(c,b):a.appendChild(c)},_getStdModTemplate:function(a){return e.create(b.TEMPLATES[a],this._stdModNode.get("ownerDocument"))},_addStdModContent:function(a,c,d){switch(d){case b.BEFORE:d=
0;break;case b.AFTER:d=void 0;break;default:d=b.REPLACE}a.insert(c,d)},_getPreciseHeight:function(a){var b=a?a.get("offsetHeight"):0;a&&a.hasMethod("getBoundingClientRect")&&(a=a.invoke("getBoundingClientRect"))&&(b=a.bottom-a.top);return b},_findStdModSection:function(a){return this.get("contentBox").one("> ."+b.SECTION_CLASS_NAMES[a])},_parseStdModHTML:function(b){var c=this._findStdModSection(b);return c?(this._stdModParsed||(this._stdModParsed={},a.before(this._applyStdModParsedConfig,this,"_applyParsedConfig")),
this._stdModParsed[b+"Content"]=1,c.get("innerHTML")):null},_applyStdModParsedConfig:function(a,b,c){if(a=this._stdModParsed)a[p]=!(p in b)&&p in a,a[t]=!(t in b)&&t in a,a[q]=!(q in b)&&q in a},_getStdModContent:function(a){return this[a+"Node"]?this[a+"Node"].get("childNodes"):null},setStdModContent:function(a,b,c){this.set(a+"Content",b,{stdModPosition:c})},getStdModNode:function(a,b){var c=this[a+"Node"]||null;!c&&b&&(c=this._renderStdMod(a));return c},fillHeight:function(a){if(a){var b=this.get("contentBox"),
d=[this.headerNode,this.bodyNode,this.footerNode],e,f=0;e=0;for(var h=!1,k=0,l=d.length;k<l;k++)(e=d[k])&&(e!==a?f+=this._getPreciseHeight(e):h=!0);h&&((g.ie||g.opera)&&a.set("offsetHeight",0),b=b.get("offsetHeight")-parseInt(b.getComputedStyle("paddingTop"),10)-parseInt(b.getComputedStyle("paddingBottom"),10)-parseInt(b.getComputedStyle("borderBottomWidth"),10)-parseInt(b.getComputedStyle("borderTopWidth"),10),c.isNumber(b)&&(e=b-f,0<=e&&a.set("offsetHeight",e)))}}};a.WidgetStdMod=b},"3.17.2",{requires:["base-build",
"widget"]});
YUI.add("squarespace-block-map",function(a){var d={location:{mapLat:40.7207559,mapLng:-74.0007613,mapZoom:12},vSize:12};if(Static.SQUARESPACE_CONTEXT){var b=Static.SQUARESPACE_CONTEXT.website;b&&b.location&&(d.location=a.merge(d.location,b.location))}a.namespace("Squarespace.Block").Map=a.Base.create("block-map",a.Squarespace.Block.ModelSyncBase,[a.Squarespace.Block.Mixin.AspectRatio],{initializer:function(b){this._mapHolder=a.Node.create("<div class='sqs-map-wrapper'>");this.get("contentBox").append(this._mapHolder);this.set("mapNode",
this._mapHolder.getDOMNode());this.after("resized",this._onResize,this);if(b.model&&this._isMapDataBad(b.model.location))if(this.get("googleMapAPILoaded"))this._restoreBadData();else this.on("googleMapAPILoadedChange",function(a){a.newVal&&this._restoreBadData()},this)},renderUI:function(){this._renderBlock()},_onResize:function(){try{google.maps.event.trigger(this.get("map"),"resize")}catch(a){console.log("google does not exist for map resizing")}},_renderBlock:function(){this.get("rendered")?this.get("map")?
(this.updateMapPosition(),this.fire("widget:contentUpdate")):this.get("isMapLoading")||a.later(10,this,function(){a.Squarespace.Damask.ContextGlobals.fromTop("Y").Squarespace.Rendering.renderMap(this._mapHolder,this.get("model").toJSON());this.fire("widget:contentUpdate")}):this.after("renderedChange",this._renderBlock,this)},updateMapPosition:function(){var b=this.get("model").toJSON().location,d=this.get("map"),g=this.get("marker"),f=google.maps;this._didMapCenterChange()&&d.setCenter(new f.LatLng(b.mapLat,
b.mapLng));g&&this._didMarkerPositionChange()?g.setPosition(new f.LatLng(b.markerLat,b.markerLng)):!g&&a.Lang.isValue(b.markerLat)&&this.set("marker",new f.Marker({map:d,animation:f.Animation.DROP,draggable:9!==a.UA.ie&&10!==a.UA.ie,position:new f.LatLng(b.markerLat,b.markerLng),icon:{url:"/universal/images-v6/icons/icon-map-marker-2x.png",size:new f.Size(52,68),scaledSize:new f.Size(26,34),anchor:new f.Point(13,34)}}));d.getZoom()!==b.mapZoom&&a.Lang.isValue(b.mapZoom)&&d.setZoom(b.mapZoom)},_didMapCenterChange:function(){var a=
this.get("map").getCenter(),b=this.get("model").toJSON().location;return a.lat()!==b.mapLat||a.lng()!==b.mapLng},_didMarkerPositionChange:function(){var a=this.get("marker").getPosition(),b=this.get("model").toJSON().location;return a.lat()!==b.markerLat||a.lng()!==b.markerLng},_getSearchableAddress:function(a){var b=[];a.addressLine1&&b.push(a.addressLine1);a.addressLine2&&b.push(a.addressLine2);a.addressTitle&&!b.length&&b.unshift(a.addressTitle);a.addressCountry&&b.push(a.addressCountry);return!b.length?
"":b.join(", ")},_isMapDataBad:function(b){return!b||!a.Lang.isValue(b.mapLat)||!a.Lang.isValue(b.mapLng)||!a.Lang.isValue(b.mapZoom)},_restoreBadData:function(){var b={location:{}},e=b.location,g=this.get("model").toJSON().location,f=this._getSearchableAddress(g);!g||!f?(e=d.location,this.get("model").setAttrs(b)):(a.Lang.isValue(g.mapZoom)||(e.mapZoom=d.location.mapZoom),a.Lang.isValue(g.markerLat)&&a.Lang.isValue(g.markerLng)?(e.markerLat=e.mapLat,e.markerLng=e.mapLng,this.get("model").setAttrs(b)):
(new google.maps.Geocoder).geocode({address:f},a.bind(function(d,g){if(g===google.maps.GeocoderStatus.OK){var f=d[0].geometry.location;e.mapLat=f.lat();e.mapLng=f.lng();this.get("model").setAttrs(b)}else new a.Squarespace.Widgets.Alert({"strings.title":"Lookup Failed","strings.message":"Address lookup was not successful: "+g})},this)))}},{CSS_PREFIX:"sqs-block-map",ATTRS:{editor:{valueFn:function(){return a.Squarespace.Block.Editor.Map}},defaultContentModel:{value:d},mapNode:{valueFn:function(){return this.get("contentBox").getDOMNode()}},
map:{getter:function(b){if(a.Lang.isValue(b))return b;b=this.get("mapNode")||{};return b.__map?(this.set("map",b.__map),b.__map):null}},marker:{getter:function(){return(this.get("mapNode")||{}).__marker},setter:function(a){this.get("mapNode").__marker=a}},isMapLoading:{getter:function(b){return a.Lang.isValue(b)?b:(b=this.get("mapNode"))&&b.__loadingMap?(this.set("isMapLoading",!0),!0):!1}},googleMapAPILoaded:{getter:function(){if(a.Squarespace.GoogleMap.loaded)return!0;a.Squarespace.GoogleMap.once("load-success",
function(){this.set("googleMapAPILoaded",!0)},this);return!1}}}})},"1.0",{requires:["squarespace-block-base-modelsync","squarespace-block-map-editor","squarespace-block-mixin-aspect-ratio","squarespace-util","squarespace-widgets-alert"]});
YUI.add("squarespace-block-menu-parser",function(a){function d(a){return 0==a.search(c)?a.substring(1):a}function b(a){a=a.split("/");for(var b=[],c=0;c<a.length;++c){var h=a[c].trim().split(" "),k={price:d(h[0].trim())};-1==k.price.search("[0-9]")?(delete k.price,k.title=d(h.join(" ")).trim()):1<h.length&&(h.splice(0,1),k.title=h.join(" ").trim());b.push(k)}return b}var c="(\\$|\u00a3|\u20ac|\u00a5)";a.namespace("Squarespace.Utils").parseMenu=function(a){var d=[],f={title:null,description:null,items:[]},
h={title:null,description:null,sections:[]},k=!1,l=!1;a=a.split("\n");for(var n=0;n<a.length;n++){var p=a[n].trim();if(p)if(0==p.indexOf("==="))k?(h.sections.push(f),d.push(h),f={title:null,description:null,items:[]},h={title:null,description:null,sections:[]},l=!1):k=!0,0<=n-1&&(h.title=a[n-1].trim()),n+1<a.length&&0<a[n+1].trim().length&&(h.description=a[n+1].trim(),++n);else if(0==p.indexOf("---"))l?(h.sections.push(f),f={title:null,description:null,items:[]}):l=!0,0<=n-1&&(f.title=a[n-1].trim()),
n+1<a.length&&0<a[n+1].trim().length&&(f.description=a[n+1].trim(),++n);else{if(n+1<a.length&&0<a[n+1].trim().length){var q=a[n+1].trim();if(0==q.indexOf("---")||0==q.indexOf("==="))continue}var k=l=!0,t=p.search(c);-1!=t?(q=p.substring(0,t).trim(),p=p.substring(t),p={title:q,variants:b(p)}):p={title:p,variants:null};n+1<a.length&&(0<a[n+1].trim().length&&-1==a[n+1].search(c))&&(p.description=a[n+1].trim(),++n);!p.variants&&(n+1<a.length&&0<a[n+1].trim().length)&&(p.variants=b(a[n+1].trim()),++n);
for(;n+1<a.length&&0<a[n+1].trim().length&&0==a[n+1].indexOf("+");)null==p.options&&(p.options=[]),p.options.push(a[n+1].substring(1).trim()),++n;f.items.push(p)}}h.sections.push(f);d.push(h);return d}},"1.0",{requires:["squarespace-util"]});
YUI.add("squarespace-block-social-account-links",function(a){a.namespace("Squarespace.Block").SocialAccountLinksUtils={getAccountsWithProfileUrl:function(d){var b=[],c=Static.SQUARESPACE_CONTEXT.website.socialAccounts||Static.SQUARESPACE_CONTEXT.connectedAccounts;if(d&&d.get("accountIds")){var e=d.get("accountIds"),g=a.Squarespace.Block.SocialAccountLinksUtils._indexById(c);a.Array.each(e,function(a){(a=g[a])&&b.push(a)});d=a.Array.filter(c,function(a){return-1===e.indexOf(a.id)},this);b=b.concat(d)}else b=
c;return a.Array.filter(b,function(a){return!!a.profileUrl})},_indexById:function(d){return a.Array.reduce(d,{},function(a,c){a[c.id]=c;return a})}};a.namespace("Squarespace.Block").SocialAccountLinks=a.Base.create("block-legacy-social-account-links",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-socialaccountlinks",MODEL:a.Squarespace.ContentModel.SocialAccountLinksLegacyModel,ATTRS:{type:{value:a.Squarespace.BlockType.SOCIAL_ACCOUNT_LINKS},editor:{value:a.Squarespace.Block.Editor.LegacySocialAccountLinks}}})},
"1.0",{requires:["base","squarespace-block-base-modelsync","squarespace-block-social-account-links-legacy-editor","squarespace-block-social-account-links-legacy-model"]});
YUI.add("squarespace-dialog-mailchimp-service-connect",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.MailChimpServiceConnect=a.Base.create("mailChimpServiceConnect",a.Squarespace.DialogFields.OauthServiceConnect,[],{initializer:function(b){this.get("contentBox").addClass("sqs-oauth-service-connect-content");this._listField=new a.Squarespace.DialogFields.Select({name:"listName",className:"thin",data:this.get("data.list"),options:[{value:"",label:"Select List"}]});
this.get("data.connected")&&this._loadMailChimpLists()},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("contentBox").one(".fields"),c=a.Node.create('<div class="loading"><div class="spinner"></div><div class="text">Loading lists...</div></div>');(new a.Squarespace.Spinner({size:10,color:"light",render:c.one(".spinner")})).spin();b.append(c);this._listField.render(b)},bindUI:function(){d.superclass.bindUI.call(this);this.after("loadingMailChimpListsChange",this.syncUI,this);this._listField.after("dataChange",
function(a){var c=this.get("data")||{};c.list=a.newVal;this.set("data",c)},this);this.after("dataChange",function(a){a.newVal.connected&&this._loadMailChimpLists()})},syncUI:function(){d.superclass.syncUI.call(this);this.get("contentBox").toggleClass("loading-lists",this.get("loadingMailChimpLists"))},_getErrors:function(){var b=[],c=this.get("data.list");if(this.get("data.connected")&&(!a.Lang.isValue(c)||""===c))this._set("errorFlyoutAnchor",this._listField.get("contentBox")),b.push("Select a list");
return b},_completeAuthentication:function(){this._loadMailChimpAccount()},_getConnectedMessageUsername:function(){return this.get("data.username")||"User"},_loadMailChimpAccount:function(){a.Data.get({url:"/api/external/GetMailchimpAccountDetail",data:{connectedAccountId:this.get("data.socialConfig.externalAuthenticationId")},success:function(a){a=a.username;var c=this.get("data")||{};c.username=a;this.set("data",c);this._loadMailChimpLists();this.set("connectionInProgress",!1)},failure:function(){this._showMailChimpError();
this.set("connectionInProgress",!1)}},this)},_loadMailChimpLists:function(){this.set("loadingMailChimpLists",!0);a.Data.get({url:"/api/external/GetMailchimpLists",data:{connectedAccountId:this.get("data.socialConfig.externalAuthenticationId")},success:function(b){var c=[];a.Object.each(b,function(b){var d=b.value;value=a.Lang.isValue(d)?d:"";c.push({value:value,label:b.title})});b=this._listField;b.set("options",c);b.set("data",this.get("data.list"));this.set("loadingMailChimpLists",!1);1===c.length&&
new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Alert.ANCHOR.ELEMENT,anchor:this._listField.get("contentBox"),"strings.title":"No MailChimp Lists Created","strings.message":"Connecting to MailChimp requires an existing MailChimp mailing list. Please create one to continue."})},failure:function(){this._showMailChimpError();this.set("loadingMailChimpLists",!1)}},this)},_showMailChimpError:function(){new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Alert.ANCHOR.ELEMENT,
anchor:this.get("contentBox"),"strings.title":"MailChimp Communication Error","strings.message":"There was an error communicating with the MailChimp service. Please try again later."})}},{CSS_PREFIX:"sqs-mailchimp-service-connect",ATTRS:{serviceProvider:{value:a.Squarespace.ExternalServiceProviders.MAILCHIMP},formStorageBackendType:{value:a.Squarespace.FormStorageBackendType.MAILCHIMP},strings:{value:{title:"MailChimp",connectedMessage:"As"}},loadingMailChimpLists:{value:!1}}})},"1.0",{requires:"base squarespace-enum squarespace-dialog-oauth-service-connect squarespace-dialog-select squarespace-ui-base squarespace-spinner squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-block-plugin-resizable",function(a){a.namespace("Squarespace.Block.Plugin.Resizable");a.Squarespace.Block.Plugin.Resizable=a.Base.create("resizableBlock",a.Plugin.Base,[],{initializer:function(d){this._host=this.get("host");a.after(this._initResize,this,"renderUI");a.after(this._initResize,this,"syncUI");a.after(this._initResize,this,"_renderBlock");a.after(this._initResize,this,"_renderSuccess");this._host.get("rendered")?this._initResize():this.afterHostEvent("renderedChange",
this._initResize,this)},destructor:function(){this._destroyResize()},_toggleResize:function(a){a?this._initResize():this._destroyResize()},_syncAspectRatio:function(){var a=this.get("model"),b=a.get("aspectRatio"),c=a.get("dimensions");a.get("vSize")?b=this._calculateAspectRatio():b||(b=c?100*(c.height/c.width):75);this.get("host").get("model").set("aspectRatio",b,{silent:!0})},_initResize:function(){var d=this.get("host"),b=this.get("resizeNode"),c=d.hasPlugin(a.Squarespace.WidgetResize.NS);d.plug(a.Squarespace.WidgetResize,
{resizeNode:b,wrap:!1,minHeight:1});d=b.one(".yui3-resize-handles-wrapper");this.get("host").get("boundingBox").appendChild(d);c||this._bindResizeEvents()},_destroyResize:function(){var d=this.get("resizeNode");this.get("host").unplug(a.Squarespace.WidgetResize);if(!this.get("blockEditor").get("resizable")&&!a.Lang.isValue(this.get("model").get("aspectRatio"))){var b=d.one(".sqs-intrinsic");b&&(b.setStyle("paddingBottom",null),b.removeClass("sqs-intrinsic"),(b=b.one(".sqs-intrinsic-content"))&&b.removeClass("sqs-intrinsic-content"))}d.setStyles({width:null,
height:null,border:null,margin:null,padding:null});d.one(".yui3-resize-handles-wrapper")&&d.one(".yui3-resize-handles-wrapper").remove(!0)},_bindResizeEvents:function(){var d=this._host[a.Squarespace.WidgetResize.NS];d.on("resize:start",this._nullVSize,this);d.on("resize:resize",this._adjustNodePosition,this);d.on("resize:resize",this._updateAspectRatio,this);d.on("resize:end",this._resetMouseDelta,this);d.after("resize:end",this._updateAspectRatio,this);d.on("resize:start",this._disableInsertPoints,
this);d.on("resize:end",this._enableInsertPoints,this)},_disableInsertPoints:function(){a.Squarespace.Singletons.InsertPointController.disable()},_enableInsertPoints:function(){a.Squarespace.Singletons.InsertPointController.enable()},_nullVSize:function(d){a.Squarespace.Singletons.InsertPointController.hide();d=this.get("model");a.Lang.isValue(d.get("vSize"))&&(this._syncAspectRatio(),d.set("vSize",null,{silent:!0}))},_adjustNodePosition:function(d){var b=this.get("resizeNode"),c=b[a.Plugin.Resize.NS];
d=this.get("snapToThreshold");var e=b.get("region"),g=this.get("host").get("boundingBox").get("region"),b=c.get("activeHandleNode").get("region"),f=this.get("model").get("dimensions"),c=c.delegate.dd,h=c.mouseXY[1];a.Lang.isNumber(this._mouseDelta)||(this._mouseDelta=b.bottom-b.height/2-h);var k;f?(k=e.width/f.width,f=parseInt(f.height,10)*k):f=e.height;e=f+(e.top+(g.bottom-e.bottom));b=e-b.height/2;h>e-d&&h<e+d&&(c.actXY[1]=b)},_calculateAspectRatio:function(){var d=this.get("resizeNode").get("region"),
b=parseInt(this.get("resizeNode").getStyle("paddingLeft"),10),b=b+parseInt(this.get("resizeNode").getStyle("paddingRight"),10),c=parseInt(this.get("resizeNode").getStyle("paddingBottom"),10),c=c+parseInt(this.get("resizeNode").getStyle("paddingTop"),10);a.Lang.isNumber(c)||(c=0);a.Lang.isNumber(b)||(b=0);return 100*(d.height-c)/(d.width-b)},_updateAspectRatio:function(a,b){var c=this._calculateAspectRatio();b?this.get("model").set("aspectRatio",c,{silent:!0}):this.get("model").set("aspectRatio",c)},
_resetMoustDelta:function(a){this.mouseDelta=null;this._host.get("editController").alignInsertPoints()}},{NS:"resizableBlock",ATTRS:{resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},model:{valueFn:function(){return this.get("host").get("model")}},blockEditor:{value:null}}})},"1.0",{requires:["base","plugin","squarespace-widget-resize"]});
YUI.add("squarespace-widgets-alert",function(a){a.namespace("Squarespace.Widgets");a.Squarespace.Widgets.Alert=a.Base.create("alert",a.Squarespace.Widgets.Confirmation,[],{},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:a.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:a.Squarespace.Widgets.Confirmation.ANCHOR,ATTRS:{className:{value:"alert"},style:{value:a.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:"Okay"}}})},"1.0",{requires:["base","squarespace-widgets-confirmation"]});
YUI.add("squarespace-debounce",function(a){a.namespace("Squarespace").debounce=function(d,b,c,e){var g,f=function(){var f=this,k=arguments,l,n=c&&!g;g&&e&&(l=!0);g&&g.cancel();g=a.later(b,this,function(){g=null;a.Env&&(!c||l)&&d.apply(f,k)});n&&d.apply(f,k)};f.cancel=function(){g&&g.cancel()};return f}},"1.0",{requires:[]});
YUI.add("squarespace-block-posts-by-editor",function(a){a.namespace("Squarespace.Block.Editor");a.namespace("Squarespace.Block.ModelEditorDialog");a.Squarespace.Block.Editor.PostsByMonth=a.Base.create("posts-by-month-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByMonth")}},{NS:"blockEditor",ATTRS:{blockName:{value:"PostsByMonth"}}});a.Squarespace.Block.ModelEditorDialog.PostsByMonth=
a.Base.create("blockPostByMonthEditor",a.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByMonthEditor",ATTRS:{strings:{value:{title:"Month Index",description:"Select a collection below to index."}}}});a.Squarespace.Block.Editor.PostsByCategory=a.Base.create("posts-by-category-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByCategory")}},{NS:"blockEditor",ATTRS:{blockName:{value:"PostsByCategory"}}});
a.Squarespace.Block.ModelEditorDialog.PostsByCategory=a.Base.create("blockPostByCategoryEditor",a.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByCategoryEditor",ATTRS:{strings:{value:{title:"Category Index",description:"Select a collection below to collect categories from."}}}});a.Squarespace.Block.Editor.PostsByTag=a.Base.create("posts-by-tag-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByTag")}},
{NS:"blockEditor",ATTRS:{blockName:{value:"PostsByTag"}}});a.Squarespace.Block.ModelEditorDialog.PostsByTag=a.Base.create("blockPostByTagEditor",a.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByTagTagEditor",ATTRS:{strings:{value:{title:"Tag Index",description:"Select a collection below to collect tags from."}}}});a.Squarespace.Block.Editor.PostsByAuthor=a.Base.create("posts-by-author-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.PostsByAuthor")}},
{NS:"blockEditor",ATTRS:{blockName:{value:"PostsByAuthor"}}});a.Squarespace.Block.ModelEditorDialog.PostsByAuthor=a.Base.create("blockPostByAuthorEditor",a.Squarespace.Block.ModelEditorDialog.PostsBy,[],{},{NS:"postsByAuthorEditor",ATTRS:{strings:{value:{title:"Author Index",description:"Select a collection below to collect authors from"}}}})},"1.0",{requires:"base model squarespace-block-editor-dialog squarespace-block-posts-by-model squarespace-block-posts-by-model-editor-base squarespace-damask-context-globals".split(" ")});
YUI.add("squarespace-block-tourdates-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");a.Squarespace.Block.ModelEditorDialog.TourDates=a.Base.create("TourDatesModelEditorDialog",a.Squarespace.ModelEditorDialog,[],{_getDefaultDialogConfig:function(){return{title:"Bandsintown",width:410,height:175,name:"editTourDatesBlock",closeOthers:!1,style:"standard",flyoutPointerDirection:"hidden",draggable:9!==a.UA.ie&&10!==a.UA.ie,loadingText:"Editing Tour Dates Block &hellip;",initialDataByReference:!0,
buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{tabTitle:"Bandsintown",icon:"/universal/images-v6/icons/icon-bandsintown-32-light.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Text,config:{"strings.placeholder":"Ziggy Stardust","strings.title":"Band Name","strings.description":"Enter your band's name as it appears within your Bandsintown account.","strings.requiredFieldEmptyMessage":"Please enter a band name.",name:"artistId",
className:"thin",required:!0}},{type:"splitter",fields:[{type:"flyout-date-picker",title:"Tour begins on",name:"startDate",clearable:!1,width:0.5,style:"minor",dateFormat:"%b %d, %Y"},{type:"flyout-date-picker",title:"and ends",name:"endDate",clearable:!1,width:0.5,style:"minor",validationErrorMsg:"End date needs to be later than start date.",validator:function(a){var b=this.getValue();a=a.getField("startDate").getValue();return null===b||b>=a},dateFormat:"%b %d, %Y"}]}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",
validator:a.Lang.isObject}}})},"1.0",{requires:["base","model","squarespace-dialog-text","squarespace-model-editor"]});
YUI.add("squarespace-enum-factory",function(a){a.namespace("Squarespace").enumFactory=function(d){var b=function(){throw"Can't Instantiate Enumerations";},c=b.prototype={constructor:b,toString:function(){return this.enumName},valueOf:function(){return this.value},toJSON:function(){return this.enumName}};b.values=[];a.Object.each(d,function(a,d){var f=function(){};f.prototype=c;f.enumName=d;f.value=a;b[d]=f;b.values.push(f)});b.each=function(b,c){a.Array.each(this.values,function(a){b.call(c,a)})};
b.isValid=function(c){if(!a.Lang.isValue(c))return!1;var d=b[c.enumName];return a.Lang.isValue(d)&&c===d};return b}});
YUI.add("squarespace-dialog-wysiwyg",function(a){var d=a.namespace("Squarespace.DialogFields").Wysiwyg=a.Base.create("wysiwyg",a.Squarespace.DialogField2,[],{initializer:function(b){this.get("boundingBox").addClass("field-wrapper wysiwyg-field-wrapper clear ckenabled");a.Lang.isValue(this.get("classNames"))&&this.get("boundingBox").addClass(this.get("classNames"));this.get("contentBox").addClass("")},renderUI:function(){d.superclass.renderUI.apply(this,arguments);a.Lang.isValue(this.get("title"))&&
this.get("contentBox").one(".title").setHTML(this.get("title"));a.Lang.isValue(this.get("description"))&&this.get("contentBox").one(".description").setHTML(this.get("description"));this.get("contentBox").one(".field-wysiwyg").setStyle("height",this.get("editorHeight")+"px");this._instantiateEditor()},_instantiateEditor:function(){var b=this.get("contentBox").one("textarea");this.visualEditor=new a.Squarespace.Wysiwyg.Editor({node:b,editorType:a.Squarespace.Wysiwyg.EditorTypes.IFRAME,toolbarType:this.get("toolbarType"),
height:this.get("editorHeight"),isSingleLine:this.get("isEditorSingleLine")});this.visualEditor.setEditorData(this.get("data.html"))},_syncEditorData:function(){var b=this.visualEditor.getEditorData();this.set("data",a.merge(this.get("data"),{source:b,html:b}))},bindUI:function(){this.visualEditor.on("change",a.Squarespace.debounce(this._syncEditorData,200,!0,!0),this);this.on("dataChange",function(b){a.Lang.isValue(b.newVal)||b.preventDefault()},this);var b=this.get("data");(!a.Lang.isValue(b)||
!a.Lang.isValue(b.html))&&this._syncEditorData()},didDataChange:function(){return this.visualEditor.didDataChange()},setValue:function(){d.superclass.setValue.apply(this,arguments);this.visualEditor.setEditorData(this.get("data.html"))},_renderTitle:function(){return this.config.title&&"top"==this.config.titleStyle?a.DB.DIV("field-lhs",{html:this.config.title}):null}},{CSS_PREFIX:"sqs-dialog-wysiwyg",TEMPLATE:'<div class="title field-lhs"></div><div class="field-rhs"><div class="field-wysiwyg"><textarea class="sqs-visual-edit""></textarea></div><div class="field-description-wrapper"><div class="description field-description"></div></div></div>',
ATTRS:{toolbarType:{},editorHeight:{validator:a.Squarespace.AttrValidators.isNumber,getter:function(a){this.get("isEditorSingleLine")&&(a=this.get("singleLineEditorHeight"));return a}},singleLineEditorHeight:{value:115},isEditorSingleLine:{value:!1},classNames:{validator:a.Squarespace.AttrValidators.isString},title:{validator:a.Squarespace.AttrValidators.isString},description:{validator:a.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["squarespace-wysiwyg-editor"]});
YUI.add("squarespace-frontend-edit-controller-block-field",function(a){var d=a.namespace("Squarespace.Frontend.EditController"),b=d.BlockField=a.Base.create("BlockField",d.LayoutBase,[],{show:function(){b.superclass.show.call(this);var c=this.get("rootNode"),d=a.Array.find(c.get("className").split(" "),function(a){return a.startsWith("columns-")}).substr(8),d=parseInt(d,10);this.set("columns",d);c=new a.Squarespace.Models.BlockField({widgetName:c.getAttribute("id"),columns:d});this.set("model",c);
c.load(a.bind(function(){var b=this._getPageLayout();b.get("columns")!=this.get("columns")&&a.Squarespace.PageLayoutTools.convertLayoutToNewColumnCount(b,this.get("columns"));this._renderEditor()},this))},_getPageLayout:function(){return this.get("model").get("data").get("layout")}})},"1.0",{requires:["base","plugin","squarespace-frontend-edit-controller-base","squarespace-frontend-edit-controller-layout-base","squarespace-models-layout"]});
YUI.add("squarespace-block-icon",function(a){var d=a.namespace("Squarespace.Block").Icon=a.Base.create("blockIcon",a.Widget,[],{renderUI:function(){var b=a.ClassNameManager.getClassName("sqs","blockicon",this.get("id"),!0);this.get("boundingBox").addClass(b);this.get("contentBox").setHTML('<div class="label">'+this.get("label")+"</div>")},bindUI:function(){this.after("pressedChange",this._afterPressedChange,this)},_afterPressedChange:function(a){this.get("boundingBox").toggleClass(d.CSS_PREFIX+"-pressed",
!!a.newVal)},queueForDestruction:function(){this.get("boundingBox").addClass("sqs-destroyme")}},{CSS_PREFIX:"sqs-blockicon",ATTRS:{ctor:{value:null},label:{},floatable:{valueFn:function(){var a=this.get("ctor");return(a=a.ATTRS.floatable||a.superclass.constructor.ATTRS.floatable)&&void 0!==a.value?a.value:!0}},pressed:{value:!1}}})},"1.0",{requires:["base","widget-child","squarespace-ss-widget"]});
YUI.add("squarespace-frontend-edit-controller-site-title",function(a){var d=a.namespace("Squarespace.Frontend.EditController"),b=a.Squarespace.Frontend.OverlayEditorControl;d.SiteTitle=a.Base.create("SiteTitle",d.Base,[],{initializer:function(){this._hasDefaultSiteTitle()&&this.show()},show:function(){this.get("rootNode").plug(b,{label:"Edit Site Title",action:this._onConfigureClick,context:this})},_onConfigureClick:function(){this.fire("navigate",{path:"/settings/site"})},hide:function(){this._hasDefaultSiteTitle()||
this.get("rootNode").unplug(b)},_hasDefaultSiteTitle:function(){return"Your Site Title"===a.config.win.Static.SQUARESPACE_CONTEXT.website.siteTitle&&!a.config.win.Static.SQUARESPACE_CONTEXT.website.logoImageId}})},"1.0",{requires:["base","squarespace-frontend-edit-controller-base"]});
YUI.add("squarespace-block-content-image-editor",function(a){a.namespace("Squarespace.Content.Image").Editor=a.Base.create("ImageEditor",a.Plugin.Base,[],{initializer:function(){var d=this._host=this.get("host"),b=this._model=this._host.get("model");d.get("parent")?this.isBlogApp=d.get("parent").get("editController").isMobileApp():this.isBlogApp=!1;var c=a.UA.mobile?"dbltap":"dblclick";this._bb=d.get("boundingBox");this._cb=d.get("contentBox");this.isBlogApp||(this._bb.on(c,function(){a.Lang.isValue(b.get("imageId"))&&
!b.get("processing")&&this.set("editing",!0)},this),this.after("editingChange",this._editingChange,this));b.on("aspectRatioChange",d.blur,this);b.after(["imageIdChange","isBase64Change"],this._syncUploadUI,this);this._syncUploadUI()},_syncUploadUI:function(){var d=this._model;d.isEmpty()?this.isBlogApp?this.uploadButton||(this.uploadButton=a.Node.create('<div class="sqs-upload-button">Select Image</div>'),this._cb.appendChild(this.uploadButton),this.uploadButton.on("tap",function(){var a=this._host.get("id");
this._host.get("parent").get("editController").callNativeAppMethod("imagepicker","contentID="+a)},null,this)):(d.get("imageId")||this._removeImageOverlay(),this.uploader||(this.uploader=new a.Squarespace.Uploader({uploadURL:"/api/commondata/SaveMedia",multipleFiles:!1,appendNewFiles:!1,isTransient:a.Squarespace.UploadModes.TRANSIENT,isGlobal:!1,autoUpload:!0,addPlaceholder:a.bind(this._addPlaceholder,this),selectButtonLabel:"Add Image",dragAndDropArea:this._bb,fileFilters:[{description:"Images",extensions:"*.jpg;*.jpeg;*.png;*.gif;*.ico",
acceptTypes:"image/png, image/gif, image/jpeg"}],maxSize:20,processFile:a.bind(this._processFile,this),createJob:a.bind(this._createImageProcessingJob,this),jobComplete:a.bind(this._jobComplete,this),render:this._cb}),this.uploader.on("fileuploadstart",function(){this.uploadProgress({completed:0})},this),this.uploader.after("uploadprogress",function(a){this.uploadProgress({completed:a.percentLoaded})},this),this.uploader.get("boundingBox").removeClass("sqs-uploader"),this.uploader.get("boundingBox").addClass("sqs-image-uploader"))):
(this.uploader&&(this.uploader.destroy(),this.uploader=null),this.uploadButton&&(this.uploadButton.detach("tap"),this.uploadButton.remove()),this._host.render())},_addPlaceholder:function(a){return this._cb},_createImageProcessingJob:function(d,b){if(!b.job)return console.warn("Didn't create image processing job because response didn't have job information."),null;var c=new a.Squarespace.ImageProcessingJob(a.merge(b.job,{started:!0}));this.uploadProgress({completed:1,itemRepresentation:b.media[0]});
return c},_jobComplete:function(d,b){b.get("status")==a.Squarespace.JobStatuses.SUCCESS?this._model.loadImageData().then(a.bind(function(){this.jobUpdate({status:b.get("status"),data:b.get("data")})},this)):this.jobUpdate({status:b.get("status"),data:b.get("data")})},_processFile:function(d){if(d.invalid){var b=d.invalid[0];d=b.title;b=b.message;this.get("strings.invalidDrop")&&(d=this.get("strings.invalidDrop.title"),b=this.get("strings.invalidDrop.message"));new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Alert.ANCHOR.ELEMENT,
anchor:this.get("contentBox"),"strings.title":d,"strings.message":b})}else d.postData={process:!0,contentType:"image"}},uploadProgress:function(d){var b=d.lowresImage,c=d.itemRepresentation,e={completed:d.completed||0};a.Lang.isNumber(d.completed)&&1==d.completed&&(e.processing=!0);if(a.Lang.isValue(b)){this._bb.toggleClass("uploading",1!==d.completed);var g=d.dimensions.split("x");d=parseInt(g[0],10);g=parseInt(g[1],10);e.isBase64=!0;e.baseAssetUrl=b;e.completed=0;e.dimensions={width:d,height:g};
e.aspectRatio=100*(g/d)}a.Lang.isObject(c)&&(e.baseAssetUrl=c.assetUrl,e.imageId=c.id);this._updateModel(e)},jobUpdate:function(d){d.status==a.Squarespace.JobStatuses.SUCCESS&&this._model.setAttrs({isBase64:!1,processing:!1})},_updateModel:function(a){this._model.setAttrs(a);this._host.get("parent")&&this._host.get("parent").get("isNewBlock")&&this._host.get("parent").set("isNewBlock",!1)},_editingChange:function(d){d=this._model;var b=this.get("editing");d.get("imageId")&&(b?(this._bb.on("clickoutside",
this._onClickOutside,this),this.imgOverlay&&a.Lang.isValue(this._host.imgNode)&&(d=this.imgOverlay.get("contentBox").one("img").getAttribute("src"),b=this._host.imgNode.getAttribute("src"),d!==b&&(this.imgOverlay.destroy(),this.imgOverlay=null)),this.imgOverlay||this._createImgOverlay(),this.imgOverlay.get("boundingBox").setStyles({position:"absolute",opacity:1}),this.imgOverlay.show(),this.isBlogApp||(this.mousedown=this._bb.on("mousedown",this._imgDragMousedown,this))):(this._bb.detach("clickoutside"),
this.set("positioning",!1),this._hideOverlay(),this.mousedown&&this.mousedown.detach(),this.imgDragMove&&this.imgDragMove.detach(),this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach(),this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach()))},_onClickOutside:function(a){!1!==this.get("editing")&&!a.target.ancestor(".dialog-imageblockconfig",!0)&&this.set("editing",!1)},_hideOverlay:function(a){this.imgOverlay&&this.imgOverlay.hide()},_createImgOverlay:function(){if(!this.imgOverlay){var d=
a.Node.create('<img class="sqs-image-overlay">');d.setAttribute("src",this._host.imgNode.getAttribute("src"));d.setStyles({height:"100%",width:"100%",opacity:0.2});this.imgOverlay=new a.Overlay({bodyContent:d,zIndex:1,align:{node:this._host.imgNode,points:["cc","cc"]}});this.imgOverlay.on("visibleChange",function(){var a=this.get("align.node").get("region");this.setAttrs({height:a.height,width:a.width});this.align()},this.imgOverlay);this.imgOverlayFocalPointChangeEvt=this._model.after("focalPointChange",
function(){this.imgOverlay.align()},this);this.imgOverlay.get("boundingBox").addClass("sqs-imageoverlay");this.imgOverlay.get("bodyContent").setStyle("height",null);(d=this._bb.ancestor(".sqs-block"))||(d="body");this.imgOverlay.render(d);this.imgOverlay.hide()}},_removeImageOverlay:function(){this.imgOverlay&&(this.imgOverlayFocalPointChangeEvt.detach(),this.imgOverlay.destroy(),this.imgOverlay=null)},_imgDragMousedown:function(d){if(this.get("editing")&&!this._model.isEmpty()){a.DD.DDM.stopDrag();
d.halt();var b=this.get("id");this.startX=d.pageX;this.startY=d.pageY;this.startFocal=this._model.get("focalPoint").split(",");this.bbR=this._host.get("boundingBox").get("region");this.imgR=this._host.imgNode.get("region");this.imgDragMove&&this.imgDragMove.detach();this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach();this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach();this.imgDragMove=a.one(a.config.win).on([b+"|mousemove",b+"|touchmove"],this._imgDragDrag,this);this.imgDragUpInnerFrame=
a.one(a.config.win).on([b+"|mouseup",b+"|touchend"],this._imgDragEnd,this);this.imgDragUpOuterFrame=a.one(window).on([b+"|mouseup",b+"|touchend"],this._imgDragEnd,this);this.set("positioning",!0)}},_imgDragDrag:function(a){var b=this.imgR,c=this.bbR,e=a.pageX-this.startX;a=a.pageY-this.startY;var g=parseFloat(this.startFocal[0]),f=parseFloat(this.startFocal[1]),e=this._calculateFocalPoint(e,b.width,c.width,g),b=this._calculateFocalPoint(a,b.height,c.height,f);this._model.set("focalPoint",e+","+b)},
_calculateFocalPoint:function(a,b,c,e){b=c-b;return 0<=b?e:Math.max(Math.min((b*e+a)/b,1),0)},_imgDragEnd:function(a){this.imgDragMove&&this.imgDragMove.detach();this.imgDragUpInnerFrame&&this.imgDragUpInnerFrame.detach();this.imgDragUpOuterFrame&&this.imgDragUpOuterFrame.detach();this.set("positioning",!1);this._model.saveFocalPoint()},destructor:function(){this.uploader&&this.uploader.destroy();this.uploadButton&&(this.uploadButton.detachAll(),this.uploadButton.remove())}},{NS:"contentEditor",ATTRS:{editing:{value:!1},
tabIndex:{value:0},focused:{value:!1,readOnly:!0}}})},"2.0",{requires:"node base plugin overlay anim event-touch event-tap dd-delegate squarespace-uploader squarespace-plugin-progress squarespace-jobs squarespace-job-manager squarespace-event-dbltap squarespace-models-content-item squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-block-link",function(a){a.namespace("Squarespace.Block").Link=a.Base.create("block-link",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-link",ATTRS:{editor:{value:a.Squarespace.Block.Editor.Link},defaultContentModel:{value:{linkTitle:"",linkTarget:"",newWindow:!1}}}})},"1.0",{requires:["squarespace-block-base-modelsync","squarespace-block-link-editor"]});
YUI.add("squarespace-form-builder-field",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.FormBuilderField=a.Base.create("formBuilderField",a.Squarespace.Widgets.SSWidget,[a.WidgetChild,a.Squarespace.Mixins.Expandable],{initializer:function(){this.publish("removeClicked",{emitFacade:!0});var b=this.get("field");this._titleField=new a.Squarespace.DialogFields.Text({name:"fieldTitle",data:b.title});"hidden"===b.type&&(b.key=this._cleanTitleForHidden(b.title));this._editor=
new a.Squarespace.Widgets.FormBuilderFieldEditor({field:b})},destructor:function(){this._titleField.destroy();this._editor.destroy()},renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("contentBox");this._editButton=a.one(".edit-field");var c=this._editorWrapper=a.one(".editor-wrapper");this._set("expandableNode",c);c.hide(!0);this._titleField.render(a.one(".field-title"));this._editor.render(c)},bindUI:function(){d.superclass.bindUI.call(this);this.after("editingChange",this.syncUI,
this);this._editor.on("change",function(a){this.fire("fieldChange")},this);this._bindTitleField();this._bindEditButton();this._bindRemoveButton()},syncUI:function(){d.superclass.syncUI.call(this);this.get("editing")?(this._editButton.setContent(this.get("strings.doneText")),this.open()):(this._editButton.setContent(this.get("strings.editText")),this.close());var a=this.get("field").locked;this.get("contentBox").toggleClass("field-locked",a)},openEdit:function(){this._set("editing",!0)},closeEdit:function(){this._set("editing",
!1)},focusAndSelect:function(){var a=this._titleField;a.focus();a.select()},lock:function(){this.get("field").locked=!0;this.fire("fieldChange");this.syncUI()},unlock:function(){this.get("field").locked=!1;this.fire("fieldChange");this.syncUI()},_bindTitleField:function(){var a=this._titleField,c=this.get("field");a.after("dataChange",function(a){c.title=a.newVal;"hidden"===c.type&&(a=this._cleanTitleForHidden(c.title),this._editor.item(0).set("data",a));this.fire("fieldChange")},this)},_bindEditButton:function(){this._editButton.on("click",
function(){this.get("animating")||(this.get("editing")?this.closeEdit():this.openEdit())},this)},_bindRemoveButton:function(){this.get("contentBox").one(".remove-field").on("click",function(a){a.halt();this.fire("removeClicked")},this)},_cleanTitleForHidden:function(a){a=a.trim().replace(/\W/g,"_").toUpperCase();0!==a.indexOf("SQF_")&&(a="SQF_"+a);return a}},{CSS_PREFIX:"sqs-form-builder-field",HANDLEBARS_TEMPLATE:"form-builder-field.html",ATTRS:{strings:{value:{editText:"Edit",doneText:"Done"},validator:a.Squarespace.AttrValidators.isObject,
writeOnce:"initOnly"},field:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject,writeOnce:"initOnly"},editing:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:!0},animating:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:!0}}})},"1.0",{requires:"base widget-child squarespace-animations squarespace-attr-validators squarespace-dialog-text squarespace-form-builder-field-editor squarespace-form-builder-field-template squarespace-mixins-expandable squarespace-ss-widget".split(" ")});
YUI.add("squarespace-connected-account-editors",function(a){var d={tumblr:a.Squarespace.TumblrAccountEditor};a.namespace("Squarespace").ConnectedAccountEditors={create:function(b){var c=b.get("serviceName"),e=d[c];e||(e=a.Squarespace.ModelEditorDialog);return new e({model:b,dialogConfigContext:a.Squarespace.ConnectedAccountDialogSettingsContext,dialogConfig:a.Squarespace.ConnectedAccountDialogSettings.get(c)})}}},"1.0",{requires:["squarespace-connected-account-dialog-settings","squarespace-model-editor",
"squarespace-tumblr-connected-account-editor"]});
YUI.add("squarespace-file-manager-tab-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["file-manager-tab.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];this.merge(d,a.helpers);return'<div class="file-manager-tab">\n  <div class="options"></div>\n  <div class="frames"></div>\n</div>\n'})})();a.Handlebars.registerPartial("file-manager-tab.html".replace("/","."),d.templates["file-manager-tab.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-layout-email-utils",function(a){a.namespace("Squarespace").Layout.EmailUtils={prepHtmlForEmail:function(d){var b=a.Node.create("<div></div>");b.setContent(d);var c=b.get("children");d=c.item(0);c=c.pop();this._shouldCollapseMargin(d)&&d.setStyle("marginTop","0");this._shouldCollapseMargin(c)&&c.setStyle("marginBottom","0");b.all("*").setStyle("font-family","Helvetica, Arial, sans-serif");b.all(".text-align-left").setStyle("text-align","left");b.all(".text-align-center").setStyle("text-align",
"center");b.all(".text-align-right").setStyle("text-align","right");d=b.getContent();b.destroy();return d},_shouldCollapseMargin:function(d){return!a.Lang.isValue(d)?!1:(d=d.getDOMNode().tagName.match(/(p|h[1-6])/i))&&0<d.length}}});
YUI.add("squarespace-login",function(a){a.config.win.SQUARESPACE_LOGIN||(a.config.win.SQUARESPACE_LOGIN=Singleton.create({ready:function(){Static.SQUARESPACE_CONTEXT&&(this.account=Static.SQUARESPACE_CONTEXT.authenticatedAccount);this.params=this.defaultParams={redirectAfterCancel:!0,redirectAfterLogin:!0,minimal:!1,cancelable:!0,overlayOpacity:0.8,disableOverlayCancel:!1,forgotPassword:!0,disableCreateAccount:!0,globalLogin:!0,allowSocialLogins:!0};this.dialogParameters=null},configure:function(d){this.params=
this.defaultParams;this.params=a.merge(this.params,d)},reset:function(){this.params=this.defaultParams},isLoggedIn:function(){return!!this.account},getAccount:function(){return this.account},toggle:function(){this.loginDialog&&this.loginDialog.isVisible()?this.loginDialog.cancel():this.show()},_getNoLoginDialogParmas:function(){return{style:"flyout",discardChangesConfirmation:!1,overlay:this.params.overlayOpacity,width:400,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,
tabs:[{title:"Squarespace Login",icon:"/universal/images-v6/dialog/login-icon.png?4",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"This browser does not accept cookies, which is a requirement for login. You can allow cookies by changing your browser's settings."}}]}]}},showSquarespaceLogo:function(){var d=a.one(".six-icon");d||(d=a.Node.create('<div class="six-icon"></div>'),d.addClass("animated-squarespace-logo"),d.appendChild(a.Node.create('<div class="six-icon-inside"></div>')),
a.one(document.body).append(d));var b=new Image;b.onload=function(){var c=d.one(".six-icon-inside");c.setStyles({backgroundImage:"url("+b.src+")"});a.later(500,this,function(){JSTween.tween(c.getDOMNode(),{transform:{start:"scale(1.4) rotate(10deg)",stop:"scale(1) rotate(0deg)",time:0,duration:2,effect:"easeOut"},opacity:{start:0,stop:100,duration:1,time:0}});JSTween.play()})};b.src="/universal/images-v6/logo/logo.png"},buildDialog:function(){if(a.Squarespace.Utils.areCookiesEnabled()){var d=a.bind(function(b){return a.bind(function(a){this.loginDialog.getField(b).show(a)},
this)},this);this.dialogParameters=this._getLoginDialogParams();this.params.allowSocialLogins&&this._enableSocialLogin(this.dialogParameters,d);this.params.minimal?(this.dialogParameters.style="transparent",this.dialogParameters.top=300,this.dialogParameters.buttons=[this.params.cancelable?{type:"cancel",title:"Cancel"}:null,!this.params.disableCreateAccount?{type:"createAccount",title:"Create Squarespace Account"}:null,{type:"saveAndClose",title:"Login"}]):this.dialogParameters.buttons=[!this.params.disableOverlayCancel?
{type:"cancel",title:"Cancel"}:null,!this.params.disableCreateAccount?{type:"createAccount",title:"Create Squarespace Account"}:null,{type:"saveAndClose",title:"Login"}]}else this.dialogParameters=this._getNoLoginDialogParmas()},_getLoginDialogParams:function(){return{name:"login",style:"flyout",discardChangesConfirmation:!1,overlay:this.params.overlayOpacity,width:400,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,tabs:[{title:"Squarespace Login",
icon:"/universal/images-v6/dialog/login-icon.png?4",fields:[{type:"multi-frame",name:"login-method-frame",initialFrame:"squarespace",frames:{squarespace:{fields:[{ctor:a.Squarespace.DialogFields.Email,config:{name:"email","strings.placeholder":"Email",required:!0,mailcheck:!0,submitOnEnter:!0}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"password","strings.placeholder":"Password",required:!0,password:!0,submitOnEnter:!0}},{type:"splitter",fields:[{ctor:a.Squarespace.DialogFields.Check,config:{width:220,
name:"remember",strings:{title:"Stay Logged In",description:"Keep me logged in until I log out."}}},{type:"link",width:88,name:"passwordReset",className:"forgotpassword",title:"Forgot Password?",align:"right",padding:[0,0]}]}]},facebook:{fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"facebook-login",text:'<div class="facebook-login-button"></div><div class="big-login-caption">Click above to be redirected to Facebook.</div>'}}]},twitter:{fields:[{ctor:a.Squarespace.DialogFields.Description,
config:{name:"twitter-login",text:'<div class="twitter-login-button"></div><div class="big-login-caption">Click above to be redirected to Twitter.</div>'}}]},google:{fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"google-login",text:'<div class="google-login-button"></div><div class="big-login-caption">Click above to be redirected to Google.</div>'}}]}}},{type:"hidden",name:"inviteCode"},{type:"hidden",name:"srcUrl"}]}]}},_enableSocialLogin:function(d,b){d.tabs[0].fields.splice(0,
0,{ctor:a.Squarespace.DialogFields.MultiOption,config:{name:"login-method",optionClickCb:b("login-method-frame"),defaultValue:"squarespace",className:"round square",titleStyle:"top",options:[{icon:"squarespace",title:"Squarespace",value:"squarespace"},{icon:"twitter",title:"Twitter",value:"twitter"},{icon:"facebook",title:"Facebook",value:"facebook"},{icon:"google",title:"Google",value:"google"}]}});d.width=460},buildCommentDialog:function(d,b,c){var e=a.bind(function(b){return a.bind(function(a){this.loginDialog.getField(b).show(a)},
this)},this);this.dialogParameters={name:"comment",style:"flyout",discardChangesConfirmation:!1,overlay:this.params.overlayOpacity,width:460,height:275,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,tabs:[{title:d,icon:"/universal/images-v6/standard/icon_comments_24_light.png",fields:[{type:"hidden",name:"inviteCode"},{type:"hidden",name:"srcUrl"},{ctor:a.Squarespace.DialogFields.MultiOption,config:{name:"login-method",optionClickCb:e("login-method-frame"),
className:"round square",data:"squarespace",options:[{icon:"squarespace",title:"Squarespace",value:"squarespace"},{icon:"twitter",title:"Twitter",value:"twitter"},{icon:"facebook",title:"Facebook",value:"facebook"},{icon:"google",title:"Google",value:"google"}]}},{type:"multi-frame",name:"login-method-frame",initialFrame:"squarespace",frames:{squarespace:{fields:[{type:"text",required:!0,name:"email",title:"Email Address",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,style:"major"},{type:"text",
required:!0,name:"password",password:!0,title:"Password",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,style:"major"},{type:"splitter",fields:[{type:"check",width:0.7,required:!0,name:"remember",title:"Stay Signed In",padding:[5,0],description:"Keep you signed in for 2 weeks."},{type:"link",width:0.3,name:"passwordReset",className:"forgotpassword",title:"Forgot Password?",align:"right"}]}]},facebook:{fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"facebook-login",text:'<div class="facebook-login-button"></div><div class="big-login-caption">Click above to be redirected to Facebook.</div>'}}]},
twitter:{fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"twitter-login",text:'<div class="twitter-login-button"></div><div class="big-login-caption">Click above to be redirected to Twitter.</div>'}}]},google:{fields:[{ctor:a.Squarespace.DialogFields.Description,config:{name:"google-login",text:'<div class="google-login-button"></div><div class="big-login-caption">Click above to be redirected to Google.</div>'}}]}}}]}]};this.params.minimal?(this.dialogParameters.style="transparent",
this.dialogParameters.width=460,this.dialogParameters.height=275,this.dialogParameters.top=300,this.dialogParameters.buttons=[{type:"createAccount",title:"Create Squarespace Account"},{type:"saveAndClose",title:"Login"}]):this.dialogParameters.buttons=[!this.params.disableOverlayCancel?{type:"cancel",title:"Cancel"}:null,{type:"createAccount",title:"Create Squarespace Account"},{type:"saveAndClose",title:b||"Login"}];c&&this.dialogParameters.tabs[0].fields.forEach(function(b){a.Lang.isValue(b.config)&&
"login-method"===b.config.name&&(b.config.options.unshift({icon:"guest",title:"Guest",value:"guest"}),b.config.data="guest");"login-method-frame"===b.name&&(b.initialFrame="guest",b.frames.guest={fields:[{type:"text",name:"displayName",required:!0,title:"Your Name",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,style:"major"},{type:"text",name:"anonEmail",title:"Email (Optional)",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,mailcheck:!0,style:"major"},{type:"text",required:!1,
name:"authorUrl",title:"Website URL (Optional)",fieldStyle:"normal",titleStyle:"inline",submitOnEnter:!0,style:"major"}]})},this)},showCommentLogin:function(a,b,c){this.params.redirectAfterLogin=!1;this.params.redirectAfterCancel=!1;this.loginDialog&&(this.dialogParameters=this.loginDialog=null);this.buildCommentDialog(a,b,c);this.show()},showGoogleWebhostingLogin:function(){var d,b=this._getLoginDialogParams();this._enableSocialLogin(b,function(a){return function(b){d.getField(a).show(b)}});b.style=
"transparent";b.disableOverlayCancel=!0;b.top=300;b.height=260;b.buttons=[{type:"saveAndClose",title:"Login"}];d=new a.Squarespace.EditingDialog(b);d.on("click",function(b){this.externalAuth||(this.externalAuth=new a.Squarespace.ExternalAuthentication({includeWebsiteList:!0}),this.externalAuth.on("completed",function(){d.close();var a=this.externalAuth.get("websites"),b=this.externalAuth.get("memberAccount");this._showSelectWebsiteDialog(a,b)},this));b.target.ancestor(".twitter-login-button",!0)?
this.externalAuth.openPopupWindow(a.Squarespace.ExternalServiceProviders.TWITTER):b.target.ancestor(".facebook-login-button",!0)?this.externalAuth.openPopupWindow(a.Squarespace.ExternalServiceProviders.FACEBOOK):b.target.ancestor(".google-login-button",!0)&&this.externalAuth.openPopupWindow(a.Squarespace.ExternalServiceProviders.GOOGLEAUTH2)},this);d.on("send-requested",function(){this._setLoginDialogLoadingState(!0,d);d.once("show-errors",function(){this._setLoginDialogLoadingState(!1,d)},this);
var b=d.getData();b.includeWebsiteList="true";a.Data.post({url:"/api/auth/Login",data:b,secure:!0,success:function(a){d.close();this._showSelectWebsiteDialog(a.websites,a.account)},failure:function(a){a.errors&&d.showErrors(a.errors);d.getField("remember").hide(!0);d.getField("passwordReset").hide(!0)}},this)},this);d.show();d.getField("remember").hide(!0);d.getField("passwordReset").hide(!0);d.once("shown",function(){d.getField("email").focus()},this);a.Squarespace.Analytics.trackInternal("engagement_login_overview_view")},
_showSelectWebsiteDialog:function(d,b){var c=new a.Squarespace.Models.ModelList;a.Array.each(d,function(b){c.add(new a.Model(b))});1===c.size()&&this._redirectToWebsite(c.item(0));var e=a.one(".selector-container"),e=new a.Squarespace.Widgets.WebsiteSelector({memberAccount:new a.Squarespace.Models.MemberAccount(b),websites:c,boundingBox:e,title:"Select the website you would like to add the domain to"});e.render();e.on("selectedWebsiteChange",function(b){a.Lang.isValue(b.newVal)&&this._redirectToWebsite(b.newVal)},
this);a.Squarespace.Analytics.trackInternal("engagement_site_disambiguation",{disambiguationType:"domain_linkage"})},_redirectToWebsite:function(d){d=d.get("loginUrl")+"&redirectUrl="+encodeURIComponent(this._getGoogleWebhostingConfirmUrl());a.config.win.location=d},_getGoogleWebhostingConfirmUrl:function(){var d=a.Squarespace.GoogleDomains.getGoogleDomainUrlParams();return"/auth/google-web-hosting/add-domain-confirmation?domainName="+d.domainName+"&userId="+d.userId},show:function(){a.use("squarespace-dialog",
"squarespace-external-authentication","squarespace-dialog-hidden",a.bind(function(a){a.one("html").addClass("squarespace-cameron");if(!this.loginDialog||!this.loginDialog.isVisible())this.loginDialog&&(this.loginDialog.destroy(),this.dialogParameters=this.loginDialog=null),null===this.dialogParameters&&this.buildDialog(),this.loginDialog=new a.Squarespace.EditingDialog(this.dialogParameters),this.loginDialog.on(["cancel-clicked","overlay-click"],function(){a.config.win.SQUARESPACE_LOGIN.fire("cancel");
this.reset()},this),this.loginDialog.on("loading",function(){var b=a.Cookie.get("email");a.config.win.SQUARESPACE_LOGIN.params.inviteCode&&(a.config.win.SQUARESPACE_LOGIN.showBigText("login"),b=this.params.invitation.email,this.params.redirectAfterLogin=!0);b?this.loginDialog.setInitialData({email:b,inviteCode:a.config.win.SQUARESPACE_LOGIN.params.inviteCode,remember:!0}):this.loginDialog.setInitialData({inviteCode:a.config.win.SQUARESPACE_LOGIN.params.inviteCode,remember:!0})},this),this.loginDialog.on("click",
function(b){this.externalAuth||(this.externalAuth=new a.Squarespace.ExternalAuthentication({useLoginFlag:!0}),this.externalAuth.on("completed",function(){a.Data.get({url:"/api/auth/CheckAuthentication",secure:!0,data:{srcUrl:document.location.href},success:function(b){Static.SQUARESPACE_CONTEXT.permissions=b.permissions;b.member&&(Static.SQUARESPACE_CONTEXT.authenticatedAccount=b.member,a.config.win.SQUARESPACE_LOGIN.onLoginComplete(b.member,b.redirectUrl),this.close())}},this)},this));b.target.ancestor(".twitter-login-button",
!0)?this.externalAuth.openPopupWindow(a.Squarespace.ExternalServiceProviders.TWITTER):b.target.ancestor(".facebook-login-button",!0)?this.externalAuth.openPopupWindow(a.Squarespace.ExternalServiceProviders.FACEBOOK):b.target.ancestor(".google-login-button",!0)&&this.externalAuth.openPopupWindow(a.Squarespace.ExternalServiceProviders.GOOGLEAUTH2)}),this.loginDialog.on("button-createAccount",function(){this.loginDialog.temporaryHide();this.createSquarespaceAccount()},this),this.loginDialog.on("link-passwordReset",
function(){this.loginDialog.temporaryHide();var a=this.loginDialog.getData();this.passwordReset(a.email)},this),this.loginDialog.on("datachange",function(){this.getData().remember||a.Cookie.remove("email");this.hideErrors()}),this.loginDialog.on("cancel",function(){this.params.redirectAfterCancel&&!SQUARESPACE_LOGIN.params.externalSwitcher&&(document.location.href="http://"+document.location.host+"/")}),this.loginDialog.on("send-requested",function(){var b=this.loginDialog.getData();if("guest"===
b["login-method"]){var c=new Date;c.setSeconds(c.getSeconds()+30);a.Cookie.set("email",b.anonEmail,{path:"/",expires:c});a.Cookie.set("displayName",b.displayName,{path:"/",expires:c});a.Cookie.set("websiteUrl",b.authorUrl,{path:"/",expires:c});this.fire("guestLogin");this.loginDialog.close()}else-1===b.email.indexOf("@")?a.use("thirdparty-sha1",a.bind(function(a){var c=b64_sha1(b.password);10<=a.UA.ie||23<=a.UA.gecko?this.loginRPCProvider.v5login(b.email,c):this._v5login(b.email,c)},this)):((c=this.loginDialog.getField("srcUrl"))&&
"comment"!==this.loginDialog.getName()&&c.setValue(document.location.href),this._setLoginDialogLoadingState(!0),this.loginDialog.once("show-errors",function(){this._setLoginDialogLoadingState(!1)},this),a.Data.sendForm(this.loginDialog,{url:"/api/auth/Login",secure:!0,success:function(c){b.remember&&a.Cookie.set("email",b.email,{path:"/",expires:new Date("January 1, 2030")});a.Cookie.remove("displayName");Static.SQUARESPACE_CONTEXT.permissions=c.permissions;Static.SQUARESPACE_CONTEXT.managedWebsites=
c.managedWebsites;Static.SQUARESPACE_CONTEXT.authenticatedAccount=c.account;this.onLoginComplete(c.account,c.redirectUrl);this.loginDialog.close()}},this))},this),this.loginDialog.setInitialData({"login-method":"squarespace",login:a.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"]),password:"",remember:!0,inviteCode:Static.SQUARESPACE_CONTEXT.inviteCode}),this.loginDialog.isVisible()||(this.loginDialog.show(),this.loginDialog.once("shown",function(){this.loginDialog.getField("email").focus()},
this))},this))},_setLoginDialogLoadingState:function(d,b){var c=b||this.loginDialog,e=c.bodyEl.one(".spinner-wrapper");e||(e=c.bodyEl.appendChild('<div class="spinner-wrapper"></div>'),new a.Squarespace.Spinner({size:"large",render:e}));d?(c.getField("email").disable(),c.getField("password").disable(),c.getField("remember").hide(),c.getField("passwordReset").hide(),c.buttonHolder.setStyles({opacity:0}),e.setStyles({opacity:1})):(c.getField("email").enable(),c.getField("password").enable(),c.getField("remember").show(),
c.getField("passwordReset").show(),c.buttonHolder.setStyles({opacity:1}),e.setStyles({opacity:0}))},createSquarespaceAccount:function(){if(!this.createAccountDialog){var d={name:"squarespace-signup",loadingText:"Loading...",savingText:"Submitting...",closingText:"",style:"flyout",overlay:this.params.overlayOpacity,width:460,top:200,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,title:"Create Squarespace Account",buttons:[{type:"cancel",
title:"Cancel"},{type:"saveAndClose",title:"Create Login"}],tabs:[{title:"",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"<strong>Below you can sign up for a Squarespace account.</strong>  Squarespace accounts let you keep a profile for editing and commenting on Squarespace websites.",padding:[0,15]}},{type:"splitter",fields:[{type:"text",width:0.5,required:!0,name:"firstName",title:"First Name",style:"title",titleStyle:"inline",submitOnEnter:!0},{type:"text",width:0.5,required:!0,
name:"lastName",title:"Last Name",style:"title",titleStyle:"inline",submitOnEnter:!0}]},{type:"text",required:!0,name:"email",title:"your@email.com",style:"title",titleStyle:"inline",submitOnEnter:!0},{type:"text",required:!0,name:"password",password:!0,title:"Password",style:"title",titleStyle:"inline",submitOnEnter:!0}]}]};this.params.minimal?(d.style="transparent",d.tabs[0].fields[0]=null,d.top=260):(d.style=null,d.tabs[0].icon="/universal/images-v6/dialog/dialog-icon-member.png");this.createAccountDialog=
new a.Squarespace.EditingDialog(d);this.createAccountDialog.on("loading",function(){this.showBigText("create")},this);this.createAccountDialog.on("cancel",function(){this.showBigText("login");this.loginDialog.temporaryShow()},this);this.createAccountDialog.on("send-requested",function(){var b=this.createAccountDialog.getData();a.Data.sendForm(this.createAccountDialog,{url:"/api/auth/CreateSquarespaceAccount",secure:!0,success:function(a){this.createAccountDialog.close();this.loginDialog.temporaryShow();
this.loginDialog.getField("email").setValue(b.email);this.loginDialog.getField("password").setValue(b.password);this.loginDialog.save()}},this)},this)}this.params.invitation&&this.createAccountDialog.setInitialData({email:this.params.invitation.email});this.createAccountDialog.show()},passwordReset:function(d){if(!this.passwordResetDialog){var b={subtext:"Squarespace",style:"minimal",overlay:0,width:460,top:280,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,
buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Send Email"}],tabs:[{title:"",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Please enter the email address that you used when creating your account.  An email will be sent to that address with further instructions on how to reset your password."}},{ctor:a.Squarespace.DialogFields.Text,config:{required:!0,name:"email","strings.placeholder":"your@email.com",submitOnEnter:!0}}]}]};b.tabs[0].title="Password Reset";
b.tabs[0].icon="/universal/images-v6/dialog/dialog-icon-member.png";this.passwordResetDialog=new a.Squarespace.EditingDialog(b);this.passwordResetDialog.on("loading",function(){},this);this.passwordResetDialog.on("close",function(){this.showBigText("login");this.loginDialog.temporaryShow()},this);this.passwordResetDialog.on("send-requested",function(){this.passwordResetDialog.getData();a.Data.sendForm(this.passwordResetDialog,{url:"/api/auth/PasswordReset",secure:!0,success:function(a){this.passwordResetDialog.close();
this.passwordResetDone(a)}},this)},this)}this.passwordResetDialog.setInitialData({email:d?d:""});this.passwordResetDialog.show()},passwordResetDone:function(d){d={subtext:"Squarespace",style:"minimal",overlay:0,width:460,top:280,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,buttons:[{type:"done",title:"Back to Login"}],tabs:[{title:"",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"You have been sent an email with further instructions on resetting your password."}}]}]};
d.tabs[0].title="Password Reset";d.tabs[0].icon="/universal/images-v6/dialog/dialog-icon-member.png";this.passwordResetDialogDone=new a.Squarespace.EditingDialog(d);this.passwordResetDialogDone.on("button-done",function(){this.passwordResetDialogDone.close();this.showBigText("login");this.loginDialog.temporaryShow()},this);this.passwordResetDialogDone.show()},getPasswordResetDialogParams:function(d){var b={loadingText:"Loading...",savingText:"",closingText:"",style:"minimal",overlay:this.params.overlayOpacity,
width:460,top:280,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,buttons:[d.invalidRecoveryId?{type:"login",title:"Back To Login"}:{type:"saveAndClose",title:"Update"}],tabs:[{title:"",fields:[]}]};b.tabs[0].fields=d.invalidRecoveryId?[{ctor:a.Squarespace.DialogFields.Description,config:{text:"This URL is no longer valid, please go back to login and start over."}}]:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Hi, <strong>"+
a.Escape.html(d.displayName)+"</strong>"}},{ctor:a.Squarespace.DialogFields.Description,config:{text:"Please enter your new account password for the account with email: <strong>"+d.email+"</strong>."}},{type:"text",required:!0,name:"password",password:!0,title:"New Password",style:"title",titleStyle:"inline",submitOnEnter:!0}];b.tabs[0].title="Password Reset";b.tabs[0].icon="/universal/images-v6/dialog/dialog-icon-member.png";return b},bindPasswordResetDialog:function(d,b){d.on("button-login",function(){document.location.replace(document.location.pathname)});
d.on("send-requested",function(){var b=this.dialog.getData();b.email=this.params.email;b.recoveryId=this.params.recoveryId;a.Data.sendForm(this.dialog,{data:b,url:"/api/auth/PasswordReset",secure:!0,success:function(a){this.dialog.close();document.location.replace(document.location.pathname)}},{that:this.that,dialog:d})},{dialog:d,params:b})},passwordResetConfirmation:function(d){var b=this.getPasswordResetDialogParams(d),b=new a.Squarespace.EditingDialog(b);this.bindPasswordResetDialog(b,d);b.show()},
accountActivationConfirmation:function(d){d.recoveryId=d.activationId;var b=this.getPasswordResetDialogParams(d);d.invalidRecoveryId||(b.tabs[0].fields=[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Welcome, <strong>"+a.Escape.html(d.displayName)+"</strong>"}},{ctor:a.Squarespace.DialogFields.Description,config:{text:"To Activate your account you need to first set your account password associated with the email: <strong>"+d.email+"</strong>."}},{type:"text",required:!0,name:"password",
password:!0,title:"New Password",style:"title",titleStyle:"inline",submitOnEnter:!0}],b.tabs[0].title="Activate Account");b=new a.Squarespace.EditingDialog(b);this.bindPasswordResetDialog(b,d);b.show()},showBigText:function(d){"login"===d?a.one(".bigtext")&&(a.one(".bigtext").one(".title").set("innerHTML","Accept Invitation"),a.one(".bigtext").one(".description").set("innerHTML","You have been invited to manage this account by <strong>"+a.Escape.html(this.params.invitingMember.displayName)+"</strong>.  <br/>Sign in or create an account below to get started.")):
"create"===d&&a.one(".bigtext")&&(a.one(".bigtext").one(".title").set("innerHTML","Create Account"),a.one(".bigtext").one(".description").set("innerHTML","Use this form to create a new Squarespace account for use across our system."))},onLoginComplete:function(d,b){a.config.win.SQUARESPACE_LOGIN.account=d;a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG);SQUARESPACE_LOGIN.loginRPCProvider&&b?a.config.win.SQUARESPACE_LOGIN.fire("iframeLogin",b):this.params.redirectAfterLogin||
this.params.reloadAfterLogin?b?b===a.config.win.location.href?a.config.win.location.reload():a.config.win.location.replace(b):new a.Squarespace.Widgets.Alert({"strings.title":"No Administrative Privileges","strings.message":"Your Squarespace account is not listed as an administrator on any sites."}):(a.config.win.SQUARESPACE_LOGIN.fire("login"),this.params.globalLogin&&a.Global.fire("squarespace:login"),this.reset())},_v5login:function(d,b){var c=this.loginDialog||this.loginRPCConsumer;a.Data.post({xdr:{credentials:!0},
url:"http://squarespace5.squarespace.com/process/service/CredentialCheck",data:{A:d,B:b,from6:!0},success:function(e){a.Data.post({xdr:{credentials:!0},url:"http://"+d+".squarespace.com/process/Login",data:{username:d,encryptedPassword:b,from6:!0},success:function(a){"success"===a.result&&top.location.replace("http://"+d+".squarespace.com")},failure:function(a){c.showErrors(a.errors)}},this)},failure:function(a){a.errors?c.showErrors(a.errors):c.showErrors({password:"There was an unexpected error. Please try again later."})}},
this)},_showErrors:function(a){this.loginDialog.showErrors(a)},_buildIFrameLoginDialog:function(){this.buildDialog()},_showLoginInIframe:function(d,b,c){SQUARESPACE_LOGIN.params.disableCreateAccount=!0;SQUARESPACE_LOGIN.params.externalSwitcher=!0;SQUARESPACE_LOGIN.params.allowSocialLogins=!1;this.loginDialog&&(this.dialogParameters=this.loginDialog=null);this._buildIFrameLoginDialog(d,b,c);this.show();SQUARESPACE_LOGIN.on(["close","cancel"],function(){SQUARESPACE_LOGIN.loginRPCProvider.hide()});SQUARESPACE_LOGIN.on("iframeLogin",
function(b){b+="&redirectUrl=/config/iframelogin";var c=a.Node.create('<iframe style="position:fixed; top:-2000px;" src="'+b+'"></div>');c.on("load",function(){var a=b.substring(0,b.indexOf("/",10));SQUARESPACE_LOGIN.loginRPCProvider.redirect(a+"/config")});a.one("body").append(c)})},loadRPCProvider:function(){try{this.loginRPCProvider=new easyXDM.Rpc({},{local:{show:function(){SQUARESPACE_LOGIN._showLoginInIframe()},showErrors:a.bind(this._showErrors,this)},remote:{redirect:{},hide:{},remove:{},
v5login:{}}})}catch(d){console.log("failed to load RPC",d)}},_loadRPCConsumer:function(d,b){this.loginRPCConsumer=new easyXDM.Rpc({remote:"https://oauth."+Static.SQUARESPACE_CONTEXT.appDomain+"/config/iframeLogin",container:d,onReady:b,props:{style:{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:30040}}},{local:{redirect:function(b){a.config.win.location.replace(b)},hide:function(){SQUARESPACE_LOGIN.iFrameLoginHide()},remove:function(){SQUARESPACE_LOGIN.iFrameLoginRemove()},v5login:a.bind(this._v5login,
this)},remote:{show:{},showErrors:{}}})},iFrameLoginLoad:function(d){var b=a.Node.create('<div class="login-wrapper hidden" ></div>');a.one("body").append(b);this._loadRPCConsumer(b.getDOMNode(),d)},iFrameLoginShow:function(d){d&&d.preventDefault();this.overlay=new a.Squarespace.ConfirmationDialog({screenOverlayOpacity:0.8,zIndex:3E4});this.overlay.showScreenOverlay();this.loginRPCConsumer?this._iFrameLoginShow():SQUARESPACE_LOGIN.iFrameLoginLoad(a.bind(this._iFrameLoginShow,this))},_iFrameLoginShow:function(){this.loginRPCConsumer.show();
a.one(".login-wrapper").removeClass("hidden")},iFrameLoginHide:function(){this.overlay.hideScreenOverlay();a.one(".login-wrapper").addClass("hidden")},iFrameLoginRemove:function(){this.loginRPCConsumer.destroy();delete this.loginRPCConsumer;a.one(".login-wrapper").remove()}}),a.augment(a.config.win.SQUARESPACE_LOGIN,a.EventTarget))},"1.0",{requires:"squarespace-util squarespace-dialog squarespace-dialog-hidden squarespace-external-authentication squarespace-enum thirdparty-easyxdm thirdparty-sha1 squarespace-dialog-description squarespace-external-authentication squarespace-dialog-multi-option squarespace-dialog-check squarespace-google-domains-utils squarespace-models-member-account squarespace-widgets-website-selector squarespace-damask-login squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-dialog-oembed-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-oembed.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};a="";var k,l=this.escapeExpression;if((f=d["if"].call(b,(k=b.strings,null==k||!1===k?k:k.title),{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,d;return c=""+('\n  <div class="title">'+l((d=(d=a.strings,null==d||!1===d?d:d.title),"function"===
typeof d?d.apply(a):d))+"</div>\n")},h),data:h}))||0===f)a+=f;a+="\n\n";if((f=d["if"].call(b,b.manual,{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){return'\n  <div class="manual">&nbsp;</div>\n'},h),data:h}))||0===f)a+=f;a+='\n\n<input class="input field-input ';if((f=d["if"].call(b,b.manual,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){return"has-manual"},h),data:h}))||0===f)a+=f;a+='" value="';if((f=d["if"].call(b,(k=b.data,null==k||!1===k?k:k.url),{hash:{},inverse:this.noop,
fn:this.program(7,function(a,b){var c;return l((c=(c=a.data,null==c||!1===c?c:c.url),"function"===typeof c?c.apply(a):c))},h),data:h}))||0===f)a+=f;return a+='"\n  placeholder="'+l((k=(k=b.strings,null==k||!1===k?k:k.inputPlaceholder),"function"===typeof k?k.apply(b):k))+'" spellcheck="false" tabindex="1">\n\n<div class="status description"></div>'})})();a.Handlebars.registerPartial("dialog-oembed.html".replace("/","."),d.templates["dialog-oembed.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-widgets-website-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["widgets-website.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};f=this.escapeExpression;a='<div class="website" data-site-id="';(d=d.id)?d=d.call(b,{hash:{},data:h}):(d=b.id,d="function"===typeof d?d.apply(b):d);return a+=f(d)+'">\n\n  <div class="favicon"><img src="'+f((d=b.faviconURL,"function"===typeof d?d.apply(b):
d))+'" alt="'+f((d=b.siteTitle,"function"===typeof d?d.apply(b):d))+' favicon">\n  </div>\n\n  <div class="site-desc">\n    <span class="title">'+f((d=b.siteTitle,"function"===typeof d?d.apply(b):d))+'</span>\n    <span class="url">'+f((d=b.url,"function"===typeof d?d.apply(b):d))+"</span>\n  </div>\n\n</div>\n"})})();a.Handlebars.registerPartial("widgets-website.html".replace("/","."),d.templates["widgets-website.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("widget-buttons",function(a,d){function b(){this._buttonsHandles={}}var c=a.Array,e=a.Lang,g=a.Object,f=a.Plugin.Button,h=a.Widget,k=a.WidgetStdMod,l=a.ClassNameManager.getClassName,n=e.isArray,p=e.isNumber,q=e.isString,t=e.isValue;b.ATTRS={buttons:{getter:"_getButtons",setter:"_setButtons",value:{}},defaultButton:{readOnly:!0,value:null}};b.CLASS_NAMES={button:l("button"),buttons:h.getClassName("buttons"),primary:l("button","primary")};b.HTML_PARSER={buttons:function(a){return this._parseButtons(a)}};
b.NON_BUTTON_NODE_CFG="action classNames context events isDefault section".split(" ");b.prototype={BUTTONS:{},BUTTONS_TEMPLATE:"<span />",DEFAULT_BUTTONS_SECTION:k.FOOTER,initializer:function(){this._stdModNode||a.error("WidgetStdMod must be added to a Widget before WidgetButtons.");this._mapButtons(this.get("buttons"));this._updateDefaultButton();this.after({buttonsChange:a.bind("_afterButtonsChange",this),defaultButtonChange:a.bind("_afterDefaultButtonChange",this)});a.after(this._bindUIButtons,
this,"bindUI");a.after(this._syncUIButtons,this,"syncUI")},destructor:function(){g.each(this._buttonsHandles,function(a){a.detach()});delete this._buttonsHandles;delete this._buttonsMap;delete this._defaultButton},addButton:function(a,b,d){var e=this.get("buttons"),g;a.getDOMNode||(a=this._mergeButtonConfig(a),b||(b=a.section));b||(b=this.DEFAULT_BUTTONS_SECTION);g=e[b]||(e[b]=[]);p(d)||(d=g.length);g.splice(d,0,a);d=c.indexOf(g,a);this.set("buttons",e,{button:a,section:b,index:d,src:"add"});return this},
getButton:function(a,b){if(t(a)){var c=this._buttonsMap;b||(b=this.DEFAULT_BUTTONS_SECTION);return p(a)?(c=this.get("buttons"),c[b]&&c[b][a]):1<arguments.length?c[b+":"+a]:c[a]}},removeButton:function(a,b){if(!t(a))return this;var d=this.get("buttons"),e;p(a)?(b||(b=this.DEFAULT_BUTTONS_SECTION),e=a,a=d[b][e]):(q(a)&&(a=this.getButton.apply(this,arguments)),g.some(d,function(d,g){e=c.indexOf(d,a);if(-1<e)return b=g,!0}));a&&-1<e&&(d[b].splice(e,1),this.set("buttons",d,{button:a,section:b,index:e,
src:"remove"}));return this},_bindUIButtons:function(){var b=a.bind("_afterContentChangeButtons",this);this.after({visibleChange:a.bind("_afterVisibleChangeButtons",this),headerContentChange:b,bodyContentChange:b,footerContentChange:b})},_createButton:function(d){var e,g,h,k;if(d.getDOMNode)return a.one(d.getDOMNode()).plug(f);e=a.merge({context:this,events:"click",label:d.value},d);d=a.merge(e);g=b.NON_BUTTON_NODE_CFG;h=0;for(k=g.length;h<k;h+=1)delete d[g[h]];d=f.createNode(d);h=e.context;g=e.action;
q(g)&&(g=a.bind(g,h));g=d.on(e.events,g,h);this._buttonsHandles[a.stamp(d,!0)]=g;d.setData("name",this._getButtonName(e));d.setData("default",this._getButtonDefault(e));c.each(c(e.classNames),d.addClass,d);return d},_getButtonContainer:function(c,d){var e=k.SECTION_CLASS_NAMES[c],g=b.CLASS_NAMES.buttons,e=this.get("contentBox").one("."+e+" ."+g);!e&&d&&(e=a.Node.create(this.BUTTONS_TEMPLATE),e.addClass(g));return e},_getButtonDefault:function(a){a=a.getDOMNode?a.getData("default"):a.isDefault;return q(a)?
"true"===a.toLowerCase():!!a},_getButtonName:function(a){return a.getDOMNode?a.getData("name")||a.get("name"):a&&(a.name||a.type)},_getButtons:function(a){var b={};g.each(a,function(a,c){b[c]=a.concat()});return b},_mapButton:function(a,b){var c=this._buttonsMap,d=this._getButtonName(a),e=this._getButtonDefault(a);d&&(c[d]=a,c[b+":"+d]=a);e&&(this._defaultButton=a)},_mapButtons:function(a){this._buttonsMap={};this._defaultButton=null;g.each(a,function(a,b){var c,d;c=0;for(d=a.length;c<d;c+=1)this._mapButton(a[c],
b)},this)},_mergeButtonConfig:function(b){var c,d;b=q(b)?{name:b}:a.merge(b);b.srcNode&&(c=b.srcNode,d=c.get("tagName").toLowerCase(),d=c.get("input"===d?"value":"text"),c={disabled:!!c.get("disabled"),isDefault:this._getButtonDefault(c),name:this._getButtonName(c)},d&&(c.label=d),a.mix(b,c,!1,null,0,!0));c=this._getButtonName(b);(c=this.BUTTONS&&this.BUTTONS[c])&&a.mix(b,c,!1,null,0,!0);return b},_parseButtons:function(a){var d="."+b.CLASS_NAMES.button,e=null;c.each(["header","body","footer"],function(a){var b=
this._getButtonContainer(a),b=b&&b.all(d),c;b&&!b.isEmpty()&&(c=[],b.each(function(a){c.push({srcNode:a})}),e||(e={}),e[a]=c)},this);return e},_setButtons:function(a){function b(a,e){if(n(a)){var g,f,h,k;g=0;for(f=a.length;g<f;g+=1)h=a[g],k=e,h.getDOMNode||(h=this._mergeButtonConfig(h),k||(k=h.section)),h=this._createButton(h),k||(k=c),(d[k]||(d[k]=[])).push(h)}}var c=this.DEFAULT_BUTTONS_SECTION,d={};n(a)?b.call(this,a):g.each(a,b,this);return d},_syncUIButtons:function(){this._uiSetButtons(this.get("buttons"));
this._uiSetDefaultButton(this.get("defaultButton"));this._uiSetVisibleButtons(this.get("visible"))},_uiInsertButton:function(a,c,d){var e=b.CLASS_NAMES.button,g=this._getButtonContainer(c,!0),e=g.all("."+e);g.insertBefore(a,e.item(d));this.setStdModContent(c,g,"after")},_uiRemoveButton:function(c,d,e){var g=a.stamp(c,this),f=this._buttonsHandles,h=f[g];h&&h.detach();delete f[g];c.remove();e||(e={});e.preserveContent||(c=this._getButtonContainer(d),e=b.CLASS_NAMES.button,c&&c.all("."+e).isEmpty()&&
(c.remove(),this._updateContentButtons(d)))},_uiSetButtons:function(a){var d=b.CLASS_NAMES.button;c.each(["header","body","footer"],function(b){var c=a[b]||[],e=c.length,g=this._getButtonContainer(b,e),f=!1,h,k,l,n;if(g){h=g.all("."+d);for(k=0;k<e;k+=1)l=c[k],n=h.indexOf(l),-1<n?(h.splice(n,1),n!==k&&(g.insertBefore(l,k+1),f=!0)):(g.appendChild(l),f=!0);h.each(function(a){this._uiRemoveButton(a,b,{preserveContent:!0});f=!0},this);0===e?(g.remove(),this._updateContentButtons(b)):f&&this.setStdModContent(b,
g,"after")}},this)},_uiSetDefaultButton:function(a,c){var d=b.CLASS_NAMES.primary;a&&a.addClass(d);c&&c.removeClass(d)},_uiSetVisibleButtons:function(a){a&&(a=this.get("defaultButton"))&&a.focus()},_unMapButton:function(a,b){var c=this._buttonsMap,d=this._getButtonName(a);d&&(c[d]===a&&delete c[d],d=b+":"+d,c[d]===a&&delete c[d]);this._defaultButton===a&&(this._defaultButton=null)},_updateDefaultButton:function(){var a=this._defaultButton;this.get("defaultButton")!==a&&this._set("defaultButton",a)},
_updateContentButtons:function(a){var b=this.getStdModNode(a).get("childNodes");this.set(a+"Content",b.isEmpty()?null:b,{src:"buttons"})},_afterButtonsChange:function(a){var b=a.newVal,c=a.section,d=a.index,e=a.src;"add"===e?(a=b[c][d],this._mapButton(a,c),this._updateDefaultButton(),this._uiInsertButton(a,c,d)):"remove"===e?(a=a.button,this._unMapButton(a,c),this._updateDefaultButton(),this._uiRemoveButton(a,c)):(this._mapButtons(b),this._updateDefaultButton(),this._uiSetButtons(b))},_afterContentChangeButtons:function(a){var b=
a.src;a=a.stdModPosition;(!a||a===k.REPLACE)&&("buttons"!==b&&b!==h.UI_SRC)&&this._uiSetButtons(this.get("buttons"))},_afterDefaultButtonChange:function(a){this._uiSetDefaultButton(a.newVal,a.prevVal)},_afterVisibleChangeButtons:function(a){this._uiSetVisibleButtons(a.newVal)}};a.WidgetButtons=b},"3.17.2",{requires:["button-plugin","cssbutton","widget-stdmod"]});
YUI.add("squarespace-plugin-progress",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.Progress=a.Base.create("Progress",a.Plugin.Base,[],{initializer:function(){this._renderContent();this._bindAttributeChanges()},destructor:function(){var d=this._contentEl;d.setStyle("opacity",0);a.later(this.get("unplugDelay"),d,d.remove);d=this.get("host");d.removeClass(this.constructor.NS+"-show-bar");d.removeClass(this.constructor.NS+"-show-spinner");d.removeClass(this.constructor.NS+"-show-cancel")},
_renderContent:function(){var d=this._contentEl=a.Node.create('<div class="progress-container"><div class="progress"><div class="spinner"></div><div class="bar"><div class="bar-inner"></div></div><div class="cancel-process">Cancel</div></div></div>'),b=this._spinnerEl=d.one(".spinner");(new a.Squarespace.Spinner({render:b,size:this.get("spinnerSize"),color:this.get("spinnerColor")})).get("boundingBox");this._barEl=d.one(".bar");this._cancelEl=d.one(".cancel-process");this._setClasses();this._bindContent();
this._syncProgressBar(this.get("progress"));this.get("host").prepend(d)},_setClasses:function(){var a=this.get("showSpinner"),b=this.get("showBar"),c=this.get("showCancel"),e=this.get("host"),g=this.constructor.NS;e.toggleClass(g+"-show-spinner",a);e.toggleClass(g+"-show-bar",b);e.toggleClass(g+"-show-cancel",c);this._spinnerEl.toggleClass("visible",a);this._barEl.toggleClass("visible",b);this._cancelEl.toggleClass("visible",c)},_bindContent:function(){this._cancelEl.on("click",function(a){a.halt();
this.fire("cancel")},this)},_bindAttributeChanges:function(){this.after(["showSpinnerChange","showBarChange","showCancelChange"],this._setClasses,this);this.after("progressChange",function(a){this._syncProgressBar(a.newVal)},this)},_syncProgressBar:function(a){var b=this._barEl.one(".bar-inner");0<=a?(b.removeClass("indeterminate"),b.setStyle("width",Math.max(0,Math.min(100,0+a))+"%")):b.addClass("indeterminate")}},{NS:"progress",ATTRS:{progress:{value:0},showSpinner:{value:!1},showBar:{value:!1},
showCancel:{value:!1},spinnerSize:{value:30},spinnerColor:{value:"dark"},unplugDelay:{value:300}}})},"1.0",{requires:["base","plugin","node","squarespace-spinner"]});
YUI.add("squarespace-scrolling-auto-complete-list",function(a){a.namespace("Squarespace.Widgets");EVT_KEYBOARD_CONTINUE="keyboardContinue";EVT_LIST_MOUSEUP="listMouseUp";EVT_LIST_MOUSEDOWN="listMouseDown";var d=a.Squarespace.Widgets.ScrollingAutoCompleteList=a.Base.create("ScrollingAutoCompleteList",a.AutoCompleteList,[],{initializer:function(){this.publish(EVT_KEYBOARD_CONTINUE);this.publish(EVT_LIST_MOUSEUP);this.publish(EVT_LIST_MOUSEDOWN)},renderUI:function(){d.superclass.renderUI.call(this);
var b=this._scrollNode=a.Node.create('<div class="'+this.getClassName()+'-scroll-container"></div>');this.get("listNode").wrap(b);b.hide();(b=this.get("className"))&&this.get("contentBox").addClass(b)},bindUI:function(){d.superclass.bindUI.call(this);var a=this._scrollNode,c=this.get("inputNode");this.after("activeItemChange",function(a){a.newVal&&this._scrollToActiveItem()},this);this.on("results",function(c){0<c.results.length?a.show():a.hide()},this);this.on(["select","clear"],function(){a.hide()});
this.get("boundingBox").on(["focusoutside","clickoutside"],function(c){a.hide()});c.on("keydown",function(a){switch(a.keyCode){case 13:this.selectItem();this.fire(EVT_KEYBOARD_CONTINUE);break;case 9:this.get("activeItem")&&(this.selectItem(),this.fire(EVT_KEYBOARD_CONTINUE));break;case 27:this.hide();case 38:this._activatePrevItem();break;case 40:this._activateNextItem()}},this);this._listNode.delegate("mouseup",function(a){this.fire(EVT_LIST_MOUSEUP);a.preventDefault()},this._SELECTOR_ITEM,this);
this._listNode.delegate("mousedown",function(a){this.fire(EVT_LIST_MOUSEDOWN)},this._SELECTOR_ITEM,this)},_activateNextItem:function(){d.superclass._activateNextItem.call(this);a.Lang.isNull(this.get("activeItem"))&&this.set("activeItem",this._getFirstItemNode())},_activatePrevItem:function(){d.superclass._activatePrevItem.call(this);a.Lang.isNull(this.get("activeItem"))&&this.set("activeItem",this._getLastItemNode())},_scrollToActiveItem:function(){this.get("activeItem").scrollIntoView();var a=this._scrollNode,
c=a.get("scrollTop"),d=a.one("li:first-child").get("offsetHeight");a.set("scrollTop",d*Math.round(c/d))}},{CSS_PREFIX:"sqs-scroll-ac",ATTRS:{className:{validator:a.Squarespace.AttrValidators.isNullOrString}}})},"1.0",{requires:"base autocomplete lang/autocomplete-list squarespace-attr-validators squarespace-scrolling-auto-complete-list-css event-outside".split(" ")});
YUI.add("parallel",function(a,d){a.Parallel=function(b){this.config=b||{};this.results=[];this.context=this.config.context||a;this.finished=this.total=0};a.Parallel.prototype={results:null,total:null,finished:null,add:function(b){var c=this,d=c.total;c.total+=1;return function(){c.finished++;c.results[d]=b&&b.apply(c.context,arguments)||(1===arguments.length?arguments[0]:a.Array(arguments));c.test()}},test:function(){this.finished>=this.total&&this.callback&&this.callback.call(this.context,this.results,
this.data)},done:function(a,c){this.callback=a;this.data=c;this.test()}}},"3.17.2",{requires:["yui-base"]});
YUI.add("squarespace-editor-form",function(a){a.namespace("Squarespace");var d=a.Squarespace.FormModelEditor=a.Base.create("formModelEditor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){var c=a.getField("formFields"),d=a.getField("formPreview");if(c&&d)c.on("change",d.syncUI,this)},this)},save:function(){this.get("useStorageBackends")?d.superclass.save.call(this,null,a.bind(this._saveFormStorageBackends,this),!0):d.superclass.save.call(this)},
getDialogData:function(){var b=this._formCopy=new a.Squarespace.Models.Form(this.get("model").toJSON()),c={formName:b.get("name"),formFields:b.get("fields"),formPreview:b};(b=b.get("connectedBackends"))&&a.Array.each(b,function(b){var d=b.backendId;if(a.Lang.isValue(d)){var f=b.socialConfig;switch(b.backendType){case a.Squarespace.FormStorageBackendType.EMAIL:c.emailConnect={connected:!0,email:d};break;case a.Squarespace.FormStorageBackendType.GOOGLE:c.googleDocsConnect={connected:!0,username:f.profileUserName,
socialConfig:f,spreadsheetName:b.config.spreadsheetName};break;case a.Squarespace.FormStorageBackendType.MAILCHIMP:c.mailchimpConnect={connected:!0,username:f.profileUserName,socialConfig:f,list:d};break;case a.Squarespace.FormStorageBackendType.SITE_USER:c.siteUserConnect={connected:!0}}}},this);return c},sanitizeDialogData:function(a){a=d.superclass.sanitizeDialogData.call(this,a);this._formCopy.set("name",a.formName);return this._formCopy.toJSON()},_saveFormStorageBackends:function(){var b=this.get("dialog"),
c=b.getData(),c={email:c.emailConnect,googleDocs:c.googleDocsConnect,mailchimp:c.mailchimpConnect,siteUser:c.siteUserConnect};this.get("model").saveStorageBackends(c,function(c){if(c){var d=c.googleDocsConnect,f=c.mailchimpConnect;c=c.emailConnect;var h,k;d?(h="Google Docs Connection Failure",k=d):f?(h="Mailchimp Connection Failure",k=f):c&&(h="Email Connection Failure",k=c);h?(new a.Squarespace.Widgets.Alert({"strings.title":h,"strings.message":k}),b.updateTitle(a.Squarespace.DialogStates.EDITING),
b.allowEditing()):new a.Squarespace.Widgets.Alert({"strings.title":"Form Storage Connection Failure","strings.message":"Unable to connect to form storage backend."})}else this.hide()},this)},_getFormId:function(){return this.get("model").get("id")},_getFormName:function(){return this.get("model").get("name")}},{ATTRS:{model:{value:null,validator:function(b){return a.instanceOf(b,a.Squarespace.Models.Form)}},dialogConfigStrings:{value:{title:"Edit Form",loadingText:"Editing Form..."}},useStorageBackends:{value:!1},
buttons:{value:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Delete Form"},{type:"saveAndClose",title:"Save"}]},dialogConfig:{getter:function(){var b=this.get("dialogConfigStrings"),b={name:"editForm",title:b.title,loadingText:b.loadingText,closeOthers:!1,overlay:0.7,style:"flyout",flyoutPointerDirection:"hidden",initialDataByReference:!0,width:850,height:454,buttons:this.get("buttons"),tabs:[{tabTitle:"Build",icon:"/universal/images-v6/icons/icon-form-16-light.png",fields:[{ctor:a.Squarespace.DialogFields.Text,
config:{name:"formName","strings.title":"Form Name"}},{type:"splitter",fields:[{type:"stack",name:"formBuilder",width:0.5,fields:[{ctor:a.Squarespace.DialogFields.HTML,config:{name:"formBuilderTitle",content:"<strong>Manage Form Fields</strong>"}},{ctor:a.Squarespace.DialogFields.FormBuilder,config:{name:"formFields"}}]},{type:"stack",name:"preview",width:0.5,fields:[{ctor:a.Squarespace.DialogFields.HTML,config:{name:"formPreviewTitle",content:"<strong>Live Form Preview</strong>"}},{ctor:a.Squarespace.DialogFields.FormPreview,
config:{name:"formPreview"}}]}]}]}]};this.get("useStorageBackends")&&b.tabs.push({tabTitle:"Storage",fields:[{ctor:a.Squarespace.DialogFields.EmailServiceConnect,config:{name:"emailConnect"}},{ctor:a.Squarespace.DialogFields.GoogleDocsServiceConnect,config:{name:"googleDocsConnect",getSpreadsheetName:a.bind(this._getFormName,this),oauthOwner:{name:"form",getId:a.bind(this._getFormId,this)}}},{ctor:a.Squarespace.DialogFields.MailChimpServiceConnect,config:{name:"mailchimpConnect",oauthOwner:{name:"form",
getId:a.bind(this._getFormId,this)}}},{ctor:a.Squarespace.DialogFields.SiteUserServiceConnect,config:{name:"siteUserConnect"}}]});return b}}}})},"1.0",{requires:"base squarespace-enum squarespace-ui-base squarespace-model-editor squarespace-models-form squarespace-dialog-text squarespace-dialog-html squarespace-dialog-form-builder squarespace-dialog-form-preview squarespace-dialog-email-service-connect squarespace-dialog-google-docs-service-connect squarespace-dialog-mailchimp-service-connect squarespace-dialog-site-user-service-connect squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-promises",function(a){function d(){}var b=a.namespace("Squarespace.Promises");b.all=function(){var b=new a.Array(arguments);return new a.Promise(function(d,g){var f=[],h=b.length,k=0,l=function(a){return function(b){k++;f[a]=b;k>=h&&d(f)}};a.Array.each(b,function(b,c){a.when(b).then(l(c),g)})})};b.resolve=function(a,b){return a.then(b)};b.reject=function(a,b){return a.then(d,b)};b.rejectWith=function(b){return a.Squarespace.Promises.create(function(a,d){d(b)})};b.finish=function(a,
b){return a.then(b,b)};b.chainFns=function(b,d){return function(){d=d||this;var g=0<b.length?b.shift().apply(d,arguments):a.when();return a.Array.reduce(b,g,function(b,c){return a.Squarespace.Promises.resolve(a.when(b),a.bind(c,d))})}};b.create=function(b,d){return new a.Promise(a.bind(b,d))}},"1.0",{requires:["promise"]});
YUI.add("squarespace-content-item-types-editor",function(a){a.namespace("Squarespace");a.Squarespace.ContentItemEditorVariants={MINIMAL:1,PANEL:2,DIALOG:3};a.Squarespace.ContentItemEditorFactory=new (a.Base.create("ContentItemEditorFactory",a.Base,[],{initializer:function(){this.EDITORS_BY_RECORDTYPE={};this.EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.TEXT]=a.Squarespace.ContentItemEditor.Text;this.EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.IMAGE]=a.Squarespace.ContentItemEditor.Image;this.EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.QUOTE]=
a.Squarespace.ContentItemEditor.Quote;this.EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.LINK]=a.Squarespace.ContentItemEditor.Link;this.EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.VIDEO]=a.Squarespace.ContentItemEditor.Video;this.EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.EVENT]=a.Squarespace.ContentItemEditor.Event;this.EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.GALLERY]=a.Squarespace.ContentItemEditor.Gallery;this.EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.AUDIO]=a.Squarespace.ContentItemEditor.Audio;
this.EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.KBARTICLE]=a.Squarespace.ContentItemEditor.KBArticle;this.MINIMAL_EDITORS_BY_RECORDTYPE={};this.MINIMAL_EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.IMAGE]=a.Squarespace.ContentItemEditor.ImageMinimal;this.MINIMAL_EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.VIDEO]=a.Squarespace.ContentItemEditor.VideoMinimal;this.PRODUCT_EDITORS_BY_PRODUCTTYPE={};this.PRODUCT_EDITORS_BY_PRODUCTTYPE[a.Squarespace.ProductTypes.DIGITAL]=a.Squarespace.ContentItemEditor.ProductDigital;
this.PRODUCT_EDITORS_BY_PRODUCTTYPE[a.Squarespace.ProductTypes.PHYSICAL]=a.Squarespace.ContentItemEditor.ProductPhysical;this.PRODUCT_EDITORS_BY_PRODUCTTYPE[a.Squarespace.ProductTypes.SERVICE]=a.Squarespace.ContentItemEditor.ProductService;this.PANEL_EDITORS_BY_RECORDTYPE={};this.PANEL_EDITORS_BY_RECORDTYPE[a.Squarespace.RecordType.TEXT]=a.Squarespace.ContentItemEditor.TextPanel},getEditor:function(d,b){b=a.Lang.isObject(b)?b:{};var c,e=d.get("recordType");c=a.merge({variant:a.Squarespace.ContentItemEditorVariants.DIALOG},
b);if(c=c.variant===a.Squarespace.ContentItemEditorVariants.MINIMAL?this.MINIMAL_EDITORS_BY_RECORDTYPE[e]:c.variant===a.Squarespace.ContentItemEditorVariants.PANEL?this.PANEL_EDITORS_BY_RECORDTYPE[e]:e===a.Squarespace.RecordType.STORE_ITEM?this.PRODUCT_EDITORS_BY_PRODUCTTYPE[d.get("structuredContent").get("productType")]:this.EDITORS_BY_RECORDTYPE[e])return c;throw"No ContentItemEditor has been found for this item: "+e;}}))},"1.0",{requires:"squarespace-content-item-types-audio squarespace-content-item-types-event squarespace-content-item-types-gallery squarespace-content-item-types-image squarespace-content-item-types-kbarticle squarespace-content-item-types-link squarespace-content-item-types-product-digital squarespace-content-item-types-product-physical squarespace-content-item-types-product-service squarespace-content-item-types-quote squarespace-content-item-types-text squarespace-content-item-types-text-panel squarespace-content-item-types-video".split(" ")});
YUI.add("squarespace-variant-row",function(a){a.namespace("Squarespace");var d=function(b){var d=a.Node.create('<div class="attribute"></div>');b.render(d);d.setAttribute("name",b.get("name"));d.addClass("attribute-"+b.get("name"));return d},b=a.Squarespace.Widgets.VariantRow=a.Base.create("variantRow",a.Squarespace.SSWidget,[a.WidgetChild],{renderUI:function(){b.superclass.renderUI.call(this);var c=this.get("data"),d=this.get("contentBox");this._userAttributeInputs=[];var g=a.Node.create('<div class="variant-row"><div class="attributes"></div><div class="remove-variant"></div></div>');
g.one(".attributes");d.append(g);this._skuInput=new a.Squarespace.Widgets.Variants.VariantCellInput({name:"sku",data:c.sku});this._addSystemAttribute(this._skuInput);this._pricingInput=new a.Squarespace.Widgets.Variants.PricingInput({dialog:this.get("dialog"),name:"pricing",data:{price:c.price,salePrice:c.salePrice,onSale:c.onSale}});this._addSystemAttribute(this._pricingInput);this._stockInput=new a.Squarespace.Widgets.Variants.StockInput({dialog:this.get("dialog"),name:"stock",data:{qtyInStock:c.qtyInStock,
unlimited:c.unlimited}});this._addSystemAttribute(this._stockInput);this.get("isPhysical")&&(this._weightInput=new a.Squarespace.Widgets.Variants.VariantCellNumericInput({numericFormatterConfig:{postfixUnit:Static.SQUARESPACE_CONTEXT.websiteSettings.storeSettings.measurementStandard===a.Squarespace.MeasurementStandard.IMPERIAL?"lbs":"kg"},data:c.weight,name:"weight"}),this._addSystemAttribute(this._weightInput),this._dimensionsInput=new a.Squarespace.Widgets.Variants.DimensionsInput({data:{len:c.len,
width:c.width,height:c.height},dialog:this.get("dialog"),measurementStandard:this.get("measurementStandard"),name:"dimensions"}),this._addSystemAttribute(this._dimensionsInput));this.get("optionsList").each(this._addAttribute,this);this._refreshData()},bindUI:function(){b.superclass.bindUI.call(this);var c=this.get("boundingBox");c.plug(a.Squarespace.Animations.Expandable);this.get("optionsList").after("UserOption:optionNameChange",function(a){this._getAttributeElByName(a.prevVal).setAttribute("name",
a.newVal);this._refreshData()},this);this.get("optionsList").after("add",function(a){this._addAttribute(a.model);this._refreshData()},this);this.get("optionsList").after("remove",function(a){a=a.model;this._getAttributeElByName(a.get("optionName")).remove();this._userAttributeInputs.remove(a);this._refreshData()},this);c.one(".remove-variant").on("click",function(){this.fire("remove-requested")},this);this._skuInput.after("edit-next-row-requested",function(){this.fire("next-row-execute-requested",
{command:function(){var a=this._skuInput.get("contentBox").one("input");a.focus();a.select()}})},this);this._pricingInput.after("edit-next-row-requested",function(){this.fire("next-row-execute-requested",{command:function(){this._pricingInput.showFlyout()}})},this);this._stockInput.after("edit-next-row-requested",function(){this.fire("next-row-execute-requested",{command:function(){this._stockInput.showFlyout()}})},this);this.get("isPhysical")&&(a.Lang.isValue(this._dimensionsInput)&&this._dimensionsInput.after("edit-next-row-requested",
function(){this.fire("next-row-execute-requested",{command:function(){this._dimensionsInput.showFlyout()}})},this),this._weightInput.after("edit-next-row-requested",function(){this.fire("next-row-execute-requested",{command:function(){var a=this._weightInput.get("contentBox").one("input");a.focus();a.select()}})},this));this.after("variantCellInput:edit-next-row-requested",function(a){this.fire("next-row-execute-requested",{command:function(){var b=this._getAttributeElByName(a.target.get("name")).one("input");
b.focus();b.select()}})},this);this.after("*:dataChange",function(a){a.target!=this&&this._refreshData()},this)},close:function(){var a=this.get("boundingBox");a.on("closed",function(){this.fire("removed")},this);a.hide()},getError:function(b){var d=this.get("data");return d.onSale&&0>=d.salePrice?{inputEl:this._pricingInput.get("contentBox"),message:"Sale price must be greater than 0 for "+d.sku}:!d.onSale&&0===d.price?{inputEl:this._pricingInput.get("contentBox"),message:"Price must be greater than 0 for "+
d.sku}:""===d.sku.trim()?{inputEl:this._skuInput.get("contentBox"),message:"SKU cannot be left blank."}:60<d.sku.length?{inputEl:this._skuInput.get("contentBox"),message:"SKU is too long."}:a.Lang.isValue(b[d.sku])?{inputEl:this._skuInput.get("contentBox"),message:d.sku+" is not a unique SKU."}:!d.unlimited&&0>d.qtyInStock?{inputEl:this._stockInput.get("contentBox"),message:d.sku+" cannot have negative stock."}:d.price<=d.salePrice?{inputEl:this._pricingInput.get("contentBox"),message:"Sale price must be less than standard price."}:
null},_refreshData:function(b){b=this._pricingInput.get("data");var d=this._stockInput.get("data"),g={sku:this._skuInput.get("data"),price:b.price,salePrice:b.salePrice,onSale:b.onSale,qtyInStock:d.qtyInStock,unlimited:d.unlimited,attributes:{}};this.get("isPhysical")&&(b=a.Lang.isValue(this._dimensionsInput)?this._dimensionsInput.get("data"):{len:1,width:1,height:1},g=a.merge(g,{weight:this._weightInput.get("data"),len:b.len,width:b.width,height:b.height}));this.get("optionsList").each(function(a){a=
a.get("optionName");var b=this._getAttributeElByName(a);g.attributes[a]=b.one("input").get("value")},this);this.set("data",g)},_getAttributeElByName:function(a){var b;this.get("contentBox").all(".attribute").each(function(d){d.getAttribute("name")===a&&(b=d)});return b},_addSystemAttribute:function(a){this.get("contentBox").one(".attributes").append(d(a));a.addTarget(this,{emitFacade:!0})},_addAttribute:function(b){var d=this.get("contentBox").one(".attributes"),g=b.get("optionName");b=new a.Squarespace.Widgets.Variants.VariantCellInput({name:b.get("optionName"),
userOption:b,data:this.get("data.attributes")[g]});var f=a.Node.create('<div class="attribute"></div>');b.render(f);f.setAttribute("name",b.get("name"));f.setAttribute("name",g);d.append(f);b.addTarget(this,{emitFacade:!0});this._userAttributeInputs.push(b)}},{CSS_PREFIX:"sqs-variant-row",ATTRS:{data:{value:null},optionsList:{value:null},dialog:{value:null},isPhysical:{value:!0},measurementStandard:{value:null}}})},"1.0",{requires:"base node widget-child squarespace-ss-widget squarespace-basic-check squarespace-animations squarespace-plugin-money-formatter squarespace-plugin-numeric-formatter squarespace-plugin-pulsewarn squarespace-variant-row-inputs".split(" ")});
YUI.add("squarespace-widgets-website-list",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.WebsiteList=a.Base.create("WebsiteList",a.Squarespace.Widgets.ModelList,[a.WidgetChild],{syncUI:function(){d.superclass.syncUI.call(this);var b=this.get("strings.title");a.Lang.isString(b)&&this.get("contentBox").insert(a.Node.create('<div class="list-title">'+b+"</div>"),0)},bindUI:function(){this.after("selectionChange",function(b){b=b.newVal;a.Lang.isNull(b)?this.set("selectedWebsite",
null):this.set("selectedWebsite",b.get("model"))},this)}},{CSS_PREFIX:"sqs-website-list",ATTRS:{selectedWebsite:{value:null},defaultChildType:{value:a.Squarespace.Widgets.Website}}})},"1.0",{requires:["base","squarespace-widgets-website","squarespace-widgets-model-list","widget-child"]});
YUI.add("squarespace-model-editor",function(a){a.Squarespace.ModelEditorDialog=a.Base.create("ModelEditorDialog",a.Base,[],{initializer:function(){this.saving=!1;this.publish("nonSavingClose",{emitFacade:!0});var d=this.get("dialog");this.on("visibleChange",function(b){if("dialog"!==b.source&&b.newVal!=b.prevVal){var c=this.get("dialogConfig");d.detachAll(this.get("id")+"|*");a.detachAll(this.get("id")+"|*");if(!c)throw"You need a DialogConfig for ModelEditorDialog to work!";b.newVal?this._showDialog():
this._hideDialog()}},this);this.on("modelChange",function(a){a.prevVal&&a.prevVal.detachAll(this.get("id")+"|*")},this);d.on("send-requested",this._onSendRequested,this);d.on("close",function(){this.saving||this.fire("nonSavingClose")},this);d.on(["close","dismiss"],function(a){this.set("visible",!1,{source:"dialog"})},this)},destructor:function(){this.get("visible")&&this.set("visible",!1)},_onSendRequested:function(d){d=this.get("dialog");var b=this.validateFields();a.Lang.isValue(b)?d.showErrors(b):
(this.saving=!0,this.save())},_showDialog:function(){var d=this.get("dialog"),b=this.get("dialogConfig"),b=a.Squarespace.ObjectBuilder.make(a.clone(b,this),this.get("dialogConfigContext"),this.getTemplateContext()),c=this.get("parentDialog");a.Lang.isValue(c)&&(b.parentDialog=c);d.setParams(b);d.setInitialData(this.getDialogData());d.show({anchor:this.get("anchorNode")})},_hideDialog:function(){this.get("model").detachAll(this.get("id")+"|*");this.get("dialog").params.discardChangesConfirmation=!1;
this.get("dialog").close()},validateFields:function(){var a=this.get("dialog").getErrors();return 0===a.errors?null:a.errorSet},save:function(d,b,c){d=d||{};var e=this.get("dialog"),g=this.get("model"),f=g.getAttrs();g.setAttrs(this.sanitizeDialogData(e.getData()));g.save(d,a.bind(function(d,e){d&&e instanceof XMLHttpRequest&&(d=a.merge(d,JSON.parse(e.response)));this._saveResponseHandler(d,e,f,b,c)},this))},autoSave:function(a){a=a||{};var b=this.get("model");b.setAttrs(this.sanitizeDialogData(this.get("dialog").getData()));
b.autoSave(a)},_saveResponseHandler:function(d,b,c,e,g){b=this.get("dialog");var f=this.get("model");d?(d.errors?b.showErrors(d.errors):"4"===String(d.code).charAt(0)&&d.message?(new a.Squarespace.Widgets.Alert({"strings.title":"Error Saving","strings.message":d.message}),b.allowEditing()):(new a.Squarespace.SystemError("Something Went Wrong",d,"json")).show(),f.setAttrs(c)):(e&&e(),g||this.hide());this.saving=!1},getTemplateContext:function(){return this.get("model")},getDialogData:function(){return this.get("model").toJSON()},
sanitizeDialogData:function(a){return a},show:function(){this.set("visible",!0)},hide:function(){this.set("visible",!1)}},{ATTRS:{model:{},dialog:{readOnly:!0,valueFn:function(){return new a.Squarespace.EditingDialog}},dialogConfig:{},dialogConfigContext:{value:{}},anchorNode:{value:null},visible:{value:!1},parentDialog:{value:null}}});a.namespace("Squarespace.ModelEditorPlugins");a.Squarespace.ModelEditorPlugins.AutoSave=a.Base.create("ModelEditorPluginAutoSave",a.Plugin.Base,[],{initializer:function(){this.afterHostMethod("_showDialog",
function(){a.later(5E3,this,this.requestAutoSave)},this);var d=a.bind(function(){this._autoSaveRequest&&(this._autoSaveRequest.cancel(),this._autoSaveRequest=null)},this);this.beforeHostMethod("_hideDialog",d,this);this.beforeHostMethod("autoSave",function(){this.get("host").get("model").once("save",function(){d();this._autoSaving=!1},this)},this)},requestAutoSave:function(){!this._autoSaveRequest&&!this._autoSaving&&(this._autoSaveRequest=a.later(1E3,this,function(){this.get("host").get("dialog").isVisible()?
(this._autoSaving=!0,this.get("host").autoSave()):this._autoSaveRequest.cancel()}))}},{NS:"autoSavePlugin"});a.Squarespace.ModelEditorPlugins.LoadBeforeShowing=a.Base.create("ModelEditorPluginLoadBeforeShowing",a.Plugin.Base,[],{initializer:function(){var d=this.get("host"),b=d.get("dialog");this.afterHostMethod("_showDialog",function(){b.updateTitle(a.Squarespace.DialogStates.LOADING);b.showSaveOverlay();d.get("model").onceAfter(this.get("id")+"|load",function(){b.setInitialData(d.getDialogData());
b.setData(d.getDialogData());b.hideSaveOverlay();b.clearEdited()},this);d.get("model").load()},this)}},{NS:"loadBeforeShowing"})},"1.0",{requires:"plugin squarespace-dialog squarespace-settings-tabbed-panel squarespace-object-builder squarespace-ss-widget squarespace-ui-base squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-block-posts-by",function(a){var d=a.namespace("Squarespace.Block").PostsByBase=a.Base.create("block-posts-by",a.Squarespace.Block.ModelSyncBase,[],{initializer:function(){}},{MODEL:a.Squarespace.ContentModel.PostsByBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Dialog}},CSS_PREFIX:"sqs-block-posts-by"});a.namespace("Squarespace.Block").PostsByAuthor=a.Base.create("block-posts-by-author",d,[],{},{MODEL:a.Squarespace.ContentModel.PostsByAuthor,ATTRS:{type:{value:a.Squarespace.BlockType.POSTS_BY_AUTHOR},
editor:{value:a.Squarespace.Block.Editor.PostsByAuthor}},CSS_PREFIX:"sqs-block-postsbyauthor"});a.namespace("Squarespace.Block").PostsByTag=a.Base.create("block-posts-by-tag",d,[],{},{MODEL:a.Squarespace.ContentModel.PostsByTag,ATTRS:{type:{value:a.Squarespace.BlockType.POSTS_BY_TAG},editor:{value:a.Squarespace.Block.Editor.PostsByTag}},CSS_PREFIX:"sqs-block-postsbytag"});a.namespace("Squarespace.Block").PostsByCategory=a.Base.create("block-posts-by-category",d,[],{},{MODEL:a.Squarespace.ContentModel.PostsByCategory,
ATTRS:{type:{value:a.Squarespace.BlockType.POSTS_BY_CATEGORY},editor:{value:a.Squarespace.Block.Editor.PostsByCategory}},CSS_PREFIX:"sqs-block-postsbycategory"});a.namespace("Squarespace.Block").PostsByMonth=a.Base.create("block-posts-by-month",d,[],{},{MODEL:a.Squarespace.ContentModel.PostsByMonth,ATTRS:{type:{value:a.Squarespace.BlockType.POSTS_BY_MONTH},editor:{value:a.Squarespace.Block.Editor.PostsByMonth}},CSS_PREFIX:"sqs-block-postsbymonth"})},"1.0",{requires:["base","model","squarespace-block-posts-by-editor",
"squarespace-block-posts-by-model"]});
YUI.add("squarespace-block-collection-link",function(a){var d=a.namespace("Squarespace.Block").CollectionLink=a.Base.create("block-collection-link",a.Squarespace.Block.ModelSyncBase,[],{_renderSuccess:function(a){d.superclass._renderSuccess.call(this,a);this._plugImageLoader()}},{CSS_PREFIX:"sqs-block-collectionlink",ATTRS:{editor:{value:a.Squarespace.Block.Editor.CollectionLink},type:{value:a.Squarespace.BlockType.COLLECTION_LINK},defaultContentModel:{value:{linkTitle:"",linkTarget:"",newWindow:!1}}}})},
"1.0",{requires:["squarespace-enum","squarespace-image-loader","squarespace-block-base-modelsync","squarespace-block-collection-link-editor"]});
YUI.add("squarespace-dialog-content-item-list-builder",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.ContentItemListBuilder=a.Base.create("ContentItemListBuilder",a.Squarespace.Widgets.DialogField2,[],{initializer:function(){this.publish("contentCleared",{emitFacade:!0});this._autoCompleteField=new a.Squarespace.DialogFields.AutoComplete({name:"contentItemSearch","strings.placeholder":"Search",requireListEntry:!0,acConfig:this._createAcConfig()})},renderUI:function(){d.superclass.renderUI.call(this);
var a=this.get("contentBox"),c=this._autoCompleteField;if(this.get("allowClear")){var e=a.appendChild('<div class="input-container"></div>');c.render(e);this._clearContentButton=e.appendChild('<div class="clear-content-wrapper"><div class="clear-content">Clear</div></div>').one(".clear-content")}else c.render(a);this._listContainer=a.appendChild('<div class="list-container"></div>');this._setupDragAndDrop()},bindUI:function(){d.superclass.bindUI.call(this);var b=this._autoCompleteField,c=this.get("data");
b.after("select",function(d){d=d.data;a.Lang.isValue(d)&&(b.clear(),c.add(d))},this);this.get("contentBox").delegate("click",function(a){a.halt();c.remove(a.target.ancestor(".content-item-wrapper").getData("contentItem"))},".remove-content-item",this);c.after("add",function(a){a.onReorder||this._addContentItemNode(a.model)},this);c.after("remove",function(a){a.onReorder||this._removeContentItemNode(a.model)},this);c.after("reset",this._clearContentItemNodes,this);if(this.get("allowClear"))this._clearContentButton.on("click",
this._confirmAndClear,this);this._ddReorder.after("reordered",function(a){this._reorderContentItem(a.oldIndex,a.newIndex)},this)},syncUI:function(){d.superclass.syncUI.call(this);this._listContainer.empty();this.get("data").each(function(a){this._addContentItemNode(a,!0)},this)},focus:function(){this._autoCompleteField.focus()},clear:function(){this._autoCompleteField.clear()},_addContentItemNode:function(b,c){var d=a.Node.create(a.Lang.sub('<div class="content-item-wrapper transparent"><div class="content-item">{title}<div class="remove-content-item">&times;</div></div></div>',
{id:b.get("id"),title:b.get("title")}));d.setData("contentItem",b);this._listContainer.append(d);c?d.removeClass("transparent"):a.later(100,this,function(){d.removeClass("transparent")});this._ddDelegate.syncTargets()},_removeContentItemNode:function(a){var c;this.get("contentBox").all(".content-item-wrapper").some(function(d){if(d.getData("contentItem")===a)return c=d,!0});c&&(c.remove(!0),this._ddDelegate.syncTargets())},_reorderContentItem:function(a,c){var d=this.get("data");d.add(d.remove(a,
{onReorder:!0}),{index:c,onReorder:!0})},_clearContentItemNodes:function(){this._listContainer.empty()},_confirmAndClear:function(){(new a.Squarespace.Widgets.Confirmation({"strings.title":"Clear Content","strings.message":"Are you sure you wish to clear this topic's content? This will reset the topic to its initial state."})).on("confirm",function(){this.get("data").reset();this.fire("contentCleared")},this)},_createAcConfig:function(){var b;b="?q={query}"+a.Lang.sub("&fields={fields}&collectionType={collectionType}&recordType={recordType}",
{fields:this.get("searchFields").join(","),collectionType:this.get("collectionType"),recordType:this.get("recordType")});return{source:this._createDataSource(),requestTemplate:b,resultTextLocator:"title",resultFormatter:function(b,d){return a.Array.map(d,function(a){return"<div>"+a.raw.title+"</div>"})}}},_createDataSource:function(){var b=new a.DataSource.IO({source:"/api/content-items/search"});b.plug(a.Plugin.DataSourceJSONSchema,{schema:{resultListLocator:""}});return b},_setupDragAndDrop:function(){var b=
this._listContainer,c=(this._ddDelegate=new a.DD.Delegate({container:b,nodes:".content-item-wrapper:not(.yui3-dd-super-proxy-clone)",target:!0})).dd;c.set("groups",[this.get("id")]);this._ddReorder=c.plug(a.Squarespace.DDReorder,{container:b,nodes:".content-item-wrapper:not(.yui3-dd-super-proxy-clone)"}).ddreorder;c.plug(a.Plugin.DDConstrained,{constrain:b,stickY:!0});c.plug(a.Plugin.DDNodeScroll,{node:b,horizontal:!1,scrollDelay:100})}},{CSS_PREFIX:"sqs-content-item-list-builder",ATTRS:{data:{valueFn:function(){return new a.ModelList({model:a.Squarespace.Models.ContentItem})},
validator:a.Squarespace.AttrValidators.isInstanceOf(a.ModelList)},collectionType:{value:a.Squarespace.CollectionTypes.GENERIC,validator:function(b){if(a.Object.hasValue(a.Squarespace.CollectionTypes,b))return!0;console.error("ContentItemListBuilder: Invalid collectionType.");return!1},writeOnce:"initOnly"},recordType:{validator:function(b){if(a.Lang.isValue(b)){if(a.Object.hasValue(a.Squarespace.Enums.RecordType,b))return!0;console.error("ContentItemListBuilder: Invalid recordType.");return!1}console.error("ContentItemListBuilder: Missing attribute recordType.");
return!1}},allowClear:{value:!0,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},searchFields:{value:[],validator:a.Squarespace.AttrValidators.isArray}}})},"1.0",{requires:"base datasource model-list squarespace-dd-behaviors squarespace-ui-base squarespace-dialog-field-2 squarespace-dialog-auto-complete squarespace-attr-validators squarespace-content-item-types-enum-record-type squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-dialog-text-area-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-text-area.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};a="";var k,l=this.escapeExpression;if((f=d["if"].call(b,(k=b.strings,null==k||!1===k?k:k.title),{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,d;return c=""+('\n  <div class="title">'+l((d=(d=a.strings,null==d||!1===d?d:d.title),"function"===
typeof d?d.apply(a):d))+"</div>\n")},h),data:h}))||0===f)a+=f;a+='\n\n<textarea placeholder="'+l((k=(k=b.strings,null==k||!1===k?k:k.placeholder),"function"===typeof k?k.apply(b):k))+'">';(f=d.data)?f=f.call(b,{hash:{},data:h}):(f=b.data,f="function"===typeof f?f.apply(b):f);a+=l(f)+"</textarea>\n\n";if((f=d["if"].call(b,(k=b.strings,null==k||!1===k?k:k.description),{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,d;return c=""+('\n  <div class="description">'+l((d=(d=a.strings,null==
d||!1===d?d:d.description),"function"===typeof d?d.apply(a):d))+"</div>\n")},h),data:h}))||0===f)a+=f;return a+"\n"})})();a.Handlebars.registerPartial("dialog-text-area.html".replace("/","."),d.templates["dialog-text-area.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-fluent-confirmation",function(a){var d=a.namespace("Squarespace.Fluent"),b=function(b,c,d,e){b.on("confirm",a.bind.apply(this,[c,this].concat(e)));b.on("reject",a.bind(d,this,{cancel:!1}));b.on("cancel",a.bind(d,this,{cancel:!0}))},c=function(c,d,e){return new a.Promise(function(g,n){d=a.Lang.isObject(d)&&!a.Lang.isArray(d)?d:{};var p=new c(d);b(p,g,n,e)})},e=function(a){return function(b){return function(){var d=Array.prototype.slice.call(arguments,0);return c(a,b,d)}}},g=function(a){return function(b,
d){d=d?[d]:[];return c(a,b,d)}};d.Confirm=g(a.Squarespace.Widgets.Confirmation);d.Alert=g(a.Squarespace.Widgets.Alert);d.Inform=g(a.Squarespace.Widgets.Information);d.ShowLoading=g(a.Squarespace.Loading);d.DataConfirm=g(a.Squarespace.Widgets.DataConfirmation);d.Confirmation=e(a.Squarespace.Widgets.Confirmation);d.Alerting=e(a.Squarespace.Widgets.Alert);d.Information=e(a.Squarespace.Widgets.Information);d.Loading=e(a.Squarespace.Loading);d.DataConfirmation=e(a.Squarespace.Widgets.DataConfirmation);
d.TYPE=a.Squarespace.Widgets.Confirmation.TYPE;d.ANCHOR=a.Squarespace.Widgets.Confirmation.ANCHOR},"1.0",{requires:"promise squarespace-ui-base squarespace-widgets-alert squarespace-widgets-confirmation squarespace-widgets-data-confirmation squarespace-widgets-information".split(" ")});
YUI.add("squarespace-wysiwyg",function(a){a.namespace("Squarespace");var d="field-wysiwyg";a.Squarespace.DialogFieldGenerators.wysiwyg=Class.extend(a.Squarespace.DialogField,{initialize:function(b,c,d){this.defaultEditor=a.Squarespace.Utils.isCKEditorEnabled()?"CKEDITOR":"WYSIWYG";this._super(b,c,d);this.events=[];this.containerHeight=this.config.height||null;this.containerWidth=this.config.width||null;this.tabIndex=d.getNextTabIndex();this._preventThrottling=b.preventThrottling;if(d=this.config.className)this.className=
d;this.viewMode="box-view";this.config.pageview&&(this.viewMode="page-view");this.menuConfig=b.menuConfig||"full";this.menuConfigs={full:{wysiwyg:[{cmd:"bold",title:"Bold",type:"button"},{cmd:"italic",title:"Italic",type:"button"},{type:"separator"},{cmd:"h1",title:"H1",type:"button"},{cmd:"h2",title:"H2",type:"button"},{cmd:"h3",title:"H3",type:"button"},{type:"separator"},{cmd:"link",title:"Link",type:"button"},{cmd:"blockquote",title:"Block Quote",type:"button"},{cmd:"removeformat",title:"Remove Formatting",
type:"button"},{type:"separator"},{cmd:"unorderedlist",title:"Unordered List",type:"button"},{cmd:"orderedlist",title:"Ordered List",type:"button"},{cmd:"outdent",title:"Outdent",type:"button"},{cmd:"indent",title:"Indent",type:"button"},{type:"container",style:"float: right;",contents:[{cmd:"undo",title:"Undo",type:"button"},{cmd:"redo",title:"Redo",type:"button"},{type:"button",cmd:"fullscreen",title:"fullscreen"}]}],other:[{cmd:"bold",title:"Bold",type:"button"},{cmd:"italic",title:"Italic",type:"button"},
{cmd:"link",title:"Link",type:"button"},{type:"separator"},{cmd:"h1",title:"H1",type:"button"},{cmd:"h2",title:"H2",type:"button"},{cmd:"h3",title:"H3",type:"button"},{cmd:"blockquote",title:"Block Quote",type:"button"},{type:"separator"},{cmd:"unorderedlist",title:"Unordered List",type:"button"},{cmd:"orderedlist",title:"Ordered List",type:"button"},{type:"container",style:"float: right;",contents:[{cmd:"undo",title:"Undo",type:"button"},{cmd:"redo",title:"Redo",type:"button"},{type:"button",cmd:"fullscreen",
title:"fullscreen"}]}],layout:[{cmd:"insertblock",title:"Insert Block",type:"button"},{cmd:"fullscreen",title:"fullscreen",type:"button"}]},code:{wysiwyg:[],code:[{cmd:"sourcecode",title:"Show Source",type:"button",html:"Display Source"},{type:"container",style:"float: right",contents:[{type:"select",title:"Editor Mode",selected:"htmlmixed",options:{css:"CSS",htmlmixed:"HTML",javascript:"Javascript",markdown:"Markdown","null":"Plain Text"}}]}]},markdown:{wysiwyg:[],markdown:[{cmd:"bold",title:"Bold",
type:"button"},{cmd:"italic",title:"Italic",type:"button"},{cmd:"link",title:"Link",type:"button"},{type:"separator"},{cmd:"h1",title:"H1",type:"button"},{cmd:"h2",title:"H2",type:"button"},{type:"separator"},{cmd:"blockquote",title:"Block Quote",type:"button"},{cmd:"unorderedlist",title:"Unordered List",type:"button"},{cmd:"orderedlist",title:"Ordered List",type:"button"}]},small:{wysiwyg:[{cmd:"bold",title:"Bold",type:"button"},{cmd:"italic",title:"Italic",type:"button"},{cmd:"link",title:"Link",
type:"button"}],other:[{cmd:"bold",title:"Bold",type:"button"},{cmd:"italic",title:"Italic",type:"button"},{cmd:"link",title:"Link",type:"button"}],layout:[{cmd:"insertblock",title:"Insert Block",type:"button"},{type:"container",style:"float: right;",contents:[{type:"button",cmd:"fullscreen",title:"fullscreen"}]}]},"ultra-small":{wysiwyg:[{cmd:"bold",title:"Bold",type:"button"},{cmd:"italic",title:"Italic",type:"button"},{cmd:"link",title:"Link",type:"button"}],other:[{cmd:"bold",title:"Bold",type:"button"},
{cmd:"italic",title:"Italic",type:"button"},{cmd:"link",title:"Link",type:"button"}]}};if("layout"==this.config.engine)this.modes={layout:this._loadLayout},this.mode="layout";else if("code"==this.config.engine||"markdown"==this.config.engine)this.modes={source:this._loadTextEditor},this.mode="source";else{this.modes={wysiwyg:this._loadVisualEditor,markdown:this._loadTextEditor,html:this._loadTextEditor,source:this._loadTextEditor};if("html"===this.mode||"markdown"===this.mode)this.mode="source";this.mode=
this.mode}this.modeRenderers={wysiwyg:this._visualRender,markdown:this._textEditorRender,html:this._textEditorRender,source:this._textEditorRender,layout:this._layoutRender};this.modeLinkHandlers={wysiwyg:this._visualOnLinkButtonClick,markdown:this._textEditorOnLinkButtonClick,html:this._textEditorOnLinkButtonClick,source:this._textEditorOnLinkButtonClick,layout:this._layoutOnLinkButtonClick};this.modeShowHandlers={wysiwyg:this._visualShow,markdown:this._textEditorShow,html:this._textEditorShow,source:this._textEditorShow,
layout:this._layoutEditorShow};this.modeEls={};this.config.titleStyle||(this.config.titleStyle="top");this.initialFieldData=c[this.config.name];b=this._determineModeContent(this.initialFieldData);this.mode=b.mode;this.codeMode=b.codeMode;this.isSource=b.isSource;b=b.content||this.config.defaultValue;this.modes[this.mode]||("layout"===this.mode?this.mode="wysiwyg":(console.warn("Requested "+this.mode+", which wasn't available. Converting to layout."),this.mode="layout"),b=b||this.config.defaultValue);
"wysiwyg"==this.mode&&"CKEDITOR"==this.defaultEditor&&this.containerHeight&&(this.containerHeight+=55);this.render();this.loadEditor(b);this.hookEvents();this.preCloseEvent=this.dialog.on("preClose",function(){this.dialog.fire("datachange",this)},this);this.publish("maximize-started",{broadcast:2});this.publish("maximize-complete",{broadcast:2});this.publish("minimize-started",{broadcast:2});this.publish("minimize-complete",{broadcast:2})},focus:function(){this.ckEditor?this.ckEditor.focus():this.editor.focus()},
didDataChange:function(){return this.ckEditor?this.ckEditor.changed:(a.Lang.isObject(this.initialFieldData)?this.initialFieldData.html:"")!==this.getValue().html},getTakenHeight:function(){return"wysiwyg"===this.mode?-1:this.html.get("offsetHeight")-60},switchMode:function(b){function c(){var a=this.isFullscreen();this.ckEditor?this.ckEditor.destroy():this.editor.destroy();this.destroyEvents();this.mode=b;this.render();this.html.one("."+d);var c=e.getStyle("width");c&&this.html.setStyle("width",c);
e.replace(this.html);this.select.setValue(b);this.loadEditor(f);this.hookEvents();this.show();a&&(this.addFullscreenButtons(),this.html.addClass("fullscreenEditor"));this.adjustHeight();this.dialog.fire("datachange",this)}var e=this.html,g=this._determineModeContent(this.getValue()),f=g.content,h=!1,f=this.generateHTML(f);if(!this._isContentEmpty(f)){if("layout"===g.mode||"layout"===b)h=!0;"markdown"===b&&(h=!0)}if("layout"===g.mode||"layout"===b)f=null;h&&null===f?(this.select.setValue(this.mode),
(new a.Squarespace.Widgets.Confirmation({"strings.title":"Change Mode / Data Loss","strings.message":"When switching to this mode you will lose all your previous data."})).on("confirm",function(){c.call(this);this.select.setValue(b)},this)):h?(this.select.setValue(this.mode),(new a.Squarespace.Widgets.Confirmation({"strings.title":"Change Mode","strings.message":"You might lose special formatting switching to this mode."})).on("confirm",function(){c.call(this);this.select.setValue(b)},this)):c.call(this)},
_isContentEmpty:function(a){if(null===a||"string"===typeof a&&0>=a.trim().length)return!0;if("object"===typeof a){for(var c in a.containers)if(a.containers.hasOwnProperty(c))return!1;return!0}return!1},loadEditor:function(a){this.modes[this.mode].apply(this,[a])},_determineModeContent:function(a){a||(a={});if(a.layout)return{content:a.layout,mode:"layout"};a.wysiwyg&&a.wysiwyg.markdown&&(a.wysiwyg.source=a.wysiwyg.markdown,a.wysiwyg.markdown="",a.wysiwyg.mode="markdown");return a.wysiwyg?{content:a.wysiwyg.source||
a.html,codeMode:a.wysiwyg.mode,isSource:a.wysiwyg.isSource,mode:"source"}:{content:a.html,mode:"wysiwyg"}},_loadVisualEditor:function(b){if("CKEDITOR"==this.defaultEditor){var c=this.control.getDOMNode().ownerDocument,c=c.defaultView||c.parentWindow,d={};c.CKEDITOR.editorConfig(d);d.uiColor="Light";this.html.one(".field-wysiwyg-control-wrapper").hide();this.setHeight(this.containerHeight);switch(this.menuConfig){case "small":case "ultra-small":d.toolbar=[{name:"left",items:"Undo Redo - Bold Italic sqslink - PasteText RemoveFormat".split(" ")},
{name:"right",items:["Maximize"]}];break;default:d.toolbar=[{name:"left",items:"Undo Redo - Bold Italic sqslink - Format Blockquote NumberedList BulletedList Outdent Indent - PasteText RemoveFormat".split(" ")},{name:"right",items:["Maximize"]}]}this.ckEditor=c.CKEDITOR.replace(this.control.getDOMNode(),d);this.ckEditor.on("contentDom",function(){this.ckEditor.resize(null,this.containerHeight-30,!0)},this);this.ckEditor.setData(b||"");this.events.push(this.ckEditor.on("change",function(){this.ckEditor.changed=
!0;this.onEditorContentChange()},this));this.ckEditor.on("focus",this._onfocus,this);this.ckEditor.on("blur",this._onblur,this)}else this.editor=new a.Squarespace.VisualEditor({el:this.control,mode:this.mode,tabIndex:this.tabIndex}),this.editor.on("input",this.onEditorContentChange,this),this.editor.el.editor.on("containersChange",this._containersHandler,this),this.events.push(this.dialog.on("send-requested",function(){this.editor.changed&&(this.editor.save(),this.edited=!1)},this)),this.events.push(this.editor.on("change",
this.onEditorContentChange,this)),this.editor.setContent(b),this._initializeLinkFlyout(),this.control.on("wysiwyg|focus",this._onfocus,this),this.control.on("wysiwyg|blur",this._onblur,this)},_initializeLinkFlyout:function(){this._linkEdit=new a.Squarespace.Flyout.LinkEdit;this.editor._linkEdit=this._linkEdit;this._linkEdit.on("dataChange",function(a){a=a.newVal;var c=a.anchorNode;c&&(c.setAttribute("href",a.linkUrl),a.newWindow?c.setAttribute("target","_blank"):c.removeAttribute("target"));this.editor._onContentChange()},
this);this._linkEdit.on("open",function(){this.editor.saveSelection()},this);this._linkEdit.on("close",function(a){this.editor.restoreSelection()},this);this._linkEdit.on("unlink",function(b){a.Squarespace.EditorBase.unwrap(b.anchorNode)})},_loadTextEditor:function(b){this.editor="markdown"===this.config.engine?new a.Squarespace.MarkdownEditor({el:this.control,mode:this.codeMode,isSource:this.isSource,tabIndex:this.tabIndex}):new a.Squarespace.TextEditor({el:this.control,mode:this.codeMode,isSource:this.isSource,
tabIndex:this.tabIndex});this.editor.on("modeChange",function(a){this.codeMode=a.newVal;var b=this.menuEl.one("select");b&&(b.set("value",a.newVal),b=this.menuEl.one(".field-wysiwyg-tool-sourcecode"),"htmlmixed"===a.newVal||"markdown"===a.newVal?b.removeAttribute("disabled"):(this.isSource=!0,b.addClass("active"),b.setAttribute("disabled","disabled")),this.dialog.fire("datachange",this))},this);this.editor.setContent(b);this.editor.editor.on("change",a.bind(this.onEditorContentChange,this));this.control.on("wysiwyg|focus",
this._onfocus,this);this.control.on("wysiwyg|blur",this._onblur,this);this.events.push(this.menuEl.delegate("click",function(a){a.currentTarget._node.disabled||(this.isSource=!this.isSource,a.currentTarget.toggleClass("active",this.isSource),this.dialog.fire("datachange",this))},".field-wysiwyg-tool-sourcecode",this));this.events.push(this.menuEl.delegate("change",function(a){this.editor.set("mode",a.currentTarget.get("value"))},"select",this));(b=this.menuEl.one("select"))&&b.set("value",this.codeMode);
if(b=this.menuEl.one(".field-wysiwyg-tool-sourcecode"))"htmlmixed"===this.codeMode||"markdown"===this.codeMode?b.removeAttribute("disabled"):(this.isSource=!0,b.setAttribute("disabled","disabled")),b.toggleClass("active",this.isSource)},_onblur:function(){if(this.ckEditor){var a=this.ckEditor.getSelection().getNative();"none"!==a.type&&a.empty()}window.CONFIG_PANEL&&(window.CONFIG_PANEL.set("allowContextMenu",!1),(a=this.control.ancestor(".field-rhs"))&&a.removeClass("focused"))},_onfocus:function(a){window.CONFIG_PANEL&&
(window.CONFIG_PANEL.set("allowContextMenu",!0),(a=this.control.ancestor(".field-rhs"))&&a.addClass("focused"))},_loadLayout:function(b){var c={node:this.control,content:b,parentDialog:this.dialog,parentField:this,tabIndex:this.tabIndex};a.Lang.isString(b)&&(delete c.content,c.defaultHtml=b);this.editor=new a.Squarespace.LayoutEngine(c);this.events.push(this.dialog.on("send-requested",function(){this.editor.changed&&(this.editor.save(),this.edited=!1)},this));this.events.push(this.editor.on("change",
this.onEditorContentChange,this))},_onEditorContentChange:function(){this.adjustHeight();this.dialog.fire("datachange",this)},debounceOnEditorContentChange:a.Squarespace.debounce(function(a){a=a.that;this.throttleChangeFlag=!1;a._onEditorContentChange.apply(a)},200,"layout"===this.mode,"layout"===this.mode),onEditorContentChange:function(a){this.cachedValue=this.cachedContent=null;"fullscreen-view"===this.viewMode&&this.hideMenuBar(a);this._preventThrottling?this._onEditorContentChange():this.debounceOnEditorContentChange({that:this})},
render:function(){var b=this.modeRenderers[this.mode].apply(this),c=this.mode;"wysiwyg"===this.mode&&(c="visual");if("markdown"===this.mode||"html"===this.mode)c="code";this.modeEls[this.mode]=b;this.control=b.control;this.fieldTitleEl=b.title;this.menuElems=b.menu;this.menuEl=a.DB.DIV("field-wysiwyg-control clear",this.menuElems);this.html=a.DB.DIV("field-wrapper wysiwyg-field-wrapper clear "+this.config.style+" "+this.mode+"-mode mode-"+c+("CKEDITOR"===this.defaultEditor&&"wysiwyg"==this.mode?" ckenabled":
""),this.fieldTitleEl,a.DB.DIV("field-rhs",a.DB.DIV("field-wysiwyg-control-wrapper",this.menuEl),a.DB.DIV(d,this.control),this.config.description?a.DB.DIV("field-description-wrapper",a.DB.DIV("field-description",{html:this.config.description})):null));b=this.html.one("."+d);null!==this.containerHeight&&b.setStyle("height",this.containerHeight+"px");null!==this.containerWidth&&this.html.setStyle("width",this.containerWidth+"px")},hookEvents:function(){this.ckEditor||this.events.push(this.menuEl.delegate("click",
a.bind(function(b){var c=b.currentTarget.get("className");try{switch(c=c.substring(c.lastIndexOf("-")+1),c=-1!==c.indexOf(" ")?c.substring(0,c.indexOf(" ")):c,c){case "bold":this.editor.execCommand("bold");break;case "italic":this.editor.execCommand("italic");break;case "underline":this.editor.execCommand("underline");break;case "link":if("markdown"===this.config.engine)this.editor.execCommand("link");else this.onLinkButtonClick(b);break;case "unlink":this.editor.execCommand("unlink");break;case "unorderedlist":this.editor.execCommand("insertunorderedlist");
break;case "orderedlist":this.editor.execCommand("insertorderedlist");break;case "indent":this.editor.execCommand("indent");break;case "outdent":this.editor.execCommand("outdent");break;case "title":this.editor.execCommand("title");break;case "unimportant":this.editor.execCommand("unimportant");break;case "h1":this.editor.execCommand("heading","1");break;case "h2":this.editor.execCommand("heading","2");break;case "h3":this.editor.execCommand("heading","3");break;case "blockquote":this.editor.execCommand("blockquote");
break;case "removeformat":this.editor.execCommand("removeformat");this.editor.execCommand("removeformatblocks");break;case "insertblock":a.Squarespace.LayoutManager.addBlock(this.editor);break;case "undo":this.editor.execCommand("undo");break;case "redo":this.editor.execCommand("redo");break;case "fullscreen":this.toggleFullScreen(b);break;case "inverted":this.toggleInvertedStyle(b);break;case "widthsmall":this.setSmallWidth(b);break;case "widthmedium":this.setMediumWidth(b);break;case "widthlarge":this.setLargeWidth(b);
break}}catch(d){throw console.error("Error executing command",c,"Error was:",d),d;}finally{b.halt()}},this),".field-wysiwyg-tool"))},_containersHandler:function(b){for(var c in b.prevVal)if(c in b.newVal||a.one(".field-wysiwyg-tool-"+c).removeClass("active"),"link"==c&&(!b.newVal[c]||b.newVal[c]&&b.prevVal[c].getAttribute("href")!==b.newVal[c].getAttribute("href")))this._linkEdit.updateLink(),this._linkEdit.close(!0);for(c in b.newVal)c in(b.prevVal||[])||a.one(".field-wysiwyg-tool-"+c).addClass("active"),
"link"==c&&(!b.prevVal||!b.prevVal[c]||b.prevVal[c]&&b.prevVal[c].getAttribute("href")!==b.newVal[c].getAttribute("href"))&&this._linkEdit.openPrompt(b.newVal[c])},destroyEvents:function(){this.control.detach("wysiwyg|*");for(var a=0;a<this.events.length;++a){var c=this.events[a];c.detach?c.detach():c.removeListener&&c.removeListener()}this.events=[];this.debounceOnEditorContentChange&&this.debounceOnEditorContentChange.cancel&&this.debounceOnEditorContentChange.cancel()},onDataChanged:function(a){this.dialog.fire("datachange",
this)},getMode:function(){return this.mode},getContent:function(){return this.ckEditor?this.ckEditor.getData().replace(/(?:[ ]{2})|(?:\s{0,20}id="yui[^"]+")|(?:(\w?)\u200b(\w?))/g,""):this.editor.getContent()},cleanHTML:function(a){return!a?null:a.replace(RegExp("<p\\s+>","g"),"<p>")},getValue:function(){var a=this.getMode(),c=this.getContent(),d={};"layout"===a?(d.layout=c.layout,d.html=this.cleanHTML(c.html)||""):(d.source=c,d.isSource=this.isSource,d.mode=this.codeMode,d.engine=this.mode,d.rendered=
this.cleanHTML(this.generateHTML(c))||"");"wysiwyg"===d.engine&&(d.html=d.rendered,delete d.rendered);return d},generateHTML:function(b){var c=b;a.Lang.isFunction(this.config.preGenerateHTML)&&(c=this.config.preGenerateHTML(b));return this.isSource?(b=a.Node.create("<div></div>"),CodeMirror.runMode(c,this.codeMode,b._node),'<pre class="source-code">'+b.getContent()+"</pre>"):"markdown"===this.codeMode?a.Squarespace.Lang.markdownToHTML(c):c},setValue:function(a){a=this._determineModeContent(a);a.mode=
a.mode||"wysiwyg";this.mode!==a.mode&&this.switchMode(a.mode);this.isSource=a.isSource;this.codeMode=a.codeMode;this.ckEditor?this.ckEditor.setData(a.content||""):this.editor.setContent(a.content)},show:function(){this.modeShowHandlers[this.mode].apply(this);this.wasShown=!0;this.dialog.fire("currentMode",this.mode)},toggleInvertedStyle:function(){this.html.toggleClass("inverted");this.ckEditor?this.ckEditor.focus():this.editor.focus()},updateEditorWidth:function(){if(!this.ckEditor&&this.editor.setWidth&&
("html"===this.mode||"markdown"===this.mode)){var a=this.html.one("textarea").get("offsetWidth");this.editor.setWidth(a)}this.adjustHeight()},setSmallWidth:function(a){this.html.removeClass("width-large");this.html.addClass("width-small");this.updateEditorWidth();this.ckEditor?this.ckEditor.focus():this.editor.focus()},setMediumWidth:function(a){this.html.removeClass("width-small");this.html.removeClass("width-large");this.updateEditorWidth();this.ckEditor?this.ckEditor.focus():this.editor.focus()},
setLargeWidth:function(a){this.html.removeClass("width-small");this.html.addClass("width-large");this.updateEditorWidth();this.ckEditor?this.ckEditor.focus():this.editor.focus()},toggleFullScreen:function(b){this.menuHidden=!1;"undefined"!==typeof this.hideMenuEvent&&this.hideMenuEvent&&this.hideMenuEvent.detach();"undefined"!==typeof this.showMenuEvent&&this.showMenuEvent&&this.showMenuEvent.detach();b.stopPropagation();this.isFullscreen()?(this.fire("minimize-started"),a.Global.fire("minimize-started"),
this.recessTransition()):(this.dialog.activeFlyout&&(this.dialog.activeFlyout.field.closeFlyout(),this.dialog.activeFlyout=null),this.fire("maximize-started"),a.Global.fire("maximize-started"),this.expandTransition());this.ckEditor?this.ckEditor.focus():this.editor.focus()},expandDialogBox:function(){this.dialog.el&&(this.dialogOldStyle={top:this.dialog.el.getStyle("top"),left:this.dialog.el.getStyle("left"),height:this.dialog.el.getStyle("height"),width:this.dialog.el.getStyle("width")},this.dialog.el.setStyle("top",
"0px"),this.dialog.el.setStyle("left","0px"),this.dialog.el.setStyle("height","5000px"),this.dialog.el.setStyle("width","5000px"))},recessDialogBox:function(){this.dialog.el&&this.dialogOldStyle&&(this.dialog.el.setStyle("top",this.dialogOldStyle.top),this.dialog.el.setStyle("left",this.dialogOldStyle.left),this.dialog.el.setStyle("height",this.dialogOldStyle.height),this.dialog.el.setStyle("width",this.dialogOldStyle.width),delete this.dialogOldStyle)},recessTransition:function(){if(this.isExpanded){this.recessDialogBox();
this.isExpanded=this.dialog.params.disableSaveOverlay=!1;"undefined"!==typeof this.resizeEvent&&null!==this.resizeEvent&&(this.resizeEvent.detach(),this.resizeEvent=null);this.removeFullscreenButtons();var b=this.html.cloneNode(!0);b.removeClass("fullscreenEditor");b.one(".field-wysiwyg").setContent("");b.one(".field-wysiwyg").setStyle("background","white");var c=b.one(".field-lhs");c&&c.remove();(c=b.one(".field-description-wrapper"))&&c.remove();b.setStyle("position","fixed");b.setStyle("top",0);
b.setStyle("left",0);b.setStyle("z-index",3E5);b.setStyle("height",this.html.get("offsetHeight")+"px");b.setStyle("width",this.html.get("offsetWidth")+"px");b.setStyle("background","transparent");b.setStyle("padding","0");b.setStyle("overflow","hidden");this.events.push(b.on("click",function(a){a.stopPropagation()}));var e=a.DB.DIV("background",{style:"opacity: 1; background: black; position: fixed; top: 0px; left: 0px; height: 5000px; width: 5000px; z-index: 250000"});a.one("body").insert(b);a.one("body").insert(e);
c=this.html.getData("replaceNode");this.html.remove();this.html.setStyle("zIndex",null);c.replace(this.html);1>=a.all(".standard-dialog-wrapper .wysiwyg-field-wrapper.fullscreenEditor").size()&&a.one("body").removeClass("fullscreenEditor");this.viewMode="box-view";this.html.removeClass("fullscreenEditor");this.html.removeClass("inverted");this.html.one("."+d).setStyle("height",this.containerHeight);var c=this._anim({node:b,to:{top:this.html.one(".field-rhs").getY()-a.one(document.body).get("docScrollY")+
"px",height:this.originalTransData.height,left:this.html.one(".field-rhs").getX()-a.one(document.body).get("docScrollX")+"px",width:this.originalTransData.width},easing:"easeOutStrong",duration:0.3}),g=this._anim({node:e,from:{opacity:1},to:{opacity:0},duration:0.3,easing:"easeOutStrong"}),f=this._anim({node:b,to:{opacity:0},duration:0.3,easing:"easeOutStrong"});c.on("end",function(){g.run()},this);g.on("end",function(){e.remove();f.run()},this);f.on("end",function(){b.remove();this.fire("minimize-complete");
a.Global.fire("minimize-complete")},this);c.run();a.Squarespace.EscManager.removeTarget(this)}},expandTransition:function(){if(!this.isExpanded){this.isExpanded=this.dialog.params.disableSaveOverlay=!0;var b=this.html.one(".field-wysiwyg-control-wrapper").get("offsetHeight"),b=b+this.html.one(".field-wysiwyg").get("offsetHeight");this.originalTransData={top:this.html.one(".field-rhs").getY()-a.one(document.body).get("docScrollY")+"px",left:this.html.one(".field-rhs").getX()-a.one(document.body).get("docScrollX")+
"px",height:b+"px",width:this.html.one(".field-rhs").get("offsetWidth")+"px"};var c=this.html.cloneNode(!0);c.one(".field-wysiwyg").remove();var d=c.one(".field-lhs");d&&d.remove();(d=c.one(".field-description-wrapper"))&&d.remove();c.setStyle("position","fixed");c.setStyle("top",this.originalTransData.top);c.setStyle("left",this.originalTransData.left);c.setStyle("z-index",3E5);c.setStyle("height",b+"px");c.setStyle("width",this.originalTransData.width);c.setStyle("background","white");c.setStyle("padding",
"0");c.setStyle("opacity","1");(b=c.one(".field-rhs"))&&b.setStyle("height","100%");var g=a.DB.DIV("background",{style:"opacity: 0; background: black; position: fixed; top: 0px; left: 0px; height: 5000px; width: 5000px; z-index: 250000"}),b=a.one("body");b.insert(c);b.insert(g);b.addClass("fullscreenEditor");this.viewMode="fullscreen-view";var b=this._anim({node:g,to:{opacity:1},duration:0.3,easing:"easeOutStrong"}),f=this._anim({node:c,to:{top:"0px",height:this.html.get("winHeight")+"px",left:"0px",
width:this.html.get("winWidth")+"px"},easing:"easeOutStrong",duration:0.3}),h=this._anim({node:c,to:{opacity:0},duration:0.3,easing:"easeOutStrong"});b.on("end",function(){this.updateEditorWidth();this.addFullscreenButtons();f.run()},this);f.on("end",function(){this.adjustHeight();var b=a.DB.DIV("replaceNode");this.html.setData("replaceNode",b);this.html.replace(b);a.one("body").append(this.html);this.html.setStyle("zIndex",a.Squarespace.DIALOG_ZINDEX_BASE+10);a.Squarespace.EscManager.addTarget(this);
this.html.addClass("fullscreenEditor");this.resizeEvent=a.on("resize",this.fullScreenEditorResize,a.one(window),this);this.hideMenuEvent=this.dialog.on("keydown",this.hideMenuBar,this);this.events.push(this.hideMenuEvent);g.remove();this.expandDialogBox();h.run()},this);h.on("end",function(){this.fire("maximize-complete");a.Global.fire("maximize-complete");c.remove()},this);b.run()}},cancel:function(b){this.isExpanded&&(27===b.keyCode?this.toggleFullScreen(b):a.Squarespace.EscManager.addTarget(this))},
addFullscreenButtons:function(){if("layout"!==this.mode){var a=this._renderContainer({type:"container",contents:[{type:"separator"},{cmd:"inverted",title:"Inverted",type:"button"},{type:"separator"},{cmd:"widthsmall",title:"Small",type:"button"},{cmd:"widthmedium",title:"Medium",type:"button"},{cmd:"widthlarge",title:"Large",type:"button"}]});a.addClass("fullscreen-options");var c=this.html.one(".field-wysiwyg-control"),d=c.get("children");c.insert(a,d.size()-1)}},removeFullscreenButtons:function(){this.html.all(".fullscreen-options").remove()},
hideMenuBar:function(b){if(!(b&&60>=b.pageY)&&!this.menuHidden&&!("layout"===this.mode||"fullscreen-view"!==this.viewMode)){this.menuHidden=!0;b=this.html.one(".field-wysiwyg-control-wrapper");var c=this.dialog.el.one(".autosave-state");this.hideMenuEvent&&this.hideMenuEvent.detach();!b||!b._node||b.get("id")!==b._node.id?(console.log("no menu node"),this.hideMenuEvent.detach()):(this.hideMenuAnim=new a.Anim({node:b,to:{top:"-"+b.get("offsetHeight")},duration:0.3,easing:a.Easing.easeOutStrong}),this.hideMenuAnim.run(),
c&&c.setStyle("visibility","hidden"),this.showMenuEvent=a.one("window").on("mousemove",this.showMenuBar,this),this.events.push(this.showMenuEvent),this.showMenuEvent=a.one("body").on("mousemove",this.showMenuBar,this))}},showMenuBar:function(b){if(!(60<b.pageY)){"undefined"!==typeof this.hideMenuAnim&&this.hideMenuAnim&&this.hideMenuAnim.stop();b=this.html.one(".field-wysiwyg-control-wrapper");var c=this.dialog.el.one(".autosave-state");!b||!b._node||b.get("id")!==b._node.id?this.showMenuEvent.detach():
(this.showMenuEvent&&this.showMenuEvent.detach(),this.showMenuAnim=new a.Anim({node:b,to:{top:"0px"},duration:0.3,easing:a.Easing.easeOutStrong}),this.showMenuAnim.run(),c&&c.setStyle("visibility",""),this.showMenuEvent&&this.showMenuEvent.detach(),this.menuHidden=!1)}},fullScreenEditorResize:function(a){this.adjustHeight()},isFullscreen:function(){return"fullscreen-view"===this.viewMode?!0:!1},_visualShow:function(){this.events.push(a.one("body").on("click",this.onBodyClick,this));"page-view"===
this.viewMode&&!this.resizeEvent&&(this.resizeEvent=a.on("resize",this.adjustHeight,a.one(window),this))},_textEditorShow:function(){this.events.push(a.one("body").on("click",this.onBodyClick,this));"page-view"===this.viewMode&&!this.resizeEvent&&(this.resizeEvent=a.on("resize",this.adjustHeight,a.one(window),this))},_layoutEditorShow:function(){this.events.push(a.one("body").on("click",this.onBodyClick,this));this.resizeEvent=a.on("resize",this.adjustHeight,a.one(window),this)},getIdealColumnWidth:function(){var a=
this.editor.getTemplate(),c=this.html.get("offsetWidth")-130,c=c-(a.getColumns()-1)*a.getMarginWidth();return c/a.getColumns()},onLinkButtonClick:function(a){this.modeLinkHandlers[this.mode].apply(this,arguments)},_visualOnLinkButtonClick:function(a){this.ckEditor||(this.editor.saveSelection(),this.editor.execCommand("createLink"))},_textEditorOnLinkButtonClick:function(a){},_layoutOnLinkButtonClick:function(){},onBodyClick:function(a){a.target.ancestor(".field-wysiwyg-control-wrapper",!0)||"fullscreen-view"===
this.viewMode&&this.hideMenuBar(a)},getContentHeight:function(){return"html"===this.mode||"markdown"===this.mode?this.ckEditor?parseInt(this.ckEditor.ui.space("contents").getStyle("height"),10):this.editor.getContentHeight():-1},adjustHeight:function(){var b=this.html.one("."+d);if("fullscreen-view"===this.viewMode){var c=b.get("winHeight");b.setStyle("height",null)}else"page-view"===this.viewMode&&"layout"!==this.mode&&(c=b.get("winHeight"),b=a.one(".content-title").get("offsetHeight"),c=Math.max(c-
b-34-20,this.getContentHeight()),this.control.setStyle("height",c+"px"))},setHeight:function(a){a=parseInt(a,10);if("box-view"===this.viewMode){a-=this.menuEl.get("offsetHeight");a=this.ckEditor?a-3:a-30;var c=this.html.one("."+d);this.containerHeight=a;c.setStyle("height",this.containerHeight+"px")}},_renderTitle:function(){return this.config.title&&"top"==this.config.titleStyle?a.DB.DIV("field-lhs",{html:this.config.title}):null},_renderButton:function(b){return a.DB.BUTTON("field-wysiwyg-tool field-wysiwyg-tool-"+
b.cmd,{tabIndex:-1},a.DB.SPAN("icon",{html:b.html||"&nbsp;"}))},_renderModeSelector:function(b){if(this.modes.layout)return null;b={};for(var c in this.modes)b[c]={title:c.toUpperCase()};this.select=new a.Squarespace.DialogFieldGenerators.select({type:"select",width:70,name:"mode",defaultValue:"",options:b},{mode:this.mode},this.dialog);this.select.underlyingControl.setAttribute("tabindex",-1);this.events.push(this.select.on("change",function(){this.switchMode(this.select.getValue())},this));this.select.render();
return a.DB.DIV("sqs-mode-container",this.select.html)},_renderMenuSeparator:function(b){return a.DB.DIV("separator")},_renderContainer:function(b){var c=a.DB.DIV("sqs-container",{style:b.style||""});b=this._renderMenu(b.contents);for(var d=0;d<b.length;++d)c.append(b[d]);return c},_renderSelect:function(b){var c=a.DB.SELECT("field-wysiwyg-select",{tabindex:-1}),d;for(d in b.options){var g={value:d,html:b.options[d]};b.selected&&b.selected===d&&(g.selected="selected");c.appendChild(a.DB.OPTION("",
g))}return c},_visualRender:function(){return{control:"CKEDITOR"!==this.defaultEditor?a.DB.DIV("sqs-visual-edit",{id:"field-wysiwyg-editor-container"}):a.DB.TEXTAREA("sqs-visual-edit",{id:"field-wysiwyg-editor-container"}),title:this._renderTitle(),menu:this._visualRenderMenu()}},_textEditorRender:function(){return{control:a.DB.TEXTAREA("sqs-text-edit mode-"+this.mode,{id:"field-wysiwyg-editor-container",style:"border: none;"}),title:this._renderTitle(),menu:this._textEditorRenderMenu()}},_layoutRender:function(){return{control:a.DB.DIV("sqs-layout columns-12",
{id:"field-wysiwyg-editor-container"}),title:this._renderTitle(),menu:this._layoutEditorRenderMenu()}},_visualRenderMenu:function(){return this._renderMenu(this.menuConfigs[this.menuConfig].wysiwyg)},_textEditorRenderMenu:function(){return this._renderMenu(this.menuConfigs[this.menuConfig].code||this.menuConfigs[this.menuConfig].other||this.menuConfigs[this.menuConfig].markdown)},_layoutEditorRenderMenu:function(){return this._renderMenu(this.menuConfigs[this.menuConfig].layout)},_renderMenu:function(a){for(var c=
[],d=0;d<a.length;++d){var g=a[d];"separator"===g.type?c.push(this._renderMenuSeparator(g)):"mode"===g.type?c.push(this._renderModeSelector(g)):"button"===g.type?c.push(this._renderButton(g)):"container"===g.type?c.push(this._renderContainer(g)):"select"===g.type&&c.push(this._renderSelect(g))}return c},_destroy:function(){this._super();this.destroyEvents();"undefined"!==typeof this.resizeEvent&&null!==this.resizeEvent&&(this.resizeEvent.detach(),this.resizeEvent=null);this.ckEditor&&this.ckEditor.destroy();
this.editor&&this.editor.destroy();this.preCloseEvent&&this.preCloseEvent.detach()}})},"1.0",{requires:"node transition squarespace-util squarespace-debounce squarespace-dialog squarespace-visual-editor squarespace-text-editor squarespace-wysiwyg-editor squarespace-flyout-link-edit squarespace-markdown squarespace-markdown-editor squarespace-widgets-confirmation thirdparty-codemirror".split(" "),after:["squarespace-dialog"]});
(function(){(function(a,d){if("function"===typeof define)define(d);else if("undefined"!==typeof module&&module.exports)module.exports=d();else{var b=d(),c=this,e=c[a];b.noConflict=function(){c[a]=e;return b};c[a]=b}})("markdownDOMParser",function(){var a=function(d,b,c){c=c||{};var e=document.createElement("div");e.innerHTML=d;d=c.nodesToIgnore||[];for(var g=c.parseHiddenNodes||"false",f=c.nodesToPreserve||[],h=c.preserveAttribute||"data-preserve-html-node",e=e.childNodes,k=0;k<e.length;k++)try{for(var l=
!1,n=0;n<d.length;n++)if(e[k].nodeName.toLowerCase()==d[n]){l=!0;break}for(var n=!1,p=0;p<f.length;p++)if(e[k].nodeName.toLowerCase()==f[p]){n=!0;break}var q;if(!(q=l)){var t;if(t=!g)a:{var r=e[k];if("title"==r.nodeName.toLowerCase())t=!1;else if(window.getComputedStyle){try{var u=window.getComputedStyle(r,null);if(u.getPropertyValue&&"none"==u.getPropertyValue("display")){t=!0;break a}}catch(s){}t=!1}else t=void 0}q=t}if(!q)if("#text"!=e[k].nodeName.toLowerCase()&&"#comment"!=e[k].nodeName.toLowerCase()){l=
[];if(e[k].hasAttributes()){for(var v=e[k].attributes,p=0;p<v.length;p++){var w=v.item(p);l.push({name:w.nodeName,value:w.nodeValue})}void 0!==e[k].attributes[h]&&(n=!0)}if(b.preserve&&n)b.preserve(e[k],h);else if(b.start)if(e[k].hasChildNodes()){b.start(e[k].nodeName,l,!1);if("iframe"==e[k].nodeName.toLowerCase()||"frame"==e[k].nodeName.toLowerCase()){if(e[k].contentDocument&&e[k].contentDocument.documentElement)return a(e[k].contentDocument.documentElement,b,c)}else a(e[k].innerHTML,b,c);b.end&&
b.end(e[k].nodeName)}else b.start(e[k].nodeName,l,!0)}else"#text"==e[k].nodeName.toLowerCase()?b.chars&&b.chars(e[k].nodeValue):"#comment"==e[k].nodeName.toLowerCase()&&b.comment&&b.comment(e[k].nodeValue)}catch(y){console.error(y),console.log("error while parsing node: "+e[k].nodeName.toLowerCase())}};return a});(function(a,d){if("function"===typeof define)define(d);else if("undefined"!==typeof module&&module.exports)module.exports=d();else{var b=d(),c=this,e=c[a];b.noConflict=function(){c[a]=e;
return b};c[a]=b}})("html2markdown",function(){function a(a){return a.replace(/^\s+|\s+$/g,"")}function d(a,c){return 0==a.indexOf(c)}return function(b,c){function e(){var a="";if(t)for(var b=0;b<t.length-1;b++)a+="  ";return a+=f(t)}function g(a){var b={},c;for(c in a){var d=a[c];b[d.name]=d}return b}function f(a){return a&&0<a.length?a.slice(-1)[0]:""}function h(a){if(!a)return"";for(var b=a.length-1;0<=b;b--)if(""!=a[b])return a[b];return""}function k(a){var b=!1;if(a==h(q)){for(;f(q)!=a;)q.pop();
q.pop();b=!0}return b}function l(a){for(var b=[];0<q.length&&f(q)!=a;){var c=q.pop();b.unshift(c)}return b.join("")}function n(a){var b=q.pop();b&&(a?(q.push(b),"\n"!=b.match("\n$")&&q.push("\n\n")):(/\s*\n\n\s*$/.test(b)?(b=b.replace(/\s*\n\n\s*$/,"\n\n"),a=""):/\s*\n\s*$/.test(b)?(b=b.replace(/\s*\n\s*$/,"\n"),a="\n"):(/\s+$/.test(b),a="\n\n"),q.push(b),q.push(a)))}function p(){0<q.length?"\n"!=f(q).match("\n$")&&q.push("\n"):q.push("\n")}c=c||{};var q=[],t=[],r=[],u=[],s=[],v=[],w=[],y=c.inlineStyle||
!1,z=c.parser,D={hr:"- - -\n\n",br:"  \n",title:"# ",h1:"# ",h2:"## ",h3:"### ",h4:"#### ",h5:"##### ",h6:"###### ",b:"**",strong:"**",i:"_",em:"_",dfn:"_","var":"_",cite:"_",span:" ",ul:"* ",ol:"1. ",dl:"- ",blockquote:"> ",code:"`"};!z&&"undefined"!==typeof markdownDOMParser&&(z=markdownDOMParser);z(b,{preserve:function(a,b){var c="\n"+a.outerHTML.replace(RegExp(" "+b+'="true"',"g"),"")+"\n";q.push(c)},start:function(b,c,k){b=b.toLowerCase();if(!k||!("br"!=b&&"hr"!=b&&"img"!=b))switch(b){case "br":q.push(D[b]);
break;case "hr":n();q.push(D[b]);break;case "title":case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":n();q.push(D[b]);break;case "b":case "strong":case "i":case "em":case "dfn":case "var":case "cite":q.push(D[b]);break;case "code":if(0<s.length||0<v.length)break;q.push(D[b]);v.push(!0);break;case "span":if(0<s.length||0<v.length)break;else/\s+$/.test(f(q))||q.push(D[b]);break;case "p":case "div":case "table":case "tbody":case "tr":case "td":n();break;case "ul":case "ol":case "dl":t.push(D[b]);
1<t.length?p():n();break;case "li":case "dt":var l=e();q.push(l);break;case "a":b=g(c);r.push(b);q.push("[");break;case "img":b=g(c);var A,H;b.src?H=b.src.value:H="";if(!H)break;b.alt?l=a(b.alt.value):l="";b.title?A=a(b.title.value):A="";!y&&!d(h(q),"[")?(b=w.indexOf(H),-1==b&&(w.push(H),b=w.length-1),n(),q.push("!["),""!=l?q.push(l):null!=A&&q.push(A),q.push("]["+b+"]"),n()):(d(h(q),"[")||n(),q.push("!["+l+"]("+H+(A?' "'+A+'"':"")+")"),d(h(q),"[")||n(!0));break;case "blockquote":n();u.push(D[b]);
break;case "pre":n();s.push(!0);q.push("    ");break;case "table":q.push("<table>");break;case "thead":q.push("<thead>");break;case "tbody":q.push("<tbody>");break;case "tr":q.push("<tr>");break;case "td":q.push("<td>")}},chars:function(b){if(0===v.length)if(0<s.length)b=b.replace(/\n/g,"\n    ");else if(""!=a(b)){b=b.replace(/\s+/g," ");var c=h(q);/\s+$/.test(c)&&(b=b.replace(/^\s+/g,""))}else{q.push("");return}0<u.length&&q.push(u.join(""));q.push(b)},end:function(b){b=b.toLowerCase();switch(b){case "title":case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":k(D[b])||
n(!0);break;case "p":case "div":case "table":case "tbody":case "tr":case "td":for(;0<q.length&&""==a(f(q));)q.pop();n(!0);break;case "b":case "strong":case "i":case "em":case "dfn":case "var":case "cite":k(D[b])||(q.push(a(l(D[b]))),q.push(D[b]));break;case "a":var c=l("["),c=c.replace(/\s+/g," "),c=a(c);if(""==c){q.pop();break}b=r.pop();var g;b.href&&""!=b.href.value?g=b.href.value:g="";if(""==g){q.pop();q.push(c);break}q.push(c);!y&&!d(f(q),"!")?(c=w.indexOf(g),-1==c&&(w.push(g),c=w.length-1),q.push("]["+
c+"]")):(d(f(q),"!")&&(c=q.pop(),c=q.pop()+c,n(),q.push(c)),c=b.title,q.push("]("+g+(c?' "'+a(c.value).replace(/\s+/g," ")+'"':"")+")"),d(f(q),"!")&&n(!0));break;case "ul":case "ol":case "dl":p();t.pop();break;case "li":case "dt":g=e();k(g)||(c=a(l(g)),d(c,"[![")?(q.pop(),n(),q.push(c),n(!0)):(q.push(c),p()));break;case "blockquote":u.pop();break;case "pre":n(!0);s.pop();break;case "code":v.pop();case "span":if(0<s.length)break;else""==a(f(q))?q.pop():(c=q.pop(),q.push(a(c))),q.push(D[b]);break;case "table":q.push("</table>");
break;case "thead":q.push("</thead>");break;case "tbody":q.push("</tbody>");break;case "tr":q.push("</tr>");break;case "td":q.push("</td>")}}},{nodesToPreserve:"script noscript object iframe frame head style label".split(" ")});if(!y)for(z=0;z<w.length;z++)if(0==z){var K=q.pop();q.push(K.replace(/\s+$/g,""));q.push("\n\n["+z+"]: "+w[z])}else q.push("\n["+z+"]: "+w[z]);return q.join("")}});YUI.add("squarespace-markdown-from-html",function(a){a.namespace("Squarespace.Lang");a.Squarespace.Lang.markdownFromHTML=
function(a){return!a?"":html2markdown(a)}},"1.0",{requires:[]})})();var hexcase=0,b64pad="=",chrsz=8;function hex_sha1(a){return binb2hex(core_sha1(str2binb(a),a.length*chrsz))}function b64_sha1(a){return binb2b64(core_sha1(str2binb(a),a.length*chrsz))}function str_sha1(a){return binb2str(core_sha1(str2binb(a),a.length*chrsz))}function hex_hmac_sha1(a,d){return binb2hex(core_hmac_sha1(a,d))}function b64_hmac_sha1(a,d){return binb2b64(core_hmac_sha1(a,d))}
function str_hmac_sha1(a,d){return binb2str(core_hmac_sha1(a,d))}function sha1_vm_test(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==hex_sha1("abc")}
function core_sha1(a,d){a[d>>5]|=128<<24-d%32;a[(d+64>>9<<4)+15]=d;for(var b=Array(80),c=1732584193,e=-271733879,g=-1732584194,f=271733878,h=-1009589776,k=0;k<a.length;k+=16){for(var l=c,n=e,p=g,q=f,t=h,r=0;80>r;r++){b[r]=16>r?a[k+r]:rol(b[r-3]^b[r-8]^b[r-14]^b[r-16],1);var u=safe_add(safe_add(rol(c,5),sha1_ft(r,e,g,f)),safe_add(safe_add(h,b[r]),sha1_kt(r))),h=f,f=g,g=rol(e,30),e=c,c=u}c=safe_add(c,l);e=safe_add(e,n);g=safe_add(g,p);f=safe_add(f,q);h=safe_add(h,t)}return[c,e,g,f,h]}
function sha1_ft(a,d,b,c){return 20>a?d&b|~d&c:40>a?d^b^c:60>a?d&b|d&c|b&c:d^b^c}function sha1_kt(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514}function core_hmac_sha1(a,d){var b=str2binb(a);16<b.length&&(b=core_sha1(b,a.length*chrsz));for(var c=Array(16),e=Array(16),g=0;16>g;g++)c[g]=b[g]^909522486,e[g]=b[g]^1549556828;b=core_sha1(c.concat(str2binb(d)),512+d.length*chrsz);return core_sha1(e.concat(b),672)}
function safe_add(a,d){var b=(a&65535)+(d&65535);return(a>>16)+(d>>16)+(b>>16)<<16|b&65535}function rol(a,d){return a<<d|a>>>32-d}function str2binb(a){for(var d=[],b=(1<<chrsz)-1,c=0;c<a.length*chrsz;c+=chrsz)d[c>>5]|=(a.charCodeAt(c/chrsz)&b)<<24-c%32;return d}function binb2str(a){for(var d="",b=(1<<chrsz)-1,c=0;c<32*a.length;c+=chrsz)d+=String.fromCharCode(a[c>>5]>>>24-c%32&b);return d}
function binb2hex(a){for(var d=hexcase?"0123456789ABCDEF":"0123456789abcdef",b="",c=0;c<4*a.length;c++)b+=d.charAt(a[c>>2]>>8*(3-c%4)+4&15)+d.charAt(a[c>>2]>>8*(3-c%4)&15);return b}function binb2b64(a){for(var d="",b=0;b<4*a.length;b+=3)for(var c=(a[b>>2]>>8*(3-b%4)&255)<<16|(a[b+1>>2]>>8*(3-(b+1)%4)&255)<<8|a[b+2>>2]>>8*(3-(b+2)%4)&255,e=0;4>e;e++)d=8*b+6*e>32*a.length?d+b64pad:d+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c>>6*(3-e)&63);return d}
YUI.add("thirdparty-sha1",function(a){},"2.97.0");
YUI.add("squarespace-layout-insert-block-menu-email",function(a){a.namespace("Squarespace.Layout").InsertBlockMenuEmail=a.Base.create("layoutInsertBlockMenu",a.Squarespace.Layout.InsertBlockMenuWebBase,[],{_getInsertableBlockItems:function(){return[{label:"Basic",items:[a.Squarespace.BlockType.HTML,a.Squarespace.BlockType.MARKDOWN,a.Squarespace.BlockType.IMAGE,a.Squarespace.BlockType.BUTTON,a.Squarespace.BlockType.SPACER,a.Squarespace.BlockType.HORIZONTAL_RULE]}]}},{CSS_PREFIX:"sqs-layout-insert-block-menu",
ATTRS:{editMode:{readOnly:!0,value:a.Squarespace.Layout.EditMode.EMAIL}}})},"1.0",{requires:["base","squarespace-enum","squarespace-layout-insert-block-menu-web-base","squarespace-layout-renderable-blocks-email"]});
YUI.add("squarespace-view",function(a){a.namespace("Squarespace").View=a.Base.create("sqsView",a.View,[],{initializer:function(a){var b=this.get("id");this.after(b+"|modelChange",function(a){a.prevVal&&a.prevVal.removeTarget(this);a.newVal&&(a.newVal.addTarget(this),a.newVal.after("destroy",this.destroy,this))});a&&a.model&&this.set("model",a.model);this._rerenderSub=this.after(b+"|*:change",function(a){a.silent||this.render()},this)},destructor:function(d){(!d||d&&!d.preserveContainer)&&this.get("container").remove(!0);
a.detachAll(this.get("id")+"|*")},render:function(d){var b=this.get("container");if(this.template){var c=this._getTemplateContext(),e=a.Squarespace.UITemplates.render(this.template,c);b.setHTML(e);a.Cookie.get("SQUARESPACE_UI_DEBUG")&&console.log(this.name+": Rendered with context:",c)}d&&d instanceof a.Node&&b.appendTo(d)},_getTemplateContext:function(){var a=this.get("model");return a?a.toJSON():this.getAttrs()}},{ATTRS:{container:{valueFn:function(){return a.Node.create('<div class="sqs-'+this.name+
'"/>')},readOnly:!0}}})},"1.0",{requires:["base-build","node","view","model","squarespace-ui-templates"]});
YUI.add("squarespace-job-manager",function(a){a.namespace("Squarespace");a.Squarespace.JobManager=Class.create({jobCheckTimeout:2E3,initialize:function(){this.recentJobs={};this.currentJobs={};this.completedJobs={};this.failedJobs={};this.startedIds=[];this.completedIds=[];this.failedIds=[];this.publish("opened");this.publish("started");this.publish("started-jobs");this.publish("completed");this.publish("completed-jobs");this.publish("failed");this.publish("failed-jobs");this.jobCheckerTimer=new a.Squarespace.Timers.LinearIncreaseInterval({fn:a.bind(this._checkJobs,
this),untilFn:a.bind(this.isEmpty,this),initialDelay:2E3,delayIncrement:400,maxDelay:12E4,maxIterations:1E3})},isEmpty:function(){return 0===this.getSize()},getSize:function(){return a.Object.keys(this.currentJobs).length},completedJobsCount:function(){return a.Object.keys(this.completedJobs).length},failedJobsCount:function(){return a.Object.keys(this.failedJobs).length},runChecks:function(){this.jobCheckerTimer.reset();this.jobCheckerTimer.run()},_checkJobs:function(){var d=a.Object.keys(this.currentJobs);
0!==d.length&&(d="/api/rest/jobs/?id="+d.join(","),a.Data.get({url:d,success:function(a){for(var c=0;c<a.length;++c){var d=a[c],g=this.findInQueue(d.id);g&&(g.update(d),g.get("childJobs").length&&this._getChildJobs(g))}0<this.startedIds.length&&(this.fire("started-jobs",this.resolveIds(this.startedIds)),this.startedIds=[]);0<this.completedIds.length&&(this.fire("completed-jobs",this.resolveIds(this.completedIds)),this.completedIds=[]);0<this.failedIds.length&&(this.fire("failed-jobs",this.resolveIds(this.failedIds)),
this.failedIds=[])},failure:noop},this))},_getChildJobs:function(d){d="/api/rest/jobs/"+d.get("id")+"/children";a.Data.get({url:d,success:function(a){this.loadExistingJobs(a.jobs)},failure:noop},this)},onJobStart:function(a){a=a.target;var b=a.get("id");this.startedIds.push(b);this.fire("started",a)},onJobSuccess:function(a){this._processSucessfulJob(a.target)},_processSucessfulJob:function(a){var b=a.get("id");this.completedJobs[b]=a;this.completedIds.push(b);this.removeFromQueue(b);this.fire("completed",
a)},onJobFailure:function(a){a=a.target;var b=a.get("id");this.failedJobs[b]=a;this.failedIds.push(b);this.removeFromQueue(b);this.fire("failed",a)},onJobOpen:function(a){a=a.target;var b=a.get("id");this.currentJobs[b]=a;this.fire("opened",a)},removeFromQueue:function(d){a.Object.hasKey(this.currentJobs,d)&&delete this.currentJobs[d]},findJob:function(a){for(var b=[this.findInQueue,this.findCompletedJob,this.findFailedJob],c=0;c<b.length;++c){var e=b[c].call(this,a);if(e)return e}return null},findInQueue:function(a){return this.currentJobs[a]},
findCompletedJob:function(a){return this.completedJobs[a]},findFailedJob:function(a){return this.failedJobs[a]},resolveIds:function(a){for(var b=[],c=0;c<a.length;++c){var e=this.findJob(a[c]);e&&b.push(e)}return b},addJob:function(a){this._subscribeToJob(a);this.currentJobs[a.get("id")]=a;this.runChecks()},_subscribeToJob:function(a){a.after("start",this.onJobStart,this,a);a.after("complete",this.onJobSuccess,this,a);a.after("failure",this.onJobFailure,this,a);a.after("open",this.onJobOpen,this,
a)},totalJobs:function(){return[this.completedJobs,this.failedJobs,this.currentJobs].map(function(d){return a.Object.keys(d).length}).reduce(function(a,b){return a+b})},allJobs:function(){return a.Object.values(a.merge(this.completedJobs,this.failedJobs,this.currentJobs,this.recentJobs))},removeJobById:function(a){delete this.completedJobs[a];delete this.failedJobs[a];delete this.currentJobs[a];delete this.recentJobs[a]},loadExistingJobs:function(d){d.forEach(function(b){b=this._jobDataToJob(b);this.currentJobs[b.get("id")]=
b;this._subscribeToJob(b);b.get("status")==a.Squarespace.JobStatuses.SUCCESS&&this._processSucessfulJob(b)},this);this.runChecks()},loadRecentJobs:function(a){a.forEach(function(a){a=this._jobDataToJob(a);this.recentJobs[a.get("id")]=a},this)},_jobDataToJob:function(d){return new a.Squarespace.Job(a.merge(d,{messages:d.messages?d.messages.map(function(b){return new a.Squarespace.JobMessage(b)}):[]}))},getExistingJobs:function(){var d="/api/rest/jobs/?status="+[a.Squarespace.JobStatuses.WAITING,a.Squarespace.JobStatuses.PROCESSING].join();
a.Data.get({url:d,success:this.loadExistingJobs},this)}});a.augment(a.Squarespace.JobManager,a.EventTarget);Static.JOB_MANAGER||(Static.JOB_MANAGER=new a.Squarespace.JobManager)},"1.0",{requires:["event","json","squarespace-jobs","squarespace-timers","squarespace-util"]});
YUI.add("squarespace-block-mixin-splitable",function(a){a.namespace("Squarespace.Block.Mixin").Splitable=a.Base.create("block-splitable",a.Base,[],{initializer:function(){this._host.get("editController").set("contentParentBlockSelector","."+this._host.getClassName())},split:function(a,b){var c=a.ancestor().get("children"),e=!1;if(!a.ancestor(".sqs-block")||a.ancestor(".sqs-block")!==this._bb)e=!0;var g="",f="";c.each(function(b,c){e?f+=b.getDOMNode().outerHTML:(b===a&&(e=!0),g+=b.getDOMNode().outerHTML)},
this);0<f.length&&(c=new this._host.constructor({editable:this._host.get("editable"),render:!1,isNewBlock:!0,editMode:this._host.get("editMode"),editorConfig:{defaultEditingMode:!1},editController:this._host.get("editController")}),c.render(this._bb.ancestor(".sqs-layout")),c.blockEditor.insertContentIntoModel(f),c.syncUI(),this.insertContentIntoModel(g),this._host.syncUI(),this._bb.insert(c.get("boundingBox"),"after"),this._bb.ancestor(".sqs-layout").LayoutBuilder.registerBlock(c));this._bb.insert(b,
"after")},insertContentIntoModel:function(a){throw Error("Splitable requires insertContentIntoModel method implementation");},getBlockLevelElements:function(){var a=this.get("selectorsForInsertPoints");return this._cb.get("children").filter(a)},getOverlays:function(){return this._host.get("boundingBox").all(".sqs-content-overlay")},_initLayoutDrop:noop,_updateDropOverlays:function(){if(!this.get("destroyed")){var d=a.DD.DDM.activeDrag;if(d&&d.get("node").inDoc(a.config.doc)&&d.get("node")!==this._bb){this.overlays&&
this.overlays.length&&this._destroyDropOverlays();this.overlays=[];var b=this.getBlockLevelElements();1>b.size()&&(b=a.all(this._bb));this.overlays=a.Array.map(this._addOverlayDOMNodes(b),function(c,d){var g=b.item(d);return{node:a.one(c),alignNode:g,regionData:this._getRegionData(g,b.item(d-1),b.item(d+1)),drop:null}},this);this._positionOverlayNodes()}}},_addOverlayDOMNodes:function(d){d=d.size();for(var b=[];0<d--;)b.push(a.DOM.create('<div class="sqs-content-overlay">'));this._bb.append(b);return b},
_getRegionData:function(a,b,c){var e=this._bb.get("region");this.get("selectorsForInsertPoints");var g=c?c.get("region"):{},f=b?b.get("region"):{};a=a.get("region");var h=b?a.top:e.top;f.height&&(h-=(h-f.bottom)/2);f=c?a.bottom:e.bottom;g.height&&(f+=(g.top-a.bottom)/2);return{height:f-h,top:h-e.top,isFirstContent:!b,isLastContent:!c}},_positionOverlayNodes:function(){a.Array.each(this.overlays,function(d){var b=d.node,c=d.regionData;b.setData("alignNode",d.alignNode);b.setData("isAdjacentToBlockEdge",
{top:c.isFirstContent,bottom:c.isLastContent});b.setStyles({top:c.top,height:c.height});this.get("lockedLayout")||(d.drop=new a.Squarespace.Layout.Drop({node:b,groups:["blocks"],locked:!1}));b.on("click",this._destroyDropOverlays,this)},this)},_destroyDropOverlays:function(){this.overlays&&(a.Array.each(this.overlays,function(d){a.Lang.isValue(d.drop)&&d.drop.destroy();d.node.detach();d.node.remove(!0)}),delete this.overlays)},beforeLayoutDrag:function(){this._updateDropOverlays()},afterLayoutDrag:function(){this._destroyDropOverlays()},
_afterDropZoneLockedChange:function(d){a.Array.each(this._overlays,function(a){a.drop.set("lock",d.newVal)});d.newVal?this._destroyDropOverlays():this._updateDropOverlays()},destructor:function(){this._destroyDropOverlays()}},{ATTRS:{selectorsForInsertPoints:{valueFn:function(){return a.Array.map("p ul ol blockquote h1 h2 h3 h4 h5 h6".split(" "),function(a){return".sqs-block-content > "+a+", .sqs-html-content > "+a}).join(", ")}}}})},"1.0",{requires:["base","node","widget"]});
YUI.add("squarespace-colors",function(a){a.namespace("Squarespace").Colors={to:function(a,b){if(void 0===a||""===a)a="hsl(0, 0%, 100%)";var c=a.toLowerCase(),e=this.getType(a);if(!e)return!1;if(e===b||"transparent"===c||"none"===c)return c;if("hex"===e&&"rgb"===b)return this.hexToRgb(c);if("hex"===e&&"rgba"===b)return this.addAlpha(this.hexToRgb(c));if("hex"===e&&"hsl"===b)return this.rgbaToHsla(this.hexToRgb(c));if("hex"===e&&"hsla"===b)return this.addAlpha(this.rgbaToHsla(this.hexToRgb(c)));if("rgb"===
e&&"hex"===b)return this.rgbaToHex(c);if("rgb"===e&&"rgba"===b)return this.addAlpha(c);if("rgb"===e&&"hsl"===b)return this.rgbaToHsla(c);if("rgb"===e&&"hsla"===b)return this.addAlpha(this.rgbaToHsla(c));if("rgba"===e&&"rgb"===b)return this.removeAlpha(c);if("rgba"===e&&"hex"===b)return this.rgbaToHex(this.removeAlpha(c));if("rgba"===e&&"hsl"===b)return this.removeAlpha(this.rgbaToHsla(c));if("rgba"===e&&"hsla"===b)return this.rgbaToHsla(c);if("hsl"===e&&"hex"===b)return this.rgbaToHex(this.hslaToRgba(c));
if("hsl"===e&&"rgb"===b)return this.hslaToRgba(c);if("hsl"===e&&"rgba"===b)return this.addAlpha(this.hslaToRgba(c));if("hsl"===e&&"hsv"===b)return this.rgbaToHsva(this.hslaToRgba(c));if("hsl"===e&&"hsva"===b)return this.addAlpha(this.rgbaToHsva(this.hslaToRgba(c)));if("hsl"===e&&"hsla"===b)return this.addAlpha(c);if("hsla"===e&&"hex"===b)return this.rgbaToHex(this.hslaToRgba(c));if("hsla"===e&&"rgb"===b)return this.removeAlpha(this.hslaToRgba(c));if("hsla"===e&&"rgba"===b)return this.hslaToRgba(c);
if("hsla"===e&&"hsl"===b)return this.removeAlpha(c);if("hsv"===e&&"hex"===b)return this.rgbaToHex(this.hsvaToRgba(c));if("hsv"===e&&"rgb"===b)return this.hsvaToRgba(c);if("hsv"===e&&"rgba"===b)return this.addAlpha(this.hsvaToRgba(c));if("hsv"===e&&"hsl"===b)return this.rgbaToHsla(this.hsvaToRgba(c));if("hsv"===e&&"hsla"===b)return this.addAlpha(this.rgbaToHsla(this.hsvaToRgba(c)));if("hsv"===e&&"hsva"===b)return this.addAlpha(c);if("colorname"===e&&"hex"===b)return this.colornameToHex(c);if("colorname"===
e&&"rgb"===b)return this.hexToRgb(this.colornameToHex(c));if("colorname"===e&&"rgba"===b)return this.addAlpha(this.hexToRgb(this.colornameToHex(c)));if("colorname"===e&&"hsl"===b)return this.rgbaToHsla(this.hexToRgb(this.colornameToHex(c)));if("colorname"===e&&"hsla"===b)return this.addAlpha(this.rgbaToHsla(this.hexToRgb(this.colornameToHex(c))));if(void 0===e)return c},getType:function(d){d=d.replace(/ +?/g,"");if("transparent"===d)return"transparent";if(void 0===d||""===d)return"none";if(!1!==this.colornameToHex(d))return"colorname";
if(/^#[0-9a-f]{3}([0-9a-f]{3})?$/i.test(d))return"hex";var b=d.match(RegExp("^rgba?\\(\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])\\s*,\\s*(\\d|[1-9]\\d|1\\d{2}|2[0-4][0-9]|25[0-5])(?:\\s*,\\s*(0|1|(1|0)?\\.\\d+))?\\s*\\)$","i"));return b&&null!==b[4]&&b[4]?"rgba":!a.Lang.isNull(b)&&!a.Lang.isUndefined(b)?"rgb":(b=d.match(RegExp("^hsla?\\((-?\\d*\\.?\\d+(?:e[\\+\\-]\\d+)?%?),(-?\\d*\\.?\\d+(?:e[\\+\\-]\\d+)?%?),(-?\\d*\\.?\\d+(?:e[\\+\\-]\\d+)?%?)(?:,(-?\\d*\\.?\\d+(?:e[\\+\\-]\\d+)?%?))?\\)$",
"i")))&&null!==b[4]&&b[4]?"hsla":!a.Lang.isNull(b)&&!a.Lang.isUndefined(b)?"hsl":0===d.indexOf("hsv(")&&3===d.split(",").length?"hsv":0===d.indexOf("hsva(")&&4===d.split(",").length?"hsva":!1},addAlpha:function(d,b){a.Lang.isUndefined(b)&&(b=1);var c=this.getType(d);return"rgb"!==c&&"hsl"!==c?!1:("rgb"===c?"rgba(":"hsla(")+d.split("(")[1].split(")")[0]+","+b+")"},removeAlpha:function(a){var b=this.getType(a);if("rgba"!==b&&"hsla"!==b)return!1;b="rgba"===b?"rgb(":"hsl(";a=a.split("(")[1].split(",");
return b+a[0]+","+a[1]+","+a[2]+")"},colornameToHex:function(a){var b={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",
darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",
lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",
oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",
skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"undefined"!=typeof b[a.toLowerCase()]?b[a.toLowerCase()]:!1},hexToRgb:function(a){"#"===a[0]&&(a=a.substr(1));if(3===a.length){var b=a;a="";for(var b=/^([a-f0-9])([a-f0-9])([a-f0-9])$/i.exec(b).slice(1),
c=0;3>c;c++)a+=b[c]+b[c]}a=/^([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.exec(a).slice(1);return"rgb("+parseInt(a[0],16)+","+parseInt(a[1],16)+","+parseInt(a[2],16)+")"},rgbaToHex:function(a){"rgba"===this.getType(a)&&(a=this.removeAlpha(a));a=a.split("(")[1].split(")")[0].split(",");for(var b=0;2>=b;++b)a[b]=parseInt(a[b],10).toString(16),1==a[b].length&&(a[b]="0"+a[b]);return"#"+a.join("")},rgbaToHsla:function(a){var b=this.getColorFromRgba(a,"r")/255,c=this.getColorFromRgba(a,"g")/255,e=this.getColorFromRgba(a,
"b")/255,g=Math.max(b,c,e),f=Math.min(b,c,e),h=g-f,k=0,l=0,n=(g+f)/2;if(f!==g)switch(l=0.5>n?h/(g+f):h/(2-g-f),g){case b:k=(c-e)/h;break;case c:k=(e-b)/h+2;break;case e:k=(b-c)/h+4}k=(360+Math.round(60*k))%360;l=Math.round(1E3*l)/10;n=Math.round(1E3*n)/10;return"rgba"===this.getType(a)?(a=this.getA(a),"hsla("+k+","+l+"%,"+n+"%,"+a+")"):"hsl("+k+","+l+"%,"+n+"%)"},hslaToRgba:function(a){function b(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return c<1/6?a+6*(b-a)*c:0.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a}var c=this.getH(a)/
360,e=this.getS(a)/100,g=this.getL(a)/100,f=0.5>g?g*(1+e):g+e-g*e,h=2*g-f,g=b(h,f,c+1/3),e=b(h,f,c),c=b(h,f,c-1/3),g=Math.round(255*g),e=Math.round(255*e),c=Math.round(255*c);return"hsla"===this.getType(a)?(a=this.getColorFromHsla(a,"a"),"rgba("+g+","+e+","+c+","+a+")"):"rgb("+g+","+e+","+c+")"},hsvaToRgba:function(a){var b=this.getColorFromHsva(a,"h"),c=this.getColorFromHsva(a,"s")/100;a=this.getColorFromHsva(a,"v")/100;var e,g,f;if(0===c)return c=e=a,"rgb("+c+","+e+","+a+")";b/=60;e=Math.floor(b);
g=b-e;b=a*(1-c);f=a*(1-c*g);g=a*(1-c*(1-g));switch(e){case 0:c=a;e=g;a=b;break;case 1:c=f;e=a;a=b;break;case 2:c=b;e=a;a=b;break;case 3:c=b;e=f;break;case 4:c=g;e=b;break;default:c=a,e=b,a=f}c=Math.round(255*c);e=Math.round(255*e);a=Math.round(255*a);return"rgb("+c+","+e+","+a+")"},rgbaToHsva:function(a){var b=this.getR(a)/255,c=this.getG(a)/255,e=this.getB(a)/255,g=Math.min(b,c,e),f=Math.max(b,c,e);a=f;var h=f-g;if(0!==f)g=h/f;else return"hsv(-1,0%,"+a+"%)";b=60*(b==f?(c-e)/h:c==f?2+(e-b)/h:4+(b-
c)/h);0>b&&(b+=360);b=Math.round(b);g=Math.round(100*g);a=Math.round(100*a);return"hsv("+b+","+g+"%,"+a+"%)"},getColorFromRgba:function(a,b){var c=this.getType(a),e;if("rgb"!==c&&"rgba"!==c||"rgba"!==c&&"a"===b)return!1;"r"===b?e=0:"g"===b?e=1:"b"===b?e=2:"a"===b&&"rgba"===c&&(e=3);c=a.split("(")[1].split(")")[0].split(",");return e>c.length?!1:3===e?this.fixA(c[e]):c[e]},getColorFromHsla:function(a,b){var c=this.getType(a),e;if("hsl"!==c&&"hsla"!==c&&"hsv"!==c&&"hsva"!==c||"hsla"!==c&&"a"===b)return!1;
if("h"===b)e=0;else if("s"===b)e=1;else if("l"===b||"v"===b)e=2;else if("a"===b&&("hsla"===c||"hsva"===c))e=3;c=a.split("(")[1].split(")")[0].split(",");return e>c.length?!1:3===e?this.fixA(c[e]):parseInt(c[e],10)},getColorFromHsva:function(a,b){var c=this.getType(a),e;if("hsv"!==c&&"hsva"!==c||"hsva"!==c&&"a"===b)return!1;"h"===b?e=0:"s"===b?e=1:"v"===b?e=2:"a"===b&&"hsva"===c&&(e=3);c=a.split("(")[1].split(")")[0].split(",");return e>c.length?!1:3===e?this.fixA(c[e]):parseInt(c[e],10)},fixA:function(a){return-1==
a.indexOf("%")?a:parseFloat(a)/100},toHex:function(d){return a.Squarespace.Colors.to(d,"hex")},toRgb:function(d){return a.Squarespace.Colors.to(d,"rgb")},toRgba:function(d){return a.Squarespace.Colors.to(d,"rgba")},toHsl:function(d){return a.Squarespace.Colors.to(d,"hsl")},toHsla:function(d){return a.Squarespace.Colors.to(d,"hsla")},getH:function(d){return a.Squarespace.Colors.getColorFromHsla(a.Squarespace.Colors.to(d,"hsl"),"h")},getS:function(d){return a.Squarespace.Colors.getColorFromHsla(a.Squarespace.Colors.to(d,
"hsl"),"s")},getL:function(d){return a.Squarespace.Colors.getColorFromHsla(a.Squarespace.Colors.to(d,"hsl"),"l")},getV:function(d){return a.Squarespace.Colors.getColorFromHsva(a.Squarespace.Colors.to(d,"hsv"),"v")},getR:function(d){return a.Squarespace.Colors.getColorFromRgba(a.Squarespace.Colors.to(d,"rgb"),"r")},getG:function(d){return a.Squarespace.Colors.getColorFromRgba(a.Squarespace.Colors.to(d,"rgb"),"g")},getB:function(d){return a.Squarespace.Colors.getColorFromRgba(a.Squarespace.Colors.to(d,
"rgb"),"b")},getA:function(d){return a.Squarespace.Colors.getColorFromRgba(a.Squarespace.Colors.to(d,"rgba"),"a")}}},"1.0.0");
YUI.add("squarespace-block-tourdates",function(a){var d=a.namespace("Squarespace.Block").TourDates=a.Base.create("block-tourdates",a.Squarespace.Block.ModelSyncBase,[],{bindUI:function(){this.get("model").after("save",this._renderSuccess,this);this.after("resized",function(){this.tourdatesBlock&&this.tourdatesBlock.adjustLayout()},this)},_renderSuccess:function(b){d.superclass._renderSuccess.call(this,b);b=this.get("model");b.get("artistId")&&(this.tourdatesBlock=new a.Squarespace.Widgets.BandsInTownTourDatesList(b.getAttrs(["artistId",
"startDate","endDate"])),this.tourdatesBlock.render(this.get("contentBox")))},_getDefaultContent:function(){var a=new Date,c=new Date(a.getFullYear(),a.getMonth()-1,1),a=new Date(a.getFullYear(),a.getMonth()+2,1);return{artistId:"",startDate:c,endDate:a}}},{MODEL:a.Squarespace.ContentModel.TourDatesBlock,CSS_PREFIX:"sqs-block-tourdates",ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{value:a.Squarespace.Block.Editor.TourDates},type:{value:a.Squarespace.BlockType.TOURDATES}}})},"1.0",
{requires:"base model squarespace-block-base-modelsync squarespace-block-tourdates-editor squarespace-block-utils squarespace-enum".split(" ")});YUI.add("squarespace-block-product-model",function(a){a.namespace("Squarespace.ContentModel").ProductBlock=a.Base.create("ProductModel",a.Model,[],{},{ATTRS:{showImage:{value:!0}}})},"1.0",{requires:["base","model"]});
YUI.add("squarespace-block-content-base",function(a){var d=a.namespace("Squarespace.Content").ContentBase=function(){a.before(this._bindUIBlock,this,"bindUI");a.before(this._syncUIBlock,this,"syncUI")};d.prototype={_bindUIBlock:function(){this.after("editableChange",this.syncUI,this)},_syncUIBlock:function(){this.syncEditable()},syncEditable:function(){var b=this.get("editable"),c=this.get("editor");a.Lang.isValue(c)&&(b&&!this.hasPlugin(c.NS)?this.plug(c):!b&&this.hasPlugin(c.NS)&&this.unplug(c))},
toJSON:function(){var a=this.get("model").toJSON();delete a.id;return a},destructor:function(){this.unplug()},_onDocFocus:function(){}};d.ATTRS={tabIndex:{value:null},editable:{value:!1,lazyAdd:!1}}},"1.0",{requires:[]});
YUI.add("squarespace-drag-selection-selector-blacklist",function(a){a.namespace("Squarespace").DragSelectionSelectorBlackList=a.Base.create("dragSelectionSelectorBlackList",a.Base,[],{_getInvalidRegions:function(a){return a.concat(this.get("selectorBlacklist"))}},{ATTRS:{invalidRegions:{value:[],getter:"_getInvalidRegions"},selectorBlacklist:{valueFn:function(){var d=".dialog-screen-overlay;.mode-visual;.mode-source;.content-title .add-content;.config-panel-wrapper;input;object;.dropdown select;.sqs-disable-drag-selection".split(";");
a.Squarespace.STANDARD_CONTROL_CLASSES&&(d=d.concat(a.Squarespace.STANDARD_CONTROL_CLASSES));d=a.Array.dedupe(d);d.remove(".standard-dialog-wrapper");return d}}}})},"1.0",{requires:["base-build"]});
YUI.add("squarespace-block-summary-gallery-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");var d=a.Squarespace.Block.ModelEditorDialog.SummaryGallery=a.Base.create("SummaryGalleryModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SocialSummary,[a.Squarespace.Block.Mixins.Gallery],{sanitizeDialogData:function(b){b=a.merge(b,b.options);delete b.options;"slider"!==b.design?b.aspectRatio=null:delete b.aspectRatio;b.vSize=null;return b},_getDefaultDialogConfig:function(){var b=
d.superclass._getDefaultDialogConfig.call(this),c=b.tabs[0];b.tabs.push({title:c.title,tabTitle:"Design",icon:c.icon,scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:this._getGalleryOptions()}}]});return a.merge(b,{name:"editGalleryBlock",height:420})},_getDefaultContent:function(){var b=this._defaultGalleryOptions();return a.merge(b,{methodOption:"transient"})}},{ATTRS:{}})},"1.0",{requires:"base squarespace-enum squarespace-block-mixin-gallery-option-sync squarespace-dialog-gallery-options squarespace-block-social-summary-model-editor squarespace-block-summary-gallery-model".split(" ")});
YUI.add("squarespace-dialog-state-manager",function(a){function d(b,e){if(!a.Lang.isObject(b)||!a.Lang.isObject(e))return b===e;var g=!0;a.Object.each(b,function(b,c){a.Lang.isObject(b)&&a.Lang.isObject(e[c])?g=g&&d(b,e[c]):b!==e[c]&&(g=!1)});return g}a.namespace("Squarespace.DialogFields");var b=a.Squarespace.DialogFields.StateManager=a.Base.create("stateManager",a.Squarespace.DialogField2,[a.WidgetParent],{initializer:function(b){this.get("contentBox");var d=Date.now();a.Lang.isValue(b.data)||(b.data=
{state:b.stateOrder[0],date:b.allowNever?null:d},this.set("data",b.data));a.Lang.isNull(b.data.date)&&b.allowNever?this.set("durationOffset",-1):(d=a.Squarespace.DateUtils.calculateFullDayOffset(new Date,b.data.date),this.set("durationOffset",d));a.Lang.isValue(b.panel)&&(this.panel=b.panel);this.set("stateType",this.getStateType())},renderUI:function(){b.superclass.renderUI.call(this);var a=this.get("contentBox");this.stateLabel=a.one(".field-workflow-title");this.stateDesc=a.one(".field-workflow-description")},
bindUI:function(){b.superclass.bindUI.call(this);this.stateDesc.on("click",this.onStateChangeRequest,this);this.stateLabel.on("click",this.onStateChangeRequest,this);this.on("dataChange",this.onDataChange,this)},syncUI:function(){b.superclass.syncUI.call(this);var a=this.get("data"),d=this.get("states")[a.state];this.stateLabel.set("text",d.title);this.stateDesc.setHTML(this.getStateDesc(d.stateDesc,a.date))},onStateChangeRequest:function(a){a.target.hasClass("duration")||a.target.hasClass("date")?
a.widgetType="timer":a.widgetType="picker";this.showStateEditor(a)},onDataChange:function(b){var d;d=b.newVal;a.Lang.isValue(d.state)&&this.set("stateType",this.getStateType(d));a.Lang.isNull(d.date)&&this.get("allowNever")?this.set("durationOffset",-1):(d=a.Squarespace.DateUtils.calculateFullDayOffset(new Date,d.date),this.set("durationOffset",d));b.closeStateEditor&&this.closeStateEditor()},aggregateWidgetData:function(b){var d=this.get("data");b=b.newVal;var g={},f={closeStateEditor:!1};a.Lang.isDate(b)?
g.date=b.getTime():a.Lang.isString(b)?(g.state=b,f.closeStateEditor=!0):a.Lang.isNumber(b)?isNaN((new Date(b)).getTime())||(g.date=b):a.Lang.isObject(b)?(a.Object.hasKey(b,"state")&&(g.state=b.state),f.closeStateEditor=!0):a.Lang.isNull(b)&&(g.date=null);this.set("data",a.merge(d,g),f)},showStateEditor:function(a){this._activeChild||(a=this.getStateEditorWidget(a.widgetType),a.on("dataChange",this.aggregateWidgetData,this),a.on("destroy",function(){this._activeChild&&(this._activeChild=null)},this),
a.render(this.get("contentBox")),this._activeChild=a)},closeStateEditor:function(a){this._activeChild&&(this._activeChild.destroy(),this._activeChild=null)},getStateEditorWidget:function(b){switch(b){case "timer":return new a.Squarespace.DialogFields.StateScheduler2({data:this.get("data").date,type:this.get("stateType"),allowNever:this.get("allowNever"),durationOffset:this.get("durationOffset")});case "picker":return new a.Squarespace.DialogFields.Statepicker2({data:this.get("data"),states:this.get("states"),
stateOrder:this.get("stateOrder"),stateType:this.get("stateType"),allowNever:this.get("allowNever")});default:throw"Not Implemented";}},getStateType:function(b){b=b||this.get("data");var d=this.get("states");if(!a.Object.hasKey(d,b.state))return!1;b=/\[\s*([^|\]]+?)\s*(?:\|([^]]*))?\s*\]/g.exec(d[b.state].stateDesc);return(null!==b?String(b[1]).toLowerCase():!1)||"none"},getStateDesc:function(b,d){b=b.replace("[","{").replace("]","}");return a.Lang.sub(b,{DATE:this.getDateText(d),DURATION:this.getDurationText(d)})},
getDateText:function(b){var d="-";a.Lang.isValue(b)&&(d=a.Squarespace.DateUtils.dateFormat(new Date(b),{format:"%a, %b %d at %l:%M %p"}));return a.Lang.sub('<span class="date-wrapper"><span class="date">{date}</span></span>',{date:d})},getDurationText:function(b){var d=this.get("durationOffset"),g=this.get("allowNever")&&!a.Lang.isValue(b);b=a.Squarespace.DateUtils.dateFormat(b,{format:"%l:%M %p"});return a.Lang.sub('<span class="duration-wrapper"><span class="duration">{duration}</span></span>',
{duration:-1===d&&g?"never":0>d?"now":0===d?"today at "+b:1===d?"tomorrow at "+b:"in "+d+" days at "+b})},didDataChange:function(){var a=this.get("data");return d(a,this._initialData)}},{CSS_PREFIX:"sqs-state-manager",TEMPLATE:'<div class="clear field-workflow-wrapper"><div class="field-workflow-title">&nbsp</div><div class="field-workflow-description">&nbsp</div></div>',ATTRS:{strings:{},data:{},states:{},stateOrder:{validator:a.Lang.isArray},stateType:{},durationOffset:{value:-1,validator:function(b){return a.Lang.isNumber(Number(b))},
setter:function(a){return parseInt(a,10)}},allowNever:{validator:a.Lang.isBoolean}}})},"1.0",{requires:"base base-build squarespace-dialog-field-2 squarespace-date-utils squarespace-dialog-fields squarespace-dialog-state-picker squarespace-dialog-state-scheduler squarespace-node-flyout squarespace-node-flyover squarespace-panel".split(" ")});
YUI.add("squarespace-block-instagram",function(a){a.namespace("Squarespace.Block").Instagram=a.Base.create("block-instagram",a.Squarespace.Block.SummaryGallery,[],{},{CSS_PREFIX:"sqs-block-instagram",MODEL:a.Squarespace.ContentModel.InstagramBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Instagram},type:{value:a.Squarespace.BlockType.INSTAGRAM}}})},"1.0",{requires:["base","squarespace-enum","squarespace-block-summary-gallery","squarespace-block-instagram-editor","squarespace-block-instagram-model"]});
YUI.add("squarespace-youtube-oembed-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["youtube-oembed.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};f=this.escapeExpression;a='<iframe src="';(d=d.src)?d=d.call(b,{hash:{},data:h}):(d=b.src,d="function"===typeof d?d.apply(b):d);return a+=f(d)+'" height="'+f((d=(d=b.data,null==d||!1===d?d:d.height),"function"===typeof d?d.apply(b):d))+'" width="'+f((d=
(d=b.data,null==d||!1===d?d:d.width),"function"===typeof d?d.apply(b):d))+'" scrolling="no" frameborder="0" allowfullscreen>\n</iframe>'})})();a.Handlebars.registerPartial("youtube-oembed.html".replace("/","."),d.templates["youtube-oembed.html"])},"1.0",{requires:["handlebars-base"]});
var ColorTriangle=function(a,d,b,c){function e(a,b){for(var c=0;c<a;c++)b(c)}function g(a,b){if(a.length)e(a.length,function(c){b(a[c],c)});else for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}function f(a,b,c){0>c&&(c+=1);1<c&&(c-=1);return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}function h(a,b,c){a/=2*r;if(0==b)c=b=a=c;else{var d,e;e=0.5>c?c*(1+b):c+b-b*c;d=2*c-e;c=f(d,e,a+1/3);b=f(d,e,a);a=f(d,e,a-1/3)}return[c,b,a]}function k(a,c,d){var e=b.min(a,c,d),g=b.max(a,c,d),f=g-e,h,k;k=(g+e)/
2;if(0==f)h=e=0;else{var e=0.5>k?f/(g+e):f/(2-g-e),l=((g-a)/6+f/2)/f,n=((g-c)/6+f/2)/f,f=((g-d)/6+f/2)/f;a==g?h=f-n:c==g?h=1/3+l-f:d==g&&(h=2/3+n-l);0>h?h+=1:1<h&&(h-=1)}h*=2*r;return[h,e,k]}function l(a){var b=a.match(/^#([A-Fa-f0-9]+)$/);if(b&&0==b[1].length%3){a=b[1];var c=a.length/3,d=Math.pow(16,c)-1,b=parseInt(a.slice(0*c,1*c),16)/d,e=parseInt(a.slice(1*c,2*c),16)/d;a=parseInt(a.slice(2*c,3*c),16)/d;return[b,e,a]}}function n(a){1==a.length&&(a="0"+a);return a}function p(a,b,c){a=Math.round(255*
a).toString(16);b=Math.round(255*b).toString(16);c=Math.round(255*c).toString(16);return"#"+n(a)+n(b)+n(c)}function q(a,b){g(b,function(b,c){a[c]=b})}function t(a,b){this._setOptions(b);this._calculateProperties();this._createContainer();this._createTriangle();this._createWheel();this._createWheelPointer();this._createTrianglePointer();this._attachEvents();a=a||"#f00";"string"==typeof a?this.setHEX(a):this.setColor&&this.setColor(a)}var r=b.PI;if("function"!=typeof d.createElement("canvas").getContext)return null;
t.prototype={constructor:t,options:{size:150,padding:10,triangleSize:0.8,wheelPointerColor1:"#444",wheelPointerColor2:"#eee",trianglePointerSize:20,trianglePointerColor1:"#eee",trianglePointerColor2:"#444",background:"transparent"},_calculateProperties:function(){var a=this.options;this.padding=a.padding;this.innerSize=a.size-2*a.padding;this.triangleSize=a.triangleSize*this.innerSize;this.wheelPointerSize=this.wheelThickness=(this.innerSize-this.triangleSize)/2;this.wheelRadius=this.innerSize/2;
this.triangleRadius=this.triangleSize/2;this.triangleSideLength=b.sqrt(3)*this.triangleRadius},_calculatePositions:function(){var a=this.triangleRadius,c=this.hue,d=2/3*r,e=this.saturation,g=this.lightness,f=this.hx=b.cos(c)*a,h=this.hy=-b.sin(c)*a,k=this.sx=b.cos(c-d)*a,l=this.sy=-b.sin(c-d)*a,n=this.vx=b.cos(c+d)*a,a=this.vy=-b.sin(c+d)*a,c=(k+n)/2,d=(l+a)/2,e=(1-2*b.abs(g-0.5))*e;this.x=k+(n-k)*g+(f-c)*e;this.y=l+(a-l)*g+(h-d)*e},_createContainer:function(){var a=this.container=d.createElement("div");
a.className="color-triangle";a.style.display="block";a.style.padding=this.padding+"px";a.style.position="relative";a.style.width=a.style.height=this.innerSize+"px";a.style.background=this.options.background},_createWheel:function(){var a=this.wheel=d.createElement("canvas");a.width=a.height=this.innerSize;a.style.position="absolute";a.style.left=a.style.top=this.padding+"px";this._drawWheel(a.getContext("2d"));this.container.appendChild(a)},_drawWheel:function(a){var b,c;a.save();a.translate(this.wheelRadius,
this.wheelRadius);b=this.wheelRadius-this.triangleRadius;for(c=0;360>c;c++)a.rotate(r/-180),a.beginPath(),a.fillStyle="hsl("+c+", 100%, 50%)",a.arc(this.wheelRadius-b/2,0,b/2,0,2*r,!0),a.fill();a.restore()},_createTriangle:function(){var a=this.triangle=d.createElement("canvas");a.width=a.height=this.innerSize;a.style.position="absolute";a.style.left=a.style.top=this.padding+"px";this.triangleCtx=a.getContext("2d");this.container.appendChild(a)},_drawTriangle:function(){var a=this.hx,c=this.hy,d=
this.sx,e=this.sy,g=this.vx,f=this.vy,h=this.innerSize,k=this.triangleCtx;k.clearRect(0,0,h,h);k.save();k.translate(this.wheelRadius,this.wheelRadius);k.beginPath();k.moveTo(a,c);k.lineTo(d,e);k.lineTo(g,f);k.closePath();k.clip();k.fillStyle="#000";k.fillRect(-this.wheelRadius,-this.wheelRadius,h,h);var l=k.createLinearGradient(a,c,(d+g)/2,(e+f)/2),n="hsla("+b.round(this.hue*(180/r))+", 100%, 50%, ";l.addColorStop(0,n+"1)");l.addColorStop(1,n+"0)");k.fillStyle=l;k.fillRect(-this.wheelRadius,-this.wheelRadius,
h,h);a=k.createLinearGradient(g,f,(a+d)/2,(c+e)/2);a.addColorStop(0,"#fff");a.addColorStop(1,"rgba(255, 255, 255, 0)");k.globalCompositeOperation="lighter";k.fillStyle=a;k.fillRect(-this.wheelRadius,-this.wheelRadius,h,h);k.restore()},_createWheelPointer:function(){var a=this.wheelPointer=d.createElement("canvas");a.width=a.height=this.wheelPointerSize;a.style.position="absolute";this.container.appendChild(a)},_moveWheelPointer:function(a){a=this.wheelPointerSize/2;var c=this.wheelPointer.style,d=
this.wheelPointer.getContext("2d");c.top=this.padding+this.wheelRadius-b.sin(this.hue)*(this.triangleRadius+this.wheelThickness/2)-a+"px";c.left=this.padding+this.wheelRadius+b.cos(this.hue)*(this.triangleRadius+this.wheelThickness/2)-a+"px";d.clearRect(0,0,2*a,2*a);d.save();d.translate(a,a);d.rotate(b.PI/2-this.hue);d.fillStyle=this.options.wheelPointerColor1;d.fillRect(-1,-a,2,2*a);d.restore()},_createTrianglePointer:function(){var a=this.trianglePointer=d.createElement("canvas"),b=this.options.trianglePointerSize;
a.width=a.height=b;a.style.position="absolute";this._drawPointer(a.getContext("2d"),b/2,this.options.trianglePointerColor1,this.options.trianglePointerColor2);this.container.appendChild(a)},_moveTrianglePointer:function(a,b){var c=this.trianglePointer.style,d=this.options.trianglePointerSize/2;c.top=this.y+this.wheelRadius+this.padding-d+"px";c.left=this.x+this.wheelRadius+this.padding-d+"px"},_drawPointer:function(a,b,c,d){a.fillStyle=d;a.beginPath();a.arc(b,b,b,0,2*r,!0);a.fill();a.fillStyle=c;
a.beginPath();a.arc(b,b,b-2,0,2*r,!0);a.fill();a.fillStyle=d;a.beginPath();a.arc(b,b,b/4+2,0,2*r,!0);a.fill();a.globalCompositeOperation="destination-out";a.beginPath();a.arc(b,b,b/4,0,2*r,!0);a.fill()},inject:function(a){a.appendChild(this.container);a=this.triangle;for(var b=0,c=0;a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;a=[b,c];this.offset={x:a[0],y:a[1]}},dispose:function(){var a=this.container.parentNode;a&&a.removeChild(this.container)},getElement:function(){return this.container},
getCSS:function(){return"hsl("+Math.round(this.hue*(180/r))+", "+Math.round(100*this.saturation)+"%, "+Math.round(100*this.lightness)+"%)"},getHEX:function(){return p.apply(null,this.getRGB())},setHEX:function(a){this.setRGB.apply(this,l(a))},getRGB:function(){return h.apply(null,this.getHSL())},setRGB:function(a,b,c){this.setHSL.apply(this,k(a,b,c))},getHSL:function(){return[this.hue,this.saturation,this.lightness]},setHSL:function(a,b,c){this.hue=a;this.saturation=b;this.lightness=c;this._initColor()},
_initColor:function(){this._calculatePositions();this._moveWheelPointer();this._drawTriangle();this._moveTrianglePointer()},_attachEvents:function(){function a(b){c._move(b.offsetX||b.pageX,b.offsetY||b.pageY)}function b(){c.down&&(c.down=null,c._fireEvent("dragend"));var d=c.overlay,e=d.parentNode;e&&e.removeChild(d);d.removeEventListener("mousemove",a,!1);d.removeEventListener("mouseup",b,!1)}this.down=null;var c=this;this.container.addEventListener("mousedown",function(e){e.stopPropagation();var g=
c.overlay=d.createElement("div");g.className="color-triangle-overlay";g.style.position="fixed";g.style.top=g.style.bottom=g.style.left=g.style.right=0;g.style.zIndex=1E5;g.addEventListener("mousemove",a,!1);g.addEventListener("mouseup",b,!1);d.body.appendChild(g);c._map(e.clientX,e.clientY)},!1);this.container.addEventListener("mousemove",a,!1)},_map:function(a,c){var d=a,e=c;a-=this.offset.x+this.wheelRadius;c-=this.offset.y+this.wheelRadius;var g=b.sqrt(a*a+c*c);g>this.triangleRadius&&g<this.wheelRadius?
(this.down="wheel",this._fireEvent("dragstart"),this._move(d,e)):g<this.triangleRadius&&(this.down="triangle",this._fireEvent("dragstart"),this._move(d,e))},_move:function(a,c){if(this.down){a-=this.offset.x+this.wheelRadius;c-=this.offset.y+this.wheelRadius;var d=b.atan2(-c,a);0>d&&(d+=2*r);if("wheel"==this.down)this.hue=d,this._initColor(),this._fireEvent("drag");else if("triangle"==this.down){var e=(d+2*r-this.hue)%(2*r),g=e%(2/3*r)-r/3,f=0.5*this.triangleRadius,h=b.tan(g)*f,k=b.sqrt(a*a+c*c),
h=b.sqrt(f*f+h*h);k>h&&(e=b.tan(g)*k,e=b.atan(e/h),e>r/3?e=r/3:e<-r/3&&(e=-r/3),d+=e-g,e=(d+2*r-this.hue)%(2*r),g=e%(2/3*r)-r/3,h=b.tan(g)*f,k=b.sqrt(f*f+h*h));a=b.round(b.cos(d)*k);c=b.round(-b.sin(d)*k);d=this.lightness=b.sin(e)*k/this.triangleSideLength+0.5;g=1-2*b.abs(d-0.5);e=this.saturation=(b.cos(e)*k+this.triangleRadius/2)/(1.5*this.triangleRadius)/g;e=b.max(0,e);e=b.min(1,e);this.lightness=d;this.saturation=e;this.x=a;this.y=c;this._moveTrianglePointer();this._fireEvent("drag")}}}};if(a.net&&
a.net.brehaut&&a.net.brehaut.Color){var u=a.net.brehaut.Color;t.prototype.setColor=function(a){a=a.getHSL();this.hue=a.hue*(r/180);this.saturation=a.saturation;this.lightness=a.lightness;this._initColor()};t.prototype.getColor=function(){return u({hue:this.hue*(180/r),saturation:this.saturation,lightness:this.lightness})}}q(t.prototype,{_setOptions:function(a){a=a||{};var b=this.options,c=this.options={};g(b,function(b,d){c[d]=a.hasOwnProperty(d)?a[d]:b})}});q(t.prototype,{addEventListener:function(a,
b,c){c||(c=this);this.events||(this.events={});this.events[a]||(this.events[a]=[]);this.events[a].push({fn:b,scope:c})},removeEventListener:function(a,b){if(this.events)for(var c=this.events[a],d=0,e=c.length;d<e;d+=1)if(c[d]==b){c.splice(d,1);break}},_fireEvent:function(a){if(this.events){var b=this.events[a];if(b){var c=Array.prototype.slice.call(arguments,1);g(b,function(a){a.fn.apply(a.scope,c)})}}}});t.initInput=function(b,c){function e(){h?h.setHEX(b.value):(c.size=c.size||b.offsetWidth,c.background=
a.getComputedStyle(b,null).backgroundColor,c.margin=c.margin||10,c.event=c.event||"dragend",h=new t(b.value,c),h.addEventListener(c.event,function(){b.value=h.getHEX();f()}));var d=b.offsetTop,d=a.innerHeight-b.getBoundingClientRect().top>b.offsetHeight+c.margin+c.size?d+(b.offsetHeight+c.margin):d-(c.margin+c.size),g=h.getElement();g.style.position="absolute";g.style.left=b.offsetLeft+"px";g.style.top=d+"px";g.style.zIndex="1338";h.inject(b.parentNode)}function g(){h&&h.dispose()}function f(){var a=
d.createEvent("HTMLEvents");a.initEvent("change",!0,!1);b.dispatchEvent(a)}c=c||{};var h;b.addEventListener("focus",e,!1);b.addEventListener("blur",g,!1);b.addEventListener("keyup",function(){b.value.match(/^#((?:[0-9A-Fa-f]{3})|(?:[0-9A-Fa-f]{6}))$/)?(e(),f()):g()},!1)};t.initColorInputs=function(a){var b=d.getElementsByTagName("input");g(b,function(b){"color"==b.getAttribute("type")&&t.initInput(b,a)})};return t}(window,document,Math);YUI.add("thirdparty-colortriangle",function(a){},"1.0");
YUI.add("squarespace-layout-trash",function(a){a.namespace("Squarespace.Layout");a.Squarespace.Layout.BlockTrash=a.Base.create("blocktrash",a.Widget,[],{initializer:function(){var d=this.get("id");this.blockToRemove=null;this.drop=new a.Squarespace.Layout.Drop({node:this.get("boundingBox"),groups:["blocks"],lockScroll:!0});if(this.get("lowerPerformance"))a.DD.DDM.on(d+"|ddm:start",this._onDDMStart,this);this.drop.on(["drop:enter","drop:over"],this._onDropOver,this);this.drop.on("drop:hit",this._onDropHit,
this);this.drop.on("drop:exit",this._onDropExit,this);a.DD.DDM.before(d+"|ddm:end",this._beforeDDMEnd,this);this.after("markerLockChange",this._updateMarkerLock,this)},_onDDMStart:function(){this._bindScrollEvents();this._updatePositionAndShow()},_bindScrollEvents:function(){var d=this.get("id"),b=a.one(a.config.doc);b.on(d+"|scroll",a.Squarespace.debounce(function(){this.hide()},100,!0),this);b.on(d+"|scroll",a.Squarespace.debounce(function(){this._updatePositionAndShow()},80),this)},_updatePositionAndShow:function(){this.get("boundingBox").setStyle("top",
a.config.win.scrollY+this.get("winHeight")-20+"px");this.show();this.drop.sizeShim()},_onDropOver:function(){this.blockToRemove=a.DD.DDM.activeDrag.get("node");this.set("markerLock",!0)},_onDropExit:function(){this.blockToRemove=null;this.set("markerLock",!1)},_beforeDDMEnd:function(){var d=a.Widget.getByNode(this.blockToRemove);d&&d.queueForDestruction();this.set("markerLock",!1);a.one(a.config.doc).detach(this.get("id")+"|scroll")},_updateMarkerLock:function(a){this.get("editController").toggleInsertMarkerLock(a.newVal)},
destructor:function(){var d=this.get("id");this.drop.detach();this.drop.destroy();a.DD.DDM.detach(d+"|*");a.one(a.config.doc).detach(d+"|scroll")}},{CSS_PREFIX:"sqs-blocktrash",ATTRS:{render:{value:!0},markerLock:{value:!1},editController:{value:null},lowerPerformance:{value:!1},winHeight:{valueFn:function(){return a.config.win.innerHeight},lazyAdd:!1}}})},"1.0",{requires:["dd","squarespace-layout-drop","squarespace-layout-insert-marker","squarespace-ss-widget"]});
YUI.add("squarespace-layout-builder",function(a){function d(a){var b=[];if(3==a.get("nodeType"))return a.get("nodeValue");a.get("childNodes").each(function(a){b.push(d(a))});return b.join(" ")}a.namespace("Squarespace.Layout").Builder=a.Base.create("LayoutBuilder",a.Plugin.Base,[],{initializer:function(c){this.publish("layoutRendered",{defaultFn:function(b){b.layout.all(".sqs-block").getDOMNodes().forEach(function(b){a.Widget.getByNode(b).fire("layout-rendered")})},emitFacade:!0});this._blockSet=
new b;this._blockSet.on("add",function(a){a.block.addTarget(this);a.block.get("model").layout=this.get("layout");a.block.get("model").after("change",function(){this.syncDOMToContent({block:a.block})},this);a.block.after("destroy",function(){this.syncDOMToContent({block:a.block});var b=this.get("host").LayoutEditor;b&&b.cleanGrid();this._blockSet.remove(a.block)},this);this.syncDOMToContent({block:a.block})},this);c=this.get("host");var d=this._getContent();c.addClass("sqs-layout sqs-grid-"+this.get("columns"));
d||(d=this.toJSON(),this._setContent(d));c.empty();this._cleanupImportedHTML(d);c=this.fromJSON(c,d)},fromJSON:function(b,d){var g=this.get("host"),f=new a.Parallel;this._isBuildingFromJSON=!0;var h=this._fromJSON(b,d,f);this._isBuildingFromJSON=!1;g.addClass("sqs-layout-rendering");f.done(a.bind(function(){g.removeClass("sqs-layout-rendering");this.fire("layoutRendered",{layout:b})},this));return h},_fromJSON:function(b,d,g){this.blocks=[];var f=a.Squarespace.BlockTypeByString,h=this.get("editController"),
k=h.getRenderableBlocks(this.get("editMode")),l=h.isMobileApp()?h.get("blogApp").get("isNewPost"):!1;d.blocks?d.blocks.forEach(function(d){if(a.Lang.isNumber(d.type)){var e=k.get(f[d.type]);a.Lang.isValue(e)?(d=new e.ctor({editMode:this.get("editMode"),editController:h,id:d.id,model:d.value,stack:g,type:d.type,isNewBlock:l}),this.registerBlock(d),d.on("save",this.syncDOMToContent,this)):d=new a.Squarespace.Block.Unrenderable({editMode:this.get("editMode"),editController:h,id:d.id,model:d.value,stack:g,
type:d.type});d.render(b)}},this):d.rows?d.rows.forEach(function(a){var d=this.createRow();b.append(d);this._fromJSON(d,a,g)},this):d.columns&&d.columns.forEach(function(a){var f=this.createColumn(null,1<d.columns.length?a.span:null);b.append(f);this._fromJSON(f,a,g)},this);return b},createRow:function(b){return a.Node.create('<div class="sqs-row"></div>').setContent(b)},createColumn:function(b,d){a.Lang.isValue(d)||(d=this.get("columns"));var g=Math.min(d,this.get("columns"));return a.Node.create('<div class="sqs-col sqs-col-'+
g+'"></div>').setContent(b)},toJSON:function(b){b=b?b:this.get("host");var d={};if(!b)throw"Invalid node passed toJSON().";if(b.hasClass("sqs-row"))d.columns=[],b.get("children").filter(".sqs-col").each(function(a){d.columns.push(this.toJSON(a))},this);else if(b.hasClass("sqs-col")||b.hasClass("sqs-layout")){b.test("[class*='sqs-col-']")?d.span=a.Squarespace.Block.Utils.getValFromClass(b,"sqs-col-"):b.test("[class*='sqs-grid-']")?d.span=a.Squarespace.Block.Utils.getValFromClass(b,"sqs-grid-"):b.test("[class*='columns-']")?
d.span=a.Squarespace.Block.Utils.getValFromClass(b,"columns-"):console.error("Cannot find r.span from the wrappers");var g=[],f=[];b.get("children").each(function(b){if(b.test(".sqs-row"))0!==g.length&&(f.push({columns:[{span:d.span,blocks:a.clone(g,!0)}]}),g=[]),f.push(this.toJSON(b));else if(b.test(".sqs-block")){var c=a.Widget.getByNode(b);b=c?c.toJSON():{id:b.getAttribute("id"),type:b.getData("block-type"),value:a.JSON.parse(b.getData("block-json"))};if(!b)throw"Block has no JSON.";g.push(b)}},
this);0===f.length?d.blocks=g:(0!==g.length&&((a.Lang.isUndefined(d.span)||a.Lang.isNull(d.span))&&console.error("Block column span is invalid: ",d.span),f.push({columns:[{span:d.span,blocks:a.clone(g,!0)}]})),d.rows=f)}if(d.rows&&0===d.rows.length||d.columns&&0===d.columns.length)delete d.rows,delete d.columns,d.blocks=[],b.get("children").filter(".sqs-block").each(function(a){(a=a.getData("block"))&&d.blocks.push(a.toJSON())},this);return d},syncDOMToContent:function(){this._isBuildingFromJSON||
this._setContent(this.toJSON())},_setContent:function(a){this.get("layout").setAttrs(a)},_getContent:function(){return this.get("layout").toJSON()},registerBlock:function(a){this._blockSet.add(a);a.addTarget(this)},deregisterBlock:function(a){this._blockSet.remove(a)},_cleanupImportedHTML:function(b){function e(b,c,e){var g=[],f,h=/\/static\/([a-z0-9]{24})\/([a-z0-9]{24})\/([a-z0-9]{24})\/[a-z0-9]{13}/i;b.each(function(b){if(a.one(b).test("iframe"))f=a.Squarespace.PageLayoutTools.makeBlock(a.Squarespace.BlockType.EMBED,
{html:b.get("outerHTML"),resolvedBy:"manual",title:"",url:""}),g.push(f);else if(a.one(b).test("img")&&h.test(b.get("src"))){var k=c.one('img[src="'+b.getAttribute("src")+'"]'),l=null;if(k&&(l=k.ancestor("a"),!l||!l.test("a")))l=null;for(var n=b.get("src").match(h),k=[],p=0;p<n.length;p++)24==n[p].length&&k.push(n[p]);n=null;3==k.length&&(n=k[2]);n?(k="",""!=a.Lang.trim(b.get("title"))?k=b.get("title"):""!=a.Lang.trim(b.get("alt"))&&(k=b.get("alt")),l={description:k,linkTo:l?l.getAttribute("href"):
"",newwindow:l?l.hasAttribute("_blank"):!1,imageId:n},e&&(l.image={assetUrl:b.get("src"),id:n}),f=a.Squarespace.PageLayoutTools.makeBlock(a.Squarespace.BlockType.IMAGE,l),g.push(f)):(window.trackClientError&&window.trackClientError({url:document.location.href,message:"Error creating image block from imported html. Could not find valid objectId.",file:"builder.js",line:"LayoutBuilder._cleanupImportedHTML / makeNewBlocks"}),console.error("Error cleaning up an image: ",b))}else if(a.one(b).test("img"))f=
a.Squarespace.PageLayoutTools.makeBlock(a.Squarespace.BlockType.CODE,{wysiwyg:{engine:"code",mode:"htmlmixed",isSource:!1,source:""},html:'<img src="'+b.get("src")+'" title="'+b.get("title")+'" alt="'+b.get("alt")+'"/>'}),g.push(f);else if(b.getContent()&&""!==d(b)){if(!f||f.type==a.Squarespace.BlockType.EMBED||f.type==a.Squarespace.BlockType.IMAGE||f.type==a.Squarespace.BlockType.CODE)f=a.Squarespace.PageLayoutTools.makeBlock(a.Squarespace.BlockType.HTML,{html:"",wysiwyg:{html:""}}),g.push(f);f.value.html+=
b.get("outerHTML")}});return g}function g(b,c){function d(a,b){b(a);for(a=a.firstChild;a;)d(a,b),a=a.nextSibling}function e(a){a=(a=a.tagName)?a.toLowerCase():"textNode";a="b"===a?"strong":a;return"i"===a?"em":a}function g(a,b,c){for(var d=[],f=[],h=b.length-1;0<=h;h--){var k=b[h],l=!1;ca&&h===b.length-1&&k===e(a)?l=!0:"strong"===k&&!c.ancestor(k)?c.ancestor("b")||(l=!0):"em"===k&&!c.ancestor(k)?c.ancestor("i")||(l=!0):c.ancestor(k)||(l=!0);l?f.push(k):d.unshift(k)}return{closed:f,nodes:d}}function f(b,
c){0===x.length?E.hasOwnProperty(b)?(P+="<p>",x.push("p")):(P+="<"+b+">",x.push(b)):B.hasOwnProperty(x[x.length-1])&&0<=a.Array.indexOf(B[x[x.length-1]],b)&&(0<H.length?(P+=H,H="",x.push(b),l.push(P),P="<"+b+">",ca=!0):(P+="<"+b+">",x.push(b)))}function h(a,b){k(null,!0);P+="</"+a+">";l.push(P);P="";b&&x.pop();0===x.length&&ca&&(ca=!1)}function k(a,b){a&&(H+="</"+a+">");b&&(P+=H,H="")}var l=[],n="h1 h2 h3 h4 h5 h6 p ul ol li blockquote".split(" "),p="a strong em b i cite".split(" "),B={ul:["li","ol",
"ul"],ol:["li","ul","ol"],li:["ol","ul","li"],blockquote:["ul","ol","li","p"]},E={li:["ul","ol"]},S=["br","table","tr","div"],I=a.Node.create("<div></div>"),A=[],H="",x=[],P="",ca=!1;d(b._node,function(b){var d,r=a.one(b),q=e(b),I=r.get("text"),E=g(b,A,r),P=g(b,x,r);if(0<E.closed.length){A=E.nodes;for(d=0;d<E.closed.length;d++)k(E.closed[d])}if(0<P.closed.length){x=P.nodes;for(d=0;d<P.closed.length;d++)h(P.closed[d])}if(r.test(c))l.push(r.get("outerHTML"));else if(0<=a.Array.indexOf(p,e(b)))!("a"===
q&&r.one(">"+c))&&!(0<=a.Array.indexOf(A,e(b)))&&(A.push(q),"a"==q?(b=r.getAttribute("target"),d="",a.Lang.isValue(b)&&0<b.length&&(d=' target="'+b+'"'),H+='<a href="'+r.get("href")+'"'+d+">"):H+="<"+q+">");else if(0<=a.Array.indexOf(n,e(b)))f(q,b);else if(3==b.nodeType&&""!=a.Lang.trim(a.one(b).get("text")))""!=a.Lang.trim(I)&&(x.length||f("p",b),I=I.replace(/</g,"&lt;").replace(/>/g,"&gt;"),H+=I);else if(0<=a.Array.indexOf(S,e(b)))if(0<x.length)r=x[x.length-1],h(r,!0),f(r,b);else if(0<H.length){for(d=
A.length-1;0<=d;d--)k(A[d]);f("p",b);h("p",!0)}});(function(){var a,b;for(a=A.length-1;0<=a;a--)k(A[a]);for(a=x.length-1;0<=a;a--)b=0===a,h(x[a],b)})();1>=l.length&&l.push("<p></p>");I.append(a.Node.create(l.join("")));return a.Node.create(I.get("innerHTML"))._node}if(b.rows)this._cleanupImportedHTML(b.rows);else if(a.Lang.isArray(b.columns))this._cleanupImportedHTML(b.columns);else if(a.Lang.isArray(b))for(var f=0;f<b.length;f++)this._cleanupImportedHTML(b[f]);else if(b.blocks){for(var f=[],h=0;h<
b.blocks.length;h++)if(b.blocks[h].type==a.Squarespace.BlockType.HTML&&b.blocks[h].value){var k=a.guid(),l=b.blocks[h].value.html,n=l.toLowerCase();if((-1!==n.indexOf("<iframe")||-1!==n.indexOf("<img"))&&125>n.split("<iframe").length-1+(n.split("<img").length-1)){n=a.Node.create('<div id="'+k+'"/>');try{n.setContent("<div>"+l+"</div>")}catch(p){console.error("Skipping over error while trying to clean import html: ",p);continue}l=g(n,"iframe, img");l=a.one(l);l.get("id")!=k&&(k=e(l.get("childNodes"),
n,this.get("editController").isMobileApp()),f.push({find:b.blocks[h],replaceWith:k}))}}if(0<f.length)for(h=0;h<f.length;h++){k=f[h];l=[b.blocks.indexOf(k.find),1];for(n=0;n<k.replaceWith.length;n++)l.push(k.replaceWith[n]);b.blocks.splice.apply(b.blocks,l)}}}},{NS:"LayoutBuilder",ATTRS:{columns:{valueFn:function(){return this.get("layout").get("columns")}},editController:{writeOnce:!0,validator:function(b){return a.instanceOf(b,a.Squarespace.EditControllerBase)}},layout:{writeOnce:!0,validator:function(b){return a.instanceOf(b,
a.Squarespace.Models.PageLayout)}},editMode:{writeOnce:!0,validator:function(b){return a.Squarespace.Layout.EditMode.isValid(b)}}}});var b=a.Base.create("BlockSet",a.Base,[],{initializer:function(){this._blockMap={}},add:function(a){this._containsBlock(a)||(this._blockMap[a.get("id")]=a,a.after("destroy",function(){this.remove(a)},this),this.fire("add",{block:a}))},_containsBlock:function(b){return a.Lang.isValue(this._blockMap[b.get("id")])},remove:function(a){this._containsBlock(a)&&(delete this._blockMap[a.get("id")],
this.fire("remove",{block:a}))}});a.Squarespace.PageLayoutTools={sanitizeImportedECB:function(b){if(this.isEmptyECB(b)&&a.Lang.isValue(b.get("html"))){var d=b.get("html");b.get("layout").setAttrs({rows:[{columns:[{span:12,rows:[{columns:[{span:12,blocks:[this.makeBlock(a.Squarespace.BlockType.HTML,{html:d,wysiwyg:{html:d}})]}]}]}]}]})}},isEmptyECB:function(b){b=this.getBlocks(b.get("layout").toJSON());return 0===b.length?!0:1==b.length&&(b=b[0],b.type===a.Squarespace.BlockType.HTML)?""===b.value.html:
!1},convertLayoutToNewColumnCount:function(b,d){function g(b){a.Array.each(b.columns||b.get("columns"),f)}function f(b){b.span=d;b.rows&&a.Array.each(b.rows,g)}b.set("columns",d);b.get("rows").each(g)},getBlocks:function(a){var b=[];if(a&&a.rows)for(var d=0;d<a.rows.length;d++)b=b.concat(this._getBlocksRow(a.rows[d]));return b},_getBlocksRow:function(a){var b=[];if(a.columns)for(var d=0;d<a.columns.length;d++)b=b.concat(this._getBlocksColumn(a.columns[d]));return b},_getBlocksColumn:function(a){var b=
[];if(a.rows)for(var d=0;d<a.rows.length;d++)b=b.concat(this._getBlocksRow(a.rows[d]));a.blocks&&(b=b.concat(a.blocks));return b},getSimpleEditableContentBlock:function(b){var d={columns:12,rows:[{columns:[{span:12,rows:[{columns:[{span:12,blocks:Array.prototype.slice.call(arguments)}]}]}]}]};b||(d=a.JSON.stringify(d));return{layout:d}},getSimpleHTMLEditableContentBlock:function(b,d){return this.getSimpleEditableContentBlock(a.Squarespace.PageLayoutTools.makeBlock(a.Squarespace.BlockType.HTML,{html:b,
wysiwyg:{html:b}},d))},makeBlock:function(b,d){return{type:b,id:a.Squarespace.Utils.getGuid(),value:d}}}},"1.0",{requires:"base json node squarespace-util squarespace-enum squarespace-block-base-modelsync squarespace-block-utils squarespace-block-unrenderable squarespace-layout-snapshot squarespace-string-utils".split(" ")});
YUI.add("squarespace-models-form",function(a){a.namespace("Squarespace.Models");var d=a.Squarespace.Models.Form=a.Base.create("form",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.REST_API_ROOT+"forms",url:a.Squarespace.REST_API_ROOT+"forms/{id}",toJSON:function(){var b=d.superclass.toJSON.call(this);b.fields=a.Array.map(b.fields,function(b){return a.JSON.stringify(b)});b.submissionMessage=a.JSON.stringify(b.submissionMessage);b.preSubmitTopics=b.preSubmitTopics.toJSON();return b},saveStorageBackends:function(b,
c,d){a.Data.post({url:"/api/form/SaveFormBackendConfig",data:{id:this.get("id"),googleDocsConnect:b.googleDocs,mailchimpConnect:b.mailchimp,emailConnect:b.email,siteUserConnect:b.siteUser},success:function(a){this.setAttrs(a.form);c&&c.call(d||this,null)},failure:function(a){a=a.errors||a;c&&c.call(d||this,a,null)}},this)}},{ATTRS:{id:{value:null},type:{value:a.Squarespace.FormType.FORM_BLOCK,validator:a.Squarespace.AttrValidators.isNumber},name:{value:"New Form",validator:a.Squarespace.AttrValidators.isString},
fields:{value:[],setter:function(b){return a.Array.map(b,function(b){return a.Lang.isString(b)?a.JSON.parse(b):b},this)},validator:a.Squarespace.AttrValidators.isArray},connectedBackends:{value:null,validator:a.Squarespace.AttrValidators.isNullOrArray},submitButtonText:{value:"Submit",validator:a.Lang.isString},submissionMessage:{value:{html:"Thank you!"},setter:function(b){return a.Lang.isString(b)?a.JSON.parse(b):b}},submissionHTML:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},
preSubmitTopics:{valueFn:function(){return new a.Squarespace.Models.FormPreSubmitTopicList},setter:function(b){if(!a.Lang.isValue(b)||b instanceof a.Squarespace.Models.FormPreSubmitTopicList)return b;if(a.Lang.isArray(b))return new a.Squarespace.Models.FormPreSubmitTopicList({items:b});console.error("Form: Invalid preSubmitTopics. Must be an array or a FormPreSubmitTopicList.")}},usePreSubmit:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean}}});a.Squarespace.Models.FormList=a.Base.create("formList",
a.ModelList,[a.Squarespace.ModelSync.REST],{model:a.Squarespace.Models.Form,filterByType:function(a){return this.filter(function(c){return c.get("type")===a})}});a.Squarespace.FormCache=new a.Squarespace.Models.FormList},"1.0",{requires:"base model json squarespace-model-sync-rest squarespace-enum squarespace-util squarespace-attr-validators squarespace-models-form-pre-submit-topic".split(" ")});
YUI.add("squarespace-block-summary-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog");a.Squarespace.Block.ModelEditorDialog.Summary=a.Base.create("SummaryModelEditorDialog",a.Squarespace.ModelEditorDialog,[],{initializer:function(){var a=this.get("dialog");this.get("model").after("collectionIdChange",this._updateAutocomplete,this);this.get("dialog").on("ready",this._updateAutocomplete,this);a.on("shown",function(b){a.getField("pageSize").refreshWidth()},this)},_updateAutocomplete:function(d){var b=
this.get("model").get("collectionId");d=this.get("dialog").getField("filter");if(a.Lang.isString(b)&&0!==b.length&&a.Lang.isValue(d)){var c=d.get("tagField"),e=d.get("categoryField"),b={collectionId:b};a.Lang.isValue(d)&&(this._getNewAutoCompleteData(c,"/api/commondata/GetAutoCompleteTags",b),this._getNewAutoCompleteData(e,"/api/commondata/GetAutoCompleteCategories",b))}},_getNewAutoCompleteData:function(d,b,c){a.Data.get({url:b,data:c,success:function(b){var c=d.get("acWidget");a.Lang.isValue(c)&&
c.set("source",b)}})},_createSelectOption:function(a,b){return{value:a,label:b}},_getDefaultDialogConfig:function(){return{width:380,height:420,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Summary",tabTitle:"Content",icon:"/universal/images-v6/icons/icon-summary-16-light.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"<strong>Items to Display.</strong>  Select the number of items this block should display."}},
{ctor:a.Squarespace.DialogFields.Slider,required:!0,config:{name:"pageSize",range:[1,20],"strings.suffix":"Item",pluralize:!0,labelWidth:60,submitOnEnter:!0}},{ctor:a.Squarespace.DialogFields.ContentIdSelector,config:{name:"collectionId",showCollectionTagsAndCategories:!1,showGroupTitles:!0,collectionFilter:{collectionType:[a.Squarespace.CollectionTypes.PRODUCT,a.Squarespace.CollectionTypes.GENERIC],folder:!1}}}]},{tabTitle:"Filters",scroll:!0,fields:[{name:"filter",ctor:a.Squarespace.DialogFields.SummaryFilter}]},
{tabTitle:"Design",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Check,name:"title",config:{"strings.title":"Title","strings.description":"Display the title of each item."}},{ctor:a.Squarespace.DialogFields.Check,name:"thumbnail",config:{"strings.title":"Thumbnail","strings.description":"Display the thumbnail image for each item."}},{ctor:a.Squarespace.DialogFields.Check,name:"excerpt",config:{"strings.title":"Excerpt","strings.description":"Display an excerpt of each item."}}]}]}}},{ATTRS:{dialogConfig:{valueFn:"_getDefaultDialogConfig",
validator:a.Lang.isObject}}})},"1.0",{requires:"base model squarespace-model-editor squarespace-dialog-summary-filter squarespace-dialog-check squarespace-dialog-slider squarespace-dialog-content-selector".split(" ")});
YUI.add("squarespace-timers",function(a){var d=a.namespace("Squarespace.Timers").FixedInterval=a.Base.create("FixedInterval",a.Base,[],{initializer:function(a){this._iterations=0},run:function(){this._shouldRun()&&a.later(this._getDelayLimitByMax(),this,this._runner)},_runner:function(){this._timer=null;this.get("fn")();this._iterations++;this.run()},_shouldRun:function(){return this.isRunning()||0<this.get("maxIterations")&&this._iterations>=this.get("maxIterations")||!0===this.get("untilFn")()?
!1:!0},_getDelayLimitByMax:function(){var a=this.getDelay(),c=this.get("maxDelay");return 0<c&&a>c?c:a},getDelay:function(){return this.get("initialDelay")},isRunning:function(){return a.Lang.isValue(this._timer)},pause:function(){clearTimeout(this._timer);this._timer=null},reset:function(){this._iterations=0}},{ATTRS:{initialDelay:{value:2E3,validator:a.Lang.isNumber},maxIterations:{value:-1,validator:a.Lang.isNumber},maxDelay:{value:-1,validator:a.Lang.isNumber},fn:{validator:a.Lang.isFunction},
untilFn:{value:noop,validator:a.Lang.isFunction}}});a.namespace("Squarespace.Timers").LinearIncreaseInterval=a.Base.create("LinearIncreaseInterval",d,[],{getDelay:function(){return this.get("initialDelay")+this._iterations*this.get("delayIncrement")}},{ATTRS:{delayIncrement:{value:500,validator:a.Lang.isNumber}}})},"1.0",{requires:["base"]});
YUI.add("squarespace-dialog-text",function(a){var d=a.namespace("Squarespace.DialogFields").Text=a.Base.create("text",a.Squarespace.DialogField2,[],{renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("name"),b=this.get("autocompleteType");this._textField=this.get("contentBox").one("input[type]");this.get("dialog")&&this._textField.setAttribute("tabindex",this.get("dialog").getNextTabIndex());this._textField.set("type",this.get("password")?"password":"text");a&&this._textField.setAttribute("name",
a);b&&this._textField.setAttribute("x-autocompletetype",b);this._set("errorFlyoutAnchor",this._textField);this._textField.set("value",this.get("data"))},bindUI:function(){d.superclass.bindUI.call(this);this.get("id");this.after("dataChange",this._afterDataChange,this);this._textField.after("valuechange",this._afterValueChange,this);var b=this._textField.getDOMNode(),c="addEventListener";a.Lang.isFunction(b.attachEvent)&&(c="attachEvent");b[c]("focus",a.bind(this._afterFocus,this));b[c]("blur",a.bind(this._afterBlur,
this));this._textField.on("click",function(a){a.halt()});this._textField.after("keyup",function(a){13===a.keyCode&&this.get("submitOnEnter")&&(this.fire("submit"),(a=this.get("dialog"))&&a.saveAndClose())},this);this._textField.on("keypress",this.applyKeyFilter,this);!0===this.get("mailcheck")&&this._textField.plug(a.Squarespace.Plugin.MailCheck,{field:this})},syncUI:function(){d.superclass.syncUI.call(this);var a=this.get("strings.placeholder");a&&this._textField.setAttribute("placeholder",a);this.get("disabled")?
this._textField.setAttribute("disabled","disabled"):this._textField.removeAttribute("disabled")},getErrors:function(){var a=this.get("data");return this.get("validator")(a)?this.get("required")&&this.isEmpty()?[this.get("strings.requiredFieldEmptyMessage")]:[]:[this.get("strings.validationFailMessage")]},isEmpty:function(){return""===this.get("data")},focus:function(){d.superclass.focus.call(this);this.get("rendered")&&this._textField.focus()},select:function(){this.get("rendered")&&this._textField.select()},
blur:function(){d.superclass.blur.call(this);this.get("rendered")&&this._textField.blur()},disable:function(){d.superclass.disable.call(this);this.get("rendered")&&this._textField.setAttribute("disabled","disabled")},enable:function(){d.superclass.enable.call(this);this.get("rendered")&&this._textField.removeAttribute("disabled")},applyKeyFilter:function(b){var c=this.get("keyFilter"),d=this.get("keyFilterExplanation"),e;if(c&&(0===a.UA.gecko||b._event.isChar))e=String.fromCharCode(b.which),!e.match(RegExp(c))&&
0<e.length&&(d&&this.showError(d),b.halt())},_afterDataChange:function(a){a.dataSync||this._textField.set("value",a.newVal||"",{dataSync:!0});this.hideError()},_afterValueChange:function(a){a.dataSync||this.set("data",a.newVal,{dataSync:!0})},_afterFocus:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",!0);a.UA.ie||this.focus()},_afterBlur:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",!1);this.set("data",this._textField.get("value"),
{dataSync:!0});this.blur()}},{CSS_PREFIX:"sqs-text",HANDLEBARS_TEMPLATE:"dialog-text.html",ATTRS:{strings:{value:{placeholder:"",validationFailMessage:"This must be a string.",requiredFieldEmptyMessage:"This is a required field."}},data:{value:"",setter:function(b){a.Lang.isValue(b)||(b="");return b},validator:function(b){return a.Lang.isString(b)||!a.Lang.isValue(b)}},validator:{value:a.Lang.isString},password:{value:!1,validator:a.Lang.isBoolean},submitOnEnter:{value:!1,validator:a.Lang.isBoolean},
disabled:{value:!1,validator:a.Lang.isBoolean},autocompleteType:a.Squarespace.AutocompleteTypeATTR,mailcheck:{value:!1,validator:a.Lang.isBoolean},keyFilter:{},keyFilterExplanation:{value:""},maxLength:{value:null},readOnly:{value:!1},selectAllOnFocus:{value:!1}}});a.Squarespace.DialogFields.LabeledText=a.Base.create("labeledText",a.Squarespace.DialogFields.Text,[a.Squarespace.DialogFields.DialogFieldLabel],{},{CSS_PREFIX:"sqs-labeled-text",LABEL_CONFIG:{forNode:"input[type]"}});var b=a.Squarespace.DialogFields.MoneyText=
a.Base.create("moneyText",a.Squarespace.DialogFields.Text,[],{renderUI:function(){b.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(a.Squarespace.Plugin.MoneyFormatter)},bindUI:function(){var a=this.get("contentBox").one("input");a.on("valuechange",function(){this.set("data",a.moneyFormatterPlugin.get("data"))},this)}},{CSS_PREFIX:"sqs-money-text",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{data:{value:0,validator:a.Lang.isNumber},validator:{value:a.Lang.isNumber},prefixUnit:{valueFn:function(){return a.Squarespace.Commerce.currencySymbol()}}}}),
c=a.Squarespace.DialogFields.Email=a.Base.create("emailText",a.Squarespace.DialogFields.Text,[],{renderUI:function(){c.superclass.renderUI.call(this);this.get("contentBox").one("input").setAttribute("type","email")}},{CSS_PREFIX:"sqs-email-text",ATTRS:{mailcheck:{value:!0}}}),e=a.Squarespace.DialogFields.Url=a.Base.create("urlText",a.Squarespace.DialogFields.Text,[],{renderUI:function(){e.superclass.renderUI.call(this);this._textField.wrap('<div class="sqs-input-wrapper-content"></div>');var a=this.get("contentBox").one(".sqs-input-wrapper-content");
a.wrap('<div class="sqs-input-wrapper"></div>');a.prepend('<div class="prefix">'+this.get("prefix")+"</div>")},bindUI:function(){e.superclass.bindUI.call(this);this._textField.after("keyup",this.onKeyUp,this)},onKeyUp:function(b){var c=this.get("filter"),d;if("url-slug"===c||"url-slug-with-slash"==c)d=this._textField.get("value"),c="url-slug"===c?a.Squarespace.Utils.createUrl(d):a.Squarespace.Utils.createUrlWithSlash(d),b=this._textField.selectionStart-(32==b.keyCode?0:1),d!=c&&(this._textField.set("value",
c),this._textField.selectionStart=b,this._textField.selectionEnd=b)}},{CSS_PREFIX:"sqs-url-text",ATTRS:{filter:{value:"url-slug-with-slash"},prefix:{value:"/"}}})},"1.0",{requires:"base base-build event-valuechange squarespace-dialog-field-2 squarespace-autocomplete-types squarespace-dialog-text-template squarespace-dialog-label squarespace-mailcheck squarespace-attr-validators".split(" ")});
YUI.add("squarespace-content-item-types-product-physical",function(a){a.namespace("Squarespace.ContentItemEditor");var d=a.Squarespace.ContentItemEditor.ProductPhysical=a.Base.create("ProductPhysicalContentItemEditor",a.Squarespace.ContentItemEditor.ProductVariants,[],{getDialogData:function(){var b=d.superclass.getDialogData.call(this);b.pricingPlaceholder={productType:a.Squarespace.ProductTypes.PHYSICAL,variants:b.variants.variants};return b},getPresentationName:function(){return"Physical Product"}},
{ATTRS:{editorConfiguration:{value:{name:"editProduct",title:"Edit {presentationName}",width:850,height:{$valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?505:420}},overlay:0.5,closeOthers:!1,initialDataByReference:!0,tabs:[{$include:"tabs.primary.product.base",$update:{".pricingPlaceholder":{$include:"fields.productVariantsPricingPlaceholder"}}},{$include:"tabs.product.variantsPhysical"},{$include:"tabs.product.additionalInfo"},{$include:"tabs.product.workflow"},{$include:"tabs.options.product"},
{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}})},"1.0",{requires:["base","squarespace-util","squarespace-content-item-types-product-variants"]});
YUI.add("squarespace-tab-view-tab-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["tab-view-tab.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k=this.escapeExpression;return(a=d["if"].call(b,b.id,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;c='\n  <div class="tab-view-tab ';(e=d.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e="function"===typeof e?e.apply(a):e);c+=k(e)+'" data-tabId="';
(e=d.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e="function"===typeof e?e.apply(a):e);c+=k(e)+'">\n    <span class="label">';(e=d.label)?e=e.call(a,{hash:{},data:b}):(e=a.label,e="function"===typeof e?e.apply(a):e);return c+=k(e)+"</span>\n  </div>\n"},h),data:h}))||0===a?a:""})})();a.Handlebars.registerPartial("tab-view-tab.html".replace("/","."),d.templates["tab-view-tab.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-block-rss",function(a){a.namespace("Squarespace.ContentModel").RSSBlock=a.Base.create("RSSBlockModel",a.Model,[],{},{ATTRS:{collectionId:{}}});a.namespace("Squarespace.Block").Rss=a.Base.create("block-rss",a.Squarespace.Block.ModelSyncBase,[],{},{MODEL:a.Squarespace.ContentModel.RSSBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Rss},type:{value:a.Squarespace.BlockType.RSS}},CSS_PREFIX:"sqs-block-rss"})},"1.0",{requires:"base model squarespace-enum squarespace-block-base-modelsync squarespace-models-template squarespace-models-content-collection squarespace-block-rss-editor".split(" ")});
YUI.add("squarespace-dialog-statepicker-inset-timer",function(a){var d=function(b,d){var g=String(b),f=Number(d),h="";if(!a.Lang.isNumber(f))return g;for(var k=0,f=f-g.length;k<f;k++)h+="0";return h+g},b=a.namespace("Squarespace.DialogFields").InsetTimer=a.Base.create("insetTimer",a.Squarespace.DialogField2,[a.WidgetChild],{initializer:function(b){if(a.Lang.isValue(b.data))this.set("minutes",b.data.minutes),this.set("ampm",b.data.ampm),this.set("hours",b.data.hours);else{b=new Date;var d=b.getHours();
this.set("data",{minutes:b.getMinutes(),ampm:a.Lang.trim(a.Squarespace.DateUtils.dateFormat(Date.now(),{format:"%p"})),hours:11<d?d-12:d})}},renderUI:function(){b.superclass.renderUI.call(this);var a=this.get("contentBox");this._ampmControl=a.one(".ampm");this._hoursControl=a.one(".hour");this._minutesControl=a.one(".minute")},bindUI:function(){b.superclass.bindUI.call(this);this._ampmControl.on("click",this.selectControlEl,this,"ampm");this._minutesControl.on("click",this.selectControlEl,this,"minutes");
this._hoursControl.on("click",this.selectControlEl,this,"hours");this._ampmControl.on("blur",this.onTimerBlur,this,"ampm");this._minutesControl.on("blur",this.onTimerBlur,this,"minutes");this._hoursControl.on("blur",this.onTimerBlur,this,"hours");this._ampmControl.on("keydown",this.onTimerKeyDown,this,"ampm");this._minutesControl.on("keydown",this.onTimerKeyDown,this,"minutes");this._hoursControl.on("keydown",this.onTimerKeyDown,this,"hours");this.after(["minutesChange","hoursChange","ampmChange"],
this.updateData,this)},syncUI:function(){b.superclass.syncUI.call(this);this._ampmControl.set("value",this.get("ampm"));this._minutesControl.set("value",d(this.get("minutes"),2));this._hoursControl.set("value",this.get("hours"))},updateData:function(a){var b=this.get("data");b[a.attrName]=a.newVal;this.set("data",b)},selectControlEl:function(a,b){-1!==["ampm","minutes","hours"].indexOf(b)&&a.target.select()},onTimerBlur:function(a,b){("hours"===b||"ampm"===b||"minutes"===b)&&this.set(b,a.target.get("value"));
this.syncUI()},onTimerKeyDown:function(a,b){65==a.keyCode?(this._ampmControl.set("value","AM"),a.halt()):80==a.keyCode?(this._ampmControl.set("value","PM"),a.halt()):13!=a.keyCode&&("hours"===b&&186===a.keyCode?this._minutesControl.select():"minutes"===b&&32===a.keyCode&&this._ampmControl.select(),this._invalidHourMinKeyCode(a.keyCode)&&("minutes"===b||"hours"===b)?a.halt():a.target.hasClass("ampm")&&9!==a.keyCode&&a.halt())},_invalidHourMinKeyCode:function(a){return(57<a||48>a)&&(96>a||105<a)&&9!=
a&&16!=a&&37!=a&&39!=a&&46!=a&&8!=a}},{CSS_PREFIX:"time-wrapper",TEMPLATE:'<input class="time-control hour"> <span class="time-control">:</span> <input class="time-control minute"> <input class="time-control ampm"> <div class="duration-display"></div>',ATTRS:{ampm:{validator:function(b){return a.Lang.isString(b)?(b=b.toLowerCase(),"am"===b||"pm"===b):!1},setter:function(a){return a.toUpperCase()}},minutes:{validator:function(b){b=parseInt(b,10);return a.Lang.isNumber(b)&&0<=b&&60>b},setter:function(a){return parseInt(a,
10)}},hours:{validator:function(b){b=parseInt(b,10);return a.Lang.isNumber(b)&&0<b&&12>=b},setter:function(a){return parseInt(a,10)}},data:{value:{minutes:0,ampm:"AM",hours:0},getter:function(b){return a.merge(b,{})}}}})},"1.0",{requires:"base base-build squarespace-dialog-fields squarespace-dialog-field-2 squarespace-node-flyout squarespace-date-utils".split(" ")});
YUI.add("squarespace-jobs",function(a){a.namespace("Squarespace");var d=a.Squarespace.JobMessage=a.Base.create("jobMessage",a.Base,[],{},{ATTRS:{level:{validator:a.Lang.isNumber},date:{validator:a.Lang.isDate},message:{validator:a.Lang.isString,value:""}}});a.Squarespace.Job=a.Base.create("job",a.Model,[],{initializer:function(b){this.set("data",a.merge({},b.data));this.publish("open",{defaultFn:this.onOpen,context:this});this.publish("start",{defaultFn:this.onStart,context:this});this.publish("complete",
{defaultFn:this.onComplete,context:this});this.publish("failure",{defaultFn:this.onFailure,context:this});this.publish("update",{defaultFn:this.onUpdate,context:this})},getName:function(){return this.get("name")},getId:function(){return this.get("id")},getData:function(){return{name:this.get("name"),id:this.get("id"),status:this.get("status"),type:this.get("type"),data:this.get("data")}},update:function(b){var c=b.status,e=this.get("data"),g=this.get("status");b.data&&(e=this.set("data",b.data).get("data"));
b.childJobs&&this.set("childJobs",b.childJobs);e&&e.update&&this.fire("update",this);e=b.update?b.update.numFailed:0;c!==a.Squarespace.JobStatuses.SUCCESS&&this.getItemCount()<=this.getCompletedItemCount()+this.get("failedItems")+e&&(c=a.Squarespace.JobStatuses.SUCCESS);this.set("progress",b.progress);b.messages&&this.set("messages",b.messages.map(function(b){return new d(a.merge(b,{date:new Date(b.date)}))}));this.set("addedOn",new Date(b.addedOn));if(c!==g)switch(c&&this.set("status",c),this.set("statusMessage",
b.statusMessage),g=this.get("status"),g!=a.Squarespace.JobStatuses.WAITING&&!this.get("started")&&(this.fire("start",this),this.set("started",!0)),g){case a.Squarespace.JobStatuses.SUCCESS:this.fire("complete",this);break;case a.Squarespace.JobStatuses.FAILURE:this.fire("failure",this)}},setCollection:function(a){this.set("collection",a)},getItemCount:function(){return 1},getCompletedItemCount:function(){return this.get("status")===a.Squarespace.JobStatuses.SUCCESS?1:0},opened:function(){this.fire("open",
this)},onOpen:function(){},onComplete:function(){},onStart:function(){},onFailure:function(){}},{ATTRS:{name:{value:""},progress:{value:0,validator:a.Lang.isNumber},lastError:{value:"",readOnly:!0,getter:function(){if(!a.Lang.isValue(this.get("messages")))return null;var b=this.get("messages").filter(function(b){return b.get("level")===a.Squarespace.MessageLevels.ERROR}).sort(function(b,d){return a.DataType.Date.isGreater(d.get("date"),b.get("date"))});return b.length?b.shift().get("message"):"Error"}},
collection:{setter:function(a){var c=this.get("data");a&&(c.collectionId=a.getId())}},status:{value:a.Squarespace.JobStatuses.WAITING},statusMessage:{value:"",setter:function(a){return a||""}},messages:{validator:a.Lang.isArray},updateData:{value:null},data:{},failedItems:{value:0},type:{},childJobs:{value:[],validator:a.Lang.isArray},addedOn:{setter:function(b){return a.Lang.isDate(b)?b:new Date(b)}}}});a.Squarespace.ImageProcessingJob=a.Base.create("imageProcessingJob",a.Squarespace.Job,[],{setNumFiles:function(a){this.get("data").numFiles=
a},setBatchId:function(a){this.get("data").batchId=a},getItemCount:function(){return this.get("data").numFiles},getCompletedItemCount:function(){return!this.processedItems?0:this.processedItems.length},getProcessedItems:function(){return this.processedItems.slice(0)},onUpdate:function(){var a=this.get("data");a&&(a.update&&a.update.newProcessedItems)&&(this.processedItems||(this.processedItems=[]),Array.prototype.push.apply(this.processedItems,a.update.newProcessedItems))},incrementFailedItemCount:function(){var a=
this.get("failedItems");this.set("failedItems",a+1)}},{ATTRS:{type:{value:a.Squarespace.JobTypes.IMAGE_PROCESSING},started:{value:!1}}});a.Squarespace.AudioProcessingJob=a.Base.create("AudioProcessingJob",a.Squarespace.ImageProcessingJob,[],{},{ATTRS:{type:a.Squarespace.JobTypes.AUDIO_PROCESSING}});a.Squarespace.WordpressExportJob=a.Base.create("wordpressExportJob",a.Squarespace.Job,[],{onComplete:function(){a.Squarespace.Singletons.Template.refreshNavigationList();new a.Squarespace.Widgets.Information({"strings.title":"Export Complete",
"strings.message":"Your export has finished and your content can be downloaded in the Import / Export panel."})}},{ATTRS:{type:{value:a.Squarespace.JobTypes.EXPORTING_WORDPRESS}}});a.Squarespace.ImportingJob=a.Base.create("importingJob",a.Squarespace.Job,[],{onComplete:function(){a.Squarespace.Singletons.Template.refreshNavigationList();var b=this.get("data").expansionAttemptResponse;b.isAtOrOverProductLimit?new a.Squarespace.Widgets.Alert({"strings.title":"Notice","strings.message":b.message}):new a.Squarespace.Widgets.Information({"strings.title":"Import Complete",
"strings.message":"Your import has finished and your content can be found in the Content Library."})},onFailure:function(){var b=this.get("data").expansionAttemptResponse;if(b.isAtOrOverProductLimit)(new a.Squarespace.Widgets.Confirmation({"strings.cancel":"Not Now","strings.confirm":"Go to Upgrade","strings.title":"Too Many Products","strings.message":b.message})).on("confirm",CONFIG_PANEL.goToUpgrade)}},{ATTRS:{type:{value:a.Squarespace.JobTypes.IMPORTING}}});a.Squarespace.StatsMigrationJob=a.Base.create("statsMigrationJob",
a.Squarespace.Job,[],{onComplete:function(){new a.Squarespace.Widgets.Information({"strings.title":"Migration Complete","strings.message":"Your legacy statistics have been migrated and analysis has begun."})}},{ATTRS:{type:{value:a.Squarespace.JobTypes.STATS_MIGRATION}}});a.Squarespace.PushJob=a.Base.create("pushJob",a.Squarespace.Job,[],{},{ATTRS:{type:{value:a.Squarespace.JobTypes.PUSH}}});a.Squarespace.CollectionSyncJob=a.Base.create("collectionSyncJob",a.Squarespace.Job,[],{onComplete:function(){new a.Squarespace.Widgets.Information({"strings.title":this.get("strings.successTitle"),
"strings.message":this.get("strings.successMessage")});this._setCollectionSyncState(!1);var b=a.Squarespace.ACTIVE_MANAGER;b.getActiveCollectionManager&&b.getActiveCollection().getId()===this.get("data.collectionId")&&b.getActiveCollectionManager().refreshPage()},onFailure:function(){new a.Squarespace.Widgets.Information({"strings.title":this.get("strings.failureTitle"),"strings.message":this.get("strings.failureMessage")});this._setCollectionSyncState(!1)},_setCollectionSyncState:function(b){var c=
this.get("data.collectionId");(c=a.Squarespace.ContentCollectionCache.getById(c))&&c.set("synchronizing",b)}},{ATTRS:{strings:{value:{successTitle:"Sync Completed",successMessage:"Collection sync completed. Your images may still be processing. This can take several minutes to complete.",failureTitle:"Sync Failed",failureMessage:"Collection sync failed."}},type:{value:a.Squarespace.JobTypes.COLLECTION_SYNC}}});a.Squarespace.SmugMugSyncJob=a.Base.create("smugMugSyncJob",a.Squarespace.CollectionSyncJob,
[],{},{ATTRS:{strings:{value:{successTitle:"Import Completed",successMessage:"SmugMug album import completed. Your images may still be processing. This can take several minutes to complete.",failureTitle:"Import Failed",failureMessage:"Failed to import SmugMug album."}}}});a.Squarespace.XeroExportJob=a.Base.create("xeroSyncJob",a.Squarespace.Job,[],{},{ATTRS:{strings:{value:{successTitle:"Export Complete",successMessage:"Invoices successfully exported to Xero.",failureTitle:"Export Failed",failureMessage:"Failed to export invoices to Xero."}}}})},
"1.0",{requires:"datatype-date-math event model squarespace-util squarespace-widgets-alert squarespace-widgets-confirmation squarespace-widgets-information".split(" ")});
YUI.add("squarespace-frontend-edit-controller-navigation",function(a){var d=a.namespace("Squarespace.Frontend.EditController"),b=a.Squarespace.Frontend.OverlayEditorControl;d.Navigation=a.Base.create("Navigation",d.Base,[],{show:function(){this.get("rootNode").plug(b,{action:this._onConfigureClick,context:this,label:"Configure Navigation"})},_onConfigureClick:function(){this.fire("navigate",{path:"/pages"})},hide:function(){this.get("rootNode").unplug(b)}})},"1.0",{requires:["base","squarespace-frontend-edit-controller-base"]});
YUI.add("squarespace-block-twitter-editor",function(a){a.namespace("Squarespace.Block.Editor").Twitter=a.Base.create("twitter-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Twitter")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Twitter"}}});var d=a.namespace("Squarespace.Block.ModelEditorDialog").Twitter=a.Base.create("TwitterSummaryModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SocialSummary,
[],{_getDefaultDialogConfig:function(){var b=this.get("model").toJSON(),c=d.superclass._getDefaultDialogConfig.call(this),e=c.tabs[0].fields;e.push({ctor:a.Squarespace.DialogFields.Check,name:"showAvatar",config:{"strings.title":"Show Avatar","strings.description":"Shows or hides the avatar image.",data:b.showAvatar}});e.push({ctor:a.Squarespace.DialogFields.Check,name:"showUsername",config:{"strings.title":"Show Username","strings.description":"Shows or hides the username text.",data:b.showUsername}});
e.push({ctor:a.Squarespace.DialogFields.Check,name:"followButton",config:{"strings.title":"Show Follow Button","strings.description":"Shows or hides the follow button appended to the end of the block.",data:b.followButton}});return c}},{ATTRS:{icon:{value:"twitter"},type:{value:a.Squarespace.BlockType.TWITTER},socialAccountType:{value:a.Squarespace.ExternalServiceProviders.TWITTER},collectionType:{value:a.Squarespace.CollectionTypes.TWITTER},strings:{value:{name:"Twitter",itemTypePlural:"Tweets",
itemType:"Tweet"}}}})},"1.0",{requires:"base model squarespace-block-social-summary-model-editor squarespace-damask-context-globals squarespace-dialog-check squarespace-model-editor".split(" ")});
YUI.add("squarespace-frontend-pill",function(a){a.namespace("Squarespace.Frontend").Pill=a.Base.create("FrontendPill",a.Squarespace.SSWidget,[],{initializer:function(){a.Squarespace.EscManager.addTarget(this)},destructor:function(){a.Squarespace.EscManager.removeTarget(this)},renderUI:function(){var d=this.get("contentBox"),b=d.appendChild('<div class="'+this.getClassName("body")+'"></div>');b.append('<div class="'+this.getClassName("body-title")+'">'+this.get("strings.title")+"</div>");var c=this.get("strings.description");
c&&b.append('<div class="'+this.getClassName("body-description")+'">'+c+"</div>");var e=d.appendChild('<div class="'+this.getClassName("buttons")+'"></div>');a.Array.each(this.get("buttons"),function(a){e.appendChild('<div class="'+this.getClassName("buttons-"+a.className)+'"><a href="#">'+a.label+"</a></div>").on("click",function(b){b.halt();this[a.action]()},this)},this);e.append('<a href="#" class="'+this.getClassName("buttons-done")+'">Done</a>')},bindUI:function(){this.get("contentBox");var d=
this.get("contentBox").one("."+this.getClassName("buttons")),b=d.one("."+this.getClassName("buttons-done"));b.on("click",function(a){a.halt();this.close()},this);var c=a.Node.create('<div class="'+this.getClassName("buttons-save")+'"><a href="#">Save</a></div>');c.on("click",function(a){a.halt();this.save()},this);var e=a.Node.create('<div class="'+this.getClassName("buttons-cancel")+'"><a href="#">Cancel</a></div>');e.on("click",function(b){b.halt();(new a.Squarespace.Widgets.Confirmation({"strings.confirm":"Discard",
"strings.title":"Discard Changes","strings.message":"You have made changes. Are you sure you wish to discard changes?",showOverlay:!0})).on("confirm",this.discard,this)},this);var g=[e,c];this.on("dirtyChange",function(c){d.plug(a.Squarespace.Plugins.SizeAnimator);d.sizeAnimator.hold();a.Array.each(g,function(a){c.newVal&&!a.inDoc()?b.insert(a,"before"):!c.newVal&&a.inDoc()&&a.remove()});d.sizeAnimator.release()})},ignoreBodyClicks:!0,save:function(){throw"Save not implemented.";},discard:function(){throw"Discard not implemented.";
},close:function(){throw"Close not implemented.";}},{ATTRS:{buttons:{value:[]},dirty:{value:!1}}})},"1.0",{requires:["base","node","squarespace-escmanager","squarespace-ss-widget","squarespace-widgets-confirmation"]});
YUI.add("squarespace-block-summary-editor",function(a){a.namespace("Squarespace.Block.Editor").Summary=a.Base.create("summary-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Summary")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Summary"}}})},"1.0",{requires:["base","squarespace-block-editor-dialog","squarespace-block-summary-model-editor","squarespace-damask-context-globals",
"squarespace-model-editor"]});
YUI.add("squarespace-connected-account-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["connected-account.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k,l=this.escapeExpression,n=d.helperMissing;a='<div class="';(f=d.serviceName)?f=f.call(b,{hash:{},data:h}):(f=b.serviceName,f="function"===typeof f?f.apply(b):f);a+=l(f)+'">\n  ';if((f=d["if"].call(b,b.iconUrl,{hash:{},inverse:this.program(3,
function(a,b){var c,e;c='\n    <div class="icon default ';(e=d.serviceName)?e=e.call(a,{hash:{},data:b}):(e=a.serviceName,e="function"===typeof e?e.apply(a):e);return c+=l(e)+'"></div>\n  '},h),fn:this.program(1,function(a,b){var c,e;c='\n    <div class="icon">\n      <img src="';(e=d.iconUrl)?e=e.call(a,{hash:{},data:b}):(e=a.iconUrl,e="function"===typeof e?e.apply(a):e);return c+=l(e)+'" />\n    </div>\n  '},h),data:h}))||0===f)a+=f;k={hash:{},data:h};a=a+'\n  <div class="names">\n    <div class="user">'+
(l((f=d.screenNameForDisplay||b.screenNameForDisplay,f?f.call(b,b,k):n.call(b,"screenNameForDisplay",b,k)))+'</div>\n    <div class="service ');(k=d.serviceName)?k=k.call(b,{hash:{},data:h}):(k=b.serviceName,k="function"===typeof k?k.apply(b):k);a+=l(k)+'">';k={hash:{},data:h};a+=l((f=d.serviceNameForDisplay||b.serviceNameForDisplay,f?f.call(b,b,k):n.call(b,"serviceNameForDisplay",b,k)))+"</div>\n  </div>\n  ";if((k=d["if"].call(b,b.unauthorized,{hash:{},inverse:this.noop,fn:this.program(5,function(a,
b){return'\n    <div class="unauthorized-message">\n      <strong>Unauthorized</strong> &mdash; Remove or <a class="reauthenticate">reauthenticate</a> this account for continued usage.\n    </div>\n  '},h),data:h}))||0===k)a+=k;return a+="\n</div>"})})();a.Handlebars.registerPartial("connected-account.html".replace("/","."),d.templates["connected-account.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-block-newsletter-editor",function(a){a.namespace("Squarespace.Block.Editor").Newsletter=a.Base.create("newsletter-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Newsletter")}},{NS:"blockEditor"});a.namespace("Squarespace.Block.ModelEditorDialog").Newsletter=a.Base.create("blockFormEditor",a.Squarespace.Block.ModelEditorDialog.Form,[],{_bindDialogFields:function(){},
getDialogData:function(){var b=this.get("model"),c=b.getFormModel();return a.merge({showName:b.get("showName"),title:b.get("title"),description:b.get("description"),disclaimer:b.get("disclaimer"),submitButtonText:c.get("submitButtonText"),submissionMessage:c.get("submissionMessage"),submissionHTML:c.get("submissionHTML")},this._getConnectFieldInitialData())}},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});var d={name:"editNewsletterBlock",loadingText:"Editing Newsletter Block...",title:"Edit Newsletter Block",
icon:"/universal/images-v6/standard/icon_form_42_light.png",closeOthers:!1,style:"standard",flyoutPointerDirection:"hidden",width:500,height:525,initialDataByReference:!0,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{tabTitle:"Display",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Check,config:{name:"showName","strings.title":"Require Name Field","strings.description":"Display inputs for the subscriber's first and last name."}},
{ctor:a.Squarespace.DialogFields.Description,config:{name:"titleDescription",title:"Title"}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"title",className:"thin"}},{ctor:a.Squarespace.DialogFields.Description,config:{name:"descriptionDescription",title:"Description"}},{ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"description",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:125,classNames:"description"}},{ctor:a.Squarespace.DialogFields.Description,config:{name:"disclaimerDescription",
title:"Disclaimer",text:"Displayed below the input field."}},{ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"disclaimer",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:125,classNames:"description"}}]},{tabTitle:"Storage",fields:function(){var b=[];a.Squarespace.Utils.isNewslettersEnabled()&&b.push({$include:"connectFieldConfigsByName.siteUser"});b.push({$include:"connectFieldConfigsByName.googleDocs"},{$include:"connectFieldConfigsByName.mailchimp"});return b}()},
{tabTitle:"Advanced",scroll:!0,fields:{$include:"submissionFieldConfigs"}}]}},"1.0",{requires:["squarespace-block-form-editor","squarespace-damask-context-globals","squarespace-dialog-wysiwyg","squarespace-model-editor","squarespace-util"]});
YUI.add("squarespace-plugin-infinite-scroll",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.InfiniteScroll=a.Base.create("infiniteScroll",a.Plugin.Base,[],{initializer:function(a){this.config=a;this._currentPage=1;this.get("host").on("scroll",function(a){var c=a.currentTarget;a=c.get("scrollHeight")-c.get("scrollTop")-c.height();c=c.get("scrollTop");0==a&&(this._showLoading(),this._requestNextPage(c))},this);this.get("host").on("cleared",function(){this._currentPage=1},this)},
_showLoading:function(){},_requestNextPage:function(d){var b=this.get("host"),c={pageSize:this.config.pageSize,page:this._currentPage+1};void 0!==this.config.queryFn&&a.merge(c,this.config.queryFn());a.Data.get({url:this.config.fetchUrl,data:c,success:a.bind(function(a){this._currentPage++;this.config.render.call(this,a);b.set("scrollTop",d)},this)})}},{NS:"infiniteScrollPlugin",ATTRS:{}})},"1.0",{requires:["plugin"]});
YUI.add("squarespace-block-base-modelsync",function(a){function d(a){return a.replace(/[-|_]/g," ").toLowerCase().capitalize()}a.namespace("Squarespace.Block").ModelSyncBase=a.Base.create("block-modelsync",a.Squarespace.Block.Base,[],{initializer:function(){"MODELSYNC"===this.get("blockTypeName")&&a.Lang.isValue(this.get("type"))&&this.set("blockTypeName",a.Squarespace.BlockTypeByString[this.get("type")])},renderUI:function(){this._renderBlock()},bindUI:function(){this.get("model").after("change",
a.Squarespace.debounce(function(a){this._renderBlock(a)},200,!0,!0),this)},_renderBlock:function(){var b=d(this.get("blockTypeName")),c=a.bind(function(){this.fire("widget:contentUpdate");this.set("stack",null)},this),e=this.get("stack");e&&(c=e.add(c));try{var g=JSON.stringify(this.toJSON());a.Data.post({url:"/api/widget/GetWidgetRendering",data:{widgetJSON:g},success:function(a){this._renderSuccess(a);this.fire("widget:contentUpdate");c()},failure:function(a){this._renderError(a);this.fire("widget:contentUpdate");
c()}},this)}catch(f){b="Error: "+b+" Block could not be rendered.",f instanceof TypeError&&console.warn(a.Lang.sub("Error: {message}",f)),this._renderError({error:b})}},_setWidgetContent:function(){var b=this.get("contentBox"),c=b.one(".sqs-state-message, .state-message");b.setHTML(this.get("widgetContent"));a.Lang.isValue(c)&&this.get("model").get("aspectRatio")&&c.wrap("<div></div>")},_renderSuccess:function(a){this.set("widgetContent",a.html);this._setWidgetContent()},_renderError:function(a){a=
a&&a.error||"Error: "+d(this.get("blockTypeName"))+" Block could not be rendered.";this.get("boundingBox").addClass("sqs-block-error");this.get("contentBox").setHTML('<div class="error">'+a+"</div>")}},{CSS_PREFIX:"sqs-block-modelsync",MODEL:a.Model,ATTRS:{stack:{},widgetContent:{value:""}}})},"1.0",{requires:"base squarespace-ss-widget squarespace-enum squarespace-util squarespace-debounce squarespace-block-base squarespace-block-editor-dialog".split(" ")});
YUI.add("squarespace-block-donation",function(a){var d=a.Base.create("DonationModel",a.Model,[],{sync:function(b,c,d){var g=this.get("donatePageId");"update"==b||"create"==b?(new a.Squarespace.Models.DonatePage(this.getAttrs())).save(c,a.bind(function(b,c){var g=a.JSON.parse(c.response);this.set("donatePageId",g.id);d(b)},this)):"read"==b&&a.Lang.isValue(g)?(new a.Squarespace.Models.DonatePage({id:g})).load(d):d()}},{ATTRS:{suggestedContributions:{valueFn:function(){if(!this.get("donatePageId"))return[{amountCents:1E3,
label:""},{amountCents:2500,label:""},{amountCents:5E3,label:""},{amountCents:1E4,label:""}]}},buttonLabel:{value:"Donate"}}});a.namespace("Squarespace.Block").Donation=a.Base.create("block-donation",a.Squarespace.Block.ModelSyncBase,[],{bindUI:function(){this.get("model").after("change",function(a){a.changed.buttonAlignment&&(a=a.changed.buttonAlignment,this.get("contentBox").get("children").replaceClass("sqs-donate-button-wrapper--align-"+a.prevVal,"sqs-donate-button-wrapper--align-"+a.newVal))},
this)}},{CSS_PREFIX:"sqs-block-donation",MODEL:d,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Donation},type:{value:a.Squarespace.BlockType.DONATION}}})},"1.0",{requires:["squarespace-block-base-modelsync","squarespace-block-donation-editor","squarespace-models-donate-page"]});
YUI.add("squarespace-block-social-account-links-legacy-editor",function(a){a.namespace("Squarespace.Block.Editor").LegacySocialAccountLinks=a.Base.create("legacySocialAccountLinksEditor",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.LegacySocialAccountLinks")}},{NS:"blockEditor"})},"1.0",{requires:["base","squarespace-block-social-account-links-legacy-model-editor","squarespace-damask-context-globals"]});
YUI.add("squarespace-block-content-html-editor-email",function(a){a.namespace("Squarespace.Content").HtmlEditorEmail=a.Base.create("contentHtmlEditor",a.Squarespace.Content.HtmlEditor,[],{_getVisualEditorData:function(){var d=this.visualEditor.getEditorData();return a.Squarespace.Layout.EmailUtils.prepHtmlForEmail(d)}},{NS:"contentEditor"})},"2.0",{requires:["base","squarespace-block-content-html-editor","squarespace-layout-email-utils"]});
YUI.add("squarespace-block-mixin-aspect-ratio",function(a){a.namespace("Squarespace.Block.Mixin");a.Squarespace.Block.Mixin.AspectRatio=a.Base.create("aspectRatio",a.Base,[],{initializer:function(){this.get("boundingBox").addClass("sqs-aspect-ratio");this.after("intrinsicWrapperChange",this._swapIntrisincWrapper,this);a.after(this._bindAspectRatio,this,"bindUI");a.after(this._updateAspectRatio,this,"renderUI");a.after(this._updateAspectRatio,this,"syncUI");a.after(this._updateAspectRatio,this,"_renderSuccess")},
_bindAspectRatio:function(){this.get("model").after("change",this._afterModelChange,this)},_afterModelChange:function(a){this._updateAspectRatio()},_swapIntrisincWrapper:function(d){var b=this.get("model").get("aspectRatio");a.Lang.isValue(d.prevVal)&&this.destroyBlock(d.prevVal);a.Lang.isValue(d.newVal)&&b&&this.initializeBlock(d.newVal,b)},_updateAspectRatio:function(d){d=this.get("model").get("aspectRatio");var b=this.get("intrinsicWrapper");a.Lang.isValue(d)?!b.hasClass("sqs-intrinsic")||b.one("> div")&&
!b.one("> div").hasClass("sqs-intrinsic-content")?this.initializeBlock(b,d):this._setPadding(d):this.destroyBlock(b)},_setPadding:function(a){this.get("intrinsicWrapper").setStyle("paddingBottom",a+"%")},initializeBlock:function(d,b){a.Lang.isValue(b)&&(d.addClass("sqs-intrinsic"),d.setStyle("paddingBottom",b+"%"),d.one("> div")&&d.one("> div").addClass("sqs-intrinsic-content"))},destroyBlock:function(a){a.hasClass("sqs-intrinsic")&&(a.removeClass("sqs-intrinsic"),a.setStyle("padding-bottom",null),
a.one(".sqs-intrinsic-content")&&a.one(".sqs-intrinsic-content").removeClass("sqs-intrinsic-content"))}},{ATTRS:{intrinsicWrapper:{getter:function(){return this.get("contentBox")}}}})},"1.0",{requires:["base","node","squarespace-aspect-ratio-manager"]});
YUI.add("squarespace-block-editor-base",function(a){var d=function(){};a.namespace("Squarespace.Block.Editor").Base=a.Base.create("blockEditorBase",a.Plugin.Base,[],{initializer:function(){this._host=this.get("host");this._model=this._host.get("model");this._bb=this._host.get("boundingBox");this._cb=this._host.get("contentBox");this._createEditingOverlay();this._bindEvents();this._executeOrBindPlugInsertPoint();this.once("initializedChange",this._onceInitializedChange,this)},_bindEvents:function(){this._setEditingEvent(this.get("editingEvent"));
this.onHostEvent("editableChange",this._onBlur,this);this.after("editingChange",this._afterEditingChange,this);this.on("editingEventChange",this._onEditingEventChange,this);this.after("dropZoneLockedChange",this._afterDropZoneLockedChange,this);this.after(["resizableChange","resizeNodeChange"],this._syncResizable,this);this.afterHostEvent("blockEditor|focusedChange",this._afterFocusedChange,this);this._handles.push(this._model.after("blockEditor|floatDirChange",this._floatChange,this));this.on("remove",
this.removeBlock,this)},_onceInitializedChange:function(){this._initFocused();this._syncResizable();this._initEditable();this._initLockedLayout();this._initLayoutDrop()},_initLockedLayout:function(){this.get("host").get("boundingBox").toggleClass("sqs-block-locked-layout",this.get("lockedLayout"))},_createEditingOverlay:function(){var a=this.get("editingOverlay");a&&a.appendTo(this._bb)},_executeOrBindPlugInsertPoint:function(){this._layoutHasInsertPoints()&&(this._canPlugInsertPointsNow()?this._plugInsertPoint():
(this._handles.push(this._host.onceAfter("renderedChange",function(a){this._canPlugInsertPointsNow()&&this._plugInsertPoint()},this)),this.afterHostEvent("layout-rendered",this._plugInsertPoint,this)))},_canPlugInsertPointsNow:function(){var a=this.get("host"),c=a.get("contentBox");return a.get("rendered")&&!c.ancestor(".sqs-layout-rendering")},_updateModel:function(a){this._model.setAttrs(a);this._host.get("isNewBlock")&&this._host.set("isNewBlock",!1)},_afterFocusedChange:function(a){a.newVal?(this._onFocus(),
this._syncResizable()):this._onBlur()},_onFocus:d,_onBlur:d,_afterEditingChange:function(b){a.Lang.isValue(this._bb.getDOMNode())&&this._bb.toggleClass("sqs-block-editing",b.newVal)},_initEditable:function(){this._host.get("editable")&&(this._bb.addClass("sqs-block-editable"),this._host.get("isNewBlock")&&this.get("defaultEditingMode")&&this._enableEditing())},_initFocused:function(){this._host.get("isNewBlock")&&this._host.get("focusHandler").giveBlockSyntheticFocus(this._host)},_syncResizable:function(){this._toggleResizable(this.get("resizable")&&
this._host.get("focused"))},_toggleResizable:function(b){b?this.get("host").plug(a.Squarespace.Block.Plugin.Resizable,{resizeNode:this.get("resizeNode"),blockEditor:this}):this.get("host").unplug(a.Squarespace.Block.Plugin.Resizable)},beforeLayoutDrag:d,afterLayoutDrag:d,cleanBlock:d,_initLayoutDrop:function(){this.get("lockedLayout")||(this.drop=new a.Squarespace.Layout.Drop({node:this._bb,groups:["blocks"],lock:!!this._model.get("floatDir")}))},_plugInsertPoint:function(){this._host.hasPlugin(a.Squarespace.Layout.InsertPoint.NS)||
this._host.plug(a.Squarespace.Layout.InsertPoint,{layoutNode:this._bb.ancestor(".sqs-layout"),divideSelectors:this.get("selectorsForInsertPoints")})},_layoutHasInsertPoints:function(){return!this._host.get("editController").isMobileApp()&&!this.get("lockedLayout")},_floatChange:function(){this.set("dropZoneLocked",!!this._model.get("floatDir"));this._bb.one(".sqs-helper")&&(this._host.get("model").get("floatDir")?this._bb.one(".sqs-helper").show():this._bb.one(".sqs-helper").hide())},getMobileAppMenuConfig:function(){return null},
_afterDropZoneLockedChange:function(a){this.drop&&this.drop.set("lock",a.newVal)},_onEditingEventChange:function(a){this._setEditingEvent(a.newVal)},_setEditingEvent:function(a){this.editingEvent&&this.editingEvent.detach();a&&(this.editingEvent=this._handles.push(this._bb.on(a,this._enableEditing,this)))},_enableEditing:function(){this.set("editing",!0)},_disableEditing:function(){this.set("editing",!1)},removeBlock:function(a){this._host.removeBlock(!0===a);this.destroy()},destructor:function(){this._host.detach("blockEditor|*");
this._model.detach("blockEditor|*");this.drop&&this.drop.destroy();var b=this.get("editingOverlay");a.Lang.isValue(b)&&b.remove(!0);this._bb.removeClass("sqs-block-editable");this._bb.removeClass("sqs-block-editing");this._host.unplug(a.Squarespace.Layout.InsertPoint)}},{NS:"blockEditor",ATTRS:{editing:{value:!1,setter:function(a){return!(!a||!this._host.get("editable"))}},editingOverlay:{valueFn:function(){return null},validator:function(b){return null===b||b instanceof a.Node}},dropZoneLocked:{value:!1},
lockedLayout:{getter:function(b){if(a.Lang.isValue(b))return b;b=this.get("host").get("boundingBox");b=a.Lang.isValue(b)?b.ancestor(".sqs-layout"):null;return a.Lang.isValue(b)&&b.hasClass("sqs-locked-layout")}},selectorsForInsertPoints:{value:"",validator:a.Lang.isString},minHSize:{value:1,validator:a.Lang.isNumber},resizable:{value:!1},resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},resizeDefaultSize:{value:75},resizeSnapToDefaultSize:{value:!0},snapToThreshold:{value:10,
validator:a.Lang.isNumber},editingEvent:{value:null,lazyAdd:!1},defaultEditingMode:{value:!1}}})},"1.0",{requires:"base plugin squarespace-block-focus-handler squarespace-block-plugin-resizable squarespace-util squarespace-widget-resize squarespace-layout-drop".split(" ")});
YUI.add("squarespace-block-horizontal-rule",function(a){a.namespace("Squarespace.ContentModel").HorizontalRule=a.Base.create("HorizontalRuleContentModel",a.Model,[],{},{});a.namespace("Squarespace.Block").HorizontalRule=a.Base.create("block-horizontalrule",a.Squarespace.Block.Base,[],{renderUI:function(){var d=a.Node.create("<hr>");this.get("contentBox").appendChild(d)}},{CSS_PREFIX:"sqs-block-horizontalrule",MODEL:a.Squarespace.ContentModel.HorizontalRule,ATTRS:{editor:{valueFn:function(){return a.Squarespace.Block.Editor.HorizontalRule}},
mobileEditor:{valueFn:function(){return a.Squarespace.Block.Editor.HorizontalRule}},emailEditor:{valueFn:function(){return a.Squarespace.Block.Editor.HorizontalRuleEmail}},type:{value:a.Squarespace.BlockType.HORIZONTAL_RULE}}})},"1.0",{requires:["squarespace-ss-widget","squarespace-block-base","squarespace-block-horizontal-rule-editor"]});
YUI.add("squarespace-widgets-audio-player",function(a){var d,b=a.namespace("Squarespace.Widgets").AudioPlayerMinimal=a.Base.create("audioPlayer",a.Squarespace.Widgets.SSWidget,[],{initializer:function(){this.setAttrs(this.get("render").getData());""===this.get("title")&&this.set("title","Untitled");this.set("showDownload","true"===this.get("show-download"));this.set("colorTheme",this.get("color-theme"));this.set("artistName",this.get("author"));this._contentBox=this.get("contentBox")},render:function(){var c=
arguments,e=a.bind(function(){d.onready(a.bind(function(){b.superclass.render.apply(this,c)},this))},this);d?e():a.use("thirdparty-soundmanager2",a.bind(function(a){d=soundManager;e()},this))},renderUI:function(){b.superclass.renderUI.call(this);this._playerNode=this._contentBox.one(".player");this._actionNode=this._playerNode.one(".action");this._timeNode=this._playerNode.one(".time");this._trackNode=this._playerNode.one(".track");this._labelsNode=this._playerNode.one(".labels");this._titleNode=
this._labelsNode.one(".title");this.get("showDownload")&&this._renderDownloadLink();this.get("boundingBox").addClass(this.get("colorTheme"));this._createSound()},bindUI:function(){this._contentBox.one(".action").on("click",this._togglePlaying,this);this._setupScrubber();this.after("playingChange",this.syncUI,this);this.after("progressChange",function(a){var b=this._timeNode.one(".progress");b.setContent(a.newVal);b.addClass("loaded")},this);this.after("durationChange",function(a){var b=this._timeNode.one(".total");
b.setContent(a.newVal);b.addClass("loaded");this.syncUI()},this);this.after("titleChange",function(a){this._labelsNode.one(".title").setContent(a.newVal)},this);this.after("artistNameChange",function(a){this._labelsNode.one(".artistName").setContent(a.newVal)},this);this._trackNode.on("click",this._updatePosition,this);var b=new a.Squarespace.ResizeEmitter;this._registerEvent(b.on("resize:end",this.syncUI,this));this.get("boundingBox").plug(a.Squarespace.NodeDestroyNotifier,{onDestroy:this.destroy,
context:this})},syncUI:function(){var a=this.get("boundingBox"),b=a.get("offsetWidth");this._trackNode.setStyle("width",b);a.toggleClass("playing",this.get("playing"));a.toggleClass("tiny",300>b);a.toggleClass("no-artist",""===this.get("artistName"));a=this._titleNode.get("offsetWidth")<this._titleNode.get("scrollWidth");this._titleNode.toggleClass("marquee-mark",a)},_renderNativeAudio:function(){var c=a.Lang.sub(b.NATIVE_TEMPLATE,this.getAttrs());this._contentBox.replace(a.Node.create(c))},_renderDownloadLink:function(){var b=
'<div class="download"><a href="'+a.Squarespace.UrlUtils.addQueryParam(this.get("url"),"download","true")+'" target="_blank">Download</a></div>';this._downloadNode=this._playerNode.one(".secondary-controls").appendChild(b);this._playerNode.addClass("download")},_renderVisualizer:function(){for(var a=this._contentBox.one(".visualizer"),b="",d=0;100>d;d++)b+='<div class="eq-bar"><div class="height"></div></div>';a.append(b)},_togglePlaying:function(b){b.halt();a.UA.ios?window.location.href=this.get("url"):
(this.set("playing",!this.get("playing")),this.get("playing")?(d.pauseAll(),this._sound.play()):this._sound.pause())},_createSound:function(){var b=this.get("url");0<b.indexOf(Static.SQUARESPACE_CONTEXT.appDomain)&&(b=b.replace(/^(http:\/\/|https:\/\/|\/\/)/i,window.location.protocol+"//"));var e=a.bind(this.set,this,"playing",!1);this._sound=d.createSound({id:"squarespaceTrack-"+this.get("id"),url:b,volume:this.get("volume"),autoPlay:!1,autoLoad:!0,whileplaying:a.bind(this._whilePlaying,this),onload:a.bind(function(){this.get("destroyed")||
(this.set("duration",this._durationToStr(this.get("trueDuration"))),this._sound.onpause=e,this._sound.onfinish=e)},this)})},_whilePlaying:function(){this.get("playing")&&(this._contentBox.one(".track .played").setStyle("width",100*(this._sound.position/this.get("trueDuration"))+"%"),this.set("progress",this._durationToStr(this._sound.position)))},_mergeEQData:function(){for(var a=this._sound.eqData.left,b=this._sound.eqData.right,d=a.length,f=[],h=0;h<d;h++)f.push((parseFloat(a[h])+parseFloat(b[h]))/
2);return f},_calculateEQChunks:function(){for(var b=this._mergeEQData(),d=[],g=0;g<length;g+=2){var f=0;a.Array.each(b.slice(g,g+2),function(a){f+=a});d.push(75*(f/2))}return d},_drawEQBars:function(){var b=this._contentBox.all(".eq-bar .height"),d=this._calculateEQChunks();a.Array.each(d,function(g,f){var h=b.item(f);a.Lang.isValue(h)&&h.setStyle("height",Math.min(45,d[f]))},this);this.syncUI()},_setupScrubber:function(){var b=this._contentBox.one(".played .icon"),d=a.Node.create('<div class="scrubber-shim"></div>'),
g;d.setStyles({position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:Math.pow(10,7),cursor:"none"});b.on("mousedown",function(b){var c=this._sound.volume;g=this._contentBox.one(".track").get("region");this._sound.setVolume(0.25*c);a.one("body").append(d);d.once("mouseup",function(){this._sound.setVolume(c);d.remove()},this)},this);var f=this._contentBox.one(".track .played .icon").get("offsetWidth")/2;d.on("mousemove",function(a){this._sound.setPosition(this._getRelativePosition(g,a.pageX-f))},this)},
_updatePosition:function(a){a.halt();if(this.get("playing")){var b=this._contentBox.one(".track").get("region"),d=this._contentBox.one(".track .played .icon").get("offsetWidth")/2;this._sound.setPosition(this._getRelativePosition(b,a.pageX-d))}},_durationToStr:function(a){var b=Math.floor(a/1E3%60);a=Math.floor(a/6E4);10>b&&(b="0"+b);return a+":"+b},_getRelativePosition:function(a,b){return this.get("trueDuration")*Math.min(1,Math.max(0,(b-a.left)/a.width))},_selectVolume:function(a){var b=this._contentBox.all(".player .volume .bar");
b.removeClass("active");b.filter(function(b){return parseInt(b.getAttribute("data-level"),10)<=a}).addClass("active");this._sound.setVolume(a)}},{CSS_PREFIX:"sqs-widgets-audio-player",HANDLEBARS_TEMPLATE:"block-audio-player.html",ATTRS:{progress:{},duration:{},trueDuration:{getter:function(){var b=this.get("duration-in-ms");return a.Lang.isString(b)&&""!==b?b:a.Lang.isValue(this._sound)?this._sound.duration:0}},title:{value:""},artistName:{value:""},playing:{value:!1},volume:{value:100}}})},"1.0",
{requires:"base node widget squarespace-url-utils squarespace-block-audio-player-template thirdparty-soundmanager2".split(" ")});
YUI.add("squarespace-save-manager",function(a){a.namespace("Squarespace");a.Squarespace.QueueManager=a.Base.create("QueueManager",a.Base,[],{initializer:function(d){this.queue=new a.AsyncQueue;this.queue.on("execute",this._onTaskExecute,this)},addTask:function(d){a.Lang.isFunction(d)&&(d={fn:d});a.Lang.isUndefined(d.args)&&(d.args=[]);d.args.push(a.bind(this._taskDoneCallback,this));var b=0===this.queue.size()&&!this.isRunning();this.get("isSingleTaskQueue")||0<this.queue.size()&&this.queue.stop();
this.queue.add(d);b&&this.queue.run()},isRunning:function(){return this.get("isRunning")},_onTaskExecute:function(a){this.queue.pause();this.set("isRunning",!0)},_taskDoneCallback:function(){0<this.queue.size()?this.queue.run():this.set("isRunning",!1)}},{ATTRS:{isRunning:{value:!1,validator:a.Lang.isBoolean},isSingleTaskQueue:{value:!0,validator:a.Lang.isBoolean}}});a.Squarespace.SaveManager=a.Base.create("SaveManager",a.Squarespace.QueueManager,[],{save:function(d,b){this.addTask({fn:this._runTask,
args:[a.clone(d),b],context:this})},_runTask:function(d,b,c){d.success=this._wrapDone(d.success,c);d.failure=this._wrapDone(d.failure,c);a.Lang.isFunction(d.buildData)&&(d.data=d.buildData());a.Data.post(d,b)},_wrapDone:function(d,b){return function(c){a.Lang.isUndefined(d)||d(c);b()}}})},"1.0",{requires:["async-queue"]});
YUI.add("squarespace-block-soundcloud",function(a){a.namespace("Squarespace.ContentModel").SoundCloud=a.Base.create("SpacerBlockModel",a.Model,[],{},{ATTRS:{aspectRatio:{value:67}}});a.namespace("Squarespace.Block").SoundCloud=a.Base.create("block-soundcloud",a.Squarespace.Block.ModelSyncBase,[a.Squarespace.Block.Mixin.AspectRatio],{_renderSuccess:function(d){var b=a.Node.create("<div></div>");b.insert(d.html);a.Squarespace.UrlUtils.securifyBlockEmbed(b);this.get("contentBox").setHTML(b)}},{CSS_PREFIX:"sqs-block-soundcloud",
MODEL:a.Squarespace.ContentModel.SoundCloud,ATTRS:{editor:{value:a.Squarespace.Block.Editor.SoundCloud},type:{value:a.Squarespace.BlockType.SOUNDCLOUD}}})},"1.0",{requires:["squarespace-enum","squarespace-url-utils","squarespace-block-base-modelsync","squarespace-block-soundcloud-editor"]});
YUI.add("squarespace-content-item-types-link",function(a){a.namespace("Squarespace.ContentItemEditor").Link=a.Base.create("LinkContentItemEditor",a.Squarespace.ContentItemEditor.Base,[],{},{ATTRS:{editorConfiguration:{value:{title:"Edit {presentationName}",width:800,height:370,overlay:0.5,initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.link"]},{$include:"tabs.options.default"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}})},"1.0",
{requires:["squarespace-content-item-types-base"]});
YUI.add("squarespace-dialog-content-stat-manager",function(a){var d=function(a,b){return a.name.toLocaleLowerCase().localeCompare(b.name.toLocaleLowerCase())},b=function(a,b){return b.count-a.count},c=function(a,b){return b.modifiedOn-a.modifiedOn},e=a.namespace("Squarespace.DialogFields").ContentStatManager=a.Base.create("contentStatManager",a.Squarespace.DialogField2,[],{initializer:function(a){this._getItemsFromServer()},renderUI:function(){e.superclass.renderUI.call(this);var a=this.get("contentBox").one(".tag-cloud-footer-wrapper");
this._editInput=a.one(".field-tag-input");this.set("footerHeight",a.one(".field-tag-footer").get("offsetHeight"));a.setStyles({opacity:0,height:0,overflow:"hidden",transitionProperty:"transform, height, opacity",transitionDuration:".3s",transitionTimingFunction:"ease-out"});this._sortItems()},bindUI:function(){e.superclass.bindUI.call(this);var a=this.get("contentBox"),b="."+this.get("itemClass");a.one(".button-remove-sel").on("click",this._removeSelected,this);a.one(".button-rename").on("click",
this._confirmChangeItems,this);a.one(".field-tag-filter-input").on("keyup",this._filterItems,this);a.one("select.select").on("change",this._updateSortFunction,this);this._editInput.on("keydown",this._handleChangeItemInput,this);a.one(".field-tag-cloud").delegate("click",this._selectItem,b,this);this.after("sortFnChange",this._sortItems,this);this.after("itemListChange",this.syncUI,this)},syncUI:function(){e.superclass.syncUI.call(this);var a=this.get("contentBox");this._refreshItemNodes();this._syncFooter();
this.setRelativeItemColorValue();a.one(".field-tag-filter-input").set("value","")},_selectItem:function(a){a=a.currentTarget;a.hasClass(this.get("itemClass"))&&a.toggleClass("selected");this._syncFooter()},_syncFooter:function(){var a=this.get("contentBox"),b=a.one(".button-rename > input"),a=a.all(".selected").size();b&&b.set("value",2>a?"Rename":"Merge");this._toggleFooter(0<a)},_removeSelected:function(b){b=this.get("contentBox").all(".selected."+this.get("itemClass"));1>b.size()||(b=this._getConfirmText(b.size(),
"remove"),this.removeDialog=(new a.Squarespace.Widgets.Confirmation({"strings.title":b.title,"strings.message":b.text})).on("confirm",this._removeConfirmCallback,this))},_confirmChangeItems:function(b){b=this.get("contentBox").all(".selected."+this.get("itemClass"));1>a.Lang.trim(this._editInput.get("value")).length||1>b.size()||(b=this._getConfirmText(b.size()),this.confirmDialog=(new a.Squarespace.Widgets.Confirmation({"strings.title":b.title,"strings.message":b.text})).on("confirm",this._confirmMergeSuccess,
this))},_filterItems:function(a){a=a.target.get("value");this._hideMatchedItems(a);this._syncFooter()},_handleChangeItemInput:function(a){13===a.keyCode?this._confirmChangeItems():27===a.keyCode&&this.halt()},_updateSortFunction:function(a){var e=this.get("contentBox");a=a.target.get("value");e.one(".field-tag-sort-inner").set("text",a);"Weight"===a?this.set("sortFn",b):"Activity"===a?this.set("sortFn",c):this.set("sortFn",d)},_sortItems:function(a){a=this.get("itemList").concat([]);a.sort(this.get("sortFn"));
this.set("itemList",a)},_toggleFooter:function(b){var c=this.get("contentBox");a.Lang.isUndefined(b)&&(b=!c.one(".tag-cloud-footer-wrapper").get("offsetHeight"));c.one(".tag-cloud-footer-wrapper").setStyles({height:b?this.get("footerHeight"):0,opacity:b?1:0})},setRelativeItemColorValue:function(){var b=this.get("itemList"),c=this.get("contentBox").all("."+this.get("itemClass")),d=0,e=Number.MAX_VALUE;1>b.length||(a.Array.each(b,function(a){d=Math.max(a.count,d);e=Math.min(a.count,e)}),c.each(function(b){var c;
c=e;var g=d,f=parseInt(b.getData("count"),10);c===g?c=100:1>f?c=50:(1>c&&(c=0.1),c=Math.log(f/c)/Math.log(g/c),c=parseInt(50*c+50,10));a.Squarespace.Utils.isDamaskEnabled()?b.setStyle("opacity",c/100):b.setStyle("color","hsl(0, 0%, "+c+"%)")}))},_getItemsFromServer:function(){a.Data.get({url:this.get("endpoints").load,data:{collectionId:this.get("collectionId")},success:function(b){if(a.Lang.isArray(b)){var c=this.get("sortFn");b.sort(c)}this.set("itemList",b)},failure:function(a){console.warn("Could not load data: error.",
a)}},this)},_requestMergeCollectionItems:function(a,b){var c={},d=this.get("mode");c["new"+d]=b;c["old"+d]=a;this._postToServer(c,this.get("endpoints").merge)},_requestDeleteCollectionItems:function(a){var b={};b[this.get("mode")]=a;this._postToServer(b,this.get("endpoints").remove)},_postToServer:function(b,c){var d=a.merge(b,{collectionId:this.get("collectionId")});a.Data.post({url:c,data:d,success:this._postToServerSuccess,failure:function(a){console.warn("Failed to complete request",a)}},this)},
_postToServerSuccess:function(b){b=a.Object.getValue(b,"collection"+this._getItemName(!0).capitalize());a.Lang.isArray(b)&&(b.sort(this.get("sortFn")),this.set("itemList",b))},_removeConfirmCallback:function(){var a=this.get("contentBox").all(".selected."+this.get("itemClass"));if(!(1>a.size())){var b=[];a.each(function(a){a=a.getData("name");b.push(a)},this);this._requestDeleteCollectionItems(b)}},_confirmMergeSuccess:function(){var a=[],b=this.get("contentBox").all(".selected."+this.get("itemClass"));
this.get("itemList");var c=this._editInput.get("value");this._editInput.set("value","");b.each(function(b){b=b.getData("name");a.push(b)},this);this._requestMergeCollectionItems(a,c)},_hideMatchedItems:function(a){this.get("contentBox").all("."+this.get("itemClass")).each(function(b){var c=0===b.getData("name").indexOf(a);b.toggleClass("hidden",!c);c||b.removeClass("selected")})},_refreshItemNodes:function(){var b=this.get("contentBox").one(".field-tag-cloud"),c=this.get("itemList");b.empty();b.toggleClass("field-tag-no-items",
1>c.length);if(1>c.length)b.set("text","This collection does not contain any "+this._getItemName(!0));else{var d=a.Node.create('<ul class="field-tag-list"></ul>');a.Array.each(c,function(a,b){d.append(this._createItemNode(a))},this);b.append(d)}},_createItemNode:function(b){var c=this.get("itemClass"),c=a.Node.create(a.Lang.sub('<li class="field-tag-list-item {itemClass}" tag="{name}" title="{count}"> <span class="field-tag-name  tag">{name}</span> </li>',{count:b.count,name:b.name,itemClass:c}));
c.setData(b);return c},_getItemName:function(a){return!a?this.get("mode"):"tag"===this.get("mode")?"tags":"categories"},_getConfirmText:function(b,c){var d=1<b,e=this._getItemName(d);"remove"!==c&&(c=d?"merge":"rename");return{title:c.capitalize()+" "+e.capitalize(),text:a.Lang.sub("Are you sure you would like to {action} {capName}? <strong>All items with {adjective} {name} will be updated.</strong>",{name:e,capName:e.capitalize(),adjective:d?"these":"this",action:c})}},_getHBTemplateContext:function(){var b=
this.getAttrs(),c={modePlural:"tag"===b.mode?"tags":"categories"};a.Lang.isArray(b.data)&&b.data.sort(this.get("sortFn"));return a.merge(b,c)}},{CSS_PREFIX:"sqs-content-stat-manager",HANDLEBARS_TEMPLATE:"dialog-content-stat-manager.html",ATTRS:{collectionId:{},itemList:{value:[],validator:a.Lang.isArray},endpoints:{value:{tag:{remove:"/api/commondata/RemoveTag",merge:"/api/commondata/MergeTags",load:"/api/commondata/GetCollectionTags"},category:{remove:"/api/commondata/RemoveCategory",merge:"/api/commondata/MergeCategories",
load:"/api/commondata/GetCollectionCategories"}},getter:function(a){return a[this.get("mode")]}},footerHeight:{value:50,validator:a.Lang.isNumber},itemClass:{value:"tag-cloud-item"},maxLength:{},mode:{value:"tag",validator:function(b){return-1!==a.Array.indexOf(["tag","category"],b)},getter:function(a){return a.toLocaleLowerCase()}},sortFn:{value:d,validator:a.Lang.isFunction},title:{}}})},"1.0",{requires:["base","node","squarespace-dialog-field-2","squarespace-dialog-content-stat-manager-template",
"squarespace-widgets-confirmation"]});
YUI.add("squarespace-autocomplete-types",function(a){a.namespace("Squarespace.Constants").AutocompleteTypes={GIVEN_NAME:"given-name",FAMILY_NAME:"family-name",CITY:"city",STATE:"state",POSTAL_CODE:"postal-code",COUNTRY_NAME:"country-name",CC_FULL_NAME:"cc-full-name",CC_NUMBER:"cc-number",CC_EXP_MOTNH:"cc-exp-month",CC_EXP_YEAR:"cc-exp-year",CC_CSC:"cc-csc"};a.Squarespace.AutocompleteTypeATTR={value:null,writeOnce:"initOnly",validator:function(d){if(a.Lang.isNull(d)||a.Object.hasValue(a.Squarespace.Constants.AutocompleteTypes,
d))return!0;console.warn(this.name+": That constant is not an available autocomplete type.");return!1}}},"1.0");
YUI.add("squarespace-dialog-form-selector",function(a){a.namespace("Squarespace.DialogFields");var d={};d[a.Squarespace.FormType.PRODUCT]=a.Squarespace.ProductFormModelEditor;var b=a.Squarespace.DialogFields.FormSelector=a.Base.create("formSelector",a.Squarespace.DialogField2,[],{initializer:function(){a.Squarespace.FormCache.load(a.bind(function(){this._set("dataLoaded",!0)},this))},destructor:function(){this._loadingTimer&&this._loadingTimer.cancel()},renderUI:function(){b.superclass.renderUI.call(this);
var c=this.get("contentBox");this.get("dataLoaded")||this.get("boundingBox").addClass("content-loading");var d=c.appendChild('<div class="loading-state"><div class="spinner"></div><div class="text">Loading...</div></div>');(new a.Squarespace.Spinner({size:20,color:"dark",render:d.one(".spinner")})).spin();d=this.get("strings.noFormMessage");this._noFormEl=c.appendChild('<div class="no-form"><div class="name">'+d+"</div></div>");this._addFormEl=c.appendChild('<div class="add-form"><div class="title"><div class="title-icon"></div><div class="title-text">Create New Form</span></div>')},
bindUI:function(){b.superclass.bindUI.call(this);this.after("dataLoadedChange",this.syncUI,this);this._bindFormCache();this.get("contentBox").delegate("click",function(a){var b=a.currentTarget;a.target.test(".edit")?this._editForm(b):b.hasClass("selected")||(a=b.hasClass("no-form"),b=b.getAttribute("data-form-id"),this.set("data",a?null:b,{noSyncUI:!0}),this._updateSelectedFormNode())},".form, .no-form",this);this._addFormEl.on("click",this._addForm,this)},syncUI:function(){b.superclass.syncUI.call(this);
if(this.get("dataLoaded")){this._setLoadedState();this.get("contentBox").all(".form").remove(!0);var c=this.get("formType"),c=a.Squarespace.FormCache.filterByType(c);a.Array.each(c,this._addFormNode,this);this._updateSelectedFormNode()}else this._setLoadingState()},_setLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();this.get("boundingBox").removeClass("content-loading")},_setLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=a.later(500,
this,function(){this.get("boundingBox").addClass("content-loading")})},_bindFormCache:function(){var b=a.Squarespace.FormCache;this._registerEvent(b.after("reset",this.syncUI,this));this._registerEvent(b.after("add",function(a){this._addFormNode(a.model)},this));this._registerEvent(b.after("remove",function(a){a=a.model;this._removeFormNode(a);a.get("id")===this.get("data")&&(this.set("data",null,{noSyncUI:!0}),this._updateSelectedFormNode())},this));this._registerEvent(b.after("*:save",function(a){this._updateFormNode(a.target)},
this))},_addFormNode:function(b){var d=a.Node.create('<div class="form" data-form-id="'+b.get("id")+'"><div class="name">'+b.get("name")+'</div><div class="edit">EDIT</div></div>');b.get("id")===this.get("data")&&d.addClass("selected");d.setData("form",b);this._addFormEl.insert(d,"before");return d},_updateFormNode:function(a){var b=this._getFormNode(a.get("id")).one(".name");a=a.get("name");a!==b.getHTML()&&b.setHTML(a)},_removeFormNode:function(a){this._getFormNode(a.get("id")).remove(!0)},_getFormNode:function(a){return this.get("contentBox").one('[data-form-id="'+
a+'"]')},_updateSelectedFormNode:function(){var a=this.get("contentBox").one(".selected");a&&a.removeClass("selected");(a=this.get("data"))?this._getFormNode(a).addClass("selected"):this._noFormEl.addClass("selected")},_editForm:function(a){var b=d[this.get("formType")];a=a.getData("form");(new b({model:a})).show()},_addForm:function(){var b=this.get("formType"),e=d[b],g=new a.Squarespace.Models.Form({type:b,name:"New Form",useLightbox:!1});g.onceAfter("save",function(){a.Squarespace.FormCache.add(g);
this.set("data",g.get("id"),{noSyncUI:!0});this._updateSelectedFormNode()},this);(new e({model:g})).show()}},{CSS_PREFIX:"sqs-form-selector",ATTRS:{data:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},formType:{value:a.Squarespace.FormType.BLOCK,validator:function(b){return!a.Object.hasValue(a.Squarespace.FormType,b)?(console.error("Form Selector: Invalid formType."),!1):!0},writeOnce:"initOnly"},dataLoaded:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:!0},
strings:{value:{noFormMessage:"No Form Required"},validator:a.Squarespace.AttrValidators.isObject,writeOnce:"initOnly"}}})},"1.0",{requires:"base node squarespace-enum squarespace-dialog-field-2 squarespace-models-form squarespace-editor-form-product squarespace-spinner squarespace-attr-validators".split(" ")});
YUI.add("squarespace-block-summary-gallery",function(a){var d=a.namespace("Squarespace.Block").SummaryGallery=a.Base.create("block-summary-gallery",a.Squarespace.Block.SocialSummaryBase,[a.Squarespace.Block.Mixin.AspectRatio],{bindUI:function(){d.superclass.bindUI.call(this);this.after("resized",this.syncUI,this);this.after("widgetContentChange",this._setWidgetContent,this)},_renderBlock:function(a){this.get("boundingBox").setData("block",this.get("model").getAttrs());this._shouldGetWidgetRendering(a)?
(this.requestingContent=!0,d.superclass._renderBlock.call(this)):this.fire("widget:contentUpdate")},_renderSuccess:function(a){this.requestingContent=!1;this.set("widgetContent",a.html);this._setWidgetContent()},_setWidgetContent:function(){if(!this.requestingContent){var b=a.Node.create(this.get("widgetContent")),c=this.get("contentBox");c.setHTML(b);this.get("model").get("aspectRatio")&&c.one(".sqs-state-message")&&c.one(".sqs-state-message").wrap("<div></div>");a.Squarespace.GalleryManager.initializeBlock(c);
this._updateAspectRatio()}},_shouldGetWidgetRendering:function(b){return!a.Lang.isValue(b)||!a.Object.hasKey(b,"changed")?!0:!a.Squarespace.Block.Utils.checkWhitelist(this.get("modelWhiteList"),b.changed)}},{CSS_PREFIX:"sqs-block-summary-gallery",MODEL:a.Squarespace.ContentModel.SummaryGalleryBlock,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Gallery},modelWhiteList:{setter:function(b){return a.Lang.isArray(b)?b:a.Lang.isString(b)?[b]:[]},value:"padding autoplay lightbox vSize aspectRatio thumbnail-strip-height thumbnail-strip-margin".split(" ")},
widgetContent:{value:""}}})},"1.0",{requires:"base squarespace-enum squarespace-block-social-summary squarespace-block-mixin-aspect-ratio squarespace-block-gallery squarespace-block-gallery-editor squarespace-block-summary-gallery-model-editor squarespace-block-summary-gallery-model".split(" ")});
(function(a,d){function b(b){return a.less[b.split("/")[1]]}function c(){"development"===u.env?(u.optimization=0,u.watchTimer=setInterval(function(){u.watchMode&&g(function(a,b,c,d,e){b&&n(b.toCSS(),d,e.lastModified)})},u.poll)):u.optimization=3}function e(){for(var a=document.getElementsByTagName("style"),b=0;b<a.length;b++)a[b].type.match(D)&&(new u.Parser({filename:document.location.href.replace(/#.*$/,""),dumpLineNumbers:u.dumpLineNumbers})).parse(a[b].innerHTML||"",function(c,d){var e=d.toCSS(),
g=a[b];g.type="text/css";g.styleSheet?g.styleSheet.cssText=e:g.innerHTML=e})}function g(a,b){for(var c=0;c<u.sheets.length;c++)k(u.sheets[c],a,b,u.sheets.length-(c+1))}function f(a,b){var c=h(a),d=h(b),e,g,f="";if(c.hostPart!==d.hostPart)return"";g=Math.max(d.directories.length,c.directories.length);for(e=0;e<g&&d.directories[e]===c.directories[e];e++);d=d.directories.slice(e);c=c.directories.slice(e);for(e=0;e<d.length-1;e++)f+="../";for(e=0;e<c.length-1;e++)f+=c[e]+"/";return f}function h(a,b){var c=
/^((?:[a-z-]+:)?\/\/(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/,d=a.match(c),e={},g=[];if(!d)throw Error("Could not parse sheet href - '"+a+"'");if(!d[1]||d[2]){c=b.match(c);if(!c)throw Error("Could not parse page url - '"+b+"'");d[1]=c[1];d[2]||(d[3]=c[3]+d[3])}if(d[3]){g=d[3].replace("\\","/").split("/");for(c=0;c<g.length;c++)".."===g[c]&&0<c&&(g.splice(c-1,2),c-=2)}return e.hostPart=d[1],e.directories=g,e.path=d[1]+g.join("/"),e.fileUrl=e.path+(d[4]||""),e.url=
e.fileUrl+(d[5]||""),e}function k(b,c,d,e){var g=b.contents||{},k=b.files||{},s=h(b.href,a.location.href),q=s.url,t=y&&y.getItem(q),v=y&&y.getItem(q+":timestamp"),w={css:t,timestamp:v},z;u.relativeUrls?u.rootpath?b.entryPath?z=h(u.rootpath+f(s.path,b.entryPath)).path:z=u.rootpath:z=s.path:u.rootpath?z=u.rootpath:b.entryPath?z=b.entryPath:z=s.path;p(q,b.type,function(a,f){B+=a.replace(/@import .+?;/ig,"");if(!d&&w&&f&&(new Date(f)).valueOf()===(new Date(w.timestamp)).valueOf())n(w.css,b),c(null,null,
a,b,{local:!0,remaining:e},q);else try{g[q]=a,(new u.Parser({optimization:u.optimization,paths:[s.path],entryPath:b.entryPath||s.path,mime:b.type,filename:q,rootpath:z,relativeUrls:b.relativeUrls,contents:g,files:k,dumpLineNumbers:u.dumpLineNumbers})).parse(a,function(d,g){if(d)return r(d,q);try{c(d,g,a,b,{local:!1,lastModified:f,remaining:e},q);var h=document.getElementById("less-error-message:"+l(q));h&&h.parentNode.removeChild(h)}catch(k){r(k,q)}})}catch(h){r(h,q)}},function(a,b){throw Error("Couldn't load "+
b+" ("+a+")");})}function l(a){return a.replace(/^[a-z]+:\/\/?[^\/]+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function n(a,b,c){var d,e=b.href||"",g="less:"+(b.title||l(e));if(null===(d=document.getElementById(g)))d=document.createElement("style"),d.type="text/css",b.media&&(d.media=b.media),d.id=g,b=b&&b.nextSibling||null,(b||document.getElementsByTagName("head")[0]).parentNode.insertBefore(d,b);if(d.styleSheet)try{d.styleSheet.cssText=a}catch(f){throw Error("Couldn't reassign styleSheet.cssText.");
}else b=document.createTextNode(a),0<d.childNodes.length?d.firstChild.nodeValue!==b.nodeValue&&d.replaceChild(b,d.firstChild):d.appendChild(b);if(c&&y){t("saving "+e+" to cache.");try{y.setItem(e,a),y.setItem(e+":timestamp",c)}catch(h){t("failed to save")}}}function p(a,b,c,d){function e(b,c,d){200<=b.status&&300>b.status?c(b.responseText,b.getResponseHeader("Last-Modified")):"function"==typeof d&&d(b.status,a)}var g=q(),f=v?u.fileAsync:u.async;"function"==typeof g.overrideMimeType&&g.overrideMimeType("text/css");
g.open("GET",a,f);g.setRequestHeader("Accept",b||"text/x-less, text/css; q=0.9, */*; q=0.5");g.send(null);v&&!u.fileAsync?0===g.status||200<=g.status&&300>g.status?c(g.responseText):d(g.status,a):f?g.onreadystatechange=function(){4==g.readyState&&e(g,c,d)}:e(g,c,d)}function q(){if(a.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){return t("browser doesn't support AJAX."),null}}function t(a){"development"==u.env&&"undefined"!=typeof console&&console.log("less: "+
a)}function r(a,b){var c="less-error-message:"+l(b),d=document.createElement("div"),e,g,f=[];g=a.filename||b;var h=g.match(/([^\/]+(\?.*)?)$/)[1];d.id=c;d.className="less-error-message";g="<h3>"+(a.message||"There is an error in your .less file")+'</h3><p>in <a href="'+g+'">'+h+"</a> ";h=function(a,b,c){a.extract[b]&&f.push('<li><label>{line}</label><pre class="{class}">{content}</pre></li>'.replace(/\{line\}/,parseInt(a.line)+(b-1)).replace(/\{class\}/,c).replace(/\{content\}/,a.extract[b]))};a.stack?
g+="<br/>"+a.stack.split("\n").slice(1).join("<br/>"):a.extract&&(h(a,0,""),h(a,1,"line"),h(a,2,""),g+="on line "+a.line+", column "+(a.column+1)+":</p><ul>"+f.join("")+"</ul>");d.innerHTML=g;n(".less-error-message ul, .less-error-message li {\nlist-style-type: none;\nmargin-right: 15px;\npadding: 4px 0;\nmargin: 0;\n}\n.less-error-message label {\nfont-size: 12px;\nmargin-right: 15px;\npadding: 4px 0;\ncolor: #cc7777;\n}\n.less-error-message pre {\ncolor: #dd6666;\npadding: 4px 0;\nmargin: 0;\ndisplay: inline-block;\n}\n.less-error-message pre.line {\ncolor: #ff0000;\n}\n.less-error-message h3 {\nfont-size: 20px;\nfont-weight: bold;\npadding: 15px 0 5px 0;\nmargin: 0;\n}\n.less-error-message a {\ncolor: #10a\n}\n.less-error-message .error {\ncolor: red;\nfont-weight: bold;\npadding-bottom: 2px;\nborder-bottom: 1px dashed red;\n}",
{title:"error-message"});d.style.cssText="font-family: Arial, sans-serif;border: 1px solid #e00;background-color: #eee;border-radius: 5px;-webkit-border-radius: 5px;-moz-border-radius: 5px;color: #e00;padding: 15px;margin-bottom: 15px";"development"==u.env&&(e=setInterval(function(){document.body&&(document.getElementById(c)?document.body.replaceChild(d,document.getElementById(c)):document.body.insertBefore(d,document.body.firstChild),clearInterval(e))},10))}Array.isArray||(Array.isArray=function(a){return"[object Array]"===
Object.prototype.toString.call(a)||a instanceof Array});Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=this.length>>>0,d=0;d<c;d++)d in this&&a.call(b,this[d],d,this)});Array.prototype.map||(Array.prototype.map=function(a,b){for(var c=this.length>>>0,d=Array(c),e=0;e<c;e++)e in this&&(d[e]=a.call(b,this[e],e,this));return d});Array.prototype.filter||(Array.prototype.filter=function(a,b){for(var c=[],d=0;d<this.length;d++)a.call(b,this[d])&&c.push(this[d]);return c});Array.prototype.reduce||
(Array.prototype.reduce=function(a){var b=this.length>>>0,c=0;if(0===b&&1===arguments.length)throw new TypeError;if(2<=arguments.length)var d=arguments[1];else{do{if(c in this){d=this[c++];break}if(++c>=b)throw new TypeError;}while(1)}for(;c<b;c++)c in this&&(d=a.call(null,d,this[c],c,this));return d});Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length,d=b||0;if(!c||d>=c)return-1;for(0>d&&(d+=c);d<c;d++)if(Object.prototype.hasOwnProperty.call(this,d)&&a===this[d])return d;
return-1});Object.keys||(Object.keys=function(a){var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b});String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var u,s;"object"==typeof environment&&"[object Environment]"==={}.toString.call(environment)?("undefined"==typeof a?u={}:u=a.less={},s=u.tree={},u.mode="rhino"):"undefined"==typeof a?(u=exports,s=b("./tree"),u.mode="node"):("undefined"==typeof a.less&&
(a.less={}),u=a.less,s=a.less.tree={},u.mode="browser");u.Parser=function(a){function c(){w=Z[v];ma=y=t}function d(){Z[v]=w;ma=t=y}function e(){t>ma&&(Z[v]=Z[v].slice(t-ma),ma=t)}function g(a){a=a.charCodeAt(0);return 32===a||10===a||9===a}function f(a){var b;if(a instanceof Function)return a.call(sa.parsers);if("string"==typeof a)a=q.charAt(t)===a?a:null,b=1,e();else{e();if(!(a=a.exec(Z[v])))return null;b=a[0].length}if(a){for(var c=t+Z[v].length,d=t+=b;t<c&&g(q.charAt(t));)t++;return Z[v]=Z[v].slice(b+
(t-d)),ma=t,0===Z[v].length&&v<Z.length-1&&v++,"string"==typeof a?a:1===a.length?a[0]:a}}function h(a,b){var c=f(a);if(c)return c;k(b||("string"==typeof a?"expected '"+a+"' got '"+q.charAt(t)+"'":"unexpected token"))}function k(a,b){var c=Error(a);throw c.index=t,c.type=b||"Syntax",c;}function l(a){return"string"==typeof a?q.charAt(t)===a:a.test(Z[v])?!0:!1}function n(a,b){for(var c=a,d=-1;0<=c&&"\n"!==b.charAt(c);c--)d++;return{line:"number"==typeof a?(b.slice(0,a).match(/\n/g)||"").length:null,
column:d}}function p(a,c,d){return{lineNumber:n(a,c).line+1,fileName:"browser"===u.mode||"rhino"===u.mode?d.filename:b("path").resolve(d.filename)}}function r(a,b){var c=a.filename&&b.filename&&a.filename!==b.filename?sa.imports.contents[a.filename]:q,d=n(a.index,c),e=d.line,d=d.column,f=c.split("\n");this.type=a.type||"Syntax";this.message=a.message;this.filename=a.filename||b.filename;this.index=a.index;this.line="number"==typeof e?e+1:null;this.callLine=a.call&&n(a.call,c).line+1;this.callExtract=
f[n(a.call,c).line];this.stack=a.stack;this.column=d;this.extract=[f[e-1],f[e],f[e+1]]}var q,t,v,w,y,z,Z,ma,sa;a=a||{};a.contents||(a.contents={});a.rootpath=a.rootpath||"";a.files||(a.files={});var ba=function(){},D=this.imports={paths:a.paths||[],queue:[],files:a.files,contents:a.contents,mime:a.mime,error:null,push:function(b,c){var d=this;this.queue.push(b);u.Parser.importer(b,this.paths,function(a,e,f){d.queue.splice(d.queue.indexOf(b),1);var g=f in d.files;d.files[f]=e;a&&!d.error&&(d.error=
a);c(a,e,g);0===d.queue.length&&ba(d.error)},a)}};return this.env=a=a||{},this.optimization="optimization"in this.env?this.env.optimization:1,this.env.filename=this.env.filename||null,sa={imports:D,parse:function(c,d){var e,g,h,k=null;t=v=ma=z=0;q=c.replace(/\r\n/g,"\n");q=q.replace(/^\uFEFF/,"");Z=function(b){for(var c=0,d=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,e=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,f=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,g=0,h,l=b[0],n,p=0,s,x;p<
q.length;)if(d.lastIndex=p,(h=d.exec(q))&&h.index===p&&(p+=h[0].length,l.push(h[0])),s=q.charAt(p),e.lastIndex=f.lastIndex=p,(h=f.exec(q))&&h.index===p)p+=h[0].length,l.push(h[0]);else{if(!n&&"/"===s&&(x=q.charAt(p+1),"/"===x||"*"===x))if((h=e.exec(q))&&h.index===p){p+=h[0].length;l.push(h[0]);continue}switch(s){case "{":if(!n){g++;l.push(s);break}case "}":if(!n){g--;l.push(s);b[++c]=l=[];break}case "(":if(!n){n=!0;l.push(s);break}case ")":if(n){n=!1;l.push(s);break}default:l.push(s)}p++}return 0!=
g&&(k=new r({index:p-1,type:"Parse",message:0<g?"missing closing `}`":"missing opening `{`",filename:a.filename},a)),b.map(function(a){return a.join("")})}([[]]);if(k)return d(k,a);try{e=new s.Ruleset([],f(this.parsers.primary)),e.root=!0}catch(l){return d(new r(l,a))}e.toCSS=function(c){return function(d,e){var f=[];d=d||{};"object"==typeof e&&!Array.isArray(e)&&(e=Object.keys(e).map(function(a){var b=e[a];return b instanceof s.Value||(b instanceof s.Expression||(b=new s.Expression([b])),b=new s.Value([b])),
new s.Rule("@"+a,b,!1,0)}),f=[new s.Ruleset(null,e)]);try{var g=c.call(this,{frames:f}).toCSS([],{compress:d.compress||!1,dumpLineNumbers:a.dumpLineNumbers})}catch(h){throw new r(h,a);}if(f=sa.imports.error)throw f instanceof r?f:new r(f,a);return d.yuicompress&&"node"===u.mode?b("ycssmin").cssmin(g):d.compress?g.replace(/(\s)+/g,"$1"):g}}(e.eval);if(t<q.length-1){t=z;h=q.split("\n");g=(q.slice(0,t).match(/\n/g)||"").length+1;for(var n=t,p=-1;0<=n&&"\n"!==q.charAt(n);n--)p++;k={type:"Parse",message:"Syntax Error on line "+
g,index:t,filename:a.filename,line:g,column:p,extract:[h[g-2],h[g-1],h[g]]}}0<this.imports.queue.length?ba=function(a){(a=k||a)?d(a):d(null,e)}:d(k,e)},parsers:{primary:function(){for(var a,b=[];(a=f(this.mixin.definition)||f(this.rule)||f(this.ruleset)||f(this.mixin.call)||f(this.comment)||f(this.directive))||f(/^[\s\n]+/)||f(/^;+/);)a&&b.push(a);return b},comment:function(){var a;if("/"===q.charAt(t)){if("/"===q.charAt(t+1))return new s.Comment(f(/^\/\/.*/),!0);if(a=f(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))return new s.Comment(a)}},
entities:{quoted:function(){var a;a=t;var b;"~"===q.charAt(a)&&(a++,b=!0);if(!('"'!==q.charAt(a)&&"'"!==q.charAt(a))&&(b&&f("~"),a=f(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/)))return new s.Quoted(a[0],a[1]||a[2],b)},keyword:function(){var a;if(a=f(/^[_A-Za-z-][_A-Za-z0-9-]*/))return s.colors.hasOwnProperty(a)?new s.Color(s.colors[a].slice(1)):new s.Keyword(a)},call:function(){var b,c,d=t;if(b=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(Z[v])){b=b[1];c=b.toLowerCase();if("url"===c)return null;t+=
b.length;if("alpha"===c&&(c=f(this.alpha),"undefined"!=typeof c))return c;f("(");c=f(this.entities.arguments);if(f(")")&&b)return new s.Call(b,c,d,a.filename)}},arguments:function(){for(var a=[],b;(b=f(this.entities.assignment)||f(this.expression))&&!(a.push(b),!f(",")););return a},literal:function(){return f(this.entities.ratio)||f(this.entities.dimension)||f(this.entities.color)||f(this.entities.quoted)||f(this.entities.unicodeDescriptor)},assignment:function(){var a,b;if((a=f(/^\w+(?=\s?=)/i))&&
f("=")&&(b=f(this.entity)))return new s.Assignment(a,b)},url:function(){var b;if("u"===q.charAt(t)&&f(/^url\(/))return b=f(this.entities.quoted)||f(this.entities.variable)||f(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",h(")"),new s.URL(null!=b.value||b instanceof s.Variable?b:new s.Anonymous(b),a.rootpath)},variable:function(){var b,c=t;if("@"===q.charAt(t)&&(b=f(/^@@?[\w-]+/)))return new s.Variable(b,c,a.filename)},variableCurly:function(){var b,c=t;if("@"===q.charAt(t)&&(b=f(/^@\{([\w-]+)\}/)))return new s.Variable("@"+
b[1],c,a.filename)},color:function(){var a;if("#"===q.charAt(t)&&(a=f(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/)))return new s.Color(a[1])},dimension:function(){var a;a=q.charCodeAt(t);if(!(57<a||43>a||47===a||44==a))if(a=f(/^([+-]?\d*\.?\d+)(px|%|em|pc|ex|in|deg|s|ms|pt|cm|mm|rad|grad|turn|dpi|dpcm|dppx|rem|vw|vh|vmin|vm|ch)?/))return new s.Dimension(a[1],a[2])},ratio:function(){var a;a=q.charCodeAt(t);if(!(57<a||48>a))if(a=f(/^(\d+\/\d+)/))return new s.Ratio(a[1])},unicodeDescriptor:function(){var a;
if(a=f(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))return new s.UnicodeDescriptor(a[0])},javascript:function(){var a;a=t;var b;"~"===q.charAt(a)&&(a++,b=!0);if("`"===q.charAt(a)&&(b&&f("~"),a=f(/^`([^`]*)`/)))return new s.JavaScript(a[1],t,b)}},variable:function(){var a;if("@"===q.charAt(t)&&(a=f(/^(@[\w-]+)\s*:/)))return a[1]},shorthand:function(){var a,b;if(l(/^[@\w.%-]+\/[@\w.-]+/)){c();if((a=f(this.entity))&&f("/")&&(b=f(this.entity)))return new s.Shorthand(a,b);d()}},mixin:{call:function(){var b=
[],e,g,n=[],p=[],r,H,u,v=t;e=q.charAt(t);var Z,A,w=!1;if(!("."!==e&&"#"!==e)){for(c();e=f(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/);)b.push(new s.Element(g,e,t)),g=f(">");if(f("(")){for(e=[];r=f(this.expression);)if(g=null,A=r,1==r.value.length&&(r=r.value[0],r instanceof s.Variable&&f(":")&&(0<e.length&&(H&&k("Cannot mix ; and , as delimiter types"),u=!0),A=h(this.expression),g=Z=r.name)),e.push(A),p.push({name:g,value:A}),!f(",")&&(f(";")||H))u&&k("Cannot mix ; and , as delimiter types"),
H=!0,1<e.length&&(A=new s.Value(e)),n.push({name:Z,value:A}),Z=null,e=[],u=!1;h(")")}n=H?n:p;f(this.important)&&(w=!0);if(0<b.length&&(f(";")||l("}")))return new s.mixin.Call(b,n,v,a.filename,w);d()}},definition:function(){var a,b=[],e,g,k,n=!1;if(!("."!==q.charAt(t)&&"#"!==q.charAt(t)||l(/^[^{]*\}/)))if(c(),a=f(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){a=a[1];do{f(this.comment);if("."===q.charAt(t)&&f(/^\.{3}/)){n=!0;b.push({variadic:!0});break}if(!(e=f(this.entities.variable)||
f(this.entities.literal)||f(this.entities.keyword)))break;if(e instanceof s.Variable)if(f(":"))g=h(this.expression,"expected expression"),b.push({name:e.name,value:g});else{if(f(/^\.{3}/)){b.push({name:e.name,variadic:!0});n=!0;break}b.push({name:e.name})}else b.push({value:e})}while(f(",")||f(";"));f(")")||(z=t,d());f(this.comment);f(/^when/)&&(k=h(this.conditions,"expected condition"));if(e=f(this.block))return new s.mixin.Definition(a,b,e,k,n);d()}}},entity:function(){return f(this.entities.literal)||
f(this.entities.variable)||f(this.entities.url)||f(this.entities.call)||f(this.entities.keyword)||f(this.entities.javascript)||f(this.comment)},end:function(){return f(";")||l("}")},alpha:function(){var a;if(f(/^\(opacity=/i)&&(a=f(/^\d+/)||f(this.entities.variable)))return h(")"),new s.Alpha(a)},element:function(){var a,b,c;b=f(this.combinator);(a=f(/^(?:\d+\.\d+|\d+)%/)||f(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||f("*")||f("&")||f(this.attribute)||f(/^\([^()@]+\)/)||
f(/^[\.#](?=@)/)||f(this.entities.variableCurly))||f("(")&&(c=f(this.entities.variableCurly)||f(this.entities.variable)||f(this.selector))&&f(")")&&(a=new s.Paren(c));if(a)return new s.Element(b,a,t)},combinator:function(){var a=q.charAt(t);if(">"===a||"+"===a||"~"===a||"|"===a){for(t++;q.charAt(t).match(/\s/);)t++;return new s.Combinator(a)}return q.charAt(t-1).match(/\s/)?new s.Combinator(" "):new s.Combinator(null)},selector:function(){var a,b=[],c;if(f("("))return a=f(this.entity),f(")")?new s.Selector([new s.Element("",
a,t)]):null;for(;(a=f(this.element))&&!(c=q.charAt(t),b.push(a),"{"===c||"}"===c||";"===c||","===c||")"===c););if(0<b.length)return new s.Selector(b)},attribute:function(){var a="",b,c,d;if(f("[")){if(b=f(/^(?:[_A-Za-z0-9-]|\\.)+/)||f(this.entities.quoted))(d=f(/^[|~*$^]?=/))&&(c=f(this.entities.quoted)||f(/^[\w-]+/))?a=[b,d,c.toCSS?c.toCSS():c].join(""):a=b;if(f("]")&&a)return"["+a+"]"}},block:function(){var a;if(f("{")&&(a=f(this.primary))&&f("}"))return a},ruleset:function(){var b=[],e,g,h;c();
for(a.dumpLineNumbers&&(h=p(t,q,a));e=f(this.selector);){b.push(e);f(this.comment);if(!f(","))break;f(this.comment)}if(0<b.length&&(g=f(this.block)))return b=new s.Ruleset(b,g,a.strictImports),a.dumpLineNumbers&&(b.debugInfo=h),b;z=t;d()},rule:function(){var a,b;a=q.charAt(t);var e;c();if(!("."===a||"#"===a||"&"===a))if(a=f(this.variable)||f(this.property)){"@"!=a.charAt(0)&&(e=/^([^@+\/'"*`(;{}-]*);/.exec(Z[v]))?(t+=e[0].length-1,b=new s.Anonymous(e[1])):"font"===a?b=f(this.font):b=f(this.value);
e=f(this.important);if(b&&f(this.end))return new s.Rule(a,b,e,y);z=t;d()}},"import":function(){var b,e,g=t;c();var h=f(/^@import(?:-(once))?\s+/);if(h&&(b=f(this.entities.quoted)||f(this.entities.url)))if(e=f(this.mediaFeatures),f(";"))return new s.Import(b,D,e,"once"===h[1],g,a.rootpath);d()},mediaFeature:function(){var a,b,c=[];do if(a=f(this.entities.keyword))c.push(a);else if(f("(")){b=f(this.property);a=f(this.entity);if(!f(")"))return null;if(b&&a)c.push(new s.Paren(new s.Rule(b,a,null,t,!0)));
else{if(!a)return null;c.push(new s.Paren(a))}}while(a);if(0<c.length)return new s.Expression(c)},mediaFeatures:function(){var a,b=[];do if(a=f(this.mediaFeature)){if(b.push(a),!f(","))break}else if(a=f(this.entities.variable))if(b.push(a),!f(","))break;while(a);return 0<b.length?b:null},media:function(){var b,c,d,e;a.dumpLineNumbers&&(e=p(t,q,a));if(f(/^@media/)&&(b=f(this.mediaFeatures),c=f(this.block)))return d=new s.Media(c,b),a.dumpLineNumbers&&(d.debugInfo=e),d},directive:function(){var b,e,
g,h,k;if("@"===q.charAt(t)){if(e=f(this["import"])||f(this.media))return e;c();if(b=f(/^@[a-z-]+/)){e=b;"-"==b.charAt(1)&&0<b.indexOf("-",2)&&(e="@"+b.slice(b.indexOf("-",2)+1));switch(e){case "@font-face":g=!0;break;case "@viewport":case "@top-left":case "@top-left-corner":case "@top-center":case "@top-right":case "@top-right-corner":case "@bottom-left":case "@bottom-left-corner":case "@bottom-center":case "@bottom-right":case "@bottom-right-corner":case "@left-top":case "@left-middle":case "@left-bottom":case "@right-top":case "@right-middle":case "@right-bottom":g=
!0;break;case "@page":case "@document":case "@supports":case "@keyframes":h=g=!0;break;case "@namespace":k=!0}h&&(b+=" "+(f(/^[^{]+/)||"").trim());if(g){if(g=f(this.block))return new s.Directive(b,g)}else if((e=k?f(this.expression):f(this.entity))&&f(";"))return b=new s.Directive(b,e),a.dumpLineNumbers&&(b.debugInfo=p(t,q,a)),b;d()}}},font:function(){for(var a=[],b=[],c;c=f(this.shorthand)||f(this.entity);)b.push(c);a.push(new s.Expression(b));if(f(","))for(;(c=f(this.expression))&&!(a.push(c),!f(",")););
return new s.Value(a)},value:function(){for(var a,b=[];(a=f(this.expression))&&!(b.push(a),!f(",")););if(0<b.length)return new s.Value(b)},important:function(){if("!"===q.charAt(t))return f(/^! *important/)},sub:function(){var a;if(f("(")&&(a=f(this.expression))&&f(")"))return a},multiplication:function(){var a,b,c,d;if(a=f(this.operand)){for(;!l(/^\/[*\/]/)&&(c=f("/")||f("*"))&&(b=f(this.operand));)d=new s.Operation(c,[d||a,b]);return d||a}},addition:function(){var a,b,c,d;if(a=f(this.multiplication)){for(;(c=
f(/^[-+]\s+/)||!g(q.charAt(t-1))&&(f("+")||f("-")))&&(b=f(this.multiplication));)d=new s.Operation(c,[d||a,b]);return d||a}},conditions:function(){var a,b,c=t,d;if(a=f(this.condition)){for(;f(",")&&(b=f(this.condition));)d=new s.Condition("or",d||a,b,c);return d||a}},condition:function(){var a,b,c,d,e=t,g=!1;f(/^not/)&&(g=!0);h("(");if(a=f(this.addition)||f(this.entities.keyword)||f(this.entities.quoted))return(d=f(/^(?:>=|=<|[<=>])/))?(b=f(this.addition)||f(this.entities.keyword)||f(this.entities.quoted))?
c=new s.Condition(d,a,b,e,g):k("expected expression"):c=new s.Condition("=",a,new s.Keyword("true"),e,g),h(")"),f(/^and/)?new s.Condition("and",c,f(this.condition)):c},operand:function(){var a,b=q.charAt(t+1);"-"===q.charAt(t)&&("@"===b||"("===b)&&(a=f("-"));b=f(this.sub)||f(this.entities.dimension)||f(this.entities.color)||f(this.entities.variable)||f(this.entities.call);return a?new s.Operation("*",[new s.Dimension(-1),b]):b},expression:function(){for(var a,b=[];a=f(this.addition)||f(this.entity);)b.push(a);
if(0<b.length)return new s.Expression(b)},property:function(){var a;if(a=f(/^(\*?-?[_a-z0-9-]+)\s*:/))return a[1]}}}};if("browser"===u.mode||"rhino"===u.mode)u.Parser.importer=function(a,b,c,d){!/^([a-z-]+:)?\//.test(a)&&0<b.length&&(a=b[0]+a);k({href:a,title:a,type:d.mime,contents:d.contents,files:d.files,rootpath:d.rootpath,entryPath:d.entryPath,relativeUrls:d.relativeUrls},function(a,e,f,g,h,k){a&&"function"==typeof d.errback?d.errback.call(null,k,b,c,d):c.call(null,a,e,k)},!0)};(function(a){function b(c){return a.functions.hsla(c.h,
c.s,c.l,c.a)}function c(b){if(b instanceof a.Dimension)return parseFloat("%"==b.unit?b.value/100:b.value);if("number"==typeof b)return b;throw{error:"RuntimeError",message:"color functions take numbers as parameters"};}function d(a){return Math.min(1,Math.max(0,a))}a.functions={rgb:function(a,b,c){return this.rgba(a,b,c,1)},rgba:function(b,d,e,f){b=[b,d,e].map(function(b){return b instanceof a.Dimension&&"%"==b.unit?parseFloat(256*b.value/100):c(b)});return f=c(f),new a.Color(b,f)},hsl:function(a,
b,c){return this.hsla(a,b,c,1)},hsla:function(a,b,d,e){function f(a){return a=0>a?a+1:1<a?a-1:a,1>6*a?h+6*(g-h)*a:1>2*a?g:2>3*a?h+6*(g-h)*(2/3-a):h}a=c(a)%360/360;b=c(b);d=c(d);e=c(e);var g=0.5>=d?d*(b+1):d+b-d*b,h=2*d-g;return this.rgba(255*f(a+1/3),255*f(a),255*f(a-1/3),e)},hsv:function(a,b,c){return this.hsva(a,b,c,1)},hsva:function(a,b,d,e){a=360*(c(a)%360/360);b=c(b);d=c(d);e=c(e);var f;f=Math.floor(a/60%6);a=a/60-f;b=[d,d*(1-b),d*(1-a*b),d*(1-(1-a)*b)];d=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,
1,0],[0,1,2]];return this.rgba(255*b[d[f][0]],255*b[d[f][1]],255*b[d[f][2]],e)},hue:function(b){return new a.Dimension(Math.round(b.toHSL().h))},saturation:function(b){return new a.Dimension(Math.round(100*b.toHSL().s),"%")},lightness:function(b){return new a.Dimension(Math.round(100*b.toHSL().l),"%")},red:function(b){return new a.Dimension(b.rgb[0])},green:function(b){return new a.Dimension(b.rgb[1])},blue:function(b){return new a.Dimension(b.rgb[2])},alpha:function(b){return new a.Dimension(b.toHSL().a)},
luma:function(b){return new a.Dimension(Math.round(100*(0.2126*(b.rgb[0]/255)+0.7152*(b.rgb[1]/255)+0.0722*(b.rgb[2]/255))*b.alpha),"%")},saturate:function(a,c){var e=a.toHSL();return e.s+=c.value/100,e.s=d(e.s),b(e)},desaturate:function(a,c){var e=a.toHSL();return e.s-=c.value/100,e.s=d(e.s),b(e)},lighten:function(a,c){var e=a.toHSL();return e.l+=c.value/100,e.l=d(e.l),b(e)},darken:function(a,c){var e=a.toHSL();return e.l-=c.value/100,e.l=d(e.l),b(e)},fadein:function(a,c){var e=a.toHSL();return e.a+=
c.value/100,e.a=d(e.a),b(e)},fadeout:function(a,c){var e=a.toHSL();return e.a-=c.value/100,e.a=d(e.a),b(e)},fade:function(a,c){var e=a.toHSL();return e.a=c.value/100,e.a=d(e.a),b(e)},spin:function(a,c){var d=a.toHSL(),e=(d.h+c.value)%360;return d.h=0>e?360+e:e,b(d)},mix:function(b,c,d){d||(d=new a.Dimension(50));d=d.value/100;var e=2*d-1,f=b.toHSL().a-c.toHSL().a,e=((-1==e*f?e:(e+f)/(1+e*f))+1)/2,f=1-e;return new a.Color([b.rgb[0]*e+c.rgb[0]*f,b.rgb[1]*e+c.rgb[1]*f,b.rgb[2]*e+c.rgb[2]*f],b.alpha*
d+c.alpha*(1-d))},greyscale:function(b){return this.desaturate(b,new a.Dimension(100))},contrast:function(a,b,c,d){return a.rgb?("undefined"==typeof c&&(c=this.rgba(255,255,255,1)),"undefined"==typeof b&&(b=this.rgba(0,0,0,1)),"undefined"==typeof d?d=0.43:d=d.value,(0.2126*(a.rgb[0]/255)+0.7152*(a.rgb[1]/255)+0.0722*(a.rgb[2]/255))*a.alpha<d?c:b):null},e:function(b){return new a.Anonymous(b instanceof a.JavaScript?b.evaluated:b)},escape:function(b){return new a.Anonymous(encodeURI(b.value).replace(/=/g,
"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},"%":function(b){for(var c=Array.prototype.slice.call(arguments,1),d=b.value,e=0;e<c.length;e++)d=d.replace(/%[sda]/i,function(a){var b=a.match(/s/i)?c[e].value:c[e].toCSS();return a.match(/[A-Z]$/)?encodeURIComponent(b):b});return d=d.replace(/%%/g,"%"),new a.Quoted('"'+d+'"',d)},unit:function(b,c){return new a.Dimension(b.value,c?c.toCSS():"")},round:function(a,b){var c="undefined"==typeof b?
0:b.value;return this._math(function(a){return a.toFixed(c)},a)},ceil:function(a){return this._math(Math.ceil,a)},floor:function(a){return this._math(Math.floor,a)},_math:function(b,c){if(c instanceof a.Dimension)return new a.Dimension(b(parseFloat(c.value)),c.unit);if("number"==typeof c)return b(c);throw{type:"Argument",message:"argument must be a number"};},argb:function(b){return new a.Anonymous(b.toARGB())},percentage:function(b){return new a.Dimension(100*b.value,"%")},color:function(b){if(b instanceof
a.Quoted)return new a.Color(b.value.slice(1));throw{type:"Argument",message:"argument must be a string"};},iscolor:function(b){return this._isa(b,a.Color)},isnumber:function(b){return this._isa(b,a.Dimension)},isstring:function(b){return this._isa(b,a.Quoted)},iskeyword:function(b){return this._isa(b,a.Keyword)},isurl:function(b){return this._isa(b,a.URL)},ispixel:function(b){return b instanceof a.Dimension&&"px"===b.unit?a.True:a.False},ispercentage:function(b){return b instanceof a.Dimension&&"%"===
b.unit?a.True:a.False},isem:function(b){return b instanceof a.Dimension&&"em"===b.unit?a.True:a.False},_isa:function(b,c){return b instanceof c?a.True:a.False},multiply:function(a,b){return this.rgb(a.rgb[0]*b.rgb[0]/255,a.rgb[1]*b.rgb[1]/255,a.rgb[2]*b.rgb[2]/255)},screen:function(a,b){return this.rgb(255-(255-a.rgb[0])*(255-b.rgb[0])/255,255-(255-a.rgb[1])*(255-b.rgb[1])/255,255-(255-a.rgb[2])*(255-b.rgb[2])/255)},overlay:function(a,b){return this.rgb(128>a.rgb[0]?2*a.rgb[0]*b.rgb[0]/255:255-2*
(255-a.rgb[0])*(255-b.rgb[0])/255,128>a.rgb[1]?2*a.rgb[1]*b.rgb[1]/255:255-2*(255-a.rgb[1])*(255-b.rgb[1])/255,128>a.rgb[2]?2*a.rgb[2]*b.rgb[2]/255:255-2*(255-a.rgb[2])*(255-b.rgb[2])/255)},softlight:function(a,b){var c=b.rgb[0]*a.rgb[0]/255,d=c+a.rgb[0]*(255-(255-a.rgb[0])*(255-b.rgb[0])/255-c)/255,c=b.rgb[1]*a.rgb[1]/255,e=c+a.rgb[1]*(255-(255-a.rgb[1])*(255-b.rgb[1])/255-c)/255,c=b.rgb[2]*a.rgb[2]/255;return this.rgb(d,e,c+a.rgb[2]*(255-(255-a.rgb[2])*(255-b.rgb[2])/255-c)/255)},hardlight:function(a,
b){return this.rgb(128>b.rgb[0]?2*b.rgb[0]*a.rgb[0]/255:255-2*(255-b.rgb[0])*(255-a.rgb[0])/255,128>b.rgb[1]?2*b.rgb[1]*a.rgb[1]/255:255-2*(255-b.rgb[1])*(255-a.rgb[1])/255,128>b.rgb[2]?2*b.rgb[2]*a.rgb[2]/255:255-2*(255-b.rgb[2])*(255-a.rgb[2])/255)},difference:function(a,b){var c=Math.abs(a.rgb[0]-b.rgb[0]),d=Math.abs(a.rgb[1]-b.rgb[1]),e=Math.abs(a.rgb[2]-b.rgb[2]);return this.rgb(c,d,e)},exclusion:function(a,b){return this.rgb(a.rgb[0]+b.rgb[0]*(255-a.rgb[0]-a.rgb[0])/255,a.rgb[1]+b.rgb[1]*(255-
a.rgb[1]-a.rgb[1])/255,a.rgb[2]+b.rgb[2]*(255-a.rgb[2]-a.rgb[2])/255)},average:function(a,b){return this.rgb((a.rgb[0]+b.rgb[0])/2,(a.rgb[1]+b.rgb[1])/2,(a.rgb[2]+b.rgb[2])/2)},negation:function(a,b){var c=255-Math.abs(255-b.rgb[0]-a.rgb[0]),d=255-Math.abs(255-b.rgb[1]-a.rgb[1]),e=255-Math.abs(255-b.rgb[2]-a.rgb[2]);return this.rgb(c,d,e)},tint:function(a,b){return this.mix(this.rgb(255,255,255),a,b)},shade:function(a,b){return this.mix(this.rgb(0,0,0),a,b)}}})(b("./tree"));(function(a){a.colors=
{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",
darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",
gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",
lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",
navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",
sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}})(b("./tree"));(function(a){a.Alpha=function(a){this.value=a};a.Alpha.prototype={toCSS:function(){return"alpha(opacity="+(this.value.toCSS?
this.value.toCSS():this.value)+")"},eval:function(a){return this.value.eval&&(this.value=this.value.eval(a)),this}}})(b("../tree"));(function(a){a.Anonymous=function(a){this.value=a.value||a};a.Anonymous.prototype={toCSS:function(){return this.value},eval:function(){return this},compare:function(a){if(!a.toCSS)return-1;var b=this.toCSS();a=a.toCSS();return b===a?0:b<a?-1:1}}})(b("../tree"));(function(a){a.Assignment=function(a,b){this.key=a;this.value=b};a.Assignment.prototype={toCSS:function(){return this.key+
"="+(this.value.toCSS?this.value.toCSS():this.value)},eval:function(b){return this.value.eval?new a.Assignment(this.key,this.value.eval(b)):this}}})(b("../tree"));(function(a){a.Call=function(a,b,c,d){this.name=a;this.args=b;this.index=c;this.filename=d};a.Call.prototype={eval:function(b){var c=this.args.map(function(a){return a.eval(b)}),d;if(this.name in a.functions)try{if(d=a.functions[this.name].apply(a.functions,c),null!=d)return d}catch(e){throw{type:e.type||"Runtime",message:"error evaluating function `"+
this.name+"`"+(e.message?": "+e.message:""),index:this.index,filename:this.filename};}return new a.Anonymous(this.name+"("+c.map(function(a){return a.toCSS(b)}).join(", ")+")")},toCSS:function(a){return this.eval(a).toCSS()}}})(b("../tree"));(function(a){a.Color=function(a,b){Array.isArray(a)?this.rgb=a:6==a.length?this.rgb=a.match(/.{2}/g).map(function(a){return parseInt(a,16)}):this.rgb=a.split("").map(function(a){return parseInt(a+a,16)});this.alpha="number"==typeof b?b:1};a.Color.prototype={eval:function(){return this},
toCSS:function(){return 1>this.alpha?"rgba("+this.rgb.map(function(a){return Math.round(a)}).concat(this.alpha).join(", ")+")":"#"+this.rgb.map(function(a){return a=Math.round(a),a=(255<a?255:0>a?0:a).toString(16),1===a.length?"0"+a:a}).join("")},operate:function(b,c){var d=[];c instanceof a.Color||(c=c.toColor());for(var e=0;3>e;e++)d[e]=a.operate(b,this.rgb[e],c.rgb[e]);return new a.Color(d,this.alpha+c.alpha)},toHSL:function(){var a=this.rgb[0]/255,b=this.rgb[1]/255,c=this.rgb[2]/255,d=this.alpha,
e=Math.max(a,b,c),f=Math.min(a,b,c),g,h=(e+f)/2,k=e-f;if(e===f)g=f=0;else{f=0.5<h?k/(2-e-f):k/(e+f);switch(e){case a:g=(b-c)/k+(b<c?6:0);break;case b:g=(c-a)/k+2;break;case c:g=(a-b)/k+4}g/=6}return{h:360*g,s:f,l:h,a:d}},toARGB:function(){return"#"+[Math.round(255*this.alpha)].concat(this.rgb).map(function(a){return a=Math.round(a),a=(255<a?255:0>a?0:a).toString(16),1===a.length?"0"+a:a}).join("")},compare:function(a){return a.rgb?a.rgb[0]===this.rgb[0]&&a.rgb[1]===this.rgb[1]&&a.rgb[2]===this.rgb[2]&&
a.alpha===this.alpha?0:-1:-1}}})(b("../tree"));(function(a){a.Comment=function(a,b){this.value=a;this.silent=!!b};a.Comment.prototype={toCSS:function(a){return a.compress?"":this.value},eval:function(){return this}}})(b("../tree"));(function(a){a.Condition=function(a,b,c,d,e){this.op=a.trim();this.lvalue=b;this.rvalue=c;this.index=d;this.negate=e};a.Condition.prototype.eval=function(a){var b=this.lvalue.eval(a),c=this.rvalue.eval(a),d=this.index,e;e=function(a){switch(a){case "and":return b&&c;case "or":return b||
c;default:if(b.compare)e=b.compare(c);else{if(!c.compare)throw{type:"Type",message:"Unable to perform comparison",index:d};e=c.compare(b)}switch(e){case -1:return"<"===a||"=<"===a;case 0:return"="===a||">="===a||"=<"===a;case 1:return">"===a||">="===a}}}(this.op);return this.negate?!e:e}})(b("../tree"));(function(a){a.Dimension=function(a,b){this.value=parseFloat(a);this.unit=b||null};a.Dimension.prototype={eval:function(){return this},toColor:function(){return new a.Color([this.value,this.value,
this.value])},toCSS:function(){return this.value+this.unit},operate:function(b,c){return new a.Dimension(a.operate(b,this.value,c.value),this.unit||c.unit)},compare:function(b){return b instanceof a.Dimension?b.value>this.value?-1:b.value<this.value?1:b.unit&&this.unit!==b.unit?-1:0:-1}}})(b("../tree"));(function(a){a.Directive=function(b,c){this.name=b;Array.isArray(c)?(this.ruleset=new a.Ruleset([],c),this.ruleset.allowImports=!0):this.value=c};a.Directive.prototype={toCSS:function(a,b){return this.ruleset?
(this.ruleset.root=!0,this.name+(b.compress?"{":" {\n  ")+this.ruleset.toCSS(a,b).trim().replace(/\n/g,"\n  ")+(b.compress?"}":"\n}\n")):this.name+" "+this.value.toCSS()+";\n"},eval:function(b){var c=this;return this.ruleset&&(b.frames.unshift(this),c=new a.Directive(this.name),c.ruleset=this.ruleset.eval(b),b.frames.shift()),c},variable:function(b){return a.Ruleset.prototype.variable.call(this.ruleset,b)},find:function(){return a.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return a.Ruleset.prototype.rulesets.apply(this.ruleset)}}})(b("../tree"));
(function(a){a.Element=function(b,c,d){this.combinator=b instanceof a.Combinator?b:new a.Combinator(b);"string"==typeof c?this.value=c.trim():c?this.value=c:this.value="";this.index=d};a.Element.prototype.eval=function(b){return new a.Element(this.combinator,this.value.eval?this.value.eval(b):this.value,this.index)};a.Element.prototype.toCSS=function(a){var b=this.value.toCSS?this.value.toCSS(a):this.value;return""==b&&"&"==this.combinator.value.charAt(0)?"":this.combinator.toCSS(a||{})+b};a.Combinator=
function(a){" "===a?this.value=" ":this.value=a?a.trim():""};a.Combinator.prototype.toCSS=function(a){return{"":""," ":" ",":":" :","+":a.compress?"+":" + ","~":a.compress?"~":" ~ ",">":a.compress?">":" > ","|":a.compress?"|":" | "}[this.value]}})(b("../tree"));(function(a){a.Expression=function(a){this.value=a};a.Expression.prototype={eval:function(b){return 1<this.value.length?new a.Expression(this.value.map(function(a){return a.eval(b)})):1===this.value.length?this.value[0].eval(b):this},toCSS:function(a){return this.value.map(function(b){return b.toCSS?
b.toCSS(a):""}).join(" ")}}})(b("../tree"));(function(a){a.Import=function(b,c,d,e,f,g){var h=this;this.once=e;this.index=f;this._path=b;this.features=d&&new a.Value(d);this.rootpath=g;b instanceof a.Quoted?this.path=/(\.[a-z]*$)|([\?;].*)$/.test(b.value)?b.value:b.value+".less":this.path=b.value.value||b.value;(this.css=/css([\?;].*)?$/.test(this.path))||c.push(this.path,function(b,c,d){b&&(b.index=f);d&&h.once&&(h.skip=d);h.root=c||new a.Ruleset([],[])})};a.Import.prototype={toCSS:function(a){a=
this.features?" "+this.features.toCSS(a):"";return this.css?("string"==typeof this._path.value&&!/^(?:[a-z-]+:|\/)/.test(this._path.value)&&(this._path.value=this.rootpath+this._path.value),"@import "+this._path.toCSS()+a+";\n"):""},eval:function(b){var c;this.features&&this.features.eval(b);return this.skip?[]:this.css?this:(c=new a.Ruleset([],this.root.rules.slice(0)),c.evalImports(b),this.features?new a.Media(c.rules,this.features.value):c.rules)}}})(b("../tree"));(function(a){a.JavaScript=function(a,
b,c){this.escaped=c;this.expression=a;this.index=b};a.JavaScript.prototype={eval:function(b){var c,d=this,e={},f=this.expression.replace(/@\{([\w-]+)\}/g,function(c,e){return a.jsify((new a.Variable("@"+e,d.index)).eval(b))});try{f=new Function("return ("+f+")")}catch(g){throw{message:"JavaScript evaluation error: `"+f+"`",index:this.index};}for(var h in b.frames[0].variables())e[h.slice(1)]={value:b.frames[0].variables()[h].value,toJS:function(){return this.value.eval(b).toCSS()}};try{c=f.call(e)}catch(k){throw{message:"JavaScript evaluation error: '"+
k.name+": "+k.message+"'",index:this.index};}return"string"==typeof c?new a.Quoted('"'+c+'"',c,this.escaped,this.index):Array.isArray(c)?new a.Anonymous(c.join(", ")):new a.Anonymous(c)}}})(b("../tree"));(function(a){a.Keyword=function(a){this.value=a};a.Keyword.prototype={eval:function(){return this},toCSS:function(){return this.value},compare:function(b){return b instanceof a.Keyword?b.value===this.value?0:1:-1}};a.True=new a.Keyword("true");a.False=new a.Keyword("false")})(b("../tree"));(function(a){a.Media=
function(b,c){var d=this.emptySelectors();this.features=new a.Value(c);this.ruleset=new a.Ruleset(d,b);this.ruleset.allowImports=!0};a.Media.prototype={toCSS:function(a,b){var c=this.features.toCSS(b);return this.ruleset.root=0===a.length||a[0].multiMedia,"@media "+c+(b.compress?"{":" {\n  ")+this.ruleset.toCSS(a,b).trim().replace(/\n/g,"\n  ")+(b.compress?"}":"\n}\n")},eval:function(b){b.mediaBlocks||(b.mediaBlocks=[],b.mediaPath=[]);var c=new a.Media([],[]);return this.debugInfo&&(this.ruleset.debugInfo=
this.debugInfo,c.debugInfo=this.debugInfo),c.features=this.features.eval(b),b.mediaPath.push(c),b.mediaBlocks.push(c),b.frames.unshift(this.ruleset),c.ruleset=this.ruleset.eval(b),b.frames.shift(),b.mediaPath.pop(),0===b.mediaPath.length?c.evalTop(b):c.evalNested(b)},variable:function(b){return a.Ruleset.prototype.variable.call(this.ruleset,b)},find:function(){return a.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return a.Ruleset.prototype.rulesets.apply(this.ruleset)},
emptySelectors:function(){var b=new a.Element("","&",0);return[new a.Selector([b])]},evalTop:function(b){var c=this;1<b.mediaBlocks.length&&(c=this.emptySelectors(),c=new a.Ruleset(c,b.mediaBlocks),c.multiMedia=!0);return delete b.mediaBlocks,delete b.mediaPath,c},evalNested:function(b){var c,d=b.mediaPath.concat([this]);for(c=0;c<d.length;c++)b=d[c].features instanceof a.Value?d[c].features.value:d[c].features,d[c]=Array.isArray(b)?b:[b];return this.features=new a.Value(this.permute(d).map(function(b){b=
b.map(function(b){return b.toCSS?b:new a.Anonymous(b)});for(c=b.length-1;0<c;c--)b.splice(c,0,new a.Anonymous("and"));return new a.Expression(b)})),new a.Ruleset([],[])},permute:function(a){if(0===a.length)return[];if(1===a.length)return a[0];for(var b=[],c=this.permute(a.slice(1)),d=0;d<c.length;d++)for(var e=0;e<a[0].length;e++)b.push([a[0][e]].concat(c[d]));return b},bubbleSelectors:function(b){this.ruleset=new a.Ruleset(b.slice(0),[this.ruleset])}}})(b("../tree"));(function(a){a.mixin={};a.mixin.Call=
function(b,c,d,e,f){this.selector=new a.Selector(b);this.arguments=c;this.index=d;this.filename=e;this.important=f};a.mixin.Call.prototype={eval:function(b){var c,d,e,f=[],g=!1,h,k,l,n,p;e=this.arguments&&this.arguments.map(function(a){return{name:a.name,value:a.value.eval(b)}});for(h=0;h<b.frames.length;h++)if(0<(c=b.frames[h].find(this.selector)).length){p=!0;for(k=0;k<c.length;k++){d=c[k];n=!1;for(l=0;l<b.frames.length;l++)if(!(d instanceof a.mixin.Definition)&&d===(b.frames[l].originalRuleset||
b.frames[l])){n=!0;break}if(!n&&d.matchArgs(e,b)){if(!d.matchCondition||d.matchCondition(e,b))try{Array.prototype.push.apply(f,d.eval(b,e,this.important).rules)}catch(q){throw{message:q.message,index:this.index,filename:this.filename,stack:q.stack};}g=!0}}if(g)return f}throw p?{type:"Runtime",message:"No matching definition was found for `"+this.selector.toCSS().trim()+"("+(e?e.map(function(a){var b="";return a.name&&(b+=a.name+":"),a.value.toCSS?b+=a.value.toCSS():b+="???",b}).join(", "):"")+")`",
index:this.index,filename:this.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.filename};}};a.mixin.Definition=function(b,c,d,e,f){this.name=b;this.selectors=[new a.Selector([new a.Element(null,b)])];this.params=c;this.condition=e;this.variadic=f;this.arity=c.length;this.rules=d;this._lookups={};this.required=c.reduce(function(a,b){return!b.name||b.name&&!b.value?a+1:a},0);this.parent=a.Ruleset.prototype;this.frames=[]};a.mixin.Definition.prototype=
{toCSS:function(){return""},variable:function(a){return this.parent.variable.call(this,a)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(b,c,d,e){var f=new a.Ruleset(null,[]),g,h=this.params.slice(0),k,l,n,p;if(d){d=d.slice(0);for(k=0;k<d.length;k++)if(n=(g=d[k])&&g.name){p=!1;for(l=0;l<h.length;l++)if(!e[l]&&n===h[l].name){e[l]=g.value.eval(b);
f.rules.unshift(new a.Rule(n,g.value.eval(b)));p=!0;break}if(p)d.splice(k,1),k--;else throw{type:"Runtime",message:"Named argument for "+this.name+" "+d[k].name+" not found"};}}for(k=p=0;k<h.length;k++)if(!e[k]){g=d&&d[p];if(n=h[k].name)if(h[k].variadic&&d){g=[];for(l=p;l<d.length;l++)g.push(d[l].value.eval(b));f.rules.unshift(new a.Rule(n,(new a.Expression(g)).eval(b)))}else{if(l=g&&g.value)l=l.eval(b);else{if(!h[k].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+
d.length+" for "+this.arity+")"};l=h[k].value.eval(c)}f.rules.unshift(new a.Rule(n,l));e[k]=l}if(h[k].variadic&&d)for(l=p;l<d.length;l++)e[l]=d[l].value.eval(b);p++}return f},eval:function(b,c,d){var e=[],f=this.frames.concat(b.frames);c=this.evalParams(b,{frames:f},c,e);var g,h;return c.rules.unshift(new a.Rule("@arguments",(new a.Expression(e)).eval(b))),g=d?this.parent.makeImportant.apply(this).rules:this.rules.slice(0),h=(new a.Ruleset(null,g)).eval({frames:[this,c].concat(f)}),h.originalRuleset=
this,h},matchCondition:function(a,b){return this.condition&&!this.condition.eval({frames:[this.evalParams(b,{frames:this.frames.concat(b.frames)},a,[])].concat(b.frames)})?!1:!0},matchArgs:function(a,b){var c=a&&a.length||0;if(!this.variadic&&(c<this.required||c>this.params.length||0<this.required&&c>this.params.length))return!1;for(var c=Math.min(c,this.arity),d=0;d<c;d++)if(!this.params[d].name&&!this.params[d].variadic&&a[d].value.eval(b).toCSS()!=this.params[d].value.eval(b).toCSS())return!1;
return!0}}})(b("../tree"));(function(a){a.Operation=function(a,b){this.op=a.trim();this.operands=b};a.Operation.prototype.eval=function(b){var c=this.operands[0].eval(b);b=this.operands[1].eval(b);var d;if(c instanceof a.Dimension&&b instanceof a.Color){if("*"!==this.op&&"+"!==this.op)throw{name:"OperationError",message:"Can't substract or divide a color from a number"};d=b;b=c;c=d}if(!c.operate)throw{name:"OperationError",message:"Operation on an invalid type"};return c.operate(this.op,b)};a.operate=
function(a,b,c){switch(a){case "+":return b+c;case "-":return b-c;case "*":return b*c;case "/":return b/c}}})(b("../tree"));(function(a){a.Paren=function(a){this.value=a};a.Paren.prototype={toCSS:function(a){return"("+this.value.toCSS(a)+")"},eval:function(b){return new a.Paren(this.value.eval(b))}}})(b("../tree"));(function(a){a.Quoted=function(a,b,c,d){this.escaped=c;this.value=b||"";this.quote=a.charAt(0);this.index=d};a.Quoted.prototype={toCSS:function(){return this.escaped?this.value:this.quote+
this.value+this.quote},eval:function(b){var c=this,d=this.value.replace(/`([^`]+)`/g,function(d,e){return(new a.JavaScript(e,c.index,!0)).eval(b).value}).replace(/@\{([\w-]+)\}/g,function(d,e){var f=(new a.Variable("@"+e,c.index)).eval(b);return f instanceof a.Quoted?f.value:f.toCSS()});return new a.Quoted(this.quote+d+this.quote,d,this.escaped,this.index)},compare:function(a){if(!a.toCSS)return-1;var b=this.toCSS();a=a.toCSS();return b===a?0:b<a?-1:1}}})(b("../tree"));(function(a){a.Ratio=function(a){this.value=
a};a.Ratio.prototype={toCSS:function(a){return this.value},eval:function(){return this}}})(b("../tree"));(function(a){a.Rule=function(b,c,d,e,f){this.name=b;this.value=c instanceof a.Value?c:new a.Value([c]);this.important=d?" "+d.trim():"";this.index=e;this.inline=f||!1;"@"===b.charAt(0)?this.variable=!0:this.variable=!1};a.Rule.prototype.toCSS=function(a){return this.variable?"":this.name+(a.compress?":":": ")+this.value.toCSS(a)+this.important+(this.inline?"":";")};a.Rule.prototype.eval=function(b){return new a.Rule(this.name,
this.value.eval(b),this.important,this.index,this.inline)};a.Rule.prototype.makeImportant=function(){return new a.Rule(this.name,this.value,"!important",this.index,this.inline)};a.Shorthand=function(a,b){this.a=a;this.b=b};a.Shorthand.prototype={toCSS:function(a){return this.a.toCSS(a)+"/"+this.b.toCSS(a)},eval:function(){return this}}})(b("../tree"));(function(a){a.Ruleset=function(a,b,c){this.selectors=a;this.rules=b;this._lookups={};this.strictImports=c};a.Ruleset.prototype={eval:function(b){var c=
this.selectors&&this.selectors.map(function(a){return a.eval(b)}),d=new a.Ruleset(c,this.rules.slice(0),this.strictImports),e;d.originalRuleset=this;d.root=this.root;d.allowImports=this.allowImports;this.debugInfo&&(d.debugInfo=this.debugInfo);b.frames.unshift(d);(d.root||d.allowImports||!d.strictImports)&&d.evalImports(b);for(var f=0;f<d.rules.length;f++)d.rules[f]instanceof a.mixin.Definition&&(d.rules[f].frames=b.frames.slice(0));for(var g=b.mediaBlocks&&b.mediaBlocks.length||0,f=0;f<d.rules.length;f++)d.rules[f]instanceof
a.mixin.Call&&(e=d.rules[f].eval(b),d.rules.splice.apply(d.rules,[f,1].concat(e)),f+=e.length-1,d.resetCache());for(f=0;f<d.rules.length;f++)e=d.rules[f],e instanceof a.mixin.Definition||(d.rules[f]=e.eval?e.eval(b):e);b.frames.shift();if(b.mediaBlocks)for(f=g;f<b.mediaBlocks.length;f++)b.mediaBlocks[f].bubbleSelectors(c);return d},evalImports:function(b){var c,d;for(c=0;c<this.rules.length;c++)this.rules[c]instanceof a.Import&&(d=this.rules[c].eval(b),"number"==typeof d.length?(this.rules.splice.apply(this.rules,
[c,1].concat(d)),c+=d.length-1):this.rules.splice(c,1,d),this.resetCache())},makeImportant:function(){return new a.Ruleset(this.selectors,this.rules.map(function(a){return a.makeImportant?a.makeImportant():a}),this.strictImports)},matchArgs:function(a){return!a||0===a.length},resetCache:function(){this._variables=this._rulesets=null;this._lookups={}},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(b,c){return c instanceof a.Rule&&!0===c.variable&&
(b[c.name]=c),b},{})},variable:function(a){return this.variables()[a]},rulesets:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(b){return b instanceof a.Ruleset||b instanceof a.mixin.Definition})},find:function(b,c){c=c||this;var d=[],e=b.toCSS();return e in this._lookups?this._lookups[e]:(this.rulesets().forEach(function(e){if(e!==c)for(var f=0;f<e.selectors.length;f++)if(b.match(e.selectors[f])){b.elements.length>e.selectors[f].elements.length?Array.prototype.push.apply(d,
e.find(new a.Selector(b.elements.slice(1)),c)):d.push(e);break}}),this._lookups[e]=d)},toCSS:function(b,c){var d=[],e=[],f=[],g=[],h=[],k;this.root||this.joinSelectors(h,b,this.selectors);for(var l=0;l<this.rules.length;l++)if(k=this.rules[l],k.rules||k instanceof a.Media)g.push(k.toCSS(h,c));else if(k instanceof a.Directive){var n=k.toCSS(h,c);if("@charset"===k.name){if(c.charset){k.debugInfo&&(g.push(a.debugInfo(c,k)),g.push((new a.Comment("/* "+n.replace(/\n/g,"")+" */\n")).toCSS(c)));continue}c.charset=
!0}g.push(n)}else k instanceof a.Comment?k.silent||(this.root?g.push(k.toCSS(c)):e.push(k.toCSS(c))):k.toCSS&&!k.variable?e.push(k.toCSS(c)):k.value&&!k.variable&&e.push(k.value.toString());g=g.join("");if(this.root)d.push(e.join(c.compress?"":"\n"));else if(0<e.length){k=a.debugInfo(c,this);h=h.map(function(a){return a.map(function(a){return a.toCSS(c)}).join("").trim()}).join(c.compress?",":",\n");for(l=e.length-1;0<=l;l--)-1===f.indexOf(e[l])&&f.unshift(e[l]);d.push(k+h+(c.compress?"{":" {\n  ")+
f.join(c.compress?"":"\n  ")+(c.compress?"}":"\n}\n"))}return d.push(g),d.join("")+(c.compress?"\n":"")},joinSelectors:function(a,b,c){for(var d=0;d<c.length;d++)this.joinSelector(a,b,c[d])},joinSelector:function(b,c,d){var e,f,g,h,k,l,n,p,q,r,s,t,u;for(e=0;e<d.elements.length;e++)k=d.elements[e],"&"===k.value&&(h=!0);if(h){f=[];h=[[]];for(e=0;e<d.elements.length;e++)if(k=d.elements[e],"&"!==k.value)f.push(k);else{u=[];0<f.length&&this.mergeElementsOnToSelectors(f,h);for(f=0;f<h.length;f++)if(l=h[f],
0==c.length)0<l.length&&(l[0].elements=l[0].elements.slice(0),l[0].elements.push(new a.Element(k.combinator,"",0))),u.push(l);else for(g=0;g<c.length;g++)n=c[g],p=[],q=[],s=!0,0<l.length?(p=l.slice(0),t=p.pop(),r=new a.Selector(t.elements.slice(0)),s=!1):r=new a.Selector([]),1<n.length&&(q=q.concat(n.slice(1))),0<n.length&&(s=!1,r.elements.push(new a.Element(k.combinator,n[0].elements[0].value,0)),r.elements=r.elements.concat(n[0].elements.slice(1))),s||p.push(r),p=p.concat(q),u.push(p);h=u;f=[]}0<
f.length&&this.mergeElementsOnToSelectors(f,h);for(e=0;e<h.length;e++)b.push(h[e])}else if(0<c.length)for(e=0;e<c.length;e++)b.push(c[e].concat(d));else b.push([d])},mergeElementsOnToSelectors:function(b,c){var d,e;if(0==c.length)c.push([new a.Selector(b)]);else for(d=0;d<c.length;d++)e=c[d],0<e.length?e[e.length-1]=new a.Selector(e[e.length-1].elements.concat(b)):e.push(new a.Selector(b))}}})(b("../tree"));(function(a){a.Selector=function(a){this.elements=a};a.Selector.prototype.match=function(a){var b=
this.elements,c=b.length,d,e;a=a.elements.slice(a.elements.length&&"&"===a.elements[0].value?1:0);d=a.length;e=Math.min(c,d);if(0===d||c<d)return!1;for(c=0;c<e;c++)if(b[c].value!==a[c].value)return!1;return!0};a.Selector.prototype.eval=function(b){return new a.Selector(this.elements.map(function(a){return a.eval(b)}))};a.Selector.prototype.toCSS=function(a){return this._css?this._css:(""===this.elements[0].combinator.value?this._css=" ":this._css="",this._css+=this.elements.map(function(b){return"string"==
typeof b?" "+b.trim():b.toCSS(a)}).join(""),this._css)}})(b("../tree"));(function(a){a.UnicodeDescriptor=function(a){this.value=a};a.UnicodeDescriptor.prototype={toCSS:function(a){return this.value},eval:function(){return this}}})(b("../tree"));(function(a){a.URL=function(a,b){this.value=a;this.rootpath=b};a.URL.prototype={toCSS:function(){return"url("+this.value.toCSS()+")"},eval:function(b){b=this.value.eval(b);var c;return"string"==typeof b.value&&!/^(?:[a-z-]+:|\/)/.test(b.value)&&(c=this.rootpath,
b.quote||(c=c.replace(/[\(\)'"\s]/g,function(a){return"\\"+a})),b.value=c+b.value),new a.URL(b,this.rootpath)}}})(b("../tree"));(function(a){a.Value=function(a){this.value=a;this.is="value"};a.Value.prototype={eval:function(b){return 1===this.value.length?this.value[0].eval(b):new a.Value(this.value.map(function(a){return a.eval(b)}))},toCSS:function(a){return this.value.map(function(b){return b.toCSS(a)}).join(a.compress?",":", ")}}})(b("../tree"));(function(a){a.Variable=function(a,b,c){this.name=
a;this.index=b;this.file=c};a.Variable.prototype={eval:function(b){var c,d,e=this.name;0==e.indexOf("@@")&&(e="@"+(new a.Variable(e.slice(1))).eval(b).value);if(this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+e,filename:this.file,index:this.index};this.evaluating=!0;if(c=a.find(b.frames,function(a){if(d=a.variable(e))return d.value.eval(b)}))return this.evaluating=!1,c;throw{type:"Name",message:"variable "+e+" is undefined",filename:this.file,index:this.index};}}})(b("../tree"));
(function(a){a.debugInfo=function(b,c){var d="";if(b.dumpLineNumbers&&!b.compress)switch(b.dumpLineNumbers){case "comments":d=a.debugInfo.asComment(c);break;case "mediaquery":d=a.debugInfo.asMediaQuery(c);break;case "all":d=a.debugInfo.asComment(c)+a.debugInfo.asMediaQuery(c)}return d};a.debugInfo.asComment=function(a){return"/* line "+a.debugInfo.lineNumber+", "+a.debugInfo.fileName+" */\n"};a.debugInfo.asMediaQuery=function(a){return"@media -sass-debug-info{filename{font-family:"+("file://"+a.debugInfo.fileName).replace(/[\/:.]/g,
"\\$&")+"}line{font-family:\\00003"+a.debugInfo.lineNumber+"}}\n"};a.find=function(a,b){for(var c=0,d;c<a.length;c++)if(d=b.call(a,a[c]))return d;return null};a.jsify=function(a){return Array.isArray(a.value)&&1<a.value.length?"["+a.value.map(function(a){return a.toCSS(!1)}).join(", ")+"]":a.toCSS(!1)}})(b("./tree"));var v=/^(file|chrome(-extension)?|resource|qrc|app):/.test(location.protocol);u.env=u.env||("127.0.0.1"==location.hostname||"0.0.0.0"==location.hostname||"localhost"==location.hostname||
0<location.port.length||v?"development":"production");u.async=u.async||!1;u.fileAsync=u.fileAsync||!1;u.poll=u.poll||(v?1E3:1500);if(u.functions)for(var w in u.functions)u.tree.functions[w]=u.functions[w];(w=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(location.hash))&&(u.dumpLineNumbers=w[1]);u.watch=function(){return u.watchMode||(u.env="development",c()),this.watchMode=!0};u.unwatch=function(){return clearInterval(u.watchTimer),this.watchMode=!1};/!watch/.test(location.hash)&&u.watch();var y=
null;if("development"!=u.env)try{y="undefined"==typeof a.localStorage?null:a.localStorage}catch(z){}w=document.getElementsByTagName("link");var D=/^text\/(x-)?less$/;u.sheets=[];for(var K=0;K<w.length;K++)("stylesheet/less"===w[K].rel||w[K].rel.match(/stylesheet/)&&w[K].type.match(D))&&u.sheets.push(w[K]);var B="";u.modifyVars=function(a){var b=B;for(name in a)b+=("@"===name.slice(0,1)?"":"@")+name+": "+(";"===a[name].slice(-1)?a[name]:a[name]+";");(new u.Parser).parse(b,function(a,b){n(b.toCSS(),
u.sheets[u.sheets.length-1])})};u.refresh=function(a){var b,c;b=c=new Date;g(function(a,d,e,f,g){g.local?t("loading "+f.href+" from cache."):(t("parsed "+f.href+" successfully."),n(d.toCSS(),f,g.lastModified));t("css for "+f.href+" generated in "+(new Date-c)+"ms");0===g.remaining&&t("css generated in "+(new Date-b)+"ms");c=new Date},a);e()};u.refreshStyles=e;u.refresh("development"===u.env);"function"==typeof define&&define.amd&&define("less",[],function(){return u})})(window);
YUI.add("thirdparty-less",function(a){},"1.3.3");
YUI.add("squarespace-damask-login-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["damask-login.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];this.merge(d,a.helpers);var k;a=this.escapeExpression;return b=""+('<div class="login-wrapper">\n  <div class="header">\n    <h1>Squarespace</h1>\n  </div>\n\n  <div class="body">\n    <div data-field-name="email"></div>\n    <div data-field-name="password"></div>\n  </div>\n\n  <div class="footer">\n    <div class="primordial-options">\n      <div class="stay-logged-in" data-field-name="stay-logged-in"></div>\n      <div class="login-with-google" data-action="login-with-google">'+a((k=
(k=b.strings,null==k||!1===k?k:k.loginWithGoogle),"function"===typeof k?k.apply(b):k))+'</div>\n    </div>\n\n    <div class="button-container">\n      <button class="submit" data-action="submit">Login</div>\n    </div>\n  </div>\n</div>')})})();a.Handlebars.registerPartial("damask-login.html".replace("/","."),d.templates["damask-login.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-dialog-password",function(a){var d=a.namespace("Squarespace.DialogFields").Password=a.Base.create("Password",a.Squarespace.DialogFields.Text,[],{initializer:function(){this.publish("forgot-password",{emitFacade:!0})},renderUI:function(){d.superclass.renderUI.call(this);this._forgotNode=this.get("contentBox").appendChild(this.getProperty("FORGOT_PASSWORD_TEMPLATE"))},bindUI:function(){d.superclass.bindUI.call(this);this._forgotNode.on("click",function(a){a.halt();this.fire("forgot-password")},
this);this.after("dataChange",this.syncUI,this)},syncUI:function(){d.superclass.syncUI.call(this);var b=this.get("boundingBox");b.toggleClass("has-title",a.Lang.isValue(this.get("strings.title")));b.toggleClass("forgot-visible",this.get("forgotVisible")&&""===this.get("data").trim())}},{FORGOT_PASSWORD_TEMPLATE:'<a class="forgot">Forgot?</a>',CSS_PREFIX:"sqs-dialog-password",ATTRS:{forgotVisible:{value:!0,validator:a.Lang.isBoolean},password:{value:!0}}})},"1.0",{requires:["squarespace-dialog-text"]});
YUI.add("squarespace-block-fivehundredpix-editor",function(a){a.namespace("Squarespace.Block.Editor");a.namespace("Squarespace.Block.ModelEditorDialog");a.Squarespace.Block.Editor.Fivehundredpix=a.Base.create("fivehundredpix-block-editor-dialog",a.Squarespace.Block.Editor.Gallery,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Fivehundredpix")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Fivehundredpix"}}});a.Squarespace.Block.ModelEditorDialog.Fivehundredpix=
a.Base.create("FivehundredpixModelEditorDialog",a.Squarespace.Block.ModelEditorDialog.SummaryGallery,[],{},{ATTRS:{dialogConfig:{valueFn:null,getter:"_getDefaultDialogConfig"},icon:{value:"fivehundredpix"},type:{value:a.Squarespace.BlockType.FIVEHUNDREDPIX},socialAccountType:{value:a.Squarespace.ExternalServiceProviders.FIVEHUNDREDPIX},collectionType:{value:a.Squarespace.CollectionTypes.FIVEHUNDREDPIX},strings:{value:{name:"500px",itemTypePlural:"Photos",itemType:"Photo"}}}})},"1.0",{requires:"base squarespace-block-summary-gallery-model-editor squarespace-block-fivehundredpix-model squarespace-damask-context-globals squarespace-enum squarespace-util".split(" ")});
YUI.add("squarespace-layout-renderable-blocks-web-app",function(a){var d=a.Squarespace.BlockTypeByString,b={};b[d[a.Squarespace.BlockType.HTML]]={value:{id:"html",ctor:a.Squarespace.Block.Html,label:"Text"}};b[d[a.Squarespace.BlockType.MARKDOWN]]={value:{id:"markdown",ctor:a.Squarespace.Block.Markdown,label:"Markdown"}};b[d[a.Squarespace.BlockType.QUOTE]]={value:{id:"quote",ctor:a.Squarespace.Block.Quote,label:"Quote"}};b[d[a.Squarespace.BlockType.IMAGE]]={value:{id:"image",ctor:a.Squarespace.Block.Image,
label:"Image"}};b[d[a.Squarespace.BlockType.GALLERY]]={value:{id:"gallery",ctor:a.Squarespace.Block.Gallery,label:"Gallery"}};b[d[a.Squarespace.BlockType.VIDEO]]={value:{id:"video",ctor:a.Squarespace.Block.Video,label:"Video"}};b[d[a.Squarespace.BlockType.AUDIO]]={value:{id:"audio",ctor:a.Squarespace.Block.Audio,label:"Audio"}};b[d[a.Squarespace.BlockType.EMBED]]={value:{id:"embed",ctor:a.Squarespace.Block.Embed,label:"Embed"}};b[d[a.Squarespace.BlockType.PRODUCT]]={value:{id:"product",ctor:a.Squarespace.Block.Product,
label:"Product"}};b[d[a.Squarespace.BlockType.AMAZON]]={value:{id:"amazon",ctor:a.Squarespace.Block.Amazon,label:"Amazon"}};b[d[a.Squarespace.BlockType.DONATION]]={value:{id:"donation",ctor:a.Squarespace.Block.Donation,label:"Donation"}};b[d[a.Squarespace.BlockType.FORM]]={value:{id:"form",ctor:a.Squarespace.Block.Form,label:"Form"}};b[d[a.Squarespace.BlockType.NEWSLETTER]]={value:{id:"newsletter",ctor:a.Squarespace.Block.Newsletter,label:"Newsletter"}};b[d[a.Squarespace.BlockType.MAP]]={value:{id:"map",
ctor:a.Squarespace.Block.Map,label:"Map"}};b[d[a.Squarespace.BlockType.CODE]]={value:{id:"code",ctor:a.Squarespace.Block.Code,label:"Code"}};b[d[a.Squarespace.BlockType.MENU]]={value:{id:"menu",ctor:a.Squarespace.Block.Menu,label:"Menu"}};b[d[a.Squarespace.BlockType.LINK]]={value:{id:"link",ctor:a.Squarespace.Block.Link,label:"Link"}};b[d[a.Squarespace.BlockType.CALENDAR]]={value:{id:"calendar",ctor:a.Squarespace.Block.Calendar,label:"Calendar"}};b[d[a.Squarespace.BlockType.OPENTABLE]]={value:{id:"opentable",
ctor:a.Squarespace.Block.Opentable,label:"Opentable"}};b[d[a.Squarespace.BlockType.TOURDATES]]={value:{id:"tourdates",ctor:a.Squarespace.Block.TourDates,label:"Bandsintown"}};b[d[a.Squarespace.BlockType.SPACER]]={value:{id:"spacer",ctor:a.Squarespace.Block.Spacer,label:"Spacer"}};b[d[a.Squarespace.BlockType.HORIZONTAL_RULE]]={value:{id:"horizontal-rule",ctor:a.Squarespace.Block.HorizontalRule,label:"Line"}};b[d[a.Squarespace.BlockType.SEARCH]]={value:{id:"search",ctor:a.Squarespace.Block.Search,label:"Search"}};
b[d[a.Squarespace.BlockType.COLLECTION_LINK]]={value:{id:"collection-link",ctor:a.Squarespace.Block.CollectionLink,label:"Content Link"}};b[d[a.Squarespace.BlockType.BUTTON]]={value:{id:"button",ctor:a.Squarespace.Block.Button,label:"Button"}};b[d[a.Squarespace.BlockType.SUMMARY]]={value:{id:"summary",ctor:a.Squarespace.Block.Summary,label:"Summary"}};b[d[a.Squarespace.BlockType.SUMMARY_V2]]={value:{id:"summary-v2",ctor:a.Squarespace.Block.SummaryV2,label:"Summary"}};b[d[a.Squarespace.BlockType.TAGCLOUD]]=
{value:{id:"tagcloud",ctor:a.Squarespace.Block.Tagcloud,label:"Tag Cloud"}};b[d[a.Squarespace.BlockType.POSTS_BY_TAG]]={value:{id:"posts-by-tag",ctor:a.Squarespace.Block.PostsByTag,label:"Tag List"}};b[d[a.Squarespace.BlockType.POSTS_BY_AUTHOR]]={value:{id:"posts-by-author",ctor:a.Squarespace.Block.PostsByAuthor,label:"Author List"}};b[d[a.Squarespace.BlockType.POSTS_BY_CATEGORY]]={value:{id:"posts-by-category",ctor:a.Squarespace.Block.PostsByCategory,label:"Category List"}};b[d[a.Squarespace.BlockType.POSTS_BY_MONTH]]=
{value:{id:"posts-by-month",ctor:a.Squarespace.Block.PostsByMonth,label:"Month List"}};b[d[a.Squarespace.BlockType.TWITTER]]={value:{id:"twitter",ctor:a.Squarespace.Block.Twitter,label:"Twitter"}};b[d[a.Squarespace.BlockType.FOURSQUARE]]={value:{id:"foursquare",ctor:a.Squarespace.Block.Foursquare,label:"Foursquare"}};b[d[a.Squarespace.BlockType.SOCIAL_ACCOUNT_LINKS]]={value:{id:"social-links",ctor:a.Squarespace.Block.SocialAccountLinks,label:"Social Links"}};b[d[a.Squarespace.BlockType.SOCIAL_ACCOUNT_LINKS_V2]]=
{value:{id:"social-links",ctor:a.Squarespace.Block.SocialAccountLinksV2,label:"Social Links"}};b[d[a.Squarespace.BlockType.RSS]]={value:{id:"rss",ctor:a.Squarespace.Block.Rss,label:"RSS"}};b[d[a.Squarespace.BlockType.FIVEHUNDREDPIX]]={value:{id:"fivehundredpix",ctor:a.Squarespace.Block.Fivehundredpix,label:"500px"}};b[d[a.Squarespace.BlockType.INSTAGRAM]]={value:{id:"instagram",ctor:a.Squarespace.Block.Instagram,label:"Instagram"}};b[d[a.Squarespace.BlockType.FLICKR]]={value:{id:"flickr",ctor:a.Squarespace.Block.Flickr,
label:"Flickr"}};b[d[a.Squarespace.BlockType.SOUNDCLOUD]]={value:{id:"soundcloud",ctor:a.Squarespace.Block.SoundCloud,label:"SoundCloud"}};a.namespace("Squarespace.Layout").RenderableBlocksWebApp=a.Base.create("squarespace-layout-renderable-blocks",a.Base,[],{},{ATTRS:b})},"1.0",{requires:"base squarespace-enum squarespace-util squarespace-block-amazon squarespace-block-audio squarespace-block-button squarespace-block-calendar squarespace-block-code squarespace-block-collection-link squarespace-block-donation squarespace-block-embed squarespace-block-soundcloud squarespace-block-fivehundredpix squarespace-block-flickr squarespace-block-form squarespace-block-foursquare squarespace-block-gallery squarespace-block-horizontal-rule squarespace-block-html squarespace-block-content-html-editor squarespace-block-image squarespace-block-image-editor squarespace-block-instagram squarespace-block-link squarespace-block-map squarespace-block-markdown squarespace-block-markdown-editor squarespace-block-menu squarespace-block-newsletter squarespace-block-opentable squarespace-block-posts-by squarespace-block-product squarespace-block-quote squarespace-block-rss squarespace-block-search squarespace-block-social-account-links squarespace-block-social-account-links-v2 squarespace-block-social-summary squarespace-block-spacer squarespace-block-summary squarespace-block-summary-v2 squarespace-block-tagcloud squarespace-block-tourdates squarespace-block-twitter squarespace-block-video squarespace-block-video-editor".split(" ")});
YUI.add("squarespace-layout-renderable-blocks-email",function(a){var d=a.Squarespace.BlockTypeByString,b={};b[d[a.Squarespace.BlockType.HTML]]={value:{id:"html",ctor:a.Squarespace.Block.Html,label:"Text"}};b[d[a.Squarespace.BlockType.MARKDOWN]]={value:{id:"markdown",ctor:a.Squarespace.Block.Markdown,label:"Markdown"}};b[d[a.Squarespace.BlockType.IMAGE]]={value:{id:"image",ctor:a.Squarespace.Block.Image,label:"Image"}};b[d[a.Squarespace.BlockType.BUTTON]]={value:{id:"button",ctor:a.Squarespace.Block.Button,
label:"Button"}};b[d[a.Squarespace.BlockType.HORIZONTAL_RULE]]={value:{id:"horizontal-rule",ctor:a.Squarespace.Block.HorizontalRule,label:"Horizontal Rule"}};b[d[a.Squarespace.BlockType.SPACER]]={value:{id:"spacer",ctor:a.Squarespace.Block.Spacer,label:"Spacer"}};b[d[a.Squarespace.BlockType.EMAIL_FOOTER]]={value:{id:"email-footer",ctor:a.Squarespace.Block.EmailFooter,label:"Email Footer"}};b[d[a.Squarespace.BlockType.LOGO]]={value:{id:"logo",ctor:a.Squarespace.Block.Logo,label:"Logo"}};b[d[a.Squarespace.BlockType.IN_BROWSER_MESSAGE_LINK]]=
{value:{id:"in-browser-message-link",ctor:a.Squarespace.Block.InBrowserMessageLink,label:"Webview Link"}};a.namespace("Squarespace.Layout").RenderableBlocksEmail=a.Base.create("squarespace-layout-renderable-blocks",a.Base,[],{},{ATTRS:b})},"1.0",{requires:"base squarespace-enum squarespace-util squarespace-block-button squarespace-block-html squarespace-block-content-html-editor-email squarespace-block-image squarespace-block-image-editor-email squarespace-block-markdown squarespace-block-markdown-editor squarespace-block-button-editor-email squarespace-block-horizontal-rule-editor-email squarespace-block-image-editor-email squarespace-block-markdown-editor-email squarespace-block-spacer-editor-email squarespace-block-email-footer squarespace-block-email-footer-editor squarespace-block-logo squarespace-block-logo-editor squarespace-block-in-browser-message-link squarespace-block-in-browser-message-link-editor".split(" ")});
YUI.add("squarespace-dialog-structured-input",function(a){var d=a.namespace("Squarespace.DialogFields").StructuredInput=a.Base.create("structuredInputDialog",a.Squarespace.DialogField2,[a.WidgetParent],{initializer:function(b){a.Lang.isValue(b.dialog)&&(this.dialog=b.dialog);b={childType:a.Squarespace.Widgets.StructuredInput,value:this.get("data"),variables:this.get("variables")};a.Lang.isValue(this.dialog)&&(b.tabIndex=this.dialog.getNextTabIndex());this._structInput=this.add(b).item(0)},renderUI:function(){d.superclass.renderUI.call(this);
this._structInput.set("value",this.get("data"));this._titleContainer=this.get("contentBox").one(".title");this._descriptionContainer=this.get("contentBox").one(".description");this._childrenContainer=this.get("contentBox").one(".structured-input")},bindUI:function(){d.superclass.bindUI.call(this);this.after("dataChange",function(a){"StructuredInput:_syncData"!=a.source&&(this._structInput.set("value",a.newVal,{source:"StructuredInput:bindUI"}),this._titleContainer.setHTML(this.get("strings.title")),
this._descriptionContainer.setHTML(this.get("strings.description")))},this);this._titleContainer.setHTML(this.get("strings.title"));this._descriptionContainer.setHTML(this.get("strings.description"));this._structInput.after("valueChange",this._syncData,this)},destructor:function(){this._structInput&&this._structInput.destroy()},_syncData:function(a){"StructuredInput:bindUI"!=a.source&&this.set("data",a.newVal,{source:"StructuredInput:_syncData"})}},{CSS_PREFIX:"sqs-structured-input-field",TEMPLATE:'<div class="structured-input-field"><div class="structured-input-wrapper"><div class="title"></div><div class="structured-input"></div><div class="description"></div></div> </div>',
ATTRS:{data:{},variables:{}}})},"1.0.0",{requires:["base","node","squarespace-dialog-field-2","squarespace-structured-input"]});
YUI.add("squarespace-frontend-style-mode",function(a){var d=a.Base.create("StyleModePill",a.Squarespace.Frontend.Pill,[],{initializer:function(){a.Squarespace.TweakManager.enable();a.Do.after(function(){this.set("dirty",this)},a.Squarespace.TweakManager,"updateTweakCss",this);a.Squarespace.TweakManager.on(this.get("id")+"|saved",function(){this.set("dirty",!1)},this)},destructor:function(){a.Squarespace.TweakManager.detach(this.get("id")+"|*")},renderUI:function(){d.superclass.renderUI.call(this);
this.get("boundingBox").setAttribute("id","sqs-style-mode-pill")},save:function(){a.Squarespace.TweakManager.dialog.save()},discard:function(){function b(d){a.Object.each(d,function(a,d){a.fields?b(a.fields):a.didDataChange()&&c.push(a)})}var c=[];b(a.Squarespace.TweakManager.dialog.fields);a.Array.each(c,function(a){"presets"!=a.getName()&&a.baseReset()});this.set("dirty",!1);a.Squarespace.TweakManager.discard()},close:function(){a.Squarespace.TweakManager.disable()}},{CSS_PREFIX:"sqs-style-mode-pill",
ATTRS:{contextCollection:{},management:{},strings:{value:{title:"Style Mode",description:"Change fonts, colors, and sizes."}}}});a.namespace("Squarespace.Frontend").StyleModePill=d},"1.0",{requires:["plugin","base","squarespace-tweak","parallel"]});
YUI.add("squarespace-models-google-domain",function(a){var d=a.namespace("Squarespace.Models");d.GoogleDomain=a.Base.create("googleDomain",d.Domain,[],{root:a.Squarespace.REST_API_ROOT+"domains/google",isNew:function(){return a.Lang.isValue(this.get("googleAuthRequestId"))}},{ATTRS:{googleAuthRequestId:{validator:a.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","squarespace-models-domain"]});
YUI.add("button-plugin",function(a,d){function b(){b.superclass.constructor.apply(this,arguments)}a.extend(b,a.ButtonCore,{_afterNodeGet:function(b){var d=this.constructor.ATTRS;if(d=d[b]&&d[b].getter&&this[d[b].getter])return new a.Do.AlterReturn("get "+b,d.call(this))},_afterNodeSet:function(a,b){var d=this.constructor.ATTRS;(d=d[a]&&d[a].setter&&this[d[a].setter])&&d.call(this,b)},_initNode:function(b){this._host=b=b.host;a.Do.after(this._afterNodeGet,b,"get",this);a.Do.after(this._afterNodeSet,
b,"set",this)},destroy:function(){}},{ATTRS:a.merge(a.ButtonCore.ATTRS),NAME:"buttonPlugin",NS:"button"});b.createNode=function(b,d){var g;if(b&&!d&&!b.nodeType&&!(b.getDOMNode||"string"===typeof b))d=b,b=d.srcNode;d=d||{};g=d.template||a.Plugin.Button.prototype.TEMPLATE;b=b||d.srcNode||a.DOM.create(g);return a.one(b).plug(a.Plugin.Button,d)};a.namespace("Plugin").Button=b},"3.17.2",{requires:["button-core","cssbutton","node-pluginhost"]});
YUI.add("squarespace-block-quote-editor",function(a){a.namespace("Squarespace.Block.Editor").Quote=a.Base.create("block-quote-editor",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Quote")}},{NS:"blockEditor",ATTRS:{blockName:{value:"Quote"}}});a.namespace("Squarespace.Block.ModelEditorDialog").Quote=a.Base.create("blockQuoteEditor",a.Squarespace.ModelEditorDialog,[],{},{ATTRS:{dialogConfig:{valueFn:function(){return d}}}});
var d={name:"editQuoteBlock",width:420,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Quote",icon:"/universal/images-v6/icons/icon-quote-16-light-solid.png",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.TextArea,config:{name:"quote","strings.placeholder":"Enter quote...",height:110}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"source",submitOnEnter:!0,"strings.placeholder":"Enter source..."}}]}]}},"1.0",{requires:["squarespace-block-editor-base",
"squarespace-damask-context-globals","squarespace-dialog-text-area"]});
YUI.add("squarespace-dialog-social-account-toggle",function(a){var d=a.namespace("Squarespace.DialogFields").SocialAccountToggle=a.Base.create("socialAccountToggle",a.Squarespace.DialogField2,[],{renderUI:function(){a.Squarespace.DialogFields.SocialAccountToggle.superclass.renderUI.call(this);var b=this.get("account"),b=new a.Squarespace.Widgets.TinySocialAccount({account:b}),c=this.get("contentBox");b.render(c);this._toggle=new a.Squarespace.Widgets.ToggleButton;this._toggle.plug(a.Squarespace.ToggleDrag);
this._toggle.render(c);this._eventHandles=[]},syncUI:function(){d.superclass.syncUI.call(this);this._toggle.set("active",this.get("active"))},bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("boundingBox"),c=this.get("id");this.after(c+"|activeChange",function(a){a.silent||this.syncUI()},this);this._toggle.after(c+"|activeChange",function(){this.set("active",this._toggle.get("active"),{silent:!0})},this);a.on(c+"|click",function(){this.set("active",!this.get("active"))},this);this._toggle.get("boundingBox").on(c+
"|click",function(a){a.halt()})}},{CSS_PREFIX:"sqs-social-account-toggle",ATTRS:{account:{},active:{value:!0},data:{getter:function(){return this.get("account.id")},setter:function(a){var c=this.get("account");c&&(c.id=a)}}}})},"1.0",{requires:["base","base-build","squarespace-dialog-field-2","squarespace-tiny-social-account","squarespace-toggle"]});
YUI.add("squarespace-image-picker",function(a){a.namespace("Squarespace.Widgets").ImagePickerDragPlugin=a.Base.create("imagePickerDragPlugin",a.Plugin.Base,[],{initializer:function(){this._selector=new a.Squarespace.DragSelection({node:this.get("host").get("boundingBox")});this._selector.on(this.get("host").get("id")+"|selection-dragged",this._selectImages,this);this.get("host").get("multiSelect")||console.warn("Image picker drag selection plugin only works on multi-selectable image pickers!")},_selectImages:function(a){var c=
this.get("host"),d=c.get("boundingBox").all(".images .preview"),g=c.get("selectedImageURLs"),f=c.get("maxSelected");d.each(function(c){if(g.length<f&&c.inRegion(a.region)){var d=c.getData("imageURL");-1===g.indexOf(d)&&(g.push(d),c.addClass("selected"))}});c._set("selectedImageURLs",g)},destructor:function(){this._selector.destroy()}},{NS:"ds"});var d=a.namespace("Squarespace.Widgets").ImagePicker=a.Base.create("imagePicker",a.Squarespace.Widgets.DataWidget,[],{initializer:function(){this._displayedImages=
{};this.plug(a.Plugin.WidgetAnim)},destructor:function(){a.Squarespace.EscManager.removeTarget(this)},renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("boundingBox"),c=this.get("strings");a.one(".instructions").setContent(c.instructions);a.one(".cancel").setContent(c.cancelButton);a.one(".confirm").setContent(c.confirmButton);a.one(".prev").setContent("Previous");a.one(".next").setContent("Next");var e=a.one(".error");e.hide();e.setContent(c.loadFailed);this._updateEscapeManager();
this._sizeVisualizerNode=a.one(".size-visualizer");this._hideSizeVisualizer()},bindUI:function(){d.superclass.bindUI.call(this);var b=this.get("id");this.on(b+"|dataStateChange",this._uiSyncDataState,this);this.after(b+"|imageURLsChange",this.syncUI,this);this.after(b+"|visibleChange",this._updateEscapeManager,this);this.after(b+"|pageChange",this.syncUI,this);var c=this.get("boundingBox");c.on(b+"|click",this._selectImage,this);c.plug(a.Squarespace.ScrollLock);c.one(".images").on(b+"|mouseleave",
this._hideSizeVisualizer,this);c.one(".cancel").on(b+"|click",function(a){this.hide();this.fire("cancel")},this);c.one(".confirm").on(b+"|click",function(a){this.hide();this.fire("submit")},this);c.one(".next").on(b+"|click",function(a){a.halt();this.set("page",this.get("page")+1)},this);c.one(".prev").on(b+"|click",function(a){a.halt();this.set("page",this.get("page")-1)},this)},syncUI:function(){d.superclass.syncUI.call(this);var b=this.get("contentBox"),c=b.one(".images"),e=this.get("imageURLs").slice(0),
g=this.get("strings");this.get("sizeInfo")?b.addClass("has-size-info"):b.removeClass("has-size-info");if(this.get("paginate")){var f=this.get("pageSize"),h=this.get("page")*f,k=Math.min(h+f,e.length),l=b.one(".prev");0>=this.get("page")?l.addClass("hidden"):l.removeClass("hidden");l=b.one(".next");h+f>=e.length?l.addClass("hidden"):l.removeClass("hidden");e=e.slice(h,k)}f=b.one(".confirm");this.get("multiSelect")?f.show():f.hide();a.Object.each(this._displayedImages,function(a,b){if(-1===e.indexOf(b)){var d=
c.one('[data-id="'+this._displayedImages[b]+'"]');d&&(d.ancestor(".preview",!0).remove(!0),this._displayedImages[b]=null)}},this);a.Array.each(e,function(b){var d=this.get("id");if(!this._displayedImages[b]){this.get("dataState")!==this.getProperty("DATA_STATES").LOADED&&this.setLoadedState();var e=a.Node.create(this.getProperty("IMAGE_TEMPLATE")),f=e.one("img");this.get("imageDimensions");e.setData("imageURL",b);c.appendChild(e);this.get("multiSelect")&&-1!==this.get("selectedImageURLs").indexOf(b)&&
e.addClass("selected");f.onceAfter(d+"|load",function(b){var c=b.target.get("naturalHeight"),h=b.target.get("naturalHeight");e.one(".dimensions span").setContent(a.substitute(g.imageDimensions,{height:h,width:c}));e.setData("width",c);e.setData("height",h);var h=e.one(".image-underlay"),c=h.width(),h=h.height(),k=b.target.get("width");b=b.target.get("height");e.one(".image-wrapper").setStyles({width:k+4,height:b+4,top:Math.floor(h/2-b/2),left:Math.floor(c/2-k/2)});f.setStyles({top:null,left:null,
position:"static"});e.on(d+"|mouseenter",this._updateSizeVisualizer,this)},this);f.plug(a.Squarespace.Loader2,{source:b,fit:!0});var h=f.loader,k=e.one(".dimensions"),l=function(){h.get("loading")?k.addClass("loading"):k.removeClass("loading")};l();h.after(d+"|loadingChange",l,this);l=f.getAttribute("data-id");l||(l=a.guid(),f.setAttribute("data-id",l));this._displayedImages[b]=l}},this);0<e.length&&b.one(".error").hide();b=b.one(".pagination");this.get("paginate")?b.show():b.hide()},_uiSyncDataState:function(a){a=
a?a.newVal:this.get("dataState");var c=this.getProperty("DATA_STATES"),d=this.get("contentBox").one(".error"),g=this.get("imageURLs"),f=this.get("strings");switch(a){case c.LOADED:0===g.length&&(d.setContent(f.noImages),d.show());break;case c.LOAD_FAILED:d.setContent(f.loadFailed);d.show();break;default:d.hide()}},_isImageWrapper:function(a){return!!a.getData("imageURL")},_selectImage:function(b){b.preventDefault();b.stopPropagation();b=b.target.ancestor(this._isImageWrapper,!0);var c=this.get("contentBox").one(".images"),
d=this.get("selectedImageURLs"),g=this.get("multiSelect");if(b){var f=b.getData("imageURL");g?d.length>=this.get("maxSelected")?new a.Squarespace.Widgets.Alert({"strings.title":"Too Many Images","strings.message":"You have selected the maximum number of images allowed. Please remove an image before selecting another."}):(b.hasClass("selected")?d=a.Array.filter(d,function(a){return a!==f}):d.push(f),b.toggleClass("selected"),this._set("selectedImageURLs",d)):(b.addClass("selected"),c.all(".preview").removeClass("selected"),
this._set("selectedImageURL",f));this.get("hideOnSelect")&&this.hide()}else g&&(this._set("selectedImageURLs",[]),this.get("contentBox").all(".preview.selected").each(function(a){a.removeClass("selected")}))},_updateSizeVisualizer:function(a){if(this._sizeVisualizerNode){var c=a.target.ancestor(this._isImageWrapper,!0);a=c.getData("width");var c=c.getData("height"),d=this._sizeVisualizerNode.one(".label.width"),g=this._sizeVisualizerNode.one(".label.height");d.setContent(a+"px");g.setContent(c+"px");
d.setStyle("left",a-38);g.setStyle("top",c-20);this._sizeVisualizerNode.show();this._sizeVisualizerNode.one(".ruler.width").setStyle("width",a);this._sizeVisualizerNode.one(".ruler.height").setStyle("height",c)}},_hideSizeVisualizer:function(){this._sizeVisualizerNode&&this._sizeVisualizerNode.hide()},_updateEscapeManager:function(){this.get("visible")?a.Squarespace.EscManager.addTarget(this):a.Squarespace.EscManager.removeTarget(this)}},{CSS_PREFIX:"sqs-image-picker",HANDLEBARS_TEMPLATE:"image-picker.html",
IMAGE_TEMPLATE:'<div class="preview"><div class="image-underlay"><div class="dimensions"><span></span></div><div class="image-wrapper"><img /></div></div></div>',ATTRS:{visible:{value:!1},strings:{value:{instructions:"Select an Image",cancelButton:"Cancel",loadFailed:"Unable to load images, please check the URL and try again later.",noImages:"No images available.",imageDimensions:"{width} x {height}",confirmButton:"Confirm"}},imageURLs:{value:[],validator:a.Lang.isArray},selectedImageURL:{value:null,
readOnly:!0},selectedImageURLs:{value:[],readOnly:!0},hideOnSelect:{value:!0},multiSelect:{value:!1},maxSelected:{value:Number.MAX_VALUE,validator:a.Lang.isNumber},paginate:{value:!1},pageSize:{value:25},page:{value:0,validatore:a.Lang.isNumber},sizeInfo:{value:!0}}})},"1.0",{requires:"base base-build widget widget-parent widget-anim squarespace-ss-widget squarespace-image-loader squarespace-ui-base squarespace-async-task-synchronizer squarespace-image plugin squarespace-drag-selection squarespace-image-picker-template squarespace-widgets-alert".split(" ")});
YUI.add("squarespace-range",function(a){function d(c){var e=Array.prototype.slice.call(arguments,1);c&&null==c[b]&&(c._range?c=c._range:(e.unshift(c),c=null));c||(c=a.config.doc.createRange());d.superclass.constructor.apply(this,e);if(this.get("root")){var e=c.cloneRange(),f=this.get("root");f&&(f=f._node,e.selectNodeContents(f));d.intersection(c,e)||(c.setStart(f,0),c.setEnd(f,0))}this._range=c;return this}var b="START_TO_START",c=/^\s+/,e=/\s+$/,g=/(?:^\s+)|(?:\s+$)/g,f=/^[\s\u200b]*$/;a.namespace("Squarespace").Range=
d;a.extend(d,a.Base,{isIdentical:function(a){var b=this._range;return b.startContainer===a.startContainer&&b.endContainer===a.endContainer&&b.startOffset===a.startOffset&&b.endOffset===a.endOffset},isEqual:function(a){return d.isEqual(this._range,a)},union:function(a){return d.union(this.cloneRange(),a)},intersection:function(a){return d.intersection(this.cloneRange(),a)},getPseudoBoundingClientRect:function(){var b=this._range.cloneRange(),c=Math.max(0,(b.endContainer.childNodes&&b.endContainer.childNodes.length||
b.endContainer.textContent.length)-1);b.setEnd(b.endContainer,Math.min(b.endOffset+1,c));b=a.Array(b.getClientRects());c=b.filter(function(a){return a.width});c.length?(b=c.reduce(function(a,b){return{top:Math.min(a.top,b.top),left:Math.min(a.left,b.left),right:Math.max(a.right,b.right),bottom:Math.max(a.bottom,b.bottom)}}),b.width=b.right-b.left,b.height=b.bottom-b.top):b=b[0];return b},shrink:function(){this._range=d._shrink(this._range);return this},grow:function(a){a=a&&a._node||a;var b=this.get("root");
this._range=d._grow(this._range,a||(b?b._node:null));return this},collapse:function(a){this._range.collapse(a);return this},collapsed:function(){return f.test(this._range.toString())},empty:function(){return this._range.collapsed},setStart:function(a,b){a=a._node||a;this._range.setStart(a,b);return this},setEnd:function(a,b){a=a._node||a;this._range.setEnd(a,b);return this},selectNode:function(b){b=b._node||b;a.one(this._range.selectNode.call(this._range,b));return this},selectNodeContents:function(a){a=
a._node||a;this._range.selectNodeContents.call(this._range,a);return this},cloneContents:function(){return a.one(this._range.cloneContents.apply(this._range,arguments))},cloneRange:function(){return new d(this._range.cloneRange(),{root:this.get("root")})},surroundContents:function(a,b){var c=this._range,e=d.extractContents(c);b=b&&b._node||b||a._node||a;a.appendChild(e);c.insertNode(b);return this},extractContents:function(){return a.one(d.extractContents(this._range))},insertNode:function(a){this._range.insertNode(a._node||
a);return this},deleteContents:function(){d.extractContents(this._range);return this},fromSelection:function(){var a=d.fromSelection()._range,b=this.get("root"),c;b&&(c=a.cloneRange(),c.selectNodeContents(b._node),d.intersection(a,c));this._range.setStart(a.startContainer,a.startOffset);this._range.setEnd(a.endContainer,a.endOffset);return this},toSelection:function(){d.toSelection(this._range);return this},iterate:function(a,b){function c(a){if(a.hasChildNodes())return a.firstChild;if(a.nextSibling)return a.nextSibling;
for(;a&&!a.nextSibling;)a=a.parentNode;return a&&a.nextSibling?a.nextSibling:null}var d=current=this._range.startContainer,e=this._range.startOffset,f=this._range.endContainer,g;b&&(current=b,a(current));if(current===f)a(current);else{3==current.nodeType&&(current=current.parentNode,0<e&&(g=d.textContent.substring(e)),a(current,g));for(;current&&current!=f;)(current=c(current))&&a(current)}},_getOffsets:function(){function a(b,c){return b+c.length}var b=this.get("root")._node,c=this._range,e=c.startContainer,
f=c.endContainer,g=c.collapsed,t=3===e.nodeType?c.startOffset:0,c=c.endOffset;if(3!==f.nodeType&&0!==c)if(g)c=0;else{for(g=f.childNodes[c-1];g&&3!==g.nodeType;)f=g,c=f.childNodes.length,g=f.childNodes[c-1];c=g&&g.textContent.length||0}return{start:d._previousText(e,b).reduce(a,0)+(0===t?0.1:t),end:d._previousText(f,b).reduce(a,0)+c}},_setOffsets:function(a){if(!this.get("root")||!a.start&&!a.end)return a;var b=this.get("root"),c=this._range,e=d._offsetToNode(b,a.start),b=Math.floor(a.start)===Math.floor(a.end)&&
c.collapsed?e:d._offsetToNode(b,a.end);c.setStart(e.node,Math.floor(e.offset));b&&c.setEnd(b.node,Math.floor(b.offset));this.shrink();return a},_getContainer:function(){return a.one(this._range.commonAncestorContainer)},_getStartCont:function(){return a.one(this._range.startContainer)},_getStartOff:function(){return this._range.startOffset},_getEndCont:function(){return a.one(this._range.endContainer)},_getEndOff:function(){return this._range.endOffset}},{NAME:"Range",ATTRS:{root:{value:null,lazyAdd:!0},
offsets:{value:{start:0,end:0},lazyAdd:!0,getter:"_getOffsets",setter:"_setOffsets"},container:{value:null,getter:"_getContainer",readOnly:!0},startContainer:{getter:"_getStartCont"},startOffset:{getter:"_getStartOff"},endContainer:{getter:"_getEndCont"},endOffset:{getter:"_getEndOff"}},isPointIdentical:function(a,b,c){if(!a||!b)return!1;null==c&&(c="start");a._range&&(a=a._range);b._range&&(b=b._range);return"start"===c?a.startContainer===b.startContainer&&a.startOffset===b.startOffset:a.endContainer===
b.endContainer&&a.endOffset===b.endOffset},isEqual:function(a,b){return d.isPointEqual(a,b)&&d.isPointEqual(a,b,"end")},isPointEqual:function(a,c,e){if(!a||!c)return!1;var g=!0;null!=e&&"start"!==e&&(g=!1);a._range&&(a=a._range);c._range&&(c=c._range);e=a.cloneRange();var p=a.cloneRange(),q=g?a.startContainer:a.endContainer,t=g?c.startContainer:c.endContainer,r=g?a.startOffset:a.endOffset,u=g?c.startOffset:c.endOffset;if(0===a.compareBoundaryPoints(g?a[b]:a.END_TO_END,a,c)&&q===t&&r===u)return!0;
e.setStart(q,r);e.setEnd(t,u);p.setStart(t,u);p.setEnd(q,r);p.toString().length>e.toString().length&&(e=p);a=e.toString();return""===a||f.test(a)&&(p=e.cloneRange(),d._grow(p),d._wsBefore(e)||d._wsBefore(p)||d._wsAfter(p))?!0:!1},isOverlap:function(a,b){a=a._range||a;b=b._range||b;try{var c=!(0>a.compareBoundaryPoints(a.END_TO_START,b)&&0>a.compareBoundaryPoints(a.START_TO_END,b)),e=!(0<a.compareBoundaryPoints(a.END_TO_START,b)&&0<a.compareBoundaryPoints(a.START_TO_END,b))}catch(f){return!1}return d.isPointEqual(a,
b)?e:d.isPointEqual(a,b,"end")?c:c&&e},union:function(a,c){if(d.isOverlap(a,c)){c=c._range||c;var e=a._range||a,f=0>e.compareBoundaryPoints(e[b],c)?e:c,g=0>e.compareBoundaryPoints(e.END_TO_END,c)?c:e;f===c&&e.setStart(c.startContainer,c.startOffset);g===c&&e.setEnd(c.endContainer,c.endOffset);return a}return null},intersection:function(a,c){c=c._range||c;var e=a._range||a;if(e.startContainer.documentElement!==c.startContainer.documentElement||!d.isOverlap(a,c))return null;var f=0>e.compareBoundaryPoints(e[b],
c)?c:e,g=0>e.compareBoundaryPoints(e.END_TO_END,c)?e:c;f===c&&e.setStart(c.startContainer,c.startOffset);g===c&&e.setEnd(c.endContainer,c.endOffset);return a},_wsBefore:function(b){var c=a.config.doc.createRange(),d=b.startContainer;b=b.startOffset;return 3===d.nodeType&&e.test(d.textContent.substring(0,b))||0<b&&(b<=d.childNodes.length&&null!=d.childNodes[b-1])&&(c.selectNode(d.childNodes[b-1]),e.test(c.toString()))?!0:!1},_wsAfter:function(b){var d=a.config.doc.createRange(),e=b.endContainer;b=
b.endOffset;return 3===e.nodeType&&c.test(e.textContent.substring(b))||0<=b&&(b<e.childNodes.length&&null!=e.childNodes[b])&&(d.selectNode(e.childNodes[b]),c.test(d.toString()))?!0:!1},_shrink:function(a){var b=a.startContainer,c=a.startOffset,e=a.endContainer,g=a.endOffset;if(a.collapsed)return a;for(;3===b.nodeType&&(f.test(b.textContent)||b.textContent.length===c)&&(b.nextSibling||b.parentNode.nextSibling);)b=b.nextSibling||b.parentNode.nextSibling,c=0;for(;1===b.nodeType&&b.childNodes[c];){b=
b.childNodes[c];for(c=0;3===b.nodeType&&f.test(b.textContent)&&b.nextSibling;)b=b.nextSibling,c=0}a.setStart(b,c);0===g&&(new d(a.cloneRange())).setStart(b,b.length).collapsed()&&(e=b,g=b.length,a.setEnd(e,g));for(;3===e.nodeType&&(f.test(e.textContent)||0===g)&&(e.previousSibling||e.parentNode.previousSibling);)e=e.previousSibling||e.parentNode.previousSibling,g=e.childNodes&&e.childNodes.length?e.childNodes.length:e.textContent.length;for(;1===e.nodeType&&g&&(e.childNodes[g]||g&&e.childNodes.length===
g);){e=e.childNodes[g]||e.childNodes[g-1];for(g=e.childNodes&&e.childNodes.length?e.childNodes.length:e.textContent.length;3===e.nodeType&&(f.test(e.textContent)||0===g)&&(e.previousSibling||e.parentNode.previousSibling);)e=e.previousSibling||e.parentNode.previousSibling,g=e.childNodes&&e.childNodes.length?e.childNodes.length:e.textContent.length}a.setEnd(e,g);return a},_grow:function(a,b){var c=a.startContainer,e=a.startOffset,f=a.endContainer,q=a.endOffset,t=a.cloneRange(),r=a.toString().replace(g,
" "),u,s,v=r.length&&" "===r[r.length-1];for(u=r.length&&" "===r[0]?r:" "+r;c.parentNode&&c!==b;)if(t.setStartBefore(c),s=t.toString().replace(g," "),s===r)a.setStart(t.startContainer,t.startOffset),c=t.startContainer,e=t.startOffset;else if((" "===s[0]?s:" "+s)===u)c=t.startContainer,e=t.startOffset;else break;!d.isPointIdentical(a,t,"start")&&d._wsBefore(t)&&a.setStart(c,e);r=a.toString().replace(g," ");u=v?r:r+" ";for(t=a.cloneRange();f.parentNode&&f!==b;)if(t.setEndAfter(f),s=t.toString().replace(g,
" "),s===r)a.setEnd(t.endContainer,t.endOffset),f=t.endContainer,q=t.endOffset;else if((" "===s[s.length-1]?s:s+" ")===u)f=t.endContainer,q=t.endOffset;else break;!d.isPointIdentical(a,t,"end")&&d._wsAfter(t)&&a.setEnd(f,q);return a},extractContents:function(a){for(var b=a=a.extractContents(),c=a,d;b.firstChild;)b=b.firstChild;for(;!b.textContent&&b.parentNode;)d=b.parentNode,d.removeChild(b),b=d;for(;c.lastChild;)c=c.lastChild;for(;!c.textContent&&c.parentNode;)d=c.parentNode,d.removeChild(c),c=
d;return a},fromSelection:function(b){var c=a.config.doc.getSelection();if(c&&c.rangeCount){var e=c.getRangeAt(c.rangeCount-1);1<c.rangeCount&&(c.removeallRanges(),c.addRange(e));return new d(e.cloneRange(),b)}return new d(b)},toSelection:function(b){var c=a.config.doc.getSelection();c&&(c.removeAllRanges(),c.addRange(b._range||b))},_previousText:function(a,b){var c=[];a=a._node||a;for(b=b._node||b||a.parentNode;a&&a!==b;){for(;a.previousSibling;)a=a.previousSibling,(1===a.nodeType||3===a.nodeType)&&
c.push(a.textContent);a=a.parentNode}return c},_offsetToNode:function(a,b,c){a=a._node||a;if(!b){for(;a.firstChild;)a=a.firstChild;a=a.parentNode||a;return{node:a,offset:0,acc:0}}null==c&&(c=0);for(var d,e,f=0,g=a.childNodes.length;f<g;f++)if(d=a.childNodes[f],1===d.nodeType||3===d.nodeType){e=d.textContent.length;if(c<=b&&c+e>=b)return 0<d.childNodes.length?this._offsetToNode(d,b,c):{node:d,offset:b-c,acc:c};c+=e}return c===Math.floor(b)?{node:d,offset:d.childNodes.length||d.textContent.length,acc:c}:
{node:a,offset:a.childNodes.length||a.textContent.length,acc:0}},fromOffsets:function(a,b){var c=new d({root:a});c.set("offsets",b);return c}})},"1.0.0",{requires:["base","node"]});
YUI.add("squarespace-widgets-google-places-autocomplete",function(a){a.namespace("Squarespace.Widgets");a.Squarespace.Widgets.GooglePlacesAutocomplete=a.Base.create("GooglePlacesAutoCompleteWidget",a.Squarespace.Widgets.ScrollingAutoCompleteList,[a.Squarespace.Mixins.GooglePlacesAutocomplete],{},{CSS_PREFIX:a.Squarespace.Widgets.ScrollingAutoCompleteList.CSS_PREFIX})},"1.0",{requires:["base","squarespace-scrolling-auto-complete-list","squarespace-mixins-google-places-autocomplete"]});
YUI.add("squarespace-block-mixin-gallery-option-sync",function(a){a.namespace("Squarespace.Block.Mixins").Gallery=a.Base.create("GalleryManagment",a.Base,[],{_defaultGalleryOptions:function(){var d,b;d=a.Squarespace.GalleryOptions;b=a.Array.map(a.Object.values(d),function(a){return a.defaultValue});d=a.Object.keys(d);return a.Array.hash(d,b)},_getGalleryOptions:function(){var d=a.clone(a.Squarespace.GalleryOptions),b=this.get("model");a.Object.each(d,function(a,d){var g=b.get(d);void 0!==g?(a.data=
g,a.defaultValue=g):a.defaultValue=g||a.defaultValue},this);return d},syncGalleryOptions:function(a,b){var c=this.get("dialog").getField("options"),e=this.get("model"),g={};g[a]=c.get("data")[a];if("design"===a){var f=null;"slider"===g.design&&(f=e.get("aspectRatio")||75);e.set("aspectRatio",f,{silent:!0})}void 0===c.get("data")[a]?e.setAttrs(g,{silent:!0}):e.setAttrs(g)},unsetVSize:function(){this.get("model").set("vSize",null)},renderGridCSS:function(d,b){var c=d.one(".sqs-gallery-container");if(!a.Lang.isNull(c)){var e=
this._getDefaultContent(),g=c.get("className").split(" "),g=a.Array.find(g,function(a){return a.startsWith("sqs-gallery-thumbnails-per-row-")}),f=b.padding,h=b["thumbnails-per-row"];a.Lang.isValue(h)||(h=e.thumbsPerRow);a.Lang.isValue(f)||(f=e.padding);var k=".sqs-block-content#"+d.get("id"),e=d.one("#design-grid-css"),f=k+" .sqs-gallery-design-grid { margin-right: -"+f+"px; } "+k+" .sqs-gallery-design-grid .sqs-gallery-design-grid-slide .margin-wrapper { margin-right: "+f+"px; margin-bottom: "+f+
"px; };";g&&c.removeClass(g);c.addClass("sqs-gallery-thumbnails-per-row-"+h);e&&e.setContent(f)}},renderSlideshowCSS:function(d,b){var c=d.one(".sqs-gallery-thumbnails"),e;c&&(e=this._getDefaultContent(),a.Lang.isNumber(b["thumbnail-strip-height"])||(b["thumbnail-strip-height"]=e["thumbnail-strip-height"]),a.Lang.isNumber(b["thumbnail-strip-margin"])||(b["thumbnail-strip-margin"]=e["thumbnail-strip-margin"]),c.setStyles({marginTop:b["thumbnail-strip-margin"],height:b["thumbnail-strip-height"]}),c.getData("gallery")["gallery-design"].syncUI())}},
{ATTRS:{NS:"gallerySynchronizer"}})},"1.0",{requires:["base","base-build","plugin","squarespace-dialog-gallery-options"]});
YUI.add("squarespace-dialog-post-by-email",function(a){var d=a.namespace("Squarespace.DialogFields"),b=d.PostByEmailAddress=a.Base.create("PostByEmailAddress",d.Text,[],{allowedToChangePostByEmail:function(){return a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE)},renderUI:function(){b.superclass.renderUI.call(this);this.allowedToChangePostByEmail()&&(this._refreshButtonNode=this.get("contentBox").appendChild('<div class="refresh-post-by-email"></div>'),
this._clearButtonNode=this.get("contentBox").appendChild('<div class="clear-post-by-email"></div>'))},bindUI:function(){b.superclass.bindUI.call(this);this.allowedToChangePostByEmail()&&(this._refreshButtonNode.on("click",function(a){a.halt();this._refreshEmail()},this),this._clearButtonNode.on("click",function(a){a.halt();this._clearEmail()},this));var a=this.get("contentBox");a.on("click",function(){a.one("input").focus()});this._registerEvent(this.get("collection").after("postByEmailAddressChange",
function(a){this.set("data",a.newVal)},this))},_refreshEmail:function(){var b=this.get("collection");a.Data.post({url:"/api/commondata/GenerateCollectionPostByEmailAddress",data:{collectionId:b.get("id")},success:function(a){b.set("postByEmailAddress",a.postByEmailAddress)}},this)},_clearEmail:function(){var b=this.get("collection");a.Data.post({url:"/api/commondata/ClearCollectionPostByEmailAddress",data:{collectionId:b.get("id")},success:function(){b.set("postByEmailAddress","")}},this)}},{CSS_PREFIX:"sqs-dialog-field-post-by-email",
ATTRS:{collection:{},className:{value:"thin"},"strings.placeholder":{value:"None"}}})},"1.0",{requires:["squarespace-dialog-text"]});
YUI.add("squarespace-content-item-types-product-variants",function(a){a.namespace("Squarespace.ContentItemEditor");var d=a.Squarespace.ContentItemEditor.ProductVariants=a.Base.create("ProductVariantsContentItemEditor",a.Squarespace.ContentItemEditor.Product,[],{initializer:function(){var a=this.get("dialog");a.on("button-duplicate",this._duplicate,this);a.on("ready",function(){var c=a.getField("variants"),d=a.getField("pricingPlaceholder");c.after("dataChange",function(a){d.set("data.variants",a.newVal.variants)},
this);c.on("errors",function(){d.pulseWarn()},this)},this)},getDialogData:function(){var a=d.superclass.getDialogData.call(this),c=a.structuredContent;a.variants={variants:c.variants,variantOptionOrdering:c.variantOptionOrdering};return a},sanitizeDialogData:function(b){b=d.superclass.sanitizeDialogData.call(this,b);var c=b.variants;b.structuredContent=a.merge(b.structuredContent,{variants:c.variants,variantOptionOrdering:c.variantOptionOrdering});delete b.variants;return b},_duplicate:function(){var b=
this.get("dialog");(new a.Promise(function(b){a.Data.get({url:"/api/commerce/inventory/violation",success:b})})).then(a.bind(function(c){if(c.isAtOrOverProductLimit)if(c.blockUserAction)(new a.Squarespace.Widgets.Confirmation({"strings.cancel":"Not Now","strings.confirm":"Go to Upgrade","strings.title":"Product Limit Reached","strings.message":c.message})).on("confirm",function(){b.cancel();CONFIG_PANEL.goToUpgrade()});else(new a.Squarespace.Widgets.Confirmation({"strings.cancel":"Not Now","strings.confirm":"Continue",
"strings.title":"Warning: Product Limit","strings.message":c.message})).on("confirm",this._closeAndShowDuplicateProductEditor,this);else this._closeAndShowDuplicateProductEditor()},this))},_closeAndShowDuplicateProductEditor:function(){var b=this.get("dialog"),c=this.get("model");b.on("canceled",function(){var b=a.clone(c.toJSON()),d=b.structuredContent;a.Array.each(d.variants,function(b){b.sku=a.Squarespace.Commerce.generateSKU()});var f=new a.Squarespace.Models.ContentItem({title:"Copy of "+b.title,
recordType:b.recordType,collectionId:b.collectionId,categories:b.categories,excerpt:b.excerpt,structuredContent:{variants:d.variants,variantOptionOrdering:d.variantOptionOrdering,productType:d.productType,additionalFieldsFormId:d.additionalFieldsFormId}}),b=this.get("model").get("collectionId");a.Squarespace.ContentCollectionCache.getCollectionById(b,function(b){var c=new (a.Squarespace.ContentItemEditorFactory.getEditor(f))({model:f});f.once("save",function(){b.items.add(f)});setTimeout(function(){c.show()},
50)})},this);b.cancel()}})},"1.0",{requires:"base json squarespace-content-item-types-product squarespace-commerce-utils squarespace-models-content-item squarespace-models-content-collection squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-frontend-content-mode",function(a){var d=a.Squarespace.Frontend.EditController,b=new (a.Base.create("ContentModeController",a.Base,[],{initializer:function(){this._plugins=[];this._events=[];this._editControllers=[];this._initializeEditControllers();this.after("visibleChange",this._sync,this);a.on("beforeunload",function(a){this.get("visible")&&this.get("dirty")&&(a.returnValue="You have unsaved changes.")},this);this.publish("navigate",{emitFacade:!0});this.on("*:navigate",this._navigate,
this)},_initializeEditControllers:function(){this._initializeBlockFields();this._initializeSiteTitle();this._initializePageConfiguration();this._isDamask()&&(this._initializePageLayoutEditor(),this._initializeNavigations(),this._initializeConnectedAccounts(),this._initializeItemEditor())},_navigate:function(b){b.source!=this.name&&(a.Squarespace.Utils.isInDamaskFrame()?this.fire("navigate",{source:this.name}):a.Squarespace.Management.manageSite({module:b.path.split("/").filter(function(a){return 0<
a.length})[0]}))},_initializeSiteTitle:function(){a.all('[data-content-field="site-title"]').each(function(a){this._registerEditController(new d.SiteTitle({rootNode:a}))},this)},_initializeItemEditor:function(){this._isDemoCollectionPage()||this._isItemView()&&a.all("[data-item-id]:not(.sqs-simple-like):not(.sqs-add-to-cart-button)").each(function(a){this._registerEditController(new d.BlogPost({rootNode:a}))},this)},_isDemoCollectionPage:function(){return a.Squarespace.ContentCollectionUtils.isDemoCollectionId(a.config.win.Static.SQUARESPACE_CONTEXT.collectionId)},
_isItemView:function(){return a.Lang.isValue(a.config.win.Static.SQUARESPACE_CONTEXT.itemId)},_initializePageConfiguration:function(){if(!this._isItemView()){var b;b=a.Squarespace.Utils.isDamaskEnabled()?'[data-content-field="main-content"]':'[data-content-field="page-settings"]';a.all(b).each(function(a){this._registerEditController(new d.PageConfiguration({rootNode:a}))},this)}},_initializeNavigations:function(){a.all('[data-content-field^="navigation"]').each(function(a){this._registerEditController(new d.Navigation({rootNode:a}))},
this)},_initializeConnectedAccounts:function(){a.all('[data-content-field="connected-accounts"]').each(function(a){this._registerEditController(new d.ConnectedAccounts({rootNode:a}))},this)},_initializeBlockFields:function(){a.all('.sqs-layout[data-type="block"], .sqs-layout[data-type="block-field"]').each(function(a){this._registerEditController(new d.BlockField({rootNode:a}))},this)},_initializePageLayoutEditor:function(){a.all('.sqs-layout[data-type="page"]').each(function(a){this._registerEditController(new d.Page({rootNode:a}))},
this)},_registerEditController:function(a,b){a.after("dirtyChange",function(a){this._syncDirtyState()},this);a.addTarget(this);this._editControllers.push(a)},_getEditControllerByType:function(b){return a.Array.find(this._editControllers,function(a){return a instanceof b})},_syncDirtyState:function(){var b=!1;a.Array.each(this._editControllers,function(a){a.get("dirty")&&(b=!0)});this.set("dirty",b)},revertEditControllerChanges:function(b,c){return new a.Promise(a.bind(function(b,c){var d=new a.Parallel;
a.Array.each(this._editControllers,function(a){a.get("dirty")&&a.revert().then(d.add(function(){}))});d.done(b)},this))},saveEditControllerChanges:function(){return new a.Promise(a.bind(function(b,c){var d=new a.Parallel;a.Array.each(this._editControllers,function(a){a.get("dirty")&&a.save().then(d.add(function(){}))});d.done(b)},this))},_sync:function(){var b=this.get("visible");a.one("body").toggleClass("sqs-edit-mode",b);a.Array.each(this._editControllers,function(a){a.set("visible",b)})},_isDamask:function(){return a.Squarespace.Utils.isDamaskEnabled()}},
{ATTRS:{visible:{value:!1},dirty:{value:!1}}})),c=a.Base.create("ContentModePill",a.Squarespace.Frontend.Pill,[],{initializer:function(){b.set("visible",!0);a.Squarespace.Layout.Help.showIfNeeded();var c=this.get("contextCollection").get("typeLabel")||"Page",c=c.capitalize();this.set("buttons",[{label:"Manage "+c,className:"manage",action:"_managePage"}])},destructor:function(){b.detach(this.get("id")+"|*");b.set("visible",!1)},renderUI:function(){c.superclass.renderUI.call(this);this.get("boundingBox").setAttribute("id",
"sqs-content-mode-pill")},bindUI:function(){c.superclass.bindUI.call(this);b.on(this.get("id")+"|dirtyChange",function(a){this.set("dirty",a.newVal)},this)},_managePage:function(){this.get("management").configureSiteInConfig()},save:function(){b.saveEditControllerChanges()},discard:function(){b.revertEditControllerChanges()},close:function(){if(b.get("dirty")){var c=new a.Squarespace.Widgets.Confirmation({style:a.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_OR_REJECT,showOverlay:!0,"strings.confirm":"Save",
"strings.reject":"Discard","strings.title":"Review Changes","strings.message":"You have made changes. Do you want to save or discard them?"});c.on("confirm",function(){b.saveEditControllerChanges().then(a.bind(function(){this.get("management").exitEditMode()},this))},this);c.on("reject",function(){b.revertEditControllerChanges().then(a.bind(function(){this.get("management").exitEditMode()},this))},this)}else this.get("management").exitEditMode()}},{CSS_PREFIX:"sqs-content-mode-pill",ATTRS:{contextCollection:{},
management:{},strings:{value:{title:"Edit Mode"}}}}),e=a.namespace("Squarespace.Frontend");e.ContentModePill=c;e.ContentModeController=b},"1.0",{requires:"base squarespace-ss-widget squarespace-frontend-overlay-editor squarespace-editor-member-account squarespace-editor-collection squarespace-layout-help squarespace-frontend-pill squarespace-frontend-edit-controller-page squarespace-frontend-edit-controller-block-field squarespace-frontend-edit-controller-blog-post squarespace-frontend-edit-controller-site-title squarespace-frontend-edit-controller-page-configuration squarespace-frontend-edit-controller-navigation squarespace-frontend-edit-controller-connected-accounts squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-file-manager-tab",function(a){var d=a.namespace("Squarespace.Views").FileManagerTab=a.Base.create("FileManagerTab",a.Squarespace.View,[],{template:"file-manager-tab.html",initializer:function(b){d.superclass.initializer.apply(this,arguments);this._options=new a.Squarespace.DialogFields.MultiOption({data:this.get("selectedFile")?"existing":"new",options:[{value:"new",title:"New File",icon:"new"},{value:"existing",title:"Existing File",icon:"existing"}]});this._frames=new a.Squarespace.DialogFields.MultiFrame({data:this.get("selectedFile")?
"existing":"new",frames:[{name:"new",fields:[]},{name:"existing",fields:[{ctor:a.Squarespace.DialogFields.FileManager,config:{name:"selectFile",data:this.get("selectedFile")}}]}]});this._options.on("dataChange",function(a){this._frames.switchFrames(a.newVal)},this);this._uploader=new a.Squarespace.Uploader({process:!1,autoUpload:!0});this._spinnerEl=a.Node.create('<div class="spinner"></div>')},render:function(){d.superclass.render.apply(this,arguments);this._options.render(this.get("container").one(".options"));
this._frames.render(this.get("container").one(".frames"));this._frames.get("contentBox").all(".frame").each(function(a){"new"==a.getAttribute("data-name")&&(this._uploader.set("dragAndDropArea",a),this._uploader.render(a),a=this._uploader.get("contentBox"),this._uploaderIcon=a.one(".icon"),this._uploaderText=a.one(".text"),this._spinnerEl.hide(),this._uploaderIcon.append(this._spinnerEl))},this);this.bindUI()},bindUI:function(){this._frames.getField("selectFile").on("dataChange",function(a){this.set("selectedFile",
a.newVal);this._dataChanged(a.silent)},this);this._frames.on("animated",function(a){"existing"==a.name&&this._frames.get("contentBox").one(".search input").focus()},this);this._uploader.set("processFile",a.bind(function(b){b.invalid?(b=b.invalid[0],new a.Squarespace.Widgets.Alert({"strings.title":b.title,"strings.message":b.message})):(this._uploaderIcon.addClass("loading"),this._uploaderText.setContent("Uploading file..."),this._spinner=new a.Squarespace.Spinner({color:"dark",size:"large",render:this._spinnerEl}),
this._spinnerEl.show(),b.postData={contentType:"binary",recordType:a.Squarespace.RecordType.ATTACHMENT,useFilenameAsUrlId:"true"})},this));this._uploader.set("fileComplete",a.bind(function(b,c){var d=c.media[0];this.set("selectedFile",d.urlId);this._spinnerEl.anim({opacity:0},{duration:1.25,start:function(){this._uploaderText.setContent("Uploaded "+c.media[0].filename)},end:function(){this._spinnerEl.hide();this._dataChanged();new a.Squarespace.Widgets.Information({"strings.title":"File Uploaded",
"strings.message":"Your file has been successfully uploaded."});a.later(1E3,this,function(){this._uploaderIcon.removeClass("loading");this._uploaderText.setContent("Click here or drag and drop to add a file");var a=this._frames.getField("selectFile");a.set("data",d.urlId,{silent:!0});a.updateFullList();this._options.selectOption("existing")})},context:this}).run()},this))},reset:function(){this.set("selectedFile",null);this._options.selectOption("new");this._frames.set("data",null);this._frames.get("contentBox").all(".attachment").removeClass("selected")},
_dataChanged:function(a){this.get("onDataChange")&&this.get("onDataChange")(this.get("selectedFile"),a)}},{ATTRS:{selectedFile:{value:null},onDataChange:{value:null}}})},"1.0",{requires:"base base-build squarespace-ui-base squarespace-view squarespace-file-manager-tab-template squarespace-dialog-html squarespace-dialog-text squarespace-dialog-multi-option squarespace-dialog-multi-frame squarespace-dialog-file-manager squarespace-widgets-alert squarespace-widgets-information".split(" ")});
YUI.add("squarespace-frontend-overlay-editor",function(a){a.namespace("Squarespace.Frontend").OverlayEditorControl=a.Base.create("OverlayEditorControl",a.Plugin.Base,[],{initializer:function(){var d=this.get("host");d.addClass(this._getClassName("host"));d.append(this._getEditNode());a.later(30,this,a.bind(function(){d.addClass(this._getClassName("visible"))},this));this._applyHostStyles()},destructor:function(){var d=this.get("host");this._resetHostStyles();d.removeClass(this._getClassName("visible"));
a.later(300,this,function(){d.removeClass(this._getClassName("host"));this._getEditNode().remove()})},_applyHostStyles:function(){var a=this.get("host");this._originalPosition=this._getStyleAttributeCSSValue(a,"position");"static"===a.getStyle("position")&&a.setStyle("position","relative")},_resetHostStyles:function(){this.get("host").setStyle("position",this._originalPosition)},_getStyleAttributeCSSValue:function(a,b){return a.getDOMNode().style[b]},_getClassName:function(d){return a.ClassNameManager.getClassName("sqs",
"overlay-editor",d,!0)},_getEditNode:function(){if(!this._editNode){this._editNode=a.Node.create('<div class="'+this._getClassName("toolbar")+'"></div>');this._editNode.on("click",function(b){b.halt();a.bind(this.get("action"),this.get("context"))()},this);this._editNode.on("mouseenter",function(a){this.get("host").addClass(this._getClassName("toolbar-hover"))},this);this._editNode.on("mouseleave",function(a){this.get("host").removeClass(this._getClassName("toolbar-hover"))},this);var d=this.get("label");
if(a.Lang.isString(d)&&0<d.trim().length){var b=this._editNode.appendChild('<div class="'+this._getClassName("button")+'"></div>');b.addClass(this._getClassName("button-has-label"));b.setContent(d)}}return this._editNode}},{NS:"OverlayEditorControl",ATTRS:{action:{value:function(){}},label:{value:""},context:{}}})},"1.0",{requires:["plugin"]});
YUI.add("squarespace-hb-product-price-string",function(a){a.Handlebars.registerHelper("price-string",function(d){return new a.Handlebars.SafeString(a.Squarespace.Commerce.priceString(d))})},"1.0",{requires:["handlebars-base","squarespace-commerce-utils"]});
YUI.add("squarespace-external-link-tab-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["external-link-tab.html"]=a(function(a,b,d,f,h){function k(a,b){return"active"}this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var l,n=this;f=d.blockHelperMissing;a='<div class="external-link-tab">\n  <div class="link">\n    <button class="visit" title="Visit URL"></button>\n  </div>\n  ';l={hash:{},inverse:n.program(1,function(a,b){var c,e;
c='\n    <button class="new-window ';if((e=d["if"].call(a,a.newWindow,{hash:{},inverse:n.noop,fn:n.program(2,k,b),data:b}))||0===e)c+=e;return c+'" title"Open in new window">Open link in new window</button>\n  '},h),fn:n.noop,data:h};(h=d.disableNewWindow)?h=h.call(b,l):(h=b.disableNewWindow,h="function"===typeof h?h.apply(b):h);d.disableNewWindow||(h=f.call(b,h,l));if(h||0===h)a+=h;return a+"\n</div>\n"})})();a.Handlebars.registerPartial("external-link-tab.html".replace("/","."),d.templates["external-link-tab.html"])},
"1.0",{requires:["handlebars-base"]});YUI.add("squarespace-block-email-footer-editor",function(a){a.namespace("Squarespace.Block.Editor").EmailFooter=a.Base.create("email-footer-block-editor",a.Squarespace.Block.Editor.Base,[],{initializer:function(){this.get("host").set("floatable",!1);this.set("lockedLayout",!0)}},{NS:"blockEditor",ATTRS:{blockName:{value:"EmailFooter"},minHSize:{value:6}}})},"1.0",{requires:["base","squarespace-block-editor-base"]});
YUI.add("jsonp-url",function(a,d){var b=a.Object.getValue,c=function(){};a.mix(a.JSONPRequest.prototype,{_pattern:/\bcallback=(.*?)(?=&|$)/i,_template:"callback={callback}",_defaultCallback:function(d){d=d.match(this._pattern);var g=[],f=0,h;if(d&&(d=d[1].replace(/\[(['"])(.*?)\1\]/g,function(a,b,c){g[f]=c;return".@"+f++}).replace(/\[(\d+)\]/g,function(a,b){g[f]=parseInt(b,10)|0;return".@"+f++}).replace(/^\./,""),!/[^\w\.\$@]/.test(d))){h=d.split(".");for(f=h.length-1;0<=f;--f)"@"===h[f].charAt(0)&&
(h[f]=g[parseInt(h[f].substr(1),10)]);h=b(a.config.win,h)||b(a,h)||b(a,h.slice(1))}return h||c},_format:function(a,b){var c=/\{callback\}/,d;if(c.test(a))return a.replace(c,b);c=this._template.replace(c,b);if(this._pattern.test(a))return a.replace(this._pattern,c);d=a.slice(-1);"&"!==d&&"?"!==d&&(a+=-1<a.indexOf("?")?"&":"?");return a+c}},!0)},"3.17.2",{requires:["jsonp"]});
(function(a,d){function b(b,c){function f(a){return l.preferFlash&&Ma&&!l.ignoreFlash&&l.flash[a]!==d&&l.flash[a]}function h(a){return function(b){var c=this._s;!c||!c._a?(c&&c.id?l._wD(c.id+": Ignoring "+b.type):l._wD(q+"Ignoring "+b.type),b=null):b=a.call(this,b);return b}}this.setupOptions={url:b||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1E3,
wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1,idPrefix:"sound"};this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100};this.flash9Options={isMovieStar:null,
usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus",
"audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}};this.movieID="sm2-container";this.id=c||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20130512";this.altURL=this.movieURL=this.version=null;this.enabled=this.swfLoaded=!1;this.oMC=null;this.sounds={};this.soundIDs=[];this.didFlashBlock=this.muted=!1;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};
this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.html5={usingFlash:null};this.flash={};this.ignoreFlash=this.html5Only=!1;var k,l=this,n=null,p=null,q="HTML5::",
t,r=navigator.userAgent,u=a.location.href.toString(),s=document,v,w,y,z,D=[],K=!0,B,E=!1,S=!1,I=!1,A=!1,H=!1,x,P=0,ca,Q,$,M,R,C,F,L,G,aa,la,Z,ma,sa,ba,Ta,U,rb,Qa,Ja,Ka,sb,tb=["log","info","warn","error"],bb,Kb,bc,Da=null,hb=null,da,Pa,Oa,Lb,Ra,ya,ua,ea,La=!1,ra=!1,Sa,jb,ub,kb=0,Ca=null,Na,va=[],N,ha=null,ja,ia,oa,Xa,qb,xa,Va,fa,Bb=Array.prototype.slice,Ea=!1,$b,Ma,vb,cc,na,wa,Ob,wb,Jc=0,Rb=r.match(/(ipad|iphone|ipod)/i),mb=r.match(/android/i),Fa=r.match(/msie/i),Mc=r.match(/webkit/i),gc=r.match(/safari/i)&&
!r.match(/chrome/i),xc=r.match(/opera/i),Cd=r.match(/firefox/i),Pb=r.match(/(mobile|pre\/|xoom)/i)||Rb||mb,wc=!u.match(/usehtml5audio/i)&&!u.match(/sm2\-ignorebadua/i)&&gc&&!r.match(/silk/i)&&r.match(/OS X 10_6_([3-7])/i),Ya=a.console!==d&&console.log!==d,eb=s.hasFocus!==d?s.hasFocus():null,Qb=gc&&(s.hasFocus===d||!s.hasFocus()),Sb=!Qb,zc=/(mp3|mp4|mpa|m4a|m4b)/i,Db=s.location?s.location.protocol.match(/http/i):null,$c=!Db?"http://":"",vc=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,
ad="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),Sc=RegExp("\\.("+ad.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!Db;var fc;try{fc=Audio!==d&&(xc&&opera!==d&&10>opera.version()?new Audio(null):new Audio).canPlayType!==d}catch(Kc){fc=!1}this.hasHTML5=fc;this.setup=function(a){var b=!l.url;a!==d&&I&&(ha&&l.ok()&&(a.flashVersion!==d||a.url!==d||a.html5Test!==d))&&ua(da("setupLate"));$(a);a&&(b&&U&&a.url!==d&&l.beginDelayedInit(),
!U&&a.url!==d&&"complete"===s.readyState&&setTimeout(ba,1));return l};this.supported=this.ok=function(){return ha?I&&!A:l.useHTML5Audio&&l.hasHTML5};this.getMovie=function(b){return t(b)||s[b]||a[b]};this.createSound=function(a,b){function c(){f=Ra(f);l.sounds[f.id]=new k(f);l.soundIDs.push(f.id);return l.sounds[f.id]}var e,f;e=null;e="soundManager.createSound(): "+da(!I?"notReady":"notOK");if(!I||!l.ok())return ua(e),!1;b!==d&&(a={id:a,url:b});f=Q(a);f.url=Na(f.url);void 0===f.id&&(f.id=l.setupOptions.idPrefix+
Jc++);f.id.toString().charAt(0).match(/^[0-9]$/)&&l._wD("soundManager.createSound(): "+da("badID",f.id),2);l._wD("soundManager.createSound(): "+f.id+(f.url?" ("+f.url+")":""),1);if(ea(f.id,!0))return l._wD("soundManager.createSound(): "+f.id+" exists",1),l.sounds[f.id];if(ia(f))e=c(),l._wD(f.id+": Using HTML5"),e._setup_html5(f);else{if(l.html5Only)return l._wD(f.id+": No HTML5 support for this sound, and no Flash. Exiting."),c();if(l.html5.usingFlash&&f.url&&f.url.match(/data\:/i))return l._wD(f.id+
": data: URIs not supported via Flash. Exiting."),c();8<z&&(null===f.isMovieStar&&(f.isMovieStar=!(!f.serverURL&&!(f.type&&f.type.match(vc)||f.url&&f.url.match(Sc)))),f.isMovieStar&&(l._wD("soundManager.createSound(): using MovieStar handling"),1<f.loops&&x("noNSLoop")));f=ya(f,"soundManager.createSound(): ");e=c();8===z?p._createSound(f.id,f.loops||1,f.usePolicyFile):(p._createSound(f.id,f.url,f.usePeakData,f.useWaveformData,f.useEQData,f.isMovieStar,f.isMovieStar?f.bufferTime:!1,f.loops||1,f.serverURL,
f.duration||null,f.autoPlay,!0,f.autoLoad,f.usePolicyFile),f.serverURL||(e.connected=!0,f.onconnect&&f.onconnect.apply(e)));!f.serverURL&&(f.autoLoad||f.autoPlay)&&e.load(f)}!f.serverURL&&f.autoPlay&&e.play();return e};this.destroySound=function(a,b){if(!ea(a))return!1;var c=l.sounds[a],d;c._iO={};c.stop();c.unload();for(d=0;d<l.soundIDs.length;d++)if(l.soundIDs[d]===a){l.soundIDs.splice(d,1);break}b||c.destruct(!0);delete l.sounds[a];return!0};this.load=function(a,b){return!ea(a)?!1:l.sounds[a].load(b)};
this.unload=function(a){return!ea(a)?!1:l.sounds[a].unload()};this.onposition=this.onPosition=function(a,b,c,d){return!ea(a)?!1:l.sounds[a].onposition(b,c,d)};this.clearOnPosition=function(a,b,c){return!ea(a)?!1:l.sounds[a].clearOnPosition(b,c)};this.start=this.play=function(a,b){var c=null,d=b&&!(b instanceof Object);if(!I||!l.ok())return ua("soundManager.play(): "+da(!I?"notReady":"notOK")),!1;if(ea(a,d))d&&(b={url:b});else{if(!d)return!1;d&&(b={url:b});b&&b.url&&(l._wD('soundManager.play(): Attempting to create "'+
a+'"',1),b.id=a,c=l.createSound(b).play())}null===c&&(c=l.sounds[a].play(b));return c};this.setPosition=function(a,b){return!ea(a)?!1:l.sounds[a].setPosition(b)};this.stop=function(a){if(!ea(a))return!1;l._wD("soundManager.stop("+a+")",1);return l.sounds[a].stop()};this.stopAll=function(){var a;l._wD("soundManager.stopAll()",1);for(a in l.sounds)l.sounds.hasOwnProperty(a)&&l.sounds[a].stop()};this.pause=function(a){return!ea(a)?!1:l.sounds[a].pause()};this.pauseAll=function(){var a;for(a=l.soundIDs.length-
1;0<=a;a--)l.sounds[l.soundIDs[a]].pause()};this.resume=function(a){return!ea(a)?!1:l.sounds[a].resume()};this.resumeAll=function(){var a;for(a=l.soundIDs.length-1;0<=a;a--)l.sounds[l.soundIDs[a]].resume()};this.togglePause=function(a){return!ea(a)?!1:l.sounds[a].togglePause()};this.setPan=function(a,b){return!ea(a)?!1:l.sounds[a].setPan(b)};this.setVolume=function(a,b){return!ea(a)?!1:l.sounds[a].setVolume(b)};this.mute=function(a){var b=0;a instanceof String&&(a=null);if(a){if(!ea(a))return!1;l._wD('soundManager.mute(): Muting "'+
a+'"');return l.sounds[a].mute()}l._wD("soundManager.mute(): Muting all sounds");for(b=l.soundIDs.length-1;0<=b;b--)l.sounds[l.soundIDs[b]].mute();return l.muted=!0};this.muteAll=function(){l.mute()};this.unmute=function(a){a instanceof String&&(a=null);if(a){if(!ea(a))return!1;l._wD('soundManager.unmute(): Unmuting "'+a+'"');return l.sounds[a].unmute()}l._wD("soundManager.unmute(): Unmuting all sounds");for(a=l.soundIDs.length-1;0<=a;a--)l.sounds[l.soundIDs[a]].unmute();l.muted=!1;return!0};this.unmuteAll=
function(){l.unmute()};this.toggleMute=function(a){return!ea(a)?!1:l.sounds[a].toggleMute()};this.getMemoryUse=function(){var a=0;p&&8!==z&&(a=parseInt(p._getMemoryUse(),10));return a};this.disable=function(b){var c;b===d&&(b=!1);if(A)return!1;A=!0;x("shutdown",1);for(c=l.soundIDs.length-1;0<=c;c--)bb(l.sounds[l.soundIDs[c]]);ca(b);fa.remove(a,"load",F);return!0};this.canPlayMIME=function(a){var b;l.hasHTML5&&(b=oa({type:a}));!b&&ha&&(b=a&&l.ok()?!!(8<z&&a.match(vc)||a.match(l.mimePattern)):null);
return b};this.canPlayURL=function(a){var b;l.hasHTML5&&(b=oa({url:a}));!b&&ha&&(b=a&&l.ok()?!!a.match(l.filePattern):null);return b};this.canPlayLink=function(a){return a.type!==d&&a.type&&l.canPlayMIME(a.type)?!0:l.canPlayURL(a.href)};this.getSoundById=function(a,b){if(!a)return null;var c=l.sounds[a];!c&&!b&&l._wD('soundManager.getSoundById(): Sound "'+a+'" not found.',2);return c};this.onready=function(b,c){if("function"===typeof b)I&&l._wD(da("queue","onready")),c||(c=a),R("onready",b,c),C();
else throw da("needFunction","onready");return!0};this.ontimeout=function(b,c){if("function"===typeof b)I&&l._wD(da("queue","ontimeout")),c||(c=a),R("ontimeout",b,c),C({type:"ontimeout"});else throw da("needFunction","ontimeout");return!0};this._writeDebug=function(a,b){var c,e;if(!l.debugMode)return!1;if(Ya&&l.useConsole){if(b&&"object"===typeof b)console.log(a,b);else if(tb[b]!==d)console[tb[b]](a);else console.log(a);if(l.consoleOnly)return!0}c=t("soundmanager-debug");if(!c)return!1;e=s.createElement("div");
0===++P%2&&(e.className="sm2-alt");b=b===d?0:parseInt(b,10);e.appendChild(s.createTextNode(a));b&&(2<=b&&(e.style.fontWeight="bold"),3===b&&(e.style.color="#ff3333"));c.insertBefore(e,c.firstChild);return!0};-1!==u.indexOf("sm2-debug=alert")&&(this._writeDebug=function(b){a.alert(b)});this._wD=this._writeDebug;this._debug=function(){var a,b;x("currentObj",1);a=0;for(b=l.soundIDs.length;a<b;a++)l.sounds[l.soundIDs[a]]._debug()};this.reboot=function(b,c){l.soundIDs.length&&l._wD("Destroying "+l.soundIDs.length+
" SMSound object"+(1!==l.soundIDs.length?"s":"")+"...");var d,e,f;for(d=l.soundIDs.length-1;0<=d;d--)l.sounds[l.soundIDs[d]].destruct();if(p)try{Fa&&(hb=p.innerHTML),Da=p.parentNode.removeChild(p)}catch(g){x("badRemove",2)}hb=Da=ha=p=null;l.enabled=U=I=La=ra=E=S=A=Ea=l.swfLoaded=!1;l.soundIDs=[];l.sounds={};Jc=0;if(b)D=[];else for(d in D)if(D.hasOwnProperty(d)){e=0;for(f=D[d].length;e<f;e++)D[d][e].fired=!1}c||l._wD("soundManager: Rebooting...");l.html5={usingFlash:null};l.flash={};l.html5Only=!1;
l.ignoreFlash=!1;a.setTimeout(function(){sa();c||l.beginDelayedInit()},20);return l};this.reset=function(){x("reset");return l.reboot(!0,!0)};this.getMoviePercent=function(){return p&&"PercentLoaded"in p?p.PercentLoaded():null};this.beginDelayedInit=function(){H=!0;ba();setTimeout(function(){if(ra)return!1;Qa();ma();return ra=!0},20);L()};this.destruct=function(){l._wD("soundManager.destruct()");l.disable(!0)};k=function(a){var b,c,e=this,f,g,h,k,q,r,s=!1,t=[],u=0,v,Z,w=null,y;c=b=null;this.sID=this.id=
a.id;this.url=a.url;this._iO=this.instanceOptions=this.options=Q(a);this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=!1;this._a=null;y=this.url?!1:!0;this.id3={};this._debug=function(){l._wD(e.id+": Merged options:",e.options)};this.load=function(a){var b=null,c;a!==d?e._iO=Q(a,e.options):(a=e.options,e._iO=a,w&&w!==e.url&&(x("manURL"),e._iO.url=e.url,e.url=null));e._iO.url||(e._iO.url=e.url);e._iO.url=Na(e._iO.url);c=e.instanceOptions=e._iO;l._wD(e.id+": load ("+c.url+")");
if(!c.url&&!e.url)return l._wD(e.id+": load(): url is unassigned. Exiting.",2),e;!e.isHTML5&&8===z&&(!e.url&&!c.autoPlay)&&l._wD(e.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1);if(c.url===e.url&&0!==e.readyState&&2!==e.readyState)return x("onURL",1),3===e.readyState&&c.onload&&wb(e,function(){c.onload.apply(e,[!!e.duration])}),e;e.loaded=!1;e.readyState=1;e.playState=0;e.id3={};if(ia(c))b=e._setup_html5(c),b._called_load?l._wD(e.id+": Ignoring request to load again"):
(e._html5_canplay=!1,e.url!==c.url&&(l._wD(x("manURL")+": "+c.url),e._a.src=c.url,e.setPosition(0)),e._a.autobuffer="auto",e._a.preload="auto",e._a._called_load=!0,c.autoPlay&&e.play());else{if(l.html5Only)return l._wD(e.id+": No flash support. Exiting."),e;if(e._iO.url&&e._iO.url.match(/data\:/i))return l._wD(e.id+": data: URIs not supported via Flash. Exiting."),e;try{e.isHTML5=!1,e._iO=ya(Ra(c)),c=e._iO,8===z?p._load(e.id,c.url,c.stream,c.autoPlay,c.usePolicyFile):p._load(e.id,c.url,!!c.stream,
!!c.autoPlay,c.loops||1,!!c.autoLoad,c.usePolicyFile)}catch(f){x("smError",2),B("onload",!1),Ja({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}e.url=c.url;return e};this.unload=function(){0!==e.readyState&&(l._wD(e.id+": unload()"),e.isHTML5?(k(),e._a&&(e._a.pause(),w=qb(e._a))):8===z?p._unload(e.id,"about:blank"):p._unload(e.id),f());return e};this.destruct=function(a){l._wD(e.id+": Destruct");e.isHTML5?(k(),e._a&&(e._a.pause(),qb(e._a),Ea||h(),e._a._s=null,e._a=null)):(e._iO.onfailure=null,p._destroySound(e.id));
a||l.destroySound(e.id,!0)};this.start=this.play=function(a,b){var c,f,g,h,k,n=!0,n=null;c=e.id+": play(): ";b=b===d?!0:b;a||(a={});e.url&&(e._iO.url=e.url);e._iO=Q(e._iO,e.options);e._iO=Q(a,e._iO);e._iO.url=Na(e._iO.url);e.instanceOptions=e._iO;if(!e.isHTML5&&e._iO.serverURL&&!e.connected)return e.getAutoPlay()||(l._wD(c+" Netstream not connected yet - setting autoPlay"),e.setAutoPlay(!0)),e;ia(e._iO)&&(e._setup_html5(e._iO),q());1===e.playState&&!e.paused&&((f=e._iO.multiShot)?l._wD(c+"Already playing (multi-shot)",
1):(l._wD(c+"Already playing (one-shot)",1),e.isHTML5&&e.setPosition(e._iO.position),n=e));if(null!==n)return n;a.url&&a.url!==e.url&&(!e.readyState&&!e.isHTML5&&8===z&&y?y=!1:e.load(e._iO));e.loaded?l._wD(c.substr(0,c.lastIndexOf(":"))):0===e.readyState?(l._wD(c+"Attempting to load"),!e.isHTML5&&!l.html5Only?(e._iO.autoPlay=!0,e.load(e._iO)):e.isHTML5?e.load(e._iO):(l._wD(c+"Unsupported type. Exiting."),n=e),e.instanceOptions=e._iO):2===e.readyState?(l._wD(c+"Could not load - exiting",2),n=e):l._wD(c+
"Loading - attempting to play...");if(null!==n)return n;!e.isHTML5&&9===z&&(0<e.position&&e.position===e.duration)&&(l._wD(c+"Sound at end, resetting to position:0"),a.position=0);if(e.paused&&0<=e.position&&(!e._iO.serverURL||0<e.position))l._wD(c+"Resuming from paused state",1),e.resume();else{e._iO=Q(a,e._iO);if(null!==e._iO.from&&null!==e._iO.to&&0===e.instanceCount&&0===e.playState&&!e._iO.serverURL){f=function(){e._iO=Q(a,e._iO);e.play(e._iO)};if(e.isHTML5&&!e._html5_canplay)l._wD(c+"Beginning load for from/to case"),
e.load({oncanplay:f}),n=!1;else if(!e.isHTML5&&!e.loaded&&(!e.readyState||2!==e.readyState))l._wD(c+"Preloading for from/to case"),e.load({onload:f}),n=!1;if(null!==n)return n;e._iO=Z()}(!e.instanceCount||e._iO.multiShotEvents||e.isHTML5&&e._iO.multiShot&&!Ea||!e.isHTML5&&8<z&&!e.getAutoPlay())&&e.instanceCount++;e._iO.onposition&&0===e.playState&&r(e);e.playState=1;e.paused=!1;e.position=e._iO.position!==d&&!isNaN(e._iO.position)?e._iO.position:0;e.isHTML5||(e._iO=ya(Ra(e._iO)));e._iO.onplay&&b&&
(e._iO.onplay.apply(e),s=!0);e.setVolume(e._iO.volume,!0);e.setPan(e._iO.pan,!0);e.isHTML5?2>e.instanceCount?(q(),c=e._setup_html5(),e.setPosition(e._iO.position),c.play()):(l._wD(e.id+": Cloning Audio() for instance #"+e.instanceCount+"..."),g=new Audio(e._iO.url),h=function(){fa.remove(g,"onended",h);e._onfinish(e);qb(g);g=null},k=function(){fa.remove(g,"canplay",k);try{g.currentTime=e._iO.position/1E3}catch(a){ua(e.id+": multiShot play() failed to apply position of "+e._iO.position/1E3)}g.play()},
fa.add(g,"ended",h),e._iO.position?fa.add(g,"canplay",k):g.play()):(n=p._start(e.id,e._iO.loops||1,9===z?e.position:e.position/1E3,e._iO.multiShot||!1),9===z&&!n&&(l._wD(c+"No sound hardware, or 32-sound ceiling hit",2),e._iO.onplayerror&&e._iO.onplayerror.apply(e)))}return e};this.stop=function(a){var b=e._iO;1===e.playState&&(l._wD(e.id+": stop()"),e._onbufferchange(0),e._resetOnPosition(0),e.paused=!1,e.isHTML5||(e.playState=0),v(),b.to&&e.clearOnPosition(b.to),e.isHTML5?e._a&&(a=e.position,e.setPosition(0),
e.position=a,e._a.pause(),e.playState=0,e._onTimer(),k()):(p._stop(e.id,a),b.serverURL&&e.unload()),e.instanceCount=0,e._iO={},b.onstop&&b.onstop.apply(e));return e};this.setAutoPlay=function(a){l._wD(e.id+": Autoplay turned "+(a?"on":"off"));e._iO.autoPlay=a;e.isHTML5||(p._setAutoPlay(e.id,a),a&&!e.instanceCount&&1===e.readyState&&(e.instanceCount++,l._wD(e.id+": Incremented instance count to "+e.instanceCount)))};this.getAutoPlay=function(){return e._iO.autoPlay};this.setPosition=function(a){a===
d&&(a=0);var b=e.isHTML5?Math.max(a,0):Math.min(e.duration||e._iO.duration,Math.max(a,0));e.position=b;a=e.position/1E3;e._resetOnPosition(e.position);e._iO.position=b;if(e.isHTML5){if(e._a){if(e._html5_canplay){if(e._a.currentTime!==a){l._wD(e.id+": setPosition("+a+")");try{e._a.currentTime=a,(0===e.playState||e.paused)&&e._a.pause()}catch(c){l._wD(e.id+": setPosition("+a+") failed: "+c.message,2)}}}else if(a)return l._wD(e.id+": setPosition("+a+"): Cannot seek yet, sound not ready",2),e;e.paused&&
e._onTimer(!0)}}else a=9===z?e.position:a,e.readyState&&2!==e.readyState&&p._setPosition(e.id,a,e.paused||!e.playState,e._iO.multiShot);return e};this.pause=function(a){if(e.paused||0===e.playState&&1!==e.readyState)return e;l._wD(e.id+": pause()");e.paused=!0;e.isHTML5?(e._setup_html5().pause(),k()):(a||a===d)&&p._pause(e.id,e._iO.multiShot);e._iO.onpause&&e._iO.onpause.apply(e);return e};this.resume=function(){var a=e._iO;if(!e.paused)return e;l._wD(e.id+": resume()");e.paused=!1;e.playState=1;
e.isHTML5?(e._setup_html5().play(),q()):(a.isMovieStar&&!a.serverURL&&e.setPosition(e.position),p._pause(e.id,a.multiShot));!s&&a.onplay?(a.onplay.apply(e),s=!0):a.onresume&&a.onresume.apply(e);return e};this.togglePause=function(){l._wD(e.id+": togglePause()");if(0===e.playState)return e.play({position:9===z&&!e.isHTML5?e.position:e.position/1E3}),e;e.paused?e.resume():e.pause();return e};this.setPan=function(a,b){a===d&&(a=0);b===d&&(b=!1);e.isHTML5||p._setPan(e.id,a);e._iO.pan=a;b||(e.pan=a,e.options.pan=
a);return e};this.setVolume=function(a,b){a===d&&(a=100);b===d&&(b=!1);e.isHTML5?e._a&&(e._a.volume=Math.max(0,Math.min(1,a/100))):p._setVolume(e.id,l.muted&&!e.muted||e.muted?0:a);e._iO.volume=a;b||(e.volume=a,e.options.volume=a);return e};this.mute=function(){e.muted=!0;e.isHTML5?e._a&&(e._a.muted=!0):p._setVolume(e.id,0);return e};this.unmute=function(){e.muted=!1;var a=e._iO.volume!==d;e.isHTML5?e._a&&(e._a.muted=!1):p._setVolume(e.id,a?e._iO.volume:e.options.volume);return e};this.toggleMute=
function(){return e.muted?e.unmute():e.mute()};this.onposition=this.onPosition=function(a,b,c){t.push({position:parseInt(a,10),method:b,scope:c!==d?c:e,fired:!1});return e};this.clearOnPosition=function(a,b){var c;a=parseInt(a,10);if(isNaN(a))return!1;for(c=0;c<t.length;c++)if(a===t[c].position&&(!b||b===t[c].method))t[c].fired&&u--,t.splice(c,1)};this._processOnPosition=function(){var a,b;a=t.length;if(!a||!e.playState||u>=a)return!1;for(a-=1;0<=a;a--)b=t[a],!b.fired&&e.position>=b.position&&(b.fired=
!0,u++,b.method.apply(b.scope,[b.position]));return!0};this._resetOnPosition=function(a){var b,c;b=t.length;if(!b)return!1;for(b-=1;0<=b;b--)c=t[b],c.fired&&a<=c.position&&(c.fired=!1,u--);return!0};Z=function(){var a=e._iO,b=a.from,c=a.to,d,f;f=function(){l._wD(e.id+': "To" time of '+c+" reached.");e.clearOnPosition(c,f);e.stop()};d=function(){l._wD(e.id+': Playing "from" '+b);if(null!==c&&!isNaN(c))e.onPosition(c,f)};null!==b&&!isNaN(b)&&(a.position=b,a.multiShot=!1,d());return a};r=function(){var a,
b=e._iO.onposition;if(b)for(a in b)if(b.hasOwnProperty(a))e.onPosition(parseInt(a,10),b[a])};v=function(){var a,b=e._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&e.clearOnPosition(parseInt(a,10))};q=function(){e.isHTML5&&Sa(e)};k=function(){e.isHTML5&&jb(e)};f=function(a){a||(t=[],u=0);s=!1;e._hasTimer=null;e._a=null;e._html5_canplay=!1;e.bytesLoaded=null;e.bytesTotal=null;e.duration=e._iO&&e._iO.duration?e._iO.duration:null;e.durationEstimate=null;e.buffered=[];e.eqData=[];e.eqData.left=[];
e.eqData.right=[];e.failures=0;e.isBuffering=!1;e.instanceOptions={};e.instanceCount=0;e.loaded=!1;e.metadata={};e.readyState=0;e.muted=!1;e.paused=!1;e.peakData={left:0,right:0};e.waveformData={left:[],right:[]};e.playState=0;e.position=null;e.id3={}};f();this._onTimer=function(a){var d,f=!1,g={};if(e._hasTimer||a){if(e._a&&(a||(0<e.playState||1===e.readyState)&&!e.paused))d=e._get_html5_duration(),d!==b&&(b=d,e.duration=d,f=!0),e.durationEstimate=e.duration,d=1E3*e._a.currentTime||0,d!==c&&(c=d,
f=!0),(f||a)&&e._whileplaying(d,g,g,g,g);return f}};this._get_html5_duration=function(){var a=e._iO;return(a=e._a&&e._a.duration?1E3*e._a.duration:a&&a.duration?a.duration:null)&&!isNaN(a)&&Infinity!==a?a:null};this._apply_loop=function(a,b){!a.loop&&1<b&&l._wD("Note: Native HTML5 looping is infinite.",1);a.loop=1<b?"loop":""};this._setup_html5=function(a){a=Q(e._iO,a);var b=Ea?n:e._a,c=decodeURI(a.url),d;Ea?c===decodeURI($b)&&(d=!0):c===decodeURI(w)&&(d=!0);if(b){if(b._s)if(Ea)b._s&&b._s.playState&&
!d&&b._s.stop();else if(!Ea&&c===decodeURI(w))return e._apply_loop(b,a.loops),b;d||(f(!1),b.src=a.url,$b=w=e.url=a.url,b._called_load=!1)}else e._a=a.autoLoad||a.autoPlay?new Audio(a.url):xc&&10>opera.version()?new Audio(null):new Audio,b=e._a,b._called_load=!1,Ea&&(n=b);e.isHTML5=!0;e._a=b;b._s=e;g();e._apply_loop(b,a.loops);a.autoLoad||a.autoPlay?e.load():(b.autobuffer=!1,b.preload="auto");return b};g=function(){if(e._a._added_events)return!1;var a;e._a._added_events=!0;for(a in na)na.hasOwnProperty(a)&&
e._a&&e._a.addEventListener(a,na[a],!1);return!0};h=function(){var a;l._wD(e.id+": Removing event listeners");e._a._added_events=!1;for(a in na)na.hasOwnProperty(a)&&e._a&&e._a.removeEventListener(a,na[a],!1)};this._onload=function(a){var b=!!a||!e.isHTML5&&8===z&&e.duration;a=e.id+": ";l._wD(a+(b?"onload()":"Failed to load / invalid sound?"+(!e.duration?" Zero-length duration reported.":" -")+" ("+e.url+")"),b?1:2);!b&&!e.isHTML5&&(!0===l.sandbox.noRemote&&l._wD(a+da("noNet"),1),!0===l.sandbox.noLocal&&
l._wD(a+da("noLocal"),1));e.loaded=b;e.readyState=b?3:2;e._onbufferchange(0);e._iO.onload&&wb(e,function(){e._iO.onload.apply(e,[b])});return!0};this._onbufferchange=function(a){if(0===e.playState||a&&e.isBuffering||!a&&!e.isBuffering)return!1;e.isBuffering=1===a;e._iO.onbufferchange&&(l._wD(e.id+": Buffer state change: "+a),e._iO.onbufferchange.apply(e));return!0};this._onsuspend=function(){e._iO.onsuspend&&(l._wD(e.id+": Playback suspended"),e._iO.onsuspend.apply(e));return!0};this._onfailure=function(a,
b,c){e.failures++;l._wD(e.id+": Failures = "+e.failures);if(e._iO.onfailure&&1===e.failures)e._iO.onfailure(e,a,b,c);else l._wD(e.id+": Ignoring failure")};this._onfinish=function(){var a=e._iO.onfinish;e._onbufferchange(0);e._resetOnPosition(0);if(e.instanceCount&&(e.instanceCount--,e.instanceCount||(v(),e.playState=0,e.paused=!1,e.instanceCount=0,e.instanceOptions={},e._iO={},k(),e.isHTML5&&(e.position=0)),(!e.instanceCount||e._iO.multiShotEvents)&&a))l._wD(e.id+": onfinish()"),wb(e,function(){a.apply(e)})};
this._whileloading=function(a,b,c,d){var f=e._iO;e.bytesLoaded=a;e.bytesTotal=b;e.duration=Math.floor(c);e.bufferLength=d;e.durationEstimate=!e.isHTML5&&!f.isMovieStar?f.duration?e.duration>f.duration?e.duration:f.duration:parseInt(e.bytesTotal/e.bytesLoaded*e.duration,10):e.duration;e.isHTML5||(e.buffered=[{start:0,end:e.duration}]);(3!==e.readyState||e.isHTML5)&&f.whileloading&&f.whileloading.apply(e)};this._whileplaying=function(a,b,c,f,g){var h=e._iO;if(isNaN(a)||null===a)return!1;e.position=
Math.max(0,a);e._processOnPosition();!e.isHTML5&&8<z&&(h.usePeakData&&b!==d&&b&&(e.peakData={left:b.leftPeak,right:b.rightPeak}),h.useWaveformData&&c!==d&&c&&(e.waveformData={left:c.split(","),right:f.split(",")}),h.useEQData&&g!==d&&(g&&g.leftEQ)&&(a=g.leftEQ.split(","),e.eqData=a,e.eqData.left=a,g.rightEQ!==d&&g.rightEQ&&(e.eqData.right=g.rightEQ.split(","))));1===e.playState&&(!e.isHTML5&&8===z&&(!e.position&&e.isBuffering)&&e._onbufferchange(0),h.whileplaying&&h.whileplaying.apply(e));return!0};
this._oncaptiondata=function(a){l._wD(e.id+": Caption data received.");e.captiondata=a;e._iO.oncaptiondata&&e._iO.oncaptiondata.apply(e,[a])};this._onmetadata=function(a,b){l._wD(e.id+": Metadata received.");var c={},d,f;d=0;for(f=a.length;d<f;d++)c[a[d]]=b[d];e.metadata=c;e._iO.onmetadata&&e._iO.onmetadata.apply(e)};this._onid3=function(a,b){l._wD(e.id+": ID3 data received.");var c=[],d,f;d=0;for(f=a.length;d<f;d++)c[a[d]]=b[d];e.id3=Q(e.id3,c);e._iO.onid3&&e._iO.onid3.apply(e)};this._onconnect=
function(a){a=1===a;l._wD(e.id+": "+(a?"Connected.":"Failed to connect? - "+e.url),a?1:2);if(e.connected=a)e.failures=0,ea(e.id)&&(e.getAutoPlay()?e.play(d,e.getAutoPlay()):e._iO.autoLoad&&e.load()),e._iO.onconnect&&e._iO.onconnect.apply(e,[a])};this._ondataerror=function(a){0<e.playState&&(l._wD(e.id+": Data error: "+a),e._iO.ondataerror&&e._iO.ondataerror.apply(e))};this._debug()};rb=function(){return s.body||s._docElement||s.getElementsByTagName("div")[0]};t=function(a){return s.getElementById(a)};
Q=function(a,b){var c=a||{},e,f;e=b===d?l.defaultOptions:b;for(f in e)e.hasOwnProperty(f)&&c[f]===d&&(c[f]="object"!==typeof e[f]||null===e[f]?e[f]:Q(c[f],e[f]));return c};wb=function(b,c){!b.isHTML5&&8===z?a.setTimeout(c,0):c()};M={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};$=function(a,b){var c,e=!0,f=b!==d,g=l.setupOptions;if(a===d){e=[];for(c in g)g.hasOwnProperty(c)&&e.push(c);for(c in M)M.hasOwnProperty(c)&&("object"===typeof l[c]?e.push(c+": {...}"):l[c]instanceof
Function?e.push(c+": function() {...}"):e.push(c));l._wD(da("setup",e.join(", ")));return!1}for(c in a)if(a.hasOwnProperty(c))if("object"!==typeof a[c]||null===a[c]||a[c]instanceof Array||a[c]instanceof RegExp)f&&M[b]!==d?l[b][c]=a[c]:g[c]!==d?(l.setupOptions[c]=a[c],l[c]=a[c]):M[c]===d?(ua(da(l[c]===d?"setupUndef":"setupError",c),2),e=!1):l[c]instanceof Function?l[c].apply(l,a[c]instanceof Array?a[c]:[a[c]]):l[c]=a[c];else if(M[c]===d)ua(da(l[c]===d?"setupUndef":"setupError",c),2),e=!1;else return $(a[c],
c);return e};fa=function(){function b(a){a=Bb.call(a);var c=a.length;d?(a[1]="on"+a[1],3<c&&a.pop()):3===c&&a.push(!1);return a}function c(a,b){var f=a.shift(),g=[e[b]];if(d)f[g](a[0],a[1]);else f[g].apply(f,a)}var d=a.attachEvent,e={add:d?"attachEvent":"addEventListener",remove:d?"detachEvent":"removeEventListener"};return{add:function(){c(b(arguments),"add")},remove:function(){c(b(arguments),"remove")}}}();na={abort:h(function(){l._wD(this._s.id+": abort")}),canplay:h(function(){var a=this._s,b;
if(a._html5_canplay)return!0;a._html5_canplay=!0;l._wD(a.id+": canplay");a._onbufferchange(0);b=a._iO.position!==d&&!isNaN(a._iO.position)?a._iO.position/1E3:null;if(a.position&&this.currentTime!==b){l._wD(a.id+": canplay: Setting position to "+b);try{this.currentTime=b}catch(c){l._wD(a.id+": canplay: Setting position of "+b+" failed: "+c.message,2)}}a._iO._oncanplay&&a._iO._oncanplay()}),canplaythrough:h(function(){var a=this._s;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesLoaded,a.bytesTotal,
a._get_html5_duration()),a._onload(!0))}),ended:h(function(){var a=this._s;l._wD(a.id+": ended");a._onfinish()}),error:h(function(){l._wD(this._s.id+": HTML5 error, code "+this.error.code);this._s._onload(!1)}),loadeddata:h(function(){var a=this._s;l._wD(a.id+": loadeddata");!a._loaded&&!gc&&(a.duration=a._get_html5_duration())}),loadedmetadata:h(function(){l._wD(this._s.id+": loadedmetadata")}),loadstart:h(function(){l._wD(this._s.id+": loadstart");this._s._onbufferchange(1)}),play:h(function(){this._s._onbufferchange(0)}),
playing:h(function(){l._wD(this._s.id+": playing");this._s._onbufferchange(0)}),progress:h(function(a){var b=this._s,c,d,e,f="progress"===a.type,g=a.target.buffered,h=a.loaded||0,k=a.total||1;b.buffered=[];if(g&&g.length){c=0;for(d=g.length;c<d;c++)b.buffered.push({start:1E3*g.start(c),end:1E3*g.end(c)});c=1E3*(g.end(0)-g.start(0));h=Math.min(1,c/(1E3*a.target.duration));if(f&&1<g.length){e=[];d=g.length;for(c=0;c<d;c++)e.push(1E3*a.target.buffered.start(c)+"-"+1E3*a.target.buffered.end(c));l._wD(this._s.id+
": progress, timeRanges: "+e.join(", "))}f&&!isNaN(h)&&l._wD(this._s.id+": progress, "+Math.floor(100*h)+"% loaded")}isNaN(h)||(b._onbufferchange(0),b._whileloading(h,k,b._get_html5_duration()),h&&k&&h===k&&na.canplaythrough.call(this,a))}),ratechange:h(function(){l._wD(this._s.id+": ratechange")}),suspend:h(function(a){var b=this._s;l._wD(this._s.id+": suspend");na.progress.call(this,a);b._onsuspend()}),stalled:h(function(){l._wD(this._s.id+": stalled")}),timeupdate:h(function(){this._s._onTimer()}),
waiting:h(function(){var a=this._s;l._wD(this._s.id+": waiting");a._onbufferchange(1)})};ia=function(a){return!a||!a.type&&!a.url&&!a.serverURL?!1:a.serverURL||a.type&&f(a.type)?!1:a.type?oa({type:a.type}):oa({url:a.url})||l.html5Only||a.url.match(/data\:/i)};qb=function(a){var b;a&&(b=gc&&!Rb?null:Cd?"about:blank":null,a.src=b,void 0!==a._called_unload&&(a._called_load=!1));Ea&&($b=null);return b};oa=function(a){if(!l.useHTML5Audio||!l.hasHTML5)return!1;var b=a.url||null;a=a.type||null;var c=l.audioFormats,
e;if(a&&l.html5[a]!==d)return l.html5[a]&&!f(a);if(!Xa){Xa=[];for(e in c)c.hasOwnProperty(e)&&(Xa.push(e),c[e].related&&(Xa=Xa.concat(c[e].related)));Xa=RegExp("\\.("+Xa.join("|")+")(\\?.*)?$","i")}e=b?b.toLowerCase().match(Xa):null;!e||!e.length?a&&(b=a.indexOf(";"),e=(-1!==b?a.substr(0,b):a).substr(6)):e=e[1];e&&l.html5[e]!==d?b=l.html5[e]&&!f(e):(a="audio/"+e,b=l.html5.canPlayType({type:a}),b=(l.html5[e]=b)&&l.html5[a]&&!f(a));return b};Va=function(){function a(c){var d,e,f=d=!1;if(!b||"function"!==
typeof b.canPlayType)return d;if(c instanceof Array){d=0;for(e=c.length;d<e;d++)if(l.html5[c[d]]||b.canPlayType(c[d]).match(l.html5Test))f=!0,l.html5[c[d]]=!0,l.flash[c[d]]=!!c[d].match(zc);d=f}else c=b&&"function"===typeof b.canPlayType?b.canPlayType(c):!1,d=!(!c||!c.match(l.html5Test));return d}if(!l.useHTML5Audio||!l.hasHTML5)return ha=l.html5.usingFlash=!0,!1;var b=Audio!==d?xc&&10>opera.version()?new Audio(null):new Audio:null,c,e,f={},g;g=l.audioFormats;for(c in g)if(g.hasOwnProperty(c)&&(e=
"audio/"+c,f[c]=a(g[c].type),f[e]=f[c],c.match(zc)?(l.flash[c]=!0,l.flash[e]=!0):(l.flash[c]=!1,l.flash[e]=!1),g[c]&&g[c].related))for(e=g[c].related.length-1;0<=e;e--)f["audio/"+g[c].related[e]]=f[c],l.html5[g[c].related[e]]=f[c],l.flash[g[c].related[e]]=f[c];f.canPlayType=b?a:null;l.html5=Q(l.html5,f);l.html5.usingFlash=ja();ha=l.html5.usingFlash;return!0};Z={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",
spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+s.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",
waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",
onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",
queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",fbLoaded:"Flash loaded",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",
noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',
setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."};da=function(){var a=
Bb.call(arguments),b=a.shift(),b=Z&&Z[b]?Z[b]:"",c,d;if(b&&a&&a.length){c=0;for(d=a.length;c<d;c++)b=b.replace("%s",a[c])}return b};Ra=function(a){8===z&&1<a.loops&&a.stream&&(x("as2loop"),a.stream=!1);return a};ya=function(a,b){if(a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData))l._wD((b||"")+da("policy")),a.usePolicyFile=!0;return a};ua=function(a){Ya&&console.warn!==d?console.warn(a):l._wD(a)};v=function(){return!1};bb=function(a){for(var b in a)a.hasOwnProperty(b)&&
"function"===typeof a[b]&&(a[b]=v)};Kb=function(a){a===d&&(a=!1);(A||a)&&l.disable(a)};bc=function(a){if(a)if(a.match(/\.swf(\?.*)?$/i)){if(a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");a=(a&&-1!==a.lastIndexOf("/")?a.substr(0,a.lastIndexOf("/")+1):"./")+l.movieURL;l.noSWFCache&&(a+="?ts="+(new Date).getTime());return a};aa=function(){z=parseInt(l.flashVersion,10);8!==z&&9!==z&&(l._wD(da("badFV",z,8)),l.flashVersion=z=8);var a=l.debugMode||
l.debugFlash?"_debug.swf":".swf";l.useHTML5Audio&&!l.html5Only&&(l.audioFormats.mp4.required&&9>z)&&(l._wD(da("needfl9")),l.flashVersion=z=9);l.version=l.versionNumber+(l.html5Only?" (HTML5-only mode)":9===z?" (AS3/Flash 9)":" (AS2/Flash 8)");8<z?(l.defaultOptions=Q(l.defaultOptions,l.flash9Options),l.features.buffering=!0,l.defaultOptions=Q(l.defaultOptions,l.movieStarOptions),l.filePatterns.flash9=RegExp("\\.(mp3|"+ad.join("|")+")(\\?.*)?$","i"),l.features.movieStar=!0):l.features.movieStar=!1;
l.filePattern=l.filePatterns[8!==z?"flash9":"flash8"];l.movieURL=(8===z?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a);l.features.peakData=l.features.waveformData=l.features.eqData=8<z};Ka=function(a,b){if(!p)return!1;p._setPolling(a,b)};sb=function(){l.debugURLParam.test(u)&&(l.debugMode=!0);if(t(l.debugID))return!1;var a,b,c,d;if(l.debugMode&&!t(l.debugID)&&(!Ya||!l.useConsole||!l.consoleOnly)){a=s.createElement("div");a.id=l.debugID+"-toggle";b={position:"fixed",bottom:"0px",
right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};a.appendChild(s.createTextNode("-"));a.onclick=Lb;a.title="Toggle SM2 debug console";r.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(d in b)b.hasOwnProperty(d)&&(a.style[d]=b[d]);b=s.createElement("div");b.id=l.debugID;b.style.display=l.debugMode?"block":"none";if(l.debugMode&&!t(a.id)){try{c=rb(),
c.appendChild(a)}catch(e){throw Error(da("domError")+" \n"+e.toString());}c.appendChild(b)}}};ea=this.getSoundById;x=function(a,b){return!a?"":l._wD(da(a),b)};Lb=function(){var a=t(l.debugID),b=t(l.debugID+"-toggle");if(!a)return!1;K?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block");K=!K};B=function(b,c,e){if(a.sm2Debugger!==d)try{sm2Debugger.handleEvent(b,c,e)}catch(f){return!1}return!0};Oa=function(){var a=[];l.debugMode&&a.push("sm2_debug");l.debugFlash&&a.push("flash_debug");
l.useHighPerformance&&a.push("high_performance");return a.join(" ")};Pa=function(){var a=da("fbHandler"),b=l.getMoviePercent(),c={type:"FLASHBLOCK"};if(l.html5Only)return!1;l.ok()?(l.didFlashBlock&&l._wD(a+": Unblocked"),l.oMC&&(l.oMC.className=[Oa(),"movieContainer","swf_loaded"+(l.didFlashBlock?" swf_unblocked":"")].join(" "))):(ha&&(l.oMC.className=Oa()+" movieContainer "+(null===b?"swf_timedout":"swf_error"),l._wD(a+": "+da("fbTimeout")+(b?" ("+da("fbLoaded")+")":""))),l.didFlashBlock=!0,C({type:"ontimeout",
ignoreInit:!0,error:c}),Ja(c))};R=function(a,b,c){D[a]===d&&(D[a]=[]);D[a].push({method:b,scope:c||null,fired:!1})};C=function(a){a||(a={type:l.ok()?"onready":"ontimeout"});if(!I&&a&&!a.ignoreInit||"ontimeout"===a.type&&(l.ok()||A&&!a.ignoreInit))return!1;var b={success:a&&a.ignoreInit?l.ok():!A},c=a&&a.type?D[a.type]||[]:[],d=[],e,b=[b],f=ha&&!l.ok();a.error&&(b[0].error=a.error);a=0;for(e=c.length;a<e;a++)!0!==c[a].fired&&d.push(c[a]);if(d.length){a=0;for(e=d.length;a<e;a++)d[a].scope?d[a].method.apply(d[a].scope,
b):d[a].method.apply(this,b),f||(d[a].fired=!0)}return!0};F=function(){a.setTimeout(function(){l.useFlashBlock&&Pa();C();"function"===typeof l.onload&&(x("onload",1),l.onload.apply(a),x("onloadOK",1));l.waitForWindowLoad&&fa.add(a,"load",F)},1)};vb=function(){if(Ma!==d)return Ma;var b=!1,c=navigator,e=c.plugins,f,g=a.ActiveXObject;if(e&&e.length)(c=c.mimeTypes)&&c["application/x-shockwave-flash"]&&(c["application/x-shockwave-flash"].enabledPlugin&&c["application/x-shockwave-flash"].enabledPlugin.description)&&
(b=!0);else if(g!==d&&!r.match(/MSAppHost/i)){try{f=new g("ShockwaveFlash.ShockwaveFlash")}catch(h){f=null}b=!!f}return Ma=b};ja=function(){var a,b,c=l.audioFormats;if(Rb&&r.match(/os (1|2|3_0|3_1)/i))l.hasHTML5=!1,l.html5Only=!0,l.oMC&&(l.oMC.style.display="none");else if(l.useHTML5Audio){if(!l.html5||!l.html5.canPlayType)l._wD("SoundManager: No HTML5 Audio() support detected."),l.hasHTML5=!1;wc&&l._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+
(!Ma?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),1)}if(l.useHTML5Audio&&l.hasHTML5)for(b in N=!0,c)if(c.hasOwnProperty(b)&&c[b].required)if(l.html5.canPlayType(c[b].type)){if(l.preferFlash&&(l.flash[b]||l.flash[c[b].type]))a=!0}else N=!1,a=!0;l.ignoreFlash&&(a=!1,N=!0);l.html5Only=l.hasHTML5&&l.useHTML5Audio&&!a;return!l.html5Only};Na=function(a){var b,c,d=0;if(a instanceof Array){b=0;for(c=a.length;b<c;b++)if(a[b]instanceof Object){if(l.canPlayMIME(a[b].type)){d=
b;break}}else if(l.canPlayURL(a[b])){d=b;break}a[d].url&&(a[d]=a[d].url);a=a[d]}return a};Sa=function(a){a._hasTimer||(a._hasTimer=!0,!Pb&&l.html5PollingInterval&&(null===Ca&&0===kb&&(Ca=setInterval(ub,l.html5PollingInterval)),kb++))};jb=function(a){a._hasTimer&&(a._hasTimer=!1,!Pb&&l.html5PollingInterval&&kb--)};ub=function(){var a;if(null!==Ca&&!kb)return clearInterval(Ca),Ca=null,!1;for(a=l.soundIDs.length-1;0<=a;a--)l.sounds[l.soundIDs[a]].isHTML5&&l.sounds[l.soundIDs[a]]._hasTimer&&l.sounds[l.soundIDs[a]]._onTimer()};
Ja=function(b){b=b!==d?b:{};"function"===typeof l.onerror&&l.onerror.apply(a,[{type:b.type!==d?b.type:null}]);b.fatal!==d&&b.fatal&&l.disable()};cc=function(){if(!wc||!vb())return!1;var a=l.audioFormats,b,c;for(c in a)if(a.hasOwnProperty(c)&&("mp3"===c||"mp4"===c))if(l._wD("soundManager: Using flash fallback for "+c+" format"),l.html5[c]=!1,a[c]&&a[c].related)for(b=a[c].related.length-1;0<=b;b--)l.html5[a[c].related[b]]=!1};this._setSandboxType=function(a){var b=l.sandbox;b.type=a;b.description=b.types[b.types[a]!==
d?a:"unknown"];"localWithFile"===b.type?(b.noRemote=!0,b.noLocal=!1,x("secNote",2)):"localWithNetwork"===b.type?(b.noRemote=!1,b.noLocal=!0):"localTrusted"===b.type&&(b.noRemote=!1,b.noLocal=!1)};this._externalInterfaceOK=function(a){if(l.swfLoaded)return!1;var b;B("swf",!0);B("flashtojs",!0);l.swfLoaded=!0;Qb=!1;wc&&cc();if(!a||a.replace(/\+dev/i,"")!==l.versionNumber.replace(/\+dev/i,""))return b='soundManager: Fatal: JavaScript file build "'+l.versionNumber+'" does not match Flash SWF build "'+
a+'" at '+l.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(b);},0),!1;setTimeout(y,Fa?100:1)};Qa=function(a,b){function c(){var a=[],b,d=[];b="SoundManager "+l.version+(!l.html5Only&&l.useHTML5Audio?l.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");l.html5Only?l.html5PollingInterval&&a.push("html5PollingInterval ("+l.html5PollingInterval+"ms)"):(l.preferFlash&&a.push("preferFlash"),l.useHighPerformance&&a.push("useHighPerformance"),l.flashPollingInterval&&a.push("flashPollingInterval ("+
l.flashPollingInterval+"ms)"),l.html5PollingInterval&&a.push("html5PollingInterval ("+l.html5PollingInterval+"ms)"),l.wmode&&a.push("wmode ("+l.wmode+")"),l.debugFlash&&a.push("debugFlash"),l.useFlashBlock&&a.push("flashBlock"));a.length&&(d=d.concat([a.join(" + ")]));l._wD(b+(d.length?" + "+d.join(", "):""),1);wa()}function e(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(E&&S)return!1;if(l.html5Only)return aa(),c(),l.oMC=t(l.movieID),y(),S=E=!0,!1;var f=b||l.url,g=l.altURL||f,h=rb(),k=Oa(),
n=null,n=s.getElementsByTagName("html")[0],p,q,u,n=n&&n.dir&&n.dir.match(/rtl/i);a=a===d?l.id:a;aa();l.url=bc(Db?f:g);b=l.url;l.wmode=!l.wmode&&l.useHighPerformance?"transparent":l.wmode;if(null!==l.wmode&&(r.match(/msie 8/i)||!Fa&&!l.useHighPerformance)&&navigator.platform.match(/win32|win64/i))va.push(Z.spcWmode),l.wmode=null;h={name:a,id:a,src:b,quality:"high",allowScriptAccess:l.allowScriptAccess,bgcolor:l.bgColor,pluginspage:$c+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",
type:"application/x-shockwave-flash",wmode:l.wmode,hasPriority:"true"};l.debugFlash&&(h.FlashVars="debug=1");l.wmode||delete h.wmode;if(Fa)f=s.createElement("div"),q=['<object id="'+a+'" data="'+b+'" type="'+h.type+'" title="'+h.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+$c+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',e("movie",b),e("AllowScriptAccess",l.allowScriptAccess),e("quality",h.quality),l.wmode?e("wmode",l.wmode):"",e("bgcolor",
l.bgColor),e("hasPriority","true"),l.debugFlash?e("FlashVars",h.FlashVars):"","</object>"].join("");else for(p in f=s.createElement("embed"),h)h.hasOwnProperty(p)&&f.setAttribute(p,h[p]);sb();k=Oa();if(h=rb())if(l.oMC=t(l.movieID)||s.createElement("div"),l.oMC.id)u=l.oMC.className,l.oMC.className=(u?u+" ":"movieContainer")+(k?" "+k:""),l.oMC.appendChild(f),Fa&&(p=l.oMC.appendChild(s.createElement("div")),p.className="sm2-object-box",p.innerHTML=q),S=!0;else{l.oMC.id=l.movieID;l.oMC.className="movieContainer "+
k;p=k=null;l.useFlashBlock||(l.useHighPerformance?k={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(k={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},n&&(k.left=Math.abs(parseInt(k.left,10))+"px")));Mc&&(l.oMC.style.zIndex=1E4);if(!l.debugFlash)for(u in k)k.hasOwnProperty(u)&&(l.oMC.style[u]=k[u]);try{Fa||l.oMC.appendChild(f),h.appendChild(l.oMC),Fa&&(p=l.oMC.appendChild(s.createElement("div")),p.className="sm2-object-box",p.innerHTML=
q),S=!0}catch(v){throw Error(da("domError")+" \n"+v.toString());}}E=!0;c();return!0};ma=function(){if(l.html5Only)return Qa(),!1;if(p)return!1;if(!l.url)return x("noURL"),!1;(p=l.getMovie(l.id))||(Da?(Fa?l.oMC.innerHTML=hb:l.oMC.appendChild(Da),Da=null,E=!0):Qa(l.id,l.url),p=l.getMovie(l.id));"function"===typeof l.oninitmovie&&setTimeout(l.oninitmovie,1);Ob();return!0};L=function(){setTimeout(G,1E3)};G=function(){var b,c=!1;if(!l.url||La)return!1;La=!0;fa.remove(a,"load",L);if(Qb&&!eb)return x("waitFocus"),
!1;I||(b=l.getMoviePercent(),0<b&&100>b&&(c=!0));setTimeout(function(){b=l.getMoviePercent();if(c)return La=!1,l._wD(da("waitSWF")),a.setTimeout(L,1),!1;I||(l._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===b?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(l.debugFlash?" "+da("checkSWF"):""),2),!Db&&b&&(x("localFail",2),l.debugFlash||x("tryDebug",2)),0===b&&l._wD(da("swf404",l.url),1),B("flashtojs",!1,": Timed out"+Db?" (Check flash security or flash blockers)":
" (No plugin/missing SWF?)"));!I&&Sb&&(null===b?l.useFlashBlock||0===l.flashLoadTimeout?(l.useFlashBlock&&Pa(),x("waitForever")):!l.useFlashBlock&&N?a.setTimeout(function(){ua("soundManager: useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...");l.setup({preferFlash:!1}).reboot();l.didFlashBlock=!0;l.beginDelayedInit()},1):(x("waitForever"),C({type:"ontimeout",ignoreInit:!0})):0===l.flashLoadTimeout?x("waitForever"):Kb(!0))},l.flashLoadTimeout)};la=function(){if(eb||
!Qb)return fa.remove(a,"focus",la),!0;eb=Sb=!0;x("gotFocus");La=!1;L();fa.remove(a,"focus",la);return!0};Ob=function(){va.length&&(l._wD("SoundManager 2: "+va.join(" "),1),va=[])};wa=function(){Ob();var a,b=[];if(l.useHTML5Audio&&l.hasHTML5){for(a in l.audioFormats)l.audioFormats.hasOwnProperty(a)&&b.push(a+" = "+l.html5[a]+(!l.html5[a]&&ha&&l.flash[a]?" (using flash)":l.preferFlash&&l.flash[a]&&ha?" (preferring flash)":!l.html5[a]?" ("+(l.audioFormats[a].required?"required, ":"")+"and no flash support)":
""));l._wD("SoundManager 2 HTML5 support: "+b.join(", "),1)}};ca=function(b){if(I)return!1;if(l.html5Only)return x("sm2Loaded"),I=!0,F(),B("onload",!0),!0;var c=!0,d;if(!l.useFlashBlock||!l.flashLoadTimeout||l.getMoviePercent())I=!0,A&&(d={type:!Ma&&ha?"NO_FLASH":"INIT_TIMEOUT"});l._wD("SoundManager 2 "+(A?"failed to load":"loaded")+" ("+(A?"Flash security/load error":"OK")+")",A?2:1);A||b?(l.useFlashBlock&&l.oMC&&(l.oMC.className=Oa()+" "+(null===l.getMoviePercent()?"swf_timedout":"swf_error")),
C({type:"ontimeout",error:d,ignoreInit:!0}),B("onload",!1),Ja(d),c=!1):B("onload",!0);A||(l.waitForWindowLoad&&!H?(x("waitOnload"),fa.add(a,"load",F)):(l.waitForWindowLoad&&H&&x("docLoaded"),F()));return c};w=function(){var a,b=l.setupOptions;for(a in b)b.hasOwnProperty(a)&&(l[a]===d?l[a]=b[a]:l[a]!==b[a]&&(l.setupOptions[a]=l[a]))};y=function(){if(I)return x("didInit"),!1;if(l.html5Only)return I||(fa.remove(a,"load",l.beginDelayedInit),l.enabled=!0,ca()),!0;ma();try{p._externalInterfaceTest(!1),
Ka(!0,l.flashPollingInterval||(l.useHighPerformance?10:50)),l.debugMode||p._disableDebug(),l.enabled=!0,B("jstoflash",!0),l.html5Only||fa.add(a,"unload",v)}catch(b){return l._wD("js/flash exception: "+b.toString()),B("jstoflash",!1),Ja({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),Kb(!0),ca(),!1}ca();fa.remove(a,"load",l.beginDelayedInit);return!0};ba=function(){if(U)return!1;U=!0;w();sb();var a=null,a=null,b=u.toLowerCase();-1!==b.indexOf("sm2-usehtml5audio=")&&(a="1"===b.charAt(b.indexOf("sm2-usehtml5audio=")+
18),Ya&&console.log((a?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),l.setup({useHTML5Audio:a}));-1!==b.indexOf("sm2-preferflash=")&&(a="1"===b.charAt(b.indexOf("sm2-preferflash=")+16),Ya&&console.log((a?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),l.setup({preferFlash:a}));!Ma&&l.hasHTML5&&(l._wD("SoundManager: No Flash detected"+(!l.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."),1),l.setup({useHTML5Audio:!0,preferFlash:!1}));Va();!Ma&&ha&&(va.push(Z.needFlash),
l.setup({flashLoadTimeout:1}));s.removeEventListener&&s.removeEventListener("DOMContentLoaded",ba,!1);ma();return!0};xa=function(){"complete"===s.readyState&&(ba(),s.detachEvent("onreadystatechange",xa));return!0};Ta=function(){H=!0;fa.remove(a,"load",Ta)};sa=function(){if(Pb&&((!l.setupOptions.useHTML5Audio||l.setupOptions.preferFlash)&&va.push(Z.mobileUA),l.setupOptions.useHTML5Audio=!0,l.setupOptions.preferFlash=!1,Rb||mb&&!r.match(/android\s2\.3/i)))va.push(Z.globalHTML5),Rb&&(l.ignoreFlash=!0),
Ea=!0};sa();vb();fa.add(a,"focus",la);fa.add(a,"load",L);fa.add(a,"load",Ta);s.addEventListener?s.addEventListener("DOMContentLoaded",ba,!1):s.attachEvent?s.attachEvent("onreadystatechange",xa):(B("onload",!1),Ja({type:"NO_DOM2_EVENTS",fatal:!0}))}var c=null;if(void 0===a.SM2_DEFER||!SM2_DEFER)c=new b;a.SoundManager=b;a.soundManager=c})(window);soundManager.url="/universal/scripts-thirdparty/soundmanager2/swf/";soundManager.flashVersion=9;soundManager.useHTML5Audio=!0;soundManager.useFlashBlock=!1;
soundManager.debugMode=!1;soundManager.consoleOnly=!0;soundManager.preferFlash=!1;YUI.add("thirdparty-soundmanager2",function(a){},"2.97.0");
YUI.add("squarespace-dialog-tab",function(a){a.namespace("Squarespace.DialogFields");var d=a.namespace("Squarespace.DialogFields").TabButton=a.namespace("Squarespace.Widgets").TabButton=a.Base.create("tabButton",a.Squarespace.DialogFields.Button,[],{renderUI:function(){d.superclass.renderUI.call(this);this.get("boundingBox").removeClass("sqs-button")}},{CSS_PREFIX:"sqs-tab"})},"1.0",{requires:["base","node","squarespace-dialog-button"]});
YUI.add("squarespace-connected-account-capabilities",function(a){var d=a.namespace("Squarespace.ConnectedAccountCapabilities"),b=d.PULL=1,c=d.PUSH=2,e=d.ICON=4,g=d.NONE=0,f={twitter:b|c|e,flickr:b|e,smugmug:e,facebook:e|c,github:e,dropbox:g,instagram:e|b,youtube:e,tumblr:e|c,vimeo:e,pinterest:e,fivehundredpix:e|b,email:e,google:e,dribbble:e,foursquare:e|b,linkedin:e|c};d.can=function(b,c){var d=f[b.get("serviceName")];return!a.Lang.isValue(d)?!1:d&c};d.get=function(a){return f[a.get("serviceName")]}},
"1.0");
YUI.add("squarespace-dialog-statepicker",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.Statepicker=a.Base.create("statepicker",a.Squarespace.DialogField2,[],{renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("contentBox");this.get("targetNode");this.stateLabel=a.one(".field-workflow-title");this.stateDesc=a.one(".field-workflow-description");this.buildStateMenu()},onStateChosen:function(b){b=b.currentTarget.getData("state");var c=this.get("data");a.Object.hasKey(b,
"state")&&(c.state=b.state);this.set("data",c)},getStateType:function(){var a=this.get("data"),a=this.get("states")[a.state].stateDesc,a=/\[\s*([^|\]]+?)\s*(?:\|([^]]*))?\s*\]/g.exec(a);return null!==a?String(a[1]).toLowerCase():!1},buildStateMenu:function(){this.get("contentBox");var a=this.get("stateOrder"),c=this.get("states");this._renderStatesObject(c,a)},_renderStatesObject:function(b,c){var d=a.Array.map(c,function(a,c){var d=b[a];d.key=a;return d});a.Array.each(d,this._renderState,this)},
_renderState:function(b,c){var d,g=this.get("data").state;d=a.Lang.sub(this.constructor.OPTION_TEMPLATE,b);var f=this.get("contentBox").one(".workflow-flyout-options");if(!f)throw"No element to attach states to.";d=a.Node.create(d);d.on("click",this.onStateChosen,this);g===b.key&&d.addClass("selected");d.setData("state",{state:b.key});f.appendChild(d)},didDataChange:function(){return objEqual(this.get("data"),this._initialData)}},{CSS_PREFIX:"sqs-statepicker",TEMPLATE:'<div class="workflow-flyout"><div class="workflow-flyout-options"></div></div>',
OPTION_TEMPLATE:'<div class="field-workflow-flyout-option-wrapper"><div class="field-workflow-flyout-option"><div class="field-workflow-title">{title}</div><div class="field-workflow-description">{optionDesc}</div></div></div>',ATTRS:{strings:{},data:{getter:function(b){return a.Lang.isObject(b)?a.merge(b,{}):b}},states:{},stateOrder:{},stateType:{},targetNode:{},durationOffset:{value:-1},allowNever:{}}})},"1.0",{requires:["base","base-build","squarespace-dialog-fields","squarespace-dialog-field-2"]});
YUI.add("squarespace-dialog-description",function(a){var d=a.namespace("Squarespace.DialogFields").Description=a.Base.create("descriptionField",a.Squarespace.DialogField2,[],{renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("padding");this._descEl=this.get("contentBox").one(".custom-field-description");a.Lang.isArray(b)&&0<b.length&&this._descEl.setStyles({paddingTop:b[0],paddingBottom:b[1]});this._attachNode("title");this._attachNode("text")},bindUI:function(){d.superclass.bindUI.call(this);
this.after(["titleChange","textChange"],this.syncUI,this)},syncUI:function(){d.superclass.syncUI.call(this);this._descEl.empty();this._attachNode("title");this._attachNode("text")},_attachNode:function(b){var c=this.get(b);a.Lang.isString(c)&&0<c.length&&(attrNode=a.Node.create('<div class="'+b+'">'+c+"</div>"),this._descEl.append(attrNode))},_getAsString:function(b){return!a.Lang.isValue(b)?"":b+""},setTitle:function(a){this.set("title",a)},setText:function(a){this.set("text",a)}},{CSS_PREFIX:"sqs-description",
TEMPLATE:'<div class="custom-field-description"></div>',ATTRS:{title:{value:"",getter:this._getAsString},text:{value:"",getter:this._getAsString},className:{value:"",validator:a.Lang.isString},padding:{value:[],validator:a.Lang.isArray},focusable:{value:!1}}})},"1.0.0",{requires:["node","base","squarespace-dialog-field-2"]});
YUI.add("squarespace-dialog-statepicker-scheduler",function(a){var d=a.namespace("Squarespace.DialogFields").StateScheduler=a.Base.create("stateScheduler",a.Squarespace.DialogField2,[a.WidgetChild,a.WidgetParent],{initializer:function(b){this.get("contentBox");b=a.Lang.isValue(b.data)?new Date(b.data):new Date;var c=a.Lang.trim(a.Squarespace.DateUtils.dateFormat(b,{format:"%M"})),d=a.Lang.trim(a.Squarespace.DateUtils.dateFormat(b,{format:"%p"})),g=a.Lang.trim(a.Squarespace.DateUtils.dateFormat(b,
{format:"%l"})),f=this.get("maximumDate");this._widgets=[];this._widgets[0]=new a.Squarespace.DialogFields.InsetCalendar({name:"calendar",maximumDate:f,data:b});this._widgets[1]=new a.Squarespace.DialogFields.InsetTimer({name:"timer",data:{minutes:Number(c),ampm:d,hours:Number(g)}});this._widgets[2]=new a.Squarespace.DialogFields.Slider({name:"slider",range:["duration"===this.get("type")&&this.get("allowNever")?-1:0,90],data:this.get("durationOffset"),labelWidth:0,length:260,visible:"duration"===
this.get("type"),thumbUrl:"/universal/images-v6/dialog/slider-thumb-dark.png"})},destructor:function(){a.Array.each(this._widgets,function(a,c){a.detach();a.destroy()})},renderUI:function(){d.superclass.renderUI.call(this);this.get("data");this.get("type");var b=this.get("contentBox");b.one(".flyout-title").set("text",this.get("strings.title"));this._widgets[0].render(b.one(".flyout-calendar"));this._widgets[1].render(b.one(".flyout-calendar"));"duration"===this.get("type")&&(this._durationEl=a.Node.create('<div class="duration-wrapper"></div>'),
this._durationEl.append(a.Node.create('<div class="duration-display"><span class="duration"></span></div><div class="slider-container-wrapper"></div>')),b.one(".workflow-flyout-options").append(this._durationEl),this._widgets[2].render(b.one(".slider-container-wrapper")),this._widgets[2].show());var c=a.Node.create('<div class="flyout-notch">');"down"===this.get("direction")?(c.addClass("flyout-notch-up"),b.one(".workflow-flyout").prepend(c)):b.one(".workflow-flyout").append(c)},syncUI:function(){d.superclass.syncUI.call(this);
this._widgets[2].get("visible")&&this._durationEl.one(".duration").set("text",this.getShortDurationText())},bindUI:function(){d.superclass.bindUI.call(this);this._widgets[0].after("dataChange",this._mergeDateTimeComponents,this);this._widgets[1].after("dataChange",this._mergeDateTimeComponents,this);this._widgets[2].after("dataChange",this._updateTimeOffset,this);this.after("dataChange",this.syncCalendar,this)},_mergeDateTimeComponents:function(b){b=this._widgets[0].get("data");var c=a.merge(this._widgets[1].get("data"),
{});if(a.Lang.isNull(b))this.get("allowNever")?(this.set("durationOffset",-1),this.set("data",null)):this.set("data",Date.now());else{var d=c.ampm,g=c.hours;12===g&&(g=0);"PM"===d&&(g+=12);c=c.minutes;b=a.Squarespace.DateUtils.createWebsiteDate(b.getFullYear(),b.getMonth(),b.getDate(),g,c);this.set("durationOffset",a.Squarespace.DateUtils.calculateFullDayOffset(new Date,b));this.set("data",b)}},_updateTimeOffset:function(a){if(-1===a.newVal&&this.get("allowNever"))this._widgets[0].set("data",null),
this._widgets[1].disable();else{this._widgets[1].enable();var c=new Date;c.addDays(a.newVal);this._widgets[0].setAttrs({day:c.getDate(),month:c.getMonth(),year:c.getFullYear(),data:c})}},syncCalendar:function(){var b=new Date(this.get("data")),c=a.Lang.trim(a.Squarespace.DateUtils.dateFormat(b,{format:"%M"})),d=a.Lang.trim(a.Squarespace.DateUtils.dateFormat(b,{format:"%p"})),g=a.Lang.trim(a.Squarespace.DateUtils.dateFormat(b,{format:"%l"}));b.set({hours:0,minutes:0,seconds:0,milliseconds:0});this._widgets[0].setAttrs({day:b.getDate()},
{silent:!0});this._widgets[0].setAttrs({month:b.getMonth(),year:b.getFullYear()});this._widgets[1].setAttrs({minutes:Number(c),ampm:d,hours:Number(g)})},getShortDurationText:function(){var b=this.get("data"),b=this.get("allowNever")&&a.Lang.isNull(b),c=this.get("durationOffset");return-1===c&&b?"Never":0===c?"Today":1==c?"Tomorrow":-1==c?"Yesterday":-1>c?Math.abs(c)+" Days ago":Math.abs(c)+" Days"}},{CSS_PREFIX:"sqs-scheduler",TEMPLATE:'<div class="workflow-flyout tight sqs-calendar-flyout"><div class="workflow-flyout-options"><div class="flyout-title clear"></div><div class="flyout-calendar clear"></div></div></div>',
ATTRS:{allowNever:{value:!1},data:{setter:function(b){return a.Lang.isDate(b)?b.getTime():b}},day:{value:1,setter:function(a){return parseInt(a,10)}},direction:{value:"up"},durationOffset:{value:0},maximumDate:{},strings:{value:{title:"Select a Date & Time"}},targetNode:{},type:{value:"date",validator:function(a){validTypes=["duration","date"];return-1!==validTypes.indexOf(a)}},errorFlyoutAnimationTime:{value:0.01}}})},"1.0",{requires:"base base-build slider squarespace-dialog-fields squarespace-dialog-field-2 squarespace-dialog-slider squarespace-dialog-statepicker-inset-timer squarespace-dialog-statepicker-inset-calendar squarespace-timezone-tools squarespace-date-utils".split(" ")});
YUI.add("squarespace-tab-view-tab-group-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["tab-view-tab-group.html"]=a(function(a,b,d,f,h){function k(a,b){var c,e;c="\n        ";if((e=d["if"].call(a,a.widgets,{hash:{},inverse:q.program(5,n,b),fn:q.program(3,l,b),data:b}))||0===e)c+=e;return c+"\n      "}function l(a,b){var c,e;c="\n          ";if((e=q.invokePartial(f["tab-view/tab-group.html"],"tab-view/tab-group.html",a,d,f,b))||0===e)c+=e;return c+
"\n        "}function n(a,b){var c,e;c="\n          ";if((e=q.invokePartial(f["tab-view/tab.html"],"tab-view/tab.html",a,d,f,b))||0===e)c+=e;return c+"\n        "}this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);f=this.merge(f,a.partials);h=h||{};var p,q=this,t=this.escapeExpression;a='<div class="tab-group">\n  <div class="tab-group-label">';(p=d.label)?p=p.call(b,{hash:{},data:h}):(p=b.label,p="function"===typeof p?p.apply(b):p);a+=t(p)+'</div>\n  <div class="tab-group-items">\n    ';
if((p=d["if"].call(b,b.widgets,{hash:{},inverse:q.noop,fn:q.program(1,function(a,b){var c,e;c="\n      ";if((e=d.each.call(a,a.widgets,{hash:{},inverse:q.noop,fn:q.program(2,k,b),data:b}))||0===e)c+=e;return c+"\n    "},h),data:h}))||0===p)a+=p;return a+"\n  </div>\n</div>"})})();a.Handlebars.registerPartial("tab-view-tab-group.html".replace("/","."),d.templates["tab-view-tab-group.html"])},"1.0",{requires:["handlebars-base"]});
var avpw_swfobject=function(){function a(){if(!M){try{var a=B.getElementsByTagName("body")[0].appendChild(B.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}M=!0;for(var a=I.length,c=0;c<a;c++)I[c]()}}function d(a){M?a():I[I.length]=a}function b(a){if(typeof K.addEventListener!=w)K.addEventListener("load",a,!1);else if(typeof B.addEventListener!=w)B.addEventListener("load",a,!1);else if(typeof K.attachEvent!=w)t(K,"onload",a);else if("function"==typeof K.onload){var b=K.onload;K.onload=
function(){b();a()}}else K.onload=a}function c(){var a=B.getElementsByTagName("body")[0],b=B.createElement(y);b.setAttribute("type",z);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=w){var f=c.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),G.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;e()})()}else e()}function e(){var a=A.length;if(0<a)for(var b=0;b<a;b++){var c=A[b].id,
d=A[b].callbackFn,e={success:!1,id:c};if(0<G.pv[0]){var l=q(c);if(l)if(r(A[b].swfVersion)&&!(G.wk&&312>G.wk))s(c,!0),d&&(e.success=!0,e.ref=g(c),d(e));else if(A[b].expressInstall&&f()){e={};e.data=A[b].expressInstall;e.width=l.getAttribute("width")||"0";e.height=l.getAttribute("height")||"0";l.getAttribute("class")&&(e.styleclass=l.getAttribute("class"));l.getAttribute("align")&&(e.align=l.getAttribute("align"));for(var n={},l=l.getElementsByTagName("param"),p=l.length,t=0;t<p;t++)"movie"!=l[t].getAttribute("name").toLowerCase()&&
(n[l[t].getAttribute("name")]=l[t].getAttribute("value"));h(e,n,c,d)}else k(l),d&&d(e)}else s(c,!0),d&&((c=g(c))&&typeof c.SetVariable!=w&&(e.success=!0,e.ref=c),d(e))}}function g(a){var b=null;if((a=q(a))&&"OBJECT"==a.nodeName)typeof a.SetVariable!=w?b=a:(a=a.getElementsByTagName(y)[0])&&(b=a);return b}function f(){return!R&&r("6.0.65")&&(G.win||G.mac)&&!(G.wk&&312>G.wk)}function h(a,b,c,d){R=!0;Q=d||null;$={success:!1,id:c};var e=q(c);if(e){"OBJECT"==e.nodeName?(P=l(e),ca=null):(P=e,ca=c);a.id=
D;if(typeof a.width==w||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height==w||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";B.title=B.title.slice(0,47)+" - Flash Player Installation";d=G.ie&&G.win?"ActiveX":"PlugIn";d="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+B.title;typeof b.flashvars!=w?b.flashvars+="&"+d:b.flashvars=d;G.ie&&(G.win&&4!=e.readyState)&&(d=B.createElement("div"),c+="SWFObjectNew",
d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());n(a,b,c)}}function k(a){if(G.ie&&G.win&&4!=a.readyState){var b=B.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(l(a),b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(l(a),a)}function l(a){var b=B.createElement("div");
if(G.win&&G.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(y)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)(1!=a[d].nodeType||"PARAM"!=a[d].nodeName)&&8!=a[d].nodeType&&b.appendChild(a[d].cloneNode(!0));return b}function n(a,b,c){var d,e=q(c);if(G.wk&&312>G.wk)return d;if(e)if(typeof a.id==w&&(a.id=c),G.ie&&G.win){var f="",g;for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&
(f+=" "+g+'="'+a[g]+'"'));g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";H[H.length]=a.id;d=q(a.id)}else{h=B.createElement(y);h.setAttribute("type",z);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?h.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&h.setAttribute(k,a[k]));for(f in b)b[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&
(a=h,g=f,k=b[f],c=B.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",k),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}return d}function p(a){var b=q(a);b&&"OBJECT"==b.nodeName&&(G.ie&&G.win?(b.style.display="none",function(){if(4==b.readyState){var c=q(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function q(a){var b=null;try{b=B.getElementById(a)}catch(c){}return b}
function t(a,b,c){a.attachEvent(b,c);x[x.length]=[a,b,c]}function r(a){var b=G.pv;a=a.split(".");return a[0]=parseInt(a[0],10),a[1]=parseInt(a[1],10)||0,a[2]=parseInt(a[2],10)||0,b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function u(a,b,c,d){if(!G.ie||!G.mac){var e=B.getElementsByTagName("head")[0];if(e){c=c&&"string"==typeof c?c:"screen";d&&(C=null,F=null);if(!C||F!=c)d=B.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),C=e.appendChild(d),
G.ie&&G.win&&typeof B.styleSheets!=w&&0<B.styleSheets.length&&(C=B.styleSheets[B.styleSheets.length-1]),F=c;G.ie&&G.win?C&&typeof C.addRule==y&&C.addRule(a,b):C&&typeof B.createTextNode!=w&&C.appendChild(B.createTextNode(a+" {"+b+"}"))}}}function s(a,b){if(L){var c=b?"visible":"hidden";M&&q(a)?q(a).style.visibility=c:u("#"+a,"visibility:"+c)}}function v(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=w?encodeURIComponent(a):a}var w="undefined",y="object",z="application/x-shockwave-flash",
D="SWFObjectExprInst",K=window,B=document,E=navigator,S=!1,I=[function(){S?c():e()}],A=[],H=[],x=[],P,ca,Q,$,M=!1,R=!1,C,F,L=!0,G=function(){var a=typeof B.getElementById!=w&&typeof B.getElementsByTagName!=w&&typeof B.createElement!=w,b=E.userAgent.toLowerCase(),c=E.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!1,f=[0,0,0],g=null;if(typeof E.plugins!=w&&typeof E.plugins["Shockwave Flash"]==
y)(g=E.plugins["Shockwave Flash"].description)&&(typeof E.mimeTypes==w||!E.mimeTypes[z]||E.mimeTypes[z].enabledPlugin)&&(S=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof K.ActiveXObject!=w)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");h&&(g=h.GetVariable("$version"),g&&(e=!0,g=g.split(" ")[1].split(","),
f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(k){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){G.w3&&((typeof B.readyState!=w&&"complete"==B.readyState||typeof B.readyState==w&&(B.getElementsByTagName("body")[0]||B.body))&&a(),M||(typeof B.addEventListener!=w&&B.addEventListener("DOMContentLoaded",a,!1),G.ie&&G.win&&(B.attachEvent("onreadystatechange",function(){"complete"==B.readyState&&(B.detachEvent("onreadystatechange",arguments.callee),a())}),K==top&&function(){if(!M){try{B.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,
0);return}a()}}()),G.wk&&function(){M||(/loaded|complete/.test(B.readyState)?a():setTimeout(arguments.callee,0))}(),b(a)))})();(function(){G.ie&&G.win&&window.attachEvent("onunload",function(){for(var a=x.length,b=0;b<a;b++)x[b][0].detachEvent(x[b][1],x[b][2]);a=H.length;for(b=0;b<a;b++)p(H[b]);for(var c in G)G[c]=null;G=null;for(var d in avpw_swfobject)avpw_swfobject[d]=null;avpw_swfobject=null})})();return{registerObject:function(a,b,c,d){if(G.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=
c;e.callbackFn=d;A[A.length]=e;s(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(G.w3)return g(a)},embedSWF:function(a,b,c,e,g,k,l,p,q,t){var u={success:!1,id:b};G.w3&&!(G.wk&&312>G.wk)&&a&&b&&c&&e&&g?(s(b,!1),d(function(){c+="";e+="";var d={};if(q&&typeof q===y)for(var v in q)d[v]=q[v];d.data=a;d.width=c;d.height=e;v={};if(p&&typeof p===y)for(var x in p)v[x]=p[x];if(l&&typeof l===y)for(var z in l)typeof v.flashvars!=w?v.flashvars+="&"+z+"="+l[z]:v.flashvars=z+"="+l[z];if(r(g))x=
n(d,v,b),d.id==b&&s(b,!0),u.success=!0,u.ref=x;else{if(k&&f()){d.data=k;h(d,v,b,t);return}s(b,!0)}t&&t(u)})):t&&t(u)},switchOffAutoHideShow:function(){L=!1},ua:G,getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:r,createSWF:function(a,b,c){return G.w3?n(a,b,c):void 0},showExpressInstall:function(a,b,c,d){G.w3&&f()&&h(a,b,c,d)},removeSWF:function(a){G.w3&&p(a)},createCSS:function(a,b,c,d){G.w3&&u(a,b,c,d)},addDomLoadEvent:d,addLoadEvent:b,getQueryParamValue:function(a){var b=
B.location.search||B.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)return v(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return v(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(R){var a=q(D);a&&P&&(a.parentNode.replaceChild(P,a),ca&&(s(ca,!0),G.ie&&G.win&&(P.style.display="block")),Q&&Q($));R=!1}}}}();
(function(a,d,b){var c=/\s+/;a.Events={on:function(a,b,d){var h,k;if(!b)return this;a=a.split(c);for(h=this._callbacks||(this._callbacks={});k=a.shift();)k=h[k]||(h[k]=[]),k.push(b,d);return this},off:function(a,b,d){var h,k,l;if(!(k=this._callbacks))return this;if(!a&&!b&&!d)return delete this._callbacks,this;for(a=a?a.split(c):_.keys(k);h=a.shift();)if(!(l=k[h])||!b&&!d)delete k[h];else for(h=l.length-2;0<=h;h-=2)b&&l[h]!==b||d&&l[h+1]!==d||l.splice(h,2);return this},trigger:function(a){var b,d,
h,k,l,n,p;if(!(d=this._callbacks))return this;p=[];a=a.split(c);k=1;for(l=arguments.length;k<l;k++)p[k-1]=arguments[k];for(;b=a.shift();){if(n=d.all)n=n.slice();if(h=d[b])h=h.slice();if(h){k=0;for(l=h.length;k<l;k+=2)h[k].apply(h[k+1]||this,p)}if(n){b=[b].concat(p);k=0;for(l=n.length;k<l;k+=2)n[k].apply(n[k+1]||this,b)}}return this}}})(window.AV||(window.AV={}),window,document);"undefined"==typeof AV&&(AV={});AV.JSON={};
(function(){function a(a){return 10>a?"0"+a:a}function d(a){return e.lastIndex=0,e.test(a)?'"'+a.replace(e,function(a){var b=h[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(a,c){var e,h,t,r,u=g,s,v=c[a];v&&"object"==typeof v&&"function"==typeof v.toJSON&&(v=v.toJSON(a));"function"==typeof k&&(v=k.call(c,a,v));switch(typeof v){case "string":return d(v);case "number":return isFinite(v)?String(v):"null";case "boolean":case "null":return String(v);
case "object":if(!v)return"null";g+=f;s=[];if("[object Array]"===Object.prototype.toString.apply(v)){r=v.length;for(e=0;e<r;e+=1)s[e]=b(e,v)||"null";return t=0===s.length?"[]":g?"[\n"+g+s.join(",\n"+g)+"\n"+u+"]":"["+s.join(",")+"]",g=u,t}if(k&&"object"==typeof k){r=k.length;for(e=0;e<r;e+=1)h=k[e],"string"==typeof h&&(t=b(h,v),t&&s.push(d(h)+(g?": ":":")+t))}else for(h in v)Object.hasOwnProperty.call(v,h)&&(t=b(h,v),t&&s.push(d(h)+(g?": ":":")+t));return t=0===s.length?"{}":g?"{\n"+g+s.join(",\n"+
g)+"\n"+u+"}":"{"+s.join(",")+"}",g=u,t}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,f,h={"\b":"\\b"," ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!=typeof AV.JSON.stringify&&(AV.JSON.stringify=function(a,c,d){var e;f=g="";if("number"==typeof d)for(e=0;e<d;e+=1)f+=" ";else"string"==typeof d&&(f=d);k=c;if(!c||"function"==typeof c||"object"==typeof c&&"number"==typeof c.length)return b("",{"":a});throw Error("AV.JSON.stringify");
});"function"!=typeof AV.JSON.parse&&(AV.JSON.parse=function(a,b){function d(a,c){var e,f,g=a[c];if(g&&"object"==typeof g)for(e in g)Object.hasOwnProperty.call(g,e)&&(f=d(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,c,g)}var e;a=String(a);c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"==typeof b?d({"":e},""):e;throw new SyntaxError("AV.JSON.parse");})})();
(function(a){a.build={version:"3.1.0.223",bundled:!1,MINIMUM_FLASH_PLAYER_VERSION:"10.2.0",feather_baseURL:"http://feather.aviary.com/3.1.0.223/",feather_baseURL_SSL:"https://dme0ih8comzn4.cloudfront.net/3.1.0.223/",feather_stickerURL:"http://feather.aviary.com/stickers/",feather_stickerURL_SSL:"https://dme0ih8comzn4.cloudfront.net/stickers/",imgrecvBase:"http://featherservices.aviary.com/",imgrecvBase_SSL:"https://featherservices.aviary.com/",featherTargetAnnounce:"http://featherservices.aviary.com/feather_target_announce_v3.html",
featherTargetAnnounce_SSL:"https://featherservices.aviary.com/feather_target_announce_v3.html",imgrecvServer:"http://featherservices.aviary.com/FeatherReceiver.aspx",imgrecvServer_SSL:"https://featherservices.aviary.com/FeatherReceiver.aspx",jsonp_imgserver:"http://featherservices.aviary.com/imgjsonpserver.aspx",jsonp_imgserver_SSL:"https://featherservices.aviary.com/imgjsonpserver.aspx",proxyServer:"http://featherservices.aviary.com/proxy.aspx",proxyServer_SSL:"https://featherservices.aviary.com/proxy.aspx",
asyncImgrecvBase:"http://api.aviary.com/",asyncImgrecvBase_SSL:"https://api.aviary.com/",partnerAssetURL:"http://api.aviary.com/getassets",partnerAssetURL_SSL:"https://api.aviary.com/getassets",asyncFeatherTargetAnnounce:"http://api.aviary.com/feather_target_announce_v3.html",asyncFeatherTargetAnnounce_SSL:"https://api.aviary.com/feather_target_announce_v3.html",asyncImgrecvCreateJob:"http://api.aviary.com/createjob",asyncImgrecvCreateJob_SSL:"https://api.aviary.com/createjob",asyncImgrecvGetJobStatus:"http://api.aviary.com/getjobstatus",
asyncImgrecvGetJobStatus_SSL:"https://api.aviary.com/getjobstatus",imgtrackServer:"http://featherservices.aviary.com/featherlog.aspx",imgtrackServer_SSL:"https://featherservices.aviary.com/featherlog.aspx",googleTracker:"UA-84575-16",inAppPurchaseFrameURL:"http://purchases.viary.com/gateway.aspx?p=flickr",filterServer:"http://featherservices.aviary.com/moa.ashx",filterServer_SSL:"https://featherservices.aviary.com/moa.ashx",featherFilterAnnounce:"http://featherservices.aviary.com/feather_filter_announce.html",
featherFilterAnnounce_SSL:"https://featherservices.aviary.com/feather_filter_announce.html"}})(AV=window.AV||{});"undefined"==typeof AV&&(AV={});AV.validLanguages={en:!0,zh_hant:!0,nl:!0,fr:!0,de:!0,it:!0,ja:!0,ko:!0,pl:!0,pt_br:!0,ru:!0,es:!0,android:!0,bg:!0,zh_hans:!0,cs:!0,da:!0,fi:!0,el:!0,he:!0,hu:!0,id:!0,no:!0,pt:!0,sk:!0,sv:!0,tr:!0,vi:!0,lv:!0,lt:!0,ca:!0,sl:!0};
(function(a,d,b){a.util={getX:function(a){for(var b=0;null!=a;)b+=a.offsetLeft,a=a.offsetParent;return b},getY:function(a){for(var b=0;null!=a;)b+=a.offsetTop,a=a.offsetParent;return b},getTouch:function(a){a.originalEvent&&(a=a.originalEvent);return a.changedTouches&&1==a.changedTouches.length?a.changedTouches[0]:a.touches&&1==a.touches.length?a.touches[0]:!1},getScaledDims:function(a,b,d,f){f=f||d;var h=a,k=b,l=a/b;if(a>d||b>f)a-d>l*(b-f)?(h=d,k=d*b/a+0.5|0):(h=f*l+0.5|0,k=f);return{width:h,height:k}},
nextFrame:function(a){setTimeout(a,1)},getDomain:function(a,b){var d,f,h;d="http://"==a.substr(0,7)?7:"https://"==a.substr(0,8)?8:"ftp://"==a.substr(0,6)?6:0;f=a.indexOf("/",d);-1==f&&(f=a.length);b||(h=a.lastIndexOf(":"),h=h>d?a.substring(d,h):a.substring(d,f),h.match(/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/)||(h=a.lastIndexOf(".",f),h=a.lastIndexOf(".",h-1),d=-1==h?d:h+1));return a.substring(d,f)},extend:function(){var a,b,d,f,h,k=arguments[0]||{},l=1,n=arguments.length,p=!1;"boolean"===typeof k&&(p=k,
k=arguments[1]||{},l=2);"object"!==typeof k&&!jQuery.isFunction(k)&&(k={});n===l&&(k=this,--l);for(;l<n;l++)if(null!=(a=arguments[l]))for(b in a)d=k[b],f=a[b],k!==f&&(p&&f&&(jQuery.isPlainObject(f)||(h=jQuery.isArray(f)))?(h?(h=!1,d=d&&jQuery.isArray(d)?d:[]):d=d&&jQuery.isPlainObject(d)?d:{},k[b]=jQuery.extend(p,d,f)):void 0!==f&&(k[b]=f));return k},findItemByKeyValueFromArray:function(a,b,d){var f,h;for(f=0;f<d.length;f++)if(d[f]&&d[f][a]&&d[f][a]===b){h=d[f];break}return h},loadFile:function(){var a,
d,g=0,f;a=function(a,b){if(b){var c=function(a){(4==this.readyState||"complete"==this.readyState||"loaded"==this.readyState)&&b(a)};"Microsoft Internet Explorer"==navigator.appName?a.onreadystatechange=c:a.onload=b}};return function(h,k,l){var n;"js"==k?(n=b.createElement("script"),n.setAttribute("type","text/javascript"),a(n,l),n.setAttribute("src",h)):"css"==k?b.createStyleSheet?b.createStyleSheet(h,g++):(n=b.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),
n.setAttribute("href",h)):"img"==k&&(n=b.createElement("img"),a(n,l),n.setAttribute("src",h));n&&(d=d||b.getElementsByTagName("head")[0],"js"==k?d.appendChild(n):"css"==k&&(f=f||b.createDocumentFragment(),f.appendChild(n),d.insertBefore(n,void 0)));return n}}(),getImageElem:function(a){return"string"==typeof a?b.getElementById(a):a.length?a[0]:a},getImageId:function(a){return"string"==typeof a?a:a.id},imgOnLoad:function(a,b){var d=avpw$(a);d.load(b);(!0==d[0].complete||4==d[0].readyState||"complete"==
d[0].readyState||"loaded"==d[0].readyState)&&d.trigger("load")},color_is_white:function(a){a=a.toLowerCase();return"#fff"==a||"#ffffff"==a||"white"==a||"rgb(255,255,255)"==a||"rgb(255, 255, 255)"==a},color_is_light:function(b){b=a.util.color_to_array(b);return 127.5<0.2*b[0]+0.7*b[1]+0.1*b[2]},color_expand:function(a){var b,d;4==a.length&&(b=a.charAt(1),d=a.charAt(2),a=a.charAt(3),a="#"+b+b+d+d+a+a);return a},color_to_array:function(b){var d,g,f;"#"==b.charAt(0)?(b=a.util.color_expand(b),d=parseInt(b.substr(1,
2),16),g=parseInt(b.substr(3,2),16),f=parseInt(b.substr(5,2),16)):"r"==b.charAt(0).toLowerCase()&&(b=a.util.rgb_to_color(b),d=parseInt(b.substr(1,2),16),g=parseInt(b.substr(3,2),16),f=parseInt(b.substr(5,2),16));return b=[d,g,f,1]},array_to_color:function(b){b=a.util.array_to_rgb(b);return b=a.util.rgb_to_color(b)},array_to_rgb:function(a){var b="rgb(0,0,0)";a.join&&(3<a.length&&(a=a.slice(0,3)),b="rgb("+a.join(",")+")");return b},color_to_rgb:function(b){b=a.util.color_to_array(b);return b=a.util.array_to_rgb(b)},
rgb_to_color:function(a){var b,d;return(d=a.match(/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/))?(a=parseInt(d[1]).toString(16),1==a.length&&(a="0"+a),b=parseInt(d[2]).toString(16),1==b.length&&(b="0"+b),d=parseInt(d[3]).toString(16),1==d.length&&(d="0"+d),"#"+a+b+d):a},color_to_int:function(b){b=a.util.color_expand(b);b=a.util.rgb_to_color(b);return parseInt(b.substr(1),16)},loadImagesSync:function(b,d){for(var g=0,f=b.length,h=0;h<f;h++){var k=b[h].img,l=b[h].src;k.onload=function(){g++;d&&g==
b.length&&a.util.nextFrame(d)};k.src=l}},getApiVersion:function(a){return a&&a.apiVersion?parseInt(a.apiVersion,10):1},getUserFriendlyToolName:function(a){var b={overlay:"Stickers",drawing:"Draw",textwithfont:"Text",colorsplash:"Splash",tiltshift:"Tilt Shift",forcecrop:"Crop"},d="";a&&(d=b[a]||a.substr(0,1).toUpperCase()+a.substr(1));return d},keyDownHandlerNumber:function(a,b){9==a.keyCode||(27==a.keyCode||65==a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||35<=a.keyCode&&39>=a.keyCode)||((48>a.keyCode||
57<a.keyCode)&&(96>a.keyCode||105<a.keyCode)&&46!==a.keyCode&&8!==a.keyCode?a.preventDefault():b&&b.apply(this,[a]))},addFontToPage:function(b,d){b||d&&d();var g=b.value;if(b.system)d&&d(b);else if(a.WebFont){var f={loading:function(){a.controlsWidgetInstance&&a.controlsWidgetInstance.showWaitThrobber(!0)},active:function(){a.controlsWidgetInstance&&a.controlsWidgetInstance.showWaitThrobber(!1);d&&d(b)},inactive:function(){a.controlsWidgetInstance&&a.controlsWidgetInstance.showWaitThrobber(!1);a.errorNotify("UNSUPPORTED_FONT",
[g]);d&&d()}};b.custom?(f.custom={families:[g],urls:[b.url]},f.active=function(){a.controlsWidgetInstance&&a.controlsWidgetInstance.showWaitThrobber(!1);d&&a.util.nextFrame(function(){d(b)},500)}):f.google={families:[g]};a.WebFont.load(f)}}}})(window.AV||(window.AV={}),window,document);"undefined"===typeof AV&&(AV={});
AV.FlashAPI=function(){var a=null,d=function(){return function(a,b,c,d,k){k=k||{};var l={quality:"high",bgcolor:"#808080",allowscriptaccess:"always",allowfullscreen:"true"},n={};n.id=a;n.name=a;AV.msie&&9>AV.msie&&(n.align="center");a+="_replace";var p;c=(c||"100%")+"";p=(d||"100%")+"";d={};if(n&&"object"===typeof n)for(var q in n)d[q]=n[q];d.data=b;d.width=c;d.height=p;b={};if(l&&"object"===typeof l)for(var t in l)b[t]=l[t];if(k&&"object"===typeof k)for(var r in k)b.flashvars="undefined"!=typeof b.flashvars?
b.flashvars+("&"+r+"="+k[r]):r+"="+k[r];if(l=document.getElementById(a))if("undefined"==typeof d.id&&(d.id=a),AV.msie){var u="",s;for(s in d)d[s]!=Object.prototype[s]&&("data"==s.toLowerCase()?b.movie=d[s]:"styleclass"==s.toLowerCase()?u+=' class="'+d[s]+'"':"classid"!=s.toLowerCase()&&(u+=" "+s+'="'+d[s]+'"'));s="";for(var v in b)b[v]!=Object.prototype[v]&&(s+='<param name="'+v+'" value="'+b[v]+'" />');l.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+u+">"+s+"</object>";
"undefined"==typeof objIdArr&&(objIdArr=[]);objIdArr[objIdArr.length]=d.id}else{v=document.createElement("object");v.setAttribute("type","application/x-shockwave-flash");for(var w in d)d[w]!=Object.prototype[w]&&("styleclass"==w.toLowerCase()?v.setAttribute("class",d[w]):"classid"!=w.toLowerCase()&&v.setAttribute(w,d[w]));for(u in b)b[u]!=Object.prototype[u]&&"movie"!=u.toLowerCase()&&(s=v,w=u,a=b[u],d=document.createElement("param"),d.setAttribute("name",w),d.setAttribute("value",a),s.appendChild(d));
l.parentNode.replaceChild(v,l)}}}(),b=function(){};b.prototype=function(){return{getPlugins:function(){return[]},createCanvas:function(){this.initsize?d("avpw_canvas_swf",AV.build.feather_baseURL+"canvas.swf",this.initsize.width,this.initsize.height):d("avpw_canvas_swf",AV.build.feather_baseURL+"canvas.swf")},_onComponentLoaded:function(a){switch(a){case "canvas":a=document.getElementById("avpw_canvas_swf"),AV.FlashAPI._onCanvasLoaded(a)}},_onComponentReady:function(a){var b=AV.paintWidgetInstance;
"canvas"===a&&b.canvasReadyCallback&&b.canvasReadyCallback.resolve()}}}();var c=function(){var a=[];return{init:function(){for(var b=0;256>b;b++)a[b]=String.fromCharCode(b);a[0]=String.fromCharCode(1)+String.fromCharCode(1);a[1]=String.fromCharCode(1)+String.fromCharCode(2)},shutdown:function(){a=[]},decode:function(a,b,c){b=[];for(var d,e=c=0,n=[0,0,1];e<a.length;)b[c++]=1!=(d=a.charCodeAt(e++))?d:n[a.charCodeAt(e++)];return b},encode:function(b){for(var c="",d=0;d<b.length;d+=4)c+=a[b[d+3]],c+=
a[b[d]],c+=a[b[d+1]],c+=a[b[d+2]];return c}}}();return function(){var d=!1,g=!1;return{mapToFlashToolName:function(a){switch(a){case "rotate":return"rotate90"}return a},mapFromFlashToolName:function(a){switch(a){case "rotate90":return"rotate"}return a},customBridge:function(a){var c=function(){};c.prototype=new b;c.prototype.constructor=b;for(var d in a)c.prototype[d]=a[d];return c},activate:function(a){this.bridge=a||new b;this.goldenEggCallback=null},setHiresSize:function(a,b){this.canvas&&this.canvas.setHiresSize(a,
b)},hiresSizeChanged:function(a,b){AV.paintWidgetInstance&&AV.paintWidgetInstance.actions&&AV.paintWidgetInstance.actions.setDims(a,b)},startEditing:function(a){this.canvas=null;this.active_target=a;this.bridge.createCanvas()},restartEditing:function(a){this.active_target=a;this._setupEditing()},close:function(){},runGoldenEgg:function(a,b,c,d){this.goldenEggCallback=d;this.canvas.renderGoldenEgg(a,b,c)},doCrop:function(){this.canvas.executeCrop()},activatePlugin:function(a){this.canvas.activatePlugin(a)},
deactivatePlugin:function(a){this.canvas.deactivatePlugin(a)},changeProperty:function(a,b){this.canvas.changeProperty(a,b)},applyPreviewFromPlugin:function(a){this.canvas.applyPreviewFromPlugin(a)},commitChangesFromPlugin:function(a){this.canvas.commitChangesFromPlugin(a)},discardChangesFromPlugin:function(a){this.canvas.discardChangesFromPlugin(a)},resizeCanvas:function(a,b){var c=this.canvas;c.width=a+"px";c.height=b+"px";AV.paintWidgetInstance&&AV.paintWidgetInstance.setDimensions(a,b)},hideCanvas:function(){this.canvas&&
(this.canvas.style.visibility="hidden")},showCanvas:function(){this.canvas&&(this.canvas.style.visibility="visible")},executePlugin:function(){this.canvas.executePlugin()},renderPreview:function(a,b){this.canvas.renderPreview(a,b)},getDynamicPropertyDefaultValue:function(a){return this.canvas.getDynamicPropertyDefaultValue(a)},syncProperty:function(a,b){},syncPreview:function(a){},setCanvasDataArray:function(a,b,c){AV.canvasDataReceiver&&AV.canvasDataReceiver.apply(this,[a,b,c])},setThumb:function(a,
b){},getHistory:function(){return this.canvas.getHistory()},getHiResStickerUrl:function(a){return AV.paintWidgetInstance&&AV.paintWidgetInstance.overlayRegistry?AV.paintWidgetInstance.overlayRegistry.getHiRes(a):null},getImageData:function(b,c){c&&"function"===typeof c&&(a=c);this.canvas.commit({})},getMaxSize:function(){return AV.launchData.maxEditSize||AV.launchData.maxSize},getMaxBitmapSize:function(){return AV.launchData.maxSize},_cropSelectionStarted:function(a,b,c){},_onPreviewRendered:function(a,
b){},_onPluginLoaded:function(a,b){var c=AV.paintWidgetInstance;c.moduleLoadedCallback&&c.moduleLoadedCallback[a]&&c.moduleLoadedCallback[a].resolve()},_onImageLoaded:function(a,b){AV.paintWidgetLauncher_Flash_stage2&&AV.paintWidgetLauncher_Flash_stage2(a,b)},_onGoldenEggComplete:function(){this.goldenEggCallback&&this.goldenEggCallback()},_onCanvasLoaded:function(a){this.canvas=a;this._setupEditing(AV.launchData.url||null)},_onGetImageDataComplete:function(b){a&&(a.apply(this,[b]),a=null)},_setupEditing:function(a){var b=
this.bridge.getPlugins();a=a||this.active_target.src;this.canvas.setup(a,AV.build.proxyServer,b)},_canUndo:function(){return d},_onUndo:function(){this.canvas.undo()},_canRedo:function(){return g},_onRedo:function(){this.canvas.redo()},_onHistoryChange:function(a,b){d=a;g=b;AV.controlsWidgetInstance&&AV.controlsWidgetInstance.layoutNotify(AV.launchData.openType,"updateUndoRedo",[a,b])},setCheckpoint:function(a){this.canvas.setCheckpoint(a)},isACheckpoint:function(a){return this.canvas.isACheckpoint(a)},
undoToCheckpoint:function(){this.canvas.undoToCheckpoint()},redoToCheckpoint:function(){return this.canvas.redoToCheckpoint()},truncateActionList:function(){this.canvas.truncateActionList()},_onError:function(a,b){"BAD_IMAGE"===a&&(AV.paintWidgetCloser(!0),AV.launchData.url&&(a="BAD_URL"));AV.errorNotify(a,b)},init:function(a){AV.FlashAPI.activate(function(){if(!a)return new b;if(a.plugins){for(var c=[],d=a.plugins,e=0;e<d.length;++e){var g=AV.FlashAPI.mapToFlashToolName(d[e]),p=AV.toolDefaults[d[e]];
p&&p.files&&c.push({id:g,presets:p.presetsFlash,files:p.files})}0<c.length&&(a.getPlugins=function(){return c});delete a.plugins}d=function(){};d.prototype=new b;d.prototype.constructor=b;for(var q in a)d.prototype[q]=a[q];return new d}());c.init()},pibeca:c}}()}();
(function(a,d,b){a.AV=a.AV||{};var c=a.AV;c.ImageSizeTracker=function(a){var b=this;b.setImageScaledIndicator=function(){c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"updateImageScaledIndicator")};b.setOrigSize=function(a,d,e){var l;if(a.hiresWidth&&a.hiresHeight)l=parseInt(a.hiresWidth,10),a=parseInt(a.hiresHeight,10);else if(a.hiresUrl)l=d.width,a=d.height;else if(a.displayImageSize)l=e.width,a=e.height;else return null;c.paintWidgetInstance.actions.setOrigSize(l,a);b.setImageScaledIndicator();
return{width:l,height:a}};b.isDisplayingImageSize=function(a){return a.hiresWidth||a.hiresHeight||a.displayImageSize};b.isUsingHiResDimensions=function(a){return a.hiresWidth||a.hiresHeight||a.displayImageSize&&a.hiresUrl}};return a})(this,"undefined"!==typeof window?window:{},"undefined"!==typeof document?document:{});
(function(a,d,b){a.AV=a.AV||{};var c=a.AV,e=c.Events;c.ToolManager=function(a){var f=null,h=function(b,c,d){return a.objectNotify("tool",b,c,d)},k=function(a){null!=a&&(avpw$(".avpw_controlpanel").each(function(){avpw$(this).hide()}),avpw$("#avpw_controlpanel_"+a).show())},l=function(){var b,l=function(l){h(f,"panelWillClose");h(l,"panelWillOpen");e.trigger("canvas:activate",a.panelMode2WidgetMode(l));k(l);h(l,"resetUI");d.setTimeout(function(a){return function(){h(a,"panelDidClose");f=l;h(l,"panelDidOpen");
b=!1}}(f),200);f=l;a.layoutNotify(c.launchData.openType,"disableZoomMode")};return function(a){b||(b=!0,l(a))}}(),n=function(d){if(!a.paintWidget||!a.paintWidget.busy){a.layoutNotify(c.launchData.openType,"showView",["editpanel"]);l(d);c.controlsWidgetInstance.onEggWaitThrobber.stop();if("mobile"==c.launchData.openType){var e;if(e=b.getElementById("avpw_main_"+d))if(e=e.getAttribute("data-header"))b.getElementById("avpw_control_toolname").innerHTML=e}c.usageTracker.addUsage(d)}},p=function(){e.on("tool:open",
t);e.on("tool:close",q);e.on("tool:init",r);e.on("tool:shutdown",v);e.on("tool:commit",u);e.on("tool:cancel",s);e.on("tool:undo",w);e.on("tool:redo",y)},q=function(){a.layoutNotify(c.launchData.openType,"showView",["main"]);l(null)},t=function(b,d){b=c.publicName2PanelMode(b);var f;var h,k=a.activeTools,l=!1;if(k){h=k.length;for(f=0;f<h;f++)if(k[f]===b){l=!0;break}}"forcecrop"===b&&c.launchData.forceCropPreset?f=!0:(l||c.errorNotify("UNSUPPORTED_TOOL",[b]),f=l);if((f||c.launchData.forceCropPreset)&&
a.paintWidget&&!a.paintWidget.moduleLoaded(b,n)&&d)a.onEggWaitThrobber.stop(),a.onEggWaitThrobber.spin(avpw$(d).children(".avpw_icon_waiter")[0]);e.trigger("usage:tool",b,"opened");e.trigger("usage:firstclick",b)},r=function(b){h(b,"init",[a])},u=function(){var a,b=f;b&&(a=h(f,"commit"),!1!==a&&(e.trigger("usage:tool",b,"applied",!0!==a?a:""),e.trigger("tool:commitDone")))},s=function(){h(f,"cancel");e.trigger("usage:tool",f,"canceled")},v=function(a){h(a,"shutdown")},w=function(){e.trigger("usage:tool",
"undo","applied",f||"");a.paintWidget.actions.isACheckpoint()?a.paintWidget.busy||!1===h(f,"onUndo",[{global:!0}])||(a.paintWidget.actions.undoToCheckpoint(),h(f,"onUndoComplete",[{global:!0}])):a.paintWidget.busy||!1===h(f,"onUndo")||(a.paintWidget.actions.undo(),h(f,"onUndoComplete"))},y=function(){e.trigger("usage:tool","redo","applied",f||"");var b;a.paintWidget.busy||!1===h(f,"onRedo",[{global:!0}])?b=!1:(b=a.paintWidget.actions.redoToCheckpoint())&&h(f,"onRedoComplete",[{global:!0}]);b||a.paintWidget.busy||
!1===h(f,"onRedo")||(a.paintWidget.actions.redo(),h(f,"onRedoComplete"))};this.init=p;this.shutdown=function(){e.off("tool:open",t);e.off("tool:close",q);e.off("tool:init",r);e.off("tool:shutdown",v);e.off("tool:commit",u);e.off("tool:cancel",s);e.off("tool:undo",w);e.off("tool:redo",y)};this.notify=h;this.getActiveTool=function(){return f};p();return this};return a})(this,"undefined"!==typeof window?window:{},"undefined"!==typeof document?document:{});
(function(a,d,b){a.AssetManager=function(b,e){var g={EFFECT:"effect",STICKER:"sticker",IMAGEBORDER:"imageborder",PERMISSION:"permission",FONTPACK:"fontpack"},f={},h,k=function(b){var c=b.resourceUrl;c&&(-1===c.indexOf("http")&&(c=a.build.feather_baseURL+c),b.resourceUrl=c)},l=function(b){for(var c=0;c<h.length;c++)for(var d=0;d<b.length;d++)b[d].assetId===h[c].assetId&&(h[c].purchased=!0,a.util.extend(h[c],b[d]),k(h[c]))},n=function(a){var b=[];if(a){a=g[a];for(var c=0;c<h.length;c++)h[c].assetType===
a&&b.push(h[c])}else b=h.slice(0);return b},p=function(b,c){h?c&&c.apply(this,[n(b)]):(f.getPartnerAssets||(f.getPartnerAssets=[],v.authenticate()),f.getPartnerAssets.push(function(d){d&&d.assets?h=d.assets:(a.errorNotify("ERROR_AUTHENTICATING"),r());a.util.nextFrame(function(){if(h){for(var a=0;a<h.length;a++)k(h[a]);c&&c.apply(this,[n(b)])}})}))},q=function(a,b){d.setTimeout(function(){try{return d.avpw_purchase_frame.postMessage("getAssets","*"),f.getAssets=b,!0}catch(a){return!1}},2E3)},t=function(a,
b){if(!h)return q(a,function(c){h=c;for(c=0;c<h.length;c++)k(h[c]);s(a,b)}),!1;try{return d.avpw_purchase_frame.postMessage("getPurchasedAssets","*"),f.getPurchasedAssets=function(c){l(c);b&&b.apply(this,[n(a)])},!0}catch(c){return!1}},r=function(b,c){h=[{needsPurchase:!1,assetId:"default_effects",assetType:"effect",displayName:"Default",resourceUrl:"js/proclist_default_effects.js"},{needsPurchase:!1,assetId:"original_effects",assetType:"effect",displayName:"Original",resourceUrl:"js/proclist_original_effects.js"},
{needsPurchase:!1,assetId:"original_stickers",assetType:"sticker",displayName:"Original",resourceUrl:"js/stickers_original_stickers.js"},{needsPurchase:!1,assetId:"borders",assetType:"imageborder",displayName:"Default Image Borders",resourceUrl:"js/borders_original.js"}];c&&a.util.nextFrame(function(){for(var a=0;a<h.length;a++)k(h[a]);c.apply(this,[n(b)])});return!0},u=function(a){var b,c,d;if(a.messageName&&(d=f[a.messageName]))if("function"===typeof d)d.apply(this,[a.data]);else{c=d.length;for(b=
0;b<c;b++)d[b].apply(this,[a.data])}},s=b?p:e?t:r,v=this;v.getAssets=s;v.getById=function(a){for(var b=0;b<h.length;b++)if(h[b].assetId===a)return h[b]};v.showAssetPurchaseView=function(b,c){var e={messageName:"showAssetPurchaseView",assetId:b},e=a.JSON.stringify(e);try{return d.avpw_purchase_frame.postMessage(e,"*"),f.showAssetPurchaseView=function(){v.showAssetPurchasePopup(b,c)},!0}catch(g){return!1}};v.showAssetPurchasePopup=function(b,c){avpw$("#avpw_purchase_frame").show();a.controlsWidgetInstance.messager.show("avpw_purchase_pack",
!0);avpw$("#avpw_purchase_pack_close").bind("click",v.hideAssetPurchasePopup);f.getPurchasedAssets=function(a){l(a);a=v.getById(b);c&&("function"===typeof c&&a)&&c.apply(this,[a]);v.hideAssetPurchasePopup()}};v.hideAssetPurchasePopup=function(){f.getPurchasedAssets=null;avpw$("#avpw_purchase_frame").hide();a.controlsWidgetInstance.messager.hide("avpw_purchase_pack");avpw$("#avpw_purchase_pack_close").unbind("click",v.hideAssetPurchasePopup)};v.authenticate=function(){var b=function(a){u({messageName:"getPartnerAssets",
data:a})};return function(){return a.controlsWidgetInstance.serverMessaging.sendMessage({id:"avpw_auth_form",action:a.build.partnerAssetURL,method:"POST",dataType:"json",announcer:a.build.asyncFeatherTargetAnnounce,origin:a.build.asyncImgrecvBase,keyValues:{apikey:a.launchData.apiKey,timestamp:a.launchData.timestamp,signature:a.launchData.signature,salt:a.launchData.salt,encryptionmethod:a.launchData.encryptionMethod},callback:b})}}();v.types=g;e&&(d.avpw_purchase_frame||avpw$("#avpw_messaging").append(a.template[a.launchData.layout].inAppPurchaseFrame({src:a.build.inAppPurchaseFrameURL})));
return v}})(window.AV||(window.AV={}),window,document);
(function(a,d,b){a.ServerMessaging=function(c){var e=[],g=function(b,c){var d,f,g=!0,h=e.shift();if(h&&(c&&h.origin&&(g=c===a.util.getDomain(h.origin)),h.id&&(d=avpw$("#"+h.id),f=d.attr("target"),avpw$("#"+f).unbind("load"),avpw$("#"+h.id+"_target_holder").empty(),d.remove()),g&&h.callback)){if(h.dataType&&"json"===h.dataType&&"string"===typeof b)try{b=a.JSON.parse(b)}catch(k){}h.callback.call(this,b)}0<e.length&&q()},f=function(b,c,d,e,f){return avpw$.ajax({url:b,type:c,data:d,dataType:e,error:function(){a.errorNotify("ERROR_SAVING",
[a.build.imgrecvServer])},success:f})},h=function(b,c,d){d||(d=a.build.feather_baseURL+"blank.html");c||(c=b);return['<iframe width="1" height="1" style="position:absolute;left:-9999px;" ','id="'+b+'" name="'+c+'" src="'+d+'">',"</iframe>"].join("")},k=function(a,b,c){if(!a)return null;var d=a+"_target_holder",e="avpw_form_target_"+Math.floor(4294967295*Math.random()).toString(16),f=avpw$("#"+d);if(!f||!f.length)f=avpw$('<div id="'+d+'"></div>').css({position:"absolute",top:0,left:0}).appendTo("#avpw_holder");
f.html(h(e));b?avpw$("#"+e).load(function(){n(e,a,b)}):avpw$("#"+e).load(c);return e},l=function(a,c,d,e,f,g,h){e=k(a,g,h);c+="?responsecontenttypeheader="+escape("text/html");a=avpw$("<form></form>").attr({id:a,action:c,target:e,method:d||"POST"}).css({display:"none"});d=b.createDocumentFragment();for(var l in f)f.hasOwnProperty(l)&&d.appendChild(avpw$("<input></input>").attr({name:l,value:f[l],type:"hidden"})[0]);a.html(d);a.appendTo("#avpw_holder");a.submit();return a},n=function(b,c,e){var f=
c+"_announcer";if(d.postMessage)d[f]?d[f].postMessage("avpw_load:"+b,"*"):(c=avpw$(h(f,f,e)),c.load(function(){a.util.nextFrame(function(){d[f].postMessage("avpw_load:"+b,"*")})}),avpw$("#avpw_holder").append(c));else{var k,l=c+"_observer",n=0;k=avpw$(h(l,l,e+"#"+b))[0];avpw$(k).load(function(){var b;try{if("about:blank"==k.contentWindow.location)return}catch(c){}if(2===n&&(b=k.contentWindow.name))n=3,b!==l&&b.substr&&"avpw:"==b.substr(0,5)?(b=b.substr(5),g(b)):(a.errorNotify("ERROR_SAVING",[a.build.imgrecvServer]),
g()),avpw$(k).unbind().remove();1===n&&(n=2,k.contentWindow.location="");n||(n=1)});avpw$(k).appendTo("#avpw_holder")}},p=function(b){var c=b.data;b=a.util.getDomain(b.origin);c.substr&&"avpw:"==c.substr(0,5)&&(c=c.substr(5),g(c,b))},q=function(){var a=e[0];a&&l(a.id,a.action,a.method,a.origin,a.keyValues,a.announcer)},t=function(a){a.announcer?(e.push(a),1===e.length&&q()):l(a.id,a.action,a.method,a.origin,a.keyValues,a.announcer,a.callback)};this.shutdown=function(){d.removeEventListener?d.removeEventListener("message",
p,!1):d.detachEvent&&d.detachEvent("onmessage",p);e=[]};this.sendMessage=function(b){var c;"xhr"===(b.transport||"xhr")&&avpw$.support.cors&&(!a.firefox||4<=a.firefox)?(c=f(b.action,b.method,b.keyValues,b.dataType,b.callback))||t(b):t(b)};d.addEventListener?d.addEventListener("message",p,!1):d.attachEvent&&d.attachEvent("onmessage",p);return this}})(window.AV||(window.AV={}),window,document);
(function(a,d,b){a.AV=a.AV||{};var c=a.AV,e=c.Events;c.usageTracker=function(){var a=null,f={},h=[],k,l=!1,n={},p=function(){c.controlsWidgetInstance&&n.submit("close")},q=function(){d._gaq=d._gaq||[];if("undefined"===typeof _gat){var a=b.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"==b.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=b.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e)}l||(_gaq.push(["Feather._setAccount",
c.build.googleTracker]),_gaq.push(["Feather._setCustomVar",1,"apikey",c.launchData.apiKey]),_gaq.push(["Feather._setCustomVar",2,"featherversion",c.build.version]),_gaq.push(["Feather._setCustomVar",3,"sessionid",this.getUUID()]),_gaq.push(["Feather._setCustomVar",4,"language",c.launchData.language]),_gaq.push(["Feather._setCustomVar",5,"apiversion",c.launchData.apiVersion+""]),l=!0)},t=function(a,b,c){_gaq.push(["Feather._trackEvent","tool",a+":"+b,c?c+"":""])},r=function(a,b,c){_gaq.push(["Feather._trackEvent",
"interaction",a+":"+b,c?c+"":""])},u=function(a){n.submit("firstclick",a);e.off("usage:firstclick")};n.setup=function(){avpw$(d).bind("unload",p);e.on("usage:submit",n.submit,n);e.on("usage:tool",t,n);e.on("usage:firstclick",u,n);e.on("usage:interact",r)};n.shutdown=function(){avpw$(d).unbind("unload",p);e.off("usage:submit",n.submit);e.off("usage:tool",t);e.off("usage:firstclick",u);e.off("usage:interact",r)};n.clear=function(){a=null;f={};h=[]};n.getUUID=function(){return a?a:a=Math.floor(4294967295*
Math.random()).toString(16)+Math.floor(4294967295*Math.random()).toString(16)};n.addUsage=function(a,b){b||(b=1);f[a]=void 0===f[a]?b:f[a]+b};n.setPageCount=function(a){var b;h=Array(a);for(b=0;b<a;b++)h[b]=0};n.addPageHit=function(a){a!==k&&h[a]++;k=a};n.submit=function(a,b){var d=null,d="",e;q.call(this);"launch"===a?_gaq.push(["Feather._trackPageview"]):_gaq.push(["Feather._trackEvent","submit",a,b]);if(c.controlsWidgetInstance&&c.build.imgtrackServer&&c.JSON){switch(a){case "close":d={dataver:1,
opentype:c.launchData.openType,pagehits:h,toolusage:f};d=c.JSON.stringify(d);break;case "firstclick":d={toolusage:f},d=c.JSON.stringify(d)}e=c.controlsWidgetInstance.serverMessaging.sendMessage({id:"avpw_track_form",action:c.build.imgtrackServer,method:"GET",keyValues:{action:a,sessionid:this.getUUID(),featherversion:c.build.version,apikey:c.launchData.apiKey,toolusagedata:d},callback:function(){c.util.nextFrame(function(){var a=avpw$("#avpw_track_form_target_holder");a&&a.length&&a.empty();e&&(a=
e.attr("target"),avpw$("#"+a).unbind("load"),e.remove())})},transport:"form"})}};return n}();c.getActiveTools=function(a){var b=c.featherUseFlash?c.flashSupportedTools:c.defaultTools,d=a;if(!d||"all"===d||"All"===d||"ALL"===d||""===d)d=b;"string"===typeof d&&(d=a.split(","));a=[];var e,l={},n;for(n=0;n<b.length;n++)e=b[n],l[e]=!0;for(n=0;n<d.length;n++)if(!c.launchData.forceCropPreset||!("resize"===d[n]||"orientation"===d[n]||"crop"===d[n]))e=c.publicName2PanelMode(d[n]),e in l&&a.push(e);return a};
c.paintWidgetGetPopupEmbedDiv=function(a){var c=avpw$("#avpw_canvas_embed_popup");if(a){var d=avpw$(a),e,l,n="top left bottom right margin-top margin-right margin-bottom margin-left border-top border-right border-bottom border-left padding-top padding-right padding-bottom padding-left".split(" "),p={position:"relative"};for(e=0;e<n.length;e++)l=n[e],p[l]=d.css(l);d=avpw$(a).css("display");if(""==d||"inline"==d)d="inline-block";p.display=d;0==c.length&&(c=b.createElement("div"),c.id="avpw_canvas_embed_popup");
avpw$(c).hide().css(p).insertBefore(a)}return c};c.paintWidgetLauncher=function(a,b){if(!c.paintWidgetInstance)return c.usageTracker.clear(),c.featherUseFlash?c.paintWidgetLauncher_Flash(a,b):c.paintWidgetLauncher_HTML(a,b)};c.paintWidgetLauncher_Flash=function(a,f){function h(){avpw$(q).unbind("load",h);c.msie&&7==c.msie&&(avpw$("#avpw_controls").css("visibility","hidden"),avpw$("#avpw_controls").show());c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"placeControls_Flash",[1<c.util.getApiVersion(c.launchData)?
c.launchData.appendTo:void 0]);c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"enableControls");r=c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"getScaledImageDims_Flash",[q]);u=r.width;s=r.height;v=u>s?u:s;c.launchData.maxEditSize=v;c.paintWidgetInstance=new c.PaintWidget(u,s,new c.Actions,new c.ModeManager,new c.FilterManager,new c.OverlayRegistry,new c.ImageBorderManager);c.paintWidgetInstance.setOrigSize(u,s);var b=c.template[c.launchData.layout].flashCanvasBox({id:"avpw_canvas_swf_replace"});
avpw$(t).append(b);c.controlsWidgetInstance.initAllTools.call(c.controlsWidgetInstance);var k={initsize:r,plugins:w,action:{origUrl_:f?f:n.src,sessionID_:c.usageTracker.getUUID(),referrerUrl_:d.location.href,url:c.build.imgrecvServer,name:"file"}};c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"hideOriginalImage",[n]);c.util.nextFrame(function(){c.controlsWidgetInstance.setupScrollPanels()});c.msie&&7==c.msie&&(avpw$("#avpw_controls").hide(),avpw$("#avpw_controls").css("visibility","visible"));
avpw$("#avpw_controls").fadeIn(l);c.launchData.noCloseButton&&avpw$("#avpw_control_cancel_pane").css("display","none");setTimeout(function(){c.FlashAPI.init(k);c.FlashAPI.startEditing(a);c.controlsWidgetInstance.initWithPaintWidget(c.paintWidgetInstance);e.trigger("tool:close");c.controlsWidgetInstance.loaderPhase=1},l)}function k(){c.util.imgOnLoad(q,h);avpw$(q).attr("src",f?f:p)}var l=c.launchData.launchDelay,n=c.util.getImageElem(a),p=n.src,q,t,r,u,s,v,w,y;w=c.getActiveTools(c.launchData.tools);
y=new c.AssetManager(c.launchData.isPremiumPartner,c.launchData.allowInAppPurchase);c.controlsWidgetInstance=new c.ControlsWidget(null,a,w,y,new c.ServerMessaging);c.controlsWidgetInstance.origURL=f?f:avpw$(n).attr("src");avpw$(".avpw_isa_previewcanvas").hide();t=c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"getEmbedElement",[n]);avpw$(t).show();q=b.createElement("img");avpw$(q).css({display:"block",visibility:"hidden",position:"absolute"}).attr("src",f?f:n.src);c.build.bundled?k():
c.util.loadFile(c.build.feather_baseURL+"js/featherpaint_flash.js","js",k)};c.paintWidgetLauncher_Flash_stage2=function(a,b){c.controlsWidgetInstance.loaderPhase=2;c.controlsWidgetInstance.imageSizeTracker.setOrigSize(c.launchData,{width:a,height:b},{width:c.paintWidgetInstance.width,height:c.paintWidgetInstance.height});c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"launchStage2_Flash");c.controlsWidgetInstance.showWaitThrobber(!1);avpw$(c.controlsWidgetInstance.onEggWaitThrobber).hide();
e.trigger("usage:submit","launch");c.fireLaunchComplete()};c.paintWidgetLauncher_HTML=function(a,d){var e=c.launchData.launchDelay,k=c.util.getImageElem(a),l,n,p,q,t;q=c.getActiveTools(c.launchData.tools);c.isRelaunched&&"undefined"!=typeof k.avpw_prevURL&&(d=k.avpw_prevURL);t=new c.AssetManager(c.launchData.isPremiumPartner,c.launchData.allowInAppPurchase);c.controlsWidgetInstance=new c.ControlsWidget(null,a,q,t,new c.ServerMessaging);c.launchData.image instanceof HTMLImageElement&&!d&&(d=a.src);
c.controlsWidgetInstance.origURL=d?d:avpw$(k).attr("src");c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"placeControls",[1<c.util.getApiVersion(c.launchData)?c.launchData.appendTo:void 0]);c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"enableControls");c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"bindEvents");avpw$("#avpw_controls").fadeIn(e);c.util.nextFrame(function(){"mobile"==c.launchData.openType&&c.setPageWidth(avpw$("#avpw_controls").width());c.controlsWidgetInstance.setupScrollPanels()});
c.launchData.noCloseButton&&avpw$("#avpw_control_cancel_pane").css("display","none");if(k&&"canvas"===k.nodeName.toLowerCase())c.mockLauncher(k);else return n=c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"getEmbedElement",[k]),l=b.createElement("img"),l.id="avpw_temp_loading_image",c.tempLoadingImageSrc=l.src,avpw$(l).load(function(){p=c.controlsWidgetInstance.getScaledDims(avpw$(k).width(),avpw$(k).height());l.width=p.width;l.height=p.height;c.controlsWidgetInstance.layoutNotify(c.launchData.openType,
"getScaledImageDims",[l]);avpw$(l).unbind();l.style.display="block";avpw$(n).append(l);c.controlsWidgetInstance.showWaitThrobber(!0);c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"hideOriginalImage",[k]);avpw$(n).show();c.util.nextFrame(function(){c.build.bundled?c.paintWidgetLauncher_stage2(a,d):c.util.loadFile(c.build.feather_baseURL+"js/featherpaint.js","js",function(b){c.paintWidgetLauncher_stage2(a,d)})})}).error(function(){c.paintWidgetCloser(!0);c.errorNotify("BAD_IMAGE",[d])}),
l.src=k.src,!1};c.mockLauncher=function(a){var b=c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"getEmbedElement",[a]);c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"getScaledImageDims",[a]);avpw$(a).detach();avpw$(b).append(a);avpw$(b).show();c.controlsWidgetInstance.showWaitThrobber(!0);c.util.nextFrame(function(){var a=function(){};c.controlsWidgetInstance.initAllTools=function(){for(var a in this.activeTools){var b=this.activeTools[a];this.tool.hasOwnProperty(b)&&e.trigger("tool:init",
b)}};c.controlsWidgetInstance.initWithPaintWidget=function(a){this.paintWidget=a;this.initAllTools();this.bindControls();this.paintWidget.showWaitThrobber=this.showWaitThrobber.AV_bindInst(this)};c.controlsWidgetInstance.loaderPhase=1;c.paintWidgetInstance={moduleLoaded:function(a,b){return b.call(this)},setMode:a,setCurrentLayerByName:a,shutdown:a,actions:{setCheckpoint:a}};c.controlsWidgetInstance.initWithPaintWidget(c.paintWidgetInstance);c.controlsWidgetInstance.showWaitThrobber(!1);c.controlsWidgetInstance.loaderPhase=
2;c.fireLaunchComplete()})};c.paintWidgetLauncher_stage2=function(a,b){var d=c.util.getImageElem(a),k,l,n=function(a){c.controlsWidgetInstance&&c.paintWidgetInstance&&(k=new Image,avpw$.support.cors&&c.launchData.enableCORS&&(k.crossOrigin="Anonymous"),avpw$(k).load(function(a){if(c.controlsWidgetInstance&&c.paintWidgetInstance){l=c.controlsWidgetInstance.getScaledDims(k.width,k.height);c.controlsWidgetInstance.imageSizeTracker.setOrigSize(c.launchData,k,l);k.width=l.width;k.height=l.height;c.paintWidgetInstance.setDimensions(l.width,
l.height);if(!c.paintWidgetInstance.setBackground(k))return c.paintWidgetCloser(!0),c.errorNotify("IMAGE_NOT_CLEAN",[b]),!1;c.paintWidgetInstance.setOrigSize(l.width,l.height);d.src!==b&&c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"scaleCanvas");avpw$(c.paintWidgetInstance.canvas).insertBefore("#avpw_temp_loading_image");p.remove();c.tempLoadingImageSrc=b;c.controlsWidgetInstance.showWaitThrobber(!1);c.controlsWidgetInstance.loaderPhase=2;c.launchData.actionListJSON&&c.paintWidgetInstance.actions.importJSON(c.launchData.actionListJSON,
c.fireLaunchComplete)}}).attr("src",a))};l=c.controlsWidgetInstance.getScaledDims(avpw$(d).width(),avpw$(d).height());c.controlsWidgetInstance.loaderPhase=1;c.paintWidgetInstance=new c.PaintWidget(l.width,l.height,new c.Actions,new c.ModeManager,new c.FilterManager,new c.OverlayRegistry,new c.ImageBorderManager);c.controlsWidgetInstance.canvasUI=new c.PaintUI(c.paintWidgetInstance.canvas,c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"getEmbedElement"));c.controlsWidgetInstance.initWithPaintWidget(c.paintWidgetInstance);
c.paintWidgetInstance.setOrigSize(l.width,l.height);c.controlsWidgetInstance.imageSizeTracker.setOrigSize(c.launchData,d,l);var p=avpw$("#avpw_temp_loading_image");c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"scaleCanvas");if(null!=b)avpw$.support.cors&&c.launchData.enableCORS?n(b):-1===b.indexOf("data:")?avpw$.ajax({type:"GET",dataType:"json",url:c.build.jsonp_imgserver+"?callback=?",data:{url:escape(b)},success:function(a){n(a.data)},error:function(a,d,e){200===a.status&&"parsererror"===
d&&c.controlsWidgetInstance&&(c.controlsWidgetInstance.showWaitThrobber(!1),c.util.nextFrame(function(){c.paintWidgetCloser(!0);c.errorNotify("BAD_URL",[b])}))}}):n(b);else{if(!c.paintWidgetInstance.setBackground(d))return c.paintWidgetCloser(!0),c.launchData.enableCORS&&avpw$.support.cors?c.errorNotify("ERROR_BAD_IMAGE_WITHOUT_CORS"):c.errorNotify("IMAGE_NOT_CLEAN",[b]),!1;avpw$("#avpw_controls").insertAfter(c.paintWidgetInstance.canvas);avpw$(c.paintWidgetInstance.canvas).insertBefore(p);p.remove();
c.tempLoadingImageSrc=d.src;c.controlsWidgetInstance.showWaitThrobber(!1);c.controlsWidgetInstance.loaderPhase=2;c.launchData.actionListJSON&&c.paintWidgetInstance.actions.importJSON(c.launchData.actionListJSON,c.fireLaunchComplete)}e.trigger("usage:submit","launch");c.launchData.actionListJSON||c.fireLaunchComplete();return!1};c.fireLaunchComplete=function(){var a=c.launchData.initTool;a&&(c.util.nextFrame(function(){e.trigger("tool:open",a)}),c.paintWidgetInstance.moduleLoaded(a,function(a){c.util.nextFrame(function(){avpw$("#avpw_holder").removeClass("avpw_init_hide")})}));
if("function"===typeof c.launchData.onReady)c.launchData.onReady()};c.paintWidgetShutdown=function(){e.trigger("usage:submit","close");c.paintWidgetInstance&&c.paintWidgetInstance.shutdown();c.controlsWidgetInstance&&(c.controlsWidgetInstance.serverMessaging&&(c.controlsWidgetInstance.serverMessaging.shutdown(),c.controlsWidgetInstance.serverMessaging=null),c.controlsWidgetInstance.shutdown());c.featherUseFlash&&c.FlashAPI.close();avpw$("#avpw_controls").hide();c.controlsWidgetInstance.layoutNotify(c.launchData.openType,
"onShutdown");if("function"===typeof c.launchData.onClose)c.launchData.onClose(c.paintWidgetInstance.dirty);c.paintWidgetInstance=null;c.controlsWidgetInstance=null;c.tempLoadingImageSrc=null};c.paintWidgetCloser=function(a){var b=c.launchData.closeDelay;c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"onClose",[a]);a||0===b?(avpw$("#avpw_controls").hide(),c.paintWidgetShutdown()):avpw$("#avpw_controls").fadeOut(b,function(){c.paintWidgetInstance&&c.paintWidgetShutdown()})};c.controlsWidget_saveResponder=
function(a,b,d){var k;"function"===typeof a&&(k=a.apply(c.launchData,[c.util.getImageId(c.controlsWidgetInstance.paintImgIdElem),b,d]));c.controlsWidgetInstance&&(c.util.getImageElem(c.controlsWidgetInstance.paintImgIdElem).avpw_prevURL=b,e.trigger("tool:close"),k&&c.controlsWidgetInstance.messager.show("avpw_aviary_beensaved",!0),c.controlsWidgetInstance.paintWidget.dirty=!1,c.controlsWidgetInstance.saving=!1)};c.controlsWidget_onImageSaved=function(a,b){c.controlsWidget_saveResponder(c.launchData.onSave,
a,b)};c.controlsWidget_onHiResImageSaved=function(a){c.controlsWidget_saveResponder(c.launchData.onSaveHiRes,a)};c.ControlsWidget=function(a,b,d,k,l){this.maxHeight=this.maxWidth=parseInt(c.launchData.maxSize);this.saving=!1;this.origURL=null;this.activeTools=d;this.quitCount=0;c.usageTracker.setup();this.paintImgIdElem=b;e.on("layout:resize",this.setupScrollPanels,this);this.layoutNotify(c.launchData.openType,"showView",["main"]);a&&this.initWithPaintWidget(a);a={className:"avpw_tool_spinner",lines:12,
length:6,width:2,radius:6,color:"#fff",speed:0.5,trail:70};"mobile"!=c.launchData.openType&&(a.color="#555",a.length=4);this.waitThrobber=new c.Spinner({className:"avpw_canvas_spinner",lines:12,length:6,width:2,radius:6,color:"#fff",speed:0.5,trail:70});this.onEggWaitThrobber=new c.Spinner(a);this.toolManager=new c.ToolManager(this);this.assetManager=k;this.serverMessaging=l};c.ControlsWidget.prototype.tool={};c.ControlsWidget.prototype.layout={};c.ControlsWidget.prototype.layoutNotify=function(a,
b,c){return this.objectNotify("layout",a,b,c)};c.ControlsWidget.prototype.objectNotify=function(a,b,c,d){return"object"==typeof this[a][b]&&(a=this[a][b],"function"==typeof a[c])?(c=a[c],d||(d=[]),c.apply(a,d)):!0};c.ControlsWidget.prototype.shutdown=function(){this.canvasUI&&this.canvasUI.shutdown();this.messager&&this.messager.hide();e.off("layout:resize",this.setupScrollPanels);this.shutdownAllTools();this.unbindControls();this.toolsPager&&(this.toolsPager.shutdown(),this.toolsPager=null);this.paintWidget&&
(this.paintWidget.showWaitThrobber=null);c.usageTracker.shutdown();this.waitThrobber.stop();this.onEggWaitThrobber.stop();this.onEggWaitThrobber=this.waitThrobber=null;this.showPanel(null);this.toolManager.shutdown();this.toolManager=null};c.ControlsWidget.prototype.initAllTools=function(){c.paintWidgetInstance.filterManager.loadPack("tools");for(var a in this.activeTools){var b=this.activeTools[a];this.tool.hasOwnProperty(b)&&c.paintWidgetInstance.moduleLoaded(b,function(a){e.trigger("tool:init",
a)}.AV_bindInst(this))}c.launchData.forceCropPreset&&c.paintWidgetInstance.moduleLoaded("forcecrop",function(a){e.trigger("tool:init","forcecrop")}.AV_bindInst(this))};c.ControlsWidget.prototype.shutdownAllTools=function(){for(var a in this.activeTools)e.trigger("tool:shutdown",this.activeTools[a])};c.ControlsWidget.prototype.bindControls=function(){};c.ControlsWidget.prototype.unbindControls=function(){};c.ControlsWidget.prototype.initWithPaintWidget=function(a){this.paintWidget=a;this.imageSizeTracker=
new c.ImageSizeTracker(a.actions);c.featherUseFlash||this.initAllTools();this.bindControls();this.paintWidget.showWaitThrobber=this.showWaitThrobber.AV_bindInst(this)};c.ControlsWidget.prototype.showWaitThrobber=function(a,b){if(a){var e=this.layoutNotify(c.launchData.openType,"getEmbedElement");e.is(":visible")&&(this.waitThrobber.spin(e[0]),avpw$(this.waitThrobber).fadeIn(300))}else avpw$(this.waitThrobber.el).fadeOut(300,this.waitThrobber.stop);b&&d.setTimeout(b,5)};c.publicName2PanelMode=function(a){"stickers"===
a&&(a="overlay");"draw"===a&&(a="drawing");"text"===a&&!c.featherUseFlash&&(a="textwithfont");return a};c.ControlsWidget.prototype.panelMode2WidgetMode=function(a){switch(a){case "rotate":return"rotate90";case "greeneye":return"redeye";case "pinch":return"bulge"}return a};c.ControlsWidget.prototype.setupScrollPanels=function(){if(this.activeTools&&this.activeTools.length){var a,b,d=this,k=this.layoutNotify(c.launchData.openType,"getDims").TOOLS_BROWSER_WIDTH,l={itemCount:this.activeTools.length,itemsPerPage:this.layoutNotify(c.launchData.openType,
"getToolsPerPage"),pageWidth:k,leftArrow:avpw$("#avpw_lftArrow"),rightArrow:avpw$("#avpw_rghtArrow"),itemBuilder:function(e){a=d.activeTools[e];b=c.util.getUserFriendlyToolName(a);b=c.getLocalizedString(b);return c.template[c.launchData.layout].eggIcon({optionName:a,capOptionName:b})},pageTemplate:c.template[c.launchData.layout].genericScrollPanel,pipTemplate:c.template[c.launchData.layout].scrollPanelPip,lastPageTemplate:void 0,lastPageContents:{},pageContainer:avpw$("#avpw_control_main_scrolling_region"),
pipContainer:avpw$("#avpw_tools_pager ul"),onPageChange:function(a){c.usageTracker.addPageHit(a)}};d.toolsPager=new c.Pager(l);avpw$("#avpw_control_main_scrolling_region").css("width",d.toolsPager.getPageCount()*k+"px");this.assetManager.getAssets("PERMISSION",function(a){var b=!0;if(a)for(var f=0;f<a.length;f++)if(a[f]&&"whitelabel"===a[f].assetId){b=!1;break}b&&(avpw$("#avpw_powered_branding").html(c.template[c.launchData.layout].poweredByFooterLogo).click(function(){e.trigger("modal:show","avpw_aviary_aviaryfeedback",
!1,!1)}),d.toolsPager.shutdown(),d.toolsPager=new c.Pager(l),avpw$("#avpw_control_main_scrolling_region").css("width",d.toolsPager.getPageCount()*k+"px"),d.toolsPager.changePage())});c.usageTracker.setPageCount(d.toolsPager.getPageCount());d.toolsPager.changePage()}};c.ControlsWidget.prototype.messager=function(){var a={},b,h,k,l={show:function(e,k,l){b=b||avpw$("#avpw_messaging");h=h||avpw$("#avpw_messaging_inner");e=a[e]||(a[e]=avpw$("#"+e));h.append(e);b.fadeIn(150);k?(b.data("needsConfirmation",
!0),c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"disableControls")):(b.data("needsConfirmation",!1),l||d.setTimeout(this.hide,1E3))},hide:function(e,h){b=b||avpw$("#avpw_messaging");k=k||avpw$("#avpw_messages");if(e){var l=a[e];l&&k.append(l)}else avpw$.each(a,function(a,b){k.append(b)});b.data("needsConfirmation")?(d.setTimeout(function(){h&&h()},400),c.controlsWidgetInstance&&c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"enableControls")):(b.hide(),h&&h())},addMessage:function(a){k=
k||avpw$("#avpw_messages");a&&(k[0].innerHTML+=a)}};e.on("modal:show",l.show);e.on("modal:hide",l.hide);return l}();c.ControlsWidget.prototype.orientationChanged=function(a){};c.ControlsWidget.prototype.windowResized=function(){var a=null;return function(b){d.clearTimeout(a);a=d.setTimeout(function(){e.trigger("layout:resize");a=null},500)}}();c.ControlsWidget.prototype.Slider=function(a){var b=!1,c=function(c,d){!b&&a.onstart&&a.onstart.apply(this,[c,d])},d=function(c,d){!b&&a.onchange&&a.onchange.apply(this,
[c,d])},e=function(c,d){!b&&a.onslide&&a.onslide.apply(this,[c,d])},n=avpw$(a.element).slider({range:"min",max:a.max,min:a.min,value:a.defaultValue||a.max/2,delay:a.delay});this.getValue=function(){return n.slider("value")};this.setValue=function(a){return n.slider("value",a)};this.reset=function(c){b=!0;this.setValue(a.defaultValue);b=!1};this.addListeners=function(){n.bind("slidestart",c).bind("slidechange",d).bind("slide",e)};this.removeListeners=function(){n.unbind("slidestart").unbind("slide").unbind("slidechange")};
this.shutdown=function(){n.slider("destroy")};return this};c.ControlsWidget.prototype._drawUICircle=function(a,b,d,e,l){c.featherUseFlash||this._drawUICircle_HTML(a,b,d,e,l)};c.ControlsWidget.prototype._drawUICircle_HTML=function(a,b,d,e,l){a=avpw$(a)[0];var n=a.getContext("2d");n.clearRect(0,0,a.width,a.height);l&&"transparent"!==e&&this._drawUIGrid(n,a.width,a.height);n.globalCompositeOperation="source-over";null!=d?(l&&("transparent"==d||c.util.color_is_white(d)||null==e)?n.strokeStyle="#444":
n.strokeStyle=d,d=3):(n.strokeStyle="rgba(0,0,0,0)",d=1);n.lineWidth=d;n.beginPath();n.arc(a.width/2,a.height/2,b,0,2*Math.PI,!0);n.stroke();n.closePath();null!=e&&(n.save(),n.clip(),l&&"transparent"==e?this._drawUIGrid(n,a.width,a.height):(n.fillStyle=e,n.fillRect(0,0,a.width,a.height)),n.restore())};c.ControlsWidget.prototype._drawUIGrid=function(a,b,c,d){var e;d||(d=5);for(e=0;e<c+d;e+=d)for(b=0;b<c+d;b+=d)a.fillStyle=1==(b+e&1)?"#fff":"#ddd",a.fillRect(b,e,d,d)};c.ControlsWidget.prototype.showPanel=
function(a){null!=a&&(avpw$(".avpw_controlpanel").each(function(){avpw$(this).hide()}),avpw$("#avpw_controlpanel_"+a).show())};c.ControlsWidget.prototype.save=function(){var a=null,b=!0,h=function(){return{apikey:c.launchData.apiKey,timestamp:c.launchData.timestamp,signature:c.launchData.signature,salt:c.launchData.salt,encryptionmethod:c.launchData.encryptionMethod}},k=function(a,b){var d=c.controlsWidgetInstance;d.layoutNotify(c.launchData.openType,"enableControls",[!0]);d.paintWidget.showWaitThrobber(!1);
a?(avpw$(c.util.getImageElem(d.paintImgIdElem)).avpw_prevURL=a,c.controlsWidget_onHiResImageSaved(a)):(c.errorNotify("ERROR_SAVING",[c.build.asyncImgrecvBase,b]),c.controlsWidgetInstance.saving=!1)},l=function(a){var b,d,e,f="";if("string"===typeof a)b=a.split("---FEATHER-POSTMESSAGE---"),d=b[0],b=b[1];else if(e=avpw$(a).find("error"),0<e.length)f=e.text();else{if(e=avpw$(a).find("url"))d=e.text(),d=d.replace(/^\s+|\s+$/g,"");if(a=avpw$(a).find("hiresurl"))b=a.text(),b=b.replace(/^\s+|\s+$/g,"")}a=
c.controlsWidgetInstance;a.layoutNotify(c.launchData.openType,"enableControls",[!0]);a.paintWidget.showWaitThrobber(!1);d?(avpw$(c.util.getImageElem(a.paintImgIdElem)).avpw_prevURL=d,c.controlsWidget_onImageSaved(d,b)):(c.errorNotify("ERROR_SAVING",[c.build.imgrecvServer,f]),c.controlsWidgetInstance.saving=!1)},n=function(){var a=this;a.paintWidget.exportImage(null,function(b){var d=b.indexOf(";",0),e=b.indexOf(",",d);b.slice(5,d);b=b.slice(e+1);c.controlsWidgetInstance.serverMessaging.sendMessage({id:"avpw_save_form",
action:c.build.imgrecvServer,method:"POST",announcer:c.build.featherTargetAnnounce,origin:c.build.imgrecvBase,keyValues:c.util.extend(h(),{file:b,postdata:c.launchData.postData,posturl:c.launchData.postUrl,sessionid:c.usageTracker.getUUID(),actionlist:a.paintWidget.actions.exportJSON(!0),origurl:a.origURL,hiresurl:c.launchData.hiresUrl,contenttype:c.launchData.fileFormat,jpgquality:c.launchData.jpgQuality,debug:c.launchData.debug,asyncsave:c.launchData.asyncSave,usecustomfileexpiration:c.launchData.useCustomFileExpiration,
encodedas:"base64text"}),callback:l})})},p=function(){var e=c.util.extend(h(),{actionlist:this.paintWidget.actions.exportJSON(!0),origurl:c.launchData.hiresUrl,fileformat:c.launchData.fileFormat,notificationmethod:"GET",backgroundcolor:"0xffffffff",jpgquality:c.launchData.jpgQuality}),l=function(c){!c||c&&"JobFailed"===c.JobStatusCode?(k(null),d.clearInterval(a)):c&&"JobCompleted"===c.JobStatusCode&&(d.clearInterval(a),k(c.JobStatus));b=!0};c.controlsWidgetInstance.serverMessaging.sendMessage({id:"avpw_save_form",
action:c.build.asyncImgrecvCreateJob,method:"POST",dataType:"json",announcer:c.build.asyncFeatherTargetAnnounce,origin:c.build.asyncImgrecvBase,keyValues:e,callback:function(e){var n;e&&e.JobId?(n=e.JobId,a=d.setInterval(function(){b&&c.controlsWidgetInstance.serverMessaging.sendMessage({id:"avpw_save_form",action:c.build.asyncImgrecvGetJobStatus,method:"POST",dataType:"json",announcer:c.build.asyncFeatherTargetAnnounce,origin:c.build.asyncImgrecvBase,keyValues:c.util.extend(h(),{jobid:n}),callback:l});
b=!1},1E3)):k(null)}})},q=function(a,b,d){this.paintWidget.exportImage(d,function(d){var e=c.controlsWidgetInstance;e.saving=!1;e.layoutNotify(c.launchData.openType,"enableControls",[!0]);e.paintWidget.showWaitThrobber(!1);a&&"function"===typeof a&&(b?b=!1===a(d)?!1:!0:a(d));b&&c.util.nextFrame(function(){c.controlsWidget_onImageSaved(e.origURL)})})},t=function(a,b,d,e){var f=!c.featherUseFlash;f&&this.layoutNotify(c.launchData.openType,"disableControls");this.paintWidget.showWaitThrobber(f,function(){switch(a){case "saveHiRes":p.call(g);
break;case "getImageData":q.call(g,b,d,e);break;default:n.call(g)}});var g=this;return!1};return function(a,b,d,f){if(2>c.controlsWidgetInstance.loaderPhase||this.saving)return!1;e.trigger("tool:commit");e.trigger("tool:close");this.saving=!0;c.prevActionList=this.paintWidget.actions.exportJSON(!0);c.launchData.postData&&"string"!==typeof c.launchData.postData&&(c.launchData.postData=c.JSON.stringify(c.launchData.postData));return t.apply(this,[a,b,d,f])}}();c.ControlsWidget.prototype.onSaveButtonClicked=
function(a){e.trigger("usage:submit","saveclicked");return"function"===typeof c.launchData.onSaveButtonClicked&&!1===c.launchData.onSaveButtonClicked.apply(c.launchData,[c.util.getImageId(c.controlsWidgetInstance.paintImgIdElem)])?!1:c.controlsWidgetInstance.save()};c.ControlsWidget.prototype.showAreYouSure=function(){this.messager.show("avpw_aviary_quitareyousure",!0)};c.ControlsWidget.prototype.cancel=function(a){this.quitCount++;a=0<this.quitCount&&this.paintWidget&&this.paintWidget.dirty;if("function"===
typeof c.launchData.onCloseButtonClicked&&!1===c.launchData.onCloseButtonClicked.apply(c.launchData,[a]))return!1;a?this.showAreYouSure():c.paintWidgetCloser();return!1};c.ControlsWidget.prototype.getScaledDims=function(a,b){return c.util.getScaledDims(a,b,this.maxWidth,this.maxHeight)};c.TransformStyle=function(a){var b=a||"";this.set=function(a){if(b)for(var c in a){var d=!1;b=b.replace(RegExp(c+"\\([^\\)]*"),function(b,e,f){d=!0;return c+"("+a[c]});d||(b+=" "+c+"("+a[c]+")")}else for(c in a)b+=
" "+c+"("+a[c]+")"};this.serialize=function(){return b};return this};return a})(this,"undefined"!==typeof window?window:{},"undefined"!==typeof document?document:{});
(function(a,d,b){a.errorNotify=function(b,d){var g={BAD_IMAGE:{code:1,message:"There was a problem loading your image provided to the `image` config key. Either it's not actually an image file or it doesn't really exist."},UNSUPPORTED:{code:2,message:"It looks like you're using a browser that doesn't support the HTML canvas element (and also doesn't have Flash installed either). Please try accessing this page through a modern browser like Chrome, Firefox, Safari, or Internet Explorer (version 9 or higher). Your internets will thank you."},BAD_URL:{code:3,
message:"There was a problem loading your image provided by URI to the `url` config key. It is not reachable by the public (and our service at "+(a.featherUseFlash?a.build.proxyServer:a.build.imgrecvBase)+")"},UNSUPPORTED_TOOL:{code:4,message:"So sorry, but this tool is not available because it is not part of the set chosen with the `tools` config key. It's alternatively possible that your browser does not support this specific tool."},IMAGE_NOT_CLEAN:{code:5,message:"Uh oh! We can't edit this image because the editor wasn't set up correctly to load external files via their address. You must either provide images from the same domain as the web page with the editor OR pass the external image address via the `url` config key in order for Aviary to be able to get permission from the browser to open it for editing. Sorry for the inconvenience!"},
UNSUPPORTED_FONT:{code:6,message:"So sorry, but this font looks to be unsupported by your browser or platform"},ERROR_SAVING:{code:7,message:"There was a problem saving your photo. Please try again."},NO_APIKEY:{code:8,message:"apiKey is required and not provided. See http://www.aviary.com/web-documentation#constructor-config-apikey."},ERROR_AUTHENTICATING:{code:9,message:"There was a problem retrieving access to content from our server. Please ensure all authentication keys are present or do not attempt premium partner authentication."},
ERROR_BAD_THEME:{code:10,message:"Selected theme does not exist. Please use 'dark', 'light' or 'minimum' or see aviary.com/web for more info."},ERROR_BAD_IMAGE_WITHOUT_CORS:{code:11,message:"The image URL you are trying to use is either not on the same domain or is not configured for CORS. See http://enable-cors.org/ for more info."}}[b],f=g.message;"function"===typeof a.launchData.onError&&(g.args=d,f=a.launchData.onError(g)||f);return f}})(window.AV||(window.AV={}),window,document);
(function(a,d,b){a.AV=a.AV||{};var c=a.AV,e=c.Events;a.Aviary=c;c.feather_loaded=!1;c.feather_loading=!1;c.build=c.build||{version:"",imgrecvServer:"imgrecvserver",flashGatewayServer:"",imgrecvBase:"",inAppPurchaseFrameURL:"",imgtrackServer:"imgtrackserver",filterServer:"",jsonp_imgserver:"",featherTargetAnnounce:"feather_target_announce_v3.html",proxyServer:"",feather_baseURL:"",feather_stickerURL:"",googleTracker:"",MINIMUM_FLASH_PLAYER_VERSION:"10.2.0"};c.defaultTools="enhance effects frames overlay crop resize orientation focus brightness contrast saturation warmth sharpness colorsplash drawing textwithfont redeye whiten blemish".split(" ");
c.flashSupportedTools="enhance effects overlay crop resize orientation brightness contrast saturation sharpness drawing text redeye blemish".split(" ");c.baseConfig={image:null,apiKey:void 0,apiVersion:1,appendTo:null,language:"en",theme:null,minimumStyling:!1,maxSize:800,noCloseButton:!1,launchDelay:300,closeDelay:300,forceCropPreset:null,tools:void 0,initTool:"",cropPresets:["Custom","Original",["Square","1:1"],"3:2","3:5","4:3","4:5","4:6","5:7","8:10","16:9"],cropPresetDefault:"Custom",cropPresetsStrict:!1,
url:null,enableCORS:!1,postUrl:void 0,postData:null,fileFormat:"",jpgQuality:100,displayImageSize:!1,hiresMaxSize:1E4,hiresWidth:null,hiresHeight:null,onLoad:void 0,onReady:void 0,onSaveButtonClicked:void 0,onSave:void 0,onSaveHiRes:void 0,onClose:void 0,onError:void 0,signature:null,timestamp:null,hiresUrl:void 0,useCustomFileExpiration:!1,allowInAppPurchase:!1,forceFlash:!1,forceSupport:!1,poweredByURL:"http://www.aviary.com",giveFeedbackURL:"http://support.aviary.com/",getWidgetURL:"http://www.aviary.com",
debug:!1,asyncSave:!0};(function(a){var b=function(a){return{language:a.Feather_Language,forceFlash:a.Feather_ForceFlash,forceSupport:a.AV_Feather_ForceSupport,onLoad:a.Feather_OnLoad,onReady:a.Feather_OnLaunchComplete,onClose:a.Feather_OnClose,onSave:a.Feather_OnSave,noCloseButton:a.Feather_NoCloseButton,maxSize:a.Feather_MaxSize||a.Feather_MaxDisplaySize,tools:a.Feather_EditOptions,cropPresets:a.Feather_CropSizes,resizePresets:a.Feather_ResizeSizes,apiKey:a.Feather_APIKey,hiresUrl:a.Feather_HiResURL,
postUrl:a.Feather_PostURL,fileFormat:a.Feather_FileFormat||a.Feather_ContentType,jpgQuality:a.Feather_FileQuality,signature:a.Feather_Signature,timestamp:a.Feather_Timestamp}};c.baseConfig=c.util.extend(c.baseConfig,b(a));if("https:"==a.location.protocol||"chrome-extension:"==a.location.protocol){var d,e;for(e in c.build)d=e.split("_SSL"),2===d.length&&c.build[e]&&(d=d[0],c.build[d]=c.build[e])}(a.Feather_Theme||a.Feather_OpenType||a.Feather_APIKey)&&c.util.nextFrame(function(){var d=new c.Feather(c.baseConfig);
a.aviaryeditor=function(e,h,k,t){c.launchData=c.util.extend(c.baseConfig,b(a));e=c.util.extend(c.launchData,{image:e,url:h,postData:k,appendTo:t});d.launch(e)};a.aviaryeditor_close=d.close;a.aviaryeditor_relaunch=d.relaunch;a.aviaryeditor_activatetool=d.activateTool;a.aviarynewimage=d.replaceImage})})(d);c.getLocalizedString=function(a){try{var b=c.lang[c.launchData.language][a];void 0===b&&(b=a);return b}catch(d){}return a};Function.prototype.AV_bindInst=function(a){var b=this;return function(){return b.apply(a,
arguments)}};c.injectControls=function(){var a,d;"popup"==c.launchData.openType?(a="",d=c.template[c.launchData.layout].saveBlock()):(a=c.template[c.launchData.layout].saveBlock(),d="");if(c.criticalLayoutStyles&&!c.feather_loaded){var e=b.createElement("style");e.type="text/css";var k=b.createTextNode(c.criticalLayoutStyles);e.styleSheet?e.styleSheet.cssText=k.nodeValue:e.appendChild(k);b.getElementsByTagName("head")[0].appendChild(e)}a=c.template[c.launchData.layout].controls({internalSaveBlock:a,
externalSaveBlock:d});d=b.createElement("div");d.id="avpw_holder";e="";c.featherUseFlash&&(e="avpw_flash ");c.msie&&(e+="avpw_ie"+c.msie);e&&(d.className=e);(e=b.getElementsByTagName("body"))&&(e=e[0]);e||(e=b.documentElement);e.appendChild(d);d.innerHTML=a};c.Feather=function(a){var f=this,h=function(){c.injectControls();c.util.nextFrame(c.loadStageFinal)},k=function(){"undefined"!==typeof avpw$?avpw$(b).ready(h):h()};a&&(a.openType="aviary",a.layout="desktop");a=a||{};c.launchData=c.util.extend(c.baseConfig,
a);a=function(){function a(b){c.util.loadFile(c.build.feather_baseURL+"css/"+b+".css","css")}var b,d;c.featherUseFlash=!c.featherHtmlOk()&&c.featherFlashOk();c.launchData.language=c.launchData.language.toLowerCase();!c.feather_loaded&&!c.feather_loading&&(c.feather_loading=!0,b=c.launchData.language||"en",d="js/feathercontrols_desktop",d=c.validLanguages&&c.validLanguages[b]?d+("_"+b+".js"):d+"_en.js",c.launchData.minimumStyling?a("feather_core"):a("feather_theme_aviary"),c.util.loadFile(c.build.feather_baseURL+
"images/aviary_atlas.png","img"),c.build.bundled?k():c.util.loadFile(c.build.feather_baseURL+d,"js",k))};var l=function(){var a,b;c.featherUseFlash=!c.featherHtmlOk()&&c.featherFlashOk();c.launchData.language=c.launchData.language.toLowerCase();if(!c.feather_loaded&&!c.feather_loading){c.feather_loading=!0;a=c.launchData.language||"en";b="js/feathercontrols_desktop";b=c.validLanguages&&c.validLanguages[a]?b+("_"+a+".js"):b+"_en.js";!c.launchData.theme&&c.launchData.minimumStyling&&(c.launchData.theme=
"minimum");"minimum"==c.launchData.theme&&(c.launchData.minimumStyling=!0);c.launchData.theme||(c.launchData.theme="dark");switch(c.launchData.theme){case "dark":case "light":case "minimum":break;default:c.errorNotify("ERROR_BAD_THEME")}a=c.launchData.minimumStyling?"feather_core_":"feather_theme_aviary_";a+=c.launchData.theme;c.util.loadFile(c.build.feather_baseURL+"css/"+a+".css","css");c.build.bundled?k():c.util.loadFile(c.build.feather_baseURL+b,"js",k)}};if(2===c.util.getApiVersion(c.launchData)){c.build.feather_baseURL=
d.location.protocol+"//feather.aviary.com/2.6.2.184/";c.build.feather_baseURL_SSL=d.location.protocol+"//dme0ih8comzn4.cloudfront.net/2.6.2.184/";if("https:"==d.location.protocol||"chrome-extension:"==d.location.protocol)for(var n in c.build)l=n.split("_SSL"),2===l.length&&c.build[n]&&(l=l[0],c.build[l]=c.build[n]);a()}else l();var p=function(){if(c.paintWidgetInstance)return!1;c.paintWidgetLauncher(c.launchData.image,c.launchData.url)};f.launch=function(a){if(!c.feather_loaded)return!1;var d=b.getElementById("avpw_holder");
d||c.injectControls();if(c.paintWidgetInstance){if(d)return!1;f.close(!0)}a&&a.language&&delete a.language;c.launchData=a?c.util.extend(c.launchData,a):c.launchData;if(!c.launchData.image)return c.errorNotify("BAD_IMAGE"),!1;"object"===typeof a.forceCropPreset?(c.launchData.forceCropPreset=[a.forceCropPreset],c.launchData.initTool="forcecrop"):c.launchData.forceCropPreset=null;c.launchData.initTool&&(d.className="avpw_init_hide");if(c.featherUseFlash)p();else{if(!c.featherSupported())return c.errorNotify("UNSUPPORTED")&&
(c.controlsWidgetInstance=new c.ControlsWidget,c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"placeControls",[1<c.util.getApiVersion(c.launchData)?c.launchData.appendTo:void 0]),c.controlsWidgetInstance.bindControls(),b.getElementById("avpw_controls").style.display="block",c.controlsWidgetInstance.messager.show("avpw_aviary_unsupported",!0)),!0;c.util.nextFrame(p)}return!0};f.showWaitIndicator=function(){return c.controlsWidgetInstance&&c.controlsWidgetInstance.showWaitThrobber?(c.controlsWidgetInstance.showWaitThrobber(!0),
!0):!1};f.hideWaitIndicator=function(){return c.controlsWidgetInstance&&c.controlsWidgetInstance.showWaitThrobber?(c.controlsWidgetInstance.showWaitThrobber(!1),!0):!1};f.getImageDimensions=function(){var a=null;if(c.paintWidgetInstance&&(a=c.paintWidgetInstance.getScaledSize(),!c.launchData.hiresWidth||!c.launchData.hiresHeight))delete a.hiresWidth,delete a.hiresHeight;return a};f.save=function(){return!c.paintWidgetInstance?!1:c.controlsWidgetInstance.save()};f.saveHiRes=function(){return!c.paintWidgetInstance?
!1:c.controlsWidgetInstance.save("saveHiRes")};f.getImageData=function(a,b,d){return!c.paintWidgetInstance?!1:c.controlsWidgetInstance.save("getImageData",a,b,d)};f.close=function(a){if(!c.paintWidgetInstance)return!1;c.paintWidgetCloser(a)};f.relaunch=function(){e.trigger("usage:interact","api","relaunch");c.isRelaunched=!0;if(c.launchData)f.launch(c.launchData);else return!1};f.activateTool=function(a){e.trigger("tool:open",a,c.controlsWidgetInstance)};f.replaceImage=function(a){e.trigger("usage:interact",
"api","replaceImage");if(c.launchData)f.close(!0),c.util.nextFrame(function(){c.launchData.url=a;f.launch(c.launchData)});else return!1};f.updateConfig=function(a,b){if(c.launchData)if(a&&"object"===typeof a)for(var d in a)a.hasOwnProperty(d)&&(c.launchData[d]=a[d]);else if(a&&"string"===typeof a)c.launchData[a]=b;else return!1;else return!1};f.getIsDirty=function(){return c.paintWidgetInstance?c.paintWidgetInstance.dirty:!1};f.getActionList=function(){if(c.paintWidgetInstance)return e.trigger("tool:commit"),
c.paintWidgetInstance.actions.exportJSON(!0)};f.disableControls=function(){c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"disableControls")};f.enableControls=function(){c.controlsWidgetInstance.layoutNotify(c.launchData.openType,"enableControls")};f.on=function(a,b){if(e&&a&&b&&"function"===typeof b)e.on(a,b)};f.off=function(a,b){e&&(a&&b&&"function"===typeof b)&&e.off(a,b)};return f};c.loadStageFinal=function(){c.feather_loaded=!0;if("function"===typeof c.launchData.onLoad)c.launchData.onLoad()};
c.featherSupported=function(){return c.featherHtmlOk()||c.featherFlashOk()||c.launchData.forceSupport};c.featherFlashOk=function(){return c.launchData.forceFlash?!0:avpw_swfobject&&avpw_swfobject.hasFlashPlayerVersion(c.build.MINIMUM_FLASH_PLAYER_VERSION)};c.featherHtmlOk=function(){if(c.launchData.forceFlash)return!1;var a=!!b.createElement("canvas").getContext,e="function"===typeof d.postMessage;return a&&e};c.getFlashMovie=function(a){return d[a]||b[a]};c.msie=function(){for(var a=3,c=b.createElement("div"),
d=c.getElementsByTagName("i");c.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",d[0];);return 4<a?a:void 0}();c.firefox=function(){var a;"Gecko"===d.navigator.product&&(a=navigator.userAgent.split("Firefox/")[1],a=parseInt(a,10));return a}();c.PAGE_WIDTH=360;c.setPageWidth=function(a){c.PAGE_WIDTH=a};return a})(this,"undefined"!==typeof window?window:{},"undefined"!==typeof document?document:{});
(function(a,d,b){a.support=function(a){var d=a.navigator.userAgent,g=a.screen.width;a={0:/Android/i,1:/webOS/i,2:/iPhone/i,3:/iPod/i,4:/BlackBerry/i,5:/iPad/i};var f,h=0,k=0,l=0,n;for(n in a)d.match(a[n])&&(f=parseInt(n));d.match(/AppleWebKit/i)&&(h=1);0===f&&(k=1);1===k&&(d=d.match(/Android [0-9].[0-9]/).toString())&&(l=parseFloat(d.split("Android ")[1]));d={isAppleWebkit:function(){return 1===h},isMobileWebkit:function(){return 1===h&&g&&(480>=g||0<l&&2.3>=l)},isIPhoneOrIPod:function(){return 2===
f||3===f},isAndroid:function(){return 1===k},getAndroidVersion:function(){return l}};d.getVendorProperty=function(){var a={};return function(c){var d;if(!(d=a[c])){a:{var e=b.createElement("div");d=c;var f=["webkit","ms","Moz","O"],g,h=e.style;if(void 0===h[d]){d=d.charAt(0).toUpperCase()+d.slice(1);for(g=0;g<f.length;g++)if(e=f[g]+d,void 0!==h[e]){d=e;break a}d=void 0}}d=a[c]=d}return d}}();return d}(d)})(window.AV||(window.AV={}),window,document);YUI.add("thirdparty-aviary",function(a){},"3.1");
YUI.add("squarespace-layout-snapshot",function(a){a.Node.create("<div></div>").setStyles({position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(255, 0, 0, 0.5)",zIndex:1E7})},"1.0",{requires:["squarespace-dialog-text-area"]});YUI.add("squarespace-content-item-types-post-editors",function(a){},"1.0",{requires:[]});
YUI.add("squarespace-form-utils",function(a){var d=a.namespace("Squarespace.FormUtils");d.setData=function(b,c){a.Lang.isValue(c)&&a.Array.each(b,function(b){var d=c[b.get("name")];a.Lang.isUndefined(d)||b.set("data",d)})};d.getData=function(b){b=b||[];return a.Array.reduce(b,{},function(b,d){var g=d.get("data");!a.Lang.isUndefined(g)&&a.Lang.isValue(d.get("name"))&&(b[d.get("name")]=g);return b})};d.template=function(b,c){a.Lang.isArray(c)?a.Array.each(c,function(a){var c=a.get("name"),d=b.one('[data-field-name="'+
c+'"]');d?a.render(d):console.warn('No target node found for widget "'+c+'".')}):a.Lang.isObject(c)&&a.Object.each(c.groups||{},function(c,d){var f=b.one('[data-field-group="'+d+'"]');f&&a.Array.each(c,function(a){a.render(f)})})};d.validate=function(b){return a.Array.reduce(b,{},function(b,d){if(a.Lang.isFunction(d.getErrors)){var g=d.getErrors();g.length&&(b[d.get("name")]=g[0])}return b})};d.showErrors=function(b,c){a.Array.each(b,function(b){var d=c[b.get("name")];a.Lang.isValue(d)&&""!==d&&a.Lang.isFunction(b.showError)&&
b.showError(d)})}},"1.0",{requires:["node","array-extras"]});
YUI.add("squarespace-block-image",function(a){var d=["caption-hidden","caption-below","caption-overlay","caption-overlay-hover"];a.namespace("Squarespace.ContentModel").ImageBlock=a.Base.create("ImageBlockModel",a.Model,[],{sync:function(b,c,d){("create"===b||"update"===b)&&(new a.Squarespace.Models.ContentItem({id:this.get("imageId"),filename:this.get("filename")})).save({fields:["filename"]});d()},toJSON:function(){return{imageId:this.get("imageId"),linkTo:this.get("linkTo"),newwindow:this.get("newwindow"),
lightbox:this.get("lightbox"),vSize:this.get("vSize"),aspectRatio:this.get("aspectRatio"),layout:this.get("layout"),stretch:this.get("stretch"),description:this.get("description"),floatDir:this.get("floatDir"),hSize:this.get("hSize")}}},{ATTRS:{layout:{value:"caption-below",validator:a.Squarespace.AttrValidators.isValueIn(d)},linkTo:{value:""},newwindow:{value:!1},lightbox:{value:!1},stretch:{value:!1},filename:{value:null},description:{setter:function(b){return a.Lang.isString(b)?{engine:"wysiwyg",
source:"",html:b}:b},value:{engine:"wysiwyg",source:"",html:""}}}});a.namespace("Squarespace.Block").Image=a.Base.create("block-image",a.Squarespace.Block.ParentBase,[],{initializer:function(){this.LOG=new a.Squarespace.Debugger({output:!1,name:"BlockImage",uid:!0})},renderUI:function(b){b=this.get("model");b.toJSON();a.Lang.isValue(b.layout)&&b.layout.get("collectionId");this.contentImage=this.add({childType:a.Squarespace.Content.Image,editable:this.get("editable"),model:this._getImageContentModelJSON()}).item(0);
this.contentImage.set("editing",!0);this.contentImage.addTarget(this);this.contentCaption=this.add({childType:a.Squarespace.Content.Html,editable:this.get("editable"),model:this._getHTMLContentModelJSON(),placeholderText:"Enter a caption&hellip;",type:"small"}).item(0);this.contentCaption.get("boundingBox").addClass("sqs-image-caption");this._renderCaptionOrientation()},_renderCaptionOrientation:function(){var b=this.get("boundingBox"),c=this.get("editController").isMobileApp()?"caption-below":this.get("model").get("layout");
a.Array.each(d,function(a){b.removeClass("layout-"+a)},this);b.addClass("layout-"+c)},_getImageContentModelJSON:function(){var b=this.get("model"),c={imageId:b.get("imageId"),aspectRatio:b.get("aspectRatio"),scale:b.get("scale"),collectionId:a.Lang.isValue(b.layout)?b.layout.get("collectionId"):null,stretch:b.get("stretch")},d=b.get("vSize");a.Lang.isValue(d)&&(c.vSize=d);this.get("editController").isMobileApp()&&b.get("image")&&(c.baseAssetUrl=b.get("image.assetUrl"),c.dimensions=b.get("image.originalSize"),
c.focalPoint=b.get("image.mediaFocalPoint"));return c},_getHTMLContentModelJSON:function(){return{html:this.get("model").get("description.html")||""}},bindUI:function(){var b=this.get("model"),c=this.contentImage.get("model"),d=this.contentCaption.get("model");a.Array.each(["imageId","scale"],function(a){c.after(a+"Change",function(c){c.silent||(this.LOG.log("syncing to image block model "+a+"Change (prevVal: "+c.prevVal+") (newVal: "+c.newVal+")"),b.set(a,c.newVal))},this)},this);c.on("aspectRatioChange",
function(a){a.silent||(this.LOG.log("syncing `aspectRatio` to image block model (prevVal: "+a.prevVal+") (newVal: "+a.newVal+")"),b.set("aspectRatio",a.newVal))},this);d.on("htmlChange",function(a){b.set("description.html",a.newVal)});b.after("lightboxChange",this._syncLightbox,this);this.after("editableChange",this.syncUI,this);d=b.get("vSize");if(a.Lang.isValue(d))b.on("vSizeChange",function(a){c.set("vSize",a.newVal)});b.after("stretchChange",function(){c.set("stretch",b.get("stretch"))});b.after("layoutChange",
function(){this._renderCaptionOrientation()},this);b.after("filenameChange",function(a){c.setItemData({filename:a.newVal})})},syncUI:function(){var a=this.get("model").get("layout"),c=this.contentCaption;this.get("editable")?c.show():"caption-hidden"===a||!c.get("model").get("html")?c.hide():c.show();this._syncLightbox()},_syncLightbox:function(){var b=this.get("model");this.get("contentBox").unplug(a.Squarespace.Lightbox2Plug.NS);if(!this.get("editable")&&b.get("lightbox")){var c=this.contentImage.get("model"),
d=c.get("dimensions"),b=b.get("description.html"),g=a.Node.create("<img/>");g.setAttribute("data-src",c.get("baseAssetUrl"));g.setAttribute("data-image-focal-point",c.get("focalPoint"));a.Lang.isObject(d)&&g.setAttribute("data-image-dimensions",d.width+"x"+d.height);this.get("contentBox").plug(a.Squarespace.Lightbox2Plug,{lightboxOptions:{content:g,meta:b||""}})}}},{CSS_PREFIX:"sqs-block-image",MODEL:a.Squarespace.ContentModel.ImageBlock,ATTRS:{stack:{},type:{value:5},editor:{valueFn:function(){return a.Squarespace.Block.Editor.Image}},
mobileEditor:{valueFn:function(){return a.Squarespace.Block.Editor.ImageMobile}},emailEditor:{valueFn:function(){return a.Squarespace.Block.Editor.ImageEmail}}}})},"1.0",{requires:"base model squarespace-ss-widget squarespace-block-base squarespace-block-content-image squarespace-gallery-ng widget-parent".split(" ")});
YUI.add("squarespace-external-image-picker",function(a){var d=a.namespace("Squarespace.Widgets").ExternalImagePicker=a.Base.create("externalImagePicker",a.Squarespace.SSWidget,[a.WidgetParent],{initializer:function(a){if(!a.scrapeUrl)throw this.name+": A scrapeUrl is required in the initialization config.";},renderUI:function(){d.superclass.renderUI.call(this);this._imagePicker=new a.Squarespace.Widgets.ImagePicker({hideOnSelect:this.get("hideOnSelect"),"strings.noImages":"No large images available at that URL."});
this.after(this.get("id")+"|hideOnSelectChange",function(a){this._imagePicker.set("hideOnSelect",a.newVal)},this);this.add(this._imagePicker)},bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("id");this._imagePicker.after(a+"|selectedImageURLChange",function(a){this._set("selectedImageURL",a.newVal)},this);this._imagePicker.after(a+"|cancel",function(a){this.fire("cancel")},this);this.on(a+"|visibleChange",this._updateVisibility,this)},syncUI:function(){d.superclass.syncUI.call(this);
this._scrapeUrl()},_scrapeUrl:function(){this._imagePicker.set("dataState",this._imagePicker.getProperty("DATA_STATES").LOADING);a.Data.post({url:"/api/scrape/LocateInterestingTags",data:{url:this.get("scrapeUrl")},success:function(a){this._showLargeImages(a.images)},failure:function(a){a=this._imagePicker.getProperty("DATA_STATES").LOAD_FAILED;this._imagePicker.set("dataState",a)}},this)},_showLargeImages:function(b){if(b&&0===b.length)this._imagePicker.setLoadedState();else{var c=this.get("id"),
d=new a.Squarespace.AsyncTaskSynchronizer({completionCallback:function(a){this._imagePicker.setLoadedState()},callbackContext:this}),g=this.get("minimumImageDimensions"),f=[];a.Array.each(b,function(b){var k=new a.Squarespace.Image({src:b,loadOnSrcChange:!1});k.after(c+"|loadCompleteChange",function(a){!k.get("loadFailed")&&(k.get("width")>=g.width&&k.get("height")>=g.height)&&(a=this._imagePicker.get("imageURLs"),a.push(b),this._imagePicker.set("imageURLs",a))},this);d.add(k,"loadCompleteChange");
f.push(k)},this);a.Array.each(f,function(a){a.load()},this)}},_updateVisibility:function(a){a.silent||a.newVal===a.prevVal||(a.preventDefault(),this._imagePicker.after(this.get("id")+"|visibleChange",function(a){this.set("visible",a.newVal,{silent:!0})},this),a.newVal?this._imagePicker.show():this._imagePicker.hide())},show:function(){d.superclass.show.call(this);this.set("visible",!0)},hide:function(){d.superclass.hide.call(this);this.set("visible",!1)}},{CSS_PREFIX:"sqs-external-image-picker",ATTRS:{visible:{value:!1},
scrapeUrl:{value:"",writeOnce:"initOnly"},minimumImageDimensions:{writeOnce:"initOnly",value:{height:150,width:150}},selectedImageURL:{value:null,readOnly:!0},hideOnSelect:{value:!0}}})},"1.0",{requires:["base","base-build","squarespace-image-picker","squarespace-async-task-synchronizer","squarespace-image"]});
YUI.add("squarespace-content-collection-utils",function(a){a.namespace("Squarespace").ContentCollectionUtils={groupCollectionsByTypeName:function(d){for(var b={},c=0;c<d.length;c++){var e=d[c];if(!e.get("isDemoCollection")){e=e.get("typeName");if(!b[e]){var g=a.Squarespace.Singletons.Template.get("collectionConfigs."+e);b[e]={title:g?g.get("title"):"Unknown",collections:[]}}b[e].collections.push(d[c])}}return a.Object.values(b)},getIconClassNames:function(a){var b=a.getTemplateConfiguration(),c="";
b&&b.get("supported")&&(c=b.get("icon"));""===c&&(c=a.get("typeName"));return c},filterCollections:function(d,b){var c=["collectionType","ordering","folder"];return a.Squarespace.ContentCollectionCache.filter(function(e){if(a.Lang.isArray(b)&&-1!==b.indexOf(e.get("id"))||e.get("isDemoCollection"))return!1;var g=!0,f=e.getTemplateConfiguration(),h;for(h in d)if(g=d[h],a.Lang.isArray(g)||(g=[g]),g=a.Array.some(g,function(b,d){var g=h,p=-1!==c.indexOf(g),q=a.Lang.isValue(f)&&f.get(g)===b,g=e.get(g)===
b;return p?q:g}),!g)break;return g})},isTemplatePage:function(d){return d.get("type")===a.Squarespace.CollectionTypes.TEMPLATE_PAGE},isIndex:function(d){return(d=d.getTemplateConfiguration())&&d.get("folderBehavior")==a.Squarespace.FolderBehavior.INDEX?!0:!1},isAdjustablePageSizeCollection:function(d){return!this.isIndex(d)&&d.get("type")==a.Squarespace.CollectionTypes.GENERIC&&this._getCollectionOrdering(d)==a.Squarespace.CollectionOrdering.CHRONOLOGICAL},_getCollectionOrdering:function(a){return a.get("ordering")||
a.getTemplateConfiguration().get("ordering")},isPostableByEmailAddress:function(d){var b=this._getCollectionOrdering(d);return!this.isIndex(d)&&d.get("type")==a.Squarespace.CollectionTypes.GENERIC&&b!==a.Squarespace.CollectionOrdering.CALENDAR&&b!==a.Squarespace.CollectionOrdering.CUSTOM&&b!==a.Squarespace.CollectionOrdering.MUSIC_ALBUM},isSupportedByBookmarklet:function(d){return!this.isIndex(d)&&d.get("type")==a.Squarespace.CollectionTypes.GENERIC&&this._getCollectionOrdering(d)==a.Squarespace.CollectionOrdering.CHRONOLOGICAL},
hasSupportForInjectableCodePerItem:function(d){return!this.isIndex(d)&&d.get("type")==a.Squarespace.CollectionTypes.GENERIC&&this._getCollectionOrdering(d)==a.Squarespace.CollectionOrdering.CHRONOLOGICAL},hasSupportForSyndication:function(d){return!this.isIndex(d)&&d.get("type")==a.Squarespace.CollectionTypes.GENERIC&&this._getCollectionOrdering(d)==a.Squarespace.CollectionOrdering.CHRONOLOGICAL},isDemoCollectionId:function(d){var b=Static.SQUARESPACE_CONTEXT.demoCollections;return!b?!1:!!a.Array.find(b,
function(a){return a.collectionId==d})},isGenericOrProduct:function(d){d=d.getTemplateConfiguration();var b=a.Squarespace.CollectionTypes;return!d?!1:!1===d.get("folder")&&(d.get("collectionType")===b.PRODUCT||d.get("collectionType")===b.GENERIC)},isProduct:function(d){var b=d.getTemplateConfiguration(),c=a.Squarespace.CollectionTypes;return!b||d.get("isDemoCollection")?!1:!1===b.get("folder")&&b.get("collectionType")===c.PRODUCT},isPage:function(d){d=d.getTemplateConfiguration();var b=a.Squarespace.CollectionTypes;
return!d?!1:!1===d.get("folder")&&d.get("collectionType")===b.PAGE},isNotCalendar:function(d){return d.getTemplateConfiguration().get("ordering")===a.Squarespace.CollectionOrdering.CALENDAR?!1:!0}}});
YUI.add("squarespace-layout-help",function(a){a.namespace("Squarespace.Layout").Help={_hasCompletedMemberTutorial:function(d){var b=a.merge(Static.SQUARESPACE_CONTEXT.authenticatedAccount.tutorialsCompleted,Static.SQUARESPACE_CONTEXT.websiteSettings.tutorialsCompleted);return!(!b||!b.welcome||!b[d])},_markTutorialCompleted:function(d){a.Data.post({url:"/api/config/MarkMemberTutorialCompleted",data:{tutorial:d}},this);a.Lang.isObject(Static.SQUARESPACE_CONTEXT.authenticatedAccount.tutorialsCompleted)||
(Static.SQUARESPACE_CONTEXT.authenticatedAccount.tutorialsCompleted={});Static.SQUARESPACE_CONTEXT.authenticatedAccount.tutorialsCompleted[d]=!0},showIfNeeded:function(){this._hasCompletedMemberTutorial("le2-welcome")||(this._markTutorialCompleted("le2-welcome"),a.Squarespace.Help.showLayoutEngine2Welcome())}}});
YUI.add("squarespace-block-gallery-editor",function(a){a.namespace("Squarespace.Block.Editor").Gallery=a.Base.create("galleryEditor",a.Squarespace.Block.Editor.Dialog,[],{initializer:function(d){var b=this.get("host"),c=this._host.get("model"),e=this.configDialog.get("dialog");e.on("ready",function(){e.getField("options").after("options-changed",this._syncGallery,this)},this);c.after("change",function(a){a="slider"===c.get("design");this.set("resizable",a)},this);this.onHostEvent("resized",function(a){"columnChanged"===
a.source&&"slideshow"===c.get("design")&&b._setWidgetContent()},this);this.onHostEvent("dropped",function(c){c.oldCol!==a.Squarespace.Block.Utils.getColumnWidth(b.get("contentBox"))&&b._setWidgetContent()},this);this.afterHostEvent(["dropped","resized","widget:contentUpdate"],this.refreshGallery,this);this.beforeHostMethod("_renderBlock",this._lockBlockHeight,this);this.onHostEvent("widget:contentUpdate",function(a){this._host.requestingContent||this._unlockBlockHeight()},this);this.configDialog.on("gallery-refresh",
b._renderBlock,b)},_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.Gallery")},_lockBlockHeight:function(){var a=this._host.get("boundingBox");a.test(".sqs-locked-height")||(a.addClass("sqs-locked-height"),a.setStyles({maxHeight:a.get("region").height,overflow:"hidden"}))},_unlockBlockHeight:function(a){a=this._host.get("boundingBox");a.removeClass("sqs-locked-height");a.setStyles({maxHeight:null,overflow:null})},_setExtraDesignStyles:function(){var a=
this._model.getAttrs();switch(a.design){case "grid":this.configDialog.renderGridCSS(this.get("host").get("contentBox"),a);break;case "slideshow":this.configDialog.renderSlideshowCSS(this.get("host").get("contentBox"),a)}},refreshGallery:function(){this._setExtraDesignStyles();var a=this.get("host").get("contentBox").one(".sqs-gallery");a&&a.getData("gallery").refresh()},isSlider:function(){return"slider"===this.get("host").get("model").get("design")},_syncGallery:function(a,b){var c=a.get("name");
this.configDialog.get("dialog").getField("options").get("currentDesign");var e=this._host.get("contentBox");this.configDialog.syncGalleryOptions(c,e)}},{NS:"blockEditor",ATTRS:{resizeNode:{valueFn:function(){return this.get("host").get("boundingBox")}},resizable:{valueFn:function(){return this.isSlider()}}}})},"1.0",{requires:"base squarespace-block-editor-dialog squarespace-block-mixin-gallery-option-sync squarespace-content-collection-utils squarespace-damask-context-globals squarespace-dialog-content-item-grid squarespace-dialog-gallery-options squarespace-dialog-multi-frame squarespace-dialog-multi-option squarespace-gallery-option-synchronizer squarespace-models-content-collection squarespace-plugin-actionoverlay".split(" ")});
YUI.add("squarespace-dialog-variants-pricing-placeholder",function(a){a.namespace("Squarespace");var d=a.namespace("Squarespace.DialogFields").VariantsPricingPlaceholder=a.Base.create("variantsPricingPlaceholder",a.Squarespace.DialogFields.PricingPlaceholder,[],{initializer:function(){},syncUI:function(){d.superclass.syncUI.call(this);this._setVariantCount()},_setVariantCount:function(){var b=this.get("data.variants").length;0===b&&(b=1);b=1>=b?"":a.Node.create('<span class="separator">-</span>'+
b+" variants");this.get("contentBox").one(".variant-count").setHTML(b)},_getHBTemplateContext:function(){var a=d.superclass._getHBTemplateContext.call(this);a.hasVariants=!0;return a}},{CSS_PREFIX:"sqs-variants-pricing-placeholder",ATTRS:{strings:{value:{title:"Pricing & Variants",prompt:"Edit"}}}})},"1.0",{requires:["squarespace-dialog-pricing-placeholder"]});
YUI.add("squarespace-models-content-stats",function(a){a.namespace("Squarespace.Models");a.Squarespace.Models.ContentStats=a.Base.create("contentStats",a.Model,[a.Squarespace.ModelSync.REST],{root:a.Squarespace.REST_API_ROOT+"content-stats",getTagsAsStringArray:function(){return this._toNameArray(this.get("tagList"))},getCategoriesAsStringArray:function(){return this._toNameArray(this.get("categoryList"))},_toNameArray:function(d){var b=[];a.Lang.isArray(d)&&a.Array.each(d,function(c){a.Lang.isString(c.name)&&
b.push(c.name)});return b}},{ATTRS:{id:{value:null,validator:a.Lang.isString},websiteId:{value:null,validator:a.Lang.isString},collectionId:{value:null,validator:a.Lang.isString},tagList:{value:[],validator:a.Lang.isArray},categoryList:{value:[],validator:a.Lang.isArray}}});a.Squarespace.Models.ContentStatsList=a.Base.create("contentStatsList",a.ModelList,[a.Squarespace.ModelSync.REST],{model:a.Squarespace.Models.ContentStats,getByCollectionId:function(a){var b;this.each(function(c){c.get("collectionId")===
a&&(b=c)});return b}});a.Squarespace.ContentStatsCache=new a.Squarespace.Models.ContentStatsList},"1.0",{requires:["base","model","model-list","squarespace-util","squarespace-model-sync-rest"]});
YUI.add("squarespace-string-utils",function(a){var d=/^[\s]*$/,b=a.namespace("Squarespace").StringUtils={isBlank:function(a){return d.test(a.replace(RegExp("[\\u200B-\\u200D\\uFEFF]","g"),""))},isEmpty:function(a){return!a.replace(RegExp("[\\u200B-\\u200D\\uFEFF]","g"),"")},trim:function(a){var b=RegExp("(^[\\u200B-\\u200D\\uFEFF]+|[\\u200B-\\u200D\\uFEFF]+$)","g");return a.trim().replace(b,"")},toCamelCase:function(b,d){if(!b||!a.Lang.isString(b))return"";var g=0;b=b.split(/[_|\s]/);!0!==d&&(b[g]=
b[g].toLowerCase(),g++);for(g;g<b.length;g++)b[g]=b[g].charAt(0).toUpperCase()+b[g].substr(1).toLowerCase();return b.join("")},toUpperCamelCase:function(a){return b.toCamelCase(a,!0)},getPluralizedString:function(b,d,g){if(a.Lang.isNumber(b)&&1<b){if(g)return g;d=d.replace(/(?:s|x|z|sh|[^aeiou]ch|(fe?)|([^aeiou])y)$/i,function(a,b,c){return b?"ve":c?c+"ie":a+"e"})+"s"}return d}}});
YUI.add("uploader",function(a,d){var b=a.config.win;b&&b.File&&b.FormData&&b.XMLHttpRequest?a.Uploader=a.UploaderHTML5:a.SWFDetect.isFlashVersionAtLeast(10,0,45)?a.Uploader=a.UploaderFlash:(a.namespace("Uploader"),a.Uploader.TYPE="none")},"3.17.2",{requires:["uploader-html5","uploader-flash"]});
YUI.add("squarespace-block-gallery-model-editor",function(a){a.namespace("Squarespace.Block.ModelEditorDialog").Gallery=a.Base.create("blockGalleryModelEditorDialog",a.Squarespace.ModelEditorDialog,[a.Squarespace.Block.Mixins.Gallery],{initializer:function(d){d=a.Squarespace.ContentCollectionCache;0===d.size()&&(d.after("load",this._syncPlugin,this),d.load());var b=this.get("dialog");b.on("ready",function(a){this._bindTransientEvents()},this);b.on("tab-focused",function(a){"content"===a.tabName?b.getField("transientGallery").enableDragSelection():
b.getField("transientGallery").disableDragSelection()},this)},sanitizeDialogData:function(d){a.Object.hasKey(d,"options")&&(d=a.merge(d,d.options),delete d.options);switch(d.methodOption){case "existing":d.collectionId=d.existingGallery;d.existingGalleryId=d.existingGallery;break;case "transient":d.collectionId=d.transientGallery.get("id");d.transientGalleryId=d.transientGallery.get("id");break;default:console.warn("Invalid method options chose: "+d.methodOption)}"slider"!==d.design?d.aspectRatio=
null:delete d.aspectRatio;d.vSize=null;delete d.methodFrame;delete d.transientGallery;return d},getDialogData:function(){var d=this.get("model").toJSON(),b=a.merge(d,{options:d,methodOption:d.methodFrame=this._usesTransientCollection()?"transient":"existing"}),c="Gallery Block "+a.Squarespace.Utils.getGuid(),d={id:d.transientGalleryId||null,typeName:"gallery-block",type:a.Squarespace.CollectionTypes.GALLERY_BLOCK,title:c,navigationTitle:c,urlId:a.Squarespace.Utils.getGuid(),ordering:a.Squarespace.CollectionOrdering.USER,
enabled:!0};b.transientGallery=new a.Squarespace.Models.ContentCollection(d);this.get("model").get("transientGallery").get("id")||this.get("model").set("transientGallery",d,{silent:!0});return b},_usesTransientCollection:function(){var d=this.get("model").get("collectionId");return d?(d=a.Squarespace.ContentCollectionCache.getById(d),-1===a.Squarespace.ContentCollectionCache.filter(function(b){b=b.getTemplateConfiguration();return!(!b||!(b.get("collectionType")==a.Squarespace.CollectionTypes.GENERIC&&
b.get("ordering")==a.Squarespace.CollectionOrdering.USER))}).indexOf(d)):!0},_bindTransientEvents:function(){this.get("model").getAttrs();var d=this.get("dialog").getField("transientGallery"),b=d.get("data");b.isNew()&&(b.once("save",function(){var a=b.get("id");this.get("model").setAttrs({collectionId:a,transientGalleryId:a})},this),d.set("uploadPreflight",a.bind(function(a){b.save({},function(){a()})},this)));b.items.after("create add remove reordered group-reordered *:mediaProcessingStateChange bulk-remove".split(" "),
this._transientGalleryChanged,this);b.items.after("*:mediaFocalPointChange",this._refreshFocalPoints,this)},_transientGalleryChanged:function(a){a.onReorder||"bulk-remove"===a.source||this.fire("gallery-refresh")},_refreshFocalPoints:function(d){var b=a.one('img[data-image-id="'+d.target.get("id")+'"]');if(a.Lang.isNull(b))console.warn("Gallery Block: Could not find image to refresh focalPoint.");else if(b=b.loader)b.set("focalPoint",d.target.get("mediaFocalPoint")),b.fire("refresh")},_getDefaultDialogConfiguration:function(){var d=
this.get("dialog");return{title:"Edit Gallery",width:500,height:{$valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?564:520}},name:"editGalleryBlock",closeOthers:!1,className:"block-configuration",style:"flyout",flyoutPointerDirection:"hidden",draggable:9!==a.UA.ie&&10!==a.UA.ie,loadingText:"Editing Gallery &hellip;",initialDataByReference:!0,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Gallery",tabTitle:"Content",
icon:"/universal/images-v6/icons/icon-gallery-16-light-solid.png",name:"content",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.MultiOption,config:{name:"methodOption",optionClickCb:{$valueFn:function(){return function(a){d.getField("methodFrame").switchFrames(a)}}},options:[{value:"transient",title:"Upload Media",icon:"upload-media"},{value:"existing",title:"Use Existing Gallery",icon:"existing-gallery"}]}},{ctor:a.Squarespace.DialogFields.MultiFrame,config:{name:"methodFrame",width:440,height:{$valueFn:function(){return a.Squarespace.Utils.isDamaskEnabled()?
390:420}},frames:[{name:"transient",fields:[{ctor:a.Squarespace.DialogFields.ContentItemGrid,config:{collectionConfiguration:{acceptTypes:["image","video"],addText:"Add Media"},name:"transientGallery",showAddIcon:!0,renderOnShow:!0,pageSize:200,addText:"Add Content","contentItemImageOptions.actionOverlayButtons":[a.Squarespace.ActionOverlayButtons.IMAGE_INFO,a.Squarespace.ActionOverlayButtons.EDIT_IMAGE,a.Squarespace.ActionOverlayButtons.REMOVE_IMAGE],dataState:"loading"}}]},{name:"existing",fields:[{ctor:a.Squarespace.DialogFields.ContentIdSelector,
config:{name:"existingGallery",showCollectionTagsAndCategories:!1,showGroupTitles:!1,emptyMessage:"There are no existing gallery collections.",collectionFilter:{collectionType:a.Squarespace.CollectionTypes.GENERIC,ordering:a.Squarespace.CollectionOrdering.USER,folder:!1}}}]}]}}]},{title:"Edit Gallery",icon:"/universal/images-v6/icons/icon-gallery-16-light-solid.png",tabTitle:"Design",name:"design",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.GalleryOptions,name:"options",config:{options:{$valueFn:a.bind(this._getGalleryOptions,
this)},width:450}}]}]}},_getDefaultContent:function(){var d=this._defaultGalleryOptions();return a.merge(d,{methodOption:"transient"})}},{ATTRS:{dialogConfig:{getter:"_getDefaultDialogConfiguration",validator:a.Lang.isObject}}})},"1.0",{requires:"base squarespace-block-mixin-gallery-option-sync squarespace-models-content-collection squarespace-content-collection-utils squarespace-plugin-actionoverlay squarespace-gallery-option-synchronizer squarespace-dialog-content-item-grid squarespace-dialog-gallery-options squarespace-dialog-multi-option squarespace-dialog-multi-frame squarespace-block-editor-dialog".split(" ")});
YUI.add("squarespace-content-item-types-base-panel",function(a){a.namespace("Squarespace.ContentItemEditor");var d=a.Squarespace.ContentItemEditor.BasePanel=a.Base.create("ContentItemEditorPanel",a.Squarespace.ModelEditorPanel,[a.Squarespace.Mixins.CustomSanitizer],{initializer:function(a){this.publish("fields-rendered",{emitFacade:!0})},renderUI:function(){this.get("contentBox").append(this.get("targetNode"));d.superclass.renderUI.call(this)},getFieldData:function(){var b=this.get("model"),c=this.get("model").toJSON();
c.workflow={state:a.Squarespace.ContentItemUtils.getWorkflowStateIdentifier(c.workflowState),date:c.publishOn};c.commenting={state:a.Squarespace.ContentItemUtils.getCommentStateIdentifier(c.commentState),date:c.commentDisableOn};c.mainImage=b;c.gallery=b;c.clickthroughUrl&&(c.clickthroughUrl={url:c.clickthroughUrl});this.setDataForCustomType(c,this.getCustomTypeConfiguration(),this);return c},sanitizeFieldData:function(b){delete b.author;delete b.mainImage;this._normalizeDates(b);this._attachCommentingToData(b);
this._attachWorkflowToData(b);b.tags=b.tags||[];b.categories=b.categories||[];delete b.id;delete b.gallery;a.Lang.isObject(b.clickthroughUrl)&&(b.clickthroughUrl=b.clickthroughUrl.url);this.sanitizeDataForCustomType(b,this.getCustomTypeConfiguration(),this);return b},getCustomTypeConfiguration:function(){var b,c=this.get("model").get("customContent.customType");a.Lang.isValue(c)&&(b=a.Squarespace.Singletons.Template.get("customTypes."+c));return b||null},_getWorkflowStateForString:function(b){return a.Object.getValue({published:a.Squarespace.WorkflowStates.PUBLISHED,
scheduled:a.Squarespace.WorkflowStates.SCHEDULED,needsreview:a.Squarespace.WorkflowStates.NEEDS_REVIEW,draft:a.Squarespace.WorkflowStates.DRAFT},b)},_attachWorkflowToData:function(a){a.workflowState=this._getWorkflowStateForString(a.workflow.state);a.publishOn=a.workflow.date;delete a.workflow},_attachCommentingToData:function(b){b.commentState=a.Squarespace.CommentStates["allow"===b.commenting.state?"ENABLED":"DISABLED"];b.commentDisableOn=b.commenting.date;delete b.commenting},_normalizeDates:function(b){a.Array.each("addedOn publishOn updatedOn commentDisableOn startDate endDate".split(" "),
function(c,d){a.Lang.isDate(b[c])?b[c]=b[c].getTime():a.Lang.isNumber(b[c])&&console.warn(c+" should really be a date. Should fix this.")},this)},_routeAction:function(a){switch(a){case "saveAndPublish":this._publishPost();break;default:d.superclass._routeAction.call(this,a)}},_getTemplateContext:function(){var b=this.get("model").toJSON(),c=this.get("model").get("collectionId");a.Squarespace.ContentCollectionCache.getCollectionById(c,function(a){b.urlPrefix="/"+a.get("urlId")+"/"});b.presentationName=
this.get("strings.presentationName");b.model=this.get("model");b.editor=this;return b},getTemplateContext:function(){var a=this._getTemplateContext();this.sanitizeTemplateContextForCustomType(a,this.getCustomTypeConfiguration());return a},_publishPost:function(){var b=this.get("panel");this.get("model").set("workflowState",a.Squarespace.WorkflowStates.PUBLISHED);var b=b.getField("workflow"),c=b.getValue();b.setValue({state:"published",date:c.date?c.date:(new Date).getTime()});this._saveAndClose()}},
{CSS_PREFIX:"sqs-content-item-editor-panel",ATTRS:{makeContext:{value:a.Squarespace.ContentItemEditorSettings},strings:{value:{presentationName:"Item"}},targetNode:{value:a.Node.create('<div class="settings-panel-fields">')}}})},"1.0",{requires:"base node squarespace-content-item-types-enum-record-type squarespace-content-item-types-mixin-custom-sanitizer squarespace-content-item-types-settings squarespace-content-item-utils squarespace-dialog-description squarespace-enum squarespace-model-editor-panel squarespace-models-content-collection squarespace-models-content-item squarespace-models-template".split(" ")});
YUI.add("overlay",function(a,d){a.Overlay=a.Base.create("overlay",a.Widget,[a.WidgetStdMod,a.WidgetPosition,a.WidgetStack,a.WidgetPositionAlign,a.WidgetPositionConstrain])},"3.17.2",{requires:"widget widget-stdmod widget-position widget-position-align widget-stack widget-position-constrain".split(" "),skinnable:!0});
YUI.add("squarespace-dialog-site-user-service-connect",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.SiteUserServiceConnect=a.Base.create("siteUserServiceConnect",a.Squarespace.DialogFields.ServiceConnect,[],{initializer:function(){this.get("contentBox").addClass("sqs-service-connect-content")},bindUI:function(){d.superclass.bindUI.call(this);this.get("contentBox").on("click",function(a){var c=!!this.get("data.connected");a=a.target;c&&a.hasClass("icon")?this._disconnect():
c||this._connect()},this)},syncUI:function(){d.superclass.syncUI.call(this);this.get("boundingBox").toggleClass("connected",this.get("data.connected"))},_connect:function(){var a=this.get("data")||{};a.connected=!0;this.set("data",a)},_disconnect:function(){var a=this.get("data")||{};a.connected=!1;this.set("data",a)}},{CSS_PREFIX:"sqs-site-user-service-connect",HANDLEBARS_TEMPLATE:"dialog-site-user-service-connect.html",ATTRS:{strings:{value:{title:"Newsletters"}}}})},"1.0",{requires:"base squarespace-util squarespace-ui-base squarespace-dialog-service-connect squarespace-dialog-site-user-service-connect-template squarespace-dialog-text".split(" ")});
(function(a,d,b,c,e,g){function f(a,b){var c=typeof a[b];return"function"==c||!!("object"==c&&a[b])||"unknown"==c}function h(){if(!r(navigator.plugins)&&"object"==typeof navigator.plugins["Shockwave Flash"]){var a=navigator.plugins["Shockwave Flash"].description;a&&(!r(navigator.mimeTypes)&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)&&(Q=a.match(/\d+/g))}if(!Q){var b;try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),
Q=Array.prototype.slice.call(b.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1)}catch(c){}}if(!Q)return!1;a=parseInt(Q[0],10);b=parseInt(Q[1],10);$=9<a&&0<b;return!0}function k(){if(!C){C=!0;for(var a=0;a<F.length;a++)F[a]();F.length=0}}function l(a,b){C?a.call(b):F.push(function(){a.call(b)})}function n(){var a=parent;if(""!==I)for(var b=0,c=I.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function p(a){var b=a.toLowerCase().match(B);a=b[2];var c=b[3],b=b[4]||"";if("http:"==a&&":80"==
b||"https:"==a&&":443"==b)b="";return a+"//"+c+b}function q(a){a=a.replace(S,"$1/");if(!a.match(/^(http||https):\/\//)){var c="/"===a.substring(0,1)?"":b.pathname;"/"!==c.substring(c.length-1)&&(c=c.substring(0,c.lastIndexOf("/")+1));a=b.protocol+"//"+b.host+c+a}for(;E.test(a);)a=a.replace(E,"");return a}function t(a,b){var c="",d=a.indexOf("#");-1!==d&&(c=a.substring(d),a=a.substring(0,d));var d=[],e;for(e in b)b.hasOwnProperty(e)&&d.push(e+"="+g(b[e]));return a+(ca?"#":-1==a.indexOf("?")?"?":"&")+
d.join("&")+c}function r(a){return"undefined"===typeof a}function u(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(e in a?(d=b[e],"object"===typeof d?u(a[e],d,c):c||(a[e]=b[e])):a[e]=b[e]);return a}function s(a){if(r(P)){var b=d.body.appendChild(d.createElement("form")),c=b.appendChild(d.createElement("input"));c.name=x+"TEST"+D;P=c!==b.elements[c.name];d.body.removeChild(b)}P?b=d.createElement('<iframe name="'+a.props.name+'"/>'):(b=d.createElement("IFRAME"),b.name=a.props.name);b.id=b.name=a.props.name;
delete a.props.name;"string"==typeof a.container&&(a.container=d.getElementById(a.container));a.container||(u(b.style,{position:"absolute",top:"-2000px",left:"0px"}),a.container=d.body);c=a.props.src;a.props.src="javascript:false";u(b,a.props);b.border=b.frameBorder=0;b.allowTransparency=!0;a.container.appendChild(b);a.onLoad&&M(b,"load",a.onLoad);if(a.usePost){var e=a.container.appendChild(d.createElement("form")),f;e.target=b.name;e.action=c;e.method="POST";if("object"===typeof a.usePost)for(var g in a.usePost)a.usePost.hasOwnProperty(g)&&
(P?f=d.createElement('<input name="'+g+'"/>'):(f=d.createElement("INPUT"),f.name=g),f.value=a.usePost[g],e.appendChild(f));e.submit();e.parentNode.removeChild(e)}else b.src=c;a.props.src=c;return b}function v(c){var e=c.protocol,g;c.isHost=c.isHost||r(aa.xdm_p);ca=c.hash||!1;c.props||(c.props={});if(c.isHost)c.remote=q(c.remote),c.channel=c.channel||"default"+D++,c.secret=Math.random().toString(16).substring(2),r(e)&&(e=p(b.href)==p(c.remote)?"4":f(a,"postMessage")||f(d,"postMessage")?"1":c.swf&&
f(a,"ActiveXObject")&&h()?"6":"Gecko"===navigator.product&&"frameElement"in a&&-1==navigator.userAgent.indexOf("WebKit")?"5":c.remoteHelper?"2":"0");else{c.channel=aa.xdm_c.replace(/["'<>\\]/g,"");c.secret=aa.xdm_s;c.remote=aa.xdm_e.replace(/["'<>\\]/g,"");var e=aa.xdm_p,k;if(k=c.acl){a:{k=c.acl;var l=c.remote;"string"==typeof k&&(k=[k]);for(var n,s=k.length;s--;)if(n=k[s],n=RegExp("^"==n.substr(0,1)?n:"^"+n.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),n.test(l)){k=!0;break a}k=!1}k=!k}if(k)throw Error("Access denied for "+
c.remote);}c.protocol=e;switch(e){case "0":u(c,{interval:100,delay:2E3,useResize:!0,useParent:!1,usePolling:!1},!0);if(c.isHost){if(!c.local){e=b.protocol+"//"+b.host;g=d.body.getElementsByTagName("img");for(l=g.length;l--;)if(k=g[l],k.src.substring(0,e.length)===e){c.local=k.src;break}c.local||(c.local=a)}e={xdm_c:c.channel,xdm_p:0};c.local===a?(c.usePolling=!0,c.useParent=!0,c.local=b.protocol+"//"+b.host+b.pathname+b.search,e.xdm_e=c.local,e.xdm_pa=1):e.xdm_e=q(c.local);c.container&&(c.useResize=
!1,e.xdm_po=1);c.remote=t(c.remote,e)}else u(c,{channel:aa.xdm_c,remote:aa.xdm_e,useParent:!r(aa.xdm_pa),usePolling:!r(aa.xdm_po),useResize:c.useParent?!1:c.useResize});g=[new A.stack.HashTransport(c),new A.stack.ReliableBehavior({}),new A.stack.QueueBehavior({encode:!0,maxLength:4E3-c.remote.length}),new A.stack.VerifyBehavior({initiate:c.isHost})];break;case "1":g=[new A.stack.PostMessageTransport(c)];break;case "2":c.remoteHelper=q(c.remoteHelper);g=[new A.stack.NameTransport(c),new A.stack.QueueBehavior,
new A.stack.VerifyBehavior({initiate:c.isHost})];break;case "3":g=[new A.stack.NixTransport(c)];break;case "4":g=[new A.stack.SameOriginTransport(c)];break;case "5":g=[new A.stack.FrameElementTransport(c)];break;case "6":Q||h(),g=[new A.stack.FlashTransport(c)]}g.push(new A.stack.QueueBehavior({lazy:c.lazy,remove:!0}));return g}function w(a){for(var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},
destroy:function(){this.down.destroy()}},d=0,e=a.length;d<e;d++)b=a[d],u(b,c,!0),0!==d&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function y(a){a.up.down=a.down;a.down.up=a.up;a.up=a.down=null}var z=this,D=Math.floor(1E4*Math.random()),K=Function.prototype,B=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,E=/[\-\w]+\/\.\.\//,S=/([^:])\/\//g,I="",A={},H=a.easyXDM,x="easyXDM_",P,ca=!1,Q,$,M,R;if(f(a,"addEventListener"))M=function(a,b,c){a.addEventListener(b,c,!1)},R=function(a,b,c){a.removeEventListener(b,
c,!1)};else if(f(a,"attachEvent"))M=function(a,b,c){a.attachEvent("on"+b,c)},R=function(a,b,c){a.detachEvent("on"+b,c)};else throw Error("Browser not supported");var C=!1,F=[],L;"readyState"in d?(L=d.readyState,C="complete"==L||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==L||"interactive"==L)):C=!!d.body;if(!C){if(f(a,"addEventListener"))M(d,"DOMContentLoaded",k);else if(M(d,"readystatechange",function(){"complete"==d.readyState&&k()}),d.documentElement.doScroll&&a===top){var G=function(){if(!C){try{d.documentElement.doScroll("left")}catch(a){c(G,
1);return}k()}};G()}M(a,"load",k)}var aa=function(a){a=a.substring(1).split("&");for(var b={},c,d=a.length;d--;)c=a[d].split("="),b[c[0]]=e(c[1]);return b}(/xdm_e=/.test(b.search)?b.search:b.hash),la=function(){var a={},b={a:[1,2,3]};if("undefined"!=typeof JSON&&"function"===typeof JSON.stringify&&'{"a":[1,2,3]}'===JSON.stringify(b).replace(/\s/g,""))return JSON;Object.toJSON&&'{"a":[1,2,3]}'===Object.toJSON(b).replace(/\s/g,"")&&(a.stringify=Object.toJSON);"function"===typeof String.prototype.evalJSON&&
(b='{"a":[1,2,3]}'.evalJSON(),b.a&&(3===b.a.length&&3===b.a[2])&&(a.parse=function(a){return a.evalJSON()}));return a.stringify&&a.parse?(la=function(){return a},a):null};u(A,{version:"2.4.16.3",query:aa,stack:{},apply:u,getJSONObject:la,whenReady:l,noConflict:function(b){a.easyXDM=H;(I=b)&&(x="easyXDM_"+I.replace(".","_")+"_");return A}});A.DomHelper={on:M,un:R,requiresJSON:function(b){"object"==typeof a.JSON&&a.JSON||d.write('<script type="text/javascript" src="'+b+'">\x3c/script>')}};(function(){var a=
{};A.Fn={set:function(b,c){a[b]=c},get:function(b,c){var d=a[b];c&&delete a[b];return d}}})();A.Socket=function(a){var b=w(v(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){if(a.onReady)a.onReady(b)}}])),c=p(a.remote);this.origin=p(a.remote);this.destroy=function(){b.destroy()};this.postMessage=function(a){b.outgoing(a,c)};b.init()};A.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];"function"===typeof d&&(b.local[c]={method:d})}var e=
w(v(a).concat([new A.stack.RpcBehavior(this,b),{callback:function(b){if(a.onReady)a.onReady(b)}}]));this.origin=p(a.remote);this.destroy=function(){e.destroy()};e.init()};A.stack.SameOriginTransport=function(a){var d,e,f,g;return d={outgoing:function(a,b,c){f(a);c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){g=p(a.remote);a.isHost?(u(a.props,{src:t(a.remote,{xdm_e:b.protocol+"//"+b.host+b.pathname,xdm_c:a.channel,xdm_p:4}),name:x+a.channel+"_provider"}),
e=s(a),A.Fn.set(a.channel,function(a){f=a;c(function(){d.up.callback(!0)},0);return function(a){d.up.incoming(a,g)}})):(f=n().Fn.get(a.channel,!0)(function(a){d.up.incoming(a,g)}),c(function(){d.up.callback(!0)},0))},init:function(){l(d.onDOMReady,d)}}};A.stack.FlashTransport=function(a){function e(a,b){c(function(){g.up.incoming(a,k)},0)}function f(b){var c=a.swf+"?host="+a.isHost,e="easyXDM_swf_"+Math.floor(1E4*Math.random());A.Fn.set("flash_loaded"+b.replace(/[\-.]/g,"_"),function(){A.stack.FlashTransport[b].swf=
n=r.firstChild;for(var a=A.stack.FlashTransport[b].queue,c=0;c<a.length;c++)a[c]();a.length=0});a.swfContainer?r="string"==typeof a.swfContainer?d.getElementById(a.swfContainer):a.swfContainer:(r=d.createElement("div"),u(r.style,$&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),d.body.appendChild(r));var g="callback=flash_loaded"+b.replace(/[\-.]/g,"_")+"&proto="+z.location.protocol+"&domain="+
z.location.href.match(B)[3]+"&port="+(z.location.href.match(B)[4]||"")+"&ns="+I;r.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+e+"' data='"+c+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+c+"'></param><param name='flashvars' value='"+g+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+g+"' allowScriptAccess='always' wmode='transparent' src='"+c+"' height='1' width='1'></embed></object>"}
var g,h,k,n,r;return g={outgoing:function(b,c,d){n.postMessage(a.channel,b.toString());d&&d()},destroy:function(){try{n.destroyChannel(a.channel)}catch(b){}n=null;h&&(h.parentNode.removeChild(h),h=null)},onDOMReady:function(){k=a.remote;A.Fn.set("flash_"+a.channel+"_init",function(){c(function(){g.up.callback(!0)})});A.Fn.set("flash_"+a.channel+"_onMessage",e);a.swf=q(a.swf);var d=a.swf.match(B)[3],l=function(){A.stack.FlashTransport[d].init=!0;n=A.stack.FlashTransport[d].swf;n.createChannel(a.channel,
a.secret,p(a.remote),a.isHost);a.isHost&&($&&a.swfNoThrottle&&u(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),u(a.props,{src:t(a.remote,{xdm_e:p(b.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:x+a.channel+"_provider"}),h=s(a))};A.stack.FlashTransport[d]&&A.stack.FlashTransport[d].init?l():A.stack.FlashTransport[d]?A.stack.FlashTransport[d].queue.push(l):(A.stack.FlashTransport[d]={queue:[l]},f(d))},init:function(){l(g.onDOMReady,g)}}};A.stack.PostMessageTransport=function(d){function e(a){var c;
if(a.origin)c=p(a.origin);else if(a.uri)c=p(a.uri);else if(a.domain)c=b.protocol+"//"+a.domain;else throw"Unable to retrieve the origin of the event";c==k&&a.data.substring(0,d.channel.length+1)==d.channel+" "&&f.up.incoming(a.data.substring(d.channel.length+1),c)}var f,g,h,k;return f={outgoing:function(a,b,c){h.postMessage(d.channel+" "+a,b||k);c&&c()},destroy:function(){R(a,"message",e);g&&(h=null,g.parentNode.removeChild(g),g=null)},onDOMReady:function(){k=p(d.remote);if(d.isHost){var l=function(b){b.data==
d.channel+"-ready"&&(h="postMessage"in g.contentWindow?g.contentWindow:g.contentWindow.document,R(a,"message",l),M(a,"message",e),c(function(){f.up.callback(!0)},0))};M(a,"message",l);u(d.props,{src:t(d.remote,{xdm_e:p(b.href),xdm_c:d.channel,xdm_p:1}),name:x+d.channel+"_provider"});g=s(d)}else M(a,"message",e),h="postMessage"in a.parent?a.parent:a.parent.document,h.postMessage(d.channel+"-ready",k),c(function(){f.up.callback(!0)},0)},init:function(){l(f.onDOMReady,f)}}};A.stack.FrameElementTransport=
function(e){var f,g,h,k;return f={outgoing:function(a,b,c){h.call(this,a);c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){k=p(e.remote);e.isHost?(u(e.props,{src:t(e.remote,{xdm_e:p(b.href),xdm_c:e.channel,xdm_p:5}),name:x+e.channel+"_provider"}),g=s(e),g.fn=function(a){delete g.fn;h=a;c(function(){f.up.callback(!0)},0);return function(a){f.up.incoming(a,k)}}):(d.referrer&&p(d.referrer)!=aa.xdm_e&&(a.top.location=aa.xdm_e),h=a.frameElement.fn(function(a){f.up.incoming(a,
k)}),f.up.callback(!0))},init:function(){l(f.onDOMReady,f)}}};A.stack.NameTransport=function(a){function b(c){k.contentWindow.sendMessage(c,a.remoteHelper+(h?"#_3":"#_2")+a.channel)}function d(){h?(2===++r||!h)&&g.up.callback(!0):(b("ready"),g.up.callback(!0))}function e(a){g.up.incoming(a,w)}function f(){v&&c(function(){v(!0)},0)}var g,h,k,n,r,v,w,H;return g={outgoing:function(a,c,d){v=d;b(a)},destroy:function(){k.parentNode.removeChild(k);k=null;h&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){h=
a.isHost;r=0;w=p(a.remote);a.local=q(a.local);h?(A.Fn.set(a.channel,function(b){h&&"ready"===b&&(A.Fn.set(a.channel,e),d())}),H=t(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),u(a.props,{src:H+"#"+a.channel,name:x+a.channel+"_provider"}),n=s(a)):(a.remoteHelper=a.remote,A.Fn.set(a.channel,e));var b=function(){var e=k||this;R(e,"load",b);A.Fn.set(a.channel+"_load",f);(function hb(){"function"==typeof e.contentWindow.sendMessage?d():c(hb,50)})()};k=s({props:{src:a.local+"#_4"+a.channel},onLoad:b})},
init:function(){l(g.onDOMReady,g)}}};A.stack.HashTransport=function(b){function d(){if(q){var a=q.location.href,b="",c=a.indexOf("#");-1!=c&&(b=a.substring(c));b&&b!=k&&(k=b,e.up.incoming(k.substring(k.indexOf("_")+1),v))}}var e,f,g,h,k,n,q,r,t,v;return e={outgoing:function(a,c){if(r){var d=b.remote+"#"+n++ +"_"+a;(f||!t?r.contentWindow:r).location=d}},destroy:function(){a.clearInterval(g);(f||!t)&&r.parentNode.removeChild(r);r=null},onDOMReady:function(){f=b.isHost;h=b.interval;k="#"+b.channel;n=
0;t=b.useParent;v=p(b.remote);if(f){u(b.props,{src:b.remote,name:x+b.channel+"_provider"});if(t)b.onLoad=function(){q=a;g=setInterval(d,h);e.up.callback(!0)};else{var l=0,w=b.delay/50;(function Da(){if(++l>w)throw Error("Unable to reference listenerwindow");try{q=r.contentWindow.frames[x+b.channel+"_consumer"]}catch(a){}q?(g=setInterval(d,h),e.up.callback(!0)):c(Da,50)})()}r=s(b)}else q=a,g=setInterval(d,h),t?(r=parent,e.up.callback(!0)):(u(b,{props:{src:b.remote+"#"+b.channel+new Date,name:x+b.channel+
"_consumer"},onLoad:function(){e.up.callback(!0)}}),r=s(b))},init:function(){l(e.onDOMReady,e)}}};A.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var h=a.indexOf("_"),k=a.substring(0,h).split(",");a=a.substring(h+1);k[0]==d&&(f="",c&&(c(!0),c=null));0<a.length&&(b.down.outgoing(k[1]+","+d+"_"+f,g),e!=k[1]&&(e=k[1],b.up.incoming(a,g)))},outgoing:function(a,g,h){f=a;c=h;b.down.outgoing(e+","+ ++d+"_"+a,g)}}};A.stack.QueueBehavior=function(a){function b(){if(a.remove&&
0===f.length)y(d);else if(!h&&!(0===f.length||l)){h=!0;var e=f.shift();d.down.outgoing(e.data,e.origin,function(a){h=!1;e.callback&&c(function(){e.callback(a)},0);b()})}}var d,f=[],h=!0,k="",l,n=0,p=!1,q=!1;return d={init:function(){r(a)&&(a={});a.maxLength&&(n=a.maxLength,q=!0);a.lazy?p=!0:d.down.init()},callback:function(a){h=!1;var c=d.up;b();c.callback(a)},incoming:function(b,c){if(q){var f=b.indexOf("_"),g=parseInt(b.substring(0,f),10);k+=b.substring(f+1);0===g&&(a.encode&&(k=e(k)),d.up.incoming(k,
c),k="")}else d.up.incoming(b,c)},outgoing:function(c,e,h){a.encode&&(c=g(c));var k=[],l;if(q){for(;0!==c.length;)l=c.substring(0,n),c=c.substring(l.length),k.push(l);for(;l=k.shift();)f.push({data:k.length+"_"+l,origin:e,callback:0===k.length?h:null})}else f.push({data:c,origin:e,callback:h});p?d.down.init():b()},destroy:function(){l=!0;d.down.destroy()}}};A.stack.VerifyBehavior=function(a){function b(){d=Math.random().toString(16).substring(2);c.down.outgoing(d)}var c,d,e;return c={incoming:function(f,
g){var h=f.indexOf("_");-1===h?f===d?c.up.callback(!0):e||(e=f,a.initiate||b(),c.down.outgoing(f)):f.substring(0,h)===e&&c.up.incoming(f.substring(h+1),g)},outgoing:function(a,b,e){c.down.outgoing(d+"_"+a,b,e)},callback:function(c){a.initiate&&b()}}};A.stack.RpcBehavior=function(a,b){function c(a){a.jsonrpc="2.0";f.down.outgoing(g.stringify(a))}function d(a,b){var e=Array.prototype.slice;return function(){var d=arguments.length,f,g={method:b};0<d&&"function"===typeof arguments[d-1]?(1<d&&"function"===
typeof arguments[d-2]?(f={success:arguments[d-2],error:arguments[d-1]},g.params=e.call(arguments,0,d-2)):(f={success:arguments[d-1]},g.params=e.call(arguments,0,d-1)),k[""+ ++h]=f,g.id=h):g.params=e.call(arguments,0);a.namedParams&&1===g.params.length&&(g.params=g.params[0]);c(g)}}function e(a,b,d,f){if(d){var g,h;b?(g=function(a){g=K;c({id:b,result:a})},h=function(a,d){h=K;var e={id:b,error:{code:-32099,message:a}};d&&(e.error.data=d);c(e)}):g=h=K;"[object Array]"!==Object.prototype.toString.call(f)&&
(f=[f]);try{var k=d.method.apply(d.scope,f.concat([g,h]));r(k)||g(k)}catch(l){h(l.message)}}else b&&c({id:b,error:{code:-32601,message:"Procedure not found."}})}var f,g=b.serializer||la(),h=0,k={};return f={incoming:function(a,d){var f=g.parse(a);if(f.method)b.handle?b.handle(f,c):e(f.method,f.id,b.local[f.method],f.params);else{var h=k[f.id];f.error?h.error&&h.error(f.error):h.success&&h.success(f.result);delete k[f.id]}},init:function(){if(b.remote)for(var c in b.remote)b.remote.hasOwnProperty(c)&&
(a[c]=d(b.remote[c],c));f.down.init()},destroy:function(){for(var c in b.remote)b.remote.hasOwnProperty(c)&&a.hasOwnProperty(c)&&delete a[c];f.down.destroy()}}};z.easyXDM=A})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);YUI.add("thirdparty-easyxdm",function(a){},"2.4.16");
YUI.add("squarespace-dialog-text-area",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.TextArea=a.Base.create("textArea",a.Squarespace.DialogField2,[],{initializer:function(){this._edited=!1},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("dialog");a.Lang.isValue(b)&&this.get("contentBox").one("textarea").setAttribute("tabindex",b.getNextTabIndex())},bindUI:function(){d.superclass.bindUI.call(this);this.get("contentBox").one("textarea").after("valuechange",
function(a){this._edited=!0;this.set("data",a.newVal)},this)},didDataChange:function(){return this._edited},focus:function(){d.superclass.focus.call(this);this.get("rendered")&&this.get("contentBox").one("textarea").focus()},blur:function(){d.superclass.blur.call(this);this.get("rendered")&&this.get("contentBox").one("textarea").blur()}},{CSS_PREFIX:"sqs-text-area",HANDLEBARS_TEMPLATE:"dialog-text-area.html",ATTRS:{data:{value:""},strings:{value:{placeholder:""}}}})},"1.0",{requires:["base","node",
"squarespace-dialog-field-2","squarespace-dialog-text-area-template"]});
YUI.add("squarespace-block-unrenderable",function(a){a.namespace("Squarespace.Block").Unrenderable=a.Base.create("block-unrenderable",a.Squarespace.Block.Base,[],{renderUI:function(){var d=this.get("blockType")+" blocks cannot be rendered",d=d+(a.UA.mobile?" in the mobile editor.":".");this.get("boundingBox").addClass("sqs-block-error");this.get("contentBox").setHTML('<div class="error">'+d+"</div>")}},{CSS_PREFIX:"sqs-block-unrenderable",ATTRS:{blockType:{valueFn:function(){return a.Squarespace.StringUtils.toUpperCamelCase(a.Squarespace.BlockTypeByString[this.get("type")])}}}})},
"1.0",{requires:["squarespace-block-base","squarespace-util"]});
YUI.add("squarespace-block-collection-link-editor",function(a){a.namespace("Squarespace.Block.Editor").CollectionLink=a.Base.create("collection-link-block-editor-dialog",a.Squarespace.Block.Editor.Dialog,[],{_getModelEditor:function(){return a.Squarespace.Damask.ContextGlobals.fromTop("Y.Squarespace.Block.ModelEditorDialog.CollectionLink")}},{NS:"blockEditor",ATTRS:{blockName:{value:"CollectionLink"}}});var d=a.namespace("Squarespace.Block.ModelEditorDialog").CollectionLink=a.Base.create("blockCollectionLinkEditor",
a.Squarespace.ModelEditorDialog,[],{_showDialog:function(){d.superclass._showDialog.call(this);var a=this.get("dialog").getField("collectionId");a.set("collectionGroups",this._getCollectionGroups());a.syncUI()},_getCollectionGroups:function(){var b=a.Squarespace.ContentCollectionUtils,c=a.Squarespace.ContentCollectionCache,d=c.filter(b.isGenericOrProduct),g=c.filter(b.isPage),c=c.filter(b.isIndex),b=b.groupCollectionsByTypeName(d);b.push({title:"Pages",collections:g});b.push({title:"Index",collections:c});
return b},_getDialogConfig:function(){return{width:335,height:400,discardChangesConfirmation:!1,closeOthers:!1,draggable:!0,flyoutPointerDirection:"hidden",style:"flyout",initialDataByReference:!0,buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Edit Content Link",icon:"/universal/images-v6/icons/icon-link-16-light-solid.png",scroll:!0,fields:[{type:"description",text:"Below, <strong>select the Squarespace page</strong> you'd like to link to. Squarespace will create a link to this page with the associated thumbnail and description set in this page's settings panel."},
{ctor:a.Squarespace.DialogFields.ContentIdSelector,config:{mode:"page",showCollectionTagsAndCategories:!1,showGroupTitles:!0,name:"collectionId",collectionGroups:[]}}]}]}}},{ATTRS:{dialogConfig:{getter:"_getDialogConfig"}}})},"1.0",{requires:"base squarespace-block-editor-dialog squarespace-content-collection-utils squarespace-damask-context-globals squarespace-dialog-content-item-grid squarespace-dialog-gallery-options squarespace-dialog-multi-option squarespace-dialog-multi-frame squarespace-gallery-option-synchronizer squarespace-models-content-collection squarespace-plugin-actionoverlay".split(" ")});
YUI.add("squarespace-dialog-variants-table",function(a){a.namespace("Squarespace");var d=a.Base.create("UserOption",a.Model,[],{},{ATTRS:{optionName:{value:null},displayName:{value:null}}}),b=a.Base.create("UserOptionList",a.ModelList,[],{model:d,getOptionsByName:function(a){return this.filter(function(b){return b.get("optionName")===a})},find:function(a){return this.getOptionsByName(a)[0]}},{}),c=a.namespace("Squarespace.DialogFields").VariantsTable=a.Base.create("variantsTable",a.Squarespace.DialogField2,
[a.WidgetParent],{_name:"variantsTable",initializer:function(){this._edited=!1;this._tooltips=[];var c=new b;a.Array.each(this.get("data.variantOptionOrdering"),function(a){c.add({optionName:a,displayName:a})});c.on("*:change",function(){this._edited=!0},this);this.set("optionsList",c)},destroy:function(){c.superclass.destroy.call(this);a.Array.each(this._tooltips,function(a){a.destroy()},this)},renderUI:function(){c.superclass.renderUI.call(this);var b=this.get("contentBox");b.append(a.Node.create('<div class="title">'+
this.get("strings.title")+"</div>"));b.append(a.Node.create('<div class="description">'+this.get("strings.description")+"</div>"));b.append(a.Node.create('<div class="table"><div class="viewport"><div class="header"><div class="add-option"><img src="/universal/images-v6/standard/icon_add_11_light.png" /></div></div><div class="body"><div class="rows"></div><div class="add-variant"><img src="/universal/images-v6/standard/icon_add_11_light.png" /></div></div></div></div>'));this._headerEl=b.one(".header");
this._addOptionEl=this._headerEl.one(".add-option");this._bodyEl=b.one(".body");this._addVariantEl=this._bodyEl.one(".add-variant");this._childrenContainer=this._bodyEl.one(".rows");this._addOptionEl.plug(a.Squarespace.Plugin.PulseWarn,{iterations:3,color:"#C1B12E"});this._renderOption({optionName:"sku",displayName:"SKU"},!1);this._renderOption({optionName:"pricing",displayName:"Pricing"},!1);this._renderOption({optionName:"stock",displayName:"Stock"},!1);this.get("isPhysical")&&(this._renderOption({optionName:"weight",
displayName:'Weight<div class="question">?</div>',tooltipConfig:{title:"Shipping Weight",body:"Specify weight for shipping calculations if you use a weight-based formula or real-time carrier-calculated rates."}},!1),this._renderOption({optionName:"dimensions",displayName:'Dimensions<div class="question">?</div>',tooltipConfig:{title:"Packing Dimensions",body:"Specify the packing dimensions of your product if you want to estimate the cost of shipping via real-time carrier shipping-calculated rates."}},
!1));this.get("optionsList").each(function(a){this._renderOption(a.getAttrs(),!0)},this);b=this.get("data.variants");this._setupDragAndDrop();0<b.length?a.Array.each(b,this._addVariant,this):this._addVariant({sku:a.Squarespace.Commerce.generateSKU(),price:0,salePrice:0,onSale:!1,qtyInStock:1,len:0,width:0,height:0,attributes:{}});this._refreshData()},bindUI:function(){c.superclass.bindUI.call(this);this._addOptionEl.on("click",function(a){this._addEditOption()},this);this.get("optionsList").after(["*:add",
"*:remove","*:optionNameChange"],this._refreshData,this);this.after(["addChild","variantRow:removed","variantRow:dataChange"],this._refreshData,this);this.after("variantRow:next-row-execute-requested",this._editOrCreateNextRow,this);this.on("variantRow:removed",function(a){this.remove(this.indexOf(a.target))});this.on("variantRow:remove-requested",this._attemptDeleteRow,this);this.on("variantRow:removed",this._ddDelegate.syncTargets,this._ddDelegate);this._headerEl.delegate("click",this._editOption,
".custom-option",this);this._addVariantEl.on("click",this._attemptAddNewVariant,this);this._bodyEl.delegate("click",this.hideError,"input",this);this.after("dataChange",this.hideError,this);this._ddReorder.on("reordered",this._reorderRows,this)},syncUI:function(){c.superclass.syncUI.call(this);this._bodyEl.toggleClass("one-variant",1===this.size())},didDataChange:function(){return this._edited},_setupDragAndDrop:function(){var b=this._childrenContainer;this._ddDelegate=new a.DD.Delegate({container:b,
nodes:".sqs-variant-row",groups:"variant-row",target:!0});this._ddReorder=this._ddDelegate.dd.plug(a.Squarespace.DDReorder,{container:b,nodes:".sqs-variant-row"}).ddreorder;this._ddDelegate.dd.plug(a.Plugin.DDConstrained,{constrain:b,stickY:!0});this._ddDelegate.dd.plug(a.Plugin.DDNodeScroll,{node:b,horizontal:!1,scrollDelay:100});this._ddReorder.on("reordered",this._refreshData,this)},_editOrCreateNextRow:function(b){var c=this.indexOf(b.target);b=b.command;var d=this.item(c+1);a.Lang.isValue(d)?
b.call(d):this._attemptAddNewVariant()&&(d=this.item(c+1),b.call(d))},_attemptDeleteRow:function(b){b=b.target;if(1===this.size())new a.Squarespace.Widgets.Alert({"strings.title":"Cannot Remove","strings.message":"Your product must have at least one choice."});else(new a.Squarespace.Widgets.Confirmation({"strings.title":"Delete Variant?","strings.message":"Do you want to delete this product variant?"})).on("confirm",b.close,b)},_editOption:function(b){b=b.currentTarget;var c=b.getData();a.Squarespace.Utils.isSystemVariantOption(c.optionName)||
this._addEditOption(c,b)},_renderOption:function(b,c){var d=b.optionName,h=b.tooltipConfig,k=a.Node.create('<div class="option" data-option-name="'+d+'">'+b.displayName+"</div>");a.Squarespace.Utils.isSystemVariantOption(b.optionName)&&k.addClass("option-"+d);c&&k.addClass("custom-option");k.setData(b);this._headerEl.insert(k,this._headerEl.one(".add-option"));a.Lang.isValue(h)&&new a.Squarespace.ToolTip({target:".option-"+d,title:h.title,body:h.body,clickToShow:!0,alwaysEnable:!0,dialogTooltip:!0})},
_addVariant:function(b){b=new a.Squarespace.Widgets.VariantRow({optionsList:this.get("optionsList"),data:b,dialog:this.get("dialog"),isPhysical:this.get("isPhysical"),measurementStandard:this.get("measurementStandard")});this.add(b);this._ddDelegate.syncTargets()},_attemptAddNewVariant:function(){var b=this.get("data.variants");if(0===this.get("optionsList").size())return new a.Squarespace.Widgets.Alert({"strings.title":"Options Needed","strings.message":'You must define at least one option (e.g. "color", "size") before adding product variants.'}),
this._addOptionEl.pulseWarn.warn(),!1;if(100<=b.length)return new a.Squarespace.Widgets.Alert({"strings.title":"Too Many Variants","strings.message":"You have reached the system limit of 100 variants per product. It is recommended that you divide this item into several separate products if you have more than 100 SKUs."}),!1;50<b.length&&100>b.length&&new a.Squarespace.Widgets.Alert({"strings.title":"Warning: Variants Limit","strings.message":"The system has a limit of 100 variants per product. You currently have "+
b.length+". It is recommended that you divide this item into several separate products if you have more than 100 SKUs."});b=a.clone(b[b.length-1]);b.sku=a.Squarespace.Commerce.generateSKU();this._addVariant(b);this._addVariantEl.scrollIntoView();return!0},_addEditOption:function(b,c){var f=new a.Squarespace.EditingDialog({top:120,width:300,overlay:0.5,closeOthers:!1,initialData:b,buttons:b?[{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove"},{type:"save",title:"Save Option"}]:[{type:"cancel",
title:"Cancel"},{type:"save",title:"Save Option"}],primaryTabs:[{title:"Edit Option",icon:"/universal/images-v6/form/light/24px/icon_radio_24_light.png",fields:[{ctor:a.Squarespace.DialogFields.Text,config:{name:"optionName",className:"thin",saveOnEnter:!0,strings:{title:"Option Name",description:"E.g. color, size, style, material"}}}]}]});f.on("send-requested",function(){var h=f.getField("optionName").getValue().trim();if(""===h)f.getField("optionName").showError("The option name cannot be blank."),
f.allowEditing();else if(a.Squarespace.Utils.isSystemVariantOption(h))f.getField("optionName").showError("That name is reserved by the system."),f.allowEditing();else{if(a.Lang.isValue(b)){c.setContent(h);c.setAttribute("data-option-name",h);var k=this.get("optionsList").find(b.optionName);k.set("optionName",h);c.setData(k.getAttrs())}else{if(0<this.get("optionsList").getOptionsByName(h).length){f.getField("optionName").showError("You cannot create another option with the same name.");f.allowEditing();
return}this._renderOption({optionName:h,displayName:h},!0);this.get("optionsList").add(new d({optionName:h,displayName:h}))}f.close()}},this);f.on("remove-requested",function(){if(1==this.get("optionsList").size()&&1<this.size())new a.Squarespace.Widgets.Alert({"strings.title":"Cannot Remove","strings.message":"Since you have several variants defined, you must have at least one option. If you really want to remove this option, remove your variants first."});else(new a.Squarespace.Widgets.Confirmation({"strings.title":"Delete Option?",
"strings.message":"Do you want to delete this option?"})).on("confirm",function(){var a=this.get("optionsList");a.remove(a.find(b.optionName));this._headerEl.all(".option").each(function(a){a.getData().optionName==b.optionName&&a.remove()});f.close()},this)},this);f.show()},_getErrors:function(){this.get("data.variants");var b={},c=[];this.each(function(d){var h=d.get("data.sku");d=d.getError(b);a.Lang.isValue(d)&&(this._set("errorFlyoutAnchor",d.inputEl),this.fire("errors"),c=[d.message]);b[h]=!0},
this);return c},_reorderRows:function(a){var b=a.newIndex;a=this.remove(a.oldIndex);this.add(a,b)},_refreshData:function(){var a=[];this.each(function(b){a.push(b.get("data"))},this);var b=[];this.get("optionsList").each(function(a){b.push(a.get("optionName"))});this.set("data",{variants:a,variantOptionOrdering:b})}},{CSS_PREFIX:"sqs-variants-table",ATTRS:{strings:{value:{title:"Product Variants",description:"Define the options of your item, create variants, and track stock levels. Each row in the table below represents a variant on this product. You can add additional options to those variants by adding columns."}},
isPhysical:{value:!0},optionsList:{value:null},measurementStandard:{value:null}}})},"1.0",{requires:"base model squarespace-util squarespace-variant-row squarespace-dialog-field-2 squarespace-plugin-money-formatter squarespace-plugin-numeric-formatter squarespace-plugin-pulsewarn squarespace-widgets-alert squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-block-base",function(a){var d=d||function(){};a.namespace("Squarespace.Block").Base=a.Base.create("block-base",a.Squarespace.SSWidget,[],{initializer:function(b){(!b||!b.model)&&this._setDefaultContent();a.before(this._renderUIBlock,this,"renderUI");a.after(this._bindUIBlock,this,"bindUI");a.after(this._syncUIBlock,this,"syncUI");this.publish("resized",{emitFacade:!0,defaultFn:this._updateBlockSizing});this.publish("blockModelChange",{emitFacade:!0})},_setDefaultContent:function(){var b=
this.get("defaultContentModel");a.Lang.isValue(b)&&this.get("model").setAttrs(b)},_renderUIBlock:function(){this.get("boundingBox").addClass("sqs-block "+this.get("classNames"));this.get("contentBox").addClass("sqs-block-content");this.get("boundingBox").setAttribute("id","block-"+this.get("id"));this._addSizeAndFloatClasses()},_bindUIBlock:function(){this.get("model").after("*:change",this._fireModelChange,this);this.after("editableChange",this.syncEditable,this);this.after("visibleChange",this.syncVisible,
this);this.after("focusedChange",this._syncFocused,this);this.after("selectedChange",this._syncSelected,this);this.after("dropped",this._trackEngagementDropped,this)},_syncUIBlock:function(){this.get("editable")&&this.syncEditable();this.syncVisible()},_sizeAttrChanged:a.Squarespace.Block.Utils.getWhitelistingFn(["floatDir","hSize","vSize","dimensions","aspectRatio"]),_fireModelChange:function(a){this._sizeAttrChanged(a.changed)&&this.fire("resized");this.fire("blockModelChange",{blockType:this.get("type"),
changed:a.changed})},_bindDOM:d,syncEditable:function(){var b=this.get("editable"),d;(d=this.get("editController").isMobileApp()?this.get("mobileEditor"):this.get("editMode")===a.Squarespace.Layout.EditMode.EMAIL?this.get("emailEditor"):this.get("editor"))?b?d&&!this.hasPlugin(d.NS)&&this.plug(d,this.get("editorConfig")):this.hasPlugin(d.NS)&&this.unplug(d.NS):console.warn("No Editor configured for this platform")},syncVisible:function(){this.get("boundingBox").toggleClass("sqs-block-hidden",!this.get("visible"))},
_syncFocused:function(a){this._uiSetFocused(a.newVal)},_syncSelected:function(a){this._uiSetSelected(a.newVal)},_uiSetFocused:function(a,b){this.get("boundingBox").toggleClass("sqs-block-focused",!!a)},_uiSetSelected:function(a){this.get("boundingBox").toggleClass("sqs-selected",!!a)},_updateBlockSizing:function(){var b=this.get("model");this._removeSizeAndFloatClasses();this._addSizeAndFloatClasses();!b.get("floatDir")&&a.Lang.isValue(b.get("hSize"))&&b.set("hSize",null)},_plugImageLoader:function(){this.get("contentBox").all("img").each(function(b){b.hasPlugin(a.Squarespace.Loader2.NS)||
b.plug(a.Squarespace.Loader2)})},_removeSizeAndFloatClasses:function(){var a=this.get("boundingBox");a.set("className",a.get("className").replace(/(?:\s|^)(sqs-col-\d+?|sqs-float-\w+?|vsize-\d+?)(?=\s|$)/g,""))},_addSizeAndFloatClasses:function(){var a=this.get("boundingBox"),b=this.get("model"),d=b.get("floatDir"),f=b.get("hSize"),b=b.get("vSize");d&&f&&a.addClass("sqs-float-"+d+" sqs-col-"+f);b&&a.addClass("vsize-"+b)},toJSON:function(){return{type:this.get("type"),id:this.get("id"),value:this.get("model").toJSON()}},
queueForDestruction:function(){this.hide();this.get("boundingBox").addClass("sqs-destroyme")},removeBlock:function(b){function d(){var a=this.get("boundingBox");!b&&a.ancestor(".sqs-block-remover")&&a.unwrap();this.queueForDestruction();var a=this.get("boundingBox").ancestor(".sqs-layout"),e=this.get("editController");e.cleanGrids(a);e.alignInsertPoints(a)}if(b)d.call(this);else{var g=a.Node.create('<div class="sqs-block-remover">');g.setStyle("overflow","hidden");this.get("boundingBox").wrap(g);
g=new a.Anim({node:g,to:{height:0,opacity:0},duration:0.5,easing:a.Easing.easeOutStrong});g.on("end",d,this);this._anims.add(g);g.run()}this._trackInternal("engagement_block_remove")},_trackEngagementDropped:function(){this._trackInternal("engagement_block_drop")},_trackEngagementCreate:function(){this._trackInternal("engagement_block_create")},_trackInternal:function(b){if(!this.get("editController").isMobileApp()&&a.Lang.isString(b)&&0<b.length){var d="sidebar";Static.IN_BACKEND&&(a.one("body").hasClass("collection-type-page")?
d="page":a.one("body").hasClass("dialog-open")&&(d="post"));a.Squarespace.Analytics.trackInternal(b,{type:a.Squarespace.BlockTypeByString[this.get("type")],backend:Static.IN_BACKEND,region:d})}},isEmpty:function(){return!1},destructor:function(){var b=this.get("id")+"|*";a.Global.detach(b);a.detach(b);this.unplug();this.get("boundingBox").purge(!0)}},{THROTTLE_DATACHANGE_TIME_MS:1E4,MODEL:a.Model,ATTRS:{blockTypeName:{valueFn:function(){return this.name.split("block-")[1].replace(/-/g,"_").toUpperCase()}},
type:{valueFn:function(){return a.Squarespace.BlockType[this.get("blockTypeName")]}},id:{getter:function(b){a.Lang.isValue(b)||(b=a.Squarespace.Utils.getGuid(),this.set("id",b));return b}},model:{writeOnce:!0,lazyAdd:!1,value:{},setter:function(b){return a.instanceOf(b,a.Model)?b:new (this.getProperty("MODEL"))(b||{})}},classNames:{valueFn:function(){return this.name.split("block-")[1]+"-block"}},floatDir:{},hSize:{},vSize:{},tabIndex:{value:0},focused:{setter:function(a){return this.get("editable")?
a:!1}},editable:{value:!1},editController:{writeOnce:!0,validator:function(b){return a.instanceOf(b,a.Squarespace.EditControllerBase)}},editor:{readOnly:!0,valueFn:function(){return a.Squarespace.Block.Editor.Base}},editMode:{writeOnce:!0,validator:function(b){return a.Squarespace.Layout.EditMode.isValid(b)}},mobileEditor:{readOnly:!0,value:null},editorConfig:{value:null,validator:a.Squarespace.AttrValidators.isNullOrObject},isWidgetParent:{readOnly:!0,value:!1},isNewBlock:{value:!1},defaultContentModel:{readOnly:!0},
floatable:{value:!0},focusHandler:{valueFn:function(){return a.Squarespace.Singletons.BlockFocusHandler}}}});var b=a.namespace("Squarespace.Block").ParentBase=a.Base.create("block-parent-base",a.Squarespace.Block.Base,[a.WidgetParent],{syncEditable:function(){b.superclass.syncEditable.call(this);var a=this.get("editable");this.each(function(b){b.set("editable",a)},this)},toJSON:function(){return b.superclass.toJSON.apply(this,arguments)}},{ATTRS:{editor:{readOnly:!0,value:null},isWidgetParent:{value:!0},
mobileEditor:{readOnly:!0,value:null},multiple:{value:!0}}})},"1.0",{requires:"base event model squarespace-attr-validators squarespace-block-editor-base squarespace-block-focus-handler squarespace-debounce squarespace-enum squarespace-ss-widget squarespace-util widget-parent".split(" ")});
YUI.add("squarespace-dialog-multi-frame",function(a){var d=a.namespace("Squarespace.DialogFields").MultiFrame=a.Base.create("multiFrame",a.Squarespace.DialogField2,[],{initializer:function(){this.get("data")||this.set("data",this.get("frames")[0]);this._frameEls=[];a.Array.each(this.get("frames"),function(b){var c=a.Node.create('<div class="frame" data-name="'+b.name+'"></div>');this._frameEls.push(c);a.Array.each(b.fields,function(a){var b=a.config||{};b.render=c;var d=this.get("dialog");d&&(b.dialog=
d,b.data=d.params.initialData[b.name]);a=new a.ctor(b);this.add(a)},this)},this);this._fields={}},renderUI:function(){d.superclass.renderUI.call(this);this._frameWrapper=a.Node.create('<div class="multi-frame-wrapper"></div>');this.get("contentBox").append(this._frameWrapper);a.Array.each(this._frameEls,this._frameWrapper.append,this._frameWrapper)},syncUI:function(){d.superclass.syncUI.call(this);this._setupFrameWidths()},_setupFrameWidths:function(){this._contentWidth=this.get("boundingBox").get("offsetWidth");
this._frameWrapper.setStyle("width",this._contentWidth*this.get("frames").length);a.Array.each(this._frameEls,function(a){a.setStyle("width",this._contentWidth);a.getAttribute("data-name")==this.get("data")&&(this._frameWrapper.setStyle("left",-(this._contentWidth*this._getFrameIndex(a))+"px"),this._visibleFrame=a)},this)},switchFrames:function(b){this.get("contentBox").all(".frame").each(function(c){if(c.getAttribute("data-name")==b){this._frameWrapper.activeAnim&&this._frameWrapper.activeAnim.stop();
var d=-1*this._contentWidth*this._getFrameIndex(c);this.get("animate")?this._frameWrapper.anim({left:d},{duration:0.3,easing:a.Easing.easeOutStrong,start:function(){this.fire("animating",{name:b})},end:function(){this._visibleFrame=c;this.fire("animated",{name:b});this.set("data",b)},context:this}).run():(this._frameWrapper.setStyle("left",d+"px"),this.set("data",b))}},this)},getField:function(a){var c;this.each(function(d){d.get("name")==a&&(c=d)},this);return c},_getFrameIndex:function(a){for(var c=
this.get("frames"),d=0;d<c.length;d++)if(a.getAttribute("data-name")==c[d].name)return d}},{CSS_PREFIX:"sqs-multi-frame",ATTRS:{animate:{value:!0},frames:{value:null},readOnly:{value:!0}}})},"1.0",{requires:["base","squarespace-dialog-field-2"]});
YUI.add("thirdparty-codemirror",function(a){a.namespace("Squarespace.Thirdparty");"true"===a.Cookie.get("CMDebug")?a.Get.js("/universal/scripts-thirdparty/codemirror/4.1/lib/codemirror.js",function(){a.Squarespace.Thirdparty.CodeMirror=CodeMirror}):a.Squarespace.Thirdparty.CodeMirror=a.Squarespace.Thirdparty.CodeMirrorCompressed},"1.0",{requires:["thirdparty-codemirror-compressed"]});
YUI.add("squarespace-mixins-recoverable",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.Recoverable=a.Base.create("Recoverable",a.Base,[],{initializeRecoveryBuffer:function(){var d=new a.Squarespace.Models.RecoveryBuffer({type:this.get("recoveryType"),sourceId:this.get("recoverableSourceId"),fieldName:this.get("recoverableFieldName"),editableBlock:this.get("recoverableField")});this.set("recoveryBuffer",d);var b=this.get("layoutNode");a.Cookie.get("fastAutoSave")&&this.set("saveInterval",
1E4);this._throttle=a.Squarespace.throttle(d.save,this.get("saveInterval"),{leading:!1});b.LayoutBuilder.after("*:blockModelChange",this._throttle,d);b.LayoutBuilder.after("*:blockModelChange",this._checkChangeInReferencedContent,this)},_checkChangeInReferencedContent:function(a){for(var b=["imageId","transientGalleryId","formId"],c=0;c<b.length;c++)if(a.changed[b[c]]){this.get("recoveryBuffer").save();break}},loadBuffers:function(d){a.Data.get({url:"/api/recovery-buffers",secure:!0,data:{orderBy:"updatedOn",
sourceId:this.get("recoverableSourceId")},success:d})},destroyBuffers:function(d){a.Array.each(d,function(b){a.instanceOf(b,a.Squarespace.Models.RecoveryBuffer)||(b=new a.Squarespace.Models.RecoveryBuffer(b));b.destroy({remove:!0,headers:{"revert-changes":!0}})})},destroyBufferOnSave:function(){this._destroyBuffer(!1)},destroyBufferOnRevert:function(){this._destroyBuffer(!0)},_destroyBuffer:function(a){this._throttle&&this._throttle.cancel();var b=this.get("recoveryBuffer");b&&b.save(function(){b.destroy({remove:!0,
headers:{"revert-changes":a}});b.set("id",null)})}},{ATTRS:{recoveryType:{value:a.Squarespace.RecoveryBufferType.PAGE_COLLECTION_DATA,validator:a.Squarespace.AttrValidators.isValueIn(a.Squarespace.RecoveryBufferType),writeOnce:"initOnly"},recoverableField:{value:null,validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Models.EditableContentBlock)},recoverableFieldName:{value:"",validator:a.Squarespace.AttrValidators.isString,writeOnce:"initOnly"},saveInterval:{value:9E4,validator:a.Squarespace.AttrValidators.isNumber},
recoverableSourceId:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},recoveryBuffer:{value:null,validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Squarespace.Models.RecoveryBuffer)},layoutNode:{value:null,validator:a.Squarespace.AttrValidators.isNullOrInstanceOf(a.Node)}}})},"1.0",{requires:["base","squarespace-models-layout","squarespace-models-recovery-buffer","squarespace-throttle"]});
YUI.add("squarespace-content-item-types-image",function(a){var d=a.namespace("Squarespace.ContentItemEditor").Image=a.Base.create("ImageContentItemEditor",a.Squarespace.ContentItemEditor.Base,[],{},{ATTRS:{editorConfiguration:{value:{title:"Edit {presentationName}",width:800,height:400,overlay:0.5,initialDataByReference:!0,tabs:[{$include:["tabs.primary.base","tabs.primary.image"]},{$include:"tabs.options.image"},{$include:"tabs.location"},{$include:"tabs.social"}],buttons:{$include:"buttons"}}}}}),
b={name:"imageeditminimal",title:"Edit {presentationName}",width:340,height:400,closeOthers:!1,draggable:!0,style:"flyout",flyoutPointerDirection:"hidden",tabs:[{icon:a.Squarespace.Rendering.getIconUrl("image",16,"light"),fields:[{$include:["fields.title",{countHeight:!0,className:"thin"}]},{ctor:a.Squarespace.DialogFields.Wysiwyg,config:{name:"body",toolbarType:a.Squarespace.Wysiwyg.ToolbarTypes.DIALOG_SMALL,editorHeight:157,classNames:"major",title:"Enter an image body..."}},{$include:["fields.clickthroughUrl",
{countHeight:!0,condensed:!0,disableNewWindow:!0}]}]}],buttons:{$include:"buttons"}};a.namespace("Squarespace.ContentItemEditor").ImageMinimal=a.Base.create("ImageContentItemEditor",d,[],{},{ATTRS:{editorConfiguration:{value:b}}})},"1.0",{requires:["squarespace-content-item-types-base"]});
YUI.add("squarespace-block-social-account-links-v2",function(a){a.namespace("Squarespace.Block").SocialAccountLinksV2=a.Base.create("block-social-account-links-v2",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-socialaccountlinks",MODEL:a.Squarespace.ContentModel.SocialAccountLinksBlock,ATTRS:{type:{value:a.Squarespace.BlockType.SOCIAL_ACCOUNT_LINKS_V2},editor:{value:a.Squarespace.Block.Editor.SocialAccountLinks}}})},"1.0",{requires:"base model squarespace-block-social-account-links-model squarespace-block-social-account-links-editor squarespace-block-base-modelsync squarespace-enum".split(" ")});
YUI.add("squarespace-album-player",function(a){function d(){a.Array.each(e,function(b){a.Lang.isFunction(b.adjustAlbumImage)&&b.adjustAlbumImage()})}function b(b){g=b;a.Array.each(e,function(c){a.Lang.isFunction(c.setVolume)&&c.setVolume(b)})}function c(){a.Array.each(e,function(b){a.Lang.isFunction(b.pausePlayer)&&b.pausePlayer()})}var e=[],g=100,f=!1,h=a.namespace("Squarespace.Widgets").AlbumPlayer=a.Base.create("albumPlayer",a.Squarespace.Widgets.SSWidget,[],{render:function(){e.push(this);h.superclass.render.apply(this,
arguments);a.use("thirdparty-soundmanager2",a.bind(function(a){this._soundManager=soundManager;this._soundManager.setup({url:soundManager.url,flashVersion:8,debugMode:!1,preferFlash:!1,onready:a.bind(this.soundManagerReady,this)});this._soundManager.beginDelayedInit()},this))},renderUI:function(){this.playerNode=this.get("contentBox");this.albumImage=this.playerNode.one(".album-cover img");this.adjustAlbumImage();f?d():(f=!0,a.one("window").on("resize",d));this.trackListNode=this.playerNode.one(".tracks");
this.tracksNode=this.trackListNode.all(".track");this.numberOfTracks=this.tracksNode.size();this.controlsNode=this.playerNode.one(".album-controls");this.timerNode=this.playerNode.one(".timer");this.volumeBarNode=this.playerNode.one(".volume-bar");this.artistNameNode=this.playerNode.one(".now-playing .track-info .artist");this.trackTitleNode=this.playerNode.one(".now-playing .track-info .title");this.setupUniversalPlaybarIfExists()},soundManagerReady:function(){this.setupAudioFiles()},adjustAlbumImage:function(){var a=
this.get("contentBox"),b=a.getComputedStyle("width"),b=parseInt(b,10);800>b?a.addClass("tablet"):a.removeClass("tablet");480>b?a.addClass("phone"):a.removeClass("phone");this.albumImage&&ImageLoader.load(this.albumImage,{load:!0});a.hasClass("loading")&&a.removeClass("loading")},setupUniversalPlaybarIfExists:function(){this.playerNode.one(".now-playing")&&(this.set("hasUniversalPlaybar",!0),this.timeBarNode=this.playerNode.one(".track-progress-bar"),this.loadingBarNode=this.timeBarNode.one(".load-bar"),
this.playingBarNode=this.timeBarNode.one(".play-bar"),this.minutesNode=this.timerNode.one(".minutes"),this.secondsNode=this.timerNode.one(".seconds"),this.durationNode=this.playerNode.one(".duration"),this.durMinutesNode=this.durationNode.one(".minutes"),this.durSecondsNode=this.durationNode.one(".seconds"))},bindUI:function(){var a=this.playerNode.one(this.get("playButton"));a&&this._registerEvent(a.on("click",this.onPlayButtonClick,this));(a=this.playerNode.one(this.get("pauseButton")))&&this._registerEvent(a.on("click",
this.onPauseButtonClick,this));(a=this.playerNode.one(this.get("stopButton")))&&this._registerEvent(a.on("click",this.onStopButtonClick,this));(a=this.playerNode.one(this.get("prevButton")))&&this._registerEvent(a.on("click",this.onPrevButtonClick,this));(a=this.playerNode.one(this.get("nextButton")))&&this._registerEvent(a.on("click",this.onNextButtonClick,this));if(this.volumeBarNode=this.playerNode.one(this.get("volumeBar")))this.volumeScrubNode=this.volumeBarNode.one(".scrubber"),this._registerEvent(this.volumeBarNode.on("click",
this.onVolumeBarClick,this))},onPlayButtonClick:function(a){a.halt();this.get("currentTrack")||this.setCurrentTrackByKey(0,!0);this.isTrackPlaying()?this.pausePlayer():this.playCurrentTrack()},onPauseButtonClick:function(a){a.halt();this.pausePlayer()},onStopButtonClick:function(a){a.halt();this.stopPlayBarAndTimer();this.get("currentTrack").audioObject.stop();this.playerNode.addClass("paused").removeClass("playing")},onPrevButtonClick:function(a){a.halt();a=this.get("currentTrack").index;0<a&&a--;
this.setCurrentTrackByKey(a)},onNextButtonClick:function(a){a.halt();a=this.get("currentTrack").index;a!==this.numberOfTracks-1&&a++;this.setCurrentTrackByKey(a)},onVolumeBarClick:function(a){a.halt();var c=this.volumeBarNode.getX(),d=parseInt(this.volumeBarNode.getComputedStyle("width"),10);b(100*((a.clientX-c)/d))},setCurrentTrackByKey:function(a,b){"undefined"===typeof b&&(b=this.get("currentTrack")&&(0===this.get("currentTrack").audioObject.playState||this.get("currentTrack").audioObject.paused));
this.setCurrentTrack(this.get("trackArray")[a],b)},toggleTimerFunction:function(a){a.halt();this.countingDown.set(!this.countingDown)},setupAudioFiles:function(){var a=this.tracksNode.size();this.tracksNode.each(function(b,c){this.setupAudioTrack(b,c);c+1===a&&this.setCurrentTrackByKey(0,!0)},this)},setupAudioTrack:function(a,b){var c=a.getAttribute("id"),d=a.one(".link").getAttribute("href"),d=-1!==d.indexOf("?")?d+("&"+c):d+("?"+c),d={artist:a.getData("artist"),title:a.getData("title"),src:d,index:b,
domNode:a,duration:a.one(".track-time").get("innerHTML"),hasTimebar:!1};d.soundManagerID=(d.artist+"-"+d.title+"-"+c).replace(/\s+/g,"_");d.audioObject=this.createSoundObject(d,b===this.get("currentTrack").index);this.setupTrackTimeCnnr(d);this.get("trackArray").push(d);this.bindTrackLink(d);return d},parseTrackFromHash:function(){var b=a.QueryString.parse(window.location.hash.replace("#","")).track,b=parseInt(b,10);return a.Lang.isNumber(b)?b:0},setupTrackTimeCnnr:function(a){a.domNode.one(".track-progress-bar")&&
(a.hasTimebar=!0,a.timeBarNode=a.domNode.one(".track-progress-bar"),a.loadingBarNode=a.domNode.one(".load-bar"),a.playingBarNode=a.domNode.one(".play-bar"),a.timerNode=a.domNode.one(".track-time"),a.durationNode=a.domNode.one(".duration"),this._registerEvent(a.timeBarNode.on("click",this.onTimebarClick,this,a)))},onTimebarClick:function(a,b){a.halt();var c=b.timeBarNode.getX(),d=parseInt(b.timeBarNode.getComputedStyle("width"),10),c=(a.clientX-c)/d,d=b.audioObject.duration;this.get("currentTrack")!==
b?this.setCurrentTrack(b):this.isTrackPlaying()?b.audioObject.setPosition(d*c):this.playCurrentTrack()},createSoundObject:function(b,c){var d=b.src;8<d.split("/").length&&(d=d.split("/").slice(0,8).join("/"));var e=this._soundManager.createSound({url:d,id:b.soundManagerID,autoLoad:c,autoPlay:!1,whileplaying:a.bind(function(){this.whilePlayingDOMUpdates(e,b)},this),whileloading:a.bind(function(){this.setLoadingBar(e,b)},this),onload:a.bind(function(a){a?a&&this.finishLoading(e,b):(e.setPosition(this.playingTrackPosition),
this.playCurrentTrack())},this),onfinish:a.bind(function(){0===e.playState&&this.get("currentTrack").index===b.index&&this.playNextTrackOnList()},this)});return e},playNextTrackOnList:function(){this.get("currentTrack").index!==this.numberOfTracks-1?this.setCurrentTrack(this.get("trackArray")[this.get("currentTrack").index+1],!1):this.pausePlayer()},whilePlayingDOMUpdates:function(a,b){var c=a.position,d=a.duration,e=100*(c/d)+"%";this.playingTrackPosition=c;this.get("hasUniversalPlaybar")&&this.playingBarNode.setStyle("width",
e);this.get("currentTrack.hasTimebar")&&this.get("currentTrack").playingBarNode.setStyle("width",e);this.updateTimer(c,d,b)},updateTimer:function(a,b,c){this.countingDown&&(a=b-a);b=Math.floor(a/1E3%60);a=Math.floor(a/6E4);10>b&&(b="0"+b);c=a+":"+b;this.get("hasUniversalPlaybar")&&(this.minutesNode.set("text",a),this.secondsNode.set("text",b));this.get("currentTrack.hasTimebar")&&this.get("currentTrack.timerNode").set("text",c)},stopPlayBarAndTimer:function(){this.get("hasUniversalPlaybar")&&this.playingBarNode.setStyle("width",
"0%");this.get("currentTrack.timeCnnrNode")&&this.get("currentTrack.timeCnnrNode.playingBarNode").setStyle("width","0%");this.updateTimer(0,this.get("currentTrack").audioObject.duration)},finishLoading:function(a,b){var c=a.position,d=Math.floor(c/1E3%60),c=Math.floor(c/6E4);10>d&&(d="0"+d);this.get("hasUniversalPlaybar")&&(this.durMinutesNode.set("text",c),this.durSecondsNode.set("text",d),this.loadingBarNode.setStyle("width","100%"));this.get("currentTrack").hasTimebar&&this.get("currentTrack").loadingBarNode.setStyle("width",
"100%")},setLoadingBar:function(a,b){if(a.loaded&&a.bytesLoaded===a.bytesTotal)return this.finishLoading(a);var c=100*(a.bytesLoaded/a.bytesTotal);isNaN(c)||(c=c.toString()+"%",this.get("hasUniversalPlaybar")&&this.loadingBarNode.setStyle("width",c),this.get("currentTrack").timeCnnrNode&&this.get("currentTrack").timeCnnrNode.loadingBarNode.setStyle("width",c))},resetTimebars:function(){a.Array.each(this.get("trackArray"),function(a,b){a.hasTimebar&&a.audioObject&&(a.playingBarNode.setStyle("width",
0),a.domNode.one(".track-time").set("innerHTML",a.duration))},this)},setCurrentTrack:function(a,b){a&&(this.get("currentTrack")&&this.get("currentTrack").audioObject&&c(),this.set("currentTrack",a),this.get("hasUniversalPlaybar")&&(this.artistNameNode.set("text",a.domNode.getData("artist")),this.trackTitleNode.set("text",a.domNode.getData("title"))),this.trackListNode.all(".track").removeClass("selected"),a.domNode.addClass("selected"),b||this.playCurrentTrack())},isTrackPlaying:function(a){a=a||
this.get("currentTrack");return 0!==a.audioObject.playState&&!a.audioObject.paused},bindTrackLink:function(a){this._registerEvent(a.domNode.one(".track-info").on("click",function(b){b.halt();this.get("currentTrack")===a?(a.audioObject.setPosition(0),1!==a.audioObject.playState&&this.setCurrentTrack(a,!1)):(this.resetTimebars(),this.setCurrentTrack(a,!1))},this));this._registerEvent(a.domNode.on("dblclick",function(a){a.halt();this.isTrackPlaying()&&this.get("currentTrack").audioObject.setPosition(0)},
this))},playCurrentTrack:function(){this.pausePlayer();b(g);this.playerNode.addClass("playing").removeClass("paused");var c=this.get("currentTrack").audioObject;c.isHTML5?c.play():setTimeout(a.bind(function(){c.play()},this),150)},stopPlayer:function(){this.playerNode.removeClass("playing").removeClass("paused");this.get("currentTrack").audioObject.stop();this.stopPlayBarAndTimer()},pausePlayer:function(){var a=this.get("currentTrack");this.playerNode&&(a&&a.audioObject)&&(this.playerNode.addClass("paused").removeClass("playing"),
a.audioObject.pause())},setVolume:function(a){this.volumeBarNode&&this.volumeScrubNode.setStyle("left",a+"%");this._soundManager.setVolume(this.get("currentTrack").audioObject.id,a)}},{ATTRS:{playButton:{value:"a.button"},pauseButton:{},stopButton:{},volumeBar:{},nowPlaying:{},prevButton:{},nextButton:{},hasUniversalPlaybar:{value:!1},playingTrackPosition:{value:0},currentTrack:{value:{}},trackArray:{value:[]},countingDown:{value:!1}}});a.config.win.Squarespace.onInitialize(a,function(){a.all(".sqs-audio-playlist").each(function(b,
c){new a.Squarespace.Widgets.AlbumPlayer({contentBox:b,render:!0})})})},"1.0",{requires:["widget","querystring"]});
(function(){var a;a=function(){var a,b,c,e=0;this.makeHtml=function(e){a=[];b=[];c=[];e=e.replace(/~/g,"~T");e=e.replace(/\$/g,"~D");e=e.replace(/\r\n/g,"\n");e=e.replace(/\r/g,"\n");e=I("\n\n"+e+"\n\n");e=e.replace(/^[ \t]+$/mg,"");e=f(e);e=g(e);e=k(e);e=E(e);e=e.replace(/~D/g,"$$");return e=e.replace(/~T/g,"~")};var g=function(c){return c=c.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)[ \t]+["'(](.+?)["')][ \t]*)?(?:\n+|$)/gm,function(c,e,f,g,h){e=e.toLowerCase();a[e]=
D(f);if(g)return g+h;h&&(b[e]=h.replace(/"/g,"&quot;"));return""})},f=function(a){a=a.replace(/\n/g,"\n\n");a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,h);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,h);a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,h);a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,
h);a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,h);return a=a.replace(/\n\n/g,"\n")},h=function(a,b){var d;d=b.replace(/\n\n/g,"\n");d=d.replace(/^\n/,"");d=d.replace(/\n+$/g,"");return d="\n\n~K"+(c.push(d)-1)+"K\n\n"},k=function(a){a=t(a);var b=v("<hr />");a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b);a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,b);a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,b);a=u(a);a=s(a);a=z(a);a=f(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,
"");var d=a.split(/\n{2,}/g);a=[];for(var b=d.length,e=0;e<b;e++){var g=d[e];0<=g.search(/~K(\d+)K/g)?a.push(g):0<=g.search(/\S/)&&(g=l(g),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",a.push(g))}b=a.length;for(e=0;e<b;e++)for(;0<=a[e].search(/~K(\d+)K/);)d=c[RegExp.$1],d=d.replace(/\$/g,"$$$$"),a[e]=a[e].replace(/~K\d+K/,d);return a=a.join("\n\n")},l=function(a){a=w(a);a=n(a);a=a.replace(/\\(\\)/g,H);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,H);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,
q);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,q);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,p);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,p);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,p);a=K(a);a=D(a);a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>");a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>");return a=a.replace(/  +\n/g," <br />\n")},n=function(a){return a=
a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=A(a,"\\`*_")})},p=function(c,e,f,g,h,k,l,n){void 0==n&&(n="");c=g.toLowerCase();if(""==h)if(""==c&&(c=f.toLowerCase().replace(/ ?\n/g," ")),void 0!=a[c])h=a[c],void 0!=b[c]&&(n=b[c]);else if(-1<e.search(/\(\s*\)$/m))h="";else return e;h=A(h,"*_");e='<a href="'+h+'"';""!=n&&(n=n.replace(/"/g,"&quot;"),n=A(n,"*_"),e+=' title="'+n+'"');return e+(">"+f+"</a>")},q=function(c,
e,f,g,h,k,l,n){c=f;g=g.toLowerCase();n||(n="");if(""==h)if(""==g&&(g=c.toLowerCase().replace(/ ?\n/g," ")),void 0!=a[g])h=a[g],void 0!=b[g]&&(n=b[g]);else return e;c=c.replace(/"/g,"&quot;");h=A(h,"*_");e='<img src="'+h+'" alt="'+c+'"';n=n.replace(/"/g,"&quot;");n=A(n,"*_");return e=e+(' title="'+n+'"')+" />"},t=function(a){function b(a){return a.replace(/[^\w]/g,"").toLowerCase()}a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,c){return v('<h1 id="'+b(c)+'">'+l(c)+"</h1>")});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,
function(a,c){return v('<h2 id="'+b(c)+'">'+l(c)+"</h2>")});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,c,d){a=c.length;return v("<h"+a+' id="'+b(d)+'">'+l(d)+"</h"+a+">")})},r,u=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;e?a=a.replace(b,function(a,b,c){a=b;c=-1<c.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=r(a);a=a.replace(/\s+$/,"");return"<"+c+">"+a+"</"+c+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,
a=a.replace(b,function(a,b,c,d){a=c;d=-1<d.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=r(a);return b+"<"+d+">\n"+a+"</"+d+">\n"}));return a=a.replace(/~0/,"")};r=function(a){e++;a=a.replace(/\n{2,}$/,"\n");a=(a+"~0").replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,c,d,e){a=e;b||-1<a.search(/\n{2,}/)?a=k(S(a)):(a=u(S(a)),a=a.replace(/\n$/,""),a=l(a));return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");e--;return a};var s=
function(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){a=y(S(b));a=I(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");a="<pre><code>"+a+"\n</code></pre>";return v(a)+c});return a=a.replace(/~0/,"")},v=function(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(c.push(a)-1)+"K\n\n"},w=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){a=d.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=y(a);return b+
"<code>"+a+"</code>"})},y=function(a){a=a.replace(/&/g,"&amp;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=A(a,"*_{}[]\\",!1)},z=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c;c=b.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");c=k(c);c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return v("<blockquote>\n"+
c+"\n</blockquote>")})},D=function(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},K=function(a){a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>');return a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return B(E(b))})},B=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){a=a.charCodeAt(0);return"&#x"+("0123456789ABCDEF".charAt(a>>4)+"0123456789ABCDEF".charAt(a&
15))+";"},function(a){return a}];a=("mailto:"+a).replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=0.9<c?b[2](a):0.45<c?b[1](a):b[0](a)}return a});a='<a href="'+a+'">'+a+"</a>";return a=a.replace(/">.+:/g,'">')},E=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})},S=function(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")},I=function(a){a=a.replace(/\t(?=\t)/g,"    ");
a=a.replace(/\t/g,"~A~B");a=a.replace(/~B(.+?)~A/g,function(a,b,c){a=b;b=4-a.length%4;for(c=0;c<b;c++)a+=" ";return a});a=a.replace(/~A/g,"    ");return a=a.replace(/~B/g,"")},A=function(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(RegExp(b,"g"),H)},H=function(a,b){return"~E"+b.charCodeAt(0)+"E"}};YUI.add("squarespace-markdown",function(d){d.namespace("Squarespace.Lang");d.Squarespace.Lang.markdownToHTML=function(b){return!b?"":(new a).makeHtml(b)}},"1.0",
{requires:[]})})();
YUI.add("squarespace-frontend-plugin-oneline-node-editor",function(a){a.namespace("Squarespace.Plugin").OnelineNodeEditor=a.Base.create("OnelineNodeEditor",a.Plugin.Base,[],{initializer:function(){this._parentNode=this.get("host").get("parentNode");var d=this.get("data");this._parentNode.addClass("sqs-disable-drag-selection");this.get("host").hide();d=new a.Squarespace.ContentModel.Html({engine:"textNoBreak",source:d,html:d});d.after("htmlChange",function(a){this.get("host").setContent(this.get("data"));this.set("data",
a.newVal);this.set("dirty",!0)},this);this._htmlContentWidget=new a.Squarespace.Content.Html({render:this._parentNode,model:d,referenceNode:this.get("host")});d=this._htmlContentWidget.get("boundingBox");this.get("host").insert(d,"after");this._htmlContentWidget.set("editable",!0)},destructor:function(){this._htmlContentWidget.destroy();this.get("host").show();this._parentNode.removeClass("sqs-disable-drag-selection")}},{NS:"onelineNodeEditor",ATTRS:{data:{validator:a.Lang.isString},dirty:{value:!1}}})},
"1.0",{requires:["plugin","squarespace-block-content-html"]});
YUI.add("squarespace-layout-insert-block-menu-web-base",function(a){var d=a.namespace("Squarespace.Layout").InsertBlockMenuWebBase=a.Base.create("layoutInsertBlockMenuBase",a.Overlay,[a.WidgetParent,a.Squarespace.Layout.InsertBlockMenuMixin],{initializer:function(){a.Event.defineOutside("mousedown");this._bb=this.get("boundingBox");this._cb=this.get("contentBox");this._cb.plug(a.Squarespace.ScrollLock)},bindUI:function(){this._bb.on("mousedownoutside",this.hide,this);if(!this._bb.getComputedStyle("position").match("sticky"))this._cb.on("scroll",
this._onScroll,this)},renderUI:function(){this._renderMenuIcons(this._getInsertableBlockItems());this.get("visible")||this._cb.hide()},destructor:function(){this._cb.unplug(a.Squarespace.ScrollLock);this._hideOnScroll&&this._hideOnScroll.detach()},_getInsertableBlockItems:function(){throw Error("_getInsertableBlockItems not implemented");},_renderMenuIcons:function(b){var c=this.get("editController").getRenderableBlocks(this.get("editMode")),d=a.Squarespace.Block.Label,g=a.Squarespace.Block.Icon,
f=a.Squarespace.BlockTypeByString;this.labels=[];a.Array.each(b,function(b){var k=this.add({type:d,label:b.label,render:this._cb}).item(0),l=a.Node.create('<div class="sqs-block-icon-container"></div>');this.labels.push(k);this._cb.append(l);a.Array.each(b.items,function(a){a=c.get(f[a]);a=new g(a);a.render(l);this._icons.push(a)},this)},this)},_getDefaultDropInfo:function(){var a=this.get("targetNode");return{node:a,region:a.get("region"),direction:this.get("direction"),layout:a.ancestor(".sqs-layout").LayoutEditor}},
_onScroll:function(){for(var b=this._cb.get("region").top,c=a.Array.map(this.labels,function(a,c){var d=a.get("boundingBox").get("region"),d=b-d.top;return 0<d?d:null},this),d=this.labels.length-1;0<=d;d--)this.labels[d].get("contentBox").setStyle("top",c[d])},_onFocusedChange:function(a){a.newVal?this.show():a.newVal!==a.prevVal&&!a.newVal&&this.hideMenu()},show:function(){a.Lang.isValue(a.Squarespace.DIALOG_ZINDEX_BASE)&&this.set("zIndex",a.Squarespace.DIALOG_ZINDEX_BASE+1);this._cb.show();d.superclass.show.call(this);
this._bindBlurOnScroll()},hide:function(){d.superclass.hide.call(this);this._cb.show()},hideMenu:function(){this._cb.hide();this._cb.set("scrollTop",0);a.DD.DDM.activeDrag||this.hide()},_bindBlurOnScroll:function(){var a=this.get("layoutScrollNode"),c=a.get("scrollTop");this._hideOnScroll=a.on("scroll",function(){10<Math.abs(a.get("scrollTop")-c)&&(this._hideOnScroll.detach(),this.blur())},this)}},{CSS_PREFIX:"sqs-layout-insert-block-menu",ATTRS:{render:{value:!0},constrain:{value:!0},tabIndex:{value:0},
visible:{value:!1},width:{value:315},height:{value:420},zIndex:{value:30011},direction:{value:"top"},targetNode:{},scrollNode:{},layoutScrollNode:{getter:function(){var b=this.get("targetNode").ancestor(".sqs-layout-scroll");return b?b:a.one(a.config.doc)}},layoutNode:{getter:function(){return this.get("targetNode").ancestor(".sqs-layout")}},editController:{readOnly:!0,valueFn:function(){return a.Squarespace.EditControllerWebApp.getInstance()}}}})},"1.0",{requires:"overlay widget-parent event-outside squarespace-util squarespace-block-label squarespace-layout-insert-block-menu-mixin squarespace-layout-renderable-blocks-web-app".split(" ")});
YUI.add("squarespace-variant-row-inputs",function(a){a.namespace("Squarespace.Widgets.Variants");var d=a.Squarespace.Widgets.Variants.VariantCellInput=a.Base.create("variantCellInput",a.Squarespace.Widgets.DataWidget,[],{renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("contentBox"),c=this.get("title");a.Lang.isValue(c)&&b.append(a.Node.create('<div class="title">'+c+"</div>"));c=a.Node.create('<input type="text"></input>');b.append(c);c.setAttribute("name",this.get("name"));c.set("value",
this.get("data"))},bindUI:function(){d.superclass.bindUI.call(this);var b=this.get("contentBox").one("input");b.after(["change","valuechange"],function(a){this.set("data",this._getInputValue())},this);b.on("click",b.select);b.on("key",function(){this.fire("edit-next-row-requested")},"press:13",this);var c=this.get("userOption");a.Lang.isValue(c)&&c.after("optionNameChange",function(a){this.set("name",c.get("optionName"))},this)},_getInputValue:function(){return this.get("contentBox").one("input").get("value").trim()},
disable:function(b){this.set("disabled",!0);this.get("contentBox").one("input").set("disabled",!0);a.Lang.isValue(b)&&this.get("contentBox").one("input").set("value",b)},enable:function(b){this.set("disabled",!1);this.get("contentBox").one("input").set("disabled",!1);a.Lang.isValue(b)&&this.get("contentBox").one("input").set("value",b)}},{CSS_PREFIX:"sqs-variant-cell-input",ATTRS:{title:{value:null},userOption:{value:null},name:{value:null}}}),b=a.Squarespace.Widgets.Variants.VariantCellNumericInput=
a.Base.create("variantCellNumericInput",d,[],{renderUI:function(){b.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(a.Squarespace.Plugin.NumericFormatter,this.get("numericFormatterConfig"))},_getInputValue:function(){return this.get("contentBox").one("input").numericFormatterPlugin.get("data")}},{CSS_PREFIX:"sqs-variant-cell-numeric-input",ATTRS:{numericFormatterConfig:{value:null}}}),c=a.Squarespace.Widgets.Variants.VariantCellMoneyInput=a.Base.create("variantCellMoneyInput",
d,[],{renderUI:function(){c.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(a.Squarespace.Plugin.MoneyFormatter)},_getInputValue:function(){return this.get("contentBox").one("input").moneyFormatterPlugin.get("data")}},{CSS_PREFIX:"sqs-variant-cell-money-input"}),e=a.Base.create("pricingInput",a.Base,[],{initializer:function(){var b=this.get("hostNode");b.plug(a.Squarespace.Animations.Flyout,{duration:0.1});var c=b.flyoutPlugin;this._flyout=c;var d=a.Node.create('<div class="flyout-variant-edit"><div class="fields"></div><div class="notch"></div></div>');
d.addClass(this.get("name"));c.setAttrs({node:d,alignment:"tc"});b.on("click",this.showFlyout,this);c.on("shown",function(){a.Lang.isValue(d.one("input:enabled"))&&d.one("input:enabled").focus()},this);d.delegate("key",function(){this.fire("edit-next-row-requested")},"press:13","input",this);a.Array.each(this.get("fields"),function(a){a.render(d.one(".fields"));a.after("dataChange",function(){this.set("data",this._getFieldData())},this)},this)},showFlyout:function(){this._flyout.show();this._syncFieldsFromData();
this.fire("open")},closeFlyout:function(){this.set("data",this._getFieldData());this._flyout.hide();this.fire("close")},_syncFieldsFromData:function(){a.Squarespace.FormUtils.setData(this.get("fields"),this.get("data"))},_getFieldData:function(){return a.Squarespace.FormUtils.getData(this.get("fields"))}},{CSS_PREFIX:"sqs-field-flyout",ATTRS:{hostNode:{value:null},fields:{value:[]},content:{value:null},name:{value:null}}}),g=a.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget=a.Base.create("flyoutDrivenDataWidget",
a.Squarespace.Widgets.DataWidget,[],{renderUI:function(){g.superclass.renderUI.call(this);this.get("contentBox").setHTML('<span class="placeholder"></span>');this._flyout=new e(this._getFlyoutConfig());this._flyout.set("data",this.get("data"))},bindUI:function(){g.superclass.bindUI.call(this);this.get("boundingBox");this.get("data");this._flyout.after("close",function(){this.set("data",this._flyout.get("data"))},this);this._flyout.after("dataChange",function(){this.set("data",this._flyout.get("data"))},
this);this._flyout.after("edit-next-row-requested",function(){this.fire("edit-next-row-requested")},this);this._flyout.after("open",function(){this.get("dialog").setActiveFlyout({constraintClasses:".flyout-variant-edit",field:this._flyout})},this)},showFlyout:function(){this._flyout.showFlyout()},syncUI:function(){g.superclass.syncUI.call(this);var a=this.get("contentBox").one(".placeholder");this.get("data");a.setContent(this._getPlaceholderContent())},_getFlyoutConfig:function(){throw"FlyoutDrivenDataWidget._getFlyoutConfig: pleaseee implement meeee.";
},_getPlaceholderContent:function(){throw"FlyoutDrivenDataWidget._getPlaceholderContent: pleaseee implement meeee.";}},{CSS_PREFIX:"sqs-flyout-driven-data-widget",ATTRS:{dialog:{value:null}}});a.Squarespace.Widgets.Variants.PricingInput=a.Base.create("pricingInput",a.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget,[],{_getFlyoutConfig:function(){var b=this.get("data"),d=this.get("boundingBox"),e=new c({data:b.price,title:"Price",name:"price"}),g=new a.Squarespace.Widgets.BasicCheck({data:b.onSale,
title:"On Sale",name:"onSale"});g.after("dataChange",function(){g.get("data")?e.disable():e.enable()},this);return{hostNode:d,dialog:this.get("dialog"),name:"pricing",fields:[e,new c({data:b.salePrice,title:"Sale Price",name:"salePrice"}),g]}},_getPlaceholderContent:function(){var b=this.get("data"),c=a.Squarespace.Commerce.moneyString(b.price);return b.onSale?a.Squarespace.Commerce.moneyString(b.salePrice)+' <span class="original-price">'+c+"<span>":c}},{CSS_PREFIX:"sqs-pricing-input",ATTRS:{data:{value:{price:100,
salePrice:0,onSale:!1}},name:{value:"pricing"}}});a.Squarespace.Widgets.Variants.StockInput=a.Base.create("stockInput",a.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget,[],{_getFlyoutConfig:function(){var c=this.get("boundingBox"),d=this.get("data"),e=new b({data:d.qtyInStock,title:"Quantity In Stock",name:"qtyInStock"}),g=new a.Squarespace.Widgets.BasicCheck({data:d.onSale,title:"Unlimited",name:"unlimited"});g.after("dataChange",function(){g.get("data")?e.disable("\u221e"):e.enable(e.get("data"))},
this);return{hostNode:c,name:"stock",dialog:this.get("dialog"),fields:[e,g]}},_getPlaceholderContent:function(){var a=this.get("data");return a.unlimited?"\u221e":a.qtyInStock}},{CSS_PREFIX:"sqs-stock-input",ATTRS:{data:{value:{qtyInStock:0,unlimited:!1}},name:{value:"stock"}}});a.Squarespace.Widgets.Variants.DimensionsInput=a.Base.create("dimensionsInput",a.Squarespace.Widgets.Variants.FlyoutDrivenDataWidget,[],{_getFlyoutConfig:function(){var c=this.get("boundingBox"),d=this.get("data"),e=this.get("measurementStandard")===
a.Squarespace.MeasurementStandard.IMPERIAL?"in.":"cm",g=new b({data:d.len,title:"Length",name:"len",numericFormatterConfig:{postfixUnit:e}}),n=new b({data:d.width,title:"Width",name:"width",numericFormatterConfig:{postfixUnit:e}}),d=new b({data:d.height,title:"Height",name:"height",numericFormatterConfig:{postfixUnit:e}});return{hostNode:c,name:"dimensions",dialog:this.get("dialog"),fields:[g,n,d]}},_getPlaceholderContent:function(){var a=this.get("data");return 0===a.len||0===a.width||0===a.height?
"\u2014":[a.len,a.width,a.height].join('<span class="x">\u2715</span>')}},{CSS_PREFIX:"sqs-dimensions-input",ATTRS:{data:{value:{len:0,width:0,height:0}},name:{value:"stock"},measurementStandard:{value:null}}})},"1.0",{requires:"base node widget-child squarespace-ss-widget squarespace-basic-check squarespace-animations squarespace-panel squarespace-plugin-money-formatter squarespace-plugin-numeric-formatter squarespace-form-utils".split(" ")});
YUI.add("squarespace-list",function(a){var d=a.namespace("Squarespace.DialogFields").List=a.Base.create("list",a.Squarespace.DialogField2,[],{initializer:function(a){var c=this.getProperty("DATA_STATES");(a=a.data)?(this.set("dataState",this.getProperty("DATA_STATES").LOADED),this._addItems(a)):(this.after(this.get("id")+"|dataStateChange",function(a){a.newVal===c.LOADED&&this._addItems(a.data||this.get("data"))},this),this._loadData())},renderUI:function(){d.superclass.renderUI.call(this);var a=
this.get("boundingBox"),c=this.get("strings");a.one("button.add-item").setContent(c.addButton);a.one(".list-title").setContent(c.title);c=a.one(".list-items .empty");c.setContent(this.get("strings.emptyText"));c.show();c=a.one(".add-item");this.get("showAddControl")?c.show():c.hide();this._childrenContainer=a.one(".list-items")},bindUI:function(){d.superclass.bindUI.call(this);var b=this.get("boundingBox");b.on(this.get("id")+"|click",function(b){if(b.target.ancestor(".list-items",!1)){var d=b.target.ancestor("."+
a.Squarespace.DialogField2.CSS_PREFIX,!0).getAttribute("id"),d=this.getFieldById(d);null===d?console.warn(this.name+": Field widget not found, no event will fire."):this.fire("list-item-click",{originalClickEvent:b,field:d,fieldData:d.get("data")})}},this);b.one("button.add-item").on(this.get("id")+"|click",function(){this.fire("add-requested")},this)},syncUI:function(){d.superclass.syncUI.call(this);var a=this.get("data"),c=this.get("boundingBox").one(".list-items").one(".empty");this.clearItems();
a&&a.length?(this._addItems(a),c.hide()):c.show()},getFieldById:function(a){var c=null;this.some(function(d){return d.get("boundingBox").get("id")===a?(c=d,!0):!1});return c},_addItems:function(b){if(!a.Lang.isArray(b))throw this.name+": List data was not an array";a.Array.each(b,function(a){this._addItem(a)},this)},_addItem:function(a){this.get("rendered")&&this.get("boundingBox").one(".list-items .empty").hide();a=this.add({childType:this.get("listItemConstructor"),data:a},0).item(0);if(!a)throw this.name+
": Creating list item failed.";a.after(this.get("id")+"|dataChange",this._updateItem,this);a.after("destroy",function(a){this._removeItem(a.target)},this);return a},addItem:function(b){var c=this._addItem(b),d=this._parseURLObject(this.get("apiURLs.createURL")),g=d.url,f=d.responseDataProperty;g&&a.Data.post({url:g,data:b,success:function(d){this.get("mergeResponseData")&&c.set("data",a.merge(b,f?d[f]:d),{silent:!0})},failure:function(a){console.warn(this.name+": Failed to save item, reverting.");
c.destroy()}},this);return c},removeItem:function(a){-1===this.indexOf(a)?console.warn(this.name+": That item is not in this list"):a.destroy()},_removeItem:function(b){var c=b.get("boundingBox");c.remove();var d=this._parseURLObject(this.get("apiURLs.deleteURL")).url,g=a.bind(function(){b.get("destroyed")||this.remove(this.indexOf(b));this.isEmpty()&&this.get("contentBox").one(".list-items .empty").show()},this);d?a.Data.post({url:d,data:b.get("data"),success:g,failure:function(){c.appendTo(this._childrenContainer)}},
this):g()},clearItems:function(){for(;0<this.size();)this._removeItem(this.item(0),!1);this.get("boundingBox").one(".list-items .empty").show()},_loadData:function(){var b=this.getProperty("DATA_STATES");this.set("dataState",b.LOADING);var c=this.get("apiURLs");if(!c||!this._parseURLObject(c.readURL).url)this.set("dataState",b.LOADED);else{var c=this._parseURLObject(c.readURL),d=c.responseDataProperty,g=c.responseDataSanitizer;a.Data.get({url:c.url,data:this.get("requestData")||{},success:function(c){a.Lang.isFunction(g)&&
(c=g(c));c=d?c[d]:c;this.set("data",c);this.set("dataState",b.LOADED,{data:c})},failure:function(){this.get("boundingBox").one(".list-items").setContent(this.get("strings.loadFail"));this.set("dataState",b.LOAD_FAILED)}},this)}},_parseURLObject:function(b){var c={url:null,requestData:null,responseDataProperty:null,responseDataSanitizer:null};return!b?c:a.Lang.isString(b)?a.merge(c,{url:b||null}):a.merge(c,{url:b.url||null,requestData:b.requestData||null,responseDataProperty:b.responseDataProperty||
null,responseDataSanitizer:b.responseDataSanitizer||null})},_updateItem:function(b){var c=this._parseURLObject(this.get("apiURLs.updateURL")).url;if(c&&!b.silent){var d=b.target,g=d.get("data");a.Data.post({url:c,data:g,success:function(b){this.get("mergeResponseData")&&(b=this.get("mergeResponseDataProperty"),d.set("data",a.merge(g,b?responseData[b]:responseData),{silent:!0}))},failure:function(a){d.set("data",b.prevVal,{silent:!0})}},this)}}},{CSS_PREFIX:"sqs-list",ASYNC_DATA:!0,TEMPLATE:'<div class="controls"><button class="add-item" type="button"></button></div><div class="list-title"></div><div class="list-items"><div class="empty"></div></div>',
ATTRS:{strings:{value:{title:"Set strings.title to something.",addButton:"Add Item",emptyText:"No items.",loadFail:"Unable to load items."}},data:{value:[],getter:function(){var a=[];this.each(function(c){a.push(c.get("data"))},this);return a}},apiURLs:{value:{createURL:null,readURL:null,updateURL:null,deleteURL:null}},listItemConstructor:{value:a.Squarespace.DialogField2},requestData:{value:null},responseDataProperty:{value:null},mergeResponseData:{value:!0,validator:a.Lang.isBoolean},mergeResponseDataProperty:{value:null},
showAddControl:{value:!0}}})},"1.0",{requires:["widget-child","widget-parent","squarespace-dialog","squarespace-dialog-field-2"]});
YUI.add("squarespace-dialog-state-picker",function(a){function d(b,e){if(!a.Lang.isObject(b)||!a.Lang.isObject(e))return b===e;var g=!0;a.Object.each(b,function(b,c){a.Lang.isObject(b)&&a.Lang.isObject(e[c])?g=g&&d(b,e[c]):b!==e[c]&&(g=!1)});return g}a.namespace("Squarespace.DialogFields");var b=a.Squarespace.DialogFields.Statepicker2=a.Base.create("statepicker",a.Squarespace.DialogField2,[a.WidgetParent],{renderUI:function(){b.superclass.renderUI.call(this);var a=this.get("contentBox");this.stateLabel=
a.one(".field-workflow-title");this.stateDesc=a.one(".field-workflow-description");this.buildStateMenu()},bindUI:function(){b.superclass.bindUI.call(this);this.on("*:stateSelected",this.onStateChosen,this)},onStateChosen:function(a){console.log("state chosen!!",a.target.get("data"));this.each(function(b){b.set("isSelected",a.target===b)},this);this.set("data",a.target.get("data.key"))},getStateType:function(){var a=this.get("data"),a=this.get("states")[a.state].stateDesc,a=/\[\s*([^|\]]+?)\s*(?:\|([^]]*))?\s*\]/g.exec(a);
return null!==a?String(a[1]).toLowerCase():!1},buildStateMenu:function(){this.get("contentBox");var a=this.get("stateOrder"),b=this.get("states");this._renderStatesObject(b,a)},_renderStatesObject:function(b,d){var g=a.Array.map(d,function(a,d){var e=b[a];e.key=a;return e});a.Array.each(g,this._renderState,this)},_renderState:function(b,d){var g=this.get("data.state"),f=this.get("contentBox").one(".sqs-state-picker-options");if(!f)throw"No element to attach states to.";this.add({childType:a.Squarespace.DialogFields.StateOption,
isSelected:g===b.key,data:b,render:f})},didDataChange:function(){return d(this.get("data"),this._initialData)}},{CSS_PREFIX:"sqs-state-picker",TEMPLATE:'<div class="sqs-state-picker-wrapper"><div class="sqs-state-picker-options"></div></div>',ATTRS:{strings:{},data:{getter:function(b){return a.Lang.isObject(b)?a.merge(b,{}):b}},states:{},stateOrder:{},stateType:{},durationOffset:{value:-1},allowNever:{}}})},"1.0",{requires:["base","base-build","squarespace-dialog-fields","squarespace-dialog-state-option",
"squarespace-dialog-field-2"]});
YUI.add("squarespace-content-item-types-selector",function(a){var d={};d[a.Squarespace.Enums.RecordType.DIGITALGOOD]="Squarespace will automatically send customers a secure link to the file lasting 24 hours";d[a.Squarespace.Enums.RecordType.STORE_ITEM]="A package must be shipped by the merchant.";a.namespace("Squarespace.ContentItemTypes").Selector=a.Base.create("ContentItemTypesSelector",a.Squarespace.ModelEditorDialog,[],{initializer:function(){var b=this.get("dialog");b.on("datachange",function(c){c=
c.get("data");var d=this.get("onContentItemTypeSelected");if(d)b.updateTitle(a.Squarespace.DialogStates.LOADING),b.showSaveOverlay(),d(this.getContentItemConfiguration(c),function(){b.hideSaveOverlay();b.close()});else throw"No onContentItemTypeSelected handler function?";},this)},getContentItemConfiguration:function(b){var c=a.Array.find(this.get("acceptTypes"),function(a){return a.value==b}),d={recordType:c.recordType};c.customType&&(d.customContent={customType:c.customType});c.recordType==a.Squarespace.Enums.RecordType.STORE_ITEM&&
(d.structuredContent={productType:c.productType});return d}},{ATTRS:{onContentItemTypeSelected:{},acceptTypes:{valueFn:function(){var b=a.Squarespace.Singletons.Template.get("customTypes"),c=a.Object.keys(b),e=[];a.Array.each(this.get("model").get("acceptTypes"),function(g){var f=a.Squarespace.Enums.RecordType.valueForString(g),h=a.Squarespace.Enums.RecordType.titleForValue(f),k;a.Lang.isNull(f)&&-1!==c.indexOf(g)&&(k=b[g],f=a.Squarespace.Enums.RecordType.valueForString(k.get("base")),h=k.get("title"));
if(!f)return new a.Squarespace.Widgets.Alert({"strings.title":"Custom Type Configuration Not Found","strings.message":'Configuration not found for accept type "'+g+'". Please double check the collection configuration.'}),null;if(f==a.Squarespace.Enums.RecordType.STORE_ITEM)e.push({icon:"store-item-physical",title:"Physical",value:"store-item-physical",description:"A package must be shipped by the merchant.",recordType:a.Squarespace.Enums.RecordType.STORE_ITEM,productType:a.Squarespace.ProductTypes.PHYSICAL}),
e.push({icon:"store-item-digital-good",title:"Digital",value:"store-item-digital-good",description:"Squarespace will send customers a secure link to the file lasting 24 hours.",recordType:a.Squarespace.Enums.RecordType.STORE_ITEM,productType:a.Squarespace.ProductTypes.DIGITAL}),e.push({icon:"store-item-service",title:"Service",value:"store-item-service",description:"A service must be rendered. Services do not have shipping costs applied.",recordType:a.Squarespace.Enums.RecordType.STORE_ITEM,productType:a.Squarespace.ProductTypes.SERVICE});
else{var l=a.Squarespace.Enums.RecordType.stringForValue(f);if(!a.Lang.isValue(h))return console.warn('Could not find title for acceptType "'+g+'"'),null;e.push({icon:l,title:h,value:g,description:d[f],recordType:f,customType:k?k.get("name"):null})}},this);return e=e.filter(function(a){return null!==a})}},dialogConfig:{valueFn:function(){return{width:{$valueFn:function(b){return b.get("collectionType")==a.Squarespace.CollectionTypes.PRODUCT?600:370}},name:{$valueFn:function(b){return b.get("collectionType")==
a.Squarespace.CollectionTypes.PRODUCT?"productType":"content type"}},overlay:0.5,style:"flyout",closeOthers:!1,discardChangesConfirmation:!1,flyoutPointerDirection:"centered",loadingText:"Loading...",tabs:[{title:{$valueFn:function(b){return b.get("collectionType")==a.Squarespace.CollectionTypes.PRODUCT?"Select Product Type":b.get("addText")}},icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{$valueFn:a.bind(function(b){var c=this.get("acceptTypes"),d=3>c.length?c.length:3;b.get("collectionType")==
a.Squarespace.CollectionTypes.PRODUCT&&(d=1);return{ctor:a.Squarespace.DialogFields.MultiOption,config:{numeric:!1,options:c,columns:d}}},this)}]}]}}}}});a.namespace("Squarespace.Mixins").AddContentItemHandlerMixin=a.Base.create("AddContentItemHandlerMixin",a.Base,[],{_createNewContentItemAndShowEditor:function(b,c){var d=this.get("collection"),g=this._createNewContentItem(b),f=new (a.Squarespace.ContentItemEditorFactory.getEditor(g,this.get("itemEditorOptions")))({model:g}),h=g.on("save",function(a){(!a.options||
!a.options.headers||!a.options.headers["X-AutoSave"])&&d.items.add(g)},this);f.on("visibleChange",function(a){a.newVal||h.detach()});c();f.show();return f},_createNewContentItem:function(b){var c=this.get("collection"),d={collectionId:c.get("id")};if(c.get("ordering")===a.Squarespace.CollectionOrdering.USER||c.get("ordering")===a.Squarespace.CollectionOrdering.MUSIC_ALBUM)d.displayIndex=c.get("nextDisplayIndex");b=new a.Squarespace.Models.ContentItem(a.merge(b,d));a.Squarespace.Utils.isDamaskEnabled()&&
c.items.add(b);return b},handleAddContentRequest:function(){var b=new a.Squarespace.ContentItemTypes.Selector({model:this.get("collectionConfiguration"),onContentItemTypeSelected:a.bind(this._createNewContentItemAndShowEditor,this)}),c=b.get("acceptTypes"),d=this.get("selectorAnchorNode"),g=this.get("collection"),f=a.Squarespace.Constants.MAX_TRACKS_IN_ALBUM;if(g.get("ordering")===a.Squarespace.CollectionOrdering.MUSIC_ALBUM&&g.get("nextDisplayIndex")>=f)new a.Squarespace.Widgets.Alert({"strings.title":"Max Size Reached",
"strings.message":"This album has a maximum size of "+f+" tracks."});else{if(0===c.length)new a.Squarespace.Widgets.Alert({"strings.title":"Configuration Error","strings.message":"There are no valid accept types defined for the collection type "+this.get("collectionConfiguration").get("title")+"."});else{if(1===c.length){this._createNewContentItemAndShowEditor(b.getContentItemConfiguration(c[0].value),function(){});return}d&&b.set("anchorNode",d)}g.isNew()?b.show():g.load({},function(){(new a.Promise(function(b){g.get("type")!==
a.Squarespace.CollectionTypes.PRODUCT?b({isAtOrOverLimit:!1}):a.Data.get({url:"/api/commerce/inventory/violation",success:function(a){b(a)}})})).then(function(c){if(c.isAtOrOverProductLimit)if(c.blockUserAction)(new a.Squarespace.Widgets.Confirmation({"strings.cancel":"Not Now","strings.confirm":"Go to Upgrade","strings.title":"Product Limit Reached","strings.message":c.message})).on("confirm",CONFIG_PANEL.goToUpgrade);else(new a.Squarespace.Widgets.Confirmation({"strings.cancel":"Not Now","strings.confirm":"Continue",
"strings.title":"Warning: Product Limit","strings.message":c.message})).on("confirm",b.show,b);else g.get("itemCountExceeded")?new a.Squarespace.Widgets.Alert({"strings.title":"Max Size Reached","strings.message":"This page has a maximum size of "+g.get("maxItemCount")+" items."}):b.show()})},this)}}},{ATTRS:{itemEditorOptions:{value:{}},collectionConfiguration:{},collection:{},selectorAnchorNode:{}}})},"1.0",{requires:"squarespace-model-editor squarespace-content-item-types-enum-record-type squarespace-util squarespace-enum squarespace-widgets-alert squarespace-widgets-confirmation".split(" ")});
YUI.add("squarespace-block-markdown",function(a){a.namespace("Squarespace.ContentModel").MarkdownBlock=a.Base.create("MarkdownContentModel",a.Model,[],{},{ATTRS:{wysiwyg:{value:{engine:"code",mode:"markdown",isSource:!1,source:""}},html:{value:""}}});a.namespace("Squarespace.Block").Markdown=a.Base.create("block-markdown",a.Squarespace.Block.Base,[],{initializer:function(){this.get("editController").isMobileApp()&&this._populateEmptyHtml()},bindUI:function(){this.get("model").on("change",this.syncUI,
this)},syncUI:function(){var a=this.get("model").get("html");this.get("contentBox").setHTML(a);this.fire("widget:contentUpdate")},_populateEmptyHtml:function(){var d=this.get("model"),b=d.get("wysiwyg.source");b&&!d.get("html")&&d.set("html",a.Squarespace.Lang.markdownToHTML(b))},isEmpty:function(){return!this.get("model").get("html")}},{CSS_PREFIX:"sqs-block-markdown",MODEL:a.Squarespace.ContentModel.MarkdownBlock,ATTRS:{editor:{valueFn:function(){return a.Squarespace.Block.Editor.Markdown}},mobileEditor:{valueFn:function(){return a.Squarespace.Block.Editor.MarkdownMobile}},
emailEditor:{valueFn:function(){return a.Squarespace.Block.Editor.MarkdownEmail}}}})},"1.0",{requires:"base model squarespace-block-base squarespace-markdown squarespace-ss-widget widget-parent".split(" ")});
YUI.add("squarespace-dialog-site-user-service-connect-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-site-user-service-connect.html"]=a(function(a,b,d,f,h){this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};var k,l=this.escapeExpression;f=d.blockHelperMissing;a='<div class="sqs-content-inner">\n\n    <div class="text">\n        ';k={hash:{},inverse:this.noop,fn:this.program(1,function(a,b){var c,e;c='\n        <div class="title">';
(e=d.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,e="function"===typeof e?e.apply(a):e);return c+=l(e)+'</div>\n        <div class="message">Click to connect</div>\n        '},h),data:h};(h=d.strings)?h=h.call(b,k):(h=b.strings,h="function"===typeof h?h.apply(b):h);d.strings||(h=f.call(b,h,k));if(h||0===h)a+=h;return a+'\n    </div>\n\n    <div class="fields"></div>\n\n    <div class="icon"></div>\n\n</div>\n'})})();a.Handlebars.registerPartial("dialog-site-user-service-connect.html".replace("/",
"."),d.templates["dialog-site-user-service-connect.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-dialog-product-chooser",function(a){a.Squarespace.ProductChooserModes={squarespace:Class.create({DATA_PROPERTY:"id",URL:"/api/content-items/search",TEMPLATE:'<div class="thumbnail-wrapper"><img src="/item/{id}?format=100w" class="thumbnail"/></div><div class="description"><div class="text">{title}</div><div class="author">{numVariants} {variantText}</div></div>',TITLE:"Find A Product",render:function(b){return a.Lang.sub(this.TEMPLATE,{id:b.id,title:b.title,numVariants:b.variants.length,
variantText:1!=b.variants.length?"variants":"variant"})},acResultFormatter:function(b,c){return a.Array.map(c,function(a){return'<div class="ac-product">'+this.render(a.raw)+"</div>"},this)},getAcRequestTemplate:function(){var b;return b="?q={query}"+a.Lang.sub("&collectionType={collectionType}&recordType={recordType}",{collectionType:a.Squarespace.CollectionTypes.PRODUCT,recordType:a.Squarespace.Enums.RecordType.STORE_ITEM})}}),amazon:Class.create({DATA_PROPERTY:"asin",URL:"/api/config/AmazonProductSearch",
TEMPLATE:'<div class="thumbnail-wrapper"><img src="{thumbUrl}" class="thumbnail"/></div><div class="description"><div class="text">{title}</div><div class="author">{author}</div></div>',TITLE:"Search For Product Keywords or paste product URL",render:function(b){return a.Lang.sub(this.TEMPLATE,{thumbUrl:b.imageUrlMedium,title:b.title,author:this._formatByline(b)})},acResultFormatter:function(b,c){return a.Array.map(c,function(a){return'<div class="ac-product">'+this.render(a.raw,a.highlighted)+"</div>"},
this)},getAcRequestTemplate:function(){return"?q={query}"},_formatByline:function(a){return a.authors&&a.authors.length?"By "+a.authors.join(", "):a.artists&&a.artists.length?"By "+a.artists.join(", "):a.actors&&a.actors.length?"Starring "+a.actors.join(", "):a.manufacturer}})};a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.ProductChooser=a.Base.create("productChooser",a.Squarespace.DialogField2,[],{initializer:function(b){this._mode=new (a.Squarespace.ProductChooserModes[this.get("mode")])},
destructor:function(){this._autoCompleteField&&this._autoCompleteField.destroy()},renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("contentBox");this._hintNode=a.appendChild('<div class="hint">'+this._mode.TITLE+"</div>");this._productSearchNode=a.appendChild('<div class="product-search"></div>');this._productPreviewNode=a.appendChild('<div class="product-preview"></div>');this._autoCompleteField=this._createAutoCompleteField();this._autoCompleteField.render(this._productSearchNode)},
bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("contentBox"),c=this._autoCompleteField;a.delegate("click",function(){this.set("data",null)},".clear-selected-product",this);c.on("select",this._onAutoCompleteSelect,this);c.on("blur",c.hideError,this)},syncUI:function(){d.superclass.syncUI.call(this);var b=this.get("contentBox"),c=this._hintNode,e=this._autoCompleteField;e.clear();e.focus();this._updatePreview(this.get("data"));a.Lang.isValue(this.get("data"))?(b.addClass("has-data"),
b.removeClass("no-data"),c.setContent("Selected Product")):(b.addClass("no-data"),b.removeClass("has-data"),c.setContent("Find A Product"))},focus:function(){this._autoCompleteField.focus()},getErrors:function(){return this.get("required")&&!a.Lang.isValue(this.get("data"))?["You must choose a product"]:[]},_onAutoCompleteSelect:function(){var b=this._autoCompleteField,c=b.get("data"),b=b.get("dataObject");a.Lang.isValue(c)&&("amazon"===this.get("mode")?this.set("data",b):this.set("data",c))},_updatePreview:function(b){if(a.Lang.isValue(b))if("squarespace"===
this.get("mode")&&a.Lang.isString(b))this._getProductItem(b);else{var c=this._productPreviewNode;b=this._mode.render(b)+'<div class="clear-selected-wrapper"><div class="clear-selected-product"></div></div>';c.setContent(b);c.setStyle("opacity",0);c.show("fadeIn",{duration:0.25})}},_getProductItem:function(b){a.Data.get({url:"/api/commondata/GetItem",data:{itemId:b},success:function(a){this._updatePreview(a.item)},failure:function(a){this.set("data",null)}},this)},_createAutoCompleteField:function(){var b=
this._mode,b={source:this._createDataSource(),requestTemplate:b.getAcRequestTemplate(),resultTextLocator:"title",resultFormatter:a.bind(b.acResultFormatter,b),maxResults:this.get("maxResults")},b=a.merge(b,this.get("acConfig"));return new a.Squarespace.DialogFields.AutoComplete({"strings.placeholder":"Search",requireListEntry:!0,responseDataProperty:this._mode.DATA_PROPERTY,acConfig:b})},_createDataSource:function(){var b=new a.DataSource.IO({source:this._mode.URL});b.plug(a.Plugin.DataSourceJSONSchema,
{schema:{resultListLocator:"amazon"===this.get("mode")?"products":""}});b.on("error",function(b){b.stopped||(b=JSON.parse(b.data.response).error,a.Lang.isValue(b)&&this._autoCompleteField.showError(b))},this);return b}},{CSS_PREFIX:"sqs-product-chooser",ATTRS:{mode:{value:"squarespace",validator:function(a){if(-1!==["squarespace","amazon"].indexOf(a))return!0;console.error("ProductChooser: invalid attributte mode.");return!1},writeOnce:"initOnly"},maxResults:{validator:a.Squarespace.AttrValidators.isNumber,
writeOnce:"initOnly"},acConfig:{validator:a.Squarespace.AttrValidators.isObject,writeOnce:"initOnly",value:{}}}})},"1.0",{requires:"base datasource squarespace-dialog-field-2 squarespace-dialog-auto-complete squarespace-util squarespace-content-item-types-enum-record-type squarespace-attr-validators".split(" ")});
YUI.add("squarespace-plugin-node-expander",function(a){a.namespace("Squarespace.Plugins").NodeExpander=a.Base.create("NodeExpander",a.Plugin.Base,[],{initializer:function(){var d=this.get("node");d.addClass("sqs-node-expander");this._button=d.appendChild('<div class="sqs-node-expander-button"><div class="arrow-top"></div><div class="arrow-bottom"></div></div>');this._placeholderNode=a.Node.create("<div></div>");this.publishEvents();this.bindEvents()},publishEvents:function(){this.publish("expand-start",
{emitFacade:!0,defaultFn:this._expand});this.publish("expand-end",{emitFacade:!0});this.publish("contract-start",{emitFacade:!0,defaultFn:this._contract});this.publish("contract-end",{emitFacade:!0})},bindEvents:function(){this._button.on("tap",this.toggleExpanded,null,this);this.after("expandedChange",function(a){this._button.toggleClass("sqs-node-expander-active",!!a.newVal);a.newVal?this.fire("expand-start"):this.fire("contract-start")},this)},_expand:function(){var a=this.get("node");a.insert(this._placeholderNode.setStyles({width:a.get("offsetWidth"),
height:a.get("offsetHeight")}),"after");var b=a.get("region");a.addClass("sqs-node-expander-active");a.setStyles({position:"fixed",top:b.top,left:b.left,right:window.innerWidth-b.right,bottom:window.innerHeight-b.bottom,zIndex:101});a.anim({top:0,left:0,right:0,bottom:0},{duration:0.5,end:function(){this.fire("expand-end")}},this).run()},_contract:function(){var a=this.get("node"),b=this._placeholderNode.get("region");a.anim({top:b.top,left:b.left,right:window.innerWidth-b.right,bottom:window.innerHeight-
b.bottom,zIndex:101},{end:function(){this._placeholderNode.remove();a.removeClass("sqs-node-expander-active");a.setStyles({position:null,top:null,left:null,right:null,bottom:null});this.fire("contract-end")}},this).run()},toggleExpanded:function(){this.set("expanded",!this.get("expanded"))},destructor:function(){this._button.remove();this.get("node").removeClass("sqs-node-expander")}},{NS:"NodeExpander",ATTRS:{expanded:{value:!1},node:{valueFn:function(){return this.get("host")}}}})},"1.0",{requires:["base-build",
"plugin","node"]});
YUI.add("squarespace-node-flyover",function(a){var d=a.namespace("Squarespace.Animations").Flyover=a.Base.create("flyoverPlugin",a.Squarespace.Animations.Flyout,[],{_getIntendedMaskPosition:function(){var b=d.superclass._getIntendedMaskPosition.call(this),c=this.get("host").get("region").width,e=this.get("host").get("region").height,g=this.get("paddingOffset"),f=g,h=g,k=0,l=0;a.Lang.isObject(g)&&(f=a.Object.hasKey(g,"x")?g.x:0,h=a.Object.hasKey(g,"y")?g.y:0);var g=this.get("alignment"),n=a.Squarespace.Animations.Flyout;
switch(g){case n.TC:case n.BC:break;case n.BR:case n.TR:l=f;break;case n.BL:case n.TL:l=-1*f;break;case n.LT:case n.LC:case n.LR:l=c+f;break;case n.RT:case n.RC:case n.RB:l=-1*(c+f);break;default:throw"Flyover errror: Unhandled parentClass (but maybe I should have thrown this earlier...)";}switch(g){case n.BL:case n.BC:case n.BR:k=-1*(e+h);break;case n.TL:case n.TC:case n.TR:k=e+h;break;case n.LC:case n.RC:break;case n.RT:case n.RB:case n.LT:case n.LR:k=h;break;default:throw"Flyover errror: Unhandled direction (but maybe I should have thrown this earlier...)";
}b.y+=k;b.x+=l;return b}},{NS:"flyoutOver",ATTRS:{overlay:{value:!0},paddingOffset:{value:{}}}})},"1.0",{requires:["base","base-build","squarespace-dialog-fields","squarespace-dialog-field-2","squarespace-node-flyout"]});
YUI.add("squarespace-block-social-summary",function(a){var d=a.namespace("Squarespace.Block").SocialSummaryBase=a.Base.create("block-social-summary",a.Squarespace.Block.Summary,[],{_setDefaultContent:function(){this.get("model").setAttrs(this._getDefaultContent())},bindUI:function(){d.superclass.bindUI.call(this)},_renderSuccess:function(a){d.superclass._renderSuccess.call(this,a);this._togglePolling()},destructor:function(){this.stopRenderPolling()},startRenderPolling:function(){this._synchronizingRenderTimer||
(this._synchronizingRenderTimer=a.later(3E3,this,function(){this.render()},[],!0))},stopRenderPolling:function(){this._synchronizingRenderTimer&&(this._synchronizingRenderTimer.cancel(),this._synchronizingRenderTimer=null)},_togglePolling:function(){var b=this.get("contentBox");a.Lang.isNull(b.one(".sqs-state-message.synchronizing"))?this.stopRenderPolling():this.startRenderPolling()},_getDefaultContent:function(){return{title:!0,thumbnail:!0,excerpt:!0,pageSize:10,collectionId:"",filter:{}}}},{CSS_PREFIX:"sqs-block-social-summary",
MODEL:a.Squarespace.ContentModel.SocialSummaryBlock,ATTRS:{defaultContentModel:{valueFn:"_getDefaultContent"},editor:{value:a.Squarespace.Block.Editor.Dialog},type:{value:a.Squarespace.BlockType.SOCIAL_SUMMARY}}})},"1.0",{requires:["base","squarespace-enum","squarespace-block-summary","squarespace-block-social-summary-model-editor"]});
YUI.add("squarespace-editor-collection",function(a){var d="iTunesDescription iTunesAuthor iTunesSubtitle iTunesSummary iTunesKeywords iTunesCategories iTunesOwner iTunesOwnerEmail iTunesImage iTunesImageDescription iTunesExplicit iTunesNewFeedUrl".split(" "),b=a.namespace("Squarespace.Editor").Collection=a.Base.create("CollectionEditor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){var b=a.getField("iTunesEnabled");b&&!b.getValue()&&this._hideITunesFields();
this._bindEnabledFieldConfirmation();this._bindDuplicatePageButton();this._bindSetAsHomepageButton()},this);a.on("tab-focused",function(b){if("syndication"===b.tabName&&(b=a.getField("iTunesEnabled")))this[b.getValue()?"_showITunesFields":"_hideITunesFields"]()},this);a.on("datachange",function(b){var d=b.getName();b=b.getValue();var f=this.get("model");if("iTunesEnabled"===d)this[b?"_showITunesFields":"_hideITunesFields"]();else"navigationTitle"===d?(f.set("navigationTitle",b),a.getField("title").set("data",
b)):"title"===d&&f.set("title",b)},this);a.on("cancel",function(){this.get("model").resetToLastRead()},this);a.on("button-setFront",this._changeHomepageCollectionId,this);a.on("button-duplicate",this._duplicatePage,this);a.on("button-toggleEnabled",this._toggleEnabled,this);a.on("remove-requested",this._removeCollection,this)},_showITunesFields:function(){var b=this.get("dialog");a.Array.each(d,function(a){(a=b.getField(a))&&a.temporaryShow()},this)},_bindEnabledFieldConfirmation:function(){var b=
this.get("dialog").getField("enabled");if(b)b.on("dataChange",function(d){"_bindEnabledFieldConfirmation"!==d.source&&(d.halt(),this._toggleEnabled().then(a.bind(function(){b.set("data",d.newVal,{source:"_bindEnabledFieldConfirmation"})},this)))},this)},_bindDuplicatePageButton:function(){var a=this.get("dialog").getField("duplicate");a&&a.setAttrs({onClick:this._duplicatePage,context:this})},_bindSetAsHomepageButton:function(){var b=this.get("dialog").getField("setAsHomepage");if(b){var d=this.get("template"),
g=this.get("model"),f=function(){d.get("homepageCollectionId")==g.get("id")?(b.set("disabled",!0),new a.Squarespace.ToolTip({target:b.get("boundingBox"),title:"Already Set as Homepage",body:"This page is already set as the homepage of your site.",dialogTooltip:!0,showTimeout:200,clickToShow:!0})):b.set("disabled",!1)};d.after("homepageCollectionIdChange",f,this);f();b.setAttrs({onClick:this._changeHomepageCollectionId,context:this})}},_hideITunesFields:function(){var b=this.get("dialog");a.Array.each(d,
function(a){(a=b.getField(a))&&a.temporaryHide()},this)},_showDialog:function(){b.superclass._showDialog.call(this);var c=a.Squarespace.LayoutManager;c&&(c=c._dragSelection)&&c.disable()},_hideDialog:function(){b.superclass._hideDialog.call(this);var c=a.Squarespace.LayoutManager;c&&(c=c._dragSelection)&&c.enable()},getDialogData:function(){var c=b.superclass.getDialogData.call(this);c.passwordProtected&&(c.password=a.Squarespace.PasswordMask);a.Lang.isValue(c.mainImage)&&!a.instanceOf(c.mainImage,
a.Squarespace.Models.ContentItem)&&(c.mainImage=new a.Squarespace.Models.ContentItem(c.mainImage));delete c.items;return c},sanitizeDialogData:function(a){a=b.superclass.sanitizeDialogData(a);a.mainImageId=a.mainImage?a.mainImage.get("id"):null;a.mainImage&&(a.mainImage=a.mainImage.toJSON());return a},_changeHomepageCollectionId:function(){var b=this.get("model"),d=this.get("dialog"),g=this.get("template");if(g.get("homepageCollectionId")==b.get("id"))new a.Squarespace.Widgets.Information({"strings.title":"Already Set as Homepage",
"strings.message":"This page is already set as the homepage of your site!",position:a.Squarespace.Widgets.PositionHelper.ANCHOR.MOUSE});else(new a.Squarespace.Widgets.Confirmation({"strings.title":"Set Homepage","strings.message":"Are you sure you want to make this collection the front page of your site?  It will be the first thing visitors to your site see."})).on("confirm",function(){d.updateTitle(a.Squarespace.DialogStates.SAVING);d.showSaveOverlay();g.set("homepageCollectionId",b.get("id"));g.saveHomepageCollectionId(function(b,
c){b?(new a.Squarespace.SystemError("Something Went Wrong",b,"json")).show():(d._removeButton("setFront"),d.hideSaveOverlay())})})},_duplicatePage:function(){var b=this.get("model");(new a.Squarespace.Widgets.Confirmation({"strings.title":"Duplicate Page","strings.message":"Are you sure you want to create a copy of <strong>"+a.Escape.html(b.get("navigationTitle"))+"</strong>?"})).on("confirm",function(){a.Data.post({url:"/api/commondata/CopyCollection",data:{collectionId:b.get("id")},success:function(b){var c=
a.Squarespace.ContentCollectionCache.add(b),d=this.get("template").get("navigations").getHiddenNavigation().get("itemList").create({collectionId:c.get("id"),enabled:!0,title:c.get("navigationTitle"),typeName:c.get("typeName"),urlId:c.get("urlId")},a.bind(function(){this.fire("page-duplicated",{collection:c,navigationItem:d})},this))}},this);this.hide()},this)},_removeCollection:function(b){var d=this.get("model");b=d.get("title");if(d.get("id")==this.get("template").get("homepageCollectionId"))new a.Squarespace.Widgets.Alert({"strings.title":"Cannot Delete Homepage",
"strings.message":"This page cannot be deleted because it is your homepage. Please assign a new homepage before deleting this page."});else(new a.Squarespace.Widgets.Confirmation({"strings.title":"Delete "+a.Escape.html(b),"strings.message":"Are you sure you want to delete <strong>"+a.Escape.html(b)+"</strong>?"})).on("confirm",function(){this.get("dialog").close();d.destroy({remove:!0})},this)},_toggleEnabled:function(b){return new a.Squarespace.Promises.create(function(b,c){var d=this.get("model"),
h=!d.get("enabled"),k=a.bind(function(){h&&!d.get("enabled")?((new a.Squarespace.Widgets.Confirmation({"strings.confirm":"Upgrade","strings.title":"Page Limit Reached","strings.message":"This collection cannot be enabled because you have exceeded the maximum number of pages allowed by your current plan (20). Upgrade to the <strong>Unlimited</strong> plan to enable more pages."})).on("confirm",function(){CONFIG_PANEL.getHistory().replace({module:"settings","settings-subPanelName":"billing-settings"})},
this),c()):b()},this);if(h)d.set("enabled",!0),d.save(k);else(new a.Squarespace.Widgets.Confirmation({"strings.title":"Disable Collection","strings.message":"Are you sure you wish to disable this collection?"})).on("confirm",function(){d.set("enabled",!1);d.save(k)},this)},this)}},{ATTRS:{dialogConfigContext:{value:a.Squarespace.CollectionEditorSettings},dialogConfig:{value:{name:"collection-configuration",waitForServerOnClose:!0,initialDataByReference:!0,loadingText:"Loading Configuration...",style:"standard major",
position:"right",verticalHeight:"full",width:550,overlay:0.5,tabs:[{$include:"tabs.primary"},{$include:"tabs.advanced",$when:function(b){b=b.get("ordering")!=a.Squarespace.CollectionOrdering.CUSTOM&&b.get("type")==a.Squarespace.CollectionTypes.GENERIC||b.get("type")==a.Squarespace.CollectionTypes.PRODUCT;var d=a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG_CHANGE_STRUCTURE);return b||d}},{$include:"tabs.syndication",$when:function(b){return a.Squarespace.ContentCollectionUtils.hasSupportForSyndication(b)}}],
buttons:{$include:"buttons"}}},template:{valueFn:function(){return a.Squarespace.Singletons.Template}}}})},"1.0",{requires:["squarespace-editor-collection-settings","squarespace-models-content-collection","squarespace-model-editor","squarespace-widgets-alert","squarespace-widgets-confirmation"]});
YUI.add("squarespace-dialog-pricing-placeholder",function(a){a.namespace("Squarespace");var d=a.namespace("Squarespace.DialogFields").PricingPlaceholder=a.Base.create("pricingPlaceholder",a.Squarespace.DialogField2,[],{initializer:function(){},renderUI:function(){d.superclass.renderUI.call(this);this.get("boundingBox").addClass("field-wrapper").addClass("major");this.get("contentBox").one(".placeholder").plug(a.Squarespace.Plugin.PulseWarn,{iterations:1,color:"#C1B12E"});this._edited=!1},bindUI:function(){this.get("contentBox").on("click",
function(){this.fire("clicked")},this);this.after("dataChange",function(){this._edited=!0;this.syncUI()},this)},syncUI:function(){var b={structuredContent:this.get("data")};this.get("contentBox").one(".pricing").setHTML(a.Squarespace.Commerce.priceString(b))},didDataChange:function(){return this._edited},pulseWarn:function(){this.get("contentBox").one(".placeholder").pulseWarn.warn()}},{CSS_PREFIX:"sqs-pricing-placeholder",HANDLEBARS_TEMPLATE:"dialog-pricing-placeholder.html",ATTRS:{strings:{value:{title:"Pricing",
prompt:"Edit"}}}})},"1.0",{requires:"base json squarespace-animations squarespace-commerce-utils squarespace-dialog-field-2 squarespace-dialog-pricing-placeholder-template squarespace-hb-product-types squarespace-hb-product-price-string squarespace-plugin-pulsewarn".split(" ")});
YUI.add("squarespace-dialog-content-selector-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["dialog-content-selector.html"]=a(function(a,b,d,f,h){function k(a,b){var c,e;c='\n      <div class="collection-wrapper ';if((e=d["if"].call(a,a.filter,{hash:{},inverse:z.program(5,n,b),fn:z.program(3,l,b),data:b}))||0===e)c+=e;c+=" ";if((e=d["if"].call(a,a.selected,{hash:{},inverse:z.noop,fn:z.program(7,p,b),data:b}))||0===e)c+=e;c+='" data-url-id="';(e=
d.urlId)?e=e.call(a,{hash:{},data:b}):(e=a.urlId,e=typeof e===K?e.apply(a):e);c+=B(e)+'" data-collection-id="';(e=d.id)?e=e.call(a,{hash:{},data:b}):(e=a.id,e=typeof e===K?e.apply(a):e);c+=B(e)+'">\n        <div class="collection ';(e=d.className)?e=e.call(a,{hash:{},data:b}):(e=a.className,e=typeof e===K?e.apply(a):e);c+=B(e)+'">\n          <div class="collection-title">';(e=d.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,e=typeof e===K?e.apply(a):e);c+=B(e)+"</div>\n          ";if((e=d["if"].call(a,
a.filter,{hash:{},inverse:z.noop,fn:z.program(9,q,b),data:b}))||0===e)c+=e;c+="\n\n          ";if((e=d["if"].call(a,a.dropdown,{hash:{},inverse:z.noop,fn:z.program(12,r,b),data:b}))||0===e)c+=e;c+="\n        </div>\n\n        ";if((e=d["if"].call(a,a.dropdown,{hash:{},inverse:z.noop,fn:z.program(14,u,b),data:b}))||0===e)c+=e;return c+"\n      </div>\n    "}function l(a,b){return"has-content-stat-filter"}function n(a,b){return"no-filter"}function p(a,b){return"selected"}function q(a,b){var c,e,f;c=
'\n            <div class="collection-filter">(';f={hash:{compare:"tag"},inverse:z.noop,fn:z.program(10,t,b),data:b};if((f=(e=d.if_eq||a.if_eq,e?e.call(a,(e=a.filter,null==e||!1===e?e:e.type),f):D.call(a,"if_eq",(e=a.filter,null==e||!1===e?e:e.type),f)))||0===f)c+=f;return c+=B((e=(e=a.filter,null==e||!1===e?e:e.name),typeof e===K?e.apply(a):e))+'</div>\n            <div class="right-paren">)</div>\n          '}function t(a,b){return"#"}function r(a,b){return'\n            <div class="dropdown-button"></div>\n          '}
function u(a,b){var c,e;c='\n          <div class="dropdown">\n            ';if((e=d["if"].call(a,a.categories,{hash:{},inverse:z.noop,fn:z.program(15,s,b),data:b}))||0===e)c+=e;c+="\n\n            ";if((e=d["if"].call(a,a.tags,{hash:{},inverse:z.noop,fn:z.program(19,y,b),data:b}))||0===e)c+=e;return c+"\n          </div>\n        "}function s(a,b){var c,e;c='\n              <div class="categories">\n                <div class="icon-title">Choose Category</div>\n                <select>\n                  <option value="none-selected">None</option>\n                  ';
if((e=d.each.call(a,a.categories,{hash:{},inverse:z.noop,fn:z.program(16,v,b),data:b}))||0===e)c+=e;return c+"\n                </select>\n              </div>\n            "}function v(a,b){var c,e;c='\n                    <option value="';(e=d.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===K?e.apply(a):e);c+=B(e)+'" ';if((e=d["if"].call(a,a.selected,{hash:{},inverse:z.noop,fn:z.program(17,w,b),data:b}))||0===e)c+=e;c+=">";(e=d.name)?e=e.call(a,{hash:{},data:b}):(e=a.name,e=typeof e===
K?e.apply(a):e);return c+=B(e)+"</option>\n                  "}function w(a,b){return'selected="selected"'}function y(a,b){var c,e;c='\n              <div class="tags">\n                <div class="icon-title">Choose Tag</div>\n                <select>\n                  <option value="none-selected">None</option>\n                  ';if((e=d.each.call(a,a.tags,{hash:{},inverse:z.noop,fn:z.program(16,v,b),data:b}))||0===e)c+=e;return c+"\n                </select>\n              </div>\n            "}
this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);h=h||{};a="";var z=this,D=d.helperMissing,K="function",B=this.escapeExpression,E=d.blockHelperMissing;if((f=d.each.call(b,b.collectionGroups,{hash:{},inverse:z.noop,fn:z.program(1,function(a,b){var c,e;c='\n  <div class="collection-group" data-title="';(e=d.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,e=typeof e===K?e.apply(a):e);c+=B(e)+'">\n    <div class="collection-group-title">';(e=d.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,e=
typeof e===K?e.apply(a):e);c+=B(e)+"</div>\n\n    ";if((e=d.each.call(a,a.collectionObjects,{hash:{},inverse:z.noop,fn:z.program(2,k,b),data:b}))||0===e)c+=e;return c+"\n\n  </div>\n"},h),data:h}))||0===f)a+=f;a+="\n\n\n";h={hash:{},inverse:z.program(21,function(a,b){var c,e;c='\n  <div class="empty-message">';(e=d.emptyMessage)?e=e.call(a,{hash:{},data:b}):(e=a.emptyMessage,e=typeof e===K?e.apply(a):e);return c+=B(e)+"</div>\n"},h),fn:z.noop,data:h};(f=d.collectionGroups)?f=f.call(b,h):(f=b.collectionGroups,
f=typeof f===K?f.apply(b):f);d.collectionGroups||(f=E.call(b,f,h));if(f||0===f)a+=f;return a})})();a.Handlebars.registerPartial("dialog-content-selector.html".replace("/","."),d.templates["dialog-content-selector.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-dialog-external-member-account-descriptor",function(a){a.namespace("Squarespace.DialogFields").ExternalMemberAccountDescriptor=a.Base.create("ExternalMemberAccountDescriptor",a.Squarespace.DialogField2,[],{renderUI:function(){var d=this.get("data"),b=d.externalId.split("_")[0],c=this.get("contentBox");c.addClass("network-"+b);a.Lang.isValue(d.avatarUrl)?c.append('<img class="member-image" src="'+d.avatarUrl+'" />'):c.append('<div class="member-image-default"></div>');c.appendChild('<div class="member-info"></div>').append('<div class="member-description">Connected via '+
b.capitalize()+' as <span class="member-name">'+a.Escape.html(d.displayName)+"</div>")}},{CSS_PREFIX:"sqs-external-member-account-descriptor",ATTRS:{height:{value:52},readOnly:{value:!0}}})},"1.0",{requires:["squarespace-dialog-field-2"]});
YUI.add("squarespace-block-horizontal-rule-editor-email",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.HorizontalRuleEmail=a.Base.create("blockHorizontalRuleEditorEmail",a.Squarespace.Block.Editor.HorizontalRule,[],{initializer:function(){this.get("host").set("floatable",!1)}},{NS:"blockEditor",ATTRS:{minHSize:{value:2}}})},"1.0",{requires:["base","squarespace-block-horizontal-rule-editor"]});
YUI.add("squarespace-dialog-developer-registration",function(a){var d=a.Base.create("DeveloperRegistration",a.Squarespace.DialogField2,[],{bindUI:function(){this.get("contentBox").delegate("click",function(a){a.halt();this._edit()},"a.signup, a.edit",this);var a=this.get("data");this._registerEvent(a.after("developerAccountMarketingDetailsChange",this.syncUI,this))},syncUI:function(){this.get("contentBox").setContent(this.renderTemplate())},_edit:function(){var b=this.get("data");a.Squarespace.Singletons.DeveloperRegistrar.register(b)},
_getHBTemplateContext:function(){var b=this.get("data"),c=b.get("developerAccountMarketingDetails");return{isDeveloperWithMarketingDetails:b.get("developerAccount")&&a.Lang.isObject(c),marketingData:c}}},{CSS_PREFIX:"sqs-dialog-developer-registration",HANDLEBARS_TEMPLATE:"dialog-developer-registration.html",ATTRS:{readOnly:{value:!0},preventRenderTemplate:{value:!0}}});a.namespace("Squarespace.DialogFields").DeveloperRegistration=d},"1.0",{requires:["base","squarespace-dialog-field-2","squarespace-developer-registrar",
"squarespace-dialog-developer-registration-template"]});
YUI.add("squarespace-plugin-pulsewarn",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.PulseWarn=a.Base.create("pulseWarn",a.Plugin.Base,[],{initializer:function(d){this.config=d;this.set("color",d.color);this.set("useClass",d.useClass);this.set("targetClass",d.targetClass);this.set("iterations",d.iterations);a.Lang.isUndefined(d.interval)||this.set("interval",d.interval);this._timer=null},warn:function(){var d=this.get("host"),b=this.get("iterations"),c=d.getStyle("backgroundColor"),
e=this.get("color");a.Lang.isNull(this._timer)||(this._timer.cancel(),this._timer=null);if(this.get("useClass")){var g=this.get("targetClass"),c=this.get("interval");this.fire("start");d.addClass(g);this._timer=a.later(c,this,function(){0===b?(d.removeClass(g),this.fire("stop"),this._timer.cancel(),this._timer=null):(d.hasClass(g)?d.removeClass(g):d.addClass(g),b--)},{},!0)}else{var f=new a.Anim({node:d,to:{backgroundColor:e,opacity:0.8},easing:this.get("easingUp"),duration:this.get("duration")}),
h=new a.Anim({node:d,to:{backgroundColor:c,opacity:1},easing:this.get("easingDown"),duration:this.get("duration")});f.on("end",function(){0<b&&h.run();b--});h.on("end",function(){0<b?f.run():this.fire("stop")},this);this.fire("start");f.run()}}},{NS:"pulseWarn",ATTRS:{useClass:{value:!1},iterations:{value:3},color:{value:"#c1b12e"},interval:{value:2E3},duration:{value:0.7},easingUp:{value:a.Easing.easeInSine},easingDown:{value:a.Easing.easeOutSine}}})},"1.0",{requires:["base","plugin","anim"]});
YUI.add("squarespace-content-collection-bulk-actionable",function(a){a.namespace("Squarespace.Mixins").ContentCollectionBulkActionable=a.Base.create("ContentCollectionBulkActionable",a.Base,[a.Squarespace.TimerMixin],{initializer:function(){a.Do.after(this._renderActionTray,this,"renderUI",this);this.after("actionTrayRelativePositionFixedNodeChange",function(d){d.newVal&&a.Lang.isValue(this._actionTray)&&this._actionTray.set("relativeNode",d.newVal)},this)},destructor:function(){this._actionTray&&
this._actionTray.destroy()},_renderActionTray:function(){var d=[{label:"Select All",action:this.selectAll,context:this,className:"light no-frame"},{label:"Clear Selection",action:this.deselectAll,context:this,className:"light no-frame"},{label:"Delete",action:this.removeSelected,context:this,className:"dark no-frame"}];this.get("moveable")&&this._hasValidCollectionsToMoveTo()&&d.splice(2,0,{label:"Move Items",action:this.moveSelected,context:this,className:"dark no-frame"});this._actionTray=new a.Squarespace.Widgets.ActionTray({"strings.title":"{count} {label} Selected",
visible:!1,showThreshold:1,buttons:d,render:this.get("contentBox")});(d=this.get("actionTrayRelativePositionFixedNode"))&&this._actionTray.plug(a.Squarespace.Plugin.RelativePositionFixed,{relativeNode:d,anchor:"bottom",offset:this.get("actionTrayRelativePositionOffset")||[44,-22]})},updateActionTray:function(){this._timer(a.later(0,this,function(){this._actionTray.set("count",this.get("selection")?this.get("selection").size():0)}))},selectAll:function(){this.each(function(a){a.set("selected",1)})},
deselectAll:function(){this.each(function(a){a.set("selected",0)})},removeSelected:function(){var d=this.get("selection");if(d)(new a.Squarespace.Widgets.Confirmation({"strings.title":"Remove Selected?","strings.message":"Are you sure you wish to remove your selection? This action cannot be undone."})).on("confirm",function(){this.removeItems(d)},this)},removeItems:function(a){var b=[];a.each(function(a){a.get("item").get("id")&&b.push(a.get("item"));a.set("selected",0);a.destroy()},this);0<b.length&&
this.get("model").items.removeItems(b)},moveSelected:function(){var d=this.get("model"),b=new a.Squarespace.EditingDialog({width:380,height:300,overlay:0.5,style:"flyout",savingText:"Moving Items...",buttons:[{type:"cancel",title:"Cancel"},{type:"moveItems",title:"Move Items"}],tabs:[{title:"Select Destination Collection",scroll:!0,icon:"/universal/images-v6/icons/icon-import-16-light.png",fields:[{ctor:a.Squarespace.DialogFields.ContentSelector,config:{name:"content-selector",showCollectionTagsAndCategories:!1,
collectionFilter:{collectionType:d.get("type"),ordering:d.get("ordering")},excludeCollectionIds:[d.get("id")]}}]}]});b.on("show",function(){this.set("dragSelectionEnabled",!1)},this);b.on("dismiss",function(){this.set("dragSelectionEnabled",!0)},this);b.on("button-moveItems",function(){var c=b.getField("content-selector").get("data");a.Lang.isArray(c)&&(c=c[0]);c?(b.showSaveOverlay(),b.updateTitle(a.Squarespace.DialogStates.SAVING),a.Squarespace.ContentCollectionCache.getCollectionById(c.id,function(c){var g=
[];this.get("selection").each(function(a){g.push(a.get("item"))},this);d.items.moveItems(g,c,a.bind(function(){b.cancel()},this))},this)):new a.Squarespace.Widgets.Alert({"strings.title":"No Collection Selected","strings.message":"Please select a collection to move the selected items to."})},this);b.show()},_hasValidCollectionsToMoveTo:function(){var d=this.get("model");return 0<a.Squarespace.ContentCollectionUtils.filterCollections({collectionType:d.get("type"),ordering:d.get("ordering")},[this.get("model").get("id")]).length}},
{ATTRS:{actionTrayRelativePositionOffset:{value:[44,-22],validator:a.Lang.isArray},actionTrayRelativePositionFixedNode:{},showActionTray:{value:!0},moveable:{value:!1},multiple:{value:!0}}})},"1.0",{requires:["base-build","squarespace-timer-mixin","squarespace-tray","squarespace-widgets-alert","squarespace-widgets-confirmation"]});
YUI.add("squarespace-widgets-website-selector",function(a){a.namespace("Squarespace.Widgets");var d=a.Squarespace.Widgets.WebsiteSelector=a.Base.create("WebsiteSelector",a.Squarespace.Widgets.SSWidget,[a.WidgetParent],{initializer:function(){},renderUI:function(){d.superclass.renderUI.call(this);var b=this.get("title"),c=this.get("websites");c.isEmpty()&&(b="You do not have any existing websites, is this the right account?");var e=this.get("contentBox");a.Lang.isString(b)&&e.append(a.Node.create('<div class="select-title">'+
b+"</div>"));b=a.Node.create('<div class="member-account"></div><div class="websites"></div>');e.append(b);(new a.Squarespace.Widgets.MemberAccount({model:this.get("memberAccount"),boundingBox:e.one(".member-account")})).render();var c=this._segmentWebsites(c),g=e.one(".websites");a.Array.each(c,function(b){0<b.websites.size()&&(b=new a.Squarespace.Widgets.WebsiteList({models:b.websites,boundingBox:g,"strings.title":b.name}),this.add(b))},this)},bindUI:function(){d.superclass.bindUI.call(this);this.on("WebsiteList:selectedWebsiteChange",
function(b){a.Lang.isValue(b.newVal)&&this.set("selectedWebsite",b.newVal)},this)},_segmentWebsites:function(b){var c=new a.Squarespace.Models.ModelList,d=new a.Squarespace.Models.ModelList,g=new a.Squarespace.Models.ModelList,f=new a.Squarespace.Models.ModelList;b.each(function(b){switch(b.get("siteStatus")){case a.Squarespace.StatusConstants.PASTDUE:case a.Squarespace.StatusConstants.COMPED:case a.Squarespace.StatusConstants.ACTIVE:c.add(b);break;case a.Squarespace.StatusConstants.EXPIRED:d.add(b);
break;case a.Squarespace.StatusConstants.TRIAL:g.add(b);break;case a.Squarespace.StatusConstants.INTERNAL:f.add(b)}b.get("faviconURL")||b.set("faviconURL",b.authenticUrl+"/favicon.ico")});return[{name:"Internal",websites:f},{name:"Active",websites:c},{name:"Trial",websites:g},{name:"Expired",websites:d}]}},{CSS_PREFIX:"sqs-website-selector",ATTRS:{title:{validator:a.Squarespace.AttrValidators.isString,writeOnce:"initOnly"},memberAccount:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.MemberAccount),
writeOnce:"initOnly"},websites:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.ModelList),writeOnce:"initOnly"},selectedWebsite:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Model)}}})},"1.0",{requires:"base model squarespace-widgets-website-list squarespace-widgets-member-account squarespace-widgets-model-list squarespace-models-member-account widget-parent".split(" ")});
YUI.add("squarespace-dialog-form-preview",function(a){a.namespace("Squarespace.DialogFields");var d=a.Squarespace.DialogFields.FormPreview=a.Base.create("formPreview",a.Squarespace.DialogField2,[],{initializer:function(){this._formPreview=new a.Squarespace.Widgets.FormPreview({form:this.get("data"),hideSubmitButton:!0});this._emptyMessage=a.Node.create('<div class="no-fields">No fields. Use the form builder to add some.</div>')},destructor:function(){this._formPreview.destroy()},renderUI:function(){d.superclass.renderUI.call(this);
var a=this.get("contentBox");this._formPreview.render(a);a.append(this._emptyMessage)},syncUI:function(){d.superclass.syncUI.call(this);this._formPreview.syncUI();0<this.get("data").get("fields").length?(this._emptyMessage.hide(),this._formPreview.show()):(this._formPreview.hide(),this._emptyMessage.show())}},{CSS_PREFIX:"sqs-dialog-preview-form",ATTRS:{data:{value:null,validator:function(b){return a.instanceOf(b,a.Squarespace.Models.Form)}},readOnly:{value:!0}}})},"1.0",{requires:"base node json squarespace-dialog-field-2 squarespace-models-form squarespace-form-preview".split(" ")});
YUI.add("squarespace-block-foursquare-model",function(a){a.namespace("Squarespace.ContentModel").FoursquareBlock=a.Base.create("FoursquareBlockModel",a.Squarespace.ContentModel.SummaryGalleryBlock,[],{},{ATTRS:{}})},"1.0",{requires:["base","model","squarespace-enum","squarespace-block-summary-gallery-model"]});
YUI.add("squarespace-dialog-select",function(a){var d=a.namespace("Squarespace.DialogFields").Select=a.Base.create("select",a.Squarespace.DialogField2,[],{initializer:function(b){!a.Lang.isValue(b.data)&&a.Lang.isValue(b.defaultValue)&&this.set("data",b.defaultValue);a.Lang.isArray(b.optGroups)&&this.set("options",a.Array.reduce(b.optGroups,[],function(a,b){return a.concat(b.options)}))},renderUI:function(){d.superclass.renderUI.call(this);var a=this.get("contentBox");this._selectField=a.one("select");
this._selectField.setAttribute("name",this.get("name"));var c=this.get("dialog");c&&this._selectField.setAttribute("tabindex",c.getNextTabIndex());(c=this.get("autocompleteType"))&&this._selectField.setAttribute("x-autocompletetype",c);this._prevSelectFieldValue=null;this._renderOptions();this._updateLabel();this._updateStrings();this._updateIconClasses(this.get("icon"));this._set("errorFlyoutAnchor",a.one(".select-facade"))},bindUI:function(){d.superclass.bindUI.call(this);var a=this.get("id");this.get("contentBox");
this.after(a+"|optionsChange",function(){this._renderOptions();this._updateLabel();this.syncUI()},this);this.get("contentBox").one(".select-facade").on(a+"|click",function(a){"disabled"!==this._selectField.getAttribute("disabled")&&(a.halt(),"SELECT"!==a.target.get("tagName")&&this._selectField.simulate("mousedown"))},this);this._selectField.on("change",function(){var a=this.get("value"),b=this._selectField.get("value");b!==a&&(this.get("numeric")&&(b=parseInt(b,10)),this.set("data",b))},this);var c=
this.get("boundingBox"),e=this.getProperty("CSS_PREFIX")+"-focus";c.on(a+"|focus",function(){this._selectField.focus()},this);this._selectField.on(a+"|focus",function(){c.addClass(e)},this);this._selectField.on(a+"|blur",function(){c.removeClass(e)},this);this.after("stringsChange",this._updateStrings,this);this.after("iconChange",this._updateIcon,this)},syncUI:function(){d.superclass.syncUI.call(this);var b=this.get("data");!a.Lang.isUndefined(b)&&!a.Lang.isNull(b)&&this._uiSelectOption(b)},_updateIcon:function(a){this._updateIconClasses(a.newVal,
a.prevVal)},_updateIconClasses:function(b,c){var d=this.get("contentBox").one(".select-facade"),g=a.Lang.isString(b)&&0<b.length;a.Lang.isString(c)&&d.removeClass(c);g&&d.addClass(b);d.toggleClass("icon",g)},_updateStrings:function(a){this._renderTitle();this._renderDescription()},_renderOptions:function(){var b=this.get("options"),c=this.get("optGroups"),d=this._selectField;d.empty();a.Lang.isArray(c)?a.Array.each(c,this._renderOptGroup,this):(a.Array.each(b,function(a){this._renderOption(a,d)},
this),d.set("selectedIndex",-1))},_renderTitle:function(){var a=this.get("contentBox").one(".title");this.get("strings.title")?a.setContent(this.get("strings.title")):a.hide()},_renderDescription:function(){var a=this.get("contentBox").one(".description");this.get("strings.description")?a.setContent(this.get("strings.description")):a.hide()},_renderOptGroup:function(b){var c=a.Node.create("<optgroup></optgroup>");c.setAttribute("label",b.label);a.Array.each(b.options,function(a){this._renderOption(a,
c)},this);this._selectField.append(c)},_renderOption:function(b,c){var d=a.Node.create("<option></option>");d.setAttribute("value",b.value);d.setContent(b.label);b.disabled&&d.setAttribute("disabled","disabled");c.appendChild(d)},getOptionLabel:function(b){var c=this.get("options"),d=this.get("strings.labelTemplate")||"{label}",g="";if(a.Lang.isNull(b)||a.Lang.isUndefined(b))return g;a.Array.some(c,function(a,c){return a.value.toString()===b.toString()?(g=a.label,!0):!1},this);return a.substitute(d,
{label:g})},getOptionValue:function(b){var c=this.get("options"),d;if(a.Lang.isNull(d)||a.Lang.isUndefined(d))return d;a.Array.some(c,function(a,c){return a.label.toString()===b.toString()?(d=a.value,!0):!1},this);return d},_uiSelectOption:function(b){a.Lang.isUndefined(b)?console.warn(this.name+": Cannot select undefined value"):(a.Lang.isNull(b)||(b=b.toString(),this._selectField.set("value",b)),this._updateLabel())},_updateLabel:function(){this.hideError();var b=this.get("contentBox").one(".select-facade .label"),
c=this.get("data"),d=this.get("strings.placeholder"),g=this.getOptionLabel(c);a.Lang.isNull(c)||!g?(d?b.setContent(d):(console.warn(this.name+": No placeholder or option selected. (fieldname: "+this.get("name")+")"),b.setContent("&nbsp;")),b.addClass("empty")):(b.setContent(g),b.toggleClass("empty",0===c.length))},focus:function(){d.superclass.focus.call(this);this.get("rendered")&&this._selectField.focus()},blur:function(){d.superclass.blur.call(this);this.get("rendered")&&this._selectField.blur()},
disable:function(){d.superclass.disable.call(this);this.get("rendered")&&(this._selectField.setAttribute("disabled","disabled"),this.get("boundingBox").addClass(this.getProperty("CSS_PREFIX")+"-disabled"))},enable:function(){d.superclass.enable.call(this);this.get("rendered")&&(this._selectField.removeAttribute("disabled"),this.get("boundingBox").removeClass(this.getProperty("CSS_PREFIX")+"-disabled"))},_getErrors:function(){return this.get("required")&&this.isEmpty()?["This is a required field."]:
[]}},{CSS_PREFIX:"sqs-select",TEMPLATE:'<div class="title"></div><div class="select-facade sqs-disable-drag-selection"><div class="label"></div><select></select></div><div class="description"></div>',ATTRS:{data:{getter:function(b){return this.get("numeric")?!a.Lang.isNumber(parseInt(b,10))?0:parseInt(b,10):!a.Lang.isValue(b)?"":!a.Lang.isString(b)?b+"":b}},icon:{value:"",validator:a.Lang.isString},numeric:{value:!1},options:{value:[],setter:function(b){if(a.Lang.isArray(b))return b;if(a.Lang.isObject(b))return this.convertToOptionsArray(b)},
validator:function(b){if(!a.Lang.isArray(b))return console.warn(this.name+": options must be an array. Was:",b),!1;for(var c=b.length-1;0<=c;c--){var d=b[c];if(!d.hasOwnProperty("label"))return console.warn(this.name+": option had no label property. Was:",d),!1;if(!d.hasOwnProperty("value"))return console.warn(this.name+": option had no value property. Was:",d),!1}return!0}},optGroups:{value:null,validator:a.Squarespace.AttrValidators.isNullOrArray},strings:{value:{placeholder:"Select an option"}},
autocompleteType:a.Squarespace.AutocompleteTypeATTR},convertToOptionsArray:function(b){var c=[];if(a.Lang.isArray(b))return b;if(!a.Lang.isObject(b)&&!a.Lang.isValue(b))return console.warn("Could not convert to new style options, not an object."),c;a.Object.each(b,function(a,b){c.push({value:b,label:a.title||b})},this);return c}});a.Squarespace.DialogFields.LabeledSelect=a.Base.create("labeledSelect",a.Squarespace.DialogFields.Select,[a.Squarespace.DialogFields.DialogFieldLabel],{renderUI:function(){a.Squarespace.DialogFields.LabeledSelect.superclass.renderUI.call(this);
var b=this.get("contentBox");b.prepend('<div class="label-wrapper"></div>');this._set("errorFlyoutAnchor",b.one(".select-facade"))}},{CSS_PREFIX:"sqs-labeled-select",LABEL_CONFIG:{renderNode:".label-wrapper",forNode:"select"}})},"1.0",{requires:"base base-build node-event-simulate squarespace-dialog-field-2 squarespace-dialog-label squarespace-autocomplete-types".split(" ")});
YUI.add("squarespace-editor-member-account",function(a){var d={fields:{}};d.fields.avatar={ctor:a.Squarespace.DialogFields.FileImage,config:{name:"avatar",height:183,useFocalPoint:!1,contentLabel:"an avatar",mode:a.Squarespace.UploadModes.GLOBAL}};d.tabs={};d.tabs.account={title:{$valueFn:function(b){return b.get("pseudonymAccount")?a.Lang.sub("{action} Basic Author",{action:b.isNew()?"Add":"Edit"}):"Profile"}},tabTitle:"Account",icon:{$valueFn:function(a){return a.get("pseudonymAccount")&&a.isNew()?
"/universal/images-v6/icons/icon-plus-16-light.png":"/universal/images-v6/content/member.png?2"}},scroll:!0,fields:[{type:"splitter",fields:[{type:"stack",width:0.3,fields:[{$include:"fields.avatar"}]},{type:"stack",width:0.7,fields:[{ctor:a.Squarespace.DialogFields.Text,config:{name:"displayName","strings.placeholder":"Your Name",required:!0,submitOnEnter:!0,className:"large"}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"email","strings.placeholder":"your@email.com",required:!0,submitOnEnter:!0,
mailcheck:!0,className:"large"},$when:function(a){return!a.get("pseudonymAccount")}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"googlePlusProfile","strings.title":"Google+ Profile URL","strings.description":"By validating your site within your Google+ Profile, Google Author Rank will be enabled for your posts, making your profile show up next to them on Google search results.","strings.placeholder":"https://plus.google.com/+YourName",submitOnEnter:!0}}]}]},{ctor:a.Squarespace.DialogFields.ExternalMemberAccountDescriptor,
config:{name:"accountInfo"},$when:function(b){return a.Lang.isValue(b.get("externalId"))}}]};d.tabs.bio={tabTitle:"Bio",name:"bio",scroll:!0,fields:[{type:"splitter",fields:[{type:"stack",width:0.5,fields:[{type:"splitter",fields:[{ctor:a.Squarespace.DialogFields.Text,config:{required:!1,width:0.5,name:"firstName","strings.title":"First Name",submitOnEnter:!0}},{ctor:a.Squarespace.DialogFields.Text,config:{required:!1,width:0.49,name:"lastName","strings.title":"Last Name",submitOnEnter:!0}}]},{ctor:a.Squarespace.DialogFields.Text,
config:{required:!1,name:"websiteUrl","strings.title":"Website",submitOnEnter:!0}},{ctor:a.Squarespace.DialogFields.TextArea,config:{name:"bio",height:240,"strings.title":"Bio"}}]},{type:"social-accounts",width:0.5,name:"socialOptions",maxCount:7}]}]};d.tabs.location={tabTitle:"Location",name:"location",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Map,config:{height:400,verticalSpan:!0,countHeight:!0,name:"location",title:"Enter a location...",titleStyle:"inline"}}]};d.tabs.subscriptions={tabTitle:"Subscriptions",
name:"subscriptions",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.Description,config:{title:"Comment Subscriptions",text:"Squarespace will automatically notify site owners and managers of comment activity. Here you can enable or disable this feature for all the sites you manage.",padding:[10,10]}},{ctor:a.Squarespace.DialogFields.SiteSubscriptions,config:{name:"siteSubscriptions"}},{ctor:a.Squarespace.DialogFields.Description,config:{title:"Store Subscriptions",text:"Squarespace will automatically notify store owners and managers of order activity. Here you can enable or disable this feature for all the sites you manage.",
padding:[10,10]}},{ctor:a.Squarespace.DialogFields.SiteSubscriptions,config:{name:"storeSubscriptions"}}],$when:function(a){return!a.get("pseudonymAccount")}};d.tabs.developer={tabTitle:"Developer",name:"developer",scroll:!0,fields:[{ctor:a.Squarespace.DialogFields.DeveloperRegistration,config:{name:"developer"}}],$when:function(a){return!a.get("pseudonymAccount")}};d.buttons=[{type:"sendVerification",title:"Send Verification Email",$when:function(a){return a.get("eligibleForMarketingDiscount")&&
!a.get("emailVerified")}},{type:"cancel",title:"Cancel"},{type:"remove",title:"Remove Author",$when:function(a){return a.get("pseudonymAccount")&&!a.isNew()}},{type:"setPassword",title:"Change Password",$when:function(a){return!a.get("pseudonymAccount")}},{type:"saveAndClose",title:"Save"}];var b=a.namespace("Squarespace.Editor").MemberAccount=a.Base.create("MemberAccountEditor",a.Squarespace.ModelEditorDialog,[],{initializer:function(){var b=this.get("dialog");b.on("button-sendVerification",this._sendVerificationEmail,
this);b.on("button-setPassword",this._setPassword,this);b.on("remove-requested",function(){a.Squarespace.MemberPermissionUtils.createReplaceAndRemoveDialog(this.get("attachedMemberPermission"),this.get("model"),this)},this);b.on("ready",function(){b.getField("avatar").on("dataChange",function(a){a.newVal&&a.newVal.set("isGlobalFakeContentItem",!0)})})},_sendVerificationEmail:function(){var b=this.get("model");b.sendVerificationEmail().then(function(){new a.Squarespace.Widgets.Information({"strings.title":"Verification Sent",
"strings.message":"A verification email has been sent to <strong>"+b.get("email")+"</strong>. It may take several minutes for it to appear in your inbox."})},function(){new a.Squarespace.Widgets.Alert({"strings.title":"Account Verified","strings.message":"This account has already been verified."})})},_setPassword:function(){var b=this.get("model"),d=a.Squarespace.ObjectBuilder.make({style:"flyout",name:"set-password",closeOthers:!1,overlay:0.5,width:420,height:260,top:200,buttons:[{type:"cancel",
title:"Cancel"},{type:"saveAndClose",title:"Set"}],tabs:[{title:"Set Password",icon:"/universal/images-v6/dialog/login-icon.png",fields:[{$value:{ctor:a.Squarespace.DialogFields.Text,name:"currentPassword",config:{"strings.placeholder":"Current Password",classname:"large",submitOnEnter:!0,required:!0,password:!0}},$when:function(){return b.get("emailAccount")}},{ctor:a.Squarespace.DialogFields.Text,name:"newPassword",config:{"strings.placeholder":"New Password",classname:"large",submitOnEnter:!0,
required:!0,password:!0}},{ctor:a.Squarespace.DialogFields.Text,name:"newPasswordConfirm",config:{"strings.placeholder":"New Password (Again)",classname:"large",submitOnEnter:!0,required:!0,password:!0}}]}]},{},b.toJSON()),g=new a.Squarespace.EditingDialog(d);g.on("send-requested",function(){var d=g.getData();b.setPassword(d.newPassword,d.newPasswordConfirm,d.currentPassword).then(function(){new a.Squarespace.Widgets.Information({"strings.title":"Password Saved","strings.message":"Your new password has been saved."});
g.close()},function(a){g.showErrors(a.errors)})});g.show()},getDialogData:function(){var c=this.get("model"),d=b.superclass.getDialogData.call(this);d.avatar=new a.Squarespace.Models.ContentItem({id:c.get("avatarId"),mediaProcessingState:a.Squarespace.MediaProcessingState.READY,assetUrl:c.get("avatarAssetUrl"),isGlobalFakeContentItem:!0});d.accountInfo={externalId:c.get("externalId"),avatarUrl:c.get("avatarUrl"),displayName:c.get("displayName")};delete d.developerAccountMarketingDetails;delete d.developerAccount;
d.developer=c;return d},sanitizeDialogData:function(c){c=b.superclass.sanitizeDialogData(c);delete c.developer;a.Lang.isValue(c.avatar)?(c.avatarId=c.avatar.get("id"),c.avatarAssetUrl=c.avatar.get("assetUrl")):(c.avatarId=null,c.avatarAssetUrl=null);delete c.avatar;return c},save:function(c,d){var g=this.get("dialog"),f=g.getData().email,h=this.get("model");h.get("email")!=f?this.askForPassword({message:"You changed your email address to <strong>"+f+"</strong>, to be allowed to do this you need to provide your password below."}).then(a.bind(function(f){b.superclass.save.call(this,
a.merge(c,{headers:{password:f}}),d)},this),a.bind(function(){g.getField("email").setValue(h.get("email"));g.hideSaveOverlay()},this)):b.superclass.save.call(this,c,d)},askForPassword:function(b){return new a.Promise(a.bind(function(d,g){this.get("model");var f=new a.Squarespace.EditingDialog({style:"flyout",name:"get-password",closeOthers:!1,overlay:0.5,width:420,height:140,top:200,buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Save"}],tabs:[{title:"Please provide Password",
icon:"/universal/images-v6/dialog/login-icon.png",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:b.message,padding:[0,10]}},{type:"text",required:!0,password:!0,name:"password",title:"Password",style:"major",titleStyle:"left",submitOnEnter:!0}]}]});f.on("send-requested",function(){var a=f.getField("password").getValue();f.dismiss();d(a)},this);f.on("close",function(){g()},this);f.show()},this))}},{ATTRS:{dialogConfig:{value:{initialDataByReference:!0,flyoutPointerDirection:"hidden",
waitForServerOnClose:!0,closeOthers:!1,width:700,height:440,overlay:0.5,buttons:{$include:"buttons"},tabs:[{$include:"tabs.account"},{$include:"tabs.bio"},{$include:"tabs.location"},{$include:"tabs.subscriptions"},{$include:"tabs.developer"}]}},dialogConfigContext:{value:d},attachedMemberPermission:{value:null,validator:function(b){return b instanceof a.Squarespace.Models.MemberPermission}}}})},"1.0",{requires:"base squarespace-dialog-description squarespace-dialog-external-member-account-descriptor squarespace-dialog-file-image squarespace-dialog-map squarespace-dialog-developer-registration squarespace-dialog-site-subscriptions squarespace-dialog-text squarespace-dialog-text-area squarespace-member-permission-utils squarespace-model-editor squarespace-models-member-account squarespace-models-member-permission squarespace-widgets-alert squarespace-widgets-information".split(" ")});
YUI.add("squarespace-block-embed",function(a){a.namespace("Squarespace.Block").Embed=a.Base.create("block-embed",a.Squarespace.Block.ModelSyncBase,[],{_renderSuccess:function(d){var b=a.Node.create("<div></div>");b.insert(d.html);a.Squarespace.UrlUtils.securifyBlockEmbed(b);this.get("contentBox").setHTML(b)}},{CSS_PREFIX:"sqs-block-embed",ATTRS:{editor:{value:a.Squarespace.Block.Editor.Embed},type:{value:a.Squarespace.BlockType.EMBED}}})},"1.0",{requires:["squarespace-enum","squarespace-url-utils",
"squarespace-block-base-modelsync","squarespace-block-embed-editor"]});YUI.add("squarespace-models-model-list",function(a){a.namespace("Squarespace.Models");var d=a.Squarespace.Models.ModelList=a.Base.create("ModelList",a.ModelList,[a.Squarespace.ModelSync.REST],{parse:function(b){b=d.superclass.parse.call(this,b);var c=this._getResponseAttrs(b);a.Object.each(c,function(a,b){this._set(b,a)},this);return b.results},_getResponseAttrs:function(a){return{}}})},"1.0",{requires:["base","model-list","squarespace-model-sync-rest"]});
YUI.add("squarespace-connected-account-dialog-settings",function(a){a.namespace("Squarespace");var d=a.Object.getValue(Static,["SQUARESPACE_CONTEXT","website","identifier"]),b=a.Squarespace.ConnectedAccountCapabilities,c={ctor:a.Squarespace.DialogFields.StructuredInput,config:{name:"defaultPushMessage","strings.title":"Default Posting Format","strings.description":"When posting to this service from Squarespace, this will be the default message format used.",value:"New post %t from %a.",variables:{"%t":{title:"Title",
tip:"The title of this post."},"%a":{title:"Author",tip:"The author of this post."},"%u":{title:"URL",tip:"The URL to this post."}}}},e=function(a){return function(b){return b.get("serviceName")!==a}},g={$valueFn:function(a){return c},$when:e("tumblr")},f={};f[b.NONE]=[];f[b.PULL|b.PUSH|b.ICON]=[{ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Show Social Icon","strings.description":"Allow visitors to connect with you through an icon for this service on the front of your site.",name:"iconEnabled"}},
{ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Download Data","strings.description":"When new items are posted to this account, download them to Squarespace for publishing on your site.",name:"pullEnabled"}},{ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Show Push Option","strings.description":"When posting on Squarespace, show this account as a cross-publishing option.",name:"pushEnabled"}},g,{ctor:a.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":"Profile URL",
"strings.description":"Enter the URL to your profile.",submitOnEnter:!0}}];f[b.PULL|b.ICON]=[{type:"splitter",fields:[{type:"stack",width:0.5,fields:[{ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Show Social Icon","strings.description":"Allow visitors to connect with you through an icon for this service on the front of your site.",name:"iconEnabled"}}]},{type:"stack",width:0.5,fields:[{ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Download Data","strings.description":"When new items are posted to this account, download them to Squarespace for publishing on your site.",
name:"pullEnabled"}}]}]},{ctor:a.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":"Profile URL","strings.description":"Enter the URL to your profile.",submitOnEnter:!0}}];f[b.ICON]=[{ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Show Social Icon","strings.description":"Allow visitors to connect with you through an icon for this service on the front of your site.",name:"iconEnabled"}},{$value:{ctor:a.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":"Profile URL",
"strings.description":"Enter the URL to your profile.",description:"",submitOnEnter:!0}},$when:e("email")}];f[b.ICON|b.PUSH]=[{ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Show Social Icon","strings.description":"Allow visitors to connect with you through an icon for this service on the front of your site.",name:"iconEnabled"}},{ctor:a.Squarespace.DialogFields.Check,config:{"strings.title":"Show Push Option","strings.description":"When posting on Squarespace, show this account as a cross-publishing option.",
name:"pushEnabled"}},g,{$value:{ctor:a.Squarespace.DialogFields.Text,config:{name:"profileUrl","strings.title":"Profile URL","strings.description":"Enter the URL to your profile.",submitOnEnter:!0}},$when:e("tumblr")}];a.Squarespace.ConnectedAccountDialogSettingsContext={buttons:[{type:"cancel",title:"Cancel"},{type:"remove",title:"Disconnect"},{$value:{type:"reset",title:"Reset Data"},$when:function(a){return b.can(a,b.PULL)}},{type:"saveAndClose",title:"Save"}]};var h=function(b){return a.clone(f[a.Squarespace.ConnectedAccountCapabilities.get(b)])},
e=function(a){a=a.get("serviceName");return a.charAt(0).toUpperCase()+a.substr(1)+" Settings"},k={style:"flyout",flyoutPointerDirection:"centered",verticalHeight:"fit",overlay:0.5,name:"social-account-settings",closeOthers:!1,width:400,tabs:[{icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:e},fields:{$valueFn:h}}],buttons:{$include:"buttons"}},l=function(b){b=b.get("metaData.managedPages");return{ctor:a.Squarespace.DialogFields.FacebookMetaData,name:"metaData",config:{pages:a.Array.map(b,
function(a){return{label:a.name+" (Page)",value:a.id}})}}},n={flickr:a.merge(k,{width:420}),github:a.merge(k,{width:400}),smugmug:a.merge(k,{width:400}),dribbble:a.merge(k,{width:400}),vimeo:a.merge(k,{width:400}),email:a.merge(k,{width:400}),pinterest:a.merge(k,{width:400}),fivehundredpix:a.merge(k,{width:400}),google:a.merge(k,{width:400}),instagram:a.merge(k,{width:600}),foursquare:a.merge(k,{width:400}),youtube:a.merge(k,{width:330}),facebook:a.merge(k,{width:400,tabs:[{scroll:!0,icon:"/universal/images-v6/icons/icon-settings-16-light.png",
title:{$valueFn:e},fields:{$valueFn:function(b){var c=h(b);b.get("metaData")?c.push(l(b)):c.push({ctor:a.Squarespace.DialogFields.Description,config:{padding:[15,0],title:"Reconnect to Enable Push Targets",text:"Please reconnect your Facebook account to enable pushing to brand pages."}});return c}}}]}),tumblr:a.merge(k,{tabs:[{icon:"/universal/images-v6/icons/icon-settings-16-light.png",title:{$valueFn:e},fields:[{$valueFn:function(a){return h(a)[0]}},{$value:{ctor:a.Squarespace.DialogFields.Description,
config:{title:"Primary Blog",text:"Select the blog content will be pushed to.",padding:[20,0]}},$when:function(a){return a.get("metaData")}},{$valueFn:function(b){b=b.get("metaData").blogs;var c=[];a.Array.each(b,function(a,b){c.push({value:a.name,label:a.title||a.name})},this);return{ctor:a.Squarespace.DialogFields.Select,config:{className:"thin dark",name:"primaryBlog",options:c,width:0.3}}},$when:function(a){return a.get("metaData")}}]}]}),dropbox:a.merge(function(b,c){var d=a.clone(k);d.tabs[0].fields=
c;return d}(k,[{ctor:a.Squarespace.DialogFields.Description,config:{title:"Dropbox Connection Activated",text:"Your Squarespace account is connected to your Dropbox account.  Pressing the publish button from the previous screen will let you synchronize your content into Squarespace."}},{ctor:a.Squarespace.DialogFields.Description,config:{title:"Instructions",text:"After you have connected your account to Dropbox, a <strong>Squarespace</strong> folder will appear in the <strong>Apps</strong> directory of your Dropbox account.  To publish files to Squarespace, within our directory, create a folder called <strong>"+
d+"</strong> (the name of your site), and then create a sub-folder for each collection you would like to create on your Squarespace site.<br/><br/>For instance, creating a folder with images at <strong>/Apps/Squarespace/"+d+'/Test Images</strong> would create a corresponding collection called <strong>Test Images</strong> on Squarespace, and your images would be automatically transferred to that collection. If you want a specific file to be ignored by Squarespace just prefix the file name with underscrore ("_").<br/><br/>Squarespace for Dropbox currently only supports images. <br/><br/> Please note that you must press the <strong>Publish to Squarespace</strong> button from the main Connected Accounts panel to push changes from Dropbox to Squarespace &mdash; they will not be automatically uploaded.',
padding:[10,0]}}]),{width:550})};a.Squarespace.ConnectedAccountDialogSettings={get:function(b){return a.clone(n[b]||k)}}},"1.0",{requires:"squarespace-dialog-fields squarespace-dialog-fields-generators squarespace-dialog-facebook-meta-data squarespace-dialog-description squarespace-dialog-toggle squarespace-dialog-select squarespace-dialog-structured-input squarespace-connected-account-capabilities".split(" ")});
YUI.add("squarespace-block-spacer-editor-email",function(a){a.namespace("Squarespace.Block.Editor");a.Squarespace.Block.Editor.SpacerEmail=a.Base.create("blockSpacerEditorEmail",a.Squarespace.Block.Editor.Spacer,[],{initializer:function(){this.get("host").set("floatable",!1)}},{NS:"blockEditor",ATTRS:{minHSize:{value:2}}})},"1.0",{requires:["base","squarespace-block-spacer-editor"]});
YUI.add("squarespace-throttle",function(a){a.namespace("Squarespace");a.Squarespace.throttle=function(d,b,c){var e,g,f,h=null,k=0,l=function(){k=!1===c.leading?0:a.Lang.now();h=null;f=d.apply(e,g);e=g=null},n=function(){var n=a.Lang.now();!k&&!1===c.leading&&(k=n);var q=b-(n-k);e=this;g=arguments;0>=q?(h&&(h.cancel(),h=null),k=n,f=d.apply(e,g),e=g=null):!h&&!1!==c.trailing&&(h=a.later(q,e,l,g));return f};n.cancel=function(){h&&h.cancel()};return n}},"1.0",{requires:[]});
YUI.add("squarespace-oauth-authenticator",function(a){a.namespace("Squarespace");a.Squarespace.OAuthAuthenticator=a.Base.create("oauthAuthenticator",a.Base,[],{authenticate:function(d,b,c){a.Lang.isObject(b)&&(c=b,b=void 0);d=a.Squarespace.ExternalServiceProviders[d.toUpperCase()];b=a.merge({serviceProvider:d,type:"website",existingAccountId:b},c);this._oauthWindow=window.open("/auth/ExternalAuthenticationInitiate?"+a.QueryString.stringify(b),"AddConnectedAccount","location=0,status=0,width=1020,height=520");
this.closeCheckHandle=a.later(500,this,this._closeCheck,{},!0)},_closeCheck:function(){if(this._oauthWindow.closed||window.callbackFinished)window.callbackFinished=!1,this.fire("oauth-completed"),this.closeCheckHandle.cancel()}})},"1.0",{requires:["base","base-build","querystring-stringify"]});
YUI.add("squarespace-tab-view-template",function(a){var d=a.Handlebars;(function(){var a=d.template;(d.templates=d.templates||{})["tab-view.html"]=a(function(a,b,d,f,h){function k(a,b){var c,e;c='\n    <div class="navigation-title">';(e=d.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,e=typeof e===t?e.apply(a):e);if(e||0===e)c+=e;return c+"</div>\n  "}function l(a,b){var c,e;c='\n    <div class="navigation-description">';(e=d.description)?e=e.call(a,{hash:{},data:b}):(e=a.description,e=typeof e===
t?e.apply(a):e);if(e||0===e)c+=e;return c+"</div>\n  "}function n(a,b){var c,e;c="\n      ";if((e=r.invokePartial(f["tab-view-tab-group.html"],"tab-view-tab-group.html",a,d,f,b))||0===e)c+=e;return c+"\n    "}function p(a,b){var c,e;c="\n      ";if((e=r.invokePartial(f["tab-view-tab.html"],"tab-view-tab.html",a,d,f,b))||0===e)c+=e;return c+"\n    "}this.compilerInfo=[4,">= 1.0.0"];d=this.merge(d,a.helpers);f=this.merge(f,a.partials);h=h||{};a="";var q,t="function",r=this;if((q=d["with"].call(b,b.strings,
{hash:{},inverse:r.noop,fn:r.program(1,function(a,b){var c,e;c="\n  ";if((e=d["if"].call(a,a.title,{hash:{},inverse:r.noop,fn:r.program(2,k,b),data:b}))||0===e)c+=e;c+="\n  ";if((e=d["if"].call(a,a.description,{hash:{},inverse:r.noop,fn:r.program(4,l,b),data:b}))||0===e)c+=e;return c+"\n"},h),data:h}))||0===q)a+=q;a+='\n<div class="sqs-tab-view-self">\n  ';if((q=d.each.call(b,b.widgets,{hash:{},inverse:r.noop,fn:r.program(6,function(a,b){var c,e;c="\n    ";if((e=d["if"].call(a,a.widgets,{hash:{},
inverse:r.program(9,p,b),fn:r.program(7,n,b),data:b}))||0===e)c+=e;return c+"\n  "},h),data:h}))||0===q)a+=q;return a+"\n</div>"})})();a.Handlebars.registerPartial("tab-view.html".replace("/","."),d.templates["tab-view.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-block-quote",function(a){a.namespace("Squarespace.Block").Quote=a.Base.create("block-quote",a.Squarespace.Block.ModelSyncBase,[],{},{CSS_PREFIX:"sqs-block-quote",MODEL:a.Squarespace.ContentModel.Quote,ATTRS:{editor:{value:a.Squarespace.Block.Editor.Quote}}})},"1.0",{requires:"squarespace-ss-widget squarespace-block-base-modelsync squarespace-block-quote-editor squarespace-block-quote-model squarespace-block-content-html widget-parent".split(" ")});
YUI.add("squarespace-model-list-parse",function(a){function d(){}d.prototype={parse:function(b){b=this.constructor.superclass.parse.call(this,b);return a.Lang.isObject(b)&&a.Lang.isArray(b.results)?b.results:b}};a.namespace("Squarespace").ModelListParse=d},"1.0",{requires:[]});
YUI.add("squarespace-content-item-types-product",function(a){a.namespace("Squarespace.ContentItemEditor");var d=a.Squarespace.ContentItemEditor.Product=a.Base.create("ProductPhysicalContentItemEditor",a.Squarespace.ContentItemEditor.Base,[],{initializer:function(){var a=this.get("dialog");a.on("ready",function(){a.getField("pricingPlaceholder").on("clicked",function(){a.activateTab(null,a.params.tabs[1])})},this);a.after("tab-focused",function(c){var d=a.getField("gallery");"item"===c.tabName?d.enableDragSelection():
d.disableDragSelection()},this)},getDialogData:function(){var a=d.superclass.getDialogData.call(this),c=a.structuredContent;a.customAddButtonText=c.customAddButtonText;a.useCustomAddButtonText=c.useCustomAddButtonText;a.additionalFieldsForm=c.additionalFieldsForm;a.additionalFieldsFormId=c.additionalFieldsFormId;return a},sanitizeDialogData:function(b){b=d.superclass.sanitizeDialogData.call(this,b);b.structuredContent=a.merge(b.structuredContent,{customAddButtonText:b.customAddButtonText,useCustomAddButtonText:b.useCustomAddButtonText,
additionalFieldsFormId:b.additionalFieldsFormId});delete b.customAddButtonText;delete b.useCustomAddButtonText;delete b.additionalFieldsFormId;return b},getPresentationName:function(){throw"Must implement a Presentation Name for this product type";}})},"1.0",{requires:["base","squarespace-content-item-types-base","squarespace-models-form","squarespace-util"]});
YUI.add("squarespace-layout-insert-point",function(a){var d=a.namespace("Squarespace.Layout").InsertPoint=a.Base.create("layout-insert-point",a.Plugin.Base,[],{initializer:function(){this._blockNode=this.get("host").get("boundingBox");this.after("insertPointsChange",this._bindInsertPointEvents);this._bindInsertPointEvents();this.onHostEvent("destroy",function(){this.get("controller").alignInsertPoints(this._getLayoutNode())},this);this.onHostEvent("resized",function(a){"columnChanged"===a.source&&
this.align(!0)},this);this.afterHostEvent("dropped",this._getInsertPoints,this);this.get("controller").get("enabled")&&this.align();this.registerWithController()},destructor:function(){this._clearInsertPointNodes();this._clearInsertPointEvents();this.deregisterWithController()},_getLayoutNode:function(){var a=this.get("layoutNode");a||(a=this._blockNode.ancestor(".sqs-layout"))&&this.set("layoutNode",a);return a},_getNewInsertPointNode:function(){var b=a.DOM.create('<div class="'+d.CSS_PREFIX+'"></div>');
this._docFrag.appendChild(b);return a.one(b)},_getInsertPointConfig:function(a,c,e,g){g=this._getNewInsertPointNode();"block"===a&&"bottom"===e&&g.addClass(d.CSS_PREFIX+"-topmost");g.setData("ipType",a);return{type:a,position:e,alignTo:c,node:g,offset:"row"===a?[-10,0]:null}},_getInitInsertPoints:function(){var b=this.get("host"),c=[],d=this._getLayoutNode();if(!d||!b||!b.get("boundingBox"))return console.warn("Could not init insert points",this.getAttrs()),c;this._blockNode||(this._blockNode=b.get("boundingBox"));
this._docFrag=a.config.doc.createDocumentFragment();var b=this._blockNode,g=b.ancestor(".sqs-col"),f=g?g.ancestor(".sqs-row"):null;if(g)return c.push(this._getInsertPointConfig("block",b,"top")),this._isInMultiColumnRow(g)?(this._isLastBlockInColumn()&&c.push(this._getInsertPointConfig("block",b,"bottom")),this._isFirstColumnInRow(g)&&(this._isFirstBlockInColumn()&&c.push(this._getInsertPointConfig("row",f,"top")),this._isLastBlockInColumn()&&c.push(this._getInsertPointConfig("row",f,"bottom",this._isLastRowInLayout(f))))):
this._isLastBlockInColumn()&&this._isLastRowInLayout(f)&&c.push(this._getInsertPointConfig("block",b,"bottom",!0)),this.get("divideSelectors")&&(c=c.concat(this._getDivideInsertPoints())),d.appendChild(this._docFrag),this._docFrag=null,c},_isFirstColumnInRow:function(a){return!a.previous(".sqs-col")},_isInMultiColumnRow:function(a){return 0<a.siblings(".sqs-col").size()},_isLastRowInLayout:function(a){for(;a;){if(a.next(".sqs-row, .sqs-block"))return!1;a=a.ancestor(".sqs-row",!1,".sqs-layout")}return this._blockNode.next(".sqs-row")?
!1:!0},_isFirstBlockInColumn:function(){return!this._blockNode.previous(".sqs-block:not(.sqs-destroyme)")},_isLastBlockInColumn:function(){return!this._blockNode.next(".sqs-block:not(.sqs-destroyme)")},_getDivideInsertPoints:function(){var a=this.get("divideSelectors"),a=this._savedDivideNodes=this._blockNode.all(a),c=[];1<a.size()&&a.each(function(a,b){0!==b&&c.push(this._getInsertPointConfig("content",a,"top"))},this);return c},_getInsertPoints:function(b){var c=this._blockNode,d=c.hasClass("sqs-float-left")||
c.hasClass("sqs-float-right"),g=this._isInMultiColumnRow(c.ancestor(".sqs-col")),f=this.get("insertPoints")||[],h=this.get("divideSelectors"),c=h?c.all(h):null,h=this.get("host").get("editController").getInsertMenu(this._getEditMode());if(a.Lang.isValue(h)&&h.get("visible"))return f;if(!f.length&&!d)f=this._getInitInsertPoints();else if(d)f=[];else if(c&&(!this._savedDivideNodes||!this._listsAreEqual(c,this._savedDivideNodes)))f=this._getInitInsertPoints();else if(b||g)f=this._getInitInsertPoints();
this.get("insertPoints")!==f&&this.set("insertPoints",f);return f},_listsAreEqual:function(a,c){return a.size()===c.size()&&!a.some(function(a){return-1===c.indexOf(a)})},_bindInsertPointEvents:function(){this._insertPointEvents||(this._insertPointEvents=[]);a.Array.each(this.get("insertPoints"),function(a){var c=a.node;c&&c.getDOMNode()&&(this._insertPointEvents.push(c.on("click",function(c){c.preventDefault();this._onClick(a)},this)),this._insertPointEvents.push(c.on("mouseenter",function(){this._onMouseEnter(a)},
this)),this._insertPointEvents.push(c.on("mouseleave",this._onMouseLeave,this)))},this)},_clearInsertPointNodes:function(b){b=b||this.get("insertPoints")||[];a.Array.each(b,function(a){a.node&&a.node.getDOMNode()&&a.node.remove()})},_clearInsertPointEvents:function(){if(this._insertPointEvents)for(var a=0,c=this._insertPointEvents.length;a<c;a++)this._insertPointEvents[a].detach();this._insertPointEvents=[]},align:function(b){var c=this._blockNode;if(!c||!c.getDOMNode())this.destroy();else if(b||
this.get("controller").get("enabled")){b=this._getInsertPoints(b);c=b.length;b=a.Array.filter(b,function(a){var b=a.alignTo;return!b||!b.ancestor()?(console.warn("No node to align insert point to."),a.node.remove(),!1):!0});var d=a.Array.map(b,function(a){var b=a.alignTo,c="bottom"===a.position?"bottom":"top",d=a.node.get("region"),e="content"===a.type,n=(e?this._blockNode:b).get("region").left,c=b.get("region")[c];e&&(c-=(c-b.previous().get("region").bottom)/2);n-=d.width/2;c-=d.height/2;a.offset&&
(n+=a.offset[0],c+=a.offset[1]);return{node:a.node._node,xy:[n,c]}},this);this._massSetXY(d);b.length!==c&&this.set("insertPoints",b)}},_massSetXY:function(b){var c=a.DOM;a.Array.each(b,function(a){a.pos=c.getStyle(a.node,"position");a.delta=c._getOffset(a.node);a.currentXY=c.getXY(a.node)});a.Array.each(b,function(a){a.node&&a.xy&&(null!==a.xy[0]&&c.setStyle(a.node,"left",a.xy[0]-a.currentXY[0]+a.delta[0]+"px"),null!==a.xy[1]&&c.setStyle(a.node,"top",a.xy[1]-a.currentXY[1]+a.delta[1]+"px"))},this)},
registerWithController:function(){this.get("controller").registerInsertPoint(this,this._getLayoutNode())},deregisterWithController:function(){this.get("controller").deregisterInsertPoint(this,this._getLayoutNode())},_onMouseEnter:function(a){var c=a.alignTo,d=a.position;a=a.type;var g=this.get("host").get("editController");!c||!c.inDoc()?(console.warn("no alignNode",c),this.align()):(g.setInsertMarkerLayout(this._getLayoutNode()),g.alignInsertMarker({node:c,direction:d,region:c.get("region"),type:a}))},
_onMouseLeave:function(){this.get("host").get("editController").hideInsertMarker()},_onClick:function(a){var c=d.CSS_PREFIX+"-active";a.node.addClass(c);this.openBlockMenu(a);this.toggleInsertPointsDisabled(!0);var e=this.get("host").get("editController").getInsertMenu(this._getEditMode());e.after("insertPoint|visibleChange",function(d){d.newVal||(e.detach("insertPoint|visibleChange"),a.node.removeClass(c),this.toggleInsertPointsDisabled(!1))},this);this._logMaxNumBlocks()},_logMaxNumBlocks:function(){var b=
this._getLayoutNode().all(".sqs-block:not(.sqs-block-html,.sqs-destroyme)").size();b>a.Squarespace.Constants.MAX_BLOCKS_PER_LAYOUT&&(console.warn("Appears to have "+b+" blocks in this layout."),a.Squarespace.Logger.log("Appears to have "+b+" blocks in this layout."))},openBlockMenu:function(b){b={align:{node:b.node,points:[a.WidgetPositionAlign.LC,a.WidgetPositionAlign.RC]},targetNode:b.alignTo,direction:b.position,type:b.type,scrollNode:this._getLayoutNode().LayoutEditor.get("scrollNode"),editMode:this._getEditMode()};
this.get("controller").openBlockMenu(b)},toggleInsertPointsDisabled:function(a){var c=this.get("host").get("editController");a?c.disableInsertPoints():c.enableInsertPoints()},_getEditMode:function(){return this.get("host").get("editMode")}},{NS:"insertPoint",CSS_PREFIX:"sqs-layout-insert-point",ATTRS:{insertPoints:{valueFn:"_getInitInsertPoints",setter:function(a){this._clearInsertPointNodes();this._clearInsertPointEvents();return a}},layoutNode:{value:null,validator:function(b){return null===b||
a.instanceOf(b,a.Node)}},controller:{valueFn:function(){return a.Squarespace.Singletons.InsertPointController}},divideSelectors:{value:""}}})},"1.0",{requires:["plugin","squarespace-layout-insert-point-controller","squarespace-attr-validators"]});
YUI.add("squarespace-social-authenticator",function(a){var d={loadingText:"Loading...",style:"flyout",width:480,overlay:0.5,closeOthers:!1,flyoutPointerDirection:"centered",primaryTabs:[{title:"Add Account",icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:a.Squarespace.DialogFields.MultiOption,config:{name:"caption-position",hideDisabled:!0,defaultValue:"normal",className:"round square button icon32",iconDropPx:32,columns:4,options:[{icon:"facebook",title:"Facebook",value:"facebook"},
{icon:"twitter",title:"Twitter",value:"twitter"},{icon:"google",title:"Google",value:"googleauth2"},{icon:"tumblr",title:"Tumblr",value:"tumblr"},{icon:"dropbox",title:"Dropbox",value:"dropbox"},{icon:"foursquare",title:"Foursquare",value:"foursquare"},{icon:"instagram",title:"Instagram",value:"instagram"},{icon:"flickr",title:"Flickr",value:"flickr"},{icon:"youtube",title:"Youtube",value:"youtube"},{icon:"vimeo",title:"Vimeo",value:"vimeo"},{icon:"linkedin",title:"LinkedIn",value:"linkedin"},{icon:"dribbble",
title:"Dribbble",value:"dribbble"},{icon:"pinterest",title:"Pinterest",value:"pinterest"},{icon:"smugmug",title:"SmugMug",value:"smugmug"},{icon:"fivehundredpix",title:"500px",value:"fivehundredpix"},{icon:"email",title:"Email",value:"email"},{icon:"github",title:"Github",value:"github"}]}}]}]},b=function(){return function(b,c){c=c||"username";var d=c.slice(0,1).toUpperCase()+c.slice(1);b=b.slice(0,1).toUpperCase()+b.slice(1);return{loadingText:"Loading...",style:"flyout",width:385,overlay:0.5,flyoutPointerDirection:"centered",
closeOthers:!1,tabs:[{title:"Connect to "+b,icon:"/universal/images-v6/icons/icon-plus-16-light.png",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Enter your "+b+" account "+c+" to connect it to your Squarespace site. <strong>Please be sure this information is correct.</strong>",padding:[10,10]}},{ctor:a.Squarespace.DialogFields.Text,config:{"strings.title":b+" "+d,name:"username",submitOnEnter:!0}}]}],buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Connect to "+
b}]}}}(),c=b("dribbble"),e=b("pinterest"),g=b("smugMug","nickname"),f=function(a){a=b(a);a.tabs[0].title="Add Email";a.tabs[0].fields[0].text="Enter your Email Address to add it to your Squarespace site. <strong>Please be sure this information is correct.</strong>";a.tabs[0].fields[1].config["strings.title"]="Email Address";a.buttons[1].title="Add Email";return a}("email");a.Squarespace.SocialAuthenticator=a.Base.create("socialAuthenticator",a.Base,[],{initializer:function(){this._oauthClient=new a.Squarespace.OAuthAuthenticator},
addAccount:function(){var b=new a.Squarespace.EditingDialog(d);b.show();b.getField("caption-position").set("optionClickCb",a.bind(function(c){b.cancel();switch(c){case "smugmug":var d=new a.Squarespace.EditingDialog(g);d.once("send-requested",function(){this._startOAuth(c,null,{nickname:d.getData().username});d.cancel()},this);d.show();break;case "dribbble":case "email":case "pinterest":this._createNonOAuthAccount(c);break;default:this._startOAuth(c)}b.cancel()},this))},_buildNicknameDialog:function(b){switch(b){case a.Squarespace.ExternalServiceProviders.DRIBBBLE:b=
c;break;case a.Squarespace.ExternalServiceProviders.PINTEREST:b=e;break;case a.Squarespace.ExternalServiceProviders.EMAIL:b=f;break;default:return null}return new a.Squarespace.EditingDialog(b)},_createNonOAuthAccount:function(b){var c=a.Squarespace.ExternalServiceProviders[b.toUpperCase()],d=this._buildNicknameDialog(c);d.once("send-requested",function(){a.Data.sendForm(d,{url:"/api/config/CreateNonOAuthAccount",data:{service:c},success:function(a){d.close();this._refreshConnectedAccounts()}},this)},
this);d.show()},_startOAuth:function(a,b,c){this._oauthClient.once("oauth-completed",function(){this.fire("oauth-completed");this._refreshConnectedAccounts()},this);this._oauthClient.authenticate(a,b,c)},reauthenticate:function(a,b){this._oauthClient.once("oauth-completed",function(){this.fire("oauth-completed")},this);this._oauthClient.authenticate(a,b)},_refreshConnectedAccounts:function(){a.Data.get({url:"/api/config/GetSocialAccounts",success:function(a){Static.SQUARESPACE_CONTEXT.connectedAccounts=
a.connectedAccounts;this.fire("account-added")}},this)}},{ATTRS:{accountTypes:{value:[]}}})},"1.0",{requires:"base base-build squarespace-oauth-authenticator squarespace-dialog squarespace-dialog-multi-option squarespace-dialog-description squarespace-dialog-text".split(" ")});
